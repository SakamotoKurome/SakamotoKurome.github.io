<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ArchLinux | Sakamoto Kurome</title>
<meta name="keywords" content="Unix, Linux, ArchLinux" />
<meta name="description" content="Installation guide Arch Linux 安装使用教程 Archlinux 简明指南 给 GNU/Linux 萌新的 Arch Linux 安装指南 了解 Archlinux 为什么使用 Linux？ 简单来说，现在世界上流行的 PC 操作系统有三个，Windows，">
<meta name="author" content="Sakamoto Kurome">
<link rel="canonical" href="https://sakamotokurome.github.io/posts/archlinux/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sakamotokurome.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sakamotokurome.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sakamotokurome.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sakamotokurome.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sakamotokurome.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.90.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://sakamotokurome.github.io/custom.css">
<meta name="google-site-verification" content="i2r403EffR8m-KBf7EHi6AYg7tfnMshaXTAynoYPnpE" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2Y212LPQ2"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-K2Y212LPQ2', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="ArchLinux" />
<meta property="og:description" content="Installation guide Arch Linux 安装使用教程 Archlinux 简明指南 给 GNU/Linux 萌新的 Arch Linux 安装指南 了解 Archlinux 为什么使用 Linux？ 简单来说，现在世界上流行的 PC 操作系统有三个，Windows，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sakamotokurome.github.io/posts/archlinux/" />
<meta property="og:image" content="https://sakamotokurome.github.io/Distributions/archlinux-logo-dark.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-20T09:24:53&#43;08:00" />
<meta property="article:modified_time" content="2022-08-20T09:24:53&#43;08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://sakamotokurome.github.io/Distributions/archlinux-logo-dark.png" />
<meta name="twitter:title" content="ArchLinux"/>
<meta name="twitter:description" content="Installation guide Arch Linux 安装使用教程 Archlinux 简明指南 给 GNU/Linux 萌新的 Arch Linux 安装指南 了解 Archlinux 为什么使用 Linux？ 简单来说，现在世界上流行的 PC 操作系统有三个，Windows，"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sakamotokurome.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ArchLinux",
      "item": "https://sakamotokurome.github.io/posts/archlinux/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ArchLinux",
  "name": "ArchLinux",
  "description": "Installation guide Arch Linux 安装使用教程 Archlinux 简明指南 给 GNU/Linux 萌新的 Arch Linux 安装指南 了解 Archlinux 为什么使用 Linux？ 简单来说，现在世界上流行的 PC 操作系统有三个，Windows，",
  "keywords": [
    "Unix", "Linux", "ArchLinux"
  ],
  "articleBody": " Installation guide Arch Linux 安装使用教程 Archlinux 简明指南 给 GNU/Linux 萌新的 Arch Linux 安装指南  了解 Archlinux 为什么使用 Linux？ 简单来说，现在世界上流行的 PC 操作系统有三个，Windows，Linux 与 macOS。\n如果你是计算机相关专业的学生或者从业者，非常建议你使用 Linux 作为自己的日常系统。在使用 Linux 系统的过程中，可以无形中接触到各个方面的计算机知识，并且在未来的工作中也会为你带来相关方面的优势。 macOS 在一些方面（即大致为 BSD 与 GNU/Linux 各方面的区别 )与 Linux 的操作并不同，并且由于其封闭的特性，我们不建议使用。Windows 在很多编程环境的配制过程中异常痛苦，且会出现各种各样的问题，强烈不建议使用 Windows 进行编程(除非你学的就是 Windows 系统编程)。\n更重要的是，GNU/Linux 是自由软件运动的相关重要产物。自由软件运动(free software movement)拒绝专有软件并推广自由软件,它的终极目标在于解放网络世界中的每个人——即每个电脑用户。每个人都应拥有完全掌控所运行软件的权利。自由软件有如下四项原则：\n 自由度 0：无论用户出于何种目的，必须可以按照用户意愿，自由地运行该软件。 自由度 1：用户可以自由地学习并修改该软件，以此来帮助用户完成用户自己的计算。作为前提，用户必须可以访问到该软件的源代码。 自由度 2：用户可以自由地分发该软件的拷贝，这样就可以助人。 自由度 3：用户可以自由地分发该软件修改后的拷贝。借此，用户可以把改进后的软件分享给整个社区令他人也从中受益。作为前提，用户必须可以访问到该软件的源代码。  如果你只是一个普通用户，你一定见识过没有经过你的授权，电脑被装上了成堆的流氓软件的类似经历。专有软件不仅在各个维度强奸着用户，更包含着难以想象的恶意功能。用户的数据，隐私等重要信息会轻而易举被大公司们收集走，并加以滥用，这成为业内公开的秘密已是不争的事实。在专用软件有同类的自由软件替代时，强烈建议你迁移至自由软件。本书会同时记录专有软件与自由软件，因为如果完全摒弃专有软件，一定会直接将很多人阻挡在 linux 之外，这不是我们所希望的，我们希望先将更多人接纳到 GNU/Linux 中，至少这是踏出的第一步。但这并不代表我们支持使用专有软件，我们希望你至少可以先踏入 linux，逐渐使用自由软件替代专有软件。专有软件在本书中仅作简要记录，不会详细描述，因为我们不希望你长期依赖于它。只要某个专有软件有足够优秀的自由软件替代品出现，我们就会移除本教程中的那个专有软件。专有软件在本书中会被角标专有或描述额外标记。如果你是有能力的开发者，更希望你可以开发出替代某些专有软件的自由软件。\n最后，如果你想尝试完全免费的系统，或是喜欢探索充满新鲜与挑战的事物，Linux 也是你不可错过的体验。\n为什么使用 Arch Linux？  Archlinux 的许多特点如同双刃剑，既是优点，也是缺点\n 简洁 Archlinux 将简洁定义为：避免任何不必要的添加、修改和复杂增加。简单来说，Archlinux 是一个可以让用户自己动手打造的操作系统。从安装到管理，Archlinux 放手让用户处理一切。\n用户可以自己决定使用哪种桌面环境、安装哪些组件和服务。这种精细化的控制能够赋予你一个精简的操作系统，可以让用户自由选择所需的组件来构建属于用户自己的系统。\n但也正因为此配置 Archlinux 相对于其它 Linux 发行版来说是繁琐。但繁琐是自由的代价。如果你是一个 DIY 爱好者，那么相信你会爱上 Archlinux 的 ❤️。\n滚动更新（现代） 滚动更新（rolling update）是指软件开发中经常性将更新发送到软件的概念。相较于滚动发行，有标准版本和小数点版本的版本号开发模式，必需通过重新安装以取代先前的发行版。Archlinux 是没有版本概念的，它始终保持最新的状态，通俗的理解就相当于把发行版比喻为一部车，ubuntu 更新就是换一部新的，而 Archlinux 就是把车里面旧的配件换成新的。\nArchlinux 是一个滚动发行版，这意味着：\n 新的内核和应用程序版本一经发布，就会立即向用户推送 当大多数其它 Linux 发行版还在提供旧的 Linux 内核版本时，Archlinux 会迅速向用户提供最新的内核 而软件也是如此。如果 Archlinux 仓库中的软件发布了新版本，Archlinux 用户通常会比其他用户先获得新版本 在滚动发行模式下，一切都是新鲜和前沿的。用户不必把操作系统从一个版本升级到另一个版本，只要使用 pacman 的升级命令，便会始终保持最新的版本  实用 Archlinux 注重实用性，避免意识形态之争。最终的设计决策都是由开发者的共识决定。开发者依赖基于事实的技术分析和讨论，避免政治因素，不会被流行观点左右。\nArchlinux 的仓库中包含大量的软件包和编译脚本。用户可以按照需要自由选择。仓库中既提供了开源、自由的软件，也提供了闭源软件（大部分闭源软件在 AUR 仓库中）。实用性大于意识形态。\n以用户为中心 许多 Linux 发行版都试图变得更“用户友好”，Archlinux 则一直是且永远会是“以用户为中心”。Archlinux 是为了满足贡献者的需求，而不是为了吸引尽可能多的用户。Archlinux 适用于乐于自己动手的用户，他们愿意花时间阅读文档，解决自己的问题。\nArchlinux 鼓励每一个用户 参与 和贡献，报告和帮助修复 bugs，提供软件包补丁和参加核心 项目 —— Archlinux 开发者都是志愿者，通过持续的贡献成为团队的一员。\nArchers 可以自行贡献软件包到 Arch 用户仓库（AUR）；提升 archWiki 文档质量；在 论坛、邮件列表、IRC 中给其他用户提供技术支持. Archlinux 是全球很多用户的选择，已经有很多 国际社区 提供帮助和文档翻译。\n同样的，若希望为本指南做出贡献，以帮助更多的人，请参阅 贡献指南。\nArch 用户仓库（AUR） AUR 即 Arch 用户仓库（Arch User Repository）。它包含名为 PKGBUILD 的包描述，它可让用户使用 makepkg 从源代码编译软件包，然后通过 pacman 安装。\n创建 AUR 的目的是组织和共享社区中的新软件包，并帮助加速将流行的软件包纳入社区仓库。进入官方仓库的大量新软件包都从 AUR 开始。在 AUR 中，用户可以贡献自己的软件包构建（PKGBUILD 和相关文件）。AUR 社区可以对 AUR 中的软件包进行投票。如果一个软件包变得足够流行（且具有兼容的许可证和良好的打包技术），那么可以将其加入 pacman 直接访问的社区仓库中。\n激进的内核更新机制 Archlinux 在更新内核的时候会立即删除旧内核（因为内核也是一个软件包 linux / linux-zen…，由 pacman 更新）\n立即删除旧的内核要求 Archlinux 必须重启来加载新的内核，否则容易发生诡异的问题。这是因为 Linux 所谓的“内核”包含有大量的动态加载模块，如果在某次启动后，某个模块没有被加载过，然后系统内核更新了并且删除了旧的内核，那么这些模块将永远不能被加载了——因为它们随着旧内核被删掉了。除非用户重启系统以完整切换到新的内核以使用新版的动态加载模块。\n笔者曾经就因为在升级内核后插上声卡无法工作而感到困惑，后来才意识到问题所在。所以建议在更新内核后重新启动系统以避免问题的产生。（win10 更新也要重启，对吧？）\n软件包管理体系 不同于 Debian 系列的 apt / dpkg 和 Red Hat 系列的 dnf（yum）/ rpm 包管理体系，Archlinux 只用了一个工具 pacman 就解决了获取和安装两个功能。这降低了为 Archlinux 制作软件包的门槛，这也是 AUR 几乎能涵盖整个 Linux 软件生态的主要原因。但是这也导致 pacman 不支持虚包（virtual package），虚包是一个通用名称，适用于一组提供类似的基本功能的包中的任何一个包。\n由社区创建、支持和拥有 Ubuntu 由 Canonical 支持，Fedora 来自 Red Hat（现在是 IBM 的一部分），openSUSE 来自 SUSE。这些主流发行版都是企业支持的。\n这本身并不是坏事或过错，但是有一些人不喜欢企业参与开源项目。\n正如 Debian 一样，Archlinux 是为数不多的仅由社区创建、支持和拥有的的 Linux 发行项目之一。\n安装前的准备 Arch Linux 能运行在最少 512 MiB 内存的 x86_64 机器上，但从安装媒介启动系统并成功安装需要更多的内存。[1] 基本安装将占用小于 2 GiB 的存储空间。由于安装过程中需要从远程存储库获取软件包，计算机将需要一个有效的互联网连接。\n由于当前 UEFI 已普及十余年，安装将全部以 UEFI+GPT 的形式进行，传统 BIOS 方式不再赘述。\n确保网络环境 如果你可以使用路由器分接出来的网线，以 dhcp 的方式直接上网，那么不用准备什么。如果你的环境只能使用无线网络安装，需要事先把自己所用的 wifi 名称改成自己能记住的英文名称。因为安装时无法显示和输入中文名的 wifi，你会看到一堆不知道是什么的方块，并且在安装过程中你将没有办法输入中文的无线名称进行连接。虽然通过一些繁琐的步骤可以解决终端中文的问题，但是显然这么做在安装 Arch Linux 时毫无必要。\n其次，有些笔记本电脑上存在无线网卡的硬件开关或者键盘控制，开机后安装前需要确保你的无线网卡硬件开关处于打开状态。\n刻录启动优盘 准备一个 2G 以上的优盘，刻录一个安装启动盘。安装镜像 iso 在下载页面下载，你需要选择通过磁力链接或 torrent 下载，下载完成后，还需要在 Archlinux 下载页面下载PGP signature签名文件(不要从镜像源下载签名文件)，将签名文件和 iso 镜像置于同一文件夹，随后进行对镜像的签名校验，以保证下载的镜像是完整，无错误的，未被篡改的。在一台已经安装 GnuPG 的系统上，执行以下命令，确保输出完好的签名。具体镜像名根据名字自行修改。\n$ gpg --keyserver-options auto-key-retrieve --verify Archlinux-202x.0x.01-x86_64.iso.sig 注意，这里的签名校验非常重要，这可以保证你的安装镜像是未被篡改的，同时可以保证你在使用安装盘安装系统时，用正确的公钥校验安装包。\n另外，在一台已经安装 Arch Linux 的计算机上可以通过以下方式验证：\n$ pacman-key -v Archlinux-version-x86_64.iso.sig  Windows 下推荐使用ventoy或者Rufus或者etcher进行优盘刻录。三者皆为自由软件。具体操作请自行查阅，都非常简单。\nLinux 下可以直接用 dd 命令进行刻录。注意 of 的参数为 sdx,不是 sdx1 sdx2 等。\n$ sudo dd bs=4M if=/path/to/Archlinux.iso of=/dev/sdx status=progress oflag=sync  bs=4M 指定一个较为合理的文件输入输出块大小。 status=progress 用来输出刻录过程总的信息。 oflag=sync 用来控制写入数据时的行为特征。确保命令结束时数据及元数据真正写入磁盘，而不是刚写入缓存就返回。\n 进入主板 BIOS 进行设置 插入优盘并开机。在开机的时候，按下 F2/F8/F10/DEL 等(取决与你的主板型号，具体请查阅你主板的相关信息)按键，进入主板的 BIOS 设置界面。\n关闭主板设置中的 Secure Boot Arch Linux 安装镜像不支持安全启动（Secure Boot）。要引导安装媒介，需要禁用安全启动。在类似名为 security 的选项卡中，找到一项名为 Secure Boot(名称可能略有差异)的选项，选择 Disable 将其禁用。如果需要，可在完成安装后重新配置 安全启动。\n 具体怎么关因为每种电脑的方法不一样于是汝要自己 STFW (Search the f**king Web，搜索一下) 了\n 调整启动方式为 UEFI 在某些旧的主板里，需要调整启动模式为 UEFI,而非传统的 BIOS/CSM。在类似名为 boot 的选项卡中，找到类似名为 Boot Mode 的选项，确保将其调整为 UEFI only，而非 legacy/CSM。\n调整硬盘启动顺序 在类似名为 boot 的选项卡中，找到类似名为 Boot Options(名称可能略有差异)的设置选项，将 USB 优盘的启动顺序调至首位。\n准备安装 最后保存 BIOS 设置并退出，一般的按键是 F10。此时系统重启，不出意外你应该已经进入 Archlinux 的安装界面。\n基础安装 本节从安装最基础的无图形化 Archlinux 系统开始。官方安装指南\n如果想一边安装，一边使用 Lynx 查看本指南，可以使用 Alt+箭头 快捷键切换不同的控制台。\n键盘布局 控制台键盘布局默认为 us（美式键盘映射）。列出所有可用的键盘布局，可以使用：\n# ls /usr/share/kbd/keymaps/**/*.map.gz 如果您想要更改键盘布局，可以将一致的文件名添加进 loadkeys(1)，但请省略路径和扩展名。比如，要添加 德语 键盘布局：\n# loadkeys de-latin1 禁用 reflector 2020 年，Archlinux 安装镜像中加入了 reflector 服务，它会自己更新 mirrorlist（软件包管理器 pacman 的软件源）。在特定情况下，它会误删某些有用的源信息。这里进入安装环境后的第一件事就是将其禁用。也许它是一个好用的工具，但是很明显，因为地理上造成的特殊网络环境，这项服务并不适合启用。\n# systemctl stop reflector.service 再次确保是否为 UEFI 模式 在一系列的信息刷屏后，可以看到已经以 root 登陆安装系统了，请用下列命令列出 efivars 目录：\n# ls /sys/firmware/efi/efivars 如果命令结果显示了目录且没有报告错误，则系统以 UEFI 模式引导。 如果目录不存在，则系统可能以 BIOS 模式 (或 CSM 模式) 引导。\n连接网络 一般来说，你连接的网络几乎均可以通过 DHCP 的方式来进行 IP 地址和 DNS 的相关设置，你无需进行额外操作。在没有合适网络的情况下，使用手机的移动热点也是很方便的选择。如果你的网络环境需要配置静态 IP 和 DNS,请自行参考 Arch Wiki。\n对于有线连接来说，直接插入网线即可。\n对于无线连接，则需进行如下操作进行网络连接。\n无线连接使用 iwctl 命令进行，按照如下步骤进行网络连接：\niwctl #执行iwctl命令，进入交互式命令行 device list #列出设备名，比如无线网卡看到叫 wlan0 station wlan0 scan #扫描网络 station wlan0 get-networks #列出网络 比如想连接YOUR-WIRELESS-NAME这个无线 station wlan0 connect YOUR-WIRELESS-NAME #进行连接 输入密码即可 exit #成功后exit退出 可以等待几秒等网络建立链接后再进行下面测试网络的操作。\nping www.gnu.org  如果你不能正常连接网络，首先确认系统已经启用网络接口[1]。\nip link #列出网络接口信息，如不能联网的设备叫wlan0 ip link set wlan0 up #比如无线网卡看到叫 wlan0 如果随后看到类似Operation not possible due to RF-kill的报错，继续尝试rfkill命令来解锁无线网卡。\nrfkill unblock wifi  如果汝明明有无线网卡却没识别的话，有可能汝是某无线网卡厂商受害者😂😂。这时可以：\n 有 Android 手机的话，手机连 WiFi ，然后用“USB 网络共享”共享给电脑。 找个 USB 无线网卡插上 😂 连有线   移动宽带调制解调器（移动网卡） - 使用 mmcli 实用程序连接到移动网络。\n 另外，如果汝连接的网络需要网页登录（Captive Portal）,可以用 elinks 碰碰运气 😂\n# elinks http://  用汝的门户的 URL 替换  如果不知道的话，随便访问一个 HTTP 网站试试，应该就会被重定向到 Portal 了  更新系统时间 使用 timedatectl(1) 确保系统时间是准确的：用 timedatectl set-ntp true 保证时间同步 。\ntimedatectl set-ntp true #将系统时间与网络时间进行同步 timedatectl status #检查服务状态 因为有不少操作需要准确的时间呐，例如 HTTPS 和 GnuPG 都需要准确的时间来验证证书的有效性。\n但是如果因为各种原因没法同步的话，那就只好手动设置咯~\n# timectl set-time \"yyyy-MM-dd hh:mm:ss\" # timectl set-time \"2016-10-28 17:39:42\" 分区 系统如果识别到磁盘，就会将其分配为一个块设备，如 /dev/sda、/dev/nvme0n1 或 /dev/mmcblk0。可以使用 lsblk 或者 fdisk -l 查看。结果中以 rom、loop 或者 airoot 结尾的设备可以被忽略。\n对于一个选定的设备，以下分区是必须要有的：\n 一个根分区（挂载在 根目录）/； 要在 UEFI 模式中启动，还需要一个 EFI 系统分区。  如果需要创建多级存储例如 LVM、disk encryption 或 RAID，请在此时完成。\n使用 Ext4 这里总共设置三个分区，是一个我们认为较为通用的方案。此步骤会清除磁盘中全部内容，请事先确认。\n EFI 分区[2]： /boot/efi 至少 300 MiB Linux swap (交换空间)： 大于 512 MiB Linux x86-64 根目录 ： / 剩余空间   这里根目录的大小仅为参考，一般来说个人日常使用的 linux 分配 100G 已经够用了。根目录最小建议不小于 50G，根目录过小会造成无法更新系统软件包等问题。\n 首先将磁盘转换为 gpt 类型，这里假设比如你想安装的磁盘名称为 sdx。如果你使用 NVME 的固态硬盘，你看到的磁盘名称可能为 nvme0n1。\nlsblk #显示分区情况 找到你想安装的磁盘名称 parted /dev/sda #执行parted，进入交互式命令行，进行磁盘类型变更 (parted)mktable #输入mktable New disk label type? gpt #输入gpt 将磁盘类型转换为gpt 如磁盘有数据会警告，输入yes即可 quit #最后quit退出parted命令行交互 接下来使用 cfdisk 命令对磁盘分区。进入 cfdisk 后的操作很直观，用键盘即可操作分配各个分区的大小与格式。一般建议将 EFI 分区设置为磁盘的第一个分区，据说有些主板如果不将 EFI 设置为第一个分区，可能有不兼容的问题。其中 EFI 分区选择EFI System类型，其余两个分区选择Linux filesystem类型。\ncfdisk /dev/sda #来执行分区操作,分配各个分区大小，类型 fdisk -l #分区结束后， 复查磁盘情况 格式化\n建立好分区后，需要对分区用合适的文件系统进行格式化。这里用mkfs.ext4命令格式化根分区与 home 分区，用mkfs.vfat命令格式化 EFI 分区。如下命令中的 sdax 中，x 代表分区的序号。格式化命令要与上一步分区中生成的分区名字对应才可以。\n磁盘若事先有数据，会提示你: ‘proceed any way?’ 按 y 回车继续即可。\nmkfs.ext4 -L ROOT /dev/sda3 #格式化根目录和home目录的两个分区 mkfs.fat -F 32 -n EFI /dev/sda1 #格式化 EFI 分区 如果创建了 交换分区，请使用 mkswap(8) 将其初始化：\nmkswap -L SWAP /dev/sda2 #交换空间分区 挂载\n首先还是用 lsblk 确定一下分区的名称，为了以防万一记得加上 -f 参数\n# lsblk -f 在挂载时，挂载是有顺序的，先挂载根分区，再挂载 EFI 分区。 这里的 sdax 只是例子，具体根据你的实际情况来。\n$ mkdir -p /mnt/arch $ mount /dev/sda3 /mnt/arch $ mkdir -p /mnt/arch/boot/efi $ mount /dev/sda1 /mnt/arch/boot/efi 如果创建了 swap 交换空间卷，请使用 swapon(8) 启用它：\nswapon /dev/sda2 #交换空间分区 使用 Btrfs 纵观 Btrfs 的历史，可以说 Btrfs 未来的发展是道阻且长的。也让我们感受到开源社区也并不是一根绳上的蚂蚱 —— 开源社区之间也有着各种各样的分歧。\n但不管怎么说，Btrfs 的未来现在来看是光明的；我们也可以在 archlinux 上享受到 Btrfs 文件系统的特性带来的好处：\n 快照 —— archlinux 作为滚动发行版，若滚挂了可以使用 Btrfs 的快照特性快速回滚  若使用传统的 ext4 文件系统，我们可以使用 timeshift 的 RSYNC 模式进行增量备份。但是，一般来说 RSYNC 方式的快照大小略大于当前实际使用大小，也就是说实际上开启了 timeshift 的 RSYNC 模式快照相当于磁盘可用空间直接少了一半多。因为虽然 RSYNC 方式的快照是增量的，但历史最久远的快照依然是完整备份，随后才是增量的   透明压缩 —— 可以大大减少磁盘的使用空间（压缩率大概在 10% 左右）  首先我们需要将整一个分区格式化为 Btrfs 文件系统。使用如下命令进行格式化：\n# mkfs.btrfs -L myArch /dev/sda3 -L 选项后指定该分区的 LABLE，这里以 myArch 为例，也可以自定义，但不能使用特殊字符以及空格，且最好有意义\n为了创建子卷，我们需要先将 Btrfs 分区挂载到 /mnt 下\n# mount -t btrfs -o compress=zstd /dev/sda3 /mnt/arch  -t 选项后指定挂载分区文件系统类型 -o选项后添加挂载参数：  compress=zstd —— 开启透明压缩    通过以下命令创建两个 Btrfs 子卷，之后将分别挂载到 / 根目录和 /home 用户主目录：\nbtrfs subvolume create /mnt/arch/@ #创建 / 目录子卷 btrfs subvolume create /mnt/arch/@home #创建 /home 目录子卷 通过以下命令复查子卷情况：\n# btrfs subvolume list -p /mnt/arch 子卷创建好后，我们需要将 /mnt 卸载掉，以挂载子卷：\n# umount /mnt/arch 在挂载时，挂载是有顺序的，需要从根目录开始挂载。使用如下命令挂载子卷：\n# mount -t btrfs -o subvol=/@,compress=zstd /dev/sda3 /mnt/arch # mkdir /mnt/arch/home # mount -t btrfs -o subvol=/@home,compress=zstd /dev/sda3 /mnt/arch/home # mkdir -p /mnt/arch/boot/efi # mount /dev/sda1 /mnt/arch/boot/efi # swapon /dev/sda2 镜像源的选择 文件 /etc/pacman.d/mirrorlist 定义了软件包会从哪个镜像源下载。使用如下命令编辑镜像列表：\n# mv /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.bak # cat  /etc/pacman.d/mirrorlist 在列表中越前的镜像在下载软件包时有越高的优先权。添加北外、中科大或者清华的放在最上面即可。\nServer = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch 如果其速度不佳，可以手动指定其他镜像源。完整的镜像源列表可参考官方镜像源生成器。\n然后用 pacman -Syy 刷新一下软件包数据库。\n# pacman -Syy 安装系统 必须的基础包\n# pacstrap /mnt/arch base base-devel linux linux-headers linux-firmware  base 元包：包含基本系统所需的依赖，如果汝在别的地方见到说 base 是个软件包组的说法，忘了它吧…… 要通过 AUR 或者 ABS 编译安装软件包,还需要安装 base-devel 啦 （现在它还是个软件包组）。 然后大多数情况下，汝还需要一个内核。目前官方仓库里有这些  linux : 当前的稳定版本内核 linux-lts : 当前的长期支持版本内核 linux-hardened : 来自 https://github.com/anthraxx/linux-hardened 的安全强化内核 linux-zen : 来自 https://github.com/zen-kernel 的预载一定量优化的内核， 有人觉得在心理上会觉得跑得比 linux 快…….   对于大多数情况下，汝可能会考虑安装固件包 linux-firmware 。  必须的功能性软件\n# pacstrap /mnt/arch dhcpcd iwd vim e2fsprogs dosfstools bash-completion man-db   dhcpcd 不论有限还是无限网络都需要\n  要通过刚刚用过的 iwctl 连接无线网络的话，记得安装 iwd 。\n  一个文字编辑器，例如刚才用到的 nano 或 vim 。建立自己的 .vimrc\n$ cp /usr/share/vim/vim82/defaults.vim .vimrc   一些文件系统工具，例如 操作 ext4 的 e2fsprogs，操作 FAT/FAT32 的 dosfstools， 需要读写其它文件系统的话，可以在 https://wiki.Archlinux.org/index.php/File_system 找到相应的用户空间工具。\n  访问 man 和 info 页面中文档的工具：man-db，man-pages 和 texinfo。\n  诶，base 组不包含 live 环境中所有的软件包么？是的， https://projects.Archlinux.org/archiso.git/tree/configs/releng/packages.x86_64 列出了在 ISO 中的 live 环境中安装的但不在 base 包中的软件包。\n 可选，安装 openssh\n# pacstrap /mnt/arch openssh # cat  /mnt/arch/etc/ssh/sshd_config PermitRootLogin yes PasswordAuthentication yes 生成 fstab 文件 fstab 用来定义磁盘分区\n  use UUID\n# genfstab -U /mnt/arch  /mnt/arch/etc/fstab   use Label\n# genfstab -L /mnt/arch  /mnt/arch/etc/fstab   复查一下 /mnt/etc/fstab 确保没有错误\n# cat /mnt/arch/etc/fstab change root 把环境切换到新系统的/mnt 下\n# arch-chroot /mnt/arch 时区设置 设置时区，在/etc/localtime 下用/usr 中合适的时区创建符号连接。如下设置上海时区。\n# ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 随后进行硬件时间设置，将当前的正确 UTC 时间写入硬件时间。\n# hwclock --systohc 这个命令假定已设置硬件时间为 UTC 时间，并调整时间漂移:。详细信息请查看 System time#Time standard。\n如果汝正在尝试安装双系统，在进入 Windows 以后可能会发现 Windows 的时间不对了 ，因为 Windows 默认的硬件时钟是 localtime（\n可以用一条注册表键值让 Windows 使用 UTC 作为硬件时钟（在早于 Windows 7 的系统上发现过这样做会出现一些严重的问题： http://www.cl.cam.ac.uk/~mgk25/mswish/ut-rtc.html ）\nreg add \"HKEY_LOCAL_MACHINESystemCurrentControlSetControlTimeZoneInformation\" /v RealTimeIsUniversal /d 1 /t REG_DWORD /f 设置 Locale 进行本地化 Locale 决定了地域、货币、时区日期的格式、字符排列方式和其他本地化标准。\n编辑 /etc/locale.gen，在最后添加：\n# cat  /etc/locale.gen en_US.UTF-8 UTF-8 zh_CN.UTF-8 UTF-8 然后使用如下命令生成 locale。\n# locale-gen 向 /etc/locale.conf 导入内容\n# echo 'LANG=en_US.UTF-8'  /etc/locale.conf 如果需要修改 #键盘布局，可编辑 vconsole.conf(5) 使其长期生效，例如：\n# vim /etc/vconsole.conf KEYMAP=de-latin1 设置主机名 首先在/etc/hostname设置主机名\n# vim /etc/hostname myarch 加入你想为主机取的主机名，这里比如叫 myarch。\n接下来在/etc/hosts设置与其匹配的条目。\n# vim /etc/hosts 加入如下内容\n127.0.0.1 localhost ::1 localhost 127.0.1.1 myarch.localdomain\tmyarch  某些情况下如不设置主机名，在 KDE 下可能会存在网络情况变更时无法启动 GUI 应用的问题，在终端中出现形如No protocol specified qt.qpa.xcb: could not connect to display的错误，这种情况较为少见[3][4][5]。\n Initramfs Creating a new initramfs is usually not required, because mkinitcpio was run on installation of the kernel package with pacstrap.\nFor LVM, system encryption or RAID, modify mkinitcpio.conf(5) and recreate the initramfs image:\n# mkinitcpio -P 具体例子查看 dm-crypt/Encrypting an entire system\n为 root 用户设置密码 # passwd root 安装微码 pacman -S intel-ucode #Intel pacman -S amd-ucode #AMD 安装引导程序 # pacman -S grub efibootmgr # pacman -S os-prober # grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB  rub是启动引导器，efibootmgr被 grub 脚本用来将启动项写入 NVRAM。 如果汝的硬盘上没有其它系统，那么可以不用装 os-prober --efi-directory=/efi —— 将 grubx64.efi 安装到之前的指定位置（EFI 分区） --bootloader-id=GRUB —— 取名为 GRUB  接下来编辑/etc/default/grub 文件，去掉GRUB_CMDLINE_LINUX_DEFAULT一行中最后的 quiet 参数，同时把 log level 的数值从 3 改成 5。这样是为了后续如果出现系统错误，方便排错。同时在同一行加入 nowatchdog 参数，这可以显著提高开关机速度。\n# vim /etc/default/grub GRUB_CMDLINE_LINUX_DEFAULT=\"loglevel=5 nowatchdog\" 最后生成 GRUB 所需的配置文件\n# grub-mkconfig -o /boot/grub/grub.cfg 我们在之前的命令中指定了 bootloader-id 为 GRUB，这一般不会出现问题。然而在某些主板安装完成后，你会发现没有 nvme 启动条目。这是因为某些主板的 UEFI 固件在显示 UEFI NVRAM 引导条目之前，需要在特定的位置存放可引导文件，不支持自定义存放 efi 文件[6]。解决方式是使用--removable 参数解决一些主板 NVRAM 的兼容性问题（包括虚拟机）。\n# grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB --removable # grub-mkconfig -o /boot/grub/grub.cfg 除此之外，如果你的主板是一些较老的型号，如 intel 9 系列以下或者较老 AMD 的主板，它们很可能不支持从 nvme 启动系统，虽然可以通过修改 BIOS 加入 NVME 支持模块来解决，但这不在本文讨论范围内。\n 为了引导 win10，则还需要添加新的一行 GRUB_DISABLE_OS_PROBER=false\n# GRUB boot loader configuration ... GRUB_DISABLE_OS_PROBER=false 如果汝安装了 os-prober 然后看到这样的警告：\n WARNING: Failed to connect to lvmetad. Falling back to device scanning.\n 这是因为在 chroot 环境里面 /run 是不可用的。只要每个步骤都做对了，这些警告不会影响系统启动， 汝可以放心继续进行下一步的系统安装咯。 如果汝重启之后没看到 Windows 的启动项，试着进入 Arch 之后再运行那条生成配置文件的命令。\n完成安装 exit # 退回安装环境# umount -R /mnt/arch # 卸载新分区 reboot # 重启 注意，重启前要先拔掉优盘，否则你重启后还是进安装程序而不是安装好的系统。重启后，开启 dhcp 服务，即可连接网络\nsystemctl enable --now dhcpcd #立即启动dhcp ping www.gnu.org #测试网络连接 若为无线链接，则还需要启动 iwd 才可以使用 iwctl 连接网络\nsystemctl enable --now iwd #立即启动iwd iwctl #和之前的方式一样，连接无线网络 到此为止，一个基础的，无 UI 界面的 Arch Linux 已经安装完成了。紧接着下一节，我们来安装图形界面。\n Archlinux 在 2021 年 4 月在安装镜像中内置了一个安装脚本，提供一些选项，即可快速安装。其和所有一键安装脚本类似，提供自动化，且不灵活的安装过程。不建议使用这种安装脚本，除了不灵活的原因，初学者也无法在这种安装过程中学到任何东西。如果你因为任何原因需要快速启动一个基础的 Archlinux 环境，那么可以尝试此脚本。\n 桌面环境与常用应用 官方文档: 安装后的工作 本节只介绍最基本的，能使系统真正意义上可用所需的组件\n注: 文档中带有 AUR 角标的软件代表是用户自行打包的第三方软件AUR，不在 Arch 官方支持范围内，可能会出现更新不及时、无法安装、使用出错等各种问题。如果遇到问题，你可自行去其 AUR 页面查看其他人的评论中是否有解决方法。如果不是实在没有官方支持的同类软件，则不建议使用。\n确保系统为最新 如果你在做完上一节的内容后，重启并放置过一段时间，那需要先按照上节末尾处的方式重新连接网络，然后更新系统。\npacman -Syyu #升级系统中全部包 准备非 root 用户 添加用户，比如新增加的用户叫 testuser\n# useradd -m -G wheel -s /bin/bash kurome  wheel附加组可sudo，以root用户执行命令 -m同时创建用户家目录  设置新用户 testuser 的密码\n# passwd kurome 编辑 sudoers 配置文件\n# pacman -S sudo # EDITOR=vim visudo 找到下面这样的一行，把前面的注释符号 # 去掉，:wq 保存并退出即可。\n#%wheel ALL=(ALL) ALL 这里稍微解释一下：\n %wheel —— 用户名或用户组，此处则代表是 wheel 组，% 是用户组的前缀 ALL= —— 主机名，此处则代表在所有主机上都生效（如果把同样的 sudoers 文件下发到了多个主机上） (ALL) —— 用户名，此处则代表可以成为任意目标用户 最后的 ALL —— 代表可以执行任意命令  几个更详细的例子:\n在 mailadmin 组里的用户可以作为 root 用户，在 snow 和 rain 这两台主机执行一些邮件服务器控制命令（命令之间用 , 分隔）：\n%mailadmin snow,rain=(root) /usr/sbin/postfix, /usr/sbin/postsuper, /usr/bin/doveadm 用户 whoami 可以在所有主机上以 root 用户不输入密码执行 rndc reload 这条命令（正常来说 sudo 都是要求输入调用方的密码的）：\nwhoami ALL=(root) NOPASSWD: /usr/sbin/rndc reload 当在 users 组里的用户以 sudo passwd 或者 sudo passwd root 方式运行命令的时候，可以直接把 root 用户的密 码 改掉，这真是太危险了！必须要把这两条命令禁止掉，但我们又希望用户可以通过 sudo passwd 修改其它用户的密码。那么我们可以在命令前面加上 ! 来表示不可执行的命令：\n%users ALL=(root) !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root 总结一下，语法如下：\n用户名/%用户组名 主机名=(目标用户名) 命令1, 命令2, !命令3 安装桌面环境 安装桌面环境需要的基础包 （就是 xorg 啦）\n# pacman -S xorg  xorg group includes xorg-server packages, packages from the xorg-apps group and fonts.  这时会让汝选择需要哪些软件包啦,其实大多数时候默认的就行……\n接下来挑一个喜欢的桌面环境包组装上咯~。咱这里就只举例 GNOME 、KDE 和 xfce 啦，其他官方支持的桌面环境可以去 https://wiki.Archlinux.org/index.php/Desktop_environment 查看\n  GNOME , 想要 GNOME 全家桶的话带上 gnome-extras\n# pacman -S gnome   KDE Plasma , 想要 KDE 全家桶的话用 kde-applications-meta 代替 。 kde-applications 会提示汝选择要安装哪些包。以及一个显示管理器， KDE 和 sddm 一起使用最好。\n# pacman -S plasma sddm kde-applications 或者只安装一些基本组件（例如文件管理器和终端模拟器）。\n# pacman -S plasma sddm kde-applications-meta   xfce4，xfce 不带显示管理器，所以要装个其他的（例如 lightdm，还要装一个 greeter）\n# pacman -S xfce4 xfce4-goodies lightdm lightdm-gtk-greeter 桌面环境大多数使用 NetworkManager ，xfce 的话，记得安装 network-manager-applet， 一个控制 NetworkManager 的小工具：\n# pacman -S network-manager-applet   配置 greeter sddm # systemctl enable sddm 设置交换文件 swap(可选) 在桌面环境中，交换分区或文件用来实现休眠(hibernate)的功能，即将当前环境保存在磁盘的交换文件或分区部分。除此之外，某些特定软件需要 swap 才可以正确运行。交换文件与分区性能相同，且交换文件更为灵活，可随时变更大小，增加与删除。[1]\nfallocate -l 4G /swapfile #创建4G的交换空间 大小根据需要自定 chmod 600 /swapfile #设置正确的权限 mkswap /swapfile #格式化swap文件 swapon /swapfile #启用swap文件 最后，向/etc/fstab 中追加如下内容：\n/swapfile none swap sw 0 0 KDE 自身提供开箱即用的睡眠功能(suspend)，即将系统挂起到内存，消耗少量的电量。休眠(hibernate)会将系统挂起到交换分区或文件，几乎不消耗电量。睡眠功能已可满足绝大多数人的需求，如果你一定需要休眠功能，可以参考官方文档设置休眠相关步骤。\n开启 32 位支持库 # vim /etc/pacman.conf 去掉[multilib]一节中两行的注释，来开启 32 位库支持。\n[multilib] Include = /etc/pacman.d/mirrorlist 最后:wq 保存退出，刷新 pacman 数据库\n# pacman -Syyu 重启电脑，即可看到欢迎界面，输入新用户的密码即可登录桌面\n添加中文社区仓库 在 /etc/pacman.conf 结尾处加入下面的文字，来添加 archlinuxcn 源。推荐的镜像源（选一个即可）也一并列出：\n$ vim /etc/pacman.conf [archlinuxcn] # 北京外国语大学 Server = https://mirrors.bfsu.edu.cn/archlinuxcn/$arch # 清华大学开源软件镜像站 Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch # 中国科学技术大学开源镜像站 Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch # 哈尔滨工业大学开源镜像站 Server = https://mirrors.hit.edu.cn/archlinuxcn/$arch # 华为开源镜像站 Server = https://repo.huaweicloud.com/archlinuxcn/$arch $ sudo pacman -Sy $ sudo pacman -S archlinuxcn-keyring  此外，还有其它镜像源在 archlinuxcn 官方 Github Repoopen in new window 列出，可以根据自己实际情况另行选择。 若安装 archlinuxcn-keyring 时报错，是由于密钥环的问题。可先按照 archlinuxcn 官方说明 执行其中的命令，再安装 archlinuxcn-keyring。  通过以下命令刷新 pacman 数据库并更新：\npacman -Syyu 安装基础功能包 进入桌面后，搜索 konsole。它是 KDE 桌面环境默认的命令行终端。\n首先先进行桌面环境中的网络设置：\n# 确保iwd开机处于关闭状态，其无线连接会与NetworkManager冲突 $ sudo systemctl disable iwd # 同上，立即关闭iwd $ sudo systemctl stop iwd # 确保先启动NetworkManager，并进行网络连接 若iwd已经与NetworkManager冲突 则执行完上一步重启一下电脑即可。 $ sudo systemctl enable --now NetworkManager 接下来安装一些基础功能包。\n# 识别NTFS格式的硬盘 $ sudo pacman -S ntfs-3g # 安装几个开源中文字体 一般装上文泉驿就能解决大多wine应用中文方块的问题 $ sudo pacman -S adobe-source-han-serif-cn-fonts wqy-zenhei # 安装谷歌开源字体及表情 $ sudo pacman -S noto-fonts-cjk noto-fonts-emoji noto-fonts-extra # 安装常用的火狐、谷歌浏览器 $ sudo pacman -S firefox chromium # 与dolphin同用右键解压 $ sudo pacman -S ark # 安装ark可选依赖 $ sudo pacman -S p7zip unrar unarchiver lzop lrzip # 确保Discover(软件中心）可用 需重启 $ sudo pacman -S packagekit-qt5 packagekit appstream-qt appstream # 图片查看器 $ sudo pacman -S gwenview # 一些工具 $ sudo pacman -S git wget kate bind  不要安装过多字体：在字体超过 255 种时，某些 QT 程序可能无法正确显示某些表情和符号，详见链接2。\n 设置 DNS 一般来说，如今大多电脑连接的路由器是可以自动处理 DNS 的，如果你的路由器不能处理，则需要额外进行 DNS 的设置。同时，如果使用 ISP 提供的默认 DNS,你的网络访问记录将存在更大的，被泄露或被当局存储记录的风险。除此之外，使用 ISP 提供的 DNS 还有可能将某些服务解析至一些已经失效或劣化的服务器。即使你的网络环境可以自动处理 DNS 设置，我们还是建议你使用可信的国际通用 DNS 设置。如下的配置将固定使用谷歌的 DNS,但是网络访问延迟可能增加。在阅读完随后的代理设置一节后，你的 DNS 请求将均通过代理发送，这将在 DNS 发送方面最大限度的保障你的隐私和安全。\nvim 编辑/etc/resolv.conf，删除已有条目，并将如下内容加入其中\nnameserver 8.8.8.8 nameserver 2001:4860:4860::8888 nameserver 8.8.4.4 nameserver 2001:4860:4860::8844 如果你的路由器可以自动处理 DNS,resolvconf 会在每次网络连接时用路由器的设置覆盖本机/etc/resolv.conf 中的设置，执行如下命令加入不可变标志，使其不能覆盖如上加入的配置[3][4]。\n$ sudo chattr +i /etc/resolv.conf 设置系统为中文 打开 System Settings  Regional Settings  Language - Add languages 中选择中文加入，再拖拽到第一位，Apply。\n再将System Settings  Regional Settings  Formats 中的值设为中文-简体中文(zh_CN)\n最后重新登陆即可。\n 很多人会错误的更改 System Settings  Regional Settings  Formats 中的值为中文蒙古(mn_CN)，默认，或者其他值，这会导致系统中一半英文一半中文。这里的值要保持默认的 en_US 或 zh_CN,或者改为你在 locale.gen 中添加的任意一种语言。\n 也可以用 su 切换到刚建立的用户，然后编辑 ~/.config/locale.conf 修改自己用户级别的 Locale，例如：\nLANG=zh_CN.UTF-8 LC_CTYPE=\"zh_CN.UTF-8\" LC_NUMERIC=\"zh_CN.UTF-8\" LC_TIME=\"zh_CN.UTF-8\" LC_COLLATE=\"zh_CN.UTF-8\" LC_MONETARY=\"zh_CN.UTF-8\" LC_MESSAGES=\"zh_CN.UTF-8\" LC_PAPER=\"zh_CN.UTF-8\" LC_NAME=\"zh_CN.UTF-8\" LC_ADDRESS=\"zh_CN.UTF-8\" LC_TELEPHONE=\"zh_CN.UTF-8\" LC_MEASUREMENT=\"zh_CN.UTF-8\" LC_IDENTIFICATION=\"zh_CN.UTF-8\" LC_ALL= 安装 yay AUR 为 Archlinux user repository。任何用户都可以上传自己制作的 AUR 包，这也是 Arch Linux 可用软件众多的原因。由于任何人都可上传，也存在对应的风险，一般选用大众认可的包即可。\n使用 yay 可以安装 AUR 中的包。执行如下命令安装 yay。\n$ sudo pacman -S yay 或者\n$ pacman -S --needed git base-devel $ git clone https://aur.Archlinux.org/yay-bin.git $ cd yay-bin $ makepkg -si 安装输入法 Fcitx5 官方文档 中文及日文输入法均体验良好。\n$ sudo pacman -S fcitx5-im #基础包组 $ sudo pacman -S fcitx5-chinese-addons #官方中文输入引擎 $ sudo pacman -S fcitx5-anthy #日文输入引擎 $ yay -S fcitx5-pinyin-moegirl #萌娘百科词库 $ sudo pacman -S fcitx5-pinyin-zhwiki #中文维基百科词库 $ sudo pacman -S fcitx5-material-color #主题 更多皮肤：\n fcitx5-nord fcitx5-gruvbox  设置环境变量：编辑文件 EDITOR=vim sudoedit /etc/environment 加入以下内容。konsole 以及 dolphin 都需要这些环境变量，倒是 chrome 和 firefox 都不需要就可以输入中文\nGTK_IM_MODULE=fcitx QT_IM_MODULE=fcitx XMODIFIERS=@im=fcitx INPUT_METHOD=fcitx SDL_IM_MODULE=fcitx GLFW_IM_MODULE=ibus 打开 系统设置  区域设置  输入法，先点击运行Fcitx即可，拼音为默认添加项。如你还需要更多输入法如五笔，则再点击添加输入法，找到简体中文下的五笔 ，点击添加即可加入五笔输入法。\n接下来点击 拼音 右侧的配置按钮，点选云拼音和在程序中显示预编辑文本 最后应用。\n回到输入法设置，点击配置附加组件，找到 经典用户界面 在主题里选择一个你喜欢的颜色 最后应用。\n注销，重新登陆，就可以发现已经可以在各个软件中输入中文了\n配置系统默认编辑器 默认情况下，Arch Linux 在一些终端编辑场景使用 vi 编辑器，但是我们使用 vim。如果不做一个额外配置，在 git 等场景下，在终端调用编辑器会出错。编辑 EDITOR=vim sudoedit /etc/profile 文件，加入如下内容，将 vim 设置为默认 EDITOR\nexport EDITOR='vim' 这样就不用在每次执行命令时都指定一遍 EDITOR=vim 了。\n启用蓝牙(若有) 如果你有蓝牙设备，需要安装蓝牙软件包并启用蓝牙服务。随后在系统设置中进行添加设备与连接即可。\n$ sudo pacman -S bluez bluez-utils $ sudo systemctl enable --now bluetooth 如果要连接蓝牙音频设备，需要安装 pulseaudio-bluetooth 并重启 pulseaudio。\n$ sudo pacman -S pulseaudio-bluetooth $ pulseaudio -k 设置 Timeshift 快照 通过以下命令安装 Timeshiftcn / aur：\n$ yay -S aur/timeshift 打开 Timeshift，第一次启动会自动启动设置向导。\n提示：Timeshift 只支持快照操作系统安装在具有 Ubuntu 类型的子卷布局（@ 和 @home 子卷）的 BTRFS 分区。\nProxy Enviroment set http or socks proxy environment variables\n# set http proxy export http_proxy=http://PROXYHOST:PROXYPORT # set http proxy with user and password export http_proxy=http://USERNAME:PASSWORD@PROXYHOST:PROXYPORT # set http proxy with user and password (with special characters) export http_proxy=http://`urlencode 'USERNAME'`:`urlencode 'PASSWORD'`@PROXYHOST:PROXYPORT # set socks proxy (local DNS) export http_proxy=socks5://PROXYHOST:PROXYPORT # set socks proxy (remote DNS) export http_proxy=socks5h://PROXYHOST:PROXYPORT # export other env variables export https_proxy=$http_proxy \\ ftp_proxy=$http_proxy \\ rsync_proxy=$http_proxy \\ all_proxy=$http_proxy # export other env variables (another way) export {https,ftp,rsync,all}_proxy=$http_proxy export HTTP_PROXY=$http_proxy \\ HTTPS_PROXY=$http_proxy \\ FTP_PROXY=$http_proxy \\  RSYNC_PROXY=$http_proxy \\ ALL_PROXY=$http_proxy \\ NO_PROXY=$no_proxy export {HTTP,HTTPS,FTP,RSYNC,ALL}_PROXY=$http_proxy # set git http(s) proxy git config --global http.sslverify false git config --global http.proxy $http_proxy git config --global https.proxy $http_proxy # only for 'github.com' git config --global http.https://github.com.proxy $http_proxy set ssh proxy environment variables\n# use 'nc' with http protocol export ssh_proxy='ProxyCommand=nc -X connect -x PROXYHOST:PROXYPORT %h %p' # use 'nc' with http protocol and proxy user export ssh_proxy='ProxyCommand=nc -X connect -x PROXYHOST:PROXYPORT -P 'USERNAME' %h %p' # use 'nc' with socks5 protocol export ssh_proxy='ProxyCommand=nc -X 5 -x PROXYHOST:PROXYPORT %h %p' # use 'connect' with http protocol export ssh_proxy='ProxyCommand=connect -H PROXYHOST:PROXYPORT %h %p' # use 'connect' with http protocol and proxy user export ssh_proxy='ProxyCommand=connect -H USER@PROXYHOST:PROXYPORT %h %p' # use 'connect' with HTTP_PROXY environment export ssh_proxy='ProxyCommand=connect -h %h %p' # use 'connect' with socks5 protocol export ssh_proxy='ProxyCommand=connect -S PROXYHOST:PROXYPORT %h %p' # use 'connect' with socks5 protocol and user export ssh_proxy='ProxyCommand=connect -S USER@PROXYHOST:PROXYPORT %h %p' # use 'connect' with SOCKS5_SERVER environment export SOCKS5_SERVER='PROXYHOST:PROXYPORT' export SOCKS5_USER='USERNAME' export SOCKS5_PASSWD='PASSWORD' export ssh_proxy='ProxyCommand=connect -s %h %p' # connect to ssh server over proxy ssh -o \"$ssh_proxy\" USER@FINAL_DEST # set git ssh proxy git config --global core.sshCommand \"ssh -o $ssh_proxy\" set no proxy to ignore private network address\nno_proxy=\"127.0.0.1,localhost,.localdomain.com\" no_proxy=$no_proxy,`echo 10.{0..255}.{0..255}.{0..255}|tr ' ' ','` no_proxy=$no_proxy,`echo 172.{16..31}.{0..255}.{0..255}|tr ' ' ','` no_proxy=$no_proxy,`echo 192.168.{0..255}.{0..255}|tr ' ' ','` export no_proxy # for more private network addresses, check following url # https://segmentfault.com/q/1010000010521593 # https://en.wikipedia.org/wiki/Private_network unset proxy environment variables\nunset http_proxy https_proxy ftp_proxy rsync_proxy all_proxy HTTP_PROXY HTTPS_PROXY FTP_PROXY RSYNC_PROXY ALL_PROXY unset {http,https,ftp,rsync,all}_proxy {HTTP,HTTPS,FTP,RSYNC,ALL}_PROXY git config --global --unset http.proxy git config --global --unset https.proxy git config --global --unset core.sshCommand git config --global --unset http.https://github.com.proxy unset ssh_proxy A remind:\n /etc/environment is not a script. It only supports KEY=VALUE syntax ($variable is not supported either) /etc/profile does not support export {HTTP,HTTPS,FTP,RSYNC,ALL}_PROXY=$http_proxy, it may hang your login  ubuntu gnome 下环境变量\n$ sudo nano /etc/environment http_proxy=http://127.0.0.1:7890/ HTTP_PROXY=http://127.0.0.1:7890/ https_proxy=http://127.0.0.1:7890/ HTTPS_PROXY=http://127.0.0.1:7890/ ftp_proxy=http://127.0.0.1:7890/ FTP_PROXY=http://127.0.0.1:7890/ all_proxy=socks://127.0.0.1:7891/ ALL_PROXY=socks://127.0.0.1:7891/ no_proxy=localhost,127.0.0.0/8,::1 NO_PROXY=localhost,127.0.0.0/8,::1 显卡驱动 现在是 2022 年，显卡驱动的安装在 Arch Linux 上已经变得非常容易。本文区分核芯显卡和独立显卡两大类描述显卡驱动的安装。注意，确保你已经按照本教程之前的章节安装配置好科学上网、安装好必要的包后再向下进行，不要多个教程混着看，你可能漏掉了本教程前置步骤中的某些操作，从而造成问题。\n 所有 AMD 显卡建议使用开源驱动。英伟达显卡建议使用闭源驱动，因为逆向工程的开源驱动性能过于低下，本文也只描述英伟达闭源驱动安装。如果你支持自由软件运动，请尽可能使用具有官方支持开源驱动的英特尔和 AMD 显卡。\n 核芯显卡 英特尔核芯显卡 官网文档\n英特尔核芯显卡安装如下几个包即可。\n$ sudo pacman -S mesa lib32-mesa vulkan-intel lib32-vulkan-intel  xf86-video-intel arch wiki 里写的很多发行版不建议安装它，而应使用 xorg 的 modesetting 驱动(也就是什么都不用装的意思)。经过我们测试目前确实是默认 modesetting 驱动较为稳定。\n 注意，只有 Intel HD 4000 及以上的核显才支持 vulkan。\nAMD 核芯显卡 对于具有核芯显卡的 AMD 处理器，需要先确定核显架构(Architecture)是什么，再决定安装什么驱动。推荐在 techpowerup 网站进行查询，信息非常全面。\n在确定了显卡架构后，再根据架构对照这个文档决定安装什么驱动。**对于 GCN2.0 及以下架构的老显卡，直接安装开源 ATI 驱动即可，原本闭源的老旧的 Catalyst 驱动在 2021 年已被废弃。GCN2.0 及以下架构的老显卡也不要使用开源的 AMDGPU 驱动，因为其仅处于实验性质，需要各种自定义内核编译选项与配置，非常麻烦，得不偿失。**对于新型号，即 GCN3 架构及更新型的核芯显卡，直接安装开源驱动 AMDGPU 即可，也就是以下这几个包。\n$ sudo pacman -S mesa lib32-mesa xf86-video-amdgpu vulkan-radeon lib32-vulkan-radeon libva-mesa-driver lib32-libva-mesa-driver mesa-vdpau lib32-mesa-vdpau  比如你的笔记本 cpu 是目前常见的 AMD R7 4800U，那么它的核显为 Vega 8。通过查询，可知其为 GCN 5.0 架构，那么对照 arch 官方文档，你可选择安装 AMDGPU 开源驱动。 再比如你的台式机 cpu 是目前常见的 锐龙 5 3400G，那么它的核显为 Vega 11。通过查询，可知其为 GCN 5.0 架构，那么对照 arch 官方文档，你可选择安装 AMDGPU 开源驱动。 再老一些的 apu A10-9700 处理器 ，它的核显为 Radeon R7。通过查询，可知其为 GCN 2.0 架构，那么对照 arch 官方文档，你选择安装 ATI 开源驱动。  独立显卡 这部分会分为仅有独立显卡(无核显)与同时拥有独立显卡和核芯显卡两种情况进行讲解。\n英伟达独立显卡 较新型号的独立显卡直接安装如下几个包即可。官方文档\n$ sudo pacman -S nvidia nvidia-settings lib32-nvidia-utils 如果是 GeForce 630 以上到 GeForce 920 以下的老卡，安装 nvidia-470xx-dkms AUR及其 32 位支持包。使用 dkms 驱动同时需要 headers。\n$ yay -S nvidia-470xx-dkms nvidia-settings lib32-nvidia-470xx-utils linux-headers 如果是 GeForce 630 以下到 GeForce 400 系列的老卡，安装 nvidia-390xx-dkmsAUR及其 32 位支持包。使用 dkms 驱动同时需要 headers。\n$ yay -S nvidia-390xx-dkms nvidia-settings lib32-nvidia-390xx-utils linux-headers 再老的显卡直接使用开源驱动即可。\n$ sudo pacman -S mesa lib32-mesa xf86-video-nouveau NVIDIA Optimus 在同时拥有核芯显卡和英伟达独立显卡的笔记本上安装驱动是大多数人关注的事情，这里着重讲述。\n 再次提醒请按照本书前置章节配置好系统后再进行，不要多个教程混看，尤其是一些过时的教程。尤其需要注意的是确保 base-devel 包的安装以及配置好科学上网软件，以及使用 X11 模式。\n 英伟达双显卡模式官方文档 /// optimus-manager 官方文档\n若为同时拥有核芯显卡与英伟达独显的笔记本电脑，同样需要按照上述步骤先安装各个软件包。除此之外还需要安装 optimus-manager。可以在核芯显卡和独立显卡间轻松切换。optimus-manager 提供三种模式，分别为仅用独显，仅用核显，和 hybrid 动态切换模式。\n$ yay -S optimus-manager optimus-manager-qt 安装完成后重启即可使用。optimus-manager 安装完成后会默认 enable optimus-manager 的服务，你可在重启前检查其状态，若没有 enable 则手动将其 enable。重启后在菜单栏搜索 optimus-manager 点击即可使用。可在其设置中设置开机自动启动。\n$ sudo systemctl enable optimus-manager 此时你应该已经可以进行显卡切换了，如果有问题，请详细阅读 optimus-manager 的文档，里面有详细的描述。由于各类问题太多，本文不进行描述，optimus-manager 的文档很详尽，请自行查看。此处仅列出几项较为重要的注意事项:\n 如果需要在独显和核显模式间切换，要注意你没安装各类 GPU 监控插件，它们会阻止显卡切换，导致不可预料的错误。 不要使用 Nvidia Control Panel 中的Save to X Configuration file按钮。会导致配置冲突。 在显卡之间的切换时，重新登陆后如在 splash screen 卡住或者黑屏，可以尝试在 tty1 tty2 之间进行切换。 如果你在安装 optimus manager 并重启后，直接黑屏卡死，不能进入系统，很有可能是遇到了常见的\"ACPI ISSUE\"，简单来说，这是笔记本制造商的实现问题。可以尝试在内核启动参数中加入acpi_osi=! acpi_osi=\"Windows 2009\" 后再尝试。[1]  最后详细说下动态切换模式。本质上其还是使用官方的 PRIME对闭源驱动的方法进行切换。需要设置三个环境变量，或者用 nvidia-prime 包提供的命令 prime-run，二者本质也是一样的，都是设置三个环境变量。\n$ sudo pacman -S nvidia-prime # 使用prime-run前缀来用独显运行某些程序 $ prime-run some_program 对于 AMD 核显+N 卡独显的读者，optimus-manager 对于这套组合的支持目前已经发布，最新可用版本为 1.4。\n 如果你不是强烈追求能效控制以及注重电池寿命的用户，那么可以不用往下看了，如果你是，那么需要针对你的硬件以及笔记本型号尝试正确的电源管理方式。此部分的设置可能导致黑屏，并且尝试过程可能较长，也会遇到各类问题，请根据你个人的操作水平自行斟酌是否操作\n电源控制做的事情是，在只用核显的模式下，确保正确关闭独立显卡。而在混合模式下，绝大多数情况下 Nvidia 模块实际是始终开启的，电源控制并不生效。这件事情其实很复杂，因为对于不同的显卡型号，以及笔记本型号的组合，可行的方案都是不同的。笼统来说，最广泛适用的办法是 bbswitch。但仍不建议上来就按照此方式安装使用，因为某些特定的硬件就是会出问题，也就是黑屏。这里建议按照 optimus-manager 官方的文档一步一步来，按步骤尝试，最后找到属于你自己的电脑合适的电源管理方式。此文档必须详细阅读！\n针对大多数笔记本适用的 Bbswitch,此处进行安装使用的讲解。首先安装包 bbswitch。若使用其它内核，则安装包 bbswitch-dkms。\nsudo pacman -S bbswitch #安装 bbswitch 切换方式 接下来右键点击 optimus-manager 的托盘设置，在 Optimus 选项卡中的 switch method 选择 Bbswitch 即可。\nPRIME To use the NVIDIA driver as an RandR 1.4 output source provider, also known as “PRIME”, the X server needs to be configured to use the NVIDIA driver for its primary screen and to use the “modesetting” driver for the other graphics device. This can be achieved by placing the following in /etc/X11/xorg.conf:\nSection \"ServerLayout\" Identifier \"layout\" Screen 0 \"nvidia\" Inactive \"intel\" EndSection Section \"Device\" Identifier \"nvidia\" Driver \"nvidia\" BusID \"\" EndSection Section \"Screen\" Identifier \"nvidia\" Device \"nvidia\" Option \"AllowEmptyInitialConfiguration\" EndSection Section \"Device\" Identifier \"intel\" Driver \"modesetting\" EndSection Section \"Screen\" Identifier \"intel\" Device \"intel\" EndSection The X server does not automatically enable displays attached using the output sink in this configuration. To do that, use the xrandr command line tool.\nFor NVIDIA as an output source:\n$ xrandr --setprovideroutputsource modesetting NVIDIA-0 $ xrandr --auto AMD 独立显卡 AMD 独立显卡的驱动安装步骤实际上 AMD 核芯显卡是相同的，都需要先确定架构，然后选定正确的驱动安装即可。真正需要关注的是如何在核芯显卡和独立显卡间进行切换。可以使用 PRIME 对开源驱动的双显卡切换方式。\n此外，可以使用 glmark2，DRI_PRIME=1 glmark2 分别对核显和独显进行测试，选择分数更高的一个进行使用。可以在 steam 游戏的启动前缀中加入DRI_PRIME=1 mangohud %command%来使用独显。(关于 mangohud)。\n笔记本上使用独立显卡运行 steam 游戏的另一个例子。\nDRI_PRIME=1 steam steam://rungameid/570 #运行dota2 DRI_PRIME=1 steam steam://rungameid/730 #运行cs go 显卡性能测试 官方文档。\n最传统和广为人知的方式为使用glxgears命令进行测试，其属于mesa-utils包。但其仅仅只能提供简单的测试场景及帧数显示，只测试了当前 OpenGL 功能的一小部分，功能明显不足。我们推荐如下两种工具。\nglmark2 glmark 提供了一系列丰富的测试，涉及图形单元性能（缓冲，建筑，照明，纹理等）的不同方面，允许进行更全面和有意义的测试。 每次测试单独计算帧速率。 最终，用户根据以前的所有测试获得了一个成绩分数。在 Archlinux 上属于包glmark2\nUnigine benchmark Unigine 3D 引擎是一个更全面的基准测试工具。 截止目前有五个版本，从旧到新分别是\n sanctuary(2007) tropics(2008) heaven(2009) valley(2013) superposition(2017)  可从AUR下载全部版本。它们均为专有软件。\n显卡信息查看 对于英伟达显卡，nvidia-settings 这个包即可全面的展示显卡相关信息。\n对于 AMD 显卡，稍微麻烦一些，通过 yay 安装 radeon-profile-git 这个包，同时安装其依赖 radeon-profile-daemon，最后启动这个进程。即可以图形化的方式查看 amd 显卡信息。github 项目地址\n$ sudo systemctl enable --now radeon-profile-daemon.service 注意，不要对左下角的 auto low high 进行更改 有 bug 会卡死。同时，显存占用在某些型号显卡上展示可能有误。\n后续 如果作为一个普通使用者，到这里你的系统已经配置完毕了。不会命令行也没太大关系，你可以慢慢探索 KDE 这个桌面环境，记住时常用如下命令或 Discover 软件更新系统即可。\n# 更新官方仓库 $ sudo pacman -Syyu # 同时更新官方仓库与AUR $ yay -Syyu 接下来你可以查阅娱乐、办公、多媒体等章节了解更多使用软件的安装与使用。如果你需要成为一名较为专业的人员，那么请阅读进阶、以及编程等章节。\n其他 Operation too slow 修改文件/etc/pacman.conf：\n#XferCommand = /usr/bin/curl -C - -f %u  %o #XferCommand = /usr/bin/wget --passive-ftp -c -O %o %u 把其中一行注释取消掉(删除#)就行了。\nath9k Weak And Unstable Connection ath9k 尝试：\n$ lspci -k ... 03:00.0 Network controller: Qualcomm Atheros QCA9565 / AR9565 Wireless Network Adapter (rev 01) Subsystem: Lite-On Communications Inc QCA9565 / AR9565 Wireless Network Adapter Kernel driver in use: ath9k Kernel modules: ath9k $ modprobe ath9k nohwcrypt=1 # manually $ sudo vim /etc/modprobe.d/ath9k-nohwcrypt.conf # Using files options ath9k nohwcrypt=1 or\n$ yay -S backports-patches-git ssh-agent $ vim ~/.bashrc if ! pgrep -u \"$USER\" ssh-agent  /dev/null; then ssh-agent  \"$XDG_RUNTIME_DIR/ssh-agent.env\" fi if [[ ! \"$SSH_AUTH_SOCK\" ]]; then source \"$XDG_RUNTIME_DIR/ssh-agent.env\" /dev/null fi Tip: To make all ssh clients, including git store keys in the agent on first use, add the configuration setting AddKeysToAgent yes to ~/.ssh/config. Other possible values are confirm, ask and no (default). for example:\nHost github-proj1 HostName github.com User git IdentityFile ~/.ssh/id_rsa AddKeysToAgent yes Host github-proj2 HostName github.com User git IdentityFile ~/.ssh/kurome AddKeysToAgent yes Chrome 无法连接代理 通过环境变量设置代理，结果 chrome 无法浏览网页，报错 ERR_EMPTY_RESPONSE\n可以 man google-chrome 找到设置代理的参数 proxy-server 指定代理，如\n$ google-chrome-stable --proxy-server=\"127.0.1:7890\" “Arch安装器” 特点是使用 Arch Linux 主软件库，定制桌面，使用图形 LiveCD 安装等。\n EndeavourOS Garuda Linux FireRain OS 更多 Arch-based distributions  Optimization zram or zswap The zram kernel module (previously called compcache) provides a compressed block device in RAM. If you use it as swap device, the RAM can hold much more information but uses more CPU. Still, it is much quicker than swapping to a hard drive. If a system often falls back to swap, this could improve responsiveness. Using zram is also a good way to reduce disk read/write cycles due to swap on SSDs.\nSwap on zram using a udev rule\nThe example below describes how to set up swap on zram automatically at boot with a single udev rule. No extra package should be needed to make this work.\nFirst, enable the module:\n# nano /etc/modules-load.d/zram.conf zram Configure the number of /dev/zram nodes you need.\n# nano /etc/modprobe.d/zram.conf options zram num_devices=2 Create the udev rule as shown in the example.\n# nano /etc/udev/rules.d/99-zram.rules KERNEL==\"zram0\", ATTR{disksize}=\"512M\" RUN=\"/usr/bin/mkswap /dev/zram0\", TAG+=\"systemd\" KERNEL==\"zram1\", ATTR{disksize}=\"512M\" RUN=\"/usr/bin/mkswap /dev/zram1\", TAG+=\"systemd\" Add /dev/zram to your fstab.\n# nano /etc/fstab /dev/zram0 none swap defaults 0 0 /dev/zram1 none swap defaults 0 0 pacman pacman是arclinux中的软件管理工具，可以直接从网络上的软件仓库下载安装及删除软件，自动处理依赖关系。\n详情查看 pacman(8)\n安装软件   pacman -S 软件名: 安装软件。也可以同时安装多个包，只需以空格分隔包名即可。\n  -S, –sync\nSynchronize packages.\n    pacman -S --needed 软件名1 软件名2: 安装软件，但不重新安装已经是最新的软件。\n  –needed\nDo not reinstall the targets that are already up-to-date.\n    pacman -Sy 软件名：安装软件前，先从远程仓库下载软件包数据库(数据库即所有软件列表)。\n  -y, –refresh\nDownload a fresh copy of the master package database from the server(s) defined in pacman.conf(5). Passing two –refresh or -y flags will force a refresh of all package databases, even if they appear to be up-to-date.\n    pacman -Sv 软件名：在显示一些操作信息后执行安装。\n  -v, –verbose\nOutput paths such as the Root, Conf File, DB Path, Cache Dirs, etc.\n    pacman -Sw 软件名: 只下载软件包，不安装。\n  -w, –downloadonly\nRetrieve all packages from the server, but do not install/upgrade anything.\n    pacman -U 软件名.pkg.tar.gz：安装本地软件包。\n  -U, –upgrade\nUpgrade or add package(s) to the system and install the required dependencies from sync repositories.\n    pacman -U http://www.example.com/repo/example.pkg.tar.xz : 安装一个远程包（不在 pacman 配置的源里面）。\n  更新系统   pacman -Sy: 从服务器下载新的软件包数据库（实际上就是下载远程仓库最新软件列表到本地）。\n  pacman -Su: 升级所有已安装的软件包。\n  -u, –sysupgrade\nUpgrades all packages that are out-of-date.\n    pacman 可以用一个命令就可以升级整个系统。花费的时间取决于系统有多老。这个命令会同步非本地(local)软件仓库并升级系统的软件包：\npacman -Syu 在Arch linux中，只支持系统完整升级，不支持部分升级。\n如果升级时，网络比较慢，觉得既浪费时间又浪费硬盘，实在不想升级那么多东西，可以逐个软件包升级。用下面命令可以升级核心包：\npacman -S --needed  详解（小写为在上面固定搭配下的含义）：\n卸载软件   pacman -R 软件名: 该命令将只删除包，保留其全部已经安装的依赖关系\n  -R, –remove\nRemove package(s) from the system.\n    pacman -Rv 软件名: 删除软件，并显示详细的信息\n  pacman -Rs 软件名: 删除软件，同时删除本机上只有该软件依赖的软件。\n  -s, –recursive\nRemove each target specified including all of their dependencies, provided that (A) they are not required by other packages; and (B) they were not explicitly installed by the user.\n    pacman -Rsc 软件名: 删除软件，并删除所有依赖这个软件的程序，慎用\n  -c, –cascade\nRemove all target packages, as well as all packages that depend on one or more target packages.\n    pacman -Ru 软件名: 删除软件,同时删除不再被任何软件所需要的依赖\n  -u, –unneeded\nRemoves targets that are not required by any other packages.\n    详解（小写为在上面固定搭配下的含义）：\n搜索软件   pacman -Ss 关键字: 在仓库中搜索含关键字的软件包（本地已安装的会标记）\n参数加q可以简洁方式显示结果，比如 pacman -Ssq gcc 会比 pacman -Ss gcc 显示的好看一些。\n  -s, –search \nThis will search each package in the sync databases for names or descriptions that match regexp.\n    pacman -Sl :显示软件仓库中所有软件的列表\n  通常这样用:pacman -Sl | 关键字\n  ``pacman -Sl | gcc跟pacman -Ssq gcc` 很接近，但是会少一些和gcc有关但软件名不包含gcc的包。\n  -l, –list\nList all packages in the specified repositories.\n    pacman -Qs 关键字: 搜索已安装的软件包\n  -Q, –query\nQuery the package database.\n    pacman -Qu: 列出所有可升级的软件包\n  -u, –upgrades\nRestrict or filter output to packages that are out-of-date on the local system.\n    pacman -Qt: 列出不被任何软件要求的软件包\n  -t, –unrequired\nRestrict or filter output to print only packages neither required nor optionally required by any currently installed package.\n    查询软件信息\n  pacman -Q 软件名: 查看软件包是否已安装，已安装则显示软件包名称和版本\n  pacman -Qi 软件名: 查看某个软件包信息，显示较为详细的信息，包括描述、构架、依赖、大小等等\n  -i, –info\nDisplay information on a given package.\n    pacman -Ql 软件名: 列出软件包内所有文件，包括软件安装的每个文件、文件夹的名称和路径\n  -l, –list\nList all files owned by a given package.\n    软件包组   pacman -Sg: 列出软件仓库上所有的软件包组\n  -g, –groups\nDisplay all the members for each package group specified.\n    pacman -Qg: 列出本地已经安装的软件包组和子包\n  pacman -Sg 软件包组: 查看某软件包组所包含的所有软件包\n  pacman -Qg 软件包组: 和pacman -Sg 软件包组完全一样\n  很多人建议通过安装软件组来安装工具链，但是这样比较浪费空间。实际上如果把gcc, qt, clang等安装上，msys2就要占掉超过10G的硬盘空间，所以个人很少直接安装软件组。\n清理缓存   pacman -Sc：清理未安装的包文件，包文件位于 /var/cache/pacman/pkg/ 目录。\n  -c, –clean\nRemove packages that are no longer installed from the cache as well as currently unused sync databases to free up disk space. Use one –clean switch to only remove packages that are no longer installed; use two to remove all files from the cache.\n    pacman -Scc：清理所有的缓存文件。\n  配置 ZRAM ZRAM 介绍 随着现代应用程序的多样化和复杂化发展，那个曾经只需要 640KB 内存就能运行市面上所有软件的时代已经一去不复返，而比应用程序发展更快的则是用户对多任务的需求。现在的主流操作系统都提供了内存压缩的功能，以保证活跃应用程序拥有尽可能多的可用内存：\n macOS 从 OS X 10.9 之后默认开启内存压缩 Windows 从 Win10 TH2 之后默认开启内存压缩 大部分 Android 手机厂商都默认开启了内存压缩  Android（Linux）的内存压缩是依靠 Swap 机制实现的，大部分情况下是使用 ZRAM 技术来模拟 Swap。\nZRAM 早在 2014 年就伴随 Linux 3.14 内核合入主线，但由于 Linux 用途十分广泛，这一技术并非默认启用，只有 Android 和少部分的 Linux 桌面发行版如 Fedora 默认启用了这一技术，以保证多任务场景下内存的合理分层存储。\nZRAM 运行机制 ZRAM 的原理是划分一块内存区域作为虚拟的块设备（可以理解为支持透明压缩的内存文件系统），当系统内存不足出现页面交换时，可以将原本应该交换出去的页压缩后放在内存中，由于部分被『交换出去』的页得到了压缩，因此可用的物理内存就能随之变多。\n由于 ZRAM 并没有改变 Linux 内存模型的基本结构，因此我们只能利用 Linux 中 Swap 的优先级能力，将 ZRAM 作为高优先级 Swap 看待，这也解释了为什么闪存比较脆弱的手机上会出现 Swap，其本质还是 ZRAM。\n随着部分手机开始使用真正的固态硬盘，也有将 Swap 放在硬盘上的手机，但是一般也都会优先使用 ZRAM。\n由于这一运行机制的存在，ZRAM 可以设计得足够简单：内存交换策略交给内核、压缩算法交给压缩库，ZRAM 本身基本上只需要实现块设备驱动，因此具有极强的可定制性和灵活性，这也是 Windows、macOS 等系统所无法比拟的。\nLinux5.16 中关于 ZRAM 的源码只有不到 100KB，实现非常精简，对 Linux 驱动开发感兴趣的朋友也可以从这里开始研究：linux/Kconfig at v5.16 · torvalds/linux\nZRAM 配置与自启动 确认内核是否支持\u0026有无启用 ZRAM 既然 ZRAM 是内核模块，就需要先检查当前 Linux 机器的内核是否存在这一模块。\n在配置之前，需要读者先确认一下自己的内核版本是否在 3.14 以上，部分 VPS 由于依旧使用 Xen、OpenVZ 等虚拟/容器化技术，内核版本往往卡在 2.6，那么这样的机器是无法开启 ZRAM 的。\n$ uname -r 但根据内核版本判断毕竟不可靠，如 CentOS 7，虽然内核版本是 3.10，却支持 ZRAM，也有极少数发行版或嵌入式 Linux 为了降低资源占用，选择不编译 ZRAM，因此我们最好使用 modinfo 命令来检查一下有无 ZRAM 支持：\n$ modinfo zram 部分发行版会默认启用但不配置 ZRAM，我们可以使用lsmod检查 ZRAM 是否启用：\n$ lsmod | grep zram 启用 ZRAM 内核模块 如果确定 ZRAM 没有被启用，我们可以新建文件 /etc/modules-load.d/zram.conf，并在其中输入 zram，然后重启机器以生效。\n$ echo 'zram' | sudo tee /etc/modules-load.d/zram.conf 上文我们提到，ZRAM 本质上是块设备驱动，那么当我们输入 lsblk 会发生什么呢？\n$ lsblk 可以看到，其中并没有 zram 相关字眼，这是因为我们需要先新建一个块设备。\n打开 ZRAM 源码 中的Kconfig文件，可以找到如下说明：\n Creates virtual block devices called /dev/zramX (X = 0, 1, …). Pages written to these disks are compressed and stored in memory itself. These disks allow very fast I/O and compression provides good amounts of memory savings.\nIt has several use cases, for example: /tmp storage, use as swap disks and maybe many more.\nSee Documentation/admin-guide/blockdev/zram.rst for more information.\n 其中提到了一篇位于 Documentation/admin-guide/blockdev/zram.rst 的 说明文档。\n根据说明文档，我们可以使用 modprobe zram num_devices=1 的方式来让内核在启用 ZRAM 模块时开启一个 ZRAM 设备（一般只需要一个就够了），但这样开启设备的方式依旧在重启后就会失效，并不方便。\n好在modprobe的 说明文档 中提到了modprobe.d的存在：modprobe.d(5) – Linux manual page。\n继续阅读 modprobe.d 的文档，我们会发现它主要用于modprobe时预定义参数，即只需要输入 modprobe zram，辅以 modprobe.d中的配置，就可以自动加上参数。由于我们使用 modules-load.d 实现了 ZRAM 模块的开机自启，因此只需要在modprobe.d中配置参数即可。\n按照上文所述的文档，新建文件/etc/modprobe.d/zram.conf，在其中输入options zram num_devices=1，即可配置一个 ZRAM 块设备，同样重启后生效。\n$ echo 'options zram num_devices=1' | sudo tee /etc/modprobe.d/zram.conf 配置 zram0 设备 重启后输入lsblk，却发现所需的 ZRAM 设备依旧没有出现？\n不用担心，这是因为我们还没有为这个块设备建立文件系统，lsblk虽然名字听起来像是列出块设备，但本质上读取的确是/sys目录里的文件系统信息，再将其与udev中的设备信息比对。\n阅读udev的文档：udev(7) – Linux manual page，其中提到udev会从/etc/udev/rules.d目录读取设备信息，按照文档中的指示，我们新建一个名为/etc/udev/rules.d/99-zram.rules的文件，在其中写入如下内容：\n$ echo 'KERNEL==\"zram0\",ATTR{disksize}=\"30G\",TAG+=\"systemd\"' | sudo tee /etc/udev/rules.d/99-zram.rules 其中，KERNEL属性用于指明具体设备，ATTR属性用于给设备传递参数，这里我们需要阅读zram的文档，其中提到：\n Set disk size by writing the value to sysfs node ‘disksize’. The value can be either in bytes or you can use mem suffixes. Examples:\n# Initialize /dev/zram0 with 50MB disksize echo $((50*1024*1024))  /sys/block/zram0/disksize # Using mem suffixes echo 256K  /sys/block/zram0/disksize echo 512M  /sys/block/zram0/disksize echo 1G  /sys/block/zram0/disksize Note: There is little point creating a zram of greater than twice the size of memory since we expect a 2:1 compression ratio. Note that zram uses about 0.1% of the size of the disk when not in use so a huge zram is wasteful.\n 即该块设备接受名为disksize的参数，且不建议分配内存容量两倍以上的 ZRAM 空间。笔者的 Linux 环境拥有 60G 内存，考虑到实际使用情况，设置了 30G 的 ZRAM，这样一来理想情况下就能获得60G - (30G / 2) + 30G  75G以上的内存空间，已经足够使用。读者可以根据自己的实际情况选择 ZRAM 空间大小，一般来说一开始可以设置小一些，不够用再扩大。\nTAG属性用于标记设备类型（设备由谁管理），根据systemd.device的文档：systemd.device(5) – Linux manual page，大部分块设备和网络设备都建议标记 TAG 为systemd，这样systemd就可以将这个设备视作一个Unit，便于控制服务的依赖关系（如块设备加载成功后再启动服务等），这里我们也将其标记为systemd即可。\n $ sudo systemctl status dev-zram0.device 可以使用如 dev-zram0.device 或者 dev-sda1.device 等方式获取设备的 Device Unit\n 配置结束后，再次重启 Linux，就能在lsblk 命令中看到zram0设备了。\n将 zram0 设备配置为 Swap 获取到了一个 30G 大小的 ZRAM 设备，接下来需要做的就是将这个设备配置为 Swap，有经验的读者应该已经猜到接下来的操作了：\n$ sudo mkswap /dev/zram0 $ sudo swapon /dev/zram0 是的，将zram0设备配置为 Swap 和将一个普通设备/分区/文件配置为 Swap 的方式是一模一样，但该如何让这一操作开机自动执行呢？\n首先想到的自然是使用fstab，但好巧不巧，启用 ZRAM 内核模块使用的modules-load.d也难逃 Systemd 的魔爪：modules-load.d(5) – Linux manual page。既然从一开始就上了 Systemd 的贼船，那就贯彻到底吧！\n在 Systemd 的体系下，开机自启的命令可以被注册为一个 Service Unit，我们新建一个文件/usr/lib/systemd/system/zram.service，在其中写入如下内容：\n$ sudo nano /usr/lib/systemd/system/zram.service [Unit] Description=ZRAM BindsTo=dev-zram0.device After=dev-zram0.device [Service] Type=oneshot RemainAfterExit=true ExecStartPre=/sbin/mkswap /dev/zram0 ExecStart=/sbin/swapon -p 2 /dev/zram0 ExecStop=/sbin/swapoff /dev/zram0 [Install] WantedBy=multi-user.target 接下来运行systemctl daemon-reload重载配置文件，再运行systemctl enable zram --now，如果没有出现报错，可以运行swapon -s 查看 Swap 状态，如果看到存在名为/dev/zram0的设备，恭喜你！现在 ZRAM 就已经配置完成并能实现自启动了~\n$ sudo systemctl daemon-reload $ sudo systemctl enable zram --now $ swapon -s  里为了帮助读者了解 ZRAM 和 Systemd 的原理，因此采取了全手动的配置方式。如果读者觉得比较麻烦，或有大规模部署的需求，可以使用 systemd/zram-generator: Systemd unit generator for zram devices，大部分默认启用 ZRAM 的发行版（如 Fedora）都使用了这一工具，编写配置文件后运行systemctl enable /dev/zram0 --now即可启用 ZRAM。\n 配置双层 Swap（可选） 上一节我们配置了 ZRAM，并将其设置为了 Swap，但此时 ZRAM 依旧是不生效的。为什么呢？眼尖的读者应该发现了，/swapfile的优先级高于/dev/zram0，这导致当 Linux 需要交换内存时，依旧会优先将页换入/swapfile，而非 ZRAM。\n解决这个问题可以通过两种方式：禁用 Swapfile，或者降低 Swapfile 的优先级，这里为了避免 ZRAM 耗尽后出现 OOM 导致服务掉线，我们采取后者，即配置双层 Swap，当高优先级的 ZRAM 耗尽后，会继续使用低优先级的 Swapfile。\n我们打开 Swapfile 的配置文件（笔者的配置文件在/etc/fstab中），增加 pri(Priority) 参数：\n$ sudo nano /etc/fstab /swapfile none swap sw,pri=1 0 0 如果使用其他方式配置 Swapfile（如 Systemd），只要保证执行swapon时携带-p参数即可，数字越低，优先级越低。对于 ZRAM 同理，如上文的zram.service中就配置 ZRAM 的优先级为 2。\n设置后重启 Linux，再次执行 swapon -s 查看 Swap 状态，保证 ZRAM 优先级高于其他 Swap 优先级即可：\n$ swapon -s ZRAM 监控 启用 ZRAM 后，我们该如何查看 ZRAM 的实际效用，如压缩前后大小，以及压缩率等状态呢？\n最直接的办法自然是查看驱动的 源码，和 文档，可以发现函数mm_stat_show()定义了/sys/block/zram0/mm_stat文件的输出结果，从左到右分别代表：\n$ cat /sys/block/zram0/mm_stat # orig_data_size - 当前压缩前大小 (Byte) 4096 # compr_data_size - 当前压缩后大小 (Byte) 74 # mem_used_total - 当前总内存消耗，包含元数据等 Overhead（Byte） 12288 # mem_limit - 当前最大内存消耗限制（页） 0 # mem_used_max - 历史最高内存用量（页） 1223118848 # same_pages - 当前相同（可被压缩）的页 0 # pages_compacted - 历史从 RAM 压缩到 ZRAM 的页 50863 # huge_pages - 当前无法被压缩的页（巨页） 0 该文件适合输出到各种监控软件进行监控，但无论是 Byte 还是页，这些裸数值依旧不便阅读，好在util-linux包提供了一个名为zramctl的工具（和 systemctl 其实是雷锋与雷峰塔的关系），在安装util-linux后执行zramctl，即可获得结果：\n$ zramctl 根据上文mm_stat的输出，可以类推每项数值的含义，或者我们可以找到zramctl的 源码，了解每项输出的含义与单位：\nstatic const struct colinfo infos[] = { [COL_NAME] = { \"NAME\", 0.25, 0, N_(\"zram device name\") }, [COL_DISKSIZE] = { \"DISKSIZE\", 5, SCOLS_FL_RIGHT, N_(\"limit on the uncompressed amount of data\") }, [COL_ORIG_SIZE] = { \"DATA\", 5, SCOLS_FL_RIGHT, N_(\"uncompressed size of stored data\") }, [COL_COMP_SIZE] = { \"COMPR\", 5, SCOLS_FL_RIGHT, N_(\"compressed size of stored data\") }, [COL_ALGORITHM] = { \"ALGORITHM\", 3, 0, N_(\"the selected compression algorithm\") }, [COL_STREAMS] = { \"STREAMS\", 3, SCOLS_FL_RIGHT, N_(\"number of concurrent compress operations\") }, [COL_ZEROPAGES] = { \"ZERO-PAGES\", 3, SCOLS_FL_RIGHT, N_(\"empty pages with no allocated memory\") }, [COL_MEMTOTAL] = { \"TOTAL\", 5, SCOLS_FL_RIGHT, N_(\"all memory including allocator fragmentation and metadata overhead\") }, [COL_MEMLIMIT] = { \"MEM-LIMIT\", 5, SCOLS_FL_RIGHT, N_(\"memory limit used to store compressed data\") }, [COL_MEMUSED] = { \"MEM-USED\", 5, SCOLS_FL_RIGHT, N_(\"memory zram have been consumed to store compressed data\") }, [COL_MIGRATED] = { \"MIGRATED\", 5, SCOLS_FL_RIGHT, N_(\"number of objects migrated by compaction\") }, [COL_MOUNTPOINT]= { \"MOUNTPOINT\",0.10, SCOLS_FL_TRUNC, N_(\"where the device is mounted\") }, }; 部分未默认输出的数值可以通过zramctl --output-all输出：\n$ zramctl --output-all 这个工具的输出结果混淆了 Byte 和页，混淆了历史最高、累计和当前的数值，且将不设置的参数（如内存限制）显示为 0B，因此输出结果仅作为参考，可读性依旧不高，一般来说只用了解DATA和COMPR字段即可。\n结合zramctl和mm_stat的输出，不难发现我们配置的 ZRAM 大小其实是未压缩的大小，而非是压缩后的大小，前面我们提到了一个算法，当 ZRAM 大小为 30GB 且压缩率为 2:1 时，可以获得60G - (30G / 2) + 30G  75G的可用内存，这就是假设了 30GB 的未压缩数据可以压缩到 15G，占用 15G 物理内存空间，即60G - (30G / 2)，然后再加上 ZRAM 能存储最大的内存数据 30G 计算出来。\n计算压缩率的方式为 DATA / COMPR。，以 ElasticSearch 的工作负载为例，默认压缩率为1.1G / 97M = 11.6（如果是4K 74B则是没有负载）。\nZRAM 调优 尽管 ZRAM 的设置非常简单，其依然提供了大量可配置项供用户调整，如果在默认配置 ZRAM 后依旧觉得不满意，或者想要进一步发掘 ZRAM 的潜力，就需要对其进行优化。\n选择最适合的压缩算法 ZRAM 目前的默认压缩算法一般是lzo-rle，但其实 ZRAM 支持的压缩算法有很多，我们可以通过 cat /sys/block/zram0/comp_algorithm 获取支持的算法，当前启用的算法被[]括起来：\n$ cat /sys/block/zram0/comp_algorithm 压缩是一个时间换空间的操作，也就意味着这些压缩算法并不存在绝对优劣，只存在不同情况下的取舍，有的压缩率高、有的带宽大、有的 CPU 消耗少……在不同的硬件上，不同的选择也会遇到不同的瓶颈，因此只有进行真实的测试，才能帮助选择最适合的压缩算法。\n根据工作负载和需求的不同，读者可以选择适合自己的参数，也可以结合上面提到的多级 Swap，将 ZRAM 进一步分层，使用最高效的内存作为高优先级 Swap，压缩率最高的内存作为中低优先级 Swap。\n如果测试机和生产环境的架构/硬件存在差异，可以将测试过程中导出的内存拷贝到生产环境，前提是两者运行相同的工作负载，否则测试内存无参考价值。\n配置 ZRAM 调优参数 配置压缩算法，获得最佳压缩率\n首先将压缩算法从默认的lzo-rle切换为lz4hc，根据 ZRAM 的文档，只需要将压缩算法写入/sys/block/zram0/comp_algorithm即可，考虑到我们配置/sys/block/zram0/disksize时的操作，我们重新编辑/etc/udev/rules.d/99-zram.rules文件，将其内容修改为：\n$ sudo nano /etc/udev/rules.d/99-zram.rules KERNEL==\"zram0\",ATTR{comp_algorithm}=\"lz4hc\",ATTR{disksize}=\"30G\",TAG+=\"systemd\" 需要注意的是，必须先指定压缩算法，再指定磁盘大小，无论是在配置文件中还是直接echo参数到/sys/block/zram0设备上，都需要按照文档的顺序进行操作。\n重启机器，再次执行cat /sys/block/zram0/comp_algorithm，就会发现当前压缩算法变成了lz4hc。\n配置 page-cluster，避免内存带宽和 CPU 资源的浪费\n简单来说，page-cluster的作用就是每次从交换设备读取数据时多读 2^n 页，一些块设备或文件系统有簇的概念，读取数据也是按簇读取，假设内存页大小为 4KiB，而每次读取的一簇数据为 32KiB，那么把多读出来的数据也换回内存，就能避免浪费，减少频繁读取磁盘的次数，这一点在 Linux 的文档中也有提到：linux/vm.rst · torvalds/linux。默认的page-cluster大小为 3，即每次会从磁盘读取4K*2^3=32K的数据。\n了解了page-cluster的原理后，我们会发现 ZRAM 并不属于传统的块设备，内存控制器默认设计就是按页读取，因此这一适用于磁盘设备的优化，在 ZRAM 场景下却是负优化，反而会导致过早触及内存带宽瓶颈和 CPU 解压缩瓶颈而导致性能下降，这也就可以解释为什么上面的表格中随着page-cluster的提升，吞吐量同样提升，而 IOPS 却变得更小，如果内存带宽和 CPU 解压缩不存在瓶颈，那么 IOPS 理论上应该保持不变。\n考虑到无论是理论上，还是实际测试，page-cluster都是一个多余的优化，我们可以直接将其设置为 0。直接编辑/etc/sysctl.d/99-sysctl.conf，在结尾新增一行：\n$ sudo nano /etc/sysctl.d/99-sysctl.conf vm.page-cluster=0 运行sysctl -p，即可让该设置生效，无需重启。\nOOM Killer SysRq SysRq （arch wiki）键在 QWERT 键盘上与 PrtSc 同键,通过按下 ALT+SysRq+ 可以直接向linux kernel发送预设的系统操作指令。 这套组合键提供了一系列在系统崩溃时常用到的功能，比如同步数据、杀进程、卸载文件系统，甚至系统重启.\n启用SysRq 对内核的要求 启用 SysRq 的前提是在linux kernel编译时启用了 CONFIG_MAGIC_SYSRQ 选项.\n在目前主流的发行版linux中都启用了该选项，但若你是自己编译的内核，则有必要搜索一下内核的config文件了，确保里面有一句\nCONFIG_MAGIC_SYSRQ=y 内核中还有一个与SysRq相关的配置项:\nCONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE=0x01b6 这个配置项指定了默认SysRq的值，这个值表示kernel会对哪些功能产生反应。\n查看当前SysRq的值 我们可以通过查看 /proc/sys/kernel/sysrq 的值来判断Kernel会对哪些功能产生反应.\n$ cat /proc/sys/kernel/sysrq 16 这里你会看到一个数字，这个数字可以转换成一个9位比特的形式，其中每一位的比特都有一个含义如下:\n   数字 位数 意义     0 1 完全禁用sysrq   1 1 允许所有的sysrq功能   2 2 允许控制终端日志级别   4 3 允许控制键盘输入类型(SAK,unraw)   8 4 允许调试进程dump   16 5 允许执行sync命令   32 6 允许重新挂载文件系统为之读   64 7 允许发送信号给进程(term,kill,oom-kill)   128 8 允许重启/关机   256 9 允许调整实时任务的优先级    因此，我这里的 16 表示允许通过 SysRq 来同步数据到磁盘中去， 而数字 130 转换成二进制就是 010000010,根据表中的对应关系很容易看出允许重启/关机以及调整终端日志级别。\n更改SysRq的值 如果只是希望临时更改 SysRq 的值，那么很简单，只需要将新的值写入到 /proc/sys/kernel/sysrq 中去\n$ echo \"1\" |sudo tee /proc/sys/kernel/sysrq 或者通过 sysctl 来进行设置\n$ sysctl -w kernel.sysrq=1 如果需要每次启动时都自动修改SysRq的值，则需要修改配置文件\n$ echo \"kernel.sysrq = 1\" | sudo tee -a /etc/sysctl.d/99-sysctl.conf 使用SysRq 使用SysRq有两种方式:\n一种是直接通过键盘 Alt+SysRq+(部分笔记本上是Alt+Fn+PrtSrc+)来出发，\n还有一种是直接通过 /proc/sysrq-trigger 接口来完成.\n$ echo “ b ” | sudo tee /proc/sysrq-trigger 其中，这里每个 command-key 都对应一种kernel的行为，而且需要说明的是，不同种类的键盘上，相同kernel行为对应的 command-key 居然是不同的！\n下面表格就是各个kernel行为对应的 command-key 的说明:\n   Action QWERTY Dvorak AZERTY Colemak     设置控制台日志级别(console_loglevel),它决定了哪些kernel信息会被输出到控制台上 0 - 9 0 - 9 0 - 9(without ⇧ Shift) 0 - 9   不同步并卸载文件系统，立即重启系统 b x b b   让系统立即崩溃. 在配置得当的情况下会产生一个 crashdump c j c c   显示所有排它锁 (需要内核启用CONFIG_LOCKDEP选项) d e d s   发送 SIGTERM 信号到除了 init (PID 1) 外的所有进程 e . e f   触发 oom_kill, 会随机杀掉一个进程以缓解 OOM f u f t   当进入内核模式时，切换到内核的 framebuffer 控制台. 若有内核调试器 kdb，则进入该调试器中 g i g d   在控制台上输出一个简短的帮助信息. (其他不能识别的key也会输出帮助信息) h d h h   发送 SIGKILL 信号到除了 init (PID 1) 外的所有进程 i c i u   强制通过 FIFREEZE ioctl 冻结文件系统. j h j n   杀掉当前虚拟控制台中的所有进程 (包括 X 和 SVGALib 程序). k t k e   列出所有活动CPU上的 stack backtrace l n l i   在控制台上输出当前内存信息 m m , m   重置所有高优先级和实时任务的 nice 级别 n b n k   关闭系统 o r o y   在控制台输出当前寄存器和标志位信息 p l p ;   Display all active high-resolution timers and clock sources. q ' a q   将键盘从 raw 模式(常被诸如X11和SVGALib这样的程序所使用)切换到 XLATE模式 r p r p   同步所有已挂载的文件系统 s o s r   在控制台输出当前任务列表 t y t g   重新以只读模式重新挂载所有已挂载的文件系统 u g u l   强制恢复 framebuffer console. 若为ARM处理器,则会导致 ETM buffer dump. v k v v   显示所有阻塞状态(状态为D)的任务 w , z w   Used by xmon interface on PPC/PowerPC platforms. x q x x   显示全局的CPU寄存器内容 (仅对SPARC-64平台有效) y f y j   Dump the ftrace buffer z ; w z   输出一份简单的系统支持SysRq的键列表 space space space space    常见的几种功能键组合 下面列出几个常见的功能键组合:\nR-E-I-S-U-B:安全重启系统\n这套组合键大致相当于reboot命令：\n unRaw – 把键盘设置为 XLATE 模式，使按键可以穿透 x server 捕捉传递给内核 tErminate – 向除 init 外进程发送 SIGTERM 信号，让其自行结束. 这一步推荐等待30秒让进程有足够的时间进行收尾的嗯做。 kIll - 向除 init 以外所有进程发送 SIGKILL 信号，强制结束进程. 这一步推荐等待10秒，保证所有进程都退出了 Sync – 同步缓冲区数据到硬盘，避免数据丢失. 这一步在能看到输出的情况下等到\"Emergency Sync complete\" 后再做后续动作，否则推荐等待10秒 Unmount – 将所有已经挂载的文件系统 重新挂载为只读. 该操作通常也有一定延时,请等到\"Emergency Remount complete\" 出现过后再进行后续操作,否则推荐等待10秒 reBoot - 立即重启计算机  恢复系统挂起\n若仅仅是因为资源消耗过量引起系统挂起就重启系统显然是不好的，我们可以尝试通过回收一些资源的方式来回复系统挂起。\nSysRq中用来结束进程的command-key包括 E-I-K-F，其中:\n E 和 I 太凶残，它会杀掉除了 init 外的所有进程,属于杀敌一千自损八百的操作。因此在一般情况下不会轻易使用 F 则是利用 OOM-Kiler选择一个进程来结束,对于由于内存不足引起的挂起比较有效，但有时候OOMKiller也可能会误判杀掉一些长期运行的后台程序。 K 杀掉与当前控制台有关的进程组，比较推荐用这种方法回复系统  此外，若系统挂起是由于实时任务消耗太多CPU引起的，则可以通过 N 来降低实时任务运行的优先级来缓解挂起症状。\n获取系统信息\nSysRq还提供了几个用于获取系统信息的commandkey，在恢复系统挂起前推荐执行这些commandkey，以记录下当前系统状态。\n  M\n打印内存使用信息\n  W\n打印CPU寄存器上下文和程序调用栈回溯信息\n  P\n打印CPU寄存器信息,比如正在执行的进程名，运行函数，寄存器上下文，以及程序的调用栈回溯等\n  T\n打印进程列表,各进程的名称，进程 PID，父 PID 兄弟 PID 以及进程运行状态等相关信息\n  查看SysRq的输出信息 从上面的列表中我们可以看到，使用SysRq能够输出大量的信息。这些信息，默认会输出到syslog中. 同时，若设置的 console_loglevel(0-9) 大于 default_message_loglevel 则输出也会输出到本地控制台终端上去。 另外，若设置的 console_loglevel 大于 default_message_loglvel 则输出还会通过netconsole输出到远程机器上去。\n总体来说，syslog中记录的日志应该是最完整的，然而由于负责记录日志的 syslogd 本身是一个用户进程，在某些情况下可能会被杀掉，从而导致日志记录不下来。\n$ echo \" \" | sudo tee /proc/sysrq-trigger $ sudo dmesg | tail -n 1 [17899.255261] sysrq: SysRq : HELP : loglevel(0-9) reboot(b) crash(c) terminate-all-tasks(e) memory-full-oom-kill(f) kill-all-tasks(i) thaw-filesystems(j) sak(k) show-backtrace-all-active-cpus(l) show-memory-usage(m) nice-all-RT-tasks(n) poweroff(o) show-registers(p) show-all-timers(q) unraw(r) sync(s) show-task-states(t) unmount(u) force-fb(V) show-blocked-tasks(w) dump-ftrace-buffer(z) systemd-oomd.service 简介\nsystemd-oomd是为了改善Linux的内存不足/内存压力行为而开发的，基于Facebook的内存不足守护程序代码，已经扩展到不仅适用于Linux服务器，也适用于桌面系统。systemd-OOMD可以监测资源争用情况，当内存/SWAP压力超过预定义的阈值时，可以杀死选定的进程。\nsystemd-oomd守护进程会对启用了OOMD的cgroups进行监视，并根据内存压力或交换使用情况进行消杀。systemd-oomd行为可以通过新的oomd.conf配置文件进行配置。这个守护进程只有在设置了EnableOomdKill的情况下才会杀死组，因为显然不想因为内存使用情况而随机杀掉进程。\nEndeavourOS Usage $ sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-pinyin-zhwiki android-tools aria2 goldendict translate-shell kvantum google-chrome okular git xmind ttf-sarasa-gothic variety audacious fcitx5 详细看前面。\nKDE Connect $ sudo pacman -S kdeconnect sshfs 添加如下两个到 startup\n /usr/lib/kdeconnectd /usr/bin/kdeconnect-indicator  只有 KDE Connect 在连接的状态下，indicator 才会显示。\nZFS $ sudo pacman -S zfs-dkms $ sudo modprobe zfs $ echo zfs | sudo tee /etc/modules-load.d/zfs.conf Qemu $ sudo pacman -S qemu-base samba tigervnc plocate 依云推荐，a much faster locate\nZstd  arch 系用 zstd 打包 速度与压缩比如何兼得？压缩算法在构建部署中的优化：时间耗时的顺序为 Pzstd 参数命令  Redshift 安装：\n$ yay -S redshift-minimal 在 GeoNames.org 找到经纬度并测试：\n$ redshift -l 30.58333:114.26667 # WuHan 参考 How to get the display number I was assigned by X 获得 DISPLAY Number：\n$ echo $DISPLAY # OR $ cat /proc/$$/environ | tr '\\0' '\\n' | grep '^DISPLAY=' 参考 Redshift fails to run as systemd unit, works in terminal 建立 ~/.config/systemd/user/redshift.service 文件（官方给的模板不行）：\n[Unit] Description=Redshift display colour temperature adjustment Documentation=http://jonls.dk/redshift/ After=display-manager.service [Service] Environment=DISPLAY=:0 ExecStart=/usr/bin/redshift -l 30.58333:114.26667 Restart=always RestartSec=20 [Install] WantedBy=default.target 服务操作\n$ systemctl --user start redshift.service $ systemctl --user enable redshift.service $ journalctl --user -u redshift.service -f Linux 动态桌面 xwinwrap + mplayer 这个软件分为“软件前端+播放器+软件后端”三大部分，后端就是 xwinwrap；前端有无数个版本，就算不装前端界面也可以用；播放器调用的是 mplayer 播放器。\n没装前端界面：\nxwinwrap -ni -o 1.0 -fs -s -st -sp -b -nf -- mplayer -wid WID -quiet -nosound -loop 0 /视频/路径/文件.mov 其他项目   PlasmaVideoWallpaper \u0026 org.kde.video\n$ sudo pacman -S qt-gstreamer gst-libav   VLC\ncvlc --video-wallpaper --no-audio /你的/路径/视频.mp4 当你玩了几秒，你就会发现，这根本就是个播放器全屏然后置底而已，切换窗口就暴露了。\n  FontConfig 常用命令 $ FC_DEBUG=4 google-chrome-stable # 看 FcConfigSubstitute donePattern 部分，这就是实际作用的字体 $ fc-match sans # 看请求 sans 字体实际返回的是什么字体  $ pacman -Qqo /usr/share/fonts # 查看安装了哪些字体 $ fc-list # 列出所有字体 选字体 西文要求必须可以清晰区分\"1lI\"和\"O0o\"\n  西文等宽字体：\n Monaco： ttf-monaco Hack：ttf-hack Migu 1M： ttf-migu 需屏蔽非西文字符    西文无衬线字体\n Noto Sans：noto-fonts    西文有衬线字体\n Noto Serif：noto-fonts Tinos Nerd Font：nerd-fonts-tinos    中文黑体(无衬线)\n WenQuanYi Zen Hei：wqy-zenhei WenQuanYi Micro Hei： wqy-microhei HarmonyOS Sans SC：harmonyos-sans-git    中文宋体(有衬线)、中文仿宋(有衬线)、中文楷体(书法)\n Adobe Song Std：ttf-adobe-song AdobeFangsongStd：ttf-adobe-fangsong AdobeKaitiStd：ttf-adobe-kaiti    CJK 异形字\n Noto Sans CJK SC： noto-fonts-cjk    符号表情\n Noto Color Emoji： noto-fonts-emoji Twemoji： ttf-twemoji Symbols Nerd Font： ttf-nerd-fonts-symbols    配置 fonts.conf 以 Linux字体美化实战(Fontconfig配置)及fonts.conf 为蓝本，参考了如下部分配置文件：\n 双猫CC 字体顺序与异形字设置：用 fontconfig 治理 Linux 中的字体 dotfiles 测试异形字（在firefox上） 喵’s StackHarbor的 Noto Color Emoji 设置：Fontconfig 和 Noto Color Emoji 和抗锯齿 local.conf Github 仓库改版：best-fonts  双猫CC 字体显示效果通过 xsettingsd 设置的，我偏向于统一使用 fontconfig 设置。\n基本思路只有一个，设置默认字体为通用字体族名。设置完这个记得把所有软件的自定义字体设置里面无衬线设置为 sans-serif，有衬线设置为 serif，等宽设置为 monospace，这样才会遵守这里的回退顺序。\n建立 ~/.config/fontconfig/fonts.conf 并添加如下内容：\n       target=\"scan\"  name=\"family\"Monaco  name=\"family\"Monospace  name=\"lang\"en    target=\"scan\"  name=\"family\"Noto Sans  name=\"family\"Sans  name=\"lang\"en    target=\"scan\"  name=\"family\"Noto Serif  name=\"family\"Serif  name=\"lang\"en    target=\"scan\"  name=\"family\"WenQuanYi Zen Hei  name=\"family\"zhHei  name=\"lang\"zh-cn    target=\"scan\"  name=\"family\"Adobe Song Std  name=\"family\"zhSerifzhSong  name=\"weight\"80  name=\"lang\"zh-cn   target=\"scan\"  name=\"family\"Adobe Fangsong Std  name=\"family\"zhSerifzhFangSong  name=\"lang\"zh-cn   target=\"scan\"  name=\"family\"Adobe Kaiti Std  name=\"family\"zhSerifzhKai  name=\"lang\"zh-cn    target=\"scan\"  name=\"family\"WenQuanYi Zen Hei Mono  name=\"family\"zhMono  name=\"lang\"zh-cn    target=\"scan\"  name=\"family\"Noto Color Emoji  name=\"family\"zzFailBackzzSymbol  name=\"familylang\"enen  name=\"lang\"none    target=\"scan\"   name=\"postscriptname\"NotoSansCJK-Regular  name=\"family\"zzFailBackzzSnasCJK  name=\"style\"Regular  name=\"lang\"zh-cn    target=\"scan\"   name=\"postscriptname\"NotoSerifCJK-Regular  name=\"family\"zzFailBackzzSerifCJK  name=\"style\"Regular  name=\"lang\"zh-cn     binding=\"same\"monoMonospace  binding=\"same\"ConsolasMonospace  binding=\"same\"CourierMonospace  binding=\"same\"Courier NewMonospace  binding=\"same\"FixedsysMonospace  binding=\"same\"Lucida ConsoleMonospace  binding=\"same\"TerminalMonospace  binding=\"same\"Lucida Sans TypewriterMonospace  binding=\"same\"Andale MonoMonospace  binding=\"same\"MenloMonospace  binding=\"same\"MonacoMonospace  binding=\"same\"Andale Mono WTMonospace  binding=\"same\"BiwidthMonospace  binding=\"same\"Bitstream Vera Sans MonoMonospace  binding=\"same\"CousineMonospace  binding=\"same\"DejaVu Sans MonoMonospace  binding=\"same\"Droid Sans MonoMonospace  binding=\"same\"Fira MonoMonospace  binding=\"same\"FixedMonospace  binding=\"same\"FreeMonoMonospace  binding=\"same\"InconsolataMonospace  binding=\"same\"Liberation MonoMonospace  binding=\"same\"Luxi MonoMonospace  binding=\"same\"Nimbus Mono LMonospace  binding=\"same\"Source Code ProMonospace  binding=\"same\"TerminusMonospace  binding=\"same\"Ubuntu MonoMonospace  binding=\"same\"UnibitMonospace  binding=\"same\"UnifontMonospace  binding=\"same\"sans serifSans  binding=\"same\"sans-serifSans  binding=\"same\"ArialSans  binding=\"same\"Arial BlackSans  binding=\"same\"CalibriSans  binding=\"same\"CandaraSans  binding=\"same\"Century GothicSans  binding=\"same\"Copperplate GothicSans  binding=\"same\"CorbelSans  binding=\"same\"Franklin Gothic MediumSans  binding=\"same\"ImpactSans  binding=\"same\"Lucida Sans UnicodeSans  binding=\"same\"Microsoft Sans SerifSans  binding=\"same\"MS Sans SerifSans  binding=\"same\"News Gothic MTSans  binding=\"same\"SegoeSans  binding=\"same\"Segoe UISans  binding=\"same\"TahomaSans  binding=\"same\"Trebuchet MSSans  binding=\"same\"VerdanaSans  binding=\"same\"Arial NarrowSans  binding=\"same\"Arial Unicode MSSans  binding=\"same\"Franklin Gothic BoldSans  binding=\"same\"Franklin Gothic HeavySans  binding=\"same\"Gill Sans MTSans  binding=\"same\"HaettenschweilerSans  binding=\"same\"Lucida SansSans  binding=\"same\"Tw Cen MTSans  binding=\"same\"AvenirSans  binding=\"same\"Avenir NextSans  binding=\"same\"Avenir Next CondensedSans  binding=\"same\"CharcoalSans  binding=\"same\"ChicagoSans  binding=\"same\"FuturaSans  binding=\"same\"GenevaSans  binding=\"same\"Gill SansSans  binding=\"same\"HelveticaSans  binding=\"same\"Helvetica NeueSans  binding=\"same\"Lucida GrandeSans  binding=\"same\"OptimaSans  binding=\"same\"ThonburiSans  binding=\"same\"AndikaSans  binding=\"same\"Akzidenz-GroteskSans  binding=\"same\"Arev SansSans  binding=\"same\"ArimoSans  binding=\"same\"Bitstream Vera SansSans  binding=\"same\"CantarellSans  binding=\"same\"CarlitoSans  binding=\"same\"DejaVu SansSans  binding=\"same\"DejaVu Sans CondensedSans  binding=\"same\"Droid SansSans  binding=\"same\"Droid Sans FallbackSans  binding=\"same\"Fira SansSans  binding=\"same\"FreeSansSans  binding=\"same\"FrutigerSans  binding=\"same\"Frutiger LinotypeSans  binding=\"same\"GadgetSans  binding=\"same\"GothamSans  binding=\"same\"Liberation SansSans  binding=\"same\"Liberation Sans NarrowSans  binding=\"same\"Linux BiolinumSans  binding=\"same\"Luxi SansSans  binding=\"same\"MyriadSans  binding=\"same\"Myriad ProSans  binding=\"same\"Nimbus Sans LSans  binding=\"same\"Noto SansSans  binding=\"same\"Noto Sans UISans  binding=\"same\"Open SansSans  binding=\"same\"RobotoSans  binding=\"same\"Roboto CondensedSans  binding=\"same\"Source Sans ProSans  binding=\"same\"UbuntuSans  binding=\"same\"Ubuntu CondensedSans  binding=\"same\"UniversSans  binding=\"same\"Book AntiquaSerif  binding=\"same\"Calisto MTSerif  binding=\"same\"CambriaSerif  binding=\"same\"ConstantiaSerif  binding=\"same\"GabriolaSerif  binding=\"same\"GeorgiaSerif  binding=\"same\"MS SerifSerif  binding=\"same\"Palatino LinotypeSerif  binding=\"same\"SitkaSerif  binding=\"same\"Sitka BannerSerif  binding=\"same\"Sitka DisplaySerif  binding=\"same\"Sitka HeadingSerif  binding=\"same\"Sitka SmallSerif  binding=\"same\"Sitka SubheadingSerif  binding=\"same\"Sitka TextSerif  binding=\"same\"Times New RomanSerif  binding=\"same\"Baskerville Old FaceSerif  binding=\"same\"Bell MTSerif  binding=\"same\"Bodoni MTSerif  binding=\"same\"Bookman Old StyleSerif  binding=\"same\"Californian FBSerif  binding=\"same\"CentaurSerif  binding=\"same\"CenturySerif  binding=\"same\"Century SchoolbookSerif  binding=\"same\"Cooper BlackSerif  binding=\"same\"ElephantSerif  binding=\"same\"GaramondSerif  binding=\"same\"Goudy Old StyleSerif  binding=\"same\"High Tower TextSerif  binding=\"same\"Lucida BrightSerif  binding=\"same\"Lucida FaxSerif  binding=\"same\"PerpetuaSerif  binding=\"same\"RockwellSerif  binding=\"same\"BaskervilleSerif  binding=\"same\"Big CaslonSerif  binding=\"same\"DidotSerif  binding=\"same\"Hoefler TextSerif  binding=\"same\"New YorkSerif  binding=\"same\"PalatinoSerif  binding=\"same\"TimesSerif  binding=\"same\"Bitstream CharterSerif  binding=\"same\"Bitstream CyberBaseSerif  binding=\"same\"Bitstream CyberbitSerif  binding=\"same\"Bitstream Vera SerifSerif  binding=\"same\"Century Schoolbook LSerif  binding=\"same\"Charis SILSerif  binding=\"same\"Code2000Serif  binding=\"same\"Code2001Serif  binding=\"same\"DejaVu SerifSerif  binding=\"same\"DejaVu Serif CondensedSerif  binding=\"same\"Droid SerifSerif  binding=\"same\"FreeSerifSerif  binding=\"same\"GentiumSerif  binding=\"same\"JunicodeSerif  binding=\"same\"Liberation SerifSerif  binding=\"same\"Linux LibertineSerif  binding=\"same\"Luxi SerifSerif  binding=\"same\"New Athena UnicodeSerif  binding=\"same\"Nimbus Roman No9 LSerif  binding=\"same\"Noto SerifSerif  binding=\"same\"Old Standard TTSerif  binding=\"same\"Source Serif ProSerif  binding=\"same\"TinosSerif  binding=\"same\"UtopiaSerif  binding=\"same\"Source Han SansSanszhHei  binding=\"same\"Source Han Sans CNSanszhHei  binding=\"same\"Source Han Sans SCSanszhHei  binding=\"same\"Source Han Sans TCSanszhHei  binding=\"same\"Source Han Sans TWHKSanszhHei  binding=\"same\"思源黑体SanszhHei  binding=\"same\"思源黑體SanszhHei  binding=\"same\"思源黑体 CNSanszhHei  binding=\"same\"思源黑體 TWHKSanszhHei  binding=\"same\"Noto Sans CJKSanszhHei  binding=\"same\"Noto Sans CJK Simplified ChineseSanszhHei  binding=\"same\"Noto Sans CJK Traditional ChineseSanszhHei  binding=\"same\"Noto Sans S ChineseSanszhHei  binding=\"same\"Noto Sans T ChineseSanszhHei  binding=\"same\"Hiragino Sans GBSanszhHei  binding=\"same\"冬青黑體簡體中文SanszhHei  binding=\"same\"冬青黑体简体中文SanszhHei  binding=\"same\"Adobe Heiti StdSanszhHei  binding=\"same\"Adobe 黑体 StdSanszhHei  binding=\"same\"Adobe Fan Heiti StdSanszhHei  binding=\"same\"Adobe 繁黑體 StdSanszhHei  binding=\"same\"HeiSanszhHei  binding=\"same\"LiHei ProSanszhHei  binding=\"same\"STHeitiSanszhHei  binding=\"same\"SimHeiMonospacezhHei  binding=\"same\"黑体MonospacezhHei  binding=\"same\"Heiti TCSanszhHei  binding=\"same\"黑體-繁SanszhHei  binding=\"same\"黑体-繁SanszhHei  binding=\"same\"Heiti SCSanszhHei  binding=\"same\"黑體-簡SanszhHei  binding=\"same\"黑体-简SanszhHei  binding=\"same\"STXiheiSanszhHei  binding=\"same\"华文细黑SanszhHei  binding=\"same\"Lantinghei SCSanszhHei  binding=\"same\"蘭亭黑-簡SanszhHei  binding=\"same\"兰亭黑-简SanszhHei  binding=\"same\"Lantinghei TCSanszhHei  binding=\"same\"蘭亭黑-繁SanszhHei  binding=\"same\"兰亭黑-繁SanszhHei  binding=\"same\"Microsoft JhengHeiSanszhHei  binding=\"same\"Microsoft JhengHei UISanszhHei  binding=\"same\"微軟正黑體SanszhHei  binding=\"same\"Microsoft YaHeiSanszhHei  binding=\"same\"Microsoft YaHei UISanszhHei  binding=\"same\"微软雅黑SanszhHei  binding=\"same\"WenQuanYi Bitmap SongSanszhHei  binding=\"same\"WenQuanYi Zen HeiSanszhHei  binding=\"same\"文泉驛微米黑SanszhHei  binding=\"same\"文泉驿微米黑SanszhHei  binding=\"same\"WenQuanYi Zen Hei MonoMonospacezhHei  binding=\"same\"文泉驛等寬微米黑MonospacezhHei  binding=\"same\"文泉驿等宽微米黑MonospacezhHei  binding=\"same\"WenQuanYi Zen HeiSanszhHei  binding=\"same\"文泉驛正黑SanszhHei  binding=\"same\"文泉驿正黑SanszhHei  binding=\"same\"WenQuanYi Zen Hei MonoMonospacezhHei  binding=\"same\"文泉驛等寬正黑MonospacezhHei  binding=\"same\"文泉驿等宽正黑MonospacezhHei  binding=\"same\"WenQuanYi Zen Hei SharpSanszhHei  binding=\"same\"文泉驛點陣正黑SanszhHei  binding=\"same\"文泉驿点阵正黑SanszhHei  binding=\"same\"Adobe Song StdSerifzhSong  binding=\"same\"Adobe 宋体 StdSerifzhSong  binding=\"same\"Adobe Ming StdSerifzhSong  binding=\"same\"Adobe 明體 StdSerifzhSong  binding=\"same\"AR PL UMing CNMonospacezhSong  binding=\"same\"AR PL UMing HKMonospacezhSong  binding=\"same\"AR PL UMing TWMonospacezhSong  binding=\"same\"AR PL UMing TW MBEMonospacezhSong  binding=\"same\"Apple LiSungSerifzhSong  binding=\"same\"GB18030 BitmapSerifzhSong  binding=\"same\"LiSong ProSerifzhSong  binding=\"same\"Ming(for ISO10646)MonospacezhSong  binding=\"same\"STSongSerifzhSong  binding=\"same\"华文宋体SerifzhSong  binding=\"same\"STZhongsongSerifzhSong  binding=\"same\"华文中宋SerifzhSong  binding=\"same\"SimSunSerifzhSong  binding=\"same\"宋体SerifzhSong  binding=\"same\"NSimSunMonospacezhSong  binding=\"same\"新宋体MonospacezhSong  binding=\"same\"SimSun-ExtBMonospacezhSong  binding=\"same\"SimSun-18030SerifzhSong  binding=\"same\"宋体-18030SerifzhSong  binding=\"same\"NSimSun-18030MonospacezhSong  binding=\"same\"新宋体-18030MonospacezhSong  binding=\"same\"Songti SCSerifzhSong  binding=\"same\"宋體-簡SerifzhSong  binding=\"same\"宋体-简SerifzhSong  binding=\"same\"Songti TCSerifzhSong  binding=\"same\"宋體-繁SerifzhSong  binding=\"same\"宋体-繁SerifzhSong  binding=\"same\"AR PLBaosong2GBK LightSerifzhSong  binding=\"same\"文鼎ＰＬ报宋二GBKSerifzhSong  binding=\"same\"AR PL SungtiL GBMonospacezhSong  binding=\"same\"文鼎ＰＬ简报宋MonospacezhSong  binding=\"same\"AR PLMingU20 LightSerifzhSong  binding=\"same\"文鼎ＰＬ明體U20-LSerifzhSong  binding=\"same\"AR PL Mingti2L Big5MonospacezhSong  binding=\"same\"文鼎ＰＬ細上海宋MonospacezhSong  binding=\"same\"AR PL ShanHeiSun UniSerifzhSong  binding=\"same\"文鼎PL细上海宋UniSerifzhSong  binding=\"same\"文鼎PL細上海宋UniSerifzhSong  binding=\"same\"AR PL New SungSerifzhSong  binding=\"same\"文鼎ＰＬ新宋SerifzhSong  binding=\"same\"AR PL New Sung MonoMonospacezhSong  binding=\"same\"文鼎ＰＬ新宋 MonoMonospacezhSong  binding=\"same\"MingLiUMonospacezhSong  binding=\"same\"細明體MonospacezhSong  binding=\"same\"MingLiU-ExtBMonospacezhSong  binding=\"same\"細明體-ExtBMonospacezhSong  binding=\"same\"PMingLiUSerifzhSong  binding=\"same\"新細明體SerifzhSong  binding=\"same\"PMingLiU-ExtBSerifzhSong  binding=\"same\"新細明體-ExtBSerifzhSong  binding=\"same\"MingLiU_HKSCSMonospacezhSong  binding=\"same\"細明體_HKSCSMonospacezhSong  binding=\"same\"MingLiU_HKSCS-ExtBMonospacezhSong  binding=\"same\"細明體_HKSCS-ExtBMonospacezhSong  binding=\"same\"Adobe Fangsong StdSerifzhFangSong  binding=\"same\"Adobe 仿宋 StdSerifzhFangSong  binding=\"same\"FangSong_GB2312MonospacezhFangSong  binding=\"same\"仿宋_GB2312MonospacezhFangSong  binding=\"same\"FangSongMonospacezhFangSong  binding=\"same\"仿宋MonospacezhFangSong  binding=\"same\"STFangsongSerifzhFangSong  binding=\"same\"华文仿宋SerifzhFangSong  binding=\"same\"Adobe Kaiti StdSerifzhKai  binding=\"same\"Adobe 楷体 StdSerifzhKai  binding=\"same\"AR PL UKai CNMonospacezhKai  binding=\"same\"AR PL UKai HKMonospacezhKai  binding=\"same\"AR PL UKai TWMonospacezhKai  binding=\"same\"AR PL UKai TW MBEMonospacezhKai  binding=\"same\"BiauKaiSerifzhKai  binding=\"same\"KaiSerifzhKai  binding=\"same\"DFKai-SBMonospacezhKai  binding=\"same\"標楷體MonospacezhKai  binding=\"same\"STKaitiSerifzhKai  binding=\"same\"华文楷体SerifzhKai  binding=\"same\"KaiTiMonospacezhKai  binding=\"same\"楷体MonospacezhKai  binding=\"same\"Kaiti SCSerifzhKai  binding=\"same\"楷體-簡SerifzhKai  binding=\"same\"楷体-简SerifzhKai  binding=\"same\"Kaiti TCSerifzhKai  binding=\"same\"楷體-繁SerifzhKai  binding=\"same\"楷体-繁SerifzhKai  binding=\"same\"SimKaiMonospacezhKai  binding=\"same\"KaiTi_GB2312MonospacezhKai  binding=\"same\"楷体_GB2312MonospacezhKai  binding=\"same\"AR PL KaitiM GBMonospacezhKai  binding=\"same\"文鼎ＰＬ简中楷MonospacezhKai  binding=\"same\"AR PL New KaiMonospacezhKai  binding=\"same\"文鼎ＰＬ新中楷MonospacezhKai  binding=\"same\"AR PL KaitiM Big5MonospacezhKai  binding=\"same\"文鼎ＰＬ中楷MonospacezhKai  binding=\"same\"AR PL ZenKai UniSerifzhKai  binding=\"same\"文鼎PL中楷UniSerifzhKai     name=\"dpi\"102   en--   name=\"isDengKuan\"familyMonospace     target=\"pattern\"  name=\"family\" system-ui   name=\"family\" mode=\"prepend\" binding=\"strong\" sans-serif     target=\"pattern\"  name=\"family\" sans-serif   name=\"family\" mode=\"prepend\" binding=\"strong\" Sans zhHei zzFailBack     target=\"pattern\"  name=\"family\" serif   name=\"family\" mode=\"prepend\" binding=\"strong\" Serif zhSerif zzFailBack     target=\"pattern\"  name=\"family\" monospace   name=\"family\" mode=\"prepend\" binding=\"strong\" Monospace zhMono zzFailBack     target=\"pattern\"  name=\"family\" qual=\"any\" emoji   name=\"family\" mode=\"prepend\" binding=\"same\" zzSymbol      target=\"pattern\"  name=\"lang\" zh-HK   name=\"family\" zhHei   name=\"family\" binding=\"strong\" Noto Sans CJK HK     target=\"pattern\"  name=\"lang\" zh-HK   name=\"family\" zhSerif   name=\"family\" binding=\"strong\" Noto Serif CJK HK     target=\"pattern\"  name=\"lang\" zh-HK   name=\"family\" zhMono   name=\"family\" binding=\"strong\" Noto Sans Mono CJK HK     target=\"pattern\"  name=\"lang\" zh-TW   name=\"family\" zhHei   name=\"family\" binding=\"strong\" Noto Sans CJK TC     target=\"pattern\"  name=\"lang\" zh-TW   name=\"family\" zhSerif   name=\"family\" binding=\"strong\" Noto Serif CJK TC     target=\"pattern\"  name=\"lang\" zh-TW   name=\"family\" zhMono   name=\"family\" binding=\"strong\" Noto Sans Mono CJK TC     target=\"pattern\"  name=\"lang\" ja   name=\"family\" zhHei   name=\"family\" binding=\"strong\" Noto Sans CJK JP     target=\"pattern\"  name=\"lang\" ja   name=\"family\" zhSerif   name=\"family\" binding=\"strong\" Noto Serif CJK JP     target=\"pattern\"  name=\"lang\" ja   name=\"family\" zhMono   name=\"family\" binding=\"strong\" Noto Sans Mono CJK JP     target=\"pattern\"  name=\"lang\" ko   name=\"family\" zhHei   name=\"family\" binding=\"strong\" Noto Sans CJK KR     target=\"pattern\"  name=\"lang\" ko   name=\"family\" zhSerif   name=\"family\" binding=\"strong\" Noto Serif CJK KR     target=\"pattern\"  name=\"lang\" ko   name=\"family\" zhMono   name=\"family\" binding=\"strong\" Noto Sans Mono CJK KR      target=\"font\"   name=\"pixelsize\"  pixelsize10 10 pixelsize     name=\"antialias\"true   name=\"hinting\"true  name=\"autohint\"false  name=\"hintstyle\"hintslight   name=\"rgba\"rgb  name=\"lcdfilter\"lcddefault   name=\"embeddedbitmap\"false   name=\"embolden\"false    target=\"font\"  name=\"slant\" compare=\"eq\"roman  name=\"slant\" compare=\"not_eq\" target=\"pattern\"roman  name=\"slant\"oblique  name=\"matrix\"  matrix  10.2 01       target=\"font\"  name=\"weight\" compare=\"less\"105  name=\"weight\" compare=\"more\" target=\"pattern\"105  name=\"weight\"bold  name=\"embolden\"true    target=\"font\"  name=\"isOddPx\"  pixelsize0.52 pixelsize0.52      target=\"font\"  name=\"embolden\"true   name=\"pixelsize\"  pixelsize pixelsize13.525      target=\"font\"  name=\"isDengKuan\"true   name=\"isOddPx\"true   name=\"pixelsize\"pixelsize1    target=\"font\"  name=\"isDengKuan\"true  name=\"embolden\"true  name=\"pixelsize\" compare=\"more\"10.5  name=\"pixelsize\" compare=\"less\"12.5   name=\"pixelsize\"12  name=\"embolden\"false  name=\"weight\"80    target=\"font\"  name=\"isDengKuan\" mode=\"delete\"  name=\"isOddPx\" mode=\"delete\"   配置完成后，请运行 fc-cache -fv 并重新登陆。\n其他   XFCE 全局：Settings = Appearance = Fonts，Font 设置为 Sans Regular 和 Monospace Regular。然后 Hinting 设置为 Slight，DPI 设置为 102。之所以重复设置，是因为这里的设置会覆盖 fontconfig 的设置，fontconfig 大约在只有 WM 下才能设置一切吧。之前设置 Hinting 为 Full，结果 Hinting 过重导致 Telegram 英文字符间距不太均匀\n  xed：Edit = Preference = Font，设置为 Monospace Regular，字号 10。\n  Google Chrome 中的字体设置：用户要想 Google Chrome 听点话，需要在「设置」-「外观」-「自定义字体」里设置为 sans，serif，sans，monospace\n  Emoji 简介：它是一个日语词，e表示\"絵\"，moji表示\"文字\"。连在一起，就是\"絵文字\"。Unicode 只是规定了 Emoji 的码点和含义，并没有规定它的样式。举例来说，码点U+1F600表示一张微笑的脸，但是这张脸长什么样，则由各个系统自己实现。\n  Typora: Preferences = Open Advanced Settings\n  Xfce Terminal: Settings = Xfce Terminal Settings = Appearance = Use system font\n  苹果字体：\n Meslo LG S（更接近 Apple 的 Menlo）：ttf-meslo SF Pro \u0026 New York：apple-fonts PingFang SC：ttf-pingfang-git(SC) Apple Color Emoji：ttf-apple-emoji    analyze font files: only support OpenType fonts.\n$ sudo pacman -S lcdf-typetools $ otfinfo --info *.ttf | grep Subfamily   Preview Fonts：真的只能查看，把字体预览转成图片，不能看字体的 metadata，没什么用的。\n$ pacman -S fontpreview $ fontpreview /path/of/fonts   Screen DPI Find the DPI value for your screen\n$ xdpyinfo | grep -B 2 resolution screen #0: dimensions: 1366x768 pixels (340x191 millimeters) resolution: 96x96 dots per inch How to calculate the right DPI value\n  Get your screen size in millimeters by running the command:\n$ xrandr | grep -w connected eDP1 connected primary 1366x768+0+0 (normal left inverted right x axis y axis) 340mm x 190mm   Convert it to centimeters. My values are 34 x 19.\n  Convert centimeters to inches. Divide the values by 2.54. In my case, the values are as follows: 13.39in x 7.48in.\n  Finally, divide your screen resolution values by inch values. In my case, the values are as follows: 1366/13.39 = 102.016430=~102. 768/7.48 = 102.673796=~102.\n  How to change the DPI value\n  No desktop environment/barebones window manager\n$ vi ~/.Xresources Xft.dpi: 102 If your .Xresources file is not processed, add the following line to your startup file (e.g. .xinitrc or some window manager-specific file)\nxrdb -merge ~/.Xresources   Xfce\nThe DPI can be set to what you want under Settings - Appearance - Font.\n  Bluetooth $ pacman -S bluez bluez-utils $ lsmod | grep btusb $ sudo systemctl enable --now bluetooth.service $ sudo usermod -a -G lp kurome # re-login 要自动化 bluetoothctl 命令，使用 echo -e \"command1\\ncommand2\\n\" | bluetoothctl\n运行 bluetoothctl 交互命令。输入 help 来获取帮助。\n （可选操作）使用 select MAC_address 选择一个默认的蓝牙接收器。 使用命令 power on 打开蓝牙。蓝牙默认是关闭的，并且重启之后默认也会关闭。 使用命令 devices 获得要配对的设备的 MAC 地址。 如果设备没有出现在上一步的列表中，使用命令 scan on 去搜索发现所有可配对的设备。 使用命令 agent on 打开代理或者选择一个特定的代理：如果在 agent 命令后按下两次 tab 键，应该就能看到可用代理的列表。蓝牙代理用于管理蓝牙“配对码”。它可以回复外部发来的“配对码”，也可以主动发送。大部分情况下使用 default-agent 应该就足够了。 使用命令 pair MAC_address 配对设备（可用 tab 键补全 MAC 地址）。 如果配对设备不需要 PIN，那么你可能需要手动将设备添加到信任列表。使用命令 trust MAC_address。 使用命令 connect MAC_address 建立连接。  最后，音频输出选择蓝牙耳机。\n屏蔽网站 可以不需要插件的 一种简单的方式直接在 hosts 文件中添加一条记录即可\n$ sudo vim /etc/hosts # forbidden website  # 127.0.0.1 后面的网站可以替换成自己想要禁止访问的网页 127.0.0.1 www.csdn.net 但是上面依旧会显示在搜索结果中，同理 uBlock 等，只是无法访问，我想要的是不出现在搜索结果中，比如uBlacklist插件符合需求：\n*://www.csdn.net/* *://its401.com/* KolourPaint KDE 下免费、快速的图像编辑器，与Windows 7系统之前微软画图软件相似，但是添加了一些如支持透明度等的新特征。\npackages out-of-date First, you should flag the package out-of-date indicating details on why the package is outdated, preferably including links to the release announcement or the new release tarball.\nYou should also try to reach out to the maintainer directly by email. If there is no response from the maintainer after two weeks, you can file an orphan request.\nzbar Command-line QR-code decode: zbarimg\n$ yay -S zbar $ zbarimg \"image-file-name.jpg\" zsh 安装 zfs\n$ sudo pacman -S zsh zsh-autosuggestions zsh-syntax-highlighting zsh-completions autojump $ chsh -l # 查看安装了哪些 Shell $ chsh -s /usr/bin/zsh # 修改当前账户的默认 Shell $ nano ~/.zshrc # 让插件生效 # Plugin source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh source /usr/share/autojump/autojump.zsh  zsh-autosuggestions —— 命令自动补全插件 zsh-syntax-highlighting —— 语法上高亮插件 zsh-completions —— 补充补全定义 autojump —— 一种更快的文件系统导航方式  可能需要：\n 将在 ~/.bash_profile 所做的配置复制到 ~/.zsh_profile 将在 ~/.bashrc 所做的配置复制到 ~/.zshrc  安装 powerlevel10k\n$ git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/.powerlevel10k $ echo 'source ~/.powerlevel10k/powerlevel10k.zsh-theme'  ~/.zshrc powerlevel10k 中包含许多特殊图标符号，需要与之兼容的字体。\n.zshrc\n# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc. # Initialization code that may require console input (password prompts, [y/n] # confirmations, etc.) must go above this block; everything else may go below. if [[ -r \"${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh\" ]]; then source \"${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh\" fi # Lines configured by zsh-newuser-install HISTFILE=~/.histfile HISTSIZE=1000 SAVEHIST=1000 bindkey -e # End of lines configured by zsh-newuser-install # The following lines were added by compinstall zstyle :compinstall filename '/home/kurome/.zshrc' autoload -Uz compinit compinit # End of lines added by compinstall # Plugin source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh source /usr/share/autojump/autojump.zsh # CUSTOM BEGIN ## User specific environment export PATH=\"$HOME/.local/bin:$PATH\" ## Alias alias lsptu=\"lsof -i | grep -i listen\" alias ls='ls --color=auto' alias ll='ls -lav --ignore=..' # show long listing of all except \"..\" alias l='ls -lav --ignore=.?*' # show long listing but no hidden dotfiles except \".\" # CUSTOM END source ~/.powerlevel10k/powerlevel10k.zsh-theme # To customize prompt, run `p10k configure` or edit ~/.p10k.zsh. [[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh 默认的 .bashrc\n# # ~/.bashrc # # If not running interactively, don't do anything [[ $- != *i* ]] \u0026\u0026 return [[ -f ~/.welcome_screen ]] \u0026\u0026 . ~/.welcome_screen _set_liveuser_PS1() { PS1='[\\u@\\h \\W]\\$ ' if [ \"$(whoami)\" = \"liveuser\" ] ; then local iso_version=\"$(grep ^VERSION= /usr/lib/endeavouros-release 2/dev/null | cut -d '=' -f 2)\" if [ -n \"$iso_version\" ] ; then local prefix=\"eos-\" local iso_info=\"$prefix$iso_version\" PS1=\"[\\u@$iso_info\\W]\\$ \" fi fi } _set_liveuser_PS1 unset -f _set_liveuser_PS1 ShowInstallerIsoInfo() { local file=/usr/lib/endeavouros-release if [ -r $file ] ; then cat $file else echo \"Sorry, installer ISO info is not available.\" \u00262 fi } alias ls='ls --color=auto' alias ll='ls -lav --ignore=..' # show long listing of all except \"..\" alias l='ls -lav --ignore=.?*' # show long listing but no hidden dotfiles except \".\" [[ \"$(whoami)\" = \"root\" ]] \u0026\u0026 return [[ -z \"$FUNCNEST\" ]] \u0026\u0026 export FUNCNEST=100 # limits recursive functions, see 'man bash' ## Use the up and down arrow keys for finding a command in history ## (you can write some initial letters of the command first). bind '\"\\e[A\":history-search-backward' bind '\"\\e[B\":history-search-forward' ########################################################################################################## ## Some generally useful functions. ## Consider uncommenting aliases below to start using these functions. ## ## October 2021: removed many obsolete functions. If you still need them, please look at ## https://github.com/EndeavourOS-archive/EndeavourOS-archiso/raw/master/airootfs/etc/skel/.bashrc _open_files_for_editing() { # Open any given document file(s) for editing (or just viewing). # Note1: # - Do not use for executable files! # Note2: # - Uses 'mime' bindings, so you may need to use # e.g. a file manager to make proper file bindings. if [ -x /usr/bin/exo-open ] ; then echo \"exo-open $@\" \u00262 setsid exo-open \"$@\" \u0026 /dev/null return fi if [ -x /usr/bin/xdg-open ] ; then for file in \"$@\" ; do echo \"xdg-open $file\" \u00262 setsid xdg-open \"$file\" \u0026 /dev/null done return fi echo \"$FUNCNAME: package 'xdg-utils' or 'exo' is required.\" \u00262 } #------------------------------------------------------------ ## Aliases for the functions above. ## Uncomment an alias if you want to use it. ## # alias ef='_open_files_for_editing' # 'ef' opens given file(s) for editing # alias pacdiff=eos-pacdiff ########################################################################################################## Emacs 学习Emacs有几条曲线\n  先会用基本的快捷键, 安装各种简单的插件, 抄各种各样的配置, 先体验一下Emacs的强大功能.\n  安装复杂插件, 被各种配置搞崩溃了, 越改挂的越厉害, 大部分人卡在这个阶段, 因为不会Elisp, 导致东拼西凑的方法对于复杂插件行不通\n  你搞不懂Emacs复杂的配置的原因是因为你不懂 Elisp 编程, 学习Elisp的方法: 老老实实读Emacs内置的 Elisp reference manual, 这么厚的手册怎么学?\n  一页一页的挨着看, 一个API一个API的读, 不要跳过\n  每个API, 都在 ielm 里面实践一下\n  遇到不知道啥鬼用的API, 去Google或EmacsWiki上搜索一下, 看看别人怎么用这些API的?\n    如果你花了一个月耐下心读完 Elisp reference manual 以后, Emacs 90% 以上的代码你都可以看懂了, 继续折腾复杂插件, 知道 require, autoload, set-key, 各种 hook, defadvice 的在不同环境下的细微差别, 编程上知道 save-excursion, ignore-errors 这些风骚 macro 的用法. 这个阶段可以尝试手动来写一写复杂的配置了, 这个阶段你已经是 Emacs 高级用户了.\n  如果还不满足, 可以像我这样造点有趣的轮子: My Emacs Plugins 50 , 如果你自己会写Elisp插件, 你会发现Emacs其实是越用越简单的, 因为包括正则表达式, 语法高亮, 模式, 异步子进程, hook, overlay, advice 这些代码你写熟悉以后, 你会发现所有插件的唯一差别就是复杂度和想象力的区别, 不存在想得出来写不出来的东西.\n  到了这个阶段, 唯一可以让你学习到更多知识的就是去 IRC #emacs 和那些古老的黑客们交流, 或者去扒Github Emacser, 我知道很多日本牛逼哄哄的Emacs开发者都把插件放到 ftp 上 (比如当年的 color-moccur.el ), 学点 Google 语法就可以定向搜索. 这些人都是你会写Emacs插件后, 需要学习和进阶的榜样, 这时候你再看Elisp代码, 你的注意力会放在他们Elisp编程的一些细节上, 比如代码写的更简洁, 方法用的妙, 架构设计上等等, 这是完全不同阶段的探索体验.\n  如果你还不满足, 好好学习C语言, 然后再找个赚钱的工作, 把自己和家人照顾好. 业余时间直接用C或Elisp给Emacs底层做贡献, 把你的代码贡献固化到Emacs中, 然后你的名字可以像我一样写到 Emacs AUTHORS 里面去装逼: Emacs AUTHORS 146\n  如果你已经看到这里, 而且也做到上面的所有7点, 你自己的能力和精神境界都会很高了, 再也不会咋咋呼呼的吵着自己的技术要咋样咋样, 因为你会发现学的越多, 自己就是傻逼一个, 啥都不懂, 这辈子即使终身学习也学习不完, 哈哈哈哈.\n上面就是我学习Emacs十多年的经验分享, 希望可以给同学们一点参考.\nQuestions “signature is marginal trust”, “signature is unknown trust”, or “invalid or corrupted package”\n如果您有任何错误，您可以清除 pacman 密钥环并重新开始：\n$ sudo rm -fr /etc/pacman.d/gnupg $ sudo pacman-key --init $ sudo pacman-key --populate archlinux archlinuxcn endeavouros $ sudo pacman -Syy archlinux-keyring archlinuxcn-keyring endeavouros-keyring $ sudo pacman -Syyu  记着将所有用到的仓库都添加，如上面分别是 archlinux、archlinuxcn、endeavouros 三个仓库 千万不要运行 pacman-key refresh,超级慢，个把小时，实在没必要。  当 chrome 使用 GTK+ 主题的时候，无法调整窗口大小\nenable “System title bars and borders”\n有时候正确输入密码但是提示密码错误\n问题来自一个经常需要特权并阻止我使用真实密码登录的流氓 cronjob。请参阅 pam_faillock 和 cron。\n一般只需要等一会儿之后就好了。\nDownload a single folder or directory from a GitHub repo\nUpdate Apr. 2021: there are a few tools created by the community that can do this for you:\n Download Directory(Credits to fregante)  It has also been integrated into the excellent Refined Github chrome extension as a button in the Github web UI.   GitZip (Credits to Kino - see his answer here) DownGit (Credits to Minhas Kamal - see his answer here)  Note: if you’re trying to download a large number of files, you may need to provide a token to these tools to avoid rate limiting.\nOriginal (manual) approach: Checking out an individual directory is not supported by git natively, but Github can do this via SVN. If you checkout your code with subversion, Github will essentially convert the repo from git to subversion on the backend, then serve up the requested directory.\nHere’s how you can use this feature to download a specific folder. I’ll use the popular javascript library lodash as an example.\n  Navigate to the folder you want to download. Let’s download /test from master branch.\n  Modify the URL for subversion. Replace tree/master with trunk.\nhttps://github.com/lodash/lodash/tree/master/test ➜\nhttps://github.com/lodash/lodash/trunk/test\n  Download the folder. Go to the command line and grab the folder with SVN.\nsvn checkout https://github.com/lodash/lodash/trunk/test   You might not see any activity immediately because Github takes up to 30 seconds to convert larger repositories, so be patient.\n Full URL format explanation:\n If you’re interested in master branch, use trunk instead. So the full path is trunk/foldername If you’re interested in foo branch, use branches/foo instead. The full path looks like branches/foo/foldername Protip: You can use svn ls to see available tags and branches before downloading if you wish   That’s all! Github supports more subversion features as well, including support for committing and pushing changes.\nWM Window manager recommendation?\ni3 (sway for Wayland) is the easy peasy starter kit. I like Bspwm, it’s one big bash script basically to get configs going. Then there’s the more challenging one that you can pick based on your preferred programming language: Awesome (lua), Xmonad (haskell), DWM (C), Qtile (python)\nawesome wm, probably the most extensive wm, for one you can load whole libraries into it like xmonad, but using lua is do much easier than haskell, tho the api docs could get an overhaul as they are kind of ugly when giving code examples going straight from 1 to 10.\n常见的窗口管理相关的工具\n合成器\n Compton - Compton 是一款独立的合成管理器，适合同没有原生提供合成功能的窗口管理器一同使用。 Gamescope - Gamescope 是一款微合成器，提供一个带有独立输入，分辨率和刷新率的沙盒 Xwayland 桌面。 Sway - Sway 是平铺 Wayland 合成器和 X11 下 i3 窗口管理器的新替代。 Xcompmgr - Xcompmgr 是一个简单的合成管理器，能够渲染下拉阴影，使用 transset 工具的话，还可以实现简单的窗口透明。  叠加式窗口管理器\n 2bwm - 快速的浮动窗口管理，有两个特殊边界，基于 XCB 库，由 mcwm 衍生。 Blackbox - 快速，轻量化的 X 窗口系统窗口管理器，没有那些烦人的库依赖。 Fluxbox - 基于 Blackbox 0.61.1 代码的 X 窗口管理器。 Openbox - 高度可配置，带有可扩展标准支持的下一代窗口管理器。  平铺式窗口管理器\n Bspwm - bspwm 是一个平铺式窗口管理器，将窗口以二叉树的叶结点的方式展现。 Herbstluftwm - 使用 Xlib 和 Glib 的手工平铺式窗口管理器。 i3 WM - 更好的平铺及动态窗口管理器。完全重写。目标平台是 GNU/Linux 和 BSD 操作系统。 i3-gaps - i3-gaps 是拥有更多功能的 i3。 Pop!_OS Shell - Pop Shell 是基于 GNOME shell 的窗口管理器，键盘驱动，自动平铺。 Qtile - qtile 是一款全功能，可 hack 的平铺窗口管理器，使用 Python 编写和配置。  动态窗口管理器\n awesome - 高度可配置，下一代 X 框架窗口管理器。 dwm - X 动态窗口管理器。它以平铺，单片镜以及浮动布局的方式管理窗口。 spectrwm - 小型动态平铺 X11 窗口管理器。主要受 xmonad 和 dwm 启发。 xmonad - 动态平铺 X11 窗口管理器，用 Haskell 编写和配置。  长时间日常使用动态窗口管理器之后发现，相比与传统的DE型桌面，这种WM型窗口管理方式确实能很大程度上提高工作效率。\nDE和WM的区别\n首先说明一下我即将提到的东西是什么。\n DE：Desktop Environment WM：Window Manager  桌面环境是一个相对完整的概念，一般情况下DE包含WM，比如Gnome3的默认WM是Mutter，KDE5的默认WM是KWin。主流的桌面环境都提供了大量自带的桌面组件来构成其完整的桌面体验。\n窗口管理器只是管理出现在你的桌面上的各种窗口的组件，具体的管理内容包含比如：窗口堆叠方式，窗口移动规则等。大多数人接触到的是堆叠式窗口管理器，一个窗口可以叠放在其他窗口之上，调整窗口的主要方式是鼠标。我即将介绍的dwm（Dynamic Window Manager）属于动态窗口管理器，可以自定义不同窗口的出现规则如平铺或者堆叠，主要的调整窗口的方式是键盘。\n大多数窗口管理器只提供管理窗口的逻辑和人机交互的处理，并不自带其他组件如程序启动器、终端等软件，因此只运行一个窗口管理器理论上是要比运行一个完整的桌面环境更加节约资源，也有更好的可伸缩性。\n实际上WM这个概念是应用了奥卡姆剃刀原理，把那些看似有点用但实际上多余的功能全部剔除，只留下你真正需要的和最常用的功能并加以强化，Less is More.\n通用配置 因为一个可独立运行的窗口管理器默认不携带任何多余的软件，所以为了满足日常使用需要进行一定程度的自定义配置，下面给出一下通用的配置：\nXorg \u0026 font $ pacman -S xorg-server xterm xorg-xinit $ pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji xinitrc ~/.xinitrc 可以方便的启动依赖 X 的程序，并在 X 启动时设置环境变量。如果用户主目录中存在 .xinitrc，startx 和 xinit 会执行此文件。如果不存在，startx 会执行默认的 /etc/X11/xinit/xinitrc。这个文件默认启动 Twm 和 Xterm.\n要设置窗口管理器或桌面环境，先通过复制创建默认文件：\n$ cp /etc/X11/xinit/xinitrc ~/.xinitrc 根据示例文件修改可以保留一些默认行为，例如会引用 /etc/X11/xinit/xinitrc.d 中以 .sh 结尾的脚本。\n然后编辑 ~/.xinitrc ：\n$ vim ~/.xinitrc #!/bin/bash xscreensaver \u0026 xsetroot -cursor_name left_ptr \u0026 exec openbox-session ~/.xinitrc 中应该只有 一个 未注释掉的 exec 行，而且 exec 行必须位于配置文件的末尾。exec 后面的所有命令只有窗口退出后才会被执行。在窗口管理器前启动的命令，例如屏保和壁纸程序，必须自行 fork 后台进程或用\u0026在后台启动, 否则启动程序会等待它们退出才会启动窗口管理器或桌面环境。使用 exec 作为前缀会替换当前的进程，这样进程进入后台时 X 不会退出。\n某些程序，比如 xrdb，不应该被 fork. 使用 exec 前缀时，程序将会用窗口管理器进程替换脚本进程，所以即使进程进入后台 X 也不会退出。\nxserverrc xserverrc 文件是一个启动 X server 的 shell 脚本。如果存在 ~/.xserverrc ，startx 和 xinit 都会执行这个文件。如果文件不存在，startx 会使用 /etc/X11/xinit/xserverrc.\n为了保持logind的 authenticated session 会话，并防止通过切换终端绕过屏幕锁定器， Xorg必须在发生登录的同一虚拟终端上启动。因此建议在~/.xserverrc 中指定 vt$XDG_VTNR:\n$ vim ~/.xserverrc #!/bin/sh exec /usr/bin/Xorg -nolisten tcp \"$@\" vt$XDG_VTNR 在登录时自动启用 X 如果使用Bash, 编辑 ~/.bash_profile,加入如下内容。如果文件不存在，从 /etc/skel/.bash_profile 复制一个。\n如果使用 zsh，则编辑 ~/.zprofile.\n$ vim ~/.bash_profile if [[ ! $DISPLAY \u0026\u0026 $XDG_VTNR -eq 1 ]]; then exec startx fi 如果希望在 X 会话终止时保持登入状态，删除 exec.\nAutomatic login into Xorg without display manager $ yay -S xlogin-git $ sudo systemctl enable xlogin@username 常用软件的推荐 注意：大部分软件需要根据所使用的 wm 添加配置才能使用，具体参照他人的配置\n Font: nerd-fonts-ibm-plex-mono, nerd-fonts-fira-code, nerd-fonts-jetbrains-mono, ttf-sarasa-gothic(chinese only), infinality(字体渲染美化) Launcher：dmenu, rofi Terminal: alacritty, kitty, st, wezterm, termite Editor: neovim, neovide\u0026glrnvim, doom emacs, vscode, sublime-text-nightly Compositor: picom-jonaburg-git, picom Shell: fish, zsh PDF reader: zathura, atril Player: mpd\u0026ncmpcpp, deadbeaf-git Notification daemon: dunst\u0026libnotify, notification-daemon Volume notificator: xob, volumeicon Screen locker: i3lock-color\u0026betterlockscreen, xautolock, xscrennserver System monitor: conky, btop Theme controler: xsettingsd, lxappearance, qt5ct Gtk themes: Light: Orchis-light, Dark: Nordic Qt themes: use qt5ct and qt5-styleplugins to set qt theme follow gtk2 theme Icon theme: Papirus Touchpad: libinput, ibinput-gestures, xdotool Fetch tool: macchina, rxfetch Automounter: udiskie Trash: glib2, gvfs(gui) 壁纸设置器：feh, nitrogen(gui) 文件管理器：thunar, nemo(cli), ranger(cli), pcmanfm(轻量级文件管理器) 电源管理器：xfce4-power-manager, cbatticon 截图工具：flameshot, scrot 输入法：fcitx5 科学上网工具：qv2ray 剪切板管理器：copyq 云同步工具：nutstore（坚果云）, dropbox 护眼：redshift 屏幕亮度调节器：light, xorg-xbacklight, brightnessctl  关于平铺还是浮动\n个人建议多数窗口平铺，以下窗口默认浮动：\nvirtualbox, lxappearance, qq, gpick, qalculator, slickpicker\n关于GTK主题和QT主题\n我建议让QT程序使用GTK主题，除上文提到的qt5ct再安装qt5-styleplugins\n在qt5ct中设置风格为gtk2\n配置\n从上到下，基本上 star 越多，就越完善，越容易安装与使用：\n lcpz/awesome-copycats: awesome (2.5k) streetturtle/awesome-wm-widgets: awesome (1.5k) bakkeby/dwm-flexipatch: dwm (618) siduck/chadwm: dwm (612)：很好看的主题 antoniosarosi/dotfiles: Qtile/Sepctrwm/Openbox/Xmonad/Dwm (471) 很全的配置（包括Arch 系统安装、桌面环境以及常用软件） pw4ever/awesome-wm-config: awesome (223) ayamir/dotfiles: Gentoo/Arch/dwm/awesome (201) lilydjwg/myawesomerc: awesome (85) 依云的  dwm dwm与其他wm的区别 前面已经说明了dwm与堆叠式窗口管理器的区别，下面说明一下dwm与其他平铺\u0026动态窗口管理器的区别。\ndwm使用C语言编写，使用修改源代码的方式来进行配置。说到源代码可能有些同学就有点害怕，其实修改源代码也很简单，因为有现成的例子可以复(bai)用(piao)嘛！通过直接修改源代码理论上可以确保你的dwm能满足你所有的需求，同时也没有多余的，你不需要的功能。\n相比之下，另外一个相当流行的动态窗口管理器i3wm也是使用C语言编写，但是通过修改其配置文件来配置，这相当于i3wm向你暴露可以被配置的接口来满足你的需求，但是这样的配置方式缺点在于你不能向其添加你需要的需求，只能向上游提交issue来完成enhancement。\n具有和dwm相似配置能力的窗口管理器是xmonad，它也是通过直接修改源代码的方式来调整配置，但是因为使用haskell编写的所以需要安装相当多的依赖，此外其运行效率也不及dwm。\ndwm安装 dwm\n$ sudo pacman -S libxinerama $ wget https://dl.suckless.org/dwm/dwm-6.3.tar.gz $ tar xpvf dwm-6.3.tar.gz $ mv dwm-6.3 ~/.dwm $ cd .dwm $ make clean install $ vim ~/.xinitrc #!/bin/bash exec dwm st\n$ wget https://dl.suckless.org/st/st-0.8.5.tar.gz 如果使用的终端模拟器不是st，需要修改config.def.h文件中的以下代码：\n/* 将其中的st修改为安装的终端模拟器 */ static const char *termcmd[] = { \"st\", NULL}; dmenu\n$ wget https://dl.suckless.org/tools/dmenu-5.1.tar.gz dwm配置 配置dwm主要需要修改的文件是config.def.h，主要的配置方式是使用被人写好的patch加必要时候的手动修改。dwm的patch都在其官方网站\n具体过程是这样的：\n 找到你需要的patch并下载 将其移动到~/.dwm目录下  $ patch 之后会输出这个patch过程的详细情况，一般情况不会出现问题\n需要注意的是要一个一个来\n出现问题之后需要对照如：config.def.h.rej, dwm.c.rej等后缀为rej的文件来手动修改对应的没有rej后缀的源文件\n打开之后rej文件中行首标有+的行是需要添加的行，标有-的行是需要删除的行\n所有更改都修改完毕之后重新编译安装，执行：\n$ rm -f ./config.h \u0026\u0026 sudo make clean install Starting Select Dwm from the menu in a display manager of choice. Alternatively, to start dwm with startx append exec dwm to ~/.xinitrc and prepend other programs to execute them as well, for example:\nredshift -O3500; xset r rate 300 50; exec dwm 字体和左侧状态栏图标 $ sudo pacman -S ttf-nerd-fonts-symbols-mono $ nvim ~/.local/applications/dwm/dwm-6.2/config.h /*设置dwm采用图标字体*/ static const char *fonts[] = {\"Symbols Nerd Font:size=14\"};\t/*图标对应的ASCLL码：https://www.nerdfonts.com/cheat-sheet*/ static const char *tags[] = {\"\\ue795\",\"\\ufc6e\",\"\\ue235\",\"\\uf308\"};\tStatusbar The information that you want dwm to show in the statusbar should be defined with xsetroot -name \"\" command in ~/.xinitrc or ~/.xprofile (if you are using a display manager). For example:\n# Statusbar loop while true; do xsetroot -name \"$( date +\"%F %R\" )\" sleep 1m # Update time every minute done \u0026 # Autostart section pcmanfm \u0026 exec dwm Conky statusbar\nConky can be printed to the statusbar with xsetroot -name:\n(conky | while read LINE; do xsetroot -name \"$LINE\"; done) \u0026 exec dwm 自动更换壁纸 创建壁纸目录\n$ mkdir -p ~/pictures/wallpapers 安装图片查看器feh,编写更换壁纸的配置文件\n$ pacman -S feh $ nvim ~/.dwm/dwm-wallpaper.sh #!/bin/bash while true do feh --recursive --randomize --bg-fill ~/pictures/wallpapers/ sleep 5m done 启动DWM时，自动执行壁纸配置文件\n$ nvim ~/kler_profiles/.dwm/autostart.sh #!/bin/bash /bin/bash ~/kler_profiles/.dwm/dwm-wallpaper.sh \u0026 picom picom是Xorg的独立合成器，适用于不提供合成功能的窗口管理器（例如 i3，dwm） 他可以给窗口设置淡入淡出、半透明、阴影等视觉效果。\n推荐补丁 透明补丁：alphasystray.diff 临时小窗口：dwm-scratchpad-6.2.diff 隐藏空标签：dwm-hide_vacant_tags-6.2.diff 窗口间距：dwm-vanitygaps-20190508-6.2.diff 自动启动脚本：dwm-autostart-20161205-bb3bd6f.diff 窗口全屏：dwm-actualfullscreen-20191112-cb3f58a.diff 状态栏显示多个窗口信息：dwm-awesomebar-20191003-80e2a76.diff awesome awesome是一个高度可配置的、用于Xorg的下一代框架窗口管理器。它非常快而且可扩展。它主要针对的是高级用户、开发人员和任何处理日常计算任务的人，他们希望对其图形环境进行精细的控制。\n安装 Install the awesome package. The development version is awesome-gitAUR, which is considered unstable and may have a different configuration API.\n$ pacman -S awesome $ vim ~/.xinitrc #!/bin/bash exec awesome 自定义配置 Awesome提供了一个设置文件 rc.lua ，把它拷贝到~/.config/Awesome/里。\n$ mkdir -p ~/.config/awesome/ $ cp /etc/xdg/awesome/rc.lua ~/.config/awesome/  登录后顶部有一条类似Windows任务栏的东西，叫做状态栏（Status Bar）。 状态栏的最左侧是Awesome的图标，点击它将会打开一个小菜单，这就是Awesome的主菜单。 Awesome 图标的右侧可以看到阿拉伯数字1-9，这些叫做标签（Tag），类似GNome或者KDE下的虚拟桌面。 在状态栏最右侧是布局切换器，布局（Layout）是根据屏幕上的可用空间来调整窗口位置、尺寸的方式。Awesome支持多种布局。  每次修改完使用 Mod4 + ctrl + R 重新加载配置。\nSome good examples of rc.lua would be as follows:\n Awesome screenshot thread Setkeh’s Awesome Configuration User configuration that supports different themes, including a status bar Awesome configuration with two modern themes  定制布局和标签 定制布局 如果希望改变默认的布局和修改布局的切换顺序，可以通过修改 rc.lua 文件来实现。找到像这样的一段代码：\nlayouts = { awful.layout.suit.floating, awful.layout.suit.tile, awful.layout.suit.tile.left, awful.layout.suit.tile.bottom, awful.layout.suit.tile.top, awful.layout.suit.fair, awful.layout.suit.fair.horizontal, awful.layout.suit.spiral, awful.layout.suit.spiral.dwindle, awful.layout.suit.max, awful.layout.suit.max.fullscreen, awful.layout.suit.magnifier } 这是所有Awesome提供的布局方案，并且是按切换顺序排列的。可以通过调整顺序来改变实际的布局切换顺序。如果不喜欢其中的一些布局方案，你可以把相应的代码给去掉。比如，对于我而言，全屏、放大和螺旋式布局都是不常用的，并且我希望第一个布局是平铺，而不是浮动，因此可以改成：\nlayouts = { awful.layout.suit.tile, awful.layout.suit.tile.left, awful.layout.suit.tile.bottom, awful.layout.suit.tile.top, awful.layout.suit.fair, awful.layout.suit.fair.horizontal, awful.layout.suit.floating, awful.layout.suit.max } 完成后保存修改，然后按 Mod4 + Control + r 重启 Awesome看看变化。\n浮动窗口 有些程序的窗口不适合采用平铺的方式，比如Firefox的下载窗口，或者Gimp的图层窗口、工具栏窗口等，这时候我们希望将这样的窗口设置为浮动：\n-- 需要自动设置为浮动的程序 -- 只需要把你想要设置为浮动窗口的程序的Instance或者class按照下面的格式写进去就行 -- 了。在awesome下用Mod4 + Ctr + i就可以看到当前程序的instance和class名字 -- { { { Rules awful.rules.rules = { -- All clients will match this rule. {rule = {}, properties = {border_width = beautiful.border_width, border_color = beautiful.border_normal, focus = true, keys = clientkeys, buttons = clientbuttons}}, {rule = {class = \"MPlayer\"}, properties = {floating = true}}, {rule = {class = \"Smplayer\"}, properties = {floating = true, tag = tags[1][6]}}, { rule = { class = \"pinentry\" }, properties = { floating = true } }, { rule = { class = \"gimp\" }, properties = { floating = true } }, {rule = {class = \"Firefox\"}, properties = {tag = tags[1][1]}}, {rule = {class = \"Firefox\", name = \"Download\"}, properties = {floating = true}}, {rule = {class = \"VirtualBox\"}, properties = {floating = true, tag = tags[1][2]}}, -- Set Firefox to always map on tags number 2 of screen 1. -- { rule = { class = \"Firefox\" }, -- properties = { tag = tags[1][2] } }, } -- } } } 定制标签 只要你愿意，你可以为每一个标签命名，并为每一个标签设置默认布局。这是 rc.lua 里默认的标签设置：\n-- { { { Tags -- Define a tag table which hold all screen tags. tags = {} for s = 1, screen.count() do -- Each screen has its own tag table. tags[s] = awful.tag({ 1, 2, 3, 4, 5, 6, 7, 8, 9 }, s, layouts[1]) end -- } } } 现在我们可以改变每个标签的名字，并为每一个设置默认布局。参考下面这段代码：\n-- { { { Tags -- Define a tag table which will hold all screen tags. tags = { names = { \"main\", \"www\", \"im\", \"gimp\", \"office\", \"music\", \"virtual\", 8, 9 }, layout = { layouts[1], layouts[8], layouts[8], layouts[7], layouts[1], layouts[7], layouts[8], layouts[1], layouts[1] }} for s = 1, screen.count() do -- Each screen has its own tag table. tags[s] = awful.tag(tags.names, s, tags.layout) end -- } } } 在这个例子中，我们还为前5个标签分别命名为\"main\", “www”, “im”, “gimp” 和\"office\"， 你可以根据自己的喜好进行更改。另外，我们还使用 layouts来指定每一个标签的布局， “[]“里的数字就是我们刚刚 定制布局的时候设置的布局的顺序，例如[1] 就是第1个布局。\n设置默认终端和编辑器 可以在 rc.lua 中修改下面的代码来设置默认的终端和编辑器：\nterminal = \"xterm\" editor = os.getenv(\"EDITOR\") or \"nano\" 美化 更换主题 Beautiful是一个Lua库，它允许你使用外部文件来为awesome做主题，在不改变你的rc.lua的情况下，动态地改变你整个awesome的颜色和墙纸变得非常简单。\nAwesome自带了三套主题： default 、 sky 和 zenburn 。\nThe default theme is at /usr/share/awesome/themes/default. Copy it to ~/.config/awesome/themes/default (optionally copy them all) and change rc.lua:\n$ cp -av /usr/share/awesome/themes ~/.config/awesome/themes -- beautiful.init(gears.filesystem.get_themes_dir() .. \"default/theme.lua\") local theme_path = string.format(\"%s/.config/awesome/themes/%s/theme.lua\", os.getenv(\"HOME\"), \"default\") beautiful.init(theme_path) 把其中的 default 更换成其他主题名字即可。\n或者直接添加路径\nbeautiful.init(\"/usr/share/awesome/themes/default/theme.lua\") 如果嫌主题太少，这里有很多PP的用户定制主题： Github主页，下载下来然后拷贝到~/.config/awesome/themes即可以使用。\n更换背景图片 主题的 theme.lua 文件可以配置背景、字体等内容，改一下图片路径：\ntheme.wallpaper = themes_path .. \"default/background.png\" 我希望背景图片最大化但不要拉伸，所以我将原本的\ngears.wallpaper.maximized(wallpaper, s, true) 改成了\ngears.wallpaper.maximized(wallpaper, s, false) 同时背景设置还有其他的方法：\n centered (surf, s, background, scale) tiled (surf, s, offset) fit (surf, s, background)  可以参考官方文档 或者 源码\n修改主菜单 可以通过修改 rc.lua 的相应内容来定制主菜单的内容。下面是我的配置。里面的设置完全根据我个人口味，而且用了几个第三方的icon。因此代码仅供参考，不建议照搬：\n-- { { { Menu -- Create a laucher widget and a main menu myawesomemenu = { { \"manual\", terminal .. \" -e man awesome\" }, { \"edit config\", editor_cmd .. \" \" .. awesome.conffile }, { \"restart\", awesome.restart }, { \"quit\", awesome.quit } } -- 创建一个favorite子菜单 myfavoriteapps = { { \"Terminal\", terminal }, { \"Firefox\", \"firefox\" }, { \"QQ\", \"qq2012\"}, { \"XMind\", \"/usr/local/xmind/xmind\" }, { \"Synaptic\", \"gksudo synaptic\" }, { \"Transmission\", \"transmission-gtk\"}, { \"Software-Center\", \"gksudo software-center\" }, { \"Update-Manager\", \"gksudo update-manager\" }, { \"JabRef\", \"sh /home/ehome/JabRef.sh\" } } mymainmenu = awful.menu({ items = { { \"awesome\", myawesomemenu, beautiful.awesome_icon }, { \"Debian\", debian.menu.Debian_menu.Debian , theme.deb_icon }, -- 添加Favorite菜单，并将icon设置为theme.fav_icon { \"Favorite\", myfavoriteapps, theme.fav_icon }, { \"Home\", \"dolphin\" , theme.home_icon }, -- 添加Emacs菜单项 { \"Emacs\", \"emacs\" }, -- 添加Chrome菜单项 { \"Chrome\", \"google-chrome\" }, -- 添加一个关机对话框 { \"Log out\", \"/usr/local/shutdown.sh\" } } }) mylauncher = awful.widget.launcher({ image = image(beautiful.awesome_icon), menu = mymainmenu }) -- } } } GTK \u0026 QT 主题 安装工具\n$ pacman -S lxappearance qt5ct qt5-styleplugins $ export QT_QPA_PLATFORMTHEME=qt5ct   下载解压 Gtk themes Nordic 到 ~/.themes\n  下载解压 Icon theme Papirus 到 ~/.icons\n  $ lxappearance # 选择 theme $ qt5ct # set qt theme follow gtk2 theme 插件 Awesome 里的插件指的是你可以在 wibox 上添加的小插件，通过使用插件（Widget），我们可以在状态栏上添加一些有用的信息，例如内存使用、CPU温度、电池状态，等等。\n对于新手，可以使用其他用户创建的插件库，这些插件库集成了功能齐全的插件，因此免去了自己编写插件的工作。这类的插件库有很多，推荐的是 Vicious。\n创建插件 要创建插件，可以使用 widget() 函数，例如：\nmysystray = widget({type = \"systray\"}) myicon = widget({ type = \"imagebox\" }) myicon.image = image(awful.util.getdir(\"config\") .. \"/myicon.png\") mytextbox = widget({ type = \"textbox\" }) mytextbox.text = \"Hello, world!\" 插件的类型 使用 widget() 函数创建插件的时候需要指定插件类型，Awesome自带的插件包括：\n systray：系统托盘插件。Awesome默认已经添加，就在状态栏上位于日期和时间左侧的区域。对于一些支持最小化到系统托盘的程序，例如ibus、chrome、shutter等，它们的图标将被放置在这里。 imagebox：展示一张图片。常用来和textbox一起搭配使用，创建启动器、图标和分隔符。这里 收集了很多精美的图标。 textboxtextbox：插件用来显示一段文本，这是最常用的插件。例如，在创建插件部分我们已经创建了一个名为mytextbox的textbox插件，并且插件显示的文本内容是\"Hello, World!\"。要修改文本内容，可以直接修改 rc.lua文件中的相应代码，或在终端中使用下面命令：  $ echo \"mytextbox.text = \"Foo Bar!\"\" | awesome-client Awesome还提供了计时器的API， 允许我们周期性的执行或更新插件。例如：\nmytimer = timer({ timeout = 30 }) mytimer:add_signal(\"timeout\", function() mytextbox.text = \"Hello awesome world!\" end) mytimer:start() textbox的文本属性（颜色、字体）是可以通过使用 Pango 标记语言来修改。最简单的例子是：\nmytextbox.text = 'Sacrebleu, I have seen a ghost! ' 要了解更多textbox的设置，例如改变背景颜色、边框、文本对齐等，可以参看Awesome的API文档。\n推荐：实用插件 awesome-wm-widgets 收集了丰富的插件：\n  battery-widget\n  brightness-widget\n  calendar-widget\n  logout-menu-widget\n  net-speed-widget\n  translate-widget\n  volume-widget: need amixer\n$ pacman -S pulseaudio alsa-utils $ pulseaudio --start custom shotcuts\nawful.key({ modkey }, \"]\", function() volume_widget:inc(5) end, {description = \"increase the volume\", group = \"custom\"}), awful.key({ modkey }, \"[\", function() volume_widget:dec(5) end, {description = \"decrease the volume\", group = \"custom\"}), awful.key({ modkey }, \"\\\\\", function() volume_widget:toggle() end, {description = \"switch between mute and unmute\", group = \"custom\"}),   weather-widget\n  音量控制插件 Awesome 自己不提供音量控制插件，如果未经设置，还会发现原本键盘上的多媒体按键都会失效，这是因为没有让 Awesome 绑定这些热键。下面实现一个音量控制插件，并且将音量控制绑定到多媒体键盘的音量加（XF86AudioRaiseVolume）、音量减（XF86AudioLowerVolume）、静音（XF86AudioMute）几个按键上。\n首先实现一个音量控制插件，将它保存为 ~/.config/awesome/volume.lua：\n-- Create a volume control volume_widget = widget({ type = \"textbox\", name = \"tb_volume\", align = \"right\" }) function update_volume(widget) local fd = io.popen(\"amixer sget Master\") local status = fd:read(\"*all\") fd:close() local volume = tonumber(string.match(status, \"(%d?%d?%d)%%\")) / 100 -- volume = string.format(\"% 3d\", volume) status = string.match(status, \"%[(o[^%]]*)%]\") -- starting colour local sr, sg, sb = 0x3F, 0x3F, 0x3F -- ending colour local er, eg, eb = 0xDC, 0xDC, 0xCC local ir = volume * (er - sr) + sr local ig = volume * (eg - sg) + sg local ib = volume * (eb - sb) + sb interpol_colour = string.format(\"%.2x%.2x%.2x\", ir, ig, ib) if string.find(status, \"on\", 1, true) then volume = \" .. interpol_colour .. \"' \" else volume = \" .. interpol_colour .. \"' M \" end widget.text = volume end update_volume(volume_widget) awful.hooks.timer.register(1, function () update_volume(volume_widget) end) 然后编辑 rc.lua ，在开头引入这个插件：\n-- Volume contrl local volume_widget = require(\"volume\") 在 wibox 中添加这个插件，例如放在系统托盘的右侧：\n-- Add widgets to the wibox s.mywibox:setup { layout = wibox.layout.align.horizontal, { -- Left widgets ... }, s.mytasklist, -- Middle widget { -- Right widgets ... volume_widget ... }, 最后绑定到几个多媒体键：\n-- volume control awful.key({ }, \"XF86AudioRaiseVolume\", function () awful.util.spawn(\"amixer set Master 9%+\") end), awful.key({ }, \"XF86AudioLowerVolume\", function () awful.util.spawn(\"amixer set Master 9%-\") end), awful.key({ }, \"XF86AudioMute\", function () awful.util.spawn(\"amixer sset Master toggle\") end), 这个插件将在状态栏放置一个亮度随音量大小改变的白色小方块，当系统处于静音状态时，图标将变为一个红色的 M 字符。\nVicious $ pacman -S vicious 在 rc.lua 头部增加声明信息并添加 Date Widget：\nlocal vicious = require(\"vicious\") datewidget = wibox.widget.textbox() vicious.register(datewidget, vicious.widgets.date, \"%b %d, %R\") 最后添加到 wibox (statusbar) 中\n-- Add widgets to the wibox s.mywibox:setup { layout = wibox.layout.align.horizontal, { -- Left widgets ... }, s.mytasklist, -- Middle widget { -- Right widgets ... datewidget ... }, xob 音量控制 Awesome 自己不提供音量控制插件，如果未经设置，还会发现原本键盘上的多媒体按键都会失效，这是因为没有让 Awesome 。下面实现一个音量控制插件，并且将音量控制绑定到按键上。\nxob\ninstall pulseaudio\n$ sudo pacman -S pulseaudio pamixer install xob\n$ yay -S xob Ready to use volume bar for pulseaudio\n$ sudo pacman -S python-pip $ pip install pulsectl $ mkdir -p ~/.local/bin $ vim ~/.local/bin/pulse-volume-watcher.py # copy from xob doc $ chmod u+x ~/.local/bin/pulse-volume-watcher.py 为绑定音量热键，在 rc.lua 文件的 globalkeys 里加入\nawful.key({ modkey }, \"]\", function () awful.util.spawn_with_shell(\"pamixer -i 1\") end, {description = \"increase the volume\", group = \"custom\"}), awful.key({ modkey }, \"[\", function () awful.util.spawn_with_shell(\"pamixer -d 1\") end, {description = \"decrease the volume\", group = \"custom\"}), awful.key({ modkey }, \"\\\\\", function () awful.util.spawn_with_shell(\"pamixer -t\") end, {description = \"switch between mute and unmute\", group = \"custom\"}), 开机启动 xob，配置下面自启动方案一后添加如下代码：\nrun_once({ \"/home/kurome/.local/bin/pulse-volume-watcher.py | xob\" }) 屏幕亮度控制 用 xbacklight 命令\npacman -S xorg-xbacklight xbacklight -set 50 # 亮度设置在 50% xbacklight -inc 10 # 亮度增加 10% xbacklight -dec 10 # 亮度减少 10% xbacklight -get # 获取当前亮度 消息交互 Naughty 是 Awesome 中的一个 lua 库，用于实现弹出消息框。利用 Naughty，我们可以实现在后台执行命令，然后在弹出消息框中显示结果。\n首先要确保 rc.lua 的开头有这一行：\nrequire(\"naughty\") 如果想更改naughty的默认设置，可以添加下面的代码：\nnaughty.config.default_preset.timeout = 5 naughty.config.default_preset.screen = 1 naughty.config.default_preset.position = \"top_right\" naughty.config.default_preset.margin = 4 naughty.config.default_preset.height = 16 naughty.config.default_preset.width = 300 naughty.config.default_preset.gap = 1 naughty.config.default_preset.ontop = true naughty.config.default_preset.font = beautiful.font or \"Verdana 8\" naughty.config.default_preset.icon = nil naughty.config.default_preset.icon_size = 16 naughty.config.default_preset.fg = beautiful.fg_focus or '#ffffff' naughty.config.default_preset.bg = beautiful.bg_focus or '#535d6c' naughty.config.presets.normal.border_color = beautiful.border_focus or '#535d6c' naughty.config.default_preset.border_width = 1 naughty.config.default_preset.hover_timeout = nil 下面利用sdcv实现一个词典工具，绑定到 Mod4 + d 上，更多的例子可以参考 官方的教程 。\nawful.key({ modkey }, \"d\", function () info = true awful.prompt.run({ fg_cursor = \"black\",bg_cursor=\"orange\", prompt = \"sdcv:\" }, mypromptbox[mouse.screen].widget, function(word) local f = io.popen(\"sdcv -n \" .. word) local fr = \"\" for line in f:lines() do fr = fr .. line .. 'n' end f:close() naughty.notify({ title = \"\" .. word .. \":\", text = '' .. fr ..'', timeout = 5, width = 400, screen = mouse.screen }) end) end) ) 标题栏 搜索 titlebars_enabled ，设置为 false 来取消标题栏。\n{ rule_any = {type = { \"normal\", \"dialog\" } }, properties = { titlebars_enabled = false } }, 自启动 最简单的方式是在 rc.lua 里添加类似这样的代码：\nawful.util.spawn_with_shell(\"firefox\") awful.util.spawn_with_shell(\"thunderbird\") awful.util.spawn_with_shell(\"amarok\") awful.util.spawn_with_shell(\"amule\") Rules of thumb when a shell(spawn_with_shell) is needed:\n A shell is required when the commands contain \u0026\u0026, ;, ||, \u0026 or any other unix shell language syntax When shell variables are defined as part of the command When the command is a shell alias  方案一 local function run_once(cmd_arr) for _, cmd in ipairs(cmd_arr) do awful.spawn.with_shell(string.format(\"pgrep -u $USER-fx '%s'  /dev/null || (%s)\", cmd, cmd)) end end run_once({ \"synergy\" }) run_once({ \"ibus-daemon -d -x -r -n awesome\" }) run_once({ \"compton --conf /home/kelu/.config/compton.conf\" }) run_once({ \"/home/kelu/Desktop/WeChat.desktop\" }) 方案二 To implement the XDG autostart specification, create autorun.sh and insert the following:\n$ vim .config/awesome/autorun.sh #!/usr/bin/env bash function run { if ! pgrep -f \"$1\" ; then $@\u0026 fi } Then, make it executable.\n$ chmod u+x .config/awesome/autorun.sh 要在自动启动中添加程序，只需在autorun.sh中添加run \"program [some arguments]\"。run函数检查是否已经有一个参数相同的program实例，如果没有，则运行program。\n$ vim ~/.config/awesome/autorun.sh ... run \"fcitx5\" If everything is fine, add the following line to your rc.lua:\n$ vim ~/.config/awesome/rc.lua ... awful.spawn.with_shell(\"~/.config/awesome/autorun.sh\") ... 自定义快捷键 查看键映射表\n$ xmodmap -pm shift Shift_L (0x32), Shift_R (0x3e) lock Caps_Lock (0x42) control Control_L (0x25), Control_R (0x69) mod1 Alt_L (0x40), Meta_L (0xcd) mod2 Num_Lock (0x94) mod3 mod4 Super_R (0x86), Super_L (0xce), Hyper_L (0xcf) mod5 ISO_Level3_Shift (0x5c), ISO_Level3_Shift (0x6c), Mode_switch (0x85), Mode_switch (0xcb) 编辑 rc.lua，在文件中查找文本\n-- {{{ Key bindings globalkeys = awful.util.table.join( 在此之下，可以添加您的自定义命令，例如：\n-- {{{ Key bindings globalkeys = awful.util.table.join( -- My Bindings awful.key({ }, \"F1\", function () awful.util.spawn_with_shell(\"terminator\") end), 以下是我的一些例子，注意不要和原有的快捷键冲突噢：\n-- Custom awful.key({ \"Control\" , }, \"3\", function () awful.util.spawn_with_shell(\"shutter -f\") end, {description = \"screenshot\", group = \"custom\"}), awful.key({ \"Control\" , }, \"4\", function () awful.util.spawn_with_shell(\"shutter -a\") end, {description = \"screenshot\", group = \"custom\"}), awful.key({ \"Control\" , }, \"5\", function () awful.util.spawn_with_shell(\"shutter -s\") end, {description = \"screenshot\", group = \"custom\"}), awful.key({ modkey, }, \"e\", function () awful.util.spawn_with_shell(\"nautilus --no-desktop .\") end, {description = \"nautilus\", group = \"custom\"}), awful.key({ modkey, }, \"w\", function () awful.util.spawn_with_shell(\"/usr/share/typora/Typora /home/kelu/Workspace/document/todo.md\") end, {description = \"Typora\", group = \"custom\"}), -- awful.key({ modkey, }, \"w\", function () awful.util.spawn_with_shell(\"nautilus --no-desktop .\") end, -- {description = \"nautilus\", group = \"custom\"}), awful.key({ modkey, }, \"b\", function () awful.util.spawn_with_shell(\"google-chrome-stable\") end, {description = \"chrome\", group = \"custom\"}), 我配置了自己的group叫custom，所有快捷键的信息可以使用 Mod4+S 快捷键查询。\n关闭窗口快捷键 在方法 clientkeys = awful.util.table.join 内部添加：\nawful.key({ modkey, }, \"q\", function (c) c:kill() end, {description = \"close\", group = \"custom\"}), awful.key({ altkey, }, \"q\", function (c) c:kill() end, {description = \"close\", group = \"custom\"}), 关机  shutdown: systemctl poweroff reboot: systemctl reboot suspend: program pause \u0026; systemctl suspend logout: loginctl terminate-session ${XDG_SESSION_ID-}  其他 picom compton，用于透明美化等功能的工具，如果你当前使用的软件支持窗口透明的功能，那么compton可以帮你设置透明度，阴影效果，窗口切换效果等：\n$ sudo pacman -S picom $ mkdir -p ~/.config/picom/ $ cp -av /etc/xdg/picom.conf ~/.config/picom/picom.conf   Screentearing with NVIDIA’s proprietary drivers, Try this setting in picom.conf:\nvsync = true;   picom.sample.conf\n  启动与添加到自启动\n$ picom \u0026 $ vim ~/.config/awesome/rc.lua run_once({ \"picom\" }) Start Numlock At Boot You can start numlock at boot by installing this package:\n$ sudo pacman -S numlockx Then, insert this line in the ~/.xinitrc file two lines above the exec line:\nnumlockx \u0026 Change Display Resolution And Refresh Rate If you want to change the display resolution or the refresh rate of your monitor, you can use any of these programs.\nNVIDIA cards:\n$ sudo pacman -S nvidia-settings XFCE settings manager:\n$ sudo pacman -S xfce4-settings You can also use Xrandr to set your resolution and refresh rate. For a single 1080p monitor with 120Hz refresh rate, you can run this command\n$ xrandr --output DP-0 --mode 1920x1080 --rate 120 You can also just use xrandr to see what displays are connected and what resolutions and refresh rates they support\n$ xrandr Awesome Menu Awesome has a menu at the top left corner by default which may be useless to some people. You can disable it if you want by commenting the lines like mentioned below. These lines should start from 83.\n-- {{{ Menu -- Create a launcher widget and a main menu --myawesomemenu = { -- { \"hotkeys\", function() hotkeys_popup.show_help(nil, awful.screen.focused()) end }, -- { \"manual\", terminal .. \" -e man awesome\" }, -- { \"edit config\", editor_cmd .. \" \" .. awesome.conffile }, -- { \"restart\", awesome.restart }, -- { \"quit\", function() awesome.quit() end }, --}--mymainmenu = awful.menu({ items = { { \"awesome\", myawesomemenu, beautiful.awesome_icon }, { \"open terminal\", terminal } -- } -- }}--mylauncher - awful.widget.launcher({ image = beautiful.awesome_icon, -- menu = mymainmenu }) Force An Application To A Specific Tag You can force an application to always open in a specific tag. To do this, add these lines in the rc.lua file\n-- Set applications to always map on the tag 7 on screen 1. { rule = { class = \"Thunderbird\" }, properties = { screen = 1, tag = awful.util.tagnames[7] , switchtotag = true } }, Here, we want Thunderbird to open on tag 7 and on screen 1. You can modify and duplicate to as many applications you want\n输入法 安装\n$ pacman -S ibus ibus-rime 在 Awesome 的 rc.lua 中加入以下语句，让 Awesome 启动的时候顺便运行 ibus-daemon\nawful.util.spawn(\"ibus-daemon -d -x -r -n awesome\")  -d: run ibus as background process. -x: execute ibus XIM server. -r: if there is an old ibus-daemon is running, it will be replaced. -n: specify the name of desktop session. [default=gnome]  另外为了让各种图形库都能识别 ibus ，还需要在 $HOME/.profile 中加入这几个 环境变量：\nexport GTK_IM_MODULE=ibus export XMODIFIERS=@im=ibus export QT_IM_MODULE=ibus 屏保和休眠管理 这个其实好办， Xorg 下的e屏保有很多选择，而且大都附带休眠管理的配置。我挑了 “老牌”的 xscreensaver\n$ pacman -S xscreensaver 在 Awesome 的 rc.lua 配置文件里加入：\nawful.util.spawn(\"xscreensaver -no-splash\") xscreensaver 的配置选项也很多，不过我们可以通过 xscreensaver-demo 命令用图 形界面进行设置，所有选项都保存在 $HOME/.xscreensaver 文件中。\n添加一个快捷键：\nawful.key({ \"Mod4\" }, \"l\", function () awful.util.spawn_with_shell(\"xscreensaver-command --lock\") end, {description = \"lock the screen immediately\", group = \"custom\"}), rofi 安装\n$ pacman -S rofi $ mkdir -p ~/.config/rofi/ $ rofi -dump-config  ~/.config/rofi/config.rasi 添加快捷键(base on awesome-copycats)\nawful.key({ modkey }, \"r\", function () os.execute(string.format(\"rofi -show %s -theme %s\", 'drun', '')) end, {description = \"show rofi\", group = \"launcher\"}), awful.key({ altkey }, \"r\", function () os.execute(string.format(\"rofi -show %s -theme %s\", 'run', '')) end, {description = \"show rofi\", group = \"launcher\"}), awful.key({ altkey }, \"Tab\", function () os.execute(string.format(\"rofi -show %s -theme %s\", 'window', '')) end, {description = \"show rofi\", group = \"launcher\"}), mpd\u0026ncmpcpp 介绍\nmpd：mpd是一个播放本地音乐的后台服务\nncmpcpp：ncmpcpp是mpd的TUI前端，用来控制mpd的工作，此外也提供一些方便的功能比如查找歌曲，支持flac等多种音乐格式\n总之两者是client/server的关系\n安装即可：\n$ pacman -S mpd ncmpcpp 配置方法\n配置分为两步，一步是mpd的，另一步是ncmpcpp的\n这里建议直接用我的配置。记得把~/.config/mpd/mpd.conf和~/.config/ncmpcpp/config里面的音乐目录改成你的音乐路径即可\n我的配置声音输出用的是pulseaudio，所以你需要保证你的pulseaudio工作正常。\n使用\n启动mpd服务\n$ systemctl start mpd.service --user 之后启动ncmpcpp，具体用法这里不再赘述，直接查看archwiki或者在ncmpcpp里面按F1即可看到。\n出现问题之后首先检查mpd的日志\n$ systemctl status mpd --user 根据不同的提示来解决问题\n如果没有声音，首先检查一下pulseaudio，用pulseaudio的GUI配置工具pavucontrol即可\nflameshot awful.key({ modkey, \"Shift\" }, \"Print\", function () awful.util.spawn_with_shell(\"flameshot gui\") end, {description = \"Switch between windows\", group = \"custom\"}), awesome-copycats $ git clone --recurse-submodules --remote-submodules --depth 1 -j 2 https://github.com/lcpz/awesome-copycats.git $ mv -bv awesome-copycats/{*,.[^.]*} ~/.config/awesome; rm -rf awesome-copycats $ mv -bv awesome-copycats/* ~/.config/awesome; rm -rf awesome-copycats Additional default software used:\n$ pacman -S curl alsa-utils dmenu firefox mpc mpd flameshot unclutter xorg-xbacklight xsel slock 然后再 rc.lua 取消掉一些注释以启用某些功能\n  rofi instead of dmenu\n  flameshot shotcut\n  slock: To unlock slock, simply type your user password at the blank screen. You can verify this is the process via slock’s readme.\nawful.key({ modkey }, \"l\", function () os.execute(\"slock\") end, {description = \"lock screen\", group = \"hotkey\"}),   Unclutter hides your X mouse cursor when you do not need it, to prevent it from getting in the way.\n  xsel — Command-line program for getting and setting the contents of the X selection.\n  mpd \u0026 mpc: Music Player Daemon\n  Touchpad disable touchpad:\n$ sudo pacman -S xorg-xinput $ xinput list | grep Touchpad ⎜ ↳ FTE1200:00 0B05:0501 Touchpad id=15\t[slave pointer (2)] $ xinput disable \"FTE1200:00 0B05:0501 Touchpad\" $ vim .xinitrc xinput disable \"FTE1200:00 0B05:0501 Touchpad\" xbindkeys $ sudo pacman -S pulseaudio xbindkeys 之后通过 xbindkeys --multikey 获取键盘上与音量有关的 keycodes，也就是 f10、f11、f12\n$ xbindkeys --multikey \"(Scheme function)\" m:0x0 + c:76 F10 \"(Scheme function)\" m:0x0 + c:95 F11 \"(Scheme function)\" m:0x0 + c:96 F12 通过如下命令添加默认配置\n$ xbindkeys -d  ~/.xbbaindkeysrc 将如下代码添加到 ~/.xbindkeysrc 最后\n# Increase volume \"pactl set-sink-volume @DEFAULT_SINK@ +1000\" m:0x0 + c:96 F12 # Decrease volume \"pactl set-sink-volume @DEFAULT_SINK@ -1000\" m:0x0 + c:95 F11 # Mute volume \"pactl set-sink-mute @DEFAULT_SINK@ toggle\" m:0x0 + c:76 F10 然后启用：\n$ xbindkeys redshift $ sudo pacman -S redshift $ cat  ~/.config/awesome/rc.lua awful.util.spawn(\"redshift-gtk -l 39.5:116.2\") Tip: You can get the coordinates of a place with GeoNames.org\nautostart 效果不是很好，所以改为手动启用\n",
  "wordCount" : "56567",
  "inLanguage": "en",
  "image":"https://sakamotokurome.github.io/Distributions/archlinux-logo-dark.png","datePublished": "2022-08-20T09:24:53+08:00",
  "dateModified": "2022-08-20T09:24:53+08:00",
  "author":{
    "@type": "Person",
    "name": "Sakamoto Kurome"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sakamotokurome.github.io/posts/archlinux/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sakamoto Kurome",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sakamotokurome.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sakamotokurome.github.io/" accesskey="h" title="Sakamoto Kurome (Alt + H)">Sakamoto Kurome</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sakamotokurome.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      ArchLinux
    </h1>
    <div class="post-meta"><span title='2022-08-20 09:24:53 +0800 CST'>August 20, 2022</span>&nbsp;·&nbsp;113 min&nbsp;·&nbsp;Sakamoto Kurome

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://sakamotokurome.github.io/Distributions/archlinux-logo-dark.png" alt="ArchLinux Logo">
        <p>ArchLinux</p>
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%ba%86%e8%a7%a3-archlinux" aria-label="了解 Archlinux">了解 Archlinux</a><ul>
                        
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8-linux" aria-label="为什么使用 Linux？">为什么使用 Linux？</a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8-arch-linux" aria-label="为什么使用 Arch Linux？">为什么使用 Arch Linux？</a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e6%b4%81" aria-label="简洁">简洁</a></li>
                <li>
                    <a href="#%e6%bb%9a%e5%8a%a8%e6%9b%b4%e6%96%b0%e7%8e%b0%e4%bb%a3" aria-label="滚动更新（现代）">滚动更新（现代）</a></li>
                <li>
                    <a href="#%e5%ae%9e%e7%94%a8" aria-label="实用">实用</a></li>
                <li>
                    <a href="#%e4%bb%a5%e7%94%a8%e6%88%b7%e4%b8%ba%e4%b8%ad%e5%bf%83" aria-label="以用户为中心">以用户为中心</a></li>
                <li>
                    <a href="#arch-%e7%94%a8%e6%88%b7%e4%bb%93%e5%ba%93aur" aria-label="Arch 用户仓库（AUR）">Arch 用户仓库（AUR）</a></li>
                <li>
                    <a href="#%e6%bf%80%e8%bf%9b%e7%9a%84%e5%86%85%e6%a0%b8%e6%9b%b4%e6%96%b0%e6%9c%ba%e5%88%b6" aria-label="激进的内核更新机制">激进的内核更新机制</a></li>
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e5%8c%85%e7%ae%a1%e7%90%86%e4%bd%93%e7%b3%bb" aria-label="软件包管理体系">软件包管理体系</a></li>
                <li>
                    <a href="#%e7%94%b1%e7%a4%be%e5%8c%ba%e5%88%9b%e5%bb%ba%e6%94%af%e6%8c%81%e5%92%8c%e6%8b%a5%e6%9c%89" aria-label="由社区创建、支持和拥有">由社区创建、支持和拥有</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e5%89%8d%e7%9a%84%e5%87%86%e5%a4%87" aria-label="安装前的准备">安装前的准备</a><ul>
                        
                <li>
                    <a href="#%e7%a1%ae%e4%bf%9d%e7%bd%91%e7%bb%9c%e7%8e%af%e5%a2%83" aria-label="确保网络环境">确保网络环境</a></li>
                <li>
                    <a href="#%e5%88%bb%e5%bd%95%e5%90%af%e5%8a%a8%e4%bc%98%e7%9b%98" aria-label="刻录启动优盘">刻录启动优盘</a></li>
                <li>
                    <a href="#%e8%bf%9b%e5%85%a5%e4%b8%bb%e6%9d%bf-bios-%e8%bf%9b%e8%a1%8c%e8%ae%be%e7%bd%ae" aria-label="进入主板 BIOS 进行设置">进入主板 BIOS 进行设置</a></li>
                <li>
                    <a href="#%e5%85%b3%e9%97%ad%e4%b8%bb%e6%9d%bf%e8%ae%be%e7%bd%ae%e4%b8%ad%e7%9a%84-secure-boot" aria-label="关闭主板设置中的 Secure Boot">关闭主板设置中的 Secure Boot</a></li>
                <li>
                    <a href="#%e8%b0%83%e6%95%b4%e5%90%af%e5%8a%a8%e6%96%b9%e5%bc%8f%e4%b8%ba-uefi" aria-label="调整启动方式为 UEFI">调整启动方式为 UEFI</a></li>
                <li>
                    <a href="#%e8%b0%83%e6%95%b4%e7%a1%ac%e7%9b%98%e5%90%af%e5%8a%a8%e9%a1%ba%e5%ba%8f" aria-label="调整硬盘启动顺序">调整硬盘启动顺序</a></li>
                <li>
                    <a href="#%e5%87%86%e5%a4%87%e5%ae%89%e8%a3%85" aria-label="准备安装">准备安装</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9f%ba%e7%a1%80%e5%ae%89%e8%a3%85" aria-label="基础安装">基础安装</a><ul>
                        
                <li>
                    <a href="#%e9%94%ae%e7%9b%98%e5%b8%83%e5%b1%80" aria-label="键盘布局">键盘布局</a></li>
                <li>
                    <a href="#%e7%a6%81%e7%94%a8-reflector" aria-label="禁用 reflector">禁用 reflector</a></li>
                <li>
                    <a href="#%e5%86%8d%e6%ac%a1%e7%a1%ae%e4%bf%9d%e6%98%af%e5%90%a6%e4%b8%ba-uefi-%e6%a8%a1%e5%bc%8f" aria-label="再次确保是否为 UEFI 模式">再次确保是否为 UEFI 模式</a></li>
                <li>
                    <a href="#%e8%bf%9e%e6%8e%a5%e7%bd%91%e7%bb%9c" aria-label="连接网络">连接网络</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%96%b0%e7%b3%bb%e7%bb%9f%e6%97%b6%e9%97%b4" aria-label="更新系统时间">更新系统时间</a></li>
                <li>
                    <a href="#%e5%88%86%e5%8c%ba" aria-label="分区">分区</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-ext4" aria-label="使用 Ext4">使用 Ext4</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-btrfs" aria-label="使用 Btrfs">使用 Btrfs</a></li>
                <li>
                    <a href="#%e9%95%9c%e5%83%8f%e6%ba%90%e7%9a%84%e9%80%89%e6%8b%a9" aria-label="镜像源的选择">镜像源的选择</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e7%b3%bb%e7%bb%9f" aria-label="安装系统">安装系统</a></li>
                <li>
                    <a href="#%e7%94%9f%e6%88%90-fstab-%e6%96%87%e4%bb%b6" aria-label="生成 fstab 文件">生成 fstab 文件</a></li>
                <li>
                    <a href="#change-root" aria-label="change root">change root</a></li>
                <li>
                    <a href="#%e6%97%b6%e5%8c%ba%e8%ae%be%e7%bd%ae" aria-label="时区设置">时区设置</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae-locale-%e8%bf%9b%e8%a1%8c%e6%9c%ac%e5%9c%b0%e5%8c%96" aria-label="设置 Locale 进行本地化">设置 Locale 进行本地化</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e4%b8%bb%e6%9c%ba%e5%90%8d" aria-label="设置主机名">设置主机名</a></li>
                <li>
                    <a href="#initramfs" aria-label="Initramfs">Initramfs</a></li>
                <li>
                    <a href="#%e4%b8%ba-root-%e7%94%a8%e6%88%b7%e8%ae%be%e7%bd%ae%e5%af%86%e7%a0%81" aria-label="为 root 用户设置密码">为 root 用户设置密码</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e5%be%ae%e7%a0%81" aria-label="安装微码">安装微码</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e5%bc%95%e5%af%bc%e7%a8%8b%e5%ba%8f" aria-label="安装引导程序">安装引导程序</a></li>
                <li>
                    <a href="#%e5%ae%8c%e6%88%90%e5%ae%89%e8%a3%85" aria-label="完成安装">完成安装</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%a1%8c%e9%9d%a2%e7%8e%af%e5%a2%83%e4%b8%8e%e5%b8%b8%e7%94%a8%e5%ba%94%e7%94%a8" aria-label="桌面环境与常用应用">桌面环境与常用应用</a><ul>
                        
                <li>
                    <a href="#%e7%a1%ae%e4%bf%9d%e7%b3%bb%e7%bb%9f%e4%b8%ba%e6%9c%80%e6%96%b0" aria-label="确保系统为最新">确保系统为最新</a></li>
                <li>
                    <a href="#%e5%87%86%e5%a4%87%e9%9d%9e-root-%e7%94%a8%e6%88%b7" aria-label="准备非 root 用户">准备非 root 用户</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e6%a1%8c%e9%9d%a2%e7%8e%af%e5%a2%83" aria-label="安装桌面环境">安装桌面环境</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-greeter-sddm" aria-label="配置 greeter sddm">配置 greeter sddm</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6-swap%e5%8f%af%e9%80%89" aria-label="设置交换文件 swap(可选)">设置交换文件 swap(可选)</a></li>
                <li>
                    <a href="#%e5%bc%80%e5%90%af-32-%e4%bd%8d%e6%94%af%e6%8c%81%e5%ba%93" aria-label="开启 32 位支持库">开启 32 位支持库</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e4%b8%ad%e6%96%87%e7%a4%be%e5%8c%ba%e4%bb%93%e5%ba%93" aria-label="添加中文社区仓库">添加中文社区仓库</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e5%9f%ba%e7%a1%80%e5%8a%9f%e8%83%bd%e5%8c%85" aria-label="安装基础功能包">安装基础功能包</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae-dns" aria-label="设置 DNS">设置 DNS</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e7%b3%bb%e7%bb%9f%e4%b8%ba%e4%b8%ad%e6%96%87" aria-label="设置系统为中文">设置系统为中文</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-yay" aria-label="安装 yay">安装 yay</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e8%be%93%e5%85%a5%e6%b3%95" aria-label="安装输入法">安装输入法</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e7%b3%bb%e7%bb%9f%e9%bb%98%e8%ae%a4%e7%bc%96%e8%be%91%e5%99%a8" aria-label="配置系统默认编辑器">配置系统默认编辑器</a></li>
                <li>
                    <a href="#%e5%90%af%e7%94%a8%e8%93%9d%e7%89%99%e8%8b%a5%e6%9c%89" aria-label="启用蓝牙(若有)">启用蓝牙(若有)</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae-timeshift-%e5%bf%ab%e7%85%a7" aria-label="设置 Timeshift 快照">设置 Timeshift 快照</a></li>
                <li>
                    <a href="#proxy-enviromenthttpsgistgithubcomyougg5d2b3353fc5e197a0917aae0b3287d64" aria-label="Proxy Enviroment"><a href="https://gist.github.com/yougg/5d2b3353fc5e197a0917aae0b3287d64">Proxy Enviroment</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e6%98%be%e5%8d%a1%e9%a9%b1%e5%8a%a8" aria-label="显卡驱动">显卡驱动</a><ul>
                        
                <li>
                    <a href="#%e6%a0%b8%e8%8a%af%e6%98%be%e5%8d%a1" aria-label="核芯显卡">核芯显卡</a><ul>
                        
                <li>
                    <a href="#%e8%8b%b1%e7%89%b9%e5%b0%94%e6%a0%b8%e8%8a%af%e6%98%be%e5%8d%a1" aria-label="英特尔核芯显卡">英特尔核芯显卡</a></li>
                <li>
                    <a href="#amd-%e6%a0%b8%e8%8a%af%e6%98%be%e5%8d%a1" aria-label="AMD 核芯显卡">AMD 核芯显卡</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%8b%ac%e7%ab%8b%e6%98%be%e5%8d%a1" aria-label="独立显卡">独立显卡</a><ul>
                        
                <li>
                    <a href="#%e8%8b%b1%e4%bc%9f%e8%be%be%e7%8b%ac%e7%ab%8b%e6%98%be%e5%8d%a1" aria-label="英伟达独立显卡">英伟达独立显卡</a><ul>
                        
                <li>
                    <a href="#nvidia-optimus" aria-label="NVIDIA Optimus">NVIDIA Optimus</a></li>
                <li>
                    <a href="#primehttpswikiarchlinuxorgtitleprimeprime_render_offload" aria-label="PRIME"><a href="https://wiki.archlinux.org/title/PRIME#PRIME_render_offload">PRIME</a></a></li></ul>
                </li>
                <li>
                    <a href="#amd-%e7%8b%ac%e7%ab%8b%e6%98%be%e5%8d%a1" aria-label="AMD 独立显卡">AMD 独立显卡</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%98%be%e5%8d%a1%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95" aria-label="显卡性能测试">显卡性能测试</a><ul>
                        
                <li>
                    <a href="#glmark2" aria-label="glmark2">glmark2</a></li>
                <li>
                    <a href="#unigine-benchmark" aria-label="Unigine benchmark">Unigine benchmark</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%98%be%e5%8d%a1%e4%bf%a1%e6%81%af%e6%9f%a5%e7%9c%8b" aria-label="显卡信息查看">显卡信息查看</a></li>
                <li>
                    <a href="#%e5%90%8e%e7%bb%ad" aria-label="后续">后续</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96" aria-label="其他">其他</a><ul>
                        
                <li>
                    <a href="#operation-too-slowhttpswwwcnblogscomhuan0630p13584606html" aria-label="Operation too slow"><a href="https://www.cnblogs.com/Huan0630/p/13584606.html">Operation too slow</a></a></li>
                <li>
                    <a href="#ath9k-weak-and-unstable-connectionhttpsbbsarchlinuxorgviewtopicphpid161305" aria-label="ath9k Weak And Unstable Connection"><a href="https://bbs.archlinux.org/viewtopic.php?id=161305">ath9k Weak And Unstable Connection</a></a></li>
                <li>
                    <a href="#ssh-agenthttpswikiarchlinuxorgtitlessh_keysssh_agents" aria-label="ssh-agent"><a href="https://wiki.archlinux.org/title/SSH_keys#SSH_agents">ssh-agent</a></a></li>
                <li>
                    <a href="#chrome-%e6%97%a0%e6%b3%95%e8%bf%9e%e6%8e%a5%e4%bb%a3%e7%90%86" aria-label="Chrome 无法连接代理">Chrome 无法连接代理</a></li>
                <li>
                    <a href="#arch%e5%ae%89%e8%a3%85%e5%99%a8" aria-label="“Arch安装器”">“Arch安装器”</a></li></ul>
                </li>
                <li>
                    <a href="#optimizationhttpswikiarchlinuxorgtitlegeneral_recommendationsoptimization" aria-label="Optimization"><a href="https://wiki.archlinux.org/title/General_recommendations#Optimization">Optimization</a></a><ul>
                        
                <li>
                    <a href="#zram-or-zswaphttpswikiarchlinuxorgtitleimproving_performancezram_or_zswap" aria-label="zram or zswap"><a href="https://wiki.archlinux.org/title/Improving_performance#zram_or_zswap">zram or zswap</a></a></li></ul>
                </li>
                <li>
                    <a href="#pacmanhttpshustleigithubio201811msys2-pacmanhtml" aria-label="pacman"><a href="https://hustlei.github.io/2018/11/msys2-pacman.html">pacman</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e8%bd%af%e4%bb%b6" aria-label="安装软件">安装软件</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%96%b0%e7%b3%bb%e7%bb%9f" aria-label="更新系统">更新系统</a></li>
                <li>
                    <a href="#%e5%8d%b8%e8%bd%bd%e8%bd%af%e4%bb%b6" aria-label="卸载软件">卸载软件</a></li>
                <li>
                    <a href="#%e6%90%9c%e7%b4%a2%e8%bd%af%e4%bb%b6" aria-label="搜索软件">搜索软件</a></li>
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e5%8c%85%e7%bb%84" aria-label="软件包组">软件包组</a></li>
                <li>
                    <a href="#%e6%b8%85%e7%90%86%e7%bc%93%e5%ad%98" aria-label="清理缓存">清理缓存</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-zramhttpsuntitledpwsoftwarelinux2826html" aria-label="配置 ZRAM"><a href="https://untitled.pw/software/linux/2826.html">配置 ZRAM</a></a><ul>
                        
                <li>
                    <a href="#zram-%e4%bb%8b%e7%bb%8d" aria-label="ZRAM 介绍">ZRAM 介绍</a></li>
                <li>
                    <a href="#zram-%e8%bf%90%e8%a1%8c%e6%9c%ba%e5%88%b6" aria-label="ZRAM 运行机制">ZRAM 运行机制</a></li>
                <li>
                    <a href="#zram-%e9%85%8d%e7%bd%ae%e4%b8%8e%e8%87%aa%e5%90%af%e5%8a%a8" aria-label="ZRAM 配置与自启动">ZRAM 配置与自启动</a><ul>
                        
                <li>
                    <a href="#%e7%a1%ae%e8%ae%a4%e5%86%85%e6%a0%b8%e6%98%af%e5%90%a6%e6%94%af%e6%8c%81%e6%9c%89%e6%97%a0%e5%90%af%e7%94%a8-zram" aria-label="确认内核是否支持&amp;amp;有无启用 ZRAM">确认内核是否支持&amp;有无启用 ZRAM</a></li>
                <li>
                    <a href="#%e5%90%af%e7%94%a8-zram-%e5%86%85%e6%a0%b8%e6%a8%a1%e5%9d%97" aria-label="启用 ZRAM 内核模块">启用 ZRAM 内核模块</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-zram0-%e8%ae%be%e5%a4%87" aria-label="配置 zram0 设备">配置 zram0 设备</a></li>
                <li>
                    <a href="#%e5%b0%86-zram0-%e8%ae%be%e5%a4%87%e9%85%8d%e7%bd%ae%e4%b8%ba-swap" aria-label="将 zram0 设备配置为 Swap">将 zram0 设备配置为 Swap</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e5%8f%8c%e5%b1%82-swap%e5%8f%af%e9%80%89" aria-label="配置双层 Swap（可选）">配置双层 Swap（可选）</a></li></ul>
                </li>
                <li>
                    <a href="#zram-%e7%9b%91%e6%8e%a7" aria-label="ZRAM 监控">ZRAM 监控</a></li>
                <li>
                    <a href="#zram-%e8%b0%83%e4%bc%98" aria-label="ZRAM 调优">ZRAM 调优</a><ul>
                        
                <li>
                    <a href="#%e9%80%89%e6%8b%a9%e6%9c%80%e9%80%82%e5%90%88%e7%9a%84%e5%8e%8b%e7%bc%a9%e7%ae%97%e6%b3%95" aria-label="选择最适合的压缩算法">选择最适合的压缩算法</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-zram-%e8%b0%83%e4%bc%98%e5%8f%82%e6%95%b0" aria-label="配置 ZRAM 调优参数">配置 ZRAM 调优参数</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#oom-killer" aria-label="OOM Killer">OOM Killer</a><ul>
                        
                <li>
                    <a href="#sysrqhttpbloglujun9972winblog20180822linuxe4b88be79a84sysrqe994aeindexhtml" aria-label="SysRq"><a href="http://blog.lujun9972.win/blog/2018/08/22/linux%E4%B8%8B%E7%9A%84sysrq%E9%94%AE/index.html">SysRq</a></a><ul>
                        
                <li>
                    <a href="#%e5%90%af%e7%94%a8sysrq" aria-label="启用SysRq">启用SysRq</a><ul>
                        
                <li>
                    <a href="#%e5%af%b9%e5%86%85%e6%a0%b8%e7%9a%84%e8%a6%81%e6%b1%82" aria-label="对内核的要求">对内核的要求</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8dsysrq%e7%9a%84%e5%80%bc" aria-label="查看当前SysRq的值">查看当前SysRq的值</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%94%b9sysrq%e7%9a%84%e5%80%bc" aria-label="更改SysRq的值">更改SysRq的值</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8sysrq" aria-label="使用SysRq">使用SysRq</a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e7%9a%84%e5%87%a0%e7%a7%8d%e5%8a%9f%e8%83%bd%e9%94%ae%e7%bb%84%e5%90%88" aria-label="常见的几种功能键组合">常见的几种功能键组合</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8bsysrq%e7%9a%84%e8%be%93%e5%87%ba%e4%bf%a1%e6%81%af" aria-label="查看SysRq的输出信息">查看SysRq的输出信息</a></li></ul>
                </li>
                <li>
                    <a href="#systemd-oomdservicehttpsman7orglinuxman-pagesman8systemd-oomd8html" aria-label="systemd-oomd.service"><a href="https://man7.org/linux/man-pages/man8/systemd-oomd.8.html">systemd-oomd.service</a></a></li></ul>
                </li>
                <li>
                    <a href="#endeavouros" aria-label="EndeavourOS">EndeavourOS</a><ul>
                        
                <li>
                    <a href="#usage" aria-label="Usage">Usage</a><ul>
                        
                <li>
                    <a href="#kde-connecthttpsuserbasekdeorgkdeconnect" aria-label="KDE Connect"><a href="https://userbase.kde.org/KDEConnect">KDE Connect</a></a></li>
                <li>
                    <a href="#zfs" aria-label="ZFS">ZFS</a></li>
                <li>
                    <a href="#qemu" aria-label="Qemu">Qemu</a></li>
                <li>
                    <a href="#plocatehttpsplocatesessenet" aria-label="plocate"><a href="https://plocate.sesse.net/">plocate</a></a></li>
                <li>
                    <a href="#zstdhttpsfacebookgithubiozstd" aria-label="Zstd"><a href="https://facebook.github.io/zstd/">Zstd</a></a></li>
                <li>
                    <a href="#redshifthttpszoctangithubio20180415e4bdbfe794a8e8bf87e7a88bredshift20e889b2e6b8a9e68ea7e588b6" aria-label="Redshift"><a href="https://zoctan.github.io/2018/04/15/%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B/Redshift%20%E8%89%B2%E6%B8%A9%E6%8E%A7%E5%88%B6/">Redshift</a></a></li>
                <li>
                    <a href="#linux-%e5%8a%a8%e6%80%81%e6%a1%8c%e9%9d%a2httpswwwjianshucompd6ff45e983ce" aria-label="Linux 动态桌面"><a href="https://www.jianshu.com/p/d6ff45e983ce">Linux 动态桌面</a></a><ul>
                        
                <li>
                    <a href="#xwinwrap--mplayer" aria-label="xwinwrap &#43; mplayer">xwinwrap + mplayer</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e9%a1%b9%e7%9b%ae" aria-label="其他项目">其他项目</a></li></ul>
                </li>
                <li>
                    <a href="#fontconfig" aria-label="FontConfig">FontConfig</a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4" aria-label="常用命令">常用命令</a></li>
                <li>
                    <a href="#%e9%80%89%e5%ad%97%e4%bd%93" aria-label="选字体">选字体</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-fontsconf" aria-label="配置 fonts.conf">配置 fonts.conf</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96-1" aria-label="其他">其他</a></li></ul>
                </li>
                <li>
                    <a href="#screen-dpihttpswinaerocomfind-change-screen-dpi-linux" aria-label="Screen DPI"><a href="https://winaero.com/find-change-screen-dpi-linux/">Screen DPI</a></a></li>
                <li>
                    <a href="#bluetoothhttpswikiarchlinuxorgtitlebluetooth" aria-label="Bluetooth"><a href="https://wiki.archlinux.org/title/Bluetooth">Bluetooth</a></a></li>
                <li>
                    <a href="#%e5%b1%8f%e8%94%bd%e7%bd%91%e7%ab%99" aria-label="屏蔽网站">屏蔽网站</a></li>
                <li>
                    <a href="#kolourpainthttpkolourpaintorg" aria-label="KolourPaint"><a href="http://kolourpaint.org/">KolourPaint</a></a></li>
                <li>
                    <a href="#packages-out-of-datehttpswikiarchlinuxorgtitlearch_user_repositoryflagging_packages_out-of-date" aria-label="packages out-of-date"><a href="https://wiki.archlinux.org/title/Arch_User_Repository#Flagging_packages_out-of-date">packages out-of-date</a></a></li>
                <li>
                    <a href="#zbarhttpsaskubuntucoma22899" aria-label="zbar"><a href="https://askubuntu.com/a/22899">zbar</a></a></li>
                <li>
                    <a href="#zshhttpsarchicekylinonlineadvancedoptional-cfg-1htmlf09f9a80-zsh" aria-label="zsh"><a href="https://arch.icekylin.online/advanced/optional-cfg-1.html#%F0%9F%9A%80-zsh">zsh</a></a></li>
                <li>
                    <a href="#emacs" aria-label="Emacs">Emacs</a></li></ul>
                </li>
                <li>
                    <a href="#questions" aria-label="Questions">Questions</a></li></ul>
                </li>
                <li>
                    <a href="#wm" aria-label="WM">WM</a><ul>
                        
                <li>
                    <a href="#%e9%80%9a%e7%94%a8%e9%85%8d%e7%bd%ae" aria-label="通用配置">通用配置</a><ul>
                        
                <li>
                    <a href="#xorg--font" aria-label="Xorg &amp;amp; font">Xorg &amp; font</a><ul>
                        
                <li>
                    <a href="#xinitrchttpswikiarchlinuxorgtitlexinit_e7ae80e4bd93e4b8ade69687" aria-label="xinitrc"><a href="https://wiki.archlinux.org/title/Xinit_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">xinitrc</a></a></li>
                <li>
                    <a href="#xserverrc" aria-label="xserverrc">xserverrc</a></li>
                <li>
                    <a href="#%e5%9c%a8%e7%99%bb%e5%bd%95%e6%97%b6%e8%87%aa%e5%8a%a8%e5%90%af%e7%94%a8-x" aria-label="在登录时自动启用 X">在登录时自动启用 X</a></li>
                <li>
                    <a href="#automatic-login-into-xorg-without-display-managerhttpswikiarchlinuxorgtitlesystemduserautomatic_login_into_xorg_without_display_manager" aria-label="Automatic login into Xorg without display manager"><a href="https://wiki.archlinux.org/title/Systemd/User#Automatic_login_into_Xorg_without_display_manager">Automatic login into Xorg without display manager</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e8%bd%af%e4%bb%b6%e7%9a%84%e6%8e%a8%e8%8d%90" aria-label="常用软件的推荐">常用软件的推荐</a></li></ul>
                </li>
                <li>
                    <a href="#dwmhttpszhuanlanzhihucomp346719806" aria-label="dwm"><a href="https://zhuanlan.zhihu.com/p/346719806">dwm</a></a><ul>
                        
                <li>
                    <a href="#dwm%e4%b8%8e%e5%85%b6%e4%bb%96wm%e7%9a%84%e5%8c%ba%e5%88%ab" aria-label="dwm与其他wm的区别">dwm与其他wm的区别</a></li>
                <li>
                    <a href="#dwm%e5%ae%89%e8%a3%85" aria-label="dwm安装">dwm安装</a></li>
                <li>
                    <a href="#dwm%e9%85%8d%e7%bd%aehttpsdwmsucklessorgcustomisation" aria-label="dwm配置"><a href="https://dwm.suckless.org/customisation/">dwm配置</a></a><ul>
                        
                <li>
                    <a href="#startinghttpswikiarchlinuxorgtitledwm" aria-label="Starting"><a href="https://wiki.archlinux.org/title/dwm">Starting</a></a></li>
                <li>
                    <a href="#%e5%ad%97%e4%bd%93%e5%92%8c%e5%b7%a6%e4%be%a7%e7%8a%b6%e6%80%81%e6%a0%8f%e5%9b%be%e6%a0%87httpswwwcxymmnetarticleqq_36390239112987099" aria-label="字体和左侧状态栏图标"><a href="https://www.cxymm.net/article/qq_36390239/112987099">字体和左侧状态栏图标</a></a></li>
                <li>
                    <a href="#statusbar" aria-label="Statusbar">Statusbar</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%8d%a2%e5%a3%81%e7%ba%b8" aria-label="自动更换壁纸">自动更换壁纸</a></li>
                <li>
                    <a href="#picom" aria-label="picom">picom</a></li>
                <li>
                    <a href="#%e6%8e%a8%e8%8d%90%e8%a1%a5%e4%b8%81httpwww4k8kxyzarticleweixin_44335269117886927" aria-label="推荐补丁"><a href="http://www.4k8k.xyz/article/weixin_44335269/117886927">推荐补丁</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#awesomehttpsblogkeluorgtech20211229linux-awesome-wmhtml" aria-label="awesome"><a href="https://blog.kelu.org/tech/2021/12/29/linux-awesome-wm.html">awesome</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85httpsarchlinuxblogmediumcominstalling-and-configuring-awesome-wm-b4684fd09c9" aria-label="安装"><a href="https://archlinuxblog.medium.com/installing-and-configuring-awesome-wm-b4684fd09c9">安装</a></a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e9%85%8d%e7%bd%ae" aria-label="自定义配置">自定义配置</a><ul>
                        
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e5%b8%83%e5%b1%80%e5%92%8c%e6%a0%87%e7%ad%behttpswwwhahackcomtoolsawesome" aria-label="定制布局和标签"><a href="https://www.hahack.com/tools/awesome/">定制布局和标签</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e5%b8%83%e5%b1%80" aria-label="定制布局">定制布局</a></li>
                <li>
                    <a href="#%e6%b5%ae%e5%8a%a8%e7%aa%97%e5%8f%a3" aria-label="浮动窗口">浮动窗口</a></li>
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e6%a0%87%e7%ad%be" aria-label="定制标签">定制标签</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e9%bb%98%e8%ae%a4%e7%bb%88%e7%ab%af%e5%92%8c%e7%bc%96%e8%be%91%e5%99%a8" aria-label="设置默认终端和编辑器">设置默认终端和编辑器</a></li>
                <li>
                    <a href="#%e7%be%8e%e5%8c%96" aria-label="美化">美化</a><ul>
                        
                <li>
                    <a href="#%e6%9b%b4%e6%8d%a2%e4%b8%bb%e9%a2%98" aria-label="更换主题">更换主题</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%8d%a2%e8%83%8c%e6%99%af%e5%9b%be%e7%89%87" aria-label="更换背景图片">更换背景图片</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e4%b8%bb%e8%8f%9c%e5%8d%95" aria-label="修改主菜单">修改主菜单</a></li>
                <li>
                    <a href="#gtk--qt-%e4%b8%bb%e9%a2%98" aria-label="GTK &amp;amp; QT 主题">GTK &amp; QT 主题</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%8f%92%e4%bb%b6" aria-label="插件">插件</a><ul>
                        
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e6%8f%92%e4%bb%b6" aria-label="创建插件">创建插件</a></li>
                <li>
                    <a href="#%e6%8f%92%e4%bb%b6%e7%9a%84%e7%b1%bb%e5%9e%8b" aria-label="插件的类型">插件的类型</a></li>
                <li>
                    <a href="#%e6%8e%a8%e8%8d%90%e5%ae%9e%e7%94%a8%e6%8f%92%e4%bb%b6" aria-label="推荐：实用插件">推荐：实用插件</a></li>
                <li>
                    <a href="#%e9%9f%b3%e9%87%8f%e6%8e%a7%e5%88%b6%e6%8f%92%e4%bb%b6" aria-label="音量控制插件">音量控制插件</a></li>
                <li>
                    <a href="#vicioushttpsviciousreadthedocsioenlatestindexhtml" aria-label="Vicious"><a href="https://vicious.readthedocs.io/en/latest/index.html">Vicious</a></a></li>
                <li>
                    <a href="#xob-%e9%9f%b3%e9%87%8f%e6%8e%a7%e5%88%b6" aria-label="xob 音量控制">xob 音量控制</a></li>
                <li>
                    <a href="#%e5%b1%8f%e5%b9%95%e4%ba%ae%e5%ba%a6%e6%8e%a7%e5%88%b6" aria-label="屏幕亮度控制">屏幕亮度控制</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b6%88%e6%81%af%e4%ba%a4%e4%ba%92" aria-label="消息交互">消息交互</a></li>
                <li>
                    <a href="#%e6%a0%87%e9%a2%98%e6%a0%8f" aria-label="标题栏">标题栏</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%90%af%e5%8a%a8" aria-label="自启动">自启动</a><ul>
                        
                <li>
                    <a href="#%e6%96%b9%e6%a1%88%e4%b8%80" aria-label="方案一">方案一</a></li>
                <li>
                    <a href="#%e6%96%b9%e6%a1%88%e4%ba%8c" aria-label="方案二">方案二</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="自定义快捷键">自定义快捷键</a><ul>
                        
                <li>
                    <a href="#%e5%85%b3%e9%97%ad%e7%aa%97%e5%8f%a3%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="关闭窗口快捷键">关闭窗口快捷键</a></li>
                <li>
                    <a href="#%e5%85%b3%e6%9c%ba" aria-label="关机">关机</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96-2" aria-label="其他">其他</a><ul>
                        
                <li>
                    <a href="#picom-1" aria-label="picom">picom</a></li>
                <li>
                    <a href="#start-numlock-at-boot" aria-label="Start Numlock At Boot">Start Numlock At Boot</a></li>
                <li>
                    <a href="#change-display-resolution-and-refresh-rate" aria-label="Change Display Resolution And Refresh Rate">Change Display Resolution And Refresh Rate</a></li>
                <li>
                    <a href="#awesome-menu" aria-label="Awesome Menu">Awesome Menu</a></li>
                <li>
                    <a href="#force-an-application-to-a-specific-tag" aria-label="Force An Application To A Specific Tag">Force An Application To A Specific Tag</a></li>
                <li>
                    <a href="#%e8%be%93%e5%85%a5%e6%b3%95httpsblogtheerrorlogcomswitching-from-gnome-shell-to-awesome-wm-zhhtml" aria-label="输入法"><a href="https://blog.theerrorlog.com/switching-from-gnome-shell-to-awesome-wm-zh.html">输入法</a></a></li>
                <li>
                    <a href="#%e5%b1%8f%e4%bf%9d%e5%92%8c%e4%bc%91%e7%9c%a0%e7%ae%a1%e7%90%86" aria-label="屏保和休眠管理">屏保和休眠管理</a></li>
                <li>
                    <a href="#rofi" aria-label="rofi">rofi</a></li>
                <li>
                    <a href="#mpdncmpcpphttpszhuanlanzhihucomp351064855" aria-label="mpd&amp;amp;ncmpcpp"><a href="https://zhuanlan.zhihu.com/p/351064855">mpd&amp;ncmpcpp</a></a></li>
                <li>
                    <a href="#flameshot" aria-label="flameshot">flameshot</a></li>
                <li>
                    <a href="#awesome-copycatshttpsgithubcomlcpzawesome-copycats" aria-label="awesome-copycats"><a href="https://github.com/lcpz/awesome-copycats">awesome-copycats</a></a></li>
                <li>
                    <a href="#touchpadhttpswikiarchlinuxorgtitlelibinput" aria-label="Touchpad"><a href="https://wiki.archlinux.org/title/Libinput">Touchpad</a></a></li>
                <li>
                    <a href="#xbindkeyshttpswikiarchlinuxorgtitlexbindkeys" aria-label="xbindkeys"><a href="https://wiki.archlinux.org/title/Xbindkeys">xbindkeys</a></a></li>
                <li>
                    <a href="#redshifthttpswikiarchlinuxorgtitleredshift" aria-label="redshift"><a href="https://wiki.archlinux.org/title/redshift">redshift</a></a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><ul>
<li><a href="https://wiki.archlinux.org/title/installation_guide">Installation guide</a></li>
<li><a href="https://github.com/ArchLinuxStudio/ArchLinuxTutorial">Arch Linux 安装使用教程</a></li>
<li><a href="https://arch.icekylin.online/">Archlinux 简明指南</a></li>
<li><a href="https://blog.yoitsu.moe/arch-linux/installing_arch_linux_for_complete_newbies.html">给 GNU/Linux 萌新的 Arch Linux 安装指南</a></li>
</ul>
<h2 id="了解-archlinux">了解 Archlinux<a hidden class="anchor" aria-hidden="true" href="#了解-archlinux">#</a></h2>
<h3 id="为什么使用-linux">为什么使用 Linux？<a hidden class="anchor" aria-hidden="true" href="#为什么使用-linux">#</a></h3>
<p>简单来说，现在世界上流行的 PC 操作系统有三个，Windows，Linux 与 macOS。</p>
<p>如果你是计算机相关专业的学生或者从业者，非常建议你使用 Linux 作为自己的日常系统。在使用 Linux 系统的过程中，可以无形中接触到各个方面的计算机知识，并且在未来的工作中也会为你带来相关方面的优势。 macOS 在一些方面（即大致为 BSD 与 GNU/Linux 各方面的区别 )与 Linux 的操作并不同，并且由于其封闭的特性，我们不建议使用。Windows 在很多编程环境的配制过程中异常痛苦，且会出现各种各样的问题，强烈不建议使用 Windows 进行编程(除非你学的就是 Windows 系统编程)。</p>
<p>更重要的是，GNU/Linux 是自由软件运动的相关重要产物。<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6%E8%BF%90%E5%8A%A8">自由软件运动(free software movement)</a>拒绝专有软件并推广自由软件,它的终极目标在于解放网络世界中的每个人——即每个电脑用户。每个人都应拥有完全掌控所运行软件的权利。<a href="https://www.gnu.org/philosophy/free-sw.zh-cn.html">自由软件</a>有如下四项原则：</p>
<ul>
<li>自由度 0：无论用户出于何种目的，必须可以按照用户意愿，自由地运行该软件。</li>
<li>自由度 1：用户可以自由地学习并修改该软件，以此来帮助用户完成用户自己的计算。作为前提，用户必须可以访问到该软件的源代码。</li>
<li>自由度 2：用户可以自由地分发该软件的拷贝，这样就可以助人。</li>
<li>自由度 3：用户可以自由地分发该软件修改后的拷贝。借此，用户可以把改进后的软件分享给整个社区令他人也从中受益。作为前提，用户必须可以访问到该软件的源代码。</li>
</ul>
<p>如果你只是一个普通用户，你一定见识过没有经过你的授权，电脑被装上了成堆的流氓软件的类似经历。专有软件不仅在各个维度强奸着用户，更包含着难以想象的恶意功能。用户的数据，隐私等重要信息会轻而易举被大公司们收集走，并加以滥用，这成为业内公开的秘密已是不争的事实。在专用软件有同类的自由软件替代时，强烈建议你迁移至自由软件。本书会同时记录专有软件与自由软件，因为如果完全摒弃专有软件，一定会直接将很多人阻挡在 linux 之外，这不是我们所希望的，我们希望先将更多人接纳到 GNU/Linux 中，至少这是踏出的第一步。但这并不代表我们支持使用专有软件，我们希望你至少可以先踏入 linux，逐渐使用自由软件替代专有软件。专有软件在本书中仅作简要记录，不会详细描述，因为我们不希望你长期依赖于它。只要某个专有软件有足够优秀的自由软件替代品出现，我们就会移除本教程中的那个专有软件。专有软件在本书中会被角标专有或描述额外标记。如果你是有能力的开发者，更希望你可以开发出替代某些专有软件的自由软件。</p>
<p>最后，如果你想尝试完全免费的系统，或是喜欢探索充满新鲜与挑战的事物，Linux 也是你不可错过的体验。</p>
<h3 id="为什么使用-arch-linux">为什么使用 Arch Linux？<a hidden class="anchor" aria-hidden="true" href="#为什么使用-arch-linux">#</a></h3>
<blockquote>
<p>Archlinux 的许多特点如同双刃剑，既是优点，也是缺点</p>
</blockquote>
<h4 id="简洁">简洁<a hidden class="anchor" aria-hidden="true" href="#简洁">#</a></h4>
<p>Archlinux 将简洁定义为：避免任何不必要的添加、修改和复杂增加。简单来说，Archlinux 是一个可以让用户自己动手打造的操作系统。从安装到管理，Archlinux 放手让用户处理一切。</p>
<p>用户可以自己决定使用哪种桌面环境、安装哪些组件和服务。这种精细化的控制能够赋予你一个精简的操作系统，可以让用户自由选择所需的组件来构建属于用户自己的系统。</p>
<p>但也正因为此配置 Archlinux 相对于其它 Linux 发行版来说是繁琐。但繁琐是自由的代价。如果你是一个 DIY 爱好者，那么相信你会爱上 Archlinux 的 ❤️。</p>
<h4 id="滚动更新现代">滚动更新（现代）<a hidden class="anchor" aria-hidden="true" href="#滚动更新现代">#</a></h4>
<p>滚动更新（rolling update）是指软件开发中经常性将更新发送到软件的概念。相较于滚动发行，有标准版本和小数点版本的版本号开发模式，必需通过重新安装以取代先前的发行版。Archlinux 是没有版本概念的，它始终保持最新的状态，通俗的理解就相当于把发行版比喻为一部车，ubuntu 更新就是换一部新的，而 Archlinux 就是把车里面旧的配件换成新的。</p>
<p>Archlinux 是一个滚动发行版，这意味着：</p>
<ol>
<li>新的内核和应用程序版本一经发布，就会立即向用户推送</li>
<li>当大多数其它 Linux 发行版还在提供旧的 Linux 内核版本时，Archlinux 会迅速向用户提供最新的内核</li>
<li>而软件也是如此。如果 Archlinux 仓库中的软件发布了新版本，Archlinux 用户通常会比其他用户先获得新版本</li>
<li>在滚动发行模式下，一切都是新鲜和前沿的。用户不必把操作系统从一个版本升级到另一个版本，只要使用 <code>pacman</code> 的升级命令，便会始终保持最新的版本</li>
</ol>
<h4 id="实用">实用<a hidden class="anchor" aria-hidden="true" href="#实用">#</a></h4>
<p>Archlinux 注重实用性，避免意识形态之争。最终的设计决策都是由开发者的共识决定。开发者依赖基于事实的技术分析和讨论，避免政治因素，不会被流行观点左右。</p>
<p>Archlinux 的仓库中包含大量的软件包和编译脚本。用户可以按照需要自由选择。仓库中既提供了开源、自由的软件，<strong>也提供了闭源软件</strong>（大部分闭源软件在 <code>AUR</code> 仓库中）。<strong>实用性大于意识形态</strong>。</p>
<h4 id="以用户为中心">以用户为中心<a hidden class="anchor" aria-hidden="true" href="#以用户为中心">#</a></h4>
<p>许多 Linux 发行版都试图变得更“用户友好”，Archlinux 则一直是且永远会是“以用户为中心”。Archlinux 是为了满足贡献者的需求，而不是为了吸引尽可能多的用户。Archlinux 适用于乐于自己动手的用户，他们愿意花时间阅读文档，解决自己的问题。</p>
<p>Archlinux 鼓励每一个用户 <a href="https://wiki.Archlinux.org/title/Getting_involved_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">参与</a> 和贡献，报告和帮助修复 <a href="https://bugs.Archlinux.org/">bugs</a>，提供软件包补丁和参加核心 <a href="https://git.Archlinux.org/">项目</a> —— Archlinux 开发者都是志愿者，通过持续的贡献成为团队的一员。</p>
<p>Archers 可以自行贡献软件包到 <a href="https://wiki.Archlinux.org/title/Arch_User_Repository_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Arch 用户仓库</a>（<code>AUR</code>）；提升 <a href="https://wiki.Archlinux.org/title/Main_page_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">archWiki 文档质量</a>；在 <a href="https://bbs.Archlinux.org/">论坛</a>、<a href="https://lists.Archlinux.org/listinfo/">邮件列表</a>、<a href="https://wiki.Archlinux.org/title/Arch_IRC_channels_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">IRC</a> 中给其他用户提供技术支持. Archlinux 是全球很多用户的选择，已经有很多 <a href="https://wiki.Archlinux.org/title/International_communities_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">国际社区</a> 提供帮助和文档翻译。</p>
<p>同样的，若希望为本指南做出贡献，以帮助更多的人，请参阅 <a href="https://arch.icekylin.online/postscript/contribute.html">贡献指南</a>。</p>
<h4 id="arch-用户仓库aur">Arch 用户仓库（AUR）<a hidden class="anchor" aria-hidden="true" href="#arch-用户仓库aur">#</a></h4>
<p><code>AUR</code> 即 Arch 用户仓库（Arch User Repository）。它包含名为 <code>PKGBUILD</code> 的包描述，它可让用户使用 <code>makepkg</code> 从源代码编译软件包，然后通过 <code>pacman</code> 安装。</p>
<p>创建 <code>AUR</code> 的目的是组织和共享社区中的新软件包，并帮助加速将流行的软件包纳入社区仓库。进入官方仓库的大量新软件包都从 <code>AUR</code> 开始。在 <code>AUR</code> 中，用户可以贡献自己的软件包构建（<code>PKGBUILD</code> 和相关文件）。<code>AUR</code> 社区可以对 <code>AUR</code> 中的软件包进行投票。如果一个软件包变得足够流行（且具有兼容的许可证和良好的打包技术），那么可以将其加入 <code>pacman</code> 直接访问的社区仓库中。</p>
<h4 id="激进的内核更新机制">激进的内核更新机制<a hidden class="anchor" aria-hidden="true" href="#激进的内核更新机制">#</a></h4>
<p>Archlinux 在更新内核的时候会立即删除旧内核（因为内核也是一个软件包 <code>linux</code> / <code>linux-zen</code>&hellip;，由 <code>pacman</code> 更新）</p>
<p>立即删除旧的内核要求 Archlinux 必须重启来加载新的内核，否则容易发生诡异的问题。这是因为 Linux 所谓的“内核”包含有大量的动态加载模块，如果在某次启动后，某个模块没有被加载过，然后系统内核更新了并且删除了旧的内核，那么这些模块将永远不能被加载了——因为它们随着旧内核被删掉了。除非用户重启系统以完整切换到新的内核以使用新版的动态加载模块。</p>
<p>笔者曾经就因为在升级内核后插上声卡无法工作而感到困惑，后来才意识到问题所在。所以建议在更新内核后重新启动系统以避免问题的产生。（win10 更新也要重启，对吧？）</p>
<h4 id="软件包管理体系">软件包管理体系<a hidden class="anchor" aria-hidden="true" href="#软件包管理体系">#</a></h4>
<p>不同于 Debian 系列的 <code>apt / dpkg</code> 和 Red Hat 系列的 <code>dnf（yum）/ rpm</code> 包管理体系，Archlinux 只用了一个工具 pacman 就解决了获取和安装两个功能。这降低了为 Archlinux 制作软件包的门槛，这也是 AUR 几乎能涵盖整个 Linux 软件生态的主要原因。但是这也导致 pacman 不支持虚包（virtual package），虚包是一个通用名称，适用于一组提供类似的基本功能的包中的任何一个包。</p>
<h4 id="由社区创建支持和拥有">由社区创建、支持和拥有<a hidden class="anchor" aria-hidden="true" href="#由社区创建支持和拥有">#</a></h4>
<p>Ubuntu 由 <a href="https://canonical.com/">Canonical</a> 支持，Fedora 来自 <a href="https://www.redhat.com/zh">Red Hat</a>（现在是 IBM 的一部分），openSUSE 来自 <a href="https://www.suse.com/zh-cn/">SUSE</a>。这些主流发行版都是企业支持的。</p>
<p>这本身并不是坏事或过错，但是有一些人不喜欢企业参与开源项目。</p>
<p>正如 Debian 一样，Archlinux 是为数不多的仅由社区创建、支持和拥有的的 Linux 发行项目之一。</p>
<h2 id="安装前的准备">安装前的准备<a hidden class="anchor" aria-hidden="true" href="#安装前的准备">#</a></h2>
<p>Arch Linux 能运行在最少 512 MiB 内存的 <a href="https://en.wikipedia.org/wiki/zh:X86-64">x86_64</a> 机器上，但从安装媒介启动系统并成功安装需要更多的内存。<a href="https://lists.archlinux.org/pipermail/arch-releng/2020-May/003957.html">[1]</a> 基本安装将占用小于 2 GiB 的存储空间。由于安装过程中需要从远程存储库获取软件包，计算机将需要一个有效的互联网连接。</p>
<p>由于当前 UEFI 已普及十余年，安装将全部以 UEFI+GPT 的形式进行，传统 BIOS 方式不再赘述。</p>
<h3 id="确保网络环境">确保网络环境<a hidden class="anchor" aria-hidden="true" href="#确保网络环境">#</a></h3>
<p>如果你可以使用路由器分接出来的网线，以 dhcp 的方式直接上网，那么不用准备什么。如果你的环境只能使用无线网络安装，需要事先把自己所用的 wifi 名称改成自己能记住的英文名称。因为<strong>安装时无法显示和输入中文名的 wifi</strong>，你会看到一堆不知道是什么的方块，并且在安装过程中你将没有办法输入中文的无线名称进行连接。虽然通过一些繁琐的步骤可以解决终端中文的问题，但是显然这么做在安装 Arch Linux 时毫无必要。</p>
<p>其次，有些笔记本电脑上存在无线网卡的硬件开关或者键盘控制，开机后安装前需要<strong>确保你的无线网卡硬件开关处于打开状态</strong>。</p>
<h3 id="刻录启动优盘">刻录启动优盘<a hidden class="anchor" aria-hidden="true" href="#刻录启动优盘">#</a></h3>
<p>准备一个 2G 以上的优盘，刻录一个安装启动盘。安装镜像 iso 在<a href="https://Archlinux.org/download/">下载页面</a>下载，你需要选择通过磁力链接或 torrent 下载，下载完成后，还需要在 Archlinux 下载页面下载<code>PGP signature</code>签名文件(不要从镜像源下载签名文件)，将签名文件和 iso 镜像置于同一文件夹，随后进行对镜像的签名校验，以保证下载的镜像是完整，无错误的，未被篡改的。在一台已经安装 <a href="https://wiki.Archlinux.org/title/GnuPG">GnuPG</a> 的系统上，执行以下命令，确保输出完好的签名。具体镜像名根据名字自行修改。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --keyserver-options auto-key-retrieve --verify Archlinux-202x.0x.01-x86_64.iso.sig
</code></pre></div><p>注意，这里的签名校验<strong>非常重要</strong>，这可以保证你的安装镜像是未被篡改的，同时可以保证你在使用安装盘安装系统时，用正确的公钥校验安装包。</p>
<p>另外，在一台已经安装 Arch Linux 的计算机上可以通过以下方式验证：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman-key -v Archlinux-version-x86_64.iso.sig
</code></pre></div><hr>
<p>Windows 下推荐使用<a href="https://www.ventoy.net/cn/doc_start.html">ventoy</a>或者<a href="https://rufus.ie/">Rufus</a>或者<a href="https://github.com/balena-io/etcher">etcher</a>进行优盘刻录。三者皆为自由软件。具体操作请自行查阅，都非常简单。</p>
<p>Linux 下可以直接用 dd 命令进行刻录。注意 of 的参数为 sdx,不是 sdx1 sdx2 等。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dd bs<span style="color:#f92672">=</span>4M <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/path/to/Archlinux.iso of<span style="color:#f92672">=</span>/dev/sdx status<span style="color:#f92672">=</span>progress oflag<span style="color:#f92672">=</span>sync
</code></pre></div><blockquote>
<p>bs=4M 指定一个较为合理的文件输入输出块大小。
status=progress 用来输出刻录过程总的信息。
oflag=sync 用来控制写入数据时的行为特征。确保命令结束时数据及元数据真正写入磁盘，而不是刚写入缓存就返回。</p>
</blockquote>
<h3 id="进入主板-bios-进行设置">进入主板 BIOS 进行设置<a hidden class="anchor" aria-hidden="true" href="#进入主板-bios-进行设置">#</a></h3>
<p>插入优盘并开机。在开机的时候，按下 F2/F8/F10/DEL 等(取决与你的主板型号，具体请查阅你主板的相关信息)按键，进入主板的 BIOS 设置界面。</p>
<h3 id="关闭主板设置中的-secure-boot">关闭主板设置中的 Secure Boot<a hidden class="anchor" aria-hidden="true" href="#关闭主板设置中的-secure-boot">#</a></h3>
<p>Arch Linux 安装镜像不支持安全启动（Secure Boot）。要引导安装媒介，需要禁用安全启动。在类似名为 <code>security</code> 的选项卡中，找到一项名为 Secure Boot(名称可能略有差异)的选项，选择 Disable 将其禁用。如果需要，可在完成安装后重新配置 <a href="https://wiki.Archlinux.org/title/Secure_Boot">安全启动</a>。</p>
<blockquote>
<p>具体怎么关因为每种电脑的方法不一样于是汝要自己 STFW (Search the f**king Web，搜索一下) 了</p>
</blockquote>
<h3 id="调整启动方式为-uefi">调整启动方式为 UEFI<a hidden class="anchor" aria-hidden="true" href="#调整启动方式为-uefi">#</a></h3>
<p>在某些旧的主板里，需要调整启动模式为 UEFI,而非传统的 BIOS/CSM。在类似名为 <code>boot</code> 的选项卡中，找到类似名为 Boot Mode 的选项，确保将其调整为 UEFI only，而非 legacy/CSM。</p>
<h3 id="调整硬盘启动顺序">调整硬盘启动顺序<a hidden class="anchor" aria-hidden="true" href="#调整硬盘启动顺序">#</a></h3>
<p>在类似名为 <code>boot</code> 的选项卡中，找到类似名为 Boot Options(名称可能略有差异)的设置选项，将 USB 优盘的启动顺序调至首位。</p>
<h3 id="准备安装">准备安装<a hidden class="anchor" aria-hidden="true" href="#准备安装">#</a></h3>
<p>最后保存 BIOS 设置并退出，一般的按键是 F10。此时系统重启，不出意外你应该已经进入 Archlinux 的安装界面。</p>
<h2 id="基础安装">基础安装<a hidden class="anchor" aria-hidden="true" href="#基础安装">#</a></h2>
<p>本节从安装最基础的无图形化 Archlinux 系统开始。<a href="https://wiki.Archlinux.org/index.php/Installation_guide">官方安装指南</a></p>
<p>如果想一边安装，一边使用 <a href="https://lynx.invisible-island.net/lynx_help/Lynx_users_guide.html">Lynx</a> 查看本指南，可以使用 <code>Alt+箭头</code> <a href="https://wiki.archlinux.org/title/Keyboard_shortcuts_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">快捷键</a>切换不同的控制台。</p>
<h3 id="键盘布局">键盘布局<a hidden class="anchor" aria-hidden="true" href="#键盘布局">#</a></h3>
<p><a href="https://wiki.archlinux.org/title/Linux_console_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Keyboard_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">控制台键盘布局</a>默认为 <code>us</code>（美式键盘映射）。列出所有可用的键盘布局，可以使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ls /usr/share/kbd/keymaps/**/*.map.gz</span>
</code></pre></div><p>如果您想要更改键盘布局，可以将一致的文件名添加进 <a href="https://man.archlinux.org/man/loadkeys.1">loadkeys(1)</a>，但请省略路径和扩展名。比如，要添加 <a href="https://en.wikipedia.org/wiki/File:KB_Germany.svg">德语</a> 键盘布局：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># loadkeys de-latin1</span>
</code></pre></div><h3 id="禁用-reflector">禁用 reflector<a hidden class="anchor" aria-hidden="true" href="#禁用-reflector">#</a></h3>
<p>2020 年，Archlinux 安装镜像中加入了 <a href="https://wiki.Archlinux.org/title/Reflector"><code>reflector</code></a> 服务，它会自己更新 <code>mirrorlist</code>（软件包管理器 <code>pacman</code> 的软件源）。在特定情况下，它会误删某些有用的源信息。这里进入安装环境后的第一件事就是将其禁用。也许它是一个好用的工具，但是很明显，因为地理上造成的特殊网络环境，这项服务并不适合启用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># systemctl stop reflector.service</span>
</code></pre></div><h3 id="再次确保是否为-uefi-模式">再次确保是否为 UEFI 模式<a hidden class="anchor" aria-hidden="true" href="#再次确保是否为-uefi-模式">#</a></h3>
<p>在一系列的信息刷屏后，可以看到已经以 root 登陆安装系统了，请用下列命令列出 <a href="https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#UEFI_%E5%8F%98%E9%87%8F">efivars</a> 目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ls /sys/firmware/efi/efivars</span>
</code></pre></div><p>如果命令结果显示了目录且没有报告错误，则系统以 UEFI 模式引导。 如果目录不存在，则系统可能以 <a href="https://en.wikipedia.org/wiki/zh:BIOS">BIOS</a> 模式 (或 <a href="https://en.wikipedia.org/wiki/Compatibility_Support_Module">CSM</a> 模式) 引导。</p>
<h3 id="连接网络">连接网络<a hidden class="anchor" aria-hidden="true" href="#连接网络">#</a></h3>
<p>一般来说，你连接的网络几乎均可以通过 DHCP 的方式来进行 IP 地址和 DNS 的相关设置，你无需进行额外操作。在没有合适网络的情况下，使用手机的移动热点也是很方便的选择。如果你的网络环境需要配置静态 IP 和 DNS,请自行参考 Arch Wiki。</p>
<p>对于有线连接来说，直接插入网线即可。</p>
<p>对于无线连接，则需进行如下操作进行网络连接。</p>
<p>无线连接使用 iwctl 命令进行，按照如下步骤进行网络连接：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">iwctl                           <span style="color:#75715e">#执行iwctl命令，进入交互式命令行</span>
device list                     <span style="color:#75715e">#列出设备名，比如无线网卡看到叫 wlan0</span>
station wlan0 scan              <span style="color:#75715e">#扫描网络</span>
station wlan0 get-networks      <span style="color:#75715e">#列出网络 比如想连接YOUR-WIRELESS-NAME这个无线</span>
station wlan0 connect YOUR-WIRELESS-NAME <span style="color:#75715e">#进行连接 输入密码即可</span>
exit                            <span style="color:#75715e">#成功后exit退出</span>
</code></pre></div><p>可以等待几秒等网络建立链接后再进行下面测试网络的操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ping www.gnu.org
</code></pre></div><hr>
<p><strong>如果</strong>你不能正常连接网络，首先确认系统已经启用网络接口<a href="https://wiki.Archlinux.org/index.php/Network_configuration/Wireless#Check_the_driver_status">[1]</a>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ip link              <span style="color:#75715e">#列出网络接口信息，如不能联网的设备叫wlan0</span>
ip link set wlan0 up <span style="color:#75715e">#比如无线网卡看到叫 wlan0</span>
</code></pre></div><p><strong>如果</strong>随后看到类似<code>Operation not possible due to RF-kill</code>的报错，继续尝试<code>rfkill</code>命令来解锁无线网卡。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">rfkill unblock wifi
</code></pre></div><hr>
<p>如果汝明明有无线网卡却没识别的话，有可能汝是某无线网卡厂商受害者😂😂。这时可以：</p>
<ul>
<li>有 Android 手机的话，手机连 WiFi ，然后用“USB 网络共享”共享给电脑。</li>
<li>找个 USB 无线网卡插上 😂</li>
<li>连有线</li>
</ul>
<hr>
<p>移动宽带调制解调器（移动网卡） - 使用 <a href="https://wiki.Archlinux.org/title/Mmcli">mmcli</a> 实用程序连接到移动网络。</p>
<hr>
<p>另外，如果汝连接的网络需要网页登录（Captive Portal）,可以用 elinks 碰碰运气 😂</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># elinks http://&lt;your_captive_portal_url&gt;</span>
</code></pre></div><ul>
<li>用汝的门户的 URL 替换 &lt;your_captive_portal_url&gt;</li>
<li>如果不知道的话，随便访问一个 HTTP 网站试试，应该就会被重定向到 Portal 了</li>
</ul>
<h3 id="更新系统时间">更新系统时间<a hidden class="anchor" aria-hidden="true" href="#更新系统时间">#</a></h3>
<p>使用 <a href="https://man.Archlinux.org/man/timedatectl.1">timedatectl(1)</a> 确保系统时间是准确的：用 <code>timedatectl set-ntp true</code> 保证时间同步 。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">timedatectl set-ntp true    <span style="color:#75715e">#将系统时间与网络时间进行同步</span>
timedatectl status          <span style="color:#75715e">#检查服务状态</span>
</code></pre></div><p>因为有不少操作需要准确的时间呐，例如 HTTPS 和 GnuPG 都需要准确的时间来验证证书的有效性。</p>
<p>但是如果因为各种原因没法同步的话，那就只好手动设置咯~</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># timectl set-time &#34;yyyy-MM-dd hh:mm:ss&#34;</span>
<span style="color:#75715e"># timectl set-time &#34;2016-10-28 17:39:42&#34;</span>
</code></pre></div><h3 id="分区">分区<a hidden class="anchor" aria-hidden="true" href="#分区">#</a></h3>
<p>系统如果识别到磁盘，就会将其分配为一个<a href="https://en.wikipedia.org/wiki/zh:%E8%AE%BE%E5%A4%87%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F#.E5.91.BD.E5.90.8D.E7.BA.A6.E5.AE.9A">块设备</a>，如 <code>/dev/sda</code>、<code>/dev/nvme0n1</code> 或 <code>/dev/mmcblk0</code>。可以使用 <a href="https://wiki.Archlinux.org/title/Lsblk">lsblk</a> 或者 <code>fdisk -l</code> 查看。结果中以 <code>rom</code>、<code>loop</code> 或者 <code>airoot</code> 结尾的设备可以被忽略。</p>
<p>对于一个选定的设备，以下<em>分区</em>是必须要有的：</p>
<ul>
<li>一个根分区（挂载在 <a href="https://en.wikipedia.org/wiki/Root_directory">根目录</a>）<code>/</code>；</li>
<li>要在 <a href="https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">UEFI</a> 模式中启动，还需要一个 <a href="https://wiki.archlinux.org/title/EFI_system_partition_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">EFI 系统分区</a>。</li>
</ul>
<p>如果需要创建多级存储例如 <a href="https://wiki.archlinux.org/title/LVM">LVM</a>、<a href="https://wiki.archlinux.org/title/Disk_encryption">disk encryption</a> 或 <a href="https://wiki.archlinux.org/title/RAID">RAID</a>，请在此时完成。</p>
<h3 id="使用-ext4">使用 Ext4<a hidden class="anchor" aria-hidden="true" href="#使用-ext4">#</a></h3>
<p>这里总共设置三个分区，是一个<strong>我们认为</strong>较为通用的方案。此步骤会清除磁盘中全部内容，请事先确认。</p>
<ul>
<li>EFI 分区<a href="https://wiki.Archlinux.org/title/EFI_system_partition#Mount_the_partition">[2]</a>： <code>/boot/efi</code> 至少 300 MiB</li>
<li>Linux swap (交换空间)： 大于 512 MiB</li>
<li>Linux x86-64 根目录 ： <code>/</code> 剩余空间</li>
</ul>
<blockquote>
<p>这里根目录的大小仅为参考，一般来说个人日常使用的 linux 分配 100G 已经够用了。根目录最小建议不小于 50G，根目录过小会造成无法更新系统软件包等问题。</p>
</blockquote>
<p>首先将磁盘转换为 gpt 类型，这里假设比如你想安装的磁盘名称为 sdx。如果你使用 NVME 的固态硬盘，你看到的磁盘名称可能为 nvme0n1。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">lsblk                       <span style="color:#75715e">#显示分区情况 找到你想安装的磁盘名称</span>
parted /dev/sda             <span style="color:#75715e">#执行parted，进入交互式命令行，进行磁盘类型变更</span>
<span style="color:#f92672">(</span>parted<span style="color:#f92672">)</span>mktable             <span style="color:#75715e">#输入mktable</span>
New disk label type? gpt    <span style="color:#75715e">#输入gpt 将磁盘类型转换为gpt 如磁盘有数据会警告，输入yes即可</span>
quit                        <span style="color:#75715e">#最后quit退出parted命令行交互</span>
</code></pre></div><p>接下来使用 cfdisk 命令对磁盘分区。进入 cfdisk 后的操作很直观，用键盘即可操作分配各个分区的大小与格式。一般建议将 EFI 分区设置为磁盘的第一个分区，据说有些主板如果不将 EFI 设置为第一个分区，可能有不兼容的问题。其中 EFI 分区选择<code>EFI System</code>类型，其余两个分区选择<code>Linux filesystem</code>类型。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cfdisk /dev/sda <span style="color:#75715e">#来执行分区操作,分配各个分区大小，类型</span>
fdisk -l        <span style="color:#75715e">#分区结束后， 复查磁盘情况</span>
</code></pre></div><p><strong>格式化</strong></p>
<p>建立好分区后，需要对分区用合适的文件系统进行格式化。这里用<code>mkfs.ext4</code>命令格式化根分区与 home 分区，用<code>mkfs.vfat</code>命令格式化 EFI 分区。如下命令中的 sdax 中，x 代表分区的序号。格式化命令要与上一步分区中生成的分区名字对应才可以。</p>
<p>磁盘若事先有数据，会提示你: &lsquo;proceed any way?&rsquo; 按 y 回车继续即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkfs.ext4 -L ROOT  /dev/sda3     <span style="color:#75715e">#格式化根目录和home目录的两个分区</span>
mkfs.fat -F <span style="color:#ae81ff">32</span> -n EFI /dev/sda1 <span style="color:#75715e">#格式化 EFI 分区</span>
</code></pre></div><p>如果创建了 <a href="https://wiki.Archlinux.org/title/Swap_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">交换分区</a>，请使用 <a href="https://man.Archlinux.org/man/mkswap.8">mkswap(8)</a> 将其初始化：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkswap -L SWAP /dev/sda2 <span style="color:#75715e">#交换空间分区</span>
</code></pre></div><p><strong>挂载</strong></p>
<p>首先还是用 <code>lsblk</code> 确定一下分区的名称，为了以防万一记得加上 -f 参数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># lsblk -f</span>
</code></pre></div><p>在挂载时，挂载是有顺序的，先挂载根分区，再挂载 EFI 分区。 这里的 sdax 只是例子，具体根据你的实际情况来。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p /mnt/arch
$ mount /dev/sda3  /mnt/arch
$ mkdir -p /mnt/arch/boot/efi
$ mount /dev/sda1 /mnt/arch/boot/efi
</code></pre></div><p>如果创建了 <a href="https://wiki.Archlinux.org/title/Swap">swap</a> 交换空间卷，请使用 <a href="https://man.Archlinux.org/man/swapon.8">swapon(8)</a> 启用它：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">swapon /dev/sda2 <span style="color:#75715e">#交换空间分区</span>
</code></pre></div><h3 id="使用-btrfs">使用 Btrfs<a hidden class="anchor" aria-hidden="true" href="#使用-btrfs">#</a></h3>
<p>纵观 Btrfs 的历史，可以说 Btrfs 未来的发展是道阻且长的。也让我们感受到开源社区也并不是一根绳上的蚂蚱 —— 开源社区之间也有着各种各样的分歧。</p>
<p>但不管怎么说，Btrfs 的未来现在来看是光明的；我们也可以在 archlinux 上享受到 Btrfs 文件系统的特性带来的好处：</p>
<ol>
<li>快照 —— archlinux 作为滚动发行版，若滚挂了可以使用 Btrfs 的快照特性快速回滚
<ul>
<li>若使用传统的 <code>ext4</code> 文件系统，我们可以使用 <code>timeshift</code> 的 <code>RSYNC</code> 模式进行增量备份。但是，一般来说 RSYNC 方式的快照大小略大于当前实际使用大小，也就是说实际上开启了 <code>timeshift</code> 的 <code>RSYNC</code> 模式快照相当于磁盘可用空间直接少了一半多。因为虽然 RSYNC 方式的快照是增量的，但历史最久远的快照依然是完整备份，随后才是增量的</li>
</ul>
</li>
<li>透明压缩 —— 可以大大减少磁盘的使用空间（压缩率大概在 10% 左右）</li>
</ol>
<p>首先我们需要将整一个分区格式化为 <code>Btrfs</code> 文件系统。使用如下命令进行格式化：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mkfs.btrfs -L myArch /dev/sda3</span>
</code></pre></div><p><code>-L</code> 选项后指定该分区的 <code>LABLE</code>，这里以 <code>myArch</code> 为例，也可以自定义，但不能使用特殊字符以及空格，且最好有意义</p>
<p>为了创建子卷，我们需要先将 <code>Btrfs</code> 分区挂载到 <code>/mnt</code> 下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mount -t btrfs -o compress=zstd /dev/sda3 /mnt/arch</span>
</code></pre></div><ul>
<li><code>-t</code> 选项后指定挂载分区文件系统类型</li>
<li><code>-o</code>选项后添加挂载参数：
<ul>
<li><code>compress=zstd</code> —— 开启透明压缩</li>
</ul>
</li>
</ul>
<p>通过以下命令创建两个 <code>Btrfs</code> 子卷，之后将分别挂载到 <code>/</code> 根目录和 <code>/home</code> 用户主目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">btrfs subvolume create /mnt/arch/@     <span style="color:#75715e">#创建 / 目录子卷</span>
btrfs subvolume create /mnt/arch/@home <span style="color:#75715e">#创建 /home 目录子卷</span>
</code></pre></div><p>通过以下命令复查子卷情况：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># btrfs subvolume list -p /mnt/arch</span>
</code></pre></div><p>子卷创建好后，我们需要将 <code>/mnt</code> 卸载掉，以挂载子卷：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># umount /mnt/arch</span>
</code></pre></div><p>在挂载时，挂载是有顺序的，需要从根目录开始挂载。使用如下命令挂载子卷：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mount -t btrfs -o subvol=/@,compress=zstd /dev/sda3 /mnt/arch</span>
<span style="color:#75715e"># mkdir /mnt/arch/home</span>
<span style="color:#75715e"># mount -t btrfs -o subvol=/@home,compress=zstd /dev/sda3 /mnt/arch/home</span>
<span style="color:#75715e"># mkdir -p /mnt/arch/boot/efi</span>
<span style="color:#75715e"># mount /dev/sda1 /mnt/arch/boot/efi</span>
<span style="color:#75715e"># swapon /dev/sda2</span>
</code></pre></div><h3 id="镜像源的选择">镜像源的选择<a hidden class="anchor" aria-hidden="true" href="#镜像源的选择">#</a></h3>
<p>文件 <code>/etc/pacman.d/mirrorlist</code> 定义了软件包会从哪个<a href="https://wiki.Archlinux.org/title/Mirrors">镜像源</a>下载。使用如下命令编辑镜像列表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mv /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.bak</span>
<span style="color:#75715e"># cat &gt; /etc/pacman.d/mirrorlist</span>
</code></pre></div><p>在列表中越前的镜像在下载软件包时有越高的优先权。添加北外、中科大或者清华的放在最上面即可。</p>
<pre tabindex="0"><code>Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
</code></pre><p>如果其速度不佳，可以手动指定其他镜像源。完整的镜像源列表可参考官方<a href="https://Archlinux.org/mirrorlist/">镜像源生成器</a>。</p>
<p>然后用 <code>pacman -Syy</code> 刷新一下软件包数据库。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -Syy</span>
</code></pre></div><h3 id="安装系统">安装系统<a hidden class="anchor" aria-hidden="true" href="#安装系统">#</a></h3>
<p>必须的基础包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacstrap /mnt/arch base base-devel linux linux-headers linux-firmware</span>
</code></pre></div><ul>
<li>base 元包：包含基本系统所需的依赖，如果汝在别的地方见到说 base 是个软件包组的说法，忘了它吧……</li>
<li>要通过 AUR 或者 ABS 编译安装软件包,还需要安装 base-devel 啦 （现在它还是个软件包组）。</li>
<li>然后大多数情况下，汝还需要一个内核。目前官方仓库里有这些
<ul>
<li>linux : 当前的稳定版本内核</li>
<li>linux-lts : 当前的长期支持版本内核</li>
<li>linux-hardened : 来自 <a href="https://github.com/anthraxx/linux-hardened">https://github.com/anthraxx/linux-hardened</a> 的安全强化内核</li>
<li>linux-zen : 来自 <a href="https://github.com/zen-kernel">https://github.com/zen-kernel</a> 的预载一定量优化的内核， 有人觉得在心理上会觉得跑得比 linux 快&hellip;&hellip;.</li>
</ul>
</li>
<li>对于大多数情况下，汝可能会考虑安装固件包 linux-firmware 。</li>
</ul>
<p>必须的功能性软件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacstrap /mnt/arch dhcpcd iwd vim e2fsprogs dosfstools bash-completion man-db</span>
</code></pre></div><ul>
<li>
<p>dhcpcd 不论有限还是无限网络都需要</p>
</li>
<li>
<p>要通过刚刚用过的 iwctl 连接无线网络的话，记得安装 iwd 。</p>
</li>
<li>
<p>一个文字编辑器，例如刚才用到的 <code>nano</code> 或 <code>vim</code> 。建立自己的 .vimrc</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cp /usr/share/vim/vim82/defaults.vim .vimrc
</code></pre></div></li>
<li>
<p>一些文件系统工具，例如 操作 ext4 的 e2fsprogs，操作 FAT/FAT32 的 dosfstools， 需要读写其它文件系统的话，可以在 <a href="https://wiki.Archlinux.org/index.php/File_system">https://wiki.Archlinux.org/index.php/File_system</a> 找到相应的用户空间工具。</p>
</li>
<li>
<p>访问 <a href="https://wiki.Archlinux.org/title/Man">man</a> 和 <a href="https://wiki.Archlinux.org/title/Info">info</a> 页面中文档的工具：<a href="https://Archlinux.org/packages/?name=man-db">man-db</a>，<a href="https://Archlinux.org/packages/?name=man-pages">man-pages</a> 和 <a href="https://Archlinux.org/packages/?name=texinfo">texinfo</a>。</p>
</li>
</ul>
<p>诶，base 组不包含 live 环境中所有的软件包么？是的， <a href="https://projects.Archlinux.org/archiso.git/tree/configs/releng/packages.x86_64">https://projects.Archlinux.org/archiso.git/tree/configs/releng/packages.x86_64</a> 列出了在 ISO 中的 live 环境中安装的但不在 base 包中的软件包。</p>
<hr>
<p>可选，安装 openssh</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacstrap /mnt/arch openssh</span>
<span style="color:#75715e"># cat &gt;&gt; /mnt/arch/etc/ssh/sshd_config</span>
PermitRootLogin yes
PasswordAuthentication yes
</code></pre></div><h3 id="生成-fstab-文件">生成 fstab 文件<a hidden class="anchor" aria-hidden="true" href="#生成-fstab-文件">#</a></h3>
<p>fstab 用来定义磁盘分区</p>
<ul>
<li>
<p>use UUID</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># genfstab -U /mnt/arch &gt; /mnt/arch/etc/fstab</span>
</code></pre></div></li>
<li>
<p>use Label</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># genfstab -L /mnt/arch &gt; /mnt/arch/etc/fstab</span>
</code></pre></div></li>
</ul>
<p>复查一下 /mnt/etc/fstab 确保没有错误</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># cat /mnt/arch/etc/fstab</span>
</code></pre></div><h3 id="change-root">change root<a hidden class="anchor" aria-hidden="true" href="#change-root">#</a></h3>
<p>把环境切换到新系统的/mnt 下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># arch-chroot /mnt/arch</span>
</code></pre></div><h3 id="时区设置">时区设置<a hidden class="anchor" aria-hidden="true" href="#时区设置">#</a></h3>
<p>设置时区，在/etc/localtime 下用/usr 中合适的时区创建符号连接。如下设置上海时区。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span>
</code></pre></div><p>随后进行硬件时间设置，将当前的正确 UTC 时间写入硬件时间。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># hwclock --systohc</span>
</code></pre></div><p>这个命令假定已设置硬件时间为 <a href="https://en.wikipedia.org/wiki/UTC">UTC 时间</a>，并调整时间漂移:。详细信息请查看 <a href="https://wiki.Archlinux.org/title/System_time#Time_standard">System time#Time standard</a>。</p>
<p>如果汝正在尝试安装双系统，在进入 Windows 以后可能会发现 Windows 的时间不对了 ，因为 Windows 默认的硬件时钟是 localtime（</p>
<p>可以用一条注册表键值让 Windows 使用 UTC 作为硬件时钟（在早于 Windows 7 的系统上发现过这样做会出现一些严重的问题： <a href="http://www.cl.cam.ac.uk/~mgk25/mswish/ut-rtc.html">http://www.cl.cam.ac.uk/~mgk25/mswish/ut-rtc.html</a> ）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">reg add <span style="color:#e6db74">&#34;HKEY_LOCAL_MACHINESystemCurrentControlSetControlTimeZoneInformation&#34;</span> /v RealTimeIsUniversal /d 1 /t REG_DWORD /f
</code></pre></div><h3 id="设置-locale-进行本地化">设置 Locale 进行本地化<a hidden class="anchor" aria-hidden="true" href="#设置-locale-进行本地化">#</a></h3>
<p>Locale 决定了地域、货币、时区日期的格式、字符排列方式和其他本地化标准。</p>
<p>编辑 <code>/etc/locale.gen</code>，在最后添加：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># cat &gt;&gt; /etc/locale.gen</span>
en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8
</code></pre></div><p>然后使用如下命令生成 locale。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># locale-gen</span>
</code></pre></div><p>向 /etc/locale.conf 导入内容</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># echo &#39;LANG=en_US.UTF-8&#39;  &gt;&gt; /etc/locale.conf</span>
</code></pre></div><p>如果需要修改 <a href="https://wiki.archlinux.org/title/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E9%94%AE%E7%9B%98%E5%B8%83%E5%B1%80">#键盘布局</a>，可编辑 <a href="https://man.archlinux.org/man/vconsole.conf.5">vconsole.conf(5)</a> 使其长期生效，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># vim /etc/vconsole.conf</span>
KEYMAP<span style="color:#f92672">=</span>de-latin1
</code></pre></div><h3 id="设置主机名">设置主机名<a hidden class="anchor" aria-hidden="true" href="#设置主机名">#</a></h3>
<p>首先在<code>/etc/hostname</code>设置主机名</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># vim /etc/hostname</span>
myarch
</code></pre></div><p>加入你想为主机取的主机名，这里比如叫 myarch。</p>
<p>接下来在<code>/etc/hosts</code>设置与其匹配的条目。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># vim /etc/hosts</span>
</code></pre></div><p>加入如下内容</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1   localhost
::1         localhost
127.0.1.1   myarch.localdomain	myarch
</code></pre></div><blockquote>
<p>某些情况下如不设置主机名，在 KDE 下可能会存在网络情况变更时无法启动 GUI 应用的问题，在终端中出现形如<code>No protocol specified qt.qpa.xcb: could not connect to display</code>的错误，这种情况较为少见<a href="https://bbs.Archlinux.org/viewtopic.php?id=241338">[3]</a><a href="https://bbs.Archlinux.org/viewtopic.php?id=243674">[4]</a><a href="https://wiki.Archlinux.org/title/Network_configuration#Local_hostname_resolution">[5]</a>。</p>
</blockquote>
<h3 id="initramfs">Initramfs<a hidden class="anchor" aria-hidden="true" href="#initramfs">#</a></h3>
<p>Creating a new <em>initramfs</em> is usually not required, because <a href="https://wiki.archlinux.org/title/Mkinitcpio">mkinitcpio</a> was run on installation of the <a href="https://wiki.archlinux.org/title/Kernel">kernel</a> package with <em>pacstrap</em>.</p>
<p>For <a href="https://wiki.archlinux.org/title/Install_Arch_Linux_on_LVM#Adding_mkinitcpio_hooks">LVM</a>, <a href="https://wiki.archlinux.org/title/Dm-crypt">system encryption</a> or <a href="https://wiki.archlinux.org/title/RAID#Configure_mkinitcpio">RAID</a>, modify <a href="https://man.archlinux.org/man/mkinitcpio.conf.5">mkinitcpio.conf(5)</a> and recreate the initramfs image:</p>
<pre tabindex="0"><code># mkinitcpio -P
</code></pre><p>具体例子查看 <a href="https://wiki.archlinux.org/title/Dm-crypt/Encrypting_an_entire_system#LUKS_on_a_partition">dm-crypt/Encrypting an entire system</a></p>
<h3 id="为-root-用户设置密码">为 root 用户设置密码<a hidden class="anchor" aria-hidden="true" href="#为-root-用户设置密码">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># passwd root</span>
</code></pre></div><h3 id="安装微码">安装微码<a hidden class="anchor" aria-hidden="true" href="#安装微码">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pacman -S intel-ucode   <span style="color:#75715e">#Intel</span>
pacman -S amd-ucode     <span style="color:#75715e">#AMD</span>
</code></pre></div><h3 id="安装引导程序">安装引导程序<a hidden class="anchor" aria-hidden="true" href="#安装引导程序">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S grub efibootmgr</span>
<span style="color:#75715e"># pacman -S os-prober</span>
<span style="color:#75715e"># grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB</span>
</code></pre></div><ul>
<li>rub是启动引导器，efibootmgr被 grub 脚本用来将启动项写入 NVRAM。</li>
<li>如果汝的硬盘上没有其它系统，那么可以不用装 os-prober</li>
<li><code>--efi-directory=/efi</code> —— 将 <code>grubx64.efi</code> 安装到之前的指定位置（EFI 分区）</li>
<li><code>--bootloader-id=GRUB</code> —— 取名为 <code>GRUB</code></li>
</ul>
<p>接下来编辑<code>/etc/default/grub</code> 文件，去掉<code>GRUB_CMDLINE_LINUX_DEFAULT</code>一行中最后的 quiet 参数，同时把 log level 的数值从 3 改成 <strong>5</strong>。这样是为了后续如果出现系统错误，方便排错。同时在同一行加入 <strong>nowatchdog</strong> 参数，这可以显著提高开关机速度。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># vim /etc/default/grub</span>
GRUB_CMDLINE_LINUX_DEFAULT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;loglevel=5 nowatchdog&#34;</span>
</code></pre></div><p>最后生成 GRUB 所需的配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># grub-mkconfig -o /boot/grub/grub.cfg</span>
</code></pre></div><p>我们在之前的命令中指定了 bootloader-id 为 GRUB，这一般不会出现问题。然而在某些主板安装完成后，你会发现没有 nvme 启动条目。这是因为某些主板的 UEFI 固件在显示 UEFI NVRAM 引导条目之前，需要在特定的位置存放可引导文件，不支持自定义存放 efi 文件<a href="https://wiki.Archlinux.org/index.php/GRUB#Default/fallback_boot_path">[6]</a>。解决方式是使用<code>--removable</code> 参数解决一些主板 NVRAM 的兼容性问题（包括虚拟机）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB --removable</span>
<span style="color:#75715e"># grub-mkconfig -o /boot/grub/grub.cfg</span>
</code></pre></div><p>除此之外，如果你的主板是一些较老的型号，如 intel 9 系列以下或者较老 AMD 的主板，它们很可能不支持从 nvme 启动系统，虽然可以通过修改 BIOS 加入 NVME 支持模块来解决，但这不在本文讨论范围内。</p>
<hr>
<p>为了引导 win10，则还需要添加新的一行 <code>GRUB_DISABLE_OS_PROBER=false</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># GRUB boot loader configuration</span>
...
GRUB_DISABLE_OS_PROBER<span style="color:#f92672">=</span>false
</code></pre></div><p>如果汝安装了 os-prober 然后看到这样的警告：</p>
<blockquote>
<p>WARNING: Failed to connect to lvmetad. Falling back to device scanning.</p>
</blockquote>
<p>这是因为在 chroot 环境里面 /run 是不可用的。只要每个步骤都做对了，这些警告不会影响系统启动， 汝可以放心继续进行下一步的系统安装咯。 如果汝重启之后没看到 Windows 的启动项，试着进入 Arch 之后再运行那条生成配置文件的命令。</p>
<h3 id="完成安装">完成安装<a hidden class="anchor" aria-hidden="true" href="#完成安装">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">exit                     <span style="color:#75715e"># 退回安装环境#</span>
umount -R  /mnt/arch     <span style="color:#75715e"># 卸载新分区</span>
reboot                   <span style="color:#75715e"># 重启</span>
</code></pre></div><p>注意，重启前要先拔掉优盘，否则你重启后还是进安装程序而不是安装好的系统。重启后，开启 dhcp 服务，即可连接网络</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl enable --now dhcpcd  <span style="color:#75715e">#立即启动dhcp</span>
ping www.gnu.org        <span style="color:#75715e">#测试网络连接</span>
</code></pre></div><p>若为无线链接，则还需要启动 iwd 才可以使用 iwctl 连接网络</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl enable --now iwd <span style="color:#75715e">#立即启动iwd</span>
iwctl                      <span style="color:#75715e">#和之前的方式一样，连接无线网络</span>
</code></pre></div><p>到此为止，一个基础的，无 UI 界面的 Arch Linux 已经安装完成了。紧接着下一节，我们来安装图形界面。</p>
<blockquote>
<p>Archlinux 在 2021 年 4 月在安装镜像中内置了一个<a href="https://Archlinux.org/packages/extra/any/archinstall/">安装脚本</a>，提供一些选项，即可快速安装。其和所有一键安装脚本类似，提供自动化，且不灵活的安装过程。不建议使用这种安装脚本，除了不灵活的原因，初学者也无法在这种安装过程中学到任何东西。如果你因为任何原因需要快速启动一个基础的 Archlinux 环境，那么可以尝试此脚本。</p>
</blockquote>
<h2 id="桌面环境与常用应用">桌面环境与常用应用<a hidden class="anchor" aria-hidden="true" href="#桌面环境与常用应用">#</a></h2>
<p>官方文档: <a href="https://wiki.Archlinux.org/index.php/General_recommendations">安装后的工作</a> 本节只介绍最基本的，能使系统真正意义上可用所需的组件</p>
<p>注: 文档中带有 AUR 角标的软件代表是用户自行打包的第三方软件<a href="https://aur.Archlinux.org/">AUR</a>，不在 Arch 官方支持范围内，可能会出现更新不及时、无法安装、使用出错等各种问题。如果遇到问题，你可自行去其 AUR 页面查看其他人的评论中是否有解决方法。如果不是实在没有官方支持的同类软件，则不建议使用。</p>
<h3 id="确保系统为最新">确保系统为最新<a hidden class="anchor" aria-hidden="true" href="#确保系统为最新">#</a></h3>
<p>如果你在做完上一节的内容后，重启并放置过一段时间，那需要先按照上节末尾处的方式重新连接网络，然后更新系统。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pacman -Syyu    <span style="color:#75715e">#升级系统中全部包</span>
</code></pre></div><h3 id="准备非-root-用户">准备非 root 用户<a hidden class="anchor" aria-hidden="true" href="#准备非-root-用户">#</a></h3>
<p>添加用户，比如新增加的用户叫 testuser</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># useradd -m -G wheel -s /bin/bash kurome</span>
</code></pre></div><ul>
<li>wheel附加组可sudo，以root用户执行命令</li>
<li>-m同时创建用户家目录</li>
</ul>
<p>设置新用户 testuser 的密码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># passwd kurome</span>
</code></pre></div><p>编辑 sudoers 配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S sudo</span>
<span style="color:#75715e"># EDITOR=vim visudo</span>
</code></pre></div><p>找到下面这样的一行，把前面的注释符号 <code>#</code> 去掉，<code>:wq</code> 保存并退出即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#%wheel ALL=(ALL) ALL</span>
</code></pre></div><p>这里稍微解释一下：</p>
<ul>
<li><code>%wheel</code> —— 用户名或用户组，此处则代表是 <code>wheel</code> 组，<code>%</code> 是用户组的前缀</li>
<li><code>ALL=</code> —— 主机名，此处则代表在所有主机上都生效（如果把同样的 <code>sudoers</code> 文件下发到了多个主机上）</li>
<li><code>(ALL)</code> —— 用户名，此处则代表可以成为任意目标用户</li>
<li>最后的 <code>ALL</code> —— 代表可以执行任意命令</li>
</ul>
<p>几个更详细的例子:</p>
<p>在 <code>mailadmin</code> 组里的用户可以作为 <code>root</code> 用户，在 <code>snow</code> 和 <code>rain</code> 这两台主机执行一些邮件服务器控制命令（命令之间用 <code>,</code> 分隔）：</p>
<pre tabindex="0"><code class="language-sudoers" data-lang="sudoers">%mailadmin  snow,rain=(root)  /usr/sbin/postfix, /usr/sbin/postsuper, /usr/bin/doveadm
</code></pre><p>用户 <code>whoami</code> 可以在所有主机上以 <code>root</code> 用户不输入密码执行 <code>rndc reload</code> 这条命令（正常来说 <code>sudo</code> 都是要求输入调用方的密码的）：</p>
<pre tabindex="0"><code class="language-sudoers" data-lang="sudoers">whoami  ALL=(root)  NOPASSWD: /usr/sbin/rndc reload
</code></pre><p>当在 <code>users</code> 组里的用户以 <code>sudo passwd</code> 或者 <code>sudo passwd root</code> 方式运行命令的时候，可以直接把 <code>root</code> 用户的密&gt; 码 改掉，这真是太危险了！必须要把这两条命令禁止掉，但我们又希望用户可以通过 <code>sudo passwd</code> 修改其它用户的密码。那么我们可以在命令前面加上 <code>!</code> 来表示不可执行的命令：</p>
<pre tabindex="0"><code class="language-sudoers" data-lang="sudoers">%users  ALL=(root)  !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root
</code></pre><p>总结一下，语法如下：</p>
<pre tabindex="0"><code class="language-sudoers" data-lang="sudoers">用户名/%用户组名 主机名=(目标用户名) 命令1, 命令2, !命令3
</code></pre><h3 id="安装桌面环境">安装桌面环境<a hidden class="anchor" aria-hidden="true" href="#安装桌面环境">#</a></h3>
<p>安装桌面环境需要的基础包 （就是 xorg 啦）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S xorg</span>
</code></pre></div><ul>
<li><a href="https://archlinux.org/groups/x86_64/xorg/">xorg</a> group includes  <a href="https://archlinux.org/packages/?name=xorg-server">xorg-server</a> packages, packages from the <a href="https://archlinux.org/groups/x86_64/xorg-apps/">xorg-apps</a> group and fonts.</li>
</ul>
<p>这时会让汝选择需要哪些软件包啦,其实大多数时候默认的就行……</p>
<p>接下来挑一个喜欢的桌面环境包组装上咯~。咱这里就只举例 GNOME 、KDE 和 xfce 啦，其他官方支持的桌面环境可以去 <a href="https://wiki.Archlinux.org/index.php/Desktop_environment">https://wiki.Archlinux.org/index.php/Desktop_environment</a> 查看</p>
<ul>
<li>
<p>GNOME , 想要 GNOME 全家桶的话带上 gnome-extras</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S gnome</span>
</code></pre></div></li>
<li>
<p>KDE Plasma , 想要 KDE 全家桶的话用 kde-applications-meta 代替 。 kde-applications 会提示汝选择要安装哪些包。以及一个显示管理器， KDE 和 sddm 一起使用最好。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S plasma sddm kde-applications</span>
</code></pre></div><p>或者只安装一些基本组件（例如文件管理器和终端模拟器）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S plasma sddm kde-applications-meta</span>
</code></pre></div></li>
<li>
<p>xfce4，xfce 不带显示管理器，所以要装个其他的（例如 lightdm，还要装一个 greeter）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S xfce4 xfce4-goodies lightdm lightdm-gtk-greeter</span>
</code></pre></div><p>桌面环境大多数使用 NetworkManager ，xfce 的话，记得安装 network-manager-applet， 一个控制 NetworkManager 的小工具：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -S network-manager-applet</span>
</code></pre></div></li>
</ul>
<h3 id="配置-greeter-sddm">配置 greeter sddm<a hidden class="anchor" aria-hidden="true" href="#配置-greeter-sddm">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># systemctl enable sddm</span>
</code></pre></div><h3 id="设置交换文件-swap可选">设置交换文件 swap(可选)<a hidden class="anchor" aria-hidden="true" href="#设置交换文件-swap可选">#</a></h3>
<p>在桌面环境中，交换分区或文件用来实现休眠(hibernate)的功能，即将当前环境保存在磁盘的交换文件或分区部分。除此之外，某些特定软件需要 swap 才可以正确运行。交换文件与分区性能相同，且交换文件更为灵活，可随时变更大小，增加与删除。[<a href="https://wiki.Archlinux.org/title/Swap#Swap_file">1]</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fallocate -l 4G /swapfile <span style="color:#75715e">#创建4G的交换空间 大小根据需要自定</span>
chmod <span style="color:#ae81ff">600</span> /swapfile       <span style="color:#75715e">#设置正确的权限</span>
mkswap /swapfile          <span style="color:#75715e">#格式化swap文件</span>
swapon /swapfile          <span style="color:#75715e">#启用swap文件</span>
</code></pre></div><p>最后，向/etc/fstab 中<strong>追加</strong>如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/swapfile none swap sw <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
</code></pre></div><p>KDE 自身提供开箱即用的睡眠功能(suspend)，即将系统挂起到内存，消耗少量的电量。休眠(hibernate)会将系统挂起到交换分区或文件，几乎不消耗电量。睡眠功能已可满足绝大多数人的需求，如果你一定需要休眠功能，可以参考<a href="https://wiki.Archlinux.org/title/Power_management/Suspend_and_hibernate">官方文档</a>设置休眠相关步骤。</p>
<h3 id="开启-32-位支持库">开启 32 位支持库<a hidden class="anchor" aria-hidden="true" href="#开启-32-位支持库">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># vim /etc/pacman.conf</span>
</code></pre></div><p>去掉[multilib]一节中两行的注释，来开启 32 位库支持。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>multilib<span style="color:#f92672">]</span>
Include <span style="color:#f92672">=</span> /etc/pacman.d/mirrorlist
</code></pre></div><p>最后:wq 保存退出，刷新 pacman 数据库</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># pacman -Syyu</span>
</code></pre></div><p>重启电脑，即可看到欢迎界面，输入新用户的密码即可登录桌面</p>
<h3 id="添加中文社区仓库">添加中文社区仓库<a hidden class="anchor" aria-hidden="true" href="#添加中文社区仓库">#</a></h3>
<p>在 <code>/etc/pacman.conf</code> 结尾处加入下面的文字，来添加 <code>archlinuxcn</code> 源。推荐的镜像源（选一个即可）也一并列出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim /etc/pacman.conf
<span style="color:#f92672">[</span>archlinuxcn<span style="color:#f92672">]</span>
<span style="color:#75715e"># 北京外国语大学</span>
Server <span style="color:#f92672">=</span> https://mirrors.bfsu.edu.cn/archlinuxcn/$arch
<span style="color:#75715e"># 清华大学开源软件镜像站</span>
Server <span style="color:#f92672">=</span> https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch 
<span style="color:#75715e"># 中国科学技术大学开源镜像站</span>
Server <span style="color:#f92672">=</span> https://mirrors.ustc.edu.cn/archlinuxcn/$arch 
<span style="color:#75715e"># 哈尔滨工业大学开源镜像站</span>
Server <span style="color:#f92672">=</span> https://mirrors.hit.edu.cn/archlinuxcn/$arch 
<span style="color:#75715e"># 华为开源镜像站</span>
Server <span style="color:#f92672">=</span> https://repo.huaweicloud.com/archlinuxcn/$arch 
$ sudo pacman -Sy
$ sudo pacman -S archlinuxcn-keyring
</code></pre></div><ul>
<li>此外，还有其它镜像源在 <a href="https://github.com/archlinuxcn/mirrorlist-repo#arch-linux-cn-community-repo-mirrors-list">archlinuxcn 官方 Github Repoopen in new window</a> 列出，可以根据自己实际情况另行选择。</li>
<li>若安装 <code>archlinuxcn-keyring</code> 时报错，是由于密钥环的问题。可先按照 <a href="https://www.archlinuxcn.org/gnupg-2-1-and-the-pacman-keyring/">archlinuxcn 官方说明</a> 执行其中的命令，再安装 <code>archlinuxcn-keyring</code>。</li>
</ul>
<p>通过以下命令刷新 <code>pacman</code> 数据库并更新：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pacman -Syyu
</code></pre></div><h3 id="安装基础功能包">安装基础功能包<a hidden class="anchor" aria-hidden="true" href="#安装基础功能包">#</a></h3>
<p>进入桌面后，搜索 konsole。它是 KDE 桌面环境默认的命令行终端。</p>
<p>首先先进行桌面环境中的网络设置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 确保iwd开机处于关闭状态，其无线连接会与NetworkManager冲突</span>
$ sudo systemctl disable iwd 
<span style="color:#75715e"># 同上，立即关闭iwd</span>
$ sudo systemctl stop iwd
<span style="color:#75715e"># 确保先启动NetworkManager，并进行网络连接 若iwd已经与NetworkManager冲突 则执行完上一步重启一下电脑即可。</span>
$ sudo systemctl enable --now NetworkManager                                 
</code></pre></div><p>接下来安装一些基础功能包。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 识别NTFS格式的硬盘</span>
$ sudo pacman -S ntfs-3g 
<span style="color:#75715e"># 安装几个开源中文字体 一般装上文泉驿就能解决大多wine应用中文方块的问题</span>
$ sudo pacman -S adobe-source-han-serif-cn-fonts wqy-zenhei
<span style="color:#75715e"># 安装谷歌开源字体及表情</span>
$ sudo pacman -S noto-fonts-cjk noto-fonts-emoji noto-fonts-extra
<span style="color:#75715e"># 安装常用的火狐、谷歌浏览器</span>
$ sudo pacman -S firefox chromium  
<span style="color:#75715e"># 与dolphin同用右键解压</span>
$ sudo pacman -S ark    
<span style="color:#75715e"># 安装ark可选依赖</span>
$ sudo pacman -S p7zip unrar unarchiver lzop lrzip 
<span style="color:#75715e"># 确保Discover(软件中心）可用 需重启</span>
$ sudo pacman -S packagekit-qt5 packagekit appstream-qt appstream  
<span style="color:#75715e"># 图片查看器</span>
$ sudo pacman -S gwenview  
<span style="color:#75715e"># 一些工具</span>
$ sudo pacman -S git wget kate bind                                          
</code></pre></div><blockquote>
<p>不要安装过多字体：在字体超过 255 种时，某些 QT 程序可能无法正确显示某些表情和符号，详见链接<a href="https://wiki.Archlinux.org/title/fonts#Emoji_and_symbols">2</a>。</p>
</blockquote>
<h3 id="设置-dns">设置 DNS<a hidden class="anchor" aria-hidden="true" href="#设置-dns">#</a></h3>
<p>一般来说，如今大多电脑连接的路由器是可以自动处理 DNS 的，如果你的路由器不能处理，则需要额外进行 DNS 的设置。同时，如果使用 ISP 提供的默认 DNS,你的网络访问记录将存在<strong>更大的</strong>，被泄露或被当局存储记录的风险。除此之外，使用 ISP 提供的 DNS 还有可能将某些服务解析至一些已经失效或劣化的服务器。即使你的网络环境可以自动处理 DNS 设置，我们还是建议你使用可信的国际通用 DNS 设置。如下的配置将固定使用谷歌的 DNS,但是网络访问延迟可能增加。在阅读完随后的代理设置一节后，你的 DNS 请求将均通过代理发送，这将在 DNS 发送方面最大限度的保障你的隐私和安全。</p>
<p>vim 编辑<code>/etc/resolv.conf</code>，删除已有条目，并将如下内容加入其中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nameserver 8.8.8.8
nameserver 2001:4860:4860::8888
nameserver 8.8.4.4
nameserver 2001:4860:4860::8844
</code></pre></div><p>如果你的路由器可以自动处理 DNS,resolvconf 会在每次网络连接时用路由器的设置覆盖本机/etc/resolv.conf 中的设置，执行如下命令加入不可变标志，使其不能覆盖如上加入的配置<a href="https://wiki.Archlinux.org/title/Domain_name_resolution#Overwriting_of_/etc/resolv.conf">[3]</a><a href="https://nssurge.zendesk.com/hc/zh-cn/articles/360011927114-DNS-%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97">[4]</a>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo chattr +i /etc/resolv.conf
</code></pre></div><h3 id="设置系统为中文">设置系统为中文<a hidden class="anchor" aria-hidden="true" href="#设置系统为中文">#</a></h3>
<p>打开 <em>System Settings</em> &gt; <em>Regional Settings</em> &gt; <em>Language</em> -&gt; <em>Add languages</em> 中选择中文加入，再拖拽到第一位，Apply。</p>
<p>再将<em>System Settings</em> &gt; <em>Regional Settings</em> &gt; <em>Formats</em> 中的值设为<code>中文-简体中文(zh_CN)</code></p>
<p>最后重新登陆即可。</p>
<blockquote>
<p>很多人会错误的更改 <em>System Settings</em> &gt; <em>Regional Settings</em> &gt; <em>Formats</em> 中的值为中文蒙古(mn_CN)，默认，或者其他值，这会导致系统中一半英文一半中文。这里的值要保持默认的 en_US 或 zh_CN,或者改为你在 locale.gen 中添加的任意一种语言。</p>
</blockquote>
<p>也可以用 su 切换到刚建立的用户，然后编辑 ~/.config/locale.conf 修改自己用户级别的 Locale，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">LANG<span style="color:#f92672">=</span>zh_CN.UTF-8
LC_CTYPE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_NUMERIC<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_TIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_COLLATE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_MONETARY<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_MESSAGES<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_PAPER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_ADDRESS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_TELEPHONE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_MEASUREMENT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_IDENTIFICATION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN.UTF-8&#34;</span>
LC_ALL<span style="color:#f92672">=</span>
</code></pre></div><h3 id="安装-yay">安装 yay<a hidden class="anchor" aria-hidden="true" href="#安装-yay">#</a></h3>
<p>AUR 为 Archlinux user repository。任何用户都可以上传自己制作的 AUR 包，这也是 Arch Linux 可用软件众多的原因。由于任何人都可上传，也存在对应的风险，一般选用大众认可的包即可。</p>
<p>使用 <a href="https://github.com/Jguer/yay">yay</a> 可以安装 AUR 中的包。执行如下命令安装 yay。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S yay
</code></pre></div><p>或者</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S --needed git base-devel
$ git clone https://aur.Archlinux.org/yay-bin.git
$ cd yay-bin
$ makepkg -si
</code></pre></div><h3 id="安装输入法">安装输入法<a hidden class="anchor" aria-hidden="true" href="#安装输入法">#</a></h3>
<p><a href="https://wiki.Archlinux.org/index.php/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Fcitx5 官方文档</a> 中文及日文输入法均体验良好。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S fcitx5-im <span style="color:#75715e">#基础包组</span>
$ sudo pacman -S fcitx5-chinese-addons <span style="color:#75715e">#官方中文输入引擎</span>
$ sudo pacman -S fcitx5-anthy <span style="color:#75715e">#日文输入引擎</span>
$ yay -S fcitx5-pinyin-moegirl <span style="color:#75715e">#萌娘百科词库</span>
$ sudo pacman -S fcitx5-pinyin-zhwiki <span style="color:#75715e">#中文维基百科词库</span>
$ sudo pacman -S fcitx5-material-color <span style="color:#75715e">#主题</span>
</code></pre></div><p>更多皮肤：</p>
<ul>
<li><a href="https://github.com/ayamir/fcitx5-nord">fcitx5-nord</a></li>
<li><a href="https://github.com/ayamir/fcitx5-gruvbox">fcitx5-gruvbox</a></li>
</ul>
<p>设置环境变量：编辑文件 <code>EDITOR=vim sudoedit /etc/environment</code> 加入以下内容。konsole 以及 dolphin 都需要这些环境变量，倒是 chrome 和 firefox 都不需要就可以输入中文</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">GTK_IM_MODULE<span style="color:#f92672">=</span>fcitx
QT_IM_MODULE<span style="color:#f92672">=</span>fcitx
XMODIFIERS<span style="color:#f92672">=</span>@im<span style="color:#f92672">=</span>fcitx
INPUT_METHOD<span style="color:#f92672">=</span>fcitx
SDL_IM_MODULE<span style="color:#f92672">=</span>fcitx
GLFW_IM_MODULE<span style="color:#f92672">=</span>ibus
</code></pre></div><p>打开 <em>系统设置</em> &gt; <em>区域设置</em> &gt; <em>输入法</em>，先点击<code>运行Fcitx</code>即可，拼音为默认添加项。如你还需要更多输入法如五笔，则再点击<code>添加输入法</code>，找到简体中文下的五笔 ，点击添加即可加入五笔输入法。</p>
<p>接下来点击 <em>拼音</em> 右侧的配置按钮，点选<code>云拼音</code>和<code>在程序中显示预编辑文本</code> 最后应用。</p>
<p>回到输入法设置，点击<code>配置附加组件</code>，找到 <em>经典用户界面</em> 在主题里选择一个你喜欢的颜色 最后应用。</p>
<p>注销，重新登陆，就可以发现已经可以在各个软件中输入中文了</p>
<h3 id="配置系统默认编辑器">配置系统默认编辑器<a hidden class="anchor" aria-hidden="true" href="#配置系统默认编辑器">#</a></h3>
<p>默认情况下，Arch Linux 在一些终端编辑场景使用 vi 编辑器，但是我们使用 vim。如果不做一个额外配置，在 git 等场景下，在终端调用编辑器会出错。编辑 <code>EDITOR=vim sudoedit /etc/profile</code> 文件，加入如下内容，将 vim 设置为默认 EDITOR</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export EDITOR<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;vim&#39;</span>
</code></pre></div><p>这样就不用在每次执行命令时都指定一遍 <code>EDITOR=vim</code> 了。</p>
<h3 id="启用蓝牙若有">启用蓝牙(若有)<a hidden class="anchor" aria-hidden="true" href="#启用蓝牙若有">#</a></h3>
<p>如果你有蓝牙设备，需要安装蓝牙软件包并启用蓝牙服务。随后在系统设置中进行添加设备与连接即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S bluez bluez-utils
$ sudo systemctl enable --now bluetooth
</code></pre></div><p>如果要连接蓝牙音频设备，需要安装 <code>pulseaudio-bluetooth</code> 并重启 <code>pulseaudio</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S pulseaudio-bluetooth
$ pulseaudio -k
</code></pre></div><h3 id="设置-timeshift-快照">设置 Timeshift 快照<a hidden class="anchor" aria-hidden="true" href="#设置-timeshift-快照">#</a></h3>
<p>通过以下命令安装 Timeshiftcn / aur：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S aur/timeshift
</code></pre></div><p>打开 Timeshift，第一次启动会自动启动设置向导。</p>
<p>提示：Timeshift 只支持快照操作系统安装在具有 Ubuntu 类型的子卷布局（<code>@</code> 和 <code>@home</code> 子卷）的 BTRFS 分区。</p>
<h3 id="proxy-enviromenthttpsgistgithubcomyougg5d2b3353fc5e197a0917aae0b3287d64"><a href="https://gist.github.com/yougg/5d2b3353fc5e197a0917aae0b3287d64">Proxy Enviroment</a><a hidden class="anchor" aria-hidden="true" href="#proxy-enviromenthttpsgistgithubcomyougg5d2b3353fc5e197a0917aae0b3287d64">#</a></h3>
<p><strong>set http or socks proxy environment variables</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># set http proxy</span>
export http_proxy<span style="color:#f92672">=</span>http://PROXYHOST:PROXYPORT

<span style="color:#75715e"># set http proxy with user and password</span>
export http_proxy<span style="color:#f92672">=</span>http://USERNAME:PASSWORD@PROXYHOST:PROXYPORT

<span style="color:#75715e"># set http proxy with user and password (with special characters)</span>
export http_proxy<span style="color:#f92672">=</span>http://<span style="color:#e6db74">`</span>urlencode <span style="color:#e6db74">&#39;USERNAME&#39;</span><span style="color:#e6db74">`</span>:<span style="color:#e6db74">`</span>urlencode <span style="color:#e6db74">&#39;PASSWORD&#39;</span><span style="color:#e6db74">`</span>@PROXYHOST:PROXYPORT

<span style="color:#75715e"># set socks proxy (local DNS)</span>
export http_proxy<span style="color:#f92672">=</span>socks5://PROXYHOST:PROXYPORT

<span style="color:#75715e"># set socks proxy (remote DNS)</span>
export http_proxy<span style="color:#f92672">=</span>socks5h://PROXYHOST:PROXYPORT
<span style="color:#75715e"># export other env variables</span>
export https_proxy<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>ftp_proxy<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>rsync_proxy<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>all_proxy<span style="color:#f92672">=</span>$http_proxy

<span style="color:#75715e"># export other env variables (another way)</span>
export <span style="color:#f92672">{</span>https,ftp,rsync,all<span style="color:#f92672">}</span>_proxy<span style="color:#f92672">=</span>$http_proxy

export HTTP_PROXY<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>HTTPS_PROXY<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>FTP_PROXY<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\ </span>
RSYNC_PROXY<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>ALL_PROXY<span style="color:#f92672">=</span>$http_proxy <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>NO_PROXY<span style="color:#f92672">=</span>$no_proxy

export <span style="color:#f92672">{</span>HTTP,HTTPS,FTP,RSYNC,ALL<span style="color:#f92672">}</span>_PROXY<span style="color:#f92672">=</span>$http_proxy

<span style="color:#75715e"># set git http(s) proxy</span>
git config --global http.sslverify false
git config --global http.proxy $http_proxy
git config --global https.proxy $http_proxy

<span style="color:#75715e"># only for &#39;github.com&#39;</span>
git config --global http.https://github.com.proxy $http_proxy
</code></pre></div><p><strong>set ssh proxy environment variables</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># use &#39;nc&#39; with http protocol</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=nc -X connect -x PROXYHOST:PROXYPORT %h %p&#39;</span>

<span style="color:#75715e"># use &#39;nc&#39; with http protocol and proxy user</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=nc -X connect -x PROXYHOST:PROXYPORT -P &#39;</span>USERNAME<span style="color:#e6db74">&#39; %h %p&#39;</span>

<span style="color:#75715e"># use &#39;nc&#39; with socks5 protocol</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=nc -X 5 -x PROXYHOST:PROXYPORT %h %p&#39;</span>

<span style="color:#75715e"># use &#39;connect&#39; with http protocol</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=connect -H PROXYHOST:PROXYPORT %h %p&#39;</span>

<span style="color:#75715e"># use &#39;connect&#39; with http protocol and proxy user</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=connect -H USER@PROXYHOST:PROXYPORT %h %p&#39;</span>

<span style="color:#75715e"># use &#39;connect&#39; with HTTP_PROXY environment</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=connect -h %h %p&#39;</span>

<span style="color:#75715e"># use &#39;connect&#39; with socks5 protocol</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=connect -S PROXYHOST:PROXYPORT %h %p&#39;</span>

<span style="color:#75715e"># use &#39;connect&#39; with socks5 protocol and user</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=connect -S USER@PROXYHOST:PROXYPORT %h %p&#39;</span>

<span style="color:#75715e"># use &#39;connect&#39; with SOCKS5_SERVER environment</span>
export SOCKS5_SERVER<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PROXYHOST:PROXYPORT&#39;</span>
export SOCKS5_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;USERNAME&#39;</span>
export SOCKS5_PASSWD<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PASSWORD&#39;</span>
export ssh_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ProxyCommand=connect -s %h %p&#39;</span>

<span style="color:#75715e"># connect to ssh server over proxy</span>
ssh -o <span style="color:#e6db74">&#34;</span>$ssh_proxy<span style="color:#e6db74">&#34;</span> USER@FINAL_DEST

<span style="color:#75715e"># set git ssh proxy</span>
git config --global core.sshCommand <span style="color:#e6db74">&#34;ssh -o </span>$ssh_proxy<span style="color:#e6db74">&#34;</span>
</code></pre></div><p><strong>set no proxy to ignore private network address</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">no_proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;127.0.0.1,localhost,.localdomain.com&#34;</span>
no_proxy<span style="color:#f92672">=</span>$no_proxy,<span style="color:#e6db74">`</span>echo 10.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>|tr <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#e6db74">`</span>
no_proxy<span style="color:#f92672">=</span>$no_proxy,<span style="color:#e6db74">`</span>echo 172.<span style="color:#f92672">{</span>16..31<span style="color:#f92672">}</span>.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>|tr <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#e6db74">`</span>
no_proxy<span style="color:#f92672">=</span>$no_proxy,<span style="color:#e6db74">`</span>echo 192.168.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>.<span style="color:#f92672">{</span>0..255<span style="color:#f92672">}</span>|tr <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#e6db74">`</span>
export no_proxy

<span style="color:#75715e"># for more private network addresses, check following url</span>
<span style="color:#75715e"># https://segmentfault.com/q/1010000010521593</span>
<span style="color:#75715e"># https://en.wikipedia.org/wiki/Private_network</span>
</code></pre></div><p><strong>unset proxy environment variables</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">unset http_proxy https_proxy ftp_proxy rsync_proxy all_proxy HTTP_PROXY HTTPS_PROXY FTP_PROXY RSYNC_PROXY ALL_PROXY
unset <span style="color:#f92672">{</span>http,https,ftp,rsync,all<span style="color:#f92672">}</span>_proxy <span style="color:#f92672">{</span>HTTP,HTTPS,FTP,RSYNC,ALL<span style="color:#f92672">}</span>_PROXY

git config --global --unset http.proxy
git config --global --unset https.proxy
git config --global --unset core.sshCommand

git config --global --unset http.https://github.com.proxy

unset ssh_proxy
</code></pre></div><p>A remind:</p>
<ul>
<li><code>/etc/environment</code> is not a script. It only supports KEY=VALUE syntax ($variable is not supported either)</li>
<li><code>/etc/profile</code> does not support <code>export {HTTP,HTTPS,FTP,RSYNC,ALL}_PROXY=$http_proxy</code>, it may hang your login</li>
</ul>
<p>ubuntu gnome 下环境变量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/environment
http_proxy<span style="color:#f92672">=</span>http://127.0.0.1:7890/
HTTP_PROXY<span style="color:#f92672">=</span>http://127.0.0.1:7890/

https_proxy<span style="color:#f92672">=</span>http://127.0.0.1:7890/
HTTPS_PROXY<span style="color:#f92672">=</span>http://127.0.0.1:7890/

ftp_proxy<span style="color:#f92672">=</span>http://127.0.0.1:7890/
FTP_PROXY<span style="color:#f92672">=</span>http://127.0.0.1:7890/

all_proxy<span style="color:#f92672">=</span>socks://127.0.0.1:7891/
ALL_PROXY<span style="color:#f92672">=</span>socks://127.0.0.1:7891/

no_proxy<span style="color:#f92672">=</span>localhost,127.0.0.0/8,::1
NO_PROXY<span style="color:#f92672">=</span>localhost,127.0.0.0/8,::1
</code></pre></div><h2 id="显卡驱动">显卡驱动<a hidden class="anchor" aria-hidden="true" href="#显卡驱动">#</a></h2>
<p>现在是 2022 年，显卡驱动的安装在 Arch Linux 上已经变得非常容易。本文区分核芯显卡和独立显卡两大类描述显卡驱动的安装。<strong>注意，确保你已经按照本教程之前的章节安装配置好科学上网、安装好必要的包后再向下进行，不要多个教程混着看，你可能漏掉了本教程前置步骤中的某些操作，从而造成问题。</strong></p>
<blockquote>
<p>所有 AMD 显卡建议使用开源驱动。英伟达显卡建议使用闭源驱动，因为逆向工程的开源驱动性能过于低下，本文也只描述英伟达闭源驱动安装。如果你支持自由软件运动，请尽可能使用具有官方支持开源驱动的英特尔和 AMD 显卡。</p>
</blockquote>
<h3 id="核芯显卡">核芯显卡<a hidden class="anchor" aria-hidden="true" href="#核芯显卡">#</a></h3>
<h4 id="英特尔核芯显卡">英特尔核芯显卡<a hidden class="anchor" aria-hidden="true" href="#英特尔核芯显卡">#</a></h4>
<p><a href="https://wiki.Archlinux.org/index.php/Intel_graphics">官网文档</a></p>
<p>英特尔核芯显卡安装如下几个包即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S mesa lib32-mesa vulkan-intel lib32-vulkan-intel
</code></pre></div><blockquote>
<p><code>xf86-video-intel</code> arch wiki 里写的很多发行版不建议安装它，而应使用 xorg 的 modesetting 驱动(也就是什么都不用装的意思)。经过我们测试目前确实是默认 modesetting 驱动较为稳定。</p>
</blockquote>
<p>注意，只有 Intel HD 4000 及以上的核显才支持 vulkan。</p>
<h4 id="amd-核芯显卡">AMD 核芯显卡<a hidden class="anchor" aria-hidden="true" href="#amd-核芯显卡">#</a></h4>
<p>对于具有核芯显卡的 AMD 处理器，需要先确定核显架构(Architecture)是什么，再决定安装什么驱动。推荐在 <a href="https://www.techpowerup.com/">techpowerup 网站</a>进行查询，信息非常全面。</p>
<p>在确定了显卡架构后，再根据架构对照<a href="https://wiki.Archlinux.org/index.php/Xorg#AMD">这个文档</a>决定安装什么驱动。**对于 GCN2.0 及以下架构的老显卡，直接安装开源 ATI 驱动即可，原本闭源的老旧的 Catalyst 驱动在 2021 年已被废弃。GCN2.0 及以下架构的老显卡也不要使用开源的 AMDGPU 驱动，因为其仅处于实验性质，需要各种自定义内核编译选项与配置，非常麻烦，得不偿失。**对于新型号，即 GCN3 架构及更新型的核芯显卡，直接安装开源驱动 AMDGPU 即可，也就是以下这几个包。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S mesa lib32-mesa xf86-video-amdgpu vulkan-radeon lib32-vulkan-radeon libva-mesa-driver lib32-libva-mesa-driver mesa-vdpau lib32-mesa-vdpau
</code></pre></div><ul>
<li>比如你的笔记本 cpu 是目前常见的 AMD R7 4800U，那么它的核显为 Vega 8。通过查询，可知其为 GCN 5.0 架构，那么对照 arch 官方文档，你可选择安装 AMDGPU 开源驱动。</li>
<li>再比如你的台式机 cpu 是目前常见的 锐龙 5 3400G，那么它的核显为 Vega 11。通过查询，可知其为 GCN 5.0 架构，那么对照 arch 官方文档，你可选择安装 AMDGPU 开源驱动。</li>
<li>再老一些的 apu A10-9700 处理器 ，它的核显为 Radeon R7。通过查询，可知其为 GCN 2.0 架构，那么对照 arch 官方文档，你选择安装 ATI 开源驱动。</li>
</ul>
<h3 id="独立显卡">独立显卡<a hidden class="anchor" aria-hidden="true" href="#独立显卡">#</a></h3>
<p>这部分会分为仅有独立显卡(无核显)与同时拥有独立显卡和核芯显卡两种情况进行讲解。</p>
<h4 id="英伟达独立显卡">英伟达独立显卡<a hidden class="anchor" aria-hidden="true" href="#英伟达独立显卡">#</a></h4>
<p>较新型号的独立显卡直接安装如下几个包即可。<a href="https://wiki.Archlinux.org/index.php/NVIDIA">官方文档</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S nvidia nvidia-settings lib32-nvidia-utils
</code></pre></div><p>如果是 GeForce 630 以上到 GeForce 920 以下的老卡，安装 <a href="https://aur.Archlinux.org/packages/nvidia-470xx-dkms/">nvidia-470xx-dkms</a> AUR及其 32 位支持包。使用 dkms 驱动同时需要 headers。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S nvidia-470xx-dkms nvidia-settings lib32-nvidia-470xx-utils linux-headers
</code></pre></div><p>如果是 GeForce 630 以下到 GeForce 400 系列的老卡，安装 <a href="https://aur.Archlinux.org/packages/nvidia-390xx-dkms/">nvidia-390xx-dkms</a>AUR及其 32 位支持包。使用 dkms 驱动同时需要 headers。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S nvidia-390xx-dkms nvidia-settings lib32-nvidia-390xx-utils linux-headers
</code></pre></div><p>再老的显卡直接使用<a href="https://wiki.Archlinux.org/index.php/Nouveau">开源驱动</a>即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S mesa lib32-mesa xf86-video-nouveau
</code></pre></div><h5 id="nvidia-optimus">NVIDIA Optimus<a hidden class="anchor" aria-hidden="true" href="#nvidia-optimus">#</a></h5>
<p><strong>在同时拥有核芯显卡和英伟达独立显卡的笔记本上安装驱动是大多数人关注的事情，这里着重讲述。</strong></p>
<blockquote>
<p>再次提醒请按照本书前置章节配置好系统后再进行，不要多个教程混看，<strong>尤其是一些过时的教程</strong>。尤其需要注意的是确保 base-devel 包的安装以及配置好科学上网软件，以及使用 X11 模式。</p>
</blockquote>
<p><a href="https://wiki.Archlinux.org/index.php/NVIDIA_Optimus">英伟达双显卡模式官方文档</a> /// <a href="https://github.com/Askannz/optimus-manager/wiki">optimus-manager 官方文档</a></p>
<p>若为同时拥有核芯显卡与英伟达独显的笔记本电脑，同样需要按照上述步骤先安装各个软件包。除此之外还需要安装 optimus-manager。可以在核芯显卡和独立显卡间轻松切换。optimus-manager 提供三种模式，分别为仅用独显，仅用核显，和 hybrid 动态切换模式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S optimus-manager optimus-manager-qt
</code></pre></div><p>安装完成后重启即可使用。optimus-manager 安装完成后会默认 enable optimus-manager 的服务，你可在重启前检查其状态，若没有 enable 则手动将其 enable。重启后在菜单栏搜索 optimus-manager 点击即可使用。可在其设置中设置开机自动启动。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl enable optimus-manager
</code></pre></div><p>此时你应该已经可以进行显卡切换了，如果有问题，请详细阅读 optimus-manager 的文档，里面有详细的描述。由于各类问题太多，本文不进行描述，optimus-manager 的文档很详尽，请自行查看。此处仅列出几项较为重要的注意事项:</p>
<ul>
<li>如果需要在独显和核显模式间切换，要注意你没安装各类 GPU 监控插件，它们会阻止显卡切换，导致不可预料的错误。</li>
<li>不要使用 Nvidia Control Panel 中的<code>Save to X Configuration file</code>按钮。会导致配置冲突。</li>
<li>在显卡之间的切换时，重新登陆后如在 splash screen 卡住或者黑屏，可以尝试在 tty1 tty2 之间进行切换。</li>
<li>如果你在安装 optimus manager 并重启后，直接黑屏卡死，不能进入系统，很有可能是遇到了常见的&quot;ACPI ISSUE&quot;，简单来说，这是笔记本制造商的实现问题。可以尝试在内核启动参数中加入<code>acpi_osi=! acpi_osi=&quot;Windows 2009&quot;</code> 后再尝试。<a href="https://github.com/Askannz/optimus-manager/wiki/FAQ,-common-issues,-troubleshooting#when-i-switch-gpus-my-system-completely-locks-up-i-cannot-even-switch-to-a-tty-with-ctrlaltfx">[1]</a></li>
</ul>
<p>最后详细说下动态切换模式。本质上其还是使用官方的 <a href="https://wiki.Archlinux.org/index.php/PRIME#PRIME_render_offload">PRIME</a>对闭源驱动的方法进行切换。需要设置三个环境变量，或者用 nvidia-prime 包提供的命令 prime-run，二者本质也是一样的，都是设置三个环境变量。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S nvidia-prime
<span style="color:#75715e"># 使用prime-run前缀来用独显运行某些程序</span>
$ prime-run some_program 
</code></pre></div><p>对于 AMD 核显+N 卡独显的读者，optimus-manager 对于这套组合的支持目前已经发布，最新可用版本为 1.4。</p>
<hr>
<p><strong>如果你不是强烈追求能效控制以及注重电池寿命的用户，那么可以不用往下看了，如果你是，那么需要针对你的硬件以及笔记本型号尝试正确的电源管理方式。此部分的设置可能导致黑屏，并且尝试过程可能较长，也会遇到各类问题，请根据你个人的操作水平自行斟酌是否操作</strong></p>
<p>电源控制做的事情是，在只用核显的模式下，确保正确关闭独立显卡。而在混合模式下，绝大多数情况下 Nvidia 模块实际是始终开启的，电源控制并不生效。这件事情其实很复杂，因为对于不同的显卡型号，以及笔记本型号的组合，可行的方案都是不同的。笼统来说，最广泛适用的办法是 bbswitch。但仍不建议上来就按照此方式安装使用，因为某些特定的硬件就是会出问题，也就是黑屏。这里建议按照 optimus-manager 官方的文档一步一步来，按步骤尝试，最后找到属于你自己的电脑合适的电源管理方式。<strong>此<a href="https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options">文档</a>必须详细阅读！</strong></p>
<p>针对大多数笔记本适用的 Bbswitch,此处进行安装使用的讲解。首先安装包 bbswitch。若使用其它内核，则安装包 bbswitch-dkms。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo pacman -S bbswitch <span style="color:#75715e">#安装 bbswitch 切换方式</span>
</code></pre></div><p>接下来右键点击 optimus-manager 的托盘设置，在 Optimus 选项卡中的 switch method 选择 Bbswitch 即可。</p>
<h5 id="primehttpswikiarchlinuxorgtitleprimeprime_render_offload"><a href="https://wiki.archlinux.org/title/PRIME#PRIME_render_offload">PRIME</a><a hidden class="anchor" aria-hidden="true" href="#primehttpswikiarchlinuxorgtitleprimeprime_render_offload">#</a></h5>
<p>To use the NVIDIA driver as an RandR 1.4 output source provider, also known as “PRIME”, the X server needs to be configured to use the NVIDIA driver for its primary screen and to use the “modesetting” driver for the other graphics device. This can be achieved by placing the following in <code>/etc/X11/xorg.conf</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Section <span style="color:#e6db74">&#34;ServerLayout&#34;</span>
    Identifier <span style="color:#e6db74">&#34;layout&#34;</span>
    Screen <span style="color:#ae81ff">0</span> <span style="color:#e6db74">&#34;nvidia&#34;</span>
    Inactive <span style="color:#e6db74">&#34;intel&#34;</span>
EndSection

Section <span style="color:#e6db74">&#34;Device&#34;</span>
    Identifier <span style="color:#e6db74">&#34;nvidia&#34;</span>
    Driver <span style="color:#e6db74">&#34;nvidia&#34;</span>
    BusID <span style="color:#e6db74">&#34;&lt;BusID for NVIDIA device here&gt;&#34;</span>
EndSection

Section <span style="color:#e6db74">&#34;Screen&#34;</span>
    Identifier <span style="color:#e6db74">&#34;nvidia&#34;</span>
    Device <span style="color:#e6db74">&#34;nvidia&#34;</span>
    Option <span style="color:#e6db74">&#34;AllowEmptyInitialConfiguration&#34;</span>
EndSection

Section <span style="color:#e6db74">&#34;Device&#34;</span>
    Identifier <span style="color:#e6db74">&#34;intel&#34;</span>
    Driver <span style="color:#e6db74">&#34;modesetting&#34;</span>
EndSection

Section <span style="color:#e6db74">&#34;Screen&#34;</span>
    Identifier <span style="color:#e6db74">&#34;intel&#34;</span>
    Device <span style="color:#e6db74">&#34;intel&#34;</span>
EndSection
</code></pre></div><p>The X server does not automatically enable displays attached using the output sink in this configuration. To do that, use the <code>xrandr</code> command line tool.</p>
<p>For NVIDIA as an output source:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xrandr --setprovideroutputsource modesetting NVIDIA-0
$ xrandr --auto
</code></pre></div><h4 id="amd-独立显卡">AMD 独立显卡<a hidden class="anchor" aria-hidden="true" href="#amd-独立显卡">#</a></h4>
<p>AMD 独立显卡的驱动安装步骤实际上 AMD 核芯显卡是相同的，都需要先确定架构，然后选定正确的驱动安装即可。真正需要关注的是如何在核芯显卡和独立显卡间进行切换。可以使用 <a href="https://wiki.Archlinux.org/title/PRIME#For_open_source_drivers_-_PRIME">PRIME</a> 对开源驱动的双显卡切换方式。</p>
<p>此外，可以使用 <code>glmark2</code>，<code>DRI_PRIME=1 glmark2</code> 分别对核显和独显进行测试，选择分数更高的一个进行使用。可以在 steam 游戏的启动前缀中加入<code>DRI_PRIME=1 mangohud %command%</code>来使用独显。(关于 <a href="https://Archlinuxstudio.github.io/ArchlinuxTutorial/#/play/software?id=%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7">mangohud</a>)。</p>
<p>笔记本上使用独立显卡运行 steam 游戏的另一个例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">DRI_PRIME<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> steam steam://rungameid/570 <span style="color:#75715e">#运行dota2</span>
DRI_PRIME<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> steam steam://rungameid/730 <span style="color:#75715e">#运行cs go</span>
</code></pre></div><h3 id="显卡性能测试">显卡性能测试<a hidden class="anchor" aria-hidden="true" href="#显卡性能测试">#</a></h3>
<p><a href="https://wiki.Archlinux.org/index.php/benchmarking">官方文档</a>。</p>
<p>最传统和广为人知的方式为使用<code>glxgears</code>命令进行测试，其属于<a href="https://www.Archlinux.org/packages/extra/x86_64/mesa-demos/">mesa-utils</a>包。但其仅仅只能提供简单的测试场景及帧数显示，只测试了当前 OpenGL 功能的一小部分，功能明显不足。我们推荐如下两种工具。</p>
<h4 id="glmark2">glmark2<a hidden class="anchor" aria-hidden="true" href="#glmark2">#</a></h4>
<p>glmark 提供了一系列丰富的测试，涉及图形单元性能（缓冲，建筑，照明，纹理等）的不同方面，允许进行更全面和有意义的测试。 每次测试单独计算帧速率。 最终，用户根据以前的所有测试获得了一个成绩分数。在 Archlinux 上属于包<a href="https://aur.Archlinux.org/packages/glmark2/">glmark2</a></p>
<h4 id="unigine-benchmark">Unigine benchmark<a hidden class="anchor" aria-hidden="true" href="#unigine-benchmark">#</a></h4>
<p>Unigine 3D 引擎是一个更全面的基准测试工具。 截止目前有五个版本，从旧到新分别是</p>
<ul>
<li>sanctuary(2007)</li>
<li>tropics(2008)</li>
<li>heaven(2009)</li>
<li>valley(2013)</li>
<li>superposition(2017)</li>
</ul>
<p>可从<a href="https://aur.Archlinux.org/packages/?O=0&amp;K=Unigine">AUR</a>下载全部版本。它们均为专有软件。</p>
<h3 id="显卡信息查看">显卡信息查看<a hidden class="anchor" aria-hidden="true" href="#显卡信息查看">#</a></h3>
<p>对于英伟达显卡，nvidia-settings 这个包即可全面的展示显卡相关信息。</p>
<p>对于 AMD 显卡，稍微麻烦一些，通过 yay 安装 radeon-profile-git 这个包，同时安装其依赖 radeon-profile-daemon，最后启动这个进程。即可以图形化的方式查看 amd 显卡信息。<a href="https://github.com/marazmista/radeon-profile">github 项目地址</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl enable --now radeon-profile-daemon.service
</code></pre></div><p>注意，不要对左下角的 auto low high 进行更改 有 bug 会卡死。同时，显存占用在某些型号显卡上展示可能有误。</p>
<h3 id="后续">后续<a hidden class="anchor" aria-hidden="true" href="#后续">#</a></h3>
<p>如果作为一个普通使用者，到这里你的系统已经配置完毕了。不会命令行也没太大关系，你可以慢慢探索 KDE 这个桌面环境，记住时常用如下命令或 Discover 软件更新系统即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 更新官方仓库</span>
$ sudo pacman -Syyu 
<span style="color:#75715e"># 同时更新官方仓库与AUR</span>
$ yay -Syyu 
</code></pre></div><p>接下来你可以查阅娱乐、办公、多媒体等章节了解更多使用软件的安装与使用。如果你需要成为一名较为专业的人员，那么请阅读进阶、以及编程等章节。</p>
<h2 id="其他">其他<a hidden class="anchor" aria-hidden="true" href="#其他">#</a></h2>
<h3 id="operation-too-slowhttpswwwcnblogscomhuan0630p13584606html"><a href="https://www.cnblogs.com/Huan0630/p/13584606.html">Operation too slow</a><a hidden class="anchor" aria-hidden="true" href="#operation-too-slowhttpswwwcnblogscomhuan0630p13584606html">#</a></h3>
<p>修改文件<code>/etc/pacman.conf</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#XferCommand = /usr/bin/curl -C - -f %u &gt; %o</span>
<span style="color:#75715e">#XferCommand = /usr/bin/wget --passive-ftp -c -O %o %u</span>
</code></pre></div><p>把其中一行注释取消掉(删除<code>#</code>)就行了。</p>
<h3 id="ath9k-weak-and-unstable-connectionhttpsbbsarchlinuxorgviewtopicphpid161305"><a href="https://bbs.archlinux.org/viewtopic.php?id=161305">ath9k Weak And Unstable Connection</a><a hidden class="anchor" aria-hidden="true" href="#ath9k-weak-and-unstable-connectionhttpsbbsarchlinuxorgviewtopicphpid161305">#</a></h3>
<p><a href="https://wiki.archlinux.org/title/Network_configuration/Wireless#ath9k">ath9k</a> 尝试：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lspci -k
...
03:00.0 Network controller: Qualcomm Atheros QCA9565 / AR9565 Wireless Network Adapter <span style="color:#f92672">(</span>rev 01<span style="color:#f92672">)</span>
	Subsystem: Lite-On Communications Inc QCA9565 / AR9565 Wireless Network Adapter
	Kernel driver in use: ath9k
	Kernel modules: ath9k
$ modprobe ath9k nohwcrypt<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#75715e"># manually</span>
$ sudo vim /etc/modprobe.d/ath9k-nohwcrypt.conf <span style="color:#75715e"># Using files</span>
options ath9k nohwcrypt<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S backports-patches-git
</code></pre></div><h3 id="ssh-agenthttpswikiarchlinuxorgtitlessh_keysssh_agents"><a href="https://wiki.archlinux.org/title/SSH_keys#SSH_agents">ssh-agent</a><a hidden class="anchor" aria-hidden="true" href="#ssh-agenthttpswikiarchlinuxorgtitlessh_keysssh_agents">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.bashrc
<span style="color:#66d9ef">if</span> ! pgrep -u <span style="color:#e6db74">&#34;</span>$USER<span style="color:#e6db74">&#34;</span> ssh-agent &gt; /dev/null; <span style="color:#66d9ef">then</span>
    ssh-agent &gt; <span style="color:#e6db74">&#34;</span>$XDG_RUNTIME_DIR<span style="color:#e6db74">/ssh-agent.env&#34;</span>
<span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> ! <span style="color:#e6db74">&#34;</span>$SSH_AUTH_SOCK<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
    source <span style="color:#e6db74">&#34;</span>$XDG_RUNTIME_DIR<span style="color:#e6db74">/ssh-agent.env&#34;</span> &gt;/dev/null
<span style="color:#66d9ef">fi</span>
</code></pre></div><p><strong>Tip:</strong> To make all <code>ssh</code> clients, including <code>git</code> store keys in the agent on first use, add the configuration setting <code>AddKeysToAgent yes</code> to <code>~/.ssh/config</code>. Other possible values are <code>confirm</code>, <code>ask</code> and <code>no</code> (default). for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Host github-proj1
  HostName github.com
  User git
  IdentityFile ~/.ssh/id_rsa
  AddKeysToAgent yes

Host github-proj2
  HostName github.com
  User git
  IdentityFile ~/.ssh/kurome
  AddKeysToAgent yes
</code></pre></div><h3 id="chrome-无法连接代理">Chrome 无法连接代理<a hidden class="anchor" aria-hidden="true" href="#chrome-无法连接代理">#</a></h3>
<p>通过环境变量设置代理，结果 chrome 无法浏览网页，报错 ERR_EMPTY_RESPONSE</p>
<p>可以 man google-chrome 找到设置代理的参数 proxy-server 指定代理，如</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ google-chrome-stable  --proxy-server<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;127.0.1:7890&#34;</span>
</code></pre></div><h3 id="arch安装器">“Arch安装器”<a hidden class="anchor" aria-hidden="true" href="#arch安装器">#</a></h3>
<p>特点是使用 Arch Linux 主软件库，定制桌面，使用图形 LiveCD 安装等。</p>
<ul>
<li><a href="https://endeavouros.com/">EndeavourOS</a></li>
<li><a href="https://garudalinux.org/index.html">Garuda Linux</a></li>
<li><a href="https://firerain.me/">FireRain OS</a></li>
<li>更多 <a href="https://wiki.archlinux.org/title/Arch-based_distributions#Active">Arch-based distributions</a></li>
</ul>
<h2 id="optimizationhttpswikiarchlinuxorgtitlegeneral_recommendationsoptimization"><a href="https://wiki.archlinux.org/title/General_recommendations#Optimization">Optimization</a><a hidden class="anchor" aria-hidden="true" href="#optimizationhttpswikiarchlinuxorgtitlegeneral_recommendationsoptimization">#</a></h2>
<h3 id="zram-or-zswaphttpswikiarchlinuxorgtitleimproving_performancezram_or_zswap"><a href="https://wiki.archlinux.org/title/Improving_performance#zram_or_zswap">zram or zswap</a><a hidden class="anchor" aria-hidden="true" href="#zram-or-zswaphttpswikiarchlinuxorgtitleimproving_performancezram_or_zswap">#</a></h3>
<p>The <a href="https://docs.kernel.org/admin-guide/blockdev/zram.html">zram</a> kernel module (previously called <strong>compcache</strong>) provides a compressed block device in RAM. If you use it as swap device, the RAM can hold much more information but uses more CPU. Still, it is much quicker than swapping to a hard drive. If a system often falls back to swap, this could improve responsiveness. Using zram is also a good way to reduce disk read/write cycles due to swap on SSDs.</p>
<p><strong>Swap on zram using a udev rule</strong></p>
<p>The example below describes how to set up swap on zram automatically at boot with a single udev rule. No extra package should be needed to make this work.</p>
<p>First, enable the module:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># nano /etc/modules-load.d/zram.conf</span>
zram
</code></pre></div><p>Configure the number of /dev/zram nodes you need.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># nano /etc/modprobe.d/zram.conf</span>
options zram num_devices<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>
</code></pre></div><p>Create the udev rule as shown in the example.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># nano /etc/udev/rules.d/99-zram.rules</span>
KERNEL<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;zram0&#34;</span>, ATTR<span style="color:#f92672">{</span>disksize<span style="color:#f92672">}=</span><span style="color:#e6db74">&#34;512M&#34;</span> RUN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/usr/bin/mkswap /dev/zram0&#34;</span>, TAG<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;systemd&#34;</span>
KERNEL<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;zram1&#34;</span>, ATTR<span style="color:#f92672">{</span>disksize<span style="color:#f92672">}=</span><span style="color:#e6db74">&#34;512M&#34;</span> RUN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/usr/bin/mkswap /dev/zram1&#34;</span>, TAG<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;systemd&#34;</span>
</code></pre></div><p>Add /dev/zram to your fstab.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># nano /etc/fstab</span>
/dev/zram0 none swap defaults <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
/dev/zram1 none swap defaults <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
</code></pre></div><h2 id="pacmanhttpshustleigithubio201811msys2-pacmanhtml"><a href="https://hustlei.github.io/2018/11/msys2-pacman.html">pacman</a><a hidden class="anchor" aria-hidden="true" href="#pacmanhttpshustleigithubio201811msys2-pacmanhtml">#</a></h2>
<p>pacman是arclinux中的软件管理工具，可以直接从网络上的软件仓库下载安装及删除软件，自动处理依赖关系。</p>
<p>详情查看 <a href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></p>
<h3 id="安装软件">安装软件<a hidden class="anchor" aria-hidden="true" href="#安装软件">#</a></h3>
<ul>
<li>
<p><code>pacman -S 软件名</code>: 安装软件。也可以同时安装多个包，只需以空格分隔包名即可。</p>
<ul>
<li>
<p><strong>-S, &ndash;sync</strong></p>
<p>Synchronize packages.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -S --needed 软件名1 软件名2</code>: 安装软件，但不重新安装已经是最新的软件。</p>
<ul>
<li>
<p><strong>&ndash;needed</strong></p>
<p>Do not reinstall the targets that are already up-to-date.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Sy 软件名</code>：安装软件前，先从远程仓库下载软件包数据库(数据库即所有软件列表)。</p>
<ul>
<li>
<p><strong>-y, &ndash;refresh</strong></p>
<p>Download a fresh copy of the master package database from the server(s) defined in <a href="https://man.archlinux.org/man/pacman.conf.5.en">pacman.conf(5)</a>.  Passing two <em>&ndash;refresh</em> or <em>-y</em> flags will force a refresh of all package databases, even if they appear to be up-to-date.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Sv 软件名</code>：在显示一些操作信息后执行安装。</p>
<ul>
<li>
<p><strong>-v, &ndash;verbose</strong></p>
<p>Output paths such as the Root, Conf File, DB Path, Cache Dirs, etc.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Sw 软件名</code>: 只下载软件包，不安装。</p>
<ul>
<li>
<p><strong>-w, &ndash;downloadonly</strong></p>
<p>Retrieve all packages from the server, but do not install/upgrade anything.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -U 软件名.pkg.tar.gz</code>：安装本地软件包。</p>
<ul>
<li>
<p><strong>-U, &ndash;upgrade</strong></p>
<p>Upgrade or add package(s) to the system and install the required dependencies from sync repositories.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -U http://www.example.com/repo/example.pkg.tar.xz </code>: 安装一个远程包（不在 pacman 配置的源里面）。</p>
</li>
</ul>
<h3 id="更新系统">更新系统<a hidden class="anchor" aria-hidden="true" href="#更新系统">#</a></h3>
<ul>
<li>
<p><code>pacman -Sy</code>: 从服务器下载新的软件包数据库（实际上就是下载远程仓库最新软件列表到本地）。</p>
</li>
<li>
<p><code>pacman -Su</code>: 升级所有已安装的软件包。</p>
<ul>
<li>
<p><strong>-u, &ndash;sysupgrade</strong></p>
<p>Upgrades all packages that are out-of-date.</p>
</li>
</ul>
</li>
</ul>
<p>pacman 可以用一个命令就可以升级整个系统。花费的时间取决于系统有多老。这个命令会同步非本地(local)软件仓库并升级系统的软件包：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pacman -Syu
</code></pre></div><p>在Arch linux中，只支持系统完整升级，不支持部分升级。</p>
<p>如果升级时，网络比较慢，觉得既浪费时间又浪费硬盘，实在不想升级那么多东西，可以逐个软件包升级。用下面命令可以升级核心包：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pacman -S --needed &lt;packages...&gt;
</code></pre></div><p>详解（小写为在上面固定搭配下的含义）：</p>
<h3 id="卸载软件">卸载软件<a hidden class="anchor" aria-hidden="true" href="#卸载软件">#</a></h3>
<ul>
<li>
<p><code>pacman -R 软件名</code>: 该命令将只删除包，保留其全部已经安装的依赖关系</p>
<ul>
<li>
<p><strong>-R, &ndash;remove</strong></p>
<p>Remove package(s) from the system.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Rv 软件名</code>: 删除软件，并显示详细的信息</p>
</li>
<li>
<p><code>pacman -Rs 软件名</code>: 删除软件，同时删除本机上只有该软件依赖的软件。</p>
<ul>
<li>
<p><strong>-s, &ndash;recursive</strong></p>
<p>Remove each target specified including all of their dependencies, provided that (A) they are not required by other packages; and (B) they were not explicitly installed by the user.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Rsc 软件名</code>: 删除软件，并删除所有依赖这个软件的程序，慎用</p>
<ul>
<li>
<p><strong>-c, &ndash;cascade</strong></p>
<p>Remove all target packages, as well as all packages that depend on one or more target packages.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Ru 软件名</code>: 删除软件,同时删除不再被任何软件所需要的依赖</p>
<ul>
<li>
<p><strong>-u, &ndash;unneeded</strong></p>
<p>Removes targets that are not required by any other packages.</p>
</li>
</ul>
</li>
</ul>
<p>详解（小写为在上面固定搭配下的含义）：</p>
<h3 id="搜索软件">搜索软件<a hidden class="anchor" aria-hidden="true" href="#搜索软件">#</a></h3>
<ul>
<li>
<p><code>pacman -Ss 关键字</code>: 在仓库中搜索含关键字的软件包（本地已安装的会标记）</p>
<p>参数加q可以简洁方式显示结果，比如 pacman -Ssq gcc 会比 pacman -Ss gcc 显示的好看一些。</p>
<ul>
<li>
<p><strong>-s, &ndash;search</strong> <regexp></p>
<p>This will search each package in the sync databases for names or descriptions that match regexp.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Sl &lt;repo&gt;</code>:显示软件仓库中所有软件的列表</p>
<ul>
<li>
<p>通常这样用:<code>pacman -Sl | 关键字</code></p>
</li>
<li>
<p>``pacman -Sl | gcc<code>跟</code>pacman -Ssq gcc` 很接近，但是会少一些和gcc有关但软件名不包含gcc的包。</p>
</li>
<li>
<p><strong>-l, &ndash;list</strong></p>
<p>List all packages in the specified repositories.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Qs 关键字</code>: 搜索已安装的软件包</p>
<ul>
<li>
<p><strong>-Q, &ndash;query</strong></p>
<p>Query the package database.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Qu</code>: 列出所有可升级的软件包</p>
<ul>
<li>
<p><strong>-u, &ndash;upgrades</strong></p>
<p>Restrict or filter output to packages that are out-of-date on the local system.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Qt</code>: 列出不被任何软件要求的软件包</p>
<ul>
<li>
<p><strong>-t, &ndash;unrequired</strong></p>
<p>Restrict or filter output to print only packages neither required nor optionally required by any currently installed package.</p>
</li>
</ul>
</li>
</ul>
<p>查询软件信息</p>
<ul>
<li>
<p><code>pacman -Q 软件名</code>: 查看软件包是否已安装，已安装则显示软件包名称和版本</p>
</li>
<li>
<p><code>pacman -Qi 软件名</code>: 查看某个软件包信息，显示较为详细的信息，包括描述、构架、依赖、大小等等</p>
<ul>
<li>
<p><strong>-i, &ndash;info</strong></p>
<p>Display information on a given package.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Ql 软件名</code>: 列出软件包内所有文件，包括软件安装的每个文件、文件夹的名称和路径</p>
<ul>
<li>
<p><strong>-l, &ndash;list</strong></p>
<p>List all files owned by a given package.</p>
</li>
</ul>
</li>
</ul>
<h3 id="软件包组">软件包组<a hidden class="anchor" aria-hidden="true" href="#软件包组">#</a></h3>
<ul>
<li>
<p><code>pacman -Sg</code>: 列出软件仓库上所有的软件包组</p>
<ul>
<li>
<p><strong>-g, &ndash;groups</strong></p>
<p>Display all the members for each package group specified.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Qg</code>: 列出本地已经安装的软件包组和子包</p>
</li>
<li>
<p><code>pacman -Sg 软件包组</code>: 查看某软件包组所包含的所有软件包</p>
</li>
<li>
<p><code>pacman -Qg 软件包组</code>: 和<code>pacman -Sg 软件包组</code>完全一样</p>
</li>
</ul>
<p>很多人建议通过安装软件组来安装工具链，但是这样比较浪费空间。实际上如果把gcc, qt, clang等安装上，msys2就要占掉超过10G的硬盘空间，所以个人很少直接安装软件组。</p>
<h3 id="清理缓存">清理缓存<a hidden class="anchor" aria-hidden="true" href="#清理缓存">#</a></h3>
<ul>
<li>
<p><code>pacman -Sc</code>：清理未安装的包文件，包文件位于 /var/cache/pacman/pkg/ 目录。</p>
<ul>
<li>
<p><strong>-c, &ndash;clean</strong></p>
<p>Remove packages that are no longer installed from the cache as well as currently unused sync databases to free up disk space. Use one <em>&ndash;clean</em> switch to only remove packages that are no longer installed; use two to remove all files from the cache.</p>
</li>
</ul>
</li>
<li>
<p><code>pacman -Scc</code>：清理所有的缓存文件。</p>
</li>
</ul>
<h2 id="配置-zramhttpsuntitledpwsoftwarelinux2826html"><a href="https://untitled.pw/software/linux/2826.html">配置 ZRAM</a><a hidden class="anchor" aria-hidden="true" href="#配置-zramhttpsuntitledpwsoftwarelinux2826html">#</a></h2>
<h3 id="zram-介绍">ZRAM 介绍<a hidden class="anchor" aria-hidden="true" href="#zram-介绍">#</a></h3>
<p>随着现代应用程序的多样化和复杂化发展，那个曾经只需要 640KB 内存就能运行市面上所有软件的时代已经一去不复返，而比应用程序发展更快的则是用户对多任务的需求。现在的主流操作系统都提供了内存压缩的功能，以保证活跃应用程序拥有尽可能多的可用内存：</p>
<ul>
<li>macOS 从 <code>OS X 10.9</code> 之后默认开启内存压缩</li>
<li>Windows 从 Win10 TH2 之后默认开启内存压缩</li>
<li>大部分 Android 手机厂商都默认开启了内存压缩</li>
</ul>
<p>Android（Linux）的内存压缩是依靠 Swap 机制实现的，大部分情况下是使用 ZRAM 技术来模拟 Swap。</p>
<p>ZRAM 早在 2014 年就伴随 <code>Linux 3.14</code> 内核合入主线，但由于 Linux 用途十分广泛，这一技术并非默认启用，只有 Android 和少部分的 Linux 桌面发行版如 Fedora 默认启用了这一技术，以保证多任务场景下内存的合理分层存储。</p>
<h3 id="zram-运行机制">ZRAM 运行机制<a hidden class="anchor" aria-hidden="true" href="#zram-运行机制">#</a></h3>
<p>ZRAM 的原理是划分一块内存区域作为虚拟的块设备（可以理解为支持透明压缩的内存文件系统），当系统内存不足出现页面交换时，可以将原本应该交换出去的页压缩后放在内存中，由于部分被『交换出去』的页得到了压缩，因此可用的物理内存就能随之变多。</p>
<p>由于 ZRAM 并没有改变 Linux 内存模型的基本结构，因此我们只能利用 Linux 中 Swap 的优先级能力，将 ZRAM 作为高优先级 Swap 看待，这也解释了为什么闪存比较脆弱的手机上会出现 Swap，其本质还是 ZRAM。</p>
<p>随着部分手机开始使用真正的固态硬盘，也有将 Swap 放在硬盘上的手机，但是一般也都会优先使用 ZRAM。</p>
<p>由于这一运行机制的存在，ZRAM 可以设计得足够简单：内存交换策略交给内核、压缩算法交给压缩库，ZRAM 本身基本上只需要实现块设备驱动，因此具有极强的可定制性和灵活性，这也是 Windows、macOS 等系统所无法比拟的。</p>
<p>Linux5.16 中关于 ZRAM 的源码只有不到 100KB，实现非常精简，对 Linux 驱动开发感兴趣的朋友也可以从这里开始研究：<a href="https://github.com/torvalds/linux/blob/v5.16/drivers/block/zram/Kconfig">linux/Kconfig at v5.16 · torvalds/linux</a></p>
<h3 id="zram-配置与自启动">ZRAM 配置与自启动<a hidden class="anchor" aria-hidden="true" href="#zram-配置与自启动">#</a></h3>
<h4 id="确认内核是否支持有无启用-zram">确认内核是否支持&amp;有无启用 ZRAM<a hidden class="anchor" aria-hidden="true" href="#确认内核是否支持有无启用-zram">#</a></h4>
<p>既然 ZRAM 是内核模块，就需要先检查当前 Linux 机器的内核是否存在这一模块。</p>
<p>在配置之前，需要读者先确认一下自己的内核版本是否在 <code>3.14</code> 以上，部分 VPS 由于依旧使用 <code>Xen</code>、<code>OpenVZ</code> 等虚拟/容器化技术，内核版本往往卡在 <code>2.6</code>，那么这样的机器是无法开启 ZRAM 的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ uname -r
</code></pre></div><p>但根据内核版本判断毕竟不可靠，如 <code>CentOS 7</code>，虽然内核版本是 3.10，却支持 ZRAM，也有极少数发行版或嵌入式 Linux 为了降低资源占用，选择不编译 ZRAM，因此我们最好使用 <code>modinfo</code> 命令来检查一下有无 ZRAM 支持：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ modinfo zram
</code></pre></div><p>部分发行版会默认启用但不配置 ZRAM，我们可以使用<code>lsmod</code>检查 ZRAM 是否启用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsmod | grep zram
</code></pre></div><h4 id="启用-zram-内核模块">启用 ZRAM 内核模块<a hidden class="anchor" aria-hidden="true" href="#启用-zram-内核模块">#</a></h4>
<p>如果确定 ZRAM 没有被启用，我们可以新建文件 <code>/etc/modules-load.d/zram.conf</code>，并在其中输入 <code>zram</code>，然后重启机器以生效。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;zram&#39;</span> | sudo tee /etc/modules-load.d/zram.conf
</code></pre></div><p>上文我们提到，ZRAM 本质上是块设备驱动，那么当我们输入 <code>lsblk</code> 会发生什么呢？</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsblk
</code></pre></div><p>可以看到，其中并没有 <code>zram</code> 相关字眼，这是因为我们需要先新建一个块设备。</p>
<p>打开 <a href="https://github.com/torvalds/linux/blob/v5.16/drivers/block/zram/Kconfig#L15">ZRAM 源码</a> 中的<code>Kconfig</code>文件，可以找到如下说明：</p>
<blockquote>
<p>Creates virtual block devices called /dev/zramX (X = 0, 1, …).
Pages written to these disks are compressed and stored in memory
itself. These disks allow very fast I/O and compression provides
good amounts of memory savings.</p>
<p>It has several use cases, for example: /tmp storage, use as swap
disks and maybe many more.</p>
<p>See Documentation/admin-guide/blockdev/zram.rst for more information.</p>
</blockquote>
<p>其中提到了一篇位于 <code>Documentation/admin-guide/blockdev/zram.rst</code> 的 <a href="https://github.com/torvalds/linux/blob/v5.16/Documentation/admin-guide/blockdev/zram.rst#1-load-module">说明文档</a>。</p>
<p>根据说明文档，我们可以使用 <code>modprobe zram num_devices=1</code> 的方式来让内核在启用 ZRAM 模块时开启一个 ZRAM 设备（一般只需要一个就够了），但这样开启设备的方式依旧在重启后就会失效，并不方便。</p>
<p>好在<code>modprobe</code>的 <a href="https://man7.org/linux/man-pages/man8/modprobe.8.html">说明文档</a> 中提到了<code>modprobe.d</code>的存在：<a href="https://man7.org/linux/man-pages/man5/modprobe.d.5.html">modprobe.d(5) – Linux manual page</a>。</p>
<p>继续阅读 <code>modprobe.d</code> 的文档，我们会发现它主要用于<code>modprobe</code>时预定义参数，即只需要输入 <code>modprobe zram</code>，辅以 <code>modprobe.d</code>中的配置，就可以自动加上参数。由于我们使用 <code>modules-load.d</code> 实现了 ZRAM 模块的开机自启，因此只需要在<code>modprobe.d</code>中配置参数即可。</p>
<p>按照上文所述的文档，新建文件<code>/etc/modprobe.d/zram.conf</code>，在其中输入<code>options zram num_devices=1</code>，即可配置一个 ZRAM 块设备，同样重启后生效。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;options zram num_devices=1&#39;</span> | sudo tee /etc/modprobe.d/zram.conf
</code></pre></div><h4 id="配置-zram0-设备">配置 zram0 设备<a hidden class="anchor" aria-hidden="true" href="#配置-zram0-设备">#</a></h4>
<p>重启后输入<code>lsblk</code>，却发现所需的 ZRAM 设备依旧没有出现？</p>
<p>不用担心，这是因为我们还没有为这个块设备建立文件系统，<code>lsblk</code>虽然名字听起来像是列出块设备，但本质上读取的确是<code>/sys</code>目录里的文件系统信息，再将其与<code>udev</code>中的设备信息比对。</p>
<p>阅读<code>udev</code>的文档：<a href="https://man7.org/linux/man-pages/man7/udev.7.html">udev(7) – Linux manual page</a>，其中提到<code>udev</code>会从<code>/etc/udev/rules.d</code>目录读取设备信息，按照文档中的指示，我们新建一个名为<code>/etc/udev/rules.d/99-zram.rules</code>的文件，在其中写入如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;KERNEL==&#34;zram0&#34;,ATTR{disksize}=&#34;30G&#34;,TAG+=&#34;systemd&#34;&#39;</span> | sudo tee /etc/udev/rules.d/99-zram.rules
</code></pre></div><p>其中，<code>KERNEL</code>属性用于指明具体设备，<code>ATTR</code>属性用于给设备传递参数，这里我们需要阅读<code>zram</code>的文档，其中提到：</p>
<blockquote>
<p>Set disk size by writing the value to sysfs node ‘disksize’. The value can be either in bytes or you can use mem suffixes. Examples:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Initialize /dev/zram0 with 50MB disksize</span>
echo <span style="color:#66d9ef">$((</span><span style="color:#ae81ff">50</span><span style="color:#f92672">*</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">*</span><span style="color:#ae81ff">1024</span><span style="color:#66d9ef">))</span> &gt; /sys/block/zram0/disksize

<span style="color:#75715e"># Using mem suffixes</span>
echo 256K &gt; /sys/block/zram0/disksize
echo 512M &gt; /sys/block/zram0/disksize
echo 1G &gt; /sys/block/zram0/disksize
</code></pre></div><p>Note: There is little point creating a zram of greater than twice the size of memory since we expect a 2:1 compression ratio. Note that zram uses about 0.1% of the size of the disk when not in use so a huge zram is wasteful.</p>
</blockquote>
<p>即该块设备接受名为<code>disksize</code>的参数，且不建议分配内存容量两倍以上的 ZRAM 空间。笔者的 Linux 环境拥有 60G 内存，考虑到实际使用情况，设置了 30G 的 ZRAM，这样一来理想情况下就能获得<code>60G - (30G / 2) + 30G &gt; 75G</code>以上的内存空间，已经足够使用。读者可以根据自己的实际情况选择 ZRAM 空间大小，一般来说一开始可以设置小一些，不够用再扩大。</p>
<p><code>TAG</code>属性用于标记设备类型（设备由谁管理），根据<code>systemd.device</code>的文档：<a href="https://man7.org/linux/man-pages/man5/systemd.device.5.html">systemd.device(5) – Linux manual page</a>，大部分块设备和网络设备都建议标记 TAG 为<code>systemd</code>，这样<code>systemd</code>就可以将这个设备视作一个<code>Unit</code>，便于控制服务的依赖关系（如块设备加载成功后再启动服务等），这里我们也将其标记为<code>systemd</code>即可。</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl status dev-zram0.device
</code></pre></div><p>可以使用如 <code>dev-zram0.device</code> 或者 <code>dev-sda1.device</code> 等方式获取设备的 Device Unit</p>
</blockquote>
<p>配置结束后，再次重启 Linux，就能在<code>lsblk</code> 命令中看到<code>zram0</code>设备了。</p>
<h4 id="将-zram0-设备配置为-swap">将 zram0 设备配置为 Swap<a hidden class="anchor" aria-hidden="true" href="#将-zram0-设备配置为-swap">#</a></h4>
<p>获取到了一个 30G 大小的 ZRAM 设备，接下来需要做的就是将这个设备配置为 Swap，有经验的读者应该已经猜到接下来的操作了：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkswap /dev/zram0
$ sudo swapon /dev/zram0
</code></pre></div><p>是的，将<code>zram0</code>设备配置为 Swap 和将一个普通设备/分区/文件配置为 Swap 的方式是一模一样，但该如何让这一操作开机自动执行呢？</p>
<p>首先想到的自然是使用<code>fstab</code>，但好巧不巧，启用 ZRAM 内核模块使用的<code>modules-load.d</code>也难逃 Systemd 的魔爪：<a href="https://man7.org/linux/man-pages/man5/modules-load.d.5.html">modules-load.d(5) – Linux manual page</a>。既然从一开始就上了 Systemd 的贼船，那就贯彻到底吧！</p>
<p>在 Systemd 的体系下，开机自启的命令可以被注册为一个 Service Unit，我们新建一个文件<code>/usr/lib/systemd/system/zram.service</code>，在其中写入如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /usr/lib/systemd/system/zram.service
<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>ZRAM
BindsTo<span style="color:#f92672">=</span>dev-zram0.device
After<span style="color:#f92672">=</span>dev-zram0.device

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>oneshot
RemainAfterExit<span style="color:#f92672">=</span>true
ExecStartPre<span style="color:#f92672">=</span>/sbin/mkswap /dev/zram0
ExecStart<span style="color:#f92672">=</span>/sbin/swapon -p <span style="color:#ae81ff">2</span> /dev/zram0
ExecStop<span style="color:#f92672">=</span>/sbin/swapoff /dev/zram0

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target
</code></pre></div><p>接下来运行<code>systemctl daemon-reload</code>重载配置文件，再运行<code>systemctl enable zram --now</code>，如果没有出现报错，可以运行<code>swapon -s</code> 查看 Swap 状态，如果看到存在名为<code>/dev/zram0</code>的设备，恭喜你！现在 ZRAM 就已经配置完成并能实现自启动了~</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl daemon-reload
$ sudo systemctl enable zram --now
$ swapon -s
</code></pre></div><blockquote>
<p>里为了帮助读者了解 ZRAM 和 Systemd 的原理，因此采取了全手动的配置方式。如果读者觉得比较麻烦，或有大规模部署的需求，可以使用 <a href="https://github.com/systemd/zram-generator">systemd/zram-generator: Systemd unit generator for zram devices</a>，大部分默认启用 ZRAM 的发行版（如 Fedora）都使用了这一工具，编写配置文件后运行<code>systemctl enable /dev/zram0 --now</code>即可启用 ZRAM。</p>
</blockquote>
<h4 id="配置双层-swap可选">配置双层 Swap（可选）<a hidden class="anchor" aria-hidden="true" href="#配置双层-swap可选">#</a></h4>
<p>上一节我们配置了 ZRAM，并将其设置为了 Swap，但此时 ZRAM 依旧是不生效的。为什么呢？眼尖的读者应该发现了，<code>/swapfile</code>的优先级高于<code>/dev/zram0</code>，这导致当 Linux 需要交换内存时，依旧会优先将页换入<code>/swapfile</code>，而非 ZRAM。</p>
<p>解决这个问题可以通过两种方式：禁用 Swapfile，或者降低 Swapfile 的优先级，这里为了避免 ZRAM 耗尽后出现 OOM 导致服务掉线，我们采取后者，即配置双层 Swap，当高优先级的 ZRAM 耗尽后，会继续使用低优先级的 Swapfile。</p>
<p>我们打开 Swapfile 的配置文件（笔者的配置文件在<code>/etc/fstab</code>中），增加 <code>pri</code>(Priority) 参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/fstab
/swapfile none swap sw,pri<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
</code></pre></div><p>如果使用其他方式配置 Swapfile（如 Systemd），只要保证执行<code>swapon</code>时携带<code>-p</code>参数即可，数字越低，优先级越低。对于 ZRAM 同理，如上文的<code>zram.service</code>中就配置 ZRAM 的优先级为 2。</p>
<p>设置后重启 Linux，再次执行 <code>swapon -s</code> 查看 Swap 状态，保证 ZRAM 优先级高于其他 Swap 优先级即可：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ swapon -s
</code></pre></div><h3 id="zram-监控">ZRAM 监控<a hidden class="anchor" aria-hidden="true" href="#zram-监控">#</a></h3>
<p>启用 ZRAM 后，我们该如何查看 ZRAM 的实际效用，如压缩前后大小，以及压缩率等状态呢？</p>
<p>最直接的办法自然是查看驱动的 <a href="https://github.com/torvalds/linux/blob/df0cc57e057f18e44dac8e6c18aba47ab53202f9/drivers/block/zram/zram_drv.c#L1091">源码</a>，和 <a href="https://github.com/torvalds/linux/blob/v5.16/Documentation/admin-guide/blockdev/zram.rst">文档</a>，可以发现函数<code>mm_stat_show()</code>定义了<code>/sys/block/zram0/mm_stat</code>文件的输出结果，从左到右分别代表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /sys/block/zram0/mm_stat
<span style="color:#75715e"># orig_data_size - 当前压缩前大小 (Byte)</span>
<span style="color:#ae81ff">4096</span>

<span style="color:#75715e"># compr_data_size - 当前压缩后大小 (Byte)</span>
<span style="color:#ae81ff">74</span>

<span style="color:#75715e"># mem_used_total - 当前总内存消耗，包含元数据等 Overhead（Byte）</span>
<span style="color:#ae81ff">12288</span>

<span style="color:#75715e"># mem_limit - 当前最大内存消耗限制（页）</span>
<span style="color:#ae81ff">0</span>

<span style="color:#75715e"># mem_used_max - 历史最高内存用量（页）</span>
<span style="color:#ae81ff">1223118848</span>

<span style="color:#75715e"># same_pages - 当前相同（可被压缩）的页</span>
<span style="color:#ae81ff">0</span>

<span style="color:#75715e"># pages_compacted - 历史从 RAM 压缩到 ZRAM 的页</span>
<span style="color:#ae81ff">50863</span>

<span style="color:#75715e"># huge_pages - 当前无法被压缩的页（巨页）</span>
<span style="color:#ae81ff">0</span>
</code></pre></div><p>该文件适合输出到各种监控软件进行监控，但无论是 Byte 还是页，这些裸数值依旧不便阅读，好在<code>util-linux</code>包提供了一个名为<code>zramctl</code>的工具（和 <code>systemctl</code> 其实是雷锋与雷峰塔的关系），在安装<code>util-linux</code>后执行<code>zramctl</code>，即可获得结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ zramctl
</code></pre></div><p>根据上文<code>mm_stat</code>的输出，可以类推每项数值的含义，或者我们可以找到<code>zramctl</code>的 <a href="https://github.com/util-linux/util-linux/blob/master/sys-utils/zramctl.c#L74">源码</a>，了解每项输出的含义与单位：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">struct</span> colinfo infos[] <span style="color:#f92672">=</span> {
    [COL_NAME]      <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;NAME&#34;</span>,      <span style="color:#ae81ff">0.25</span>, <span style="color:#ae81ff">0</span>, N_(<span style="color:#e6db74">&#34;zram device name&#34;</span>) },
    [COL_DISKSIZE]  <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;DISKSIZE&#34;</span>,     <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;limit on the uncompressed amount of data&#34;</span>) },
    [COL_ORIG_SIZE] <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;DATA&#34;</span>,         <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;uncompressed size of stored data&#34;</span>) },
    [COL_COMP_SIZE] <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;COMPR&#34;</span>,        <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;compressed size of stored data&#34;</span>) },
    [COL_ALGORITHM] <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;ALGORITHM&#34;</span>,    <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">0</span>, N_(<span style="color:#e6db74">&#34;the selected compression algorithm&#34;</span>) },
    [COL_STREAMS]   <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;STREAMS&#34;</span>,      <span style="color:#ae81ff">3</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;number of concurrent compress operations&#34;</span>) },
    [COL_ZEROPAGES] <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;ZERO-PAGES&#34;</span>,   <span style="color:#ae81ff">3</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;empty pages with no allocated memory&#34;</span>) },
    [COL_MEMTOTAL]  <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;TOTAL&#34;</span>,        <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;all memory including allocator fragmentation and metadata overhead&#34;</span>) },
    [COL_MEMLIMIT]  <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;MEM-LIMIT&#34;</span>,    <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;memory limit used to store compressed data&#34;</span>) },
    [COL_MEMUSED]   <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;MEM-USED&#34;</span>,     <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;memory zram have been consumed to store compressed data&#34;</span>) },
    [COL_MIGRATED]  <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;MIGRATED&#34;</span>,     <span style="color:#ae81ff">5</span>, SCOLS_FL_RIGHT, N_(<span style="color:#e6db74">&#34;number of objects migrated by compaction&#34;</span>) },
    [COL_MOUNTPOINT]<span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;MOUNTPOINT&#34;</span>,<span style="color:#ae81ff">0.10</span>, SCOLS_FL_TRUNC, N_(<span style="color:#e6db74">&#34;where the device is mounted&#34;</span>) },
};
</code></pre></div><p>部分未默认输出的数值可以通过<code>zramctl --output-all</code>输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ zramctl --output-all
</code></pre></div><p>这个工具的输出结果混淆了 Byte 和页，混淆了历史最高、累计和当前的数值，且将不设置的参数（如内存限制）显示为 0B，因此输出结果仅作为参考，可读性依旧不高，一般来说只用了解<code>DATA</code>和<code>COMPR</code>字段即可。</p>
<p>结合<code>zramctl</code>和<code>mm_stat</code>的输出，不难发现我们配置的 ZRAM 大小其实是未压缩的大小，而非是压缩后的大小，前面我们提到了一个算法，当 ZRAM 大小为 30GB 且压缩率为 2:1 时，可以获得<code>60G - (30G / 2) + 30G &gt; 75G</code>的可用内存，这就是假设了 30GB 的未压缩数据可以压缩到 15G，占用 15G 物理内存空间，即<code>60G - (30G / 2)</code>，然后再加上 ZRAM 能存储最大的内存数据 30G 计算出来。</p>
<p>计算压缩率的方式为 <code>DATA / COMPR</code>。，以 ElasticSearch 的工作负载为例，默认压缩率为<code>1.1G / 97M = 11.6</code>（如果是<code>4K   74B</code>则是没有负载）。</p>
<h3 id="zram-调优">ZRAM 调优<a hidden class="anchor" aria-hidden="true" href="#zram-调优">#</a></h3>
<p>尽管 ZRAM 的设置非常简单，其依然提供了大量可配置项供用户调整，如果在默认配置 ZRAM 后依旧觉得不满意，或者想要进一步发掘 ZRAM 的潜力，就需要对其进行优化。</p>
<h4 id="选择最适合的压缩算法">选择最适合的压缩算法<a hidden class="anchor" aria-hidden="true" href="#选择最适合的压缩算法">#</a></h4>
<p>ZRAM 目前的默认压缩算法一般是<code>lzo-rle</code>，但其实 ZRAM 支持的压缩算法有很多，我们可以通过 <code>cat /sys/block/zram0/comp_algorithm</code> 获取支持的算法，当前启用的算法被<code>[]</code>括起来：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /sys/block/zram0/comp_algorithm
</code></pre></div><p>压缩是一个时间换空间的操作，也就意味着这些压缩算法并不存在绝对优劣，只存在不同情况下的取舍，有的压缩率高、有的带宽大、有的 CPU 消耗少……在不同的硬件上，不同的选择也会遇到不同的瓶颈，因此只有进行真实的测试，才能帮助选择最适合的压缩算法。</p>
<p>根据工作负载和需求的不同，读者可以选择适合自己的参数，也可以结合上面提到的多级 Swap，将 ZRAM 进一步分层，使用最高效的内存作为高优先级 Swap，压缩率最高的内存作为中低优先级 Swap。</p>
<p>如果测试机和生产环境的架构/硬件存在差异，可以将测试过程中导出的内存拷贝到生产环境，前提是两者运行相同的工作负载，否则测试内存无参考价值。</p>
<h4 id="配置-zram-调优参数">配置 ZRAM 调优参数<a hidden class="anchor" aria-hidden="true" href="#配置-zram-调优参数">#</a></h4>
<p><strong>配置压缩算法，获得最佳压缩率</strong></p>
<p>首先将压缩算法从默认的<code>lzo-rle</code>切换为<code>lz4hc</code>，根据 ZRAM 的文档，只需要将压缩算法写入<code>/sys/block/zram0/comp_algorithm</code>即可，考虑到我们配置<code>/sys/block/zram0/disksize</code>时的操作，我们重新编辑<code>/etc/udev/rules.d/99-zram.rules</code>文件，将其内容修改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/udev/rules.d/99-zram.rules
KERNEL<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;zram0&#34;</span>,ATTR<span style="color:#f92672">{</span>comp_algorithm<span style="color:#f92672">}=</span><span style="color:#e6db74">&#34;lz4hc&#34;</span>,ATTR<span style="color:#f92672">{</span>disksize<span style="color:#f92672">}=</span><span style="color:#e6db74">&#34;30G&#34;</span>,TAG+<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;systemd&#34;</span>
</code></pre></div><p>需要注意的是，必须先指定压缩算法，再指定磁盘大小，无论是在配置文件中还是直接<code>echo</code>参数到<code>/sys/block/zram0</code>设备上，都需要按照文档的顺序进行操作。</p>
<p>重启机器，再次执行<code>cat /sys/block/zram0/comp_algorithm</code>，就会发现当前压缩算法变成了<code>lz4hc</code>。</p>
<p><strong>配置 page-cluster，避免内存带宽和 CPU 资源的浪费</strong></p>
<p>简单来说，<code>page-cluster</code>的作用就是每次从交换设备读取数据时多读 <code>2^n</code> 页，一些块设备或文件系统有簇的概念，读取数据也是按簇读取，假设内存页大小为 4KiB，而每次读取的一簇数据为 32KiB，那么把多读出来的数据也换回内存，就能避免浪费，减少频繁读取磁盘的次数，这一点在 Linux 的文档中也有提到：<a href="https://github.com/torvalds/linux/blob/d0a231f01e5b25bacd23e6edc7c979a18a517b2b/Documentation/admin-guide/sysctl/vm.rst#page-cluster">linux/vm.rst · torvalds/linux</a>。默认的<code>page-cluster</code>大小为 3，即每次会从磁盘读取<code>4K*2^3=32K</code>的数据。</p>
<p>了解了<code>page-cluster</code>的原理后，我们会发现 ZRAM 并不属于传统的块设备，内存控制器默认设计就是按页读取，因此这一适用于磁盘设备的优化，在 ZRAM 场景下却是负优化，反而会导致过早触及内存带宽瓶颈和 CPU 解压缩瓶颈而导致性能下降，这也就可以解释为什么上面的表格中随着<code>page-cluster</code>的提升，吞吐量同样提升，而 IOPS 却变得更小，如果内存带宽和 CPU 解压缩不存在瓶颈，那么 IOPS 理论上应该保持不变。</p>
<p>考虑到无论是理论上，还是实际测试，<code>page-cluster</code>都是一个多余的优化，我们可以直接将其设置为 0。直接编辑<code>/etc/sysctl.d/99-sysctl.conf</code>，在结尾新增一行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/sysctl.d/99-sysctl.conf
vm.page-cluster<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</code></pre></div><p>运行<code>sysctl -p</code>，即可让该设置生效，无需重启。</p>
<h2 id="oom-killer">OOM Killer<a hidden class="anchor" aria-hidden="true" href="#oom-killer">#</a></h2>
<h3 id="sysrqhttpbloglujun9972winblog20180822linuxe4b88be79a84sysrqe994aeindexhtml"><a href="http://blog.lujun9972.win/blog/2018/08/22/linux%E4%B8%8B%E7%9A%84sysrq%E9%94%AE/index.html">SysRq</a><a hidden class="anchor" aria-hidden="true" href="#sysrqhttpbloglujun9972winblog20180822linuxe4b88be79a84sysrqe994aeindexhtml">#</a></h3>
<p><a href="https://en.wikipedia.org/wiki/Magic_SysRq_key">SysRq</a> （<a href="https://wiki.archlinux.org/title/keyboard_shortcuts#Kernel_(SysRq)">arch wiki</a>）键在 QWERT 键盘上与 <code>PrtSc</code> 同键,通过按下 <code>ALT+SysRq+&lt;command key&gt;</code> 可以直接向linux kernel发送预设的系统操作指令。 这套组合键提供了一系列在系统崩溃时常用到的功能，比如同步数据、杀进程、卸载文件系统，甚至系统重启.</p>
<h4 id="启用sysrq">启用SysRq<a hidden class="anchor" aria-hidden="true" href="#启用sysrq">#</a></h4>
<h5 id="对内核的要求">对内核的要求<a hidden class="anchor" aria-hidden="true" href="#对内核的要求">#</a></h5>
<p>启用 <code>SysRq</code> 的前提是在linux kernel编译时启用了 <code>CONFIG_MAGIC_SYSRQ</code> 选项.</p>
<p>在目前主流的发行版linux中都启用了该选项，但若你是自己编译的内核，则有必要搜索一下内核的config文件了，确保里面有一句</p>
<pre tabindex="0"><code>CONFIG_MAGIC_SYSRQ=y
</code></pre><p>内核中还有一个与SysRq相关的配置项:</p>
<pre tabindex="0"><code>CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE=0x01b6
</code></pre><p>这个配置项指定了默认SysRq的值，这个值表示kernel会对哪些功能产生反应。</p>
<h5 id="查看当前sysrq的值">查看当前SysRq的值<a hidden class="anchor" aria-hidden="true" href="#查看当前sysrq的值">#</a></h5>
<p>我们可以通过查看 <code>/proc/sys/kernel/sysrq</code> 的值来判断Kernel会对哪些功能产生反应.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /proc/sys/kernel/sysrq
<span style="color:#ae81ff">16</span>
</code></pre></div><p>这里你会看到一个数字，这个数字可以转换成一个9位比特的形式，其中每一位的比特都有一个含义如下:</p>
<table>
<thead>
<tr>
<th>数字</th>
<th>位数</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>完全禁用sysrq</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>允许所有的sysrq功能</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>允许控制终端日志级别</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>允许控制键盘输入类型(SAK,unraw)</td>
</tr>
<tr>
<td>8</td>
<td>4</td>
<td>允许调试进程dump</td>
</tr>
<tr>
<td>16</td>
<td>5</td>
<td>允许执行sync命令</td>
</tr>
<tr>
<td>32</td>
<td>6</td>
<td>允许重新挂载文件系统为之读</td>
</tr>
<tr>
<td>64</td>
<td>7</td>
<td>允许发送信号给进程(term,kill,oom-kill)</td>
</tr>
<tr>
<td>128</td>
<td>8</td>
<td>允许重启/关机</td>
</tr>
<tr>
<td>256</td>
<td>9</td>
<td>允许调整实时任务的优先级</td>
</tr>
</tbody>
</table>
<p>因此，我这里的 <code>16</code> 表示允许通过 SysRq 来同步数据到磁盘中去， 而数字 <code>130</code> 转换成二进制就是 <code>010000010</code>,根据表中的对应关系很容易看出允许重启/关机以及调整终端日志级别。</p>
<h5 id="更改sysrq的值">更改SysRq的值<a hidden class="anchor" aria-hidden="true" href="#更改sysrq的值">#</a></h5>
<p>如果只是希望临时更改 <code>SysRq</code> 的值，那么很简单，只需要将新的值写入到 <code>/proc/sys/kernel/sysrq</code> 中去</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;1&#34;</span> |sudo tee /proc/sys/kernel/sysrq
</code></pre></div><p>或者通过 <code>sysctl</code> 来进行设置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sysctl -w kernel.sysrq<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</code></pre></div><p>如果需要每次启动时都自动修改SysRq的值，则需要修改配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;kernel.sysrq = 1&#34;</span> | sudo tee -a /etc/sysctl.d/99-sysctl.conf
</code></pre></div><h4 id="使用sysrq">使用SysRq<a hidden class="anchor" aria-hidden="true" href="#使用sysrq">#</a></h4>
<p>使用SysRq有两种方式:</p>
<p>一种是直接通过键盘 <code>Alt+SysRq+&lt;command key&gt;</code>(部分笔记本上是<code>Alt+Fn+PrtSrc+&lt;command key&gt;</code>)来出发，</p>
<p>还有一种是直接通过 <code>/proc/sysrq-trigger</code> 接口来完成.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo “ b ” | sudo tee /proc/sysrq-trigger
</code></pre></div><p>其中，这里每个 <code>command-key</code> 都对应一种kernel的行为，而且需要说明的是，不同种类的键盘上，相同kernel行为对应的 <code>command-key</code> 居然是不同的！</p>
<p>下面表格就是各个kernel行为对应的 <code>command-key</code> 的说明:</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>QWERTY</th>
<th>Dvorak</th>
<th>AZERTY</th>
<th>Colemak</th>
</tr>
</thead>
<tbody>
<tr>
<td>设置控制台日志级别(console_loglevel),它决定了哪些kernel信息会被输出到控制台上</td>
<td>0 - 9</td>
<td>0 - 9</td>
<td>0 - 9(without ⇧ Shift)</td>
<td>0 - 9</td>
</tr>
<tr>
<td>不同步并卸载文件系统，立即重启系统</td>
<td>b</td>
<td>x</td>
<td>b</td>
<td>b</td>
</tr>
<tr>
<td>让系统立即崩溃. 在配置得当的情况下会产生一个 crashdump</td>
<td>c</td>
<td>j</td>
<td>c</td>
<td>c</td>
</tr>
<tr>
<td>显示所有排它锁 (需要内核启用CONFIG_LOCKDEP选项)</td>
<td>d</td>
<td>e</td>
<td>d</td>
<td>s</td>
</tr>
<tr>
<td>发送 SIGTERM 信号到除了 init (PID 1) 外的所有进程</td>
<td>e</td>
<td>.</td>
<td>e</td>
<td>f</td>
</tr>
<tr>
<td>触发 oom_kill, 会随机杀掉一个进程以缓解 OOM</td>
<td>f</td>
<td>u</td>
<td>f</td>
<td>t</td>
</tr>
<tr>
<td>当进入内核模式时，切换到内核的 framebuffer 控制台. 若有内核调试器 kdb，则进入该调试器中</td>
<td>g</td>
<td>i</td>
<td>g</td>
<td>d</td>
</tr>
<tr>
<td>在控制台上输出一个简短的帮助信息. (其他不能识别的key也会输出帮助信息)</td>
<td>h</td>
<td>d</td>
<td>h</td>
<td>h</td>
</tr>
<tr>
<td>发送 SIGKILL 信号到除了 init (PID 1) 外的所有进程</td>
<td>i</td>
<td>c</td>
<td>i</td>
<td>u</td>
</tr>
<tr>
<td>强制通过 FIFREEZE ioctl 冻结文件系统.</td>
<td>j</td>
<td>h</td>
<td>j</td>
<td>n</td>
</tr>
<tr>
<td>杀掉当前虚拟控制台中的所有进程 (包括 X 和 SVGALib 程序).</td>
<td>k</td>
<td>t</td>
<td>k</td>
<td>e</td>
</tr>
<tr>
<td>列出所有活动CPU上的 stack backtrace</td>
<td>l</td>
<td>n</td>
<td>l</td>
<td>i</td>
</tr>
<tr>
<td>在控制台上输出当前内存信息</td>
<td>m</td>
<td>m</td>
<td>,</td>
<td>m</td>
</tr>
<tr>
<td>重置所有高优先级和实时任务的 nice 级别</td>
<td>n</td>
<td>b</td>
<td>n</td>
<td>k</td>
</tr>
<tr>
<td>关闭系统</td>
<td>o</td>
<td>r</td>
<td>o</td>
<td>y</td>
</tr>
<tr>
<td>在控制台输出当前寄存器和标志位信息</td>
<td>p</td>
<td>l</td>
<td>p</td>
<td>;</td>
</tr>
<tr>
<td>Display all active high-resolution timers and clock sources.</td>
<td>q</td>
<td>'</td>
<td>a</td>
<td>q</td>
</tr>
<tr>
<td>将键盘从 raw 模式(常被诸如X11和SVGALib这样的程序所使用)切换到 XLATE模式</td>
<td>r</td>
<td>p</td>
<td>r</td>
<td>p</td>
</tr>
<tr>
<td>同步所有已挂载的文件系统</td>
<td>s</td>
<td>o</td>
<td>s</td>
<td>r</td>
</tr>
<tr>
<td>在控制台输出当前任务列表</td>
<td>t</td>
<td>y</td>
<td>t</td>
<td>g</td>
</tr>
<tr>
<td>重新以只读模式重新挂载所有已挂载的文件系统</td>
<td>u</td>
<td>g</td>
<td>u</td>
<td>l</td>
</tr>
<tr>
<td>强制恢复 framebuffer console. 若为ARM处理器,则会导致 ETM buffer dump.</td>
<td>v</td>
<td>k</td>
<td>v</td>
<td>v</td>
</tr>
<tr>
<td>显示所有阻塞状态(状态为D)的任务</td>
<td>w</td>
<td>,</td>
<td>z</td>
<td>w</td>
</tr>
<tr>
<td>Used by xmon interface on PPC/PowerPC platforms.</td>
<td>x</td>
<td>q</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>显示全局的CPU寄存器内容 (仅对SPARC-64平台有效)</td>
<td>y</td>
<td>f</td>
<td>y</td>
<td>j</td>
</tr>
<tr>
<td>Dump the ftrace buffer</td>
<td>z</td>
<td>;</td>
<td>w</td>
<td>z</td>
</tr>
<tr>
<td>输出一份简单的系统支持SysRq的键列表</td>
<td>space</td>
<td>space</td>
<td>space</td>
<td>space</td>
</tr>
</tbody>
</table>
<h5 id="常见的几种功能键组合">常见的几种功能键组合<a hidden class="anchor" aria-hidden="true" href="#常见的几种功能键组合">#</a></h5>
<p>下面列出几个常见的功能键组合:</p>
<p><strong>R-E-I-S-U-B:安全重启系统</strong></p>
<p>这套组合键大致相当于reboot命令：</p>
<ul>
<li>unRaw – 把键盘设置为 XLATE 模式，使按键可以穿透 x server 捕捉传递给内核</li>
<li>tErminate – 向除 init 外进程发送 SIGTERM 信号，让其自行结束. 这一步推荐等待30秒让进程有足够的时间进行收尾的嗯做。</li>
<li>kIll - 向除 init 以外所有进程发送 SIGKILL 信号，强制结束进程. 这一步推荐等待10秒，保证所有进程都退出了</li>
<li>Sync – 同步缓冲区数据到硬盘，避免数据丢失. 这一步在能看到输出的情况下等到&quot;Emergency Sync complete&quot; 后再做后续动作，否则推荐等待10秒</li>
<li>Unmount – 将所有已经挂载的文件系统 重新挂载为只读. 该操作通常也有一定延时,请等到&quot;Emergency Remount complete&quot; 出现过后再进行后续操作,否则推荐等待10秒</li>
<li>reBoot - 立即重启计算机</li>
</ul>
<p><strong>恢复系统挂起</strong></p>
<p>若仅仅是因为资源消耗过量引起系统挂起就重启系统显然是不好的，我们可以尝试通过回收一些资源的方式来回复系统挂起。</p>
<p>SysRq中用来结束进程的command-key包括 E-I-K-F，其中:</p>
<ul>
<li>E 和 I 太凶残，它会杀掉除了 init 外的所有进程,属于杀敌一千自损八百的操作。因此在一般情况下不会轻易使用</li>
<li>F 则是利用 OOM-Kiler选择一个进程来结束,对于由于内存不足引起的挂起比较有效，但有时候OOMKiller也可能会误判杀掉一些长期运行的后台程序。</li>
<li>K 杀掉与当前控制台有关的进程组，比较推荐用这种方法回复系统</li>
</ul>
<p>此外，若系统挂起是由于实时任务消耗太多CPU引起的，则可以通过 <code>N</code> 来降低实时任务运行的优先级来缓解挂起症状。</p>
<p><strong>获取系统信息</strong></p>
<p>SysRq还提供了几个用于获取系统信息的commandkey，在恢复系统挂起前推荐执行这些commandkey，以记录下当前系统状态。</p>
<ul>
<li>
<p>M</p>
<p>打印内存使用信息</p>
</li>
<li>
<p>W</p>
<p>打印CPU寄存器上下文和程序调用栈回溯信息</p>
</li>
<li>
<p>P</p>
<p>打印CPU寄存器信息,比如正在执行的进程名，运行函数，寄存器上下文，以及程序的调用栈回溯等</p>
</li>
<li>
<p>T</p>
<p>打印进程列表,各进程的名称，进程 PID，父 PID 兄弟 PID 以及进程运行状态等相关信息</p>
</li>
</ul>
<h4 id="查看sysrq的输出信息">查看SysRq的输出信息<a hidden class="anchor" aria-hidden="true" href="#查看sysrq的输出信息">#</a></h4>
<p>从上面的列表中我们可以看到，使用SysRq能够输出大量的信息。这些信息，默认会输出到syslog中. 同时，若设置的 <code>console_loglevel(0-9)</code> 大于 <code>default_message_loglevel</code> 则输出也会输出到本地控制台终端上去。 另外，若设置的 <code>console_loglevel</code> 大于 <code>default_message_loglvel</code> 则输出还会通过netconsole输出到远程机器上去。</p>
<p>总体来说，syslog中记录的日志应该是最完整的，然而由于负责记录日志的 <code>syslogd</code> 本身是一个用户进程，在某些情况下可能会被杀掉，从而导致日志记录不下来。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34; &#34;</span> | sudo tee /proc/sysrq-trigger
$ sudo dmesg | tail -n <span style="color:#ae81ff">1</span>
<span style="color:#f92672">[</span>17899.255261<span style="color:#f92672">]</span> sysrq: SysRq : HELP : loglevel<span style="color:#f92672">(</span>0-9<span style="color:#f92672">)</span> reboot<span style="color:#f92672">(</span>b<span style="color:#f92672">)</span> crash<span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> terminate-all-tasks<span style="color:#f92672">(</span>e<span style="color:#f92672">)</span> memory-full-oom-kill<span style="color:#f92672">(</span>f<span style="color:#f92672">)</span> kill-all-tasks<span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> thaw-filesystems<span style="color:#f92672">(</span>j<span style="color:#f92672">)</span> sak<span style="color:#f92672">(</span>k<span style="color:#f92672">)</span> show-backtrace-all-active-cpus<span style="color:#f92672">(</span>l<span style="color:#f92672">)</span> show-memory-usage<span style="color:#f92672">(</span>m<span style="color:#f92672">)</span> nice-all-RT-tasks<span style="color:#f92672">(</span>n<span style="color:#f92672">)</span> poweroff<span style="color:#f92672">(</span>o<span style="color:#f92672">)</span> show-registers<span style="color:#f92672">(</span>p<span style="color:#f92672">)</span> show-all-timers<span style="color:#f92672">(</span>q<span style="color:#f92672">)</span> unraw<span style="color:#f92672">(</span>r<span style="color:#f92672">)</span> sync<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> show-task-states<span style="color:#f92672">(</span>t<span style="color:#f92672">)</span> unmount<span style="color:#f92672">(</span>u<span style="color:#f92672">)</span> force-fb<span style="color:#f92672">(</span>V<span style="color:#f92672">)</span> show-blocked-tasks<span style="color:#f92672">(</span>w<span style="color:#f92672">)</span> dump-ftrace-buffer<span style="color:#f92672">(</span>z<span style="color:#f92672">)</span> 
</code></pre></div><h3 id="systemd-oomdservicehttpsman7orglinuxman-pagesman8systemd-oomd8html"><a href="https://man7.org/linux/man-pages/man8/systemd-oomd.8.html">systemd-oomd.service</a><a hidden class="anchor" aria-hidden="true" href="#systemd-oomdservicehttpsman7orglinuxman-pagesman8systemd-oomd8html">#</a></h3>
<p><a href="https://www.cnbeta.com/articles/tech/1069109.htm"><strong>简介</strong></a></p>
<p>systemd-oomd是为了改善Linux的内存不足/内存压力行为而开发的，基于Facebook的内存不足守护程序代码，已经扩展到不仅适用于Linux服务器，也适用于桌面系统。systemd-OOMD可以监测资源争用情况，当内存/SWAP压力超过预定义的阈值时，可以杀死选定的进程。</p>
<p>systemd-oomd守护进程会对启用了OOMD的cgroups进行监视，并根据内存压力或交换使用情况进行消杀。systemd-oomd行为可以通过新的oomd.conf配置文件进行配置。这个守护进程只有在设置了EnableOomdKill的情况下才会杀死组，因为显然不想因为内存使用情况而随机杀掉进程。</p>
<h2 id="endeavouros">EndeavourOS<a hidden class="anchor" aria-hidden="true" href="#endeavouros">#</a></h2>
<h3 id="usage">Usage<a hidden class="anchor" aria-hidden="true" href="#usage">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-pinyin-zhwiki android-tools aria2 goldendict translate-shell kvantum google-chrome okular git xmind ttf-sarasa-gothic variety audacious
</code></pre></div><p>fcitx5 详细看前面。</p>
<h4 id="kde-connecthttpsuserbasekdeorgkdeconnect"><a href="https://userbase.kde.org/KDEConnect">KDE Connect</a><a hidden class="anchor" aria-hidden="true" href="#kde-connecthttpsuserbasekdeorgkdeconnect">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S kdeconnect sshfs
</code></pre></div><p>添加如下两个到 startup</p>
<ul>
<li>/usr/lib/kdeconnectd</li>
<li>/usr/bin/kdeconnect-indicator</li>
</ul>
<p>只有 KDE Connect 在连接的状态下，indicator 才会显示。</p>
<h4 id="zfs">ZFS<a hidden class="anchor" aria-hidden="true" href="#zfs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S zfs-dkms
$ sudo modprobe zfs
$ echo zfs | sudo tee /etc/modules-load.d/zfs.conf
</code></pre></div><h4 id="qemu">Qemu<a hidden class="anchor" aria-hidden="true" href="#qemu">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S qemu-base samba tigervnc
</code></pre></div><h4 id="plocatehttpsplocatesessenet"><a href="https://plocate.sesse.net/">plocate</a><a hidden class="anchor" aria-hidden="true" href="#plocatehttpsplocatesessenet">#</a></h4>
<p>依云推荐，a much faster locate</p>
<h4 id="zstdhttpsfacebookgithubiozstd"><a href="https://facebook.github.io/zstd/">Zstd</a><a hidden class="anchor" aria-hidden="true" href="#zstdhttpsfacebookgithubiozstd">#</a></h4>
<ul>
<li>arch 系用 zstd 打包</li>
<li><a href="https://tech.meituan.com/2021/01/07/pack-gzip-zstd-lz4.html">速度与压缩比如何兼得？压缩算法在构建部署中的优化</a>：时间耗时的顺序为 Pzstd &lt; ISA-L &lt; Pigz &lt; LZ4 &lt; Zstd &lt; Brotli &lt; Gzip （排名越靠前越好）</li>
<li><a href="https://segmentfault.com/a/1190000039300144">参数命令</a></li>
</ul>
<h4 id="redshifthttpszoctangithubio20180415e4bdbfe794a8e8bf87e7a88bredshift20e889b2e6b8a9e68ea7e588b6"><a href="https://zoctan.github.io/2018/04/15/%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B/Redshift%20%E8%89%B2%E6%B8%A9%E6%8E%A7%E5%88%B6/">Redshift</a><a hidden class="anchor" aria-hidden="true" href="#redshifthttpszoctangithubio20180415e4bdbfe794a8e8bf87e7a88bredshift20e889b2e6b8a9e68ea7e588b6">#</a></h4>
<p><a href="https://wiki.archlinux.org/title/Redshift#Installation">安装</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S redshift-minimal
</code></pre></div><p>在  <a href="http://www.geonames.org/">GeoNames.org</a> 找到经纬度并测试：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ redshift -l 30.58333:114.26667 <span style="color:#75715e"># WuHan</span>
</code></pre></div><p>参考 <a href="https://superuser.com/questions/647464/how-to-get-the-display-number-i-was-assigned-by-x">How to get the display number I was assigned by X</a> 获得 DISPLAY Number：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo $DISPLAY <span style="color:#75715e"># OR</span>
$ cat /proc/$$/environ | tr <span style="color:#e6db74">&#39;\0&#39;</span> <span style="color:#e6db74">&#39;\n&#39;</span> | grep <span style="color:#e6db74">&#39;^DISPLAY=&#39;</span>
</code></pre></div><p>参考 <a href="https://bbs.archlinux.org/viewtopic.php?pid=1391495#p1391495">Redshift fails to run as systemd unit, works in terminal</a> 建立 <code>~/.config/systemd/user/redshift.service</code> 文件（<a href="https://github.com/jonls/redshift/tree/master/data/systemd">官方给的模板</a>不行）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Unit]</span>
<span style="color:#a6e22e">Description</span><span style="color:#f92672">=</span><span style="color:#e6db74">Redshift display colour temperature adjustment</span>
<span style="color:#a6e22e">Documentation</span><span style="color:#f92672">=</span><span style="color:#e6db74">http://jonls.dk/redshift/</span>
<span style="color:#a6e22e">After</span><span style="color:#f92672">=</span><span style="color:#e6db74">display-manager.service</span>

<span style="color:#66d9ef">[Service]</span>
<span style="color:#a6e22e">Environment</span><span style="color:#f92672">=</span><span style="color:#e6db74">DISPLAY=:0</span>
<span style="color:#a6e22e">ExecStart</span><span style="color:#f92672">=</span><span style="color:#e6db74">/usr/bin/redshift -l 30.58333:114.26667</span>
<span style="color:#a6e22e">Restart</span><span style="color:#f92672">=</span><span style="color:#e6db74">always</span>
<span style="color:#a6e22e">RestartSec</span><span style="color:#f92672">=</span><span style="color:#e6db74">20</span>

<span style="color:#66d9ef">[Install]</span>
<span style="color:#a6e22e">WantedBy</span><span style="color:#f92672">=</span><span style="color:#e6db74">default.target</span>
</code></pre></div><p>服务操作</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl --user start redshift.service
$ systemctl --user enable redshift.service
$ journalctl --user -u redshift.service -f
</code></pre></div><h4 id="linux-动态桌面httpswwwjianshucompd6ff45e983ce"><a href="https://www.jianshu.com/p/d6ff45e983ce">Linux 动态桌面</a><a hidden class="anchor" aria-hidden="true" href="#linux-动态桌面httpswwwjianshucompd6ff45e983ce">#</a></h4>
<h5 id="xwinwrap--mplayer">xwinwrap + mplayer<a hidden class="anchor" aria-hidden="true" href="#xwinwrap--mplayer">#</a></h5>
<p>这个软件分为“软件前端+播放器+软件后端”三大部分，后端就是 xwinwrap；前端有无数个版本，就算不装前端界面也可以用；播放器调用的是 mplayer 播放器。</p>
<p>没装前端界面：</p>
<pre tabindex="0"><code>xwinwrap -ni -o 1.0 -fs -s -st -sp -b -nf -- mplayer -wid WID -quiet -nosound -loop 0 /视频/路径/文件.mov
</code></pre><h5 id="其他项目">其他项目<a hidden class="anchor" aria-hidden="true" href="#其他项目">#</a></h5>
<ul>
<li>
<p><a href="https://github.com/WuSiYu/PlasmaVideoWallpaper">PlasmaVideoWallpaper</a> &amp; <a href="https://github.com/halverneus/org.kde.video">org.kde.video</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S qt-gstreamer gst-libav
</code></pre></div></li>
<li>
<p>VLC</p>
<pre tabindex="0"><code>cvlc --video-wallpaper --no-audio /你的/路径/视频.mp4
</code></pre><p>当你玩了几秒，你就会发现，这根本就是个播放器全屏然后置底而已，切换窗口就暴露了。</p>
</li>
</ul>
<h4 id="fontconfig">FontConfig<a hidden class="anchor" aria-hidden="true" href="#fontconfig">#</a></h4>
<h5 id="常用命令">常用命令<a hidden class="anchor" aria-hidden="true" href="#常用命令">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ FC_DEBUG<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> google-chrome-stable <span style="color:#75715e"># 看 FcConfigSubstitute donePattern 部分，这就是实际作用的字体</span>
$ fc-match sans <span style="color:#75715e"># 看请求 sans 字体实际返回的是什么字体 </span>
$ pacman -Qqo /usr/share/fonts <span style="color:#75715e"># 查看安装了哪些字体</span>
$ fc-list <span style="color:#75715e"># 列出所有字体</span>
</code></pre></div><h5 id="选字体">选字体<a hidden class="anchor" aria-hidden="true" href="#选字体">#</a></h5>
<p>西文要求必须可以清晰区分&quot;1lI&quot;和&quot;O0o&quot;</p>
<ul>
<li>
<p>西文等宽字体：</p>
<ul>
<li>Monaco： <code>ttf-monaco</code></li>
<li>Hack：<code>ttf-hack</code></li>
<li>Migu 1M： <code>ttf-migu</code> 需屏蔽非西文字符</li>
</ul>
</li>
<li>
<p>西文无衬线字体</p>
<ul>
<li>Noto Sans：<code>noto-fonts</code></li>
</ul>
</li>
<li>
<p>西文有衬线字体</p>
<ul>
<li>Noto Serif：<code>noto-fonts</code></li>
<li>Tinos Nerd Font：<code>nerd-fonts-tinos</code></li>
</ul>
</li>
<li>
<p>中文黑体(无衬线)</p>
<ul>
<li>WenQuanYi Zen Hei：<code>wqy-zenhei</code></li>
<li>WenQuanYi Micro Hei： <code>wqy-microhei</code></li>
<li>HarmonyOS Sans SC：<code>harmonyos-sans-git</code></li>
</ul>
</li>
<li>
<p>中文宋体(有衬线)、中文仿宋(有衬线)、中文楷体(书法)</p>
<ul>
<li>Adobe Song Std：<code>ttf-adobe-song</code></li>
<li>AdobeFangsongStd：<code>ttf-adobe-fangsong</code></li>
<li>AdobeKaitiStd：<code>ttf-adobe-kaiti</code></li>
</ul>
</li>
<li>
<p>CJK 异形字</p>
<ul>
<li>Noto Sans CJK SC： <code>noto-fonts-cjk</code></li>
</ul>
</li>
<li>
<p>符号表情</p>
<ul>
<li>Noto Color Emoji： <code>noto-fonts-emoji</code></li>
<li>Twemoji： <code>ttf-twemoji</code></li>
<li>Symbols Nerd Font： <code>ttf-nerd-fonts-symbols</code></li>
</ul>
</li>
</ul>
<h5 id="配置-fontsconf">配置 fonts.conf<a hidden class="anchor" aria-hidden="true" href="#配置-fontsconf">#</a></h5>
<p>以 <a href="http://www.jinbuguo.com/gui/linux_fontconfig.html">Linux字体美化实战(Fontconfig配置)</a>及<a href="http://www.jinbuguo.com/gui/fonts.conf.xml">fonts.conf</a> 为蓝本，参考了如下部分配置文件：</p>
<ol>
<li>双猫CC 字体顺序与异形字设置：<a href="https://catcat.cc/post/2021-03-07/">用 fontconfig 治理 Linux 中的字体</a> <a href="https://github.com/rydesun/dotfiles/tree/master/.config/fontconfig/conf.d">dotfiles</a> <a href="https://catcat.cc/raw/fontconfig.html#%E5%BC%82%E4%BD%93%E5%AD%97">测试异形字（在firefox上）</a></li>
<li>喵&rsquo;s StackHarbor的 Noto Color Emoji 设置：<a href="https://sh.alynx.one/posts/Fontconfig-NotoColorEmoji-Antialias/">Fontconfig 和 Noto Color Emoji 和抗锯齿</a> <a href="https://sh.alynx.one/posts/Fontconfig-NotoColorEmoji-Antialias/local.conf">local.conf</a></li>
<li>Github 仓库改版：<a href="https://github.com/loaden/best-fonts/blob/master/.config/fontconfig/fonts.conf">best-fonts</a></li>
</ol>
<p>双猫CC 字体显示效果通过 xsettingsd 设置的，我偏向于统一使用 fontconfig 设置。</p>
<p>基本思路只有一个，设置默认字体为通用字体族名。设置完这个记得把所有软件的自定义字体设置里面无衬线设置为 <code>sans-serif</code>，有衬线设置为 <code>serif</code>，等宽设置为 <code>monospace</code>，这样才会遵守这里的回退顺序。</p>
<p>建立 <code>~/.config/fontconfig/fonts.conf</code> 并添加如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE fontconfig SYSTEM &#34;fonts.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;fontconfig&gt;</span>

<span style="color:#75715e">&lt;!-- ========================== 第三部分 扫描阶段 =================================== --&gt;</span>

<span style="color:#75715e">&lt;!-- 规范化已安装核心字体的属性(西文字族名改为类名，中文字族名改为&#34;zhXXX&#34;) --&gt;</span>
<span style="color:#75715e">&lt;!-- En Mono --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Monaco<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Monospace<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>en<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- En Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Noto Sans<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Sans<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>en<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- En Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Noto Serif<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Serif<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>en<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- ZH Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>WenQuanYi Zen Hei<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zhHei<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- ZH Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Adobe Song Std<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>zhSong<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;weight&#34;</span><span style="color:#f92672">&gt;&lt;int&gt;</span>80<span style="color:#f92672">&lt;/int&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Adobe Fangsong Std<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>zhFangSong<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Adobe Kaiti Std<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>zhKai<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- ZH Mono --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>WenQuanYi Zen Hei Mono<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zhMono<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- Emoji --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Noto Color Emoji<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zzFailBack<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>zzSymbol<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;familylang&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>en<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>en<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>none<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- CJK Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#75715e">&lt;!-- postscriptname 就是字体文件名 --&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;postscriptname&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>NotoSansCJK-Regular<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zzFailBack<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>zzSnasCJK<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;style&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Regular<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- CJK Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#75715e">&lt;!-- postscriptname 就是字体文件名 --&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;postscriptname&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>NotoSerifCJK-Regular<span style="color:#f92672">&lt;/string&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>zzFailBack<span style="color:#f92672">&lt;/string&gt;&lt;string&gt;</span>zzSerifCJK<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;style&#34;</span><span style="color:#f92672">&gt;&lt;string&gt;</span>Regular<span style="color:#f92672">&lt;/string&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;&lt;langset&gt;&lt;string&gt;</span>zh-cn<span style="color:#f92672">&lt;/string&gt;&lt;/langset&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ========================== 第四部分 匹配阶段 =================================== --&gt;</span>

<span style="color:#75715e">&lt;!-- 第一步，替换所有未安装的常见字体：西文替换为对应的字体类，中文替换为&#34;西文字体类+zhXXX&#34;，保持原有绑定不变 --&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Consolas<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Courier<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Courier New<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Fixedsys<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Console<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Terminal<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Sans Typewriter<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Andale Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Menlo<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Monaco<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Andale Mono WT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Biwidth<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bitstream Vera Sans Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Cousine<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>DejaVu Sans Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Droid Sans Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Fira Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Fixed<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>FreeMono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Inconsolata<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Liberation Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Luxi Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Nimbus Mono L<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Code Pro<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Terminus<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Ubuntu Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Unibit<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Unifont<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>sans serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>sans-serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Arial<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Arial Black<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Calibri<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Candara<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Century Gothic<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Copperplate Gothic<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Corbel<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Franklin Gothic Medium<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Impact<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Sans Unicode<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Microsoft Sans Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>MS Sans Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>News Gothic MT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Segoe<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Segoe UI<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Tahoma<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Trebuchet MS<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Verdana<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Arial Narrow<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Arial Unicode MS<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Franklin Gothic Bold<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Franklin Gothic Heavy<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Gill Sans MT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Haettenschweiler<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Tw Cen MT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Avenir<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Avenir Next<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Avenir Next Condensed<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Charcoal<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Chicago<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Futura<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Geneva<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Gill Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Helvetica<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Helvetica Neue<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Grande<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Optima<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Thonburi<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Andika<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Akzidenz-Grotesk<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Arev Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Arimo<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bitstream Vera Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Cantarell<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Carlito<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>DejaVu Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>DejaVu Sans Condensed<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Droid Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Droid Sans Fallback<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Fira Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>FreeSans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Frutiger<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Frutiger Linotype<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Gadget<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Gotham<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Liberation Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Liberation Sans Narrow<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Linux Biolinum<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Luxi Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Myriad<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Myriad Pro<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Nimbus Sans L<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans UI<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Open Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Roboto<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Roboto Condensed<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Sans Pro<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Ubuntu<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Ubuntu Condensed<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Univers<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Book Antiqua<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Calisto MT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Cambria<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Constantia<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Gabriola<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Georgia<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>MS Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Palatino Linotype<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka Banner<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka Display<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka Heading<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka Small<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka Subheading<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Sitka Text<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Times New Roman<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Baskerville Old Face<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bell MT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bodoni MT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bookman Old Style<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Californian FB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Centaur<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Century<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Century Schoolbook<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Cooper Black<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Elephant<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Garamond<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Goudy Old Style<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>High Tower Text<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Bright<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lucida Fax<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Perpetua<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Rockwell<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Baskerville<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Big Caslon<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Didot<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Hoefler Text<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>New York<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Palatino<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Times<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bitstream Charter<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bitstream CyberBase<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bitstream Cyberbit<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Bitstream Vera Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Century Schoolbook L<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Charis SIL<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Code2000<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Code2001<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>DejaVu Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>DejaVu Serif Condensed<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Droid Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>FreeSerif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Gentium<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Junicode<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Liberation Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Linux Libertine<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Luxi Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>New Athena Unicode<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Nimbus Roman No9 L<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Serif<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Old Standard TT<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Serif Pro<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Tinos<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Utopia<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Han Sans<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Han Sans CN<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Han Sans SC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Han Sans TC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Source Han Sans TWHK<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>思源黑体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>思源黑體<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>思源黑体 CN<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>思源黑體 TWHK<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans CJK<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans CJK Simplified Chinese<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans CJK Traditional Chinese<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans S Chinese<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Noto Sans T Chinese<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Hiragino Sans GB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>冬青黑體簡體中文<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>冬青黑体简体中文<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe Heiti Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe 黑体 Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe Fan Heiti Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe 繁黑體 Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Hei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>LiHei Pro<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>STHeiti<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>SimHei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>黑体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Heiti TC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>黑體-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>黑体-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Heiti SC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>黑體-簡<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>黑体-简<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>STXihei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>华文细黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lantinghei SC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>蘭亭黑-簡<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>兰亭黑-简<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Lantinghei TC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>蘭亭黑-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>兰亭黑-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Microsoft JhengHei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Microsoft JhengHei UI<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>微軟正黑體<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Microsoft YaHei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Microsoft YaHei UI<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>微软雅黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>WenQuanYi Bitmap Song<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>WenQuanYi Zen Hei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驛微米黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驿微米黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>WenQuanYi Zen Hei Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驛等寬微米黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驿等宽微米黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>WenQuanYi Zen Hei<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驛正黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驿正黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>WenQuanYi Zen Hei Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驛等寬正黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驿等宽正黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>WenQuanYi Zen Hei Sharp<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驛點陣正黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文泉驿点阵正黑<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Sans<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhHei<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe Song Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe 宋体 Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe Ming Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe 明體 Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UMing CN<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UMing HK<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UMing TW<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UMing TW MBE<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Apple LiSung<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>GB18030 Bitmap<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>LiSong Pro<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Ming(for ISO10646)<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>STSong<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>华文宋体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>STZhongsong<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>华文中宋<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>SimSun<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>宋体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>NSimSun<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>新宋体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>SimSun-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>SimSun-18030<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>宋体-18030<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>NSimSun-18030<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>新宋体-18030<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Songti SC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>宋體-簡<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>宋体-简<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Songti TC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>宋體-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>宋体-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PLBaosong2GBK Light<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ报宋二GBK<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL SungtiL GB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ简报宋<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PLMingU20 Light<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ明體U20-L<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL Mingti2L Big5<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ細上海宋<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL ShanHeiSun Uni<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎PL细上海宋Uni<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎PL細上海宋Uni<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL New Sung<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ新宋<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL New Sung Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ新宋 Mono<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>MingLiU<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>細明體<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>MingLiU-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>細明體-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>PMingLiU<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>新細明體<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>PMingLiU-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>新細明體-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>MingLiU_HKSCS<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>細明體_HKSCS<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>MingLiU_HKSCS-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>細明體_HKSCS-ExtB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe Fangsong Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe 仿宋 Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>FangSong_GB2312<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>仿宋_GB2312<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>FangSong<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>仿宋<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>STFangsong<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>华文仿宋<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhFangSong<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe Kaiti Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Adobe 楷体 Std<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UKai CN<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UKai HK<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UKai TW<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL UKai TW MBE<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>BiauKai<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Kai<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>DFKai-SB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>標楷體<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>STKaiti<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>华文楷体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>KaiTi<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>楷体<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Kaiti SC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>楷體-簡<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>楷体-简<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>Kaiti TC<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>楷體-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>楷体-繁<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>SimKai<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>KaiTi_GB2312<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>楷体_GB2312<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL KaitiM GB<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ简中楷<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL New Kai<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ新中楷<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL KaitiM Big5<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎ＰＬ中楷<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Monospace<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>AR PL ZenKai Uni<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;&lt;family&gt;</span>文鼎PL中楷Uni<span style="color:#f92672">&lt;/family&gt;&lt;prefer&gt;&lt;family&gt;</span>Serif<span style="color:#f92672">&lt;/family&gt;&lt;family&gt;</span>zhKai<span style="color:#f92672">&lt;/family&gt;&lt;/prefer&gt;&lt;/alias&gt;</span>

<span style="color:#75715e">&lt;!-- 设置其他属性 --&gt;</span>
<span style="color:#f92672">&lt;match&gt;</span>
	<span style="color:#75715e">&lt;!-- 设置合理的像素密度，确保pt与px之间能够合理转换 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;dpi&#34;</span><span style="color:#f92672">&gt;&lt;double&gt;</span>102<span style="color:#f92672">&lt;/double&gt;&lt;/edit&gt;</span>

	<span style="color:#75715e">&lt;!-- 确保弱绑定西文字体优先于弱绑定中文字体 --&gt;</span>
	<span style="color:#75715e">&lt;!-- 注释这里，否则不支持异形字 --&gt;</span>
	<span style="color:#75715e">&lt;!--&lt;edit name=&#34;lang&#34;&gt;&lt;string&gt;en&lt;/string&gt;&lt;/edit&gt;--&gt;</span>

	<span style="color:#75715e">&lt;!-- 设置等宽标记 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isDengKuan&#34;</span><span style="color:#f92672">&gt;&lt;eq&gt;&lt;name&gt;</span>family<span style="color:#f92672">&lt;/name&gt;&lt;string&gt;</span>Monospace<span style="color:#f92672">&lt;/string&gt;&lt;/eq&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- 设置字体优先级 --&gt;</span>
<span style="color:#75715e">&lt;!-- Default system-ui fonts --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>system-ui<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;prepend&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>sans-serif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- Default sans-serif fonts--&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>sans-serif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;prepend&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Sans<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhHei<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zzFailBack<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- Default serif fonts--&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>serif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;prepend&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Serif<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zzFailBack<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- Default monospace fonts--&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>monospace<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;prepend&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Monospace<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhMono<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zzFailBack<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- 默认 emoji 字体。 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">qual=</span><span style="color:#e6db74">&#34;any&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>emoji<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;prepend&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;same&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zzSymbol<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- 让 Noto CJK 在不同语言下采用不同的汉字变体。 --&gt;</span>
<span style="color:#75715e">&lt;!-- zh-HK Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zh-HK<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhHei<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans CJK HK<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- zh-HK Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zh-HK<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Serif CJK HK<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- zh-HK Monospace --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zh-HK<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhMono<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans Mono CJK HK<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- zh-TW Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zh-TW<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhHei<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans CJK TC<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- zh-TW Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zh-TW<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Serif CJK TC<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- zh-TW Monospace --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zh-TW<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhMono<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans Mono CJK TC<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ja Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>ja<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhHei<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans CJK JP<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ja Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>ja<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Serif CJK JP<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ja Monospace --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>ja<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhMono<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans Mono CJK JP<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ko Sans --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>ko<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhHei<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans CJK KR<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ko Serif --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>ko<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhSerif<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Serif CJK KR<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#75715e">&lt;!-- ko Monospace --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>ko<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>zhMono<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/test&gt;</span>
  <span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;family&#34;</span> <span style="color:#a6e22e">binding=</span><span style="color:#e6db74">&#34;strong&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>Noto Sans Mono CJK KR<span style="color:#f92672">&lt;/string&gt;</span>
  <span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
 
<span style="color:#75715e">&lt;!-- ========================== 第五部分 渲染阶段 =================================== --&gt;</span>

<span style="color:#75715e">&lt;!-- 第一步，设置默认的渲染参数 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#75715e">&lt;!-- 修整像素大小(小于10px的调整到10px，否则四舍五入到整数) --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pixelsize&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;if&gt;</span>
			<span style="color:#f92672">&lt;less&gt;&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;&lt;double&gt;</span>10<span style="color:#f92672">&lt;/double&gt;&lt;/less&gt;</span>
			<span style="color:#f92672">&lt;int&gt;</span>10<span style="color:#f92672">&lt;/int&gt;</span>
			<span style="color:#f92672">&lt;round&gt;&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;&lt;/round&gt;</span>
		<span style="color:#f92672">&lt;/if&gt;</span>
	<span style="color:#f92672">&lt;/edit&gt;</span>

	<span style="color:#75715e">&lt;!-- 开启抗锯齿(smooth) --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;antialias&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>

	<span style="color:#75715e">&lt;!-- 优先使用内嵌微调，同时默认开足微调 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hinting&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;autohint&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>false<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;hintstyle&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>hintslight<span style="color:#f92672">&lt;/const&gt;&lt;/edit&gt;</span>

	<span style="color:#75715e">&lt;!-- LCD特征设置 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;rgba&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>rgb<span style="color:#f92672">&lt;/const&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lcdfilter&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>lcddefault<span style="color:#f92672">&lt;/const&gt;&lt;/edit&gt;</span>

	<span style="color:#75715e">&lt;!-- 禁用内嵌点阵 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;embeddedbitmap&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>false<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>

	<span style="color:#75715e">&lt;!-- 禁用合成粗体 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;embolden&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>false<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 第二步，为没有原生斜体的字体使用合成斜体 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;slant&#34;</span> <span style="color:#a6e22e">compare=</span><span style="color:#e6db74">&#34;eq&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>roman<span style="color:#f92672">&lt;/const&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;slant&#34;</span> <span style="color:#a6e22e">compare=</span><span style="color:#e6db74">&#34;not_eq&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>roman<span style="color:#f92672">&lt;/const&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;slant&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>oblique<span style="color:#f92672">&lt;/const&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;matrix&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;times&gt;</span>
			<span style="color:#f92672">&lt;name&gt;</span>matrix<span style="color:#f92672">&lt;/name&gt;</span>
			<span style="color:#f92672">&lt;matrix&gt;</span>
				<span style="color:#f92672">&lt;double&gt;</span>1<span style="color:#f92672">&lt;/double&gt;&lt;double&gt;</span>0.2<span style="color:#f92672">&lt;/double&gt;</span>
				<span style="color:#f92672">&lt;double&gt;</span>0<span style="color:#f92672">&lt;/double&gt;&lt;double&gt;</span>1<span style="color:#f92672">&lt;/double&gt;</span>
			<span style="color:#f92672">&lt;/matrix&gt;</span>
		<span style="color:#f92672">&lt;/times&gt;</span>
	<span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 第三步，为没有原生粗体的字体使用合成粗体 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;weight&#34;</span> <span style="color:#a6e22e">compare=</span><span style="color:#e6db74">&#34;less&#34;</span><span style="color:#f92672">&gt;&lt;int&gt;</span>105<span style="color:#f92672">&lt;/int&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;weight&#34;</span> <span style="color:#a6e22e">compare=</span><span style="color:#e6db74">&#34;more&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;pattern&#34;</span><span style="color:#f92672">&gt;&lt;int&gt;</span>105<span style="color:#f92672">&lt;/int&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;weight&#34;</span><span style="color:#f92672">&gt;&lt;const&gt;</span>bold<span style="color:#f92672">&lt;/const&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;embolden&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 第四步，标记&#34;视觉大小&#34;(原本的标称值)是否为奇数，为接下来修正等宽条件下的&#34;标称大小&#34;做准备 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isOddPx&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;eq&gt;</span>
			<span style="color:#f92672">&lt;round&gt;&lt;divide&gt;&lt;plus&gt;&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;&lt;double&gt;</span>0.5<span style="color:#f92672">&lt;/double&gt;&lt;/plus&gt;&lt;double&gt;</span>2<span style="color:#f92672">&lt;/double&gt;&lt;/divide&gt;&lt;/round&gt;</span>
			<span style="color:#f92672">&lt;ceil&gt;&lt;divide&gt;&lt;plus&gt;&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;&lt;double&gt;</span>0.5<span style="color:#f92672">&lt;/double&gt;&lt;/plus&gt;&lt;double&gt;</span>2<span style="color:#f92672">&lt;/double&gt;&lt;/divide&gt;&lt;/ceil&gt;</span>
		<span style="color:#f92672">&lt;/eq&gt;</span>
	<span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 第五步，修正合成粗体的&#34;标称大小&#34;，尽力确保其&#34;视觉大小&#34;与原本的标称值一致 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;embolden&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/test&gt;</span>
	<span style="color:#75715e">&lt;!-- 标称大小=视觉大小-trunc((视觉大小+13.5)/25) --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pixelsize&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;minus&gt;</span>
			<span style="color:#f92672">&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;</span>
			<span style="color:#f92672">&lt;trunc&gt;&lt;divide&gt;&lt;plus&gt;&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;&lt;double&gt;</span>13.5<span style="color:#f92672">&lt;/double&gt;&lt;/plus&gt;&lt;double&gt;</span>25<span style="color:#f92672">&lt;/double&gt;&lt;/divide&gt;&lt;/trunc&gt;</span>
		<span style="color:#f92672">&lt;/minus&gt;</span>
	<span style="color:#f92672">&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 第六步，在等宽条件下，为确保中西文对齐，进一步修正&#34;标称大小&#34;(也会影响&#34;视觉大小&#34;) --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isDengKuan&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/test&gt;</span>
	<span style="color:#75715e">&lt;!-- 如果&#34;视觉大小&#34;是奇数 --&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isOddPx&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/test&gt;</span>
	<span style="color:#75715e">&lt;!-- 那么上调为偶像素，因为Monospace在奇像素下总是大一级显示 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pixelsize&#34;</span><span style="color:#f92672">&gt;&lt;plus&gt;&lt;name&gt;</span>pixelsize<span style="color:#f92672">&lt;/name&gt;&lt;int&gt;</span>1<span style="color:#f92672">&lt;/int&gt;&lt;/plus&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 第六步续，进一步专门处理等宽条件下&#34;标称大小&#34;为11px,12px的合成粗体 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isDengKuan&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;embolden&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>true<span style="color:#f92672">&lt;/bool&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pixelsize&#34;</span> <span style="color:#a6e22e">compare=</span><span style="color:#e6db74">&#34;more&#34;</span><span style="color:#f92672">&gt;&lt;double&gt;</span>10.5<span style="color:#f92672">&lt;/double&gt;&lt;/test&gt;</span>
	<span style="color:#f92672">&lt;test</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pixelsize&#34;</span> <span style="color:#a6e22e">compare=</span><span style="color:#e6db74">&#34;less&#34;</span><span style="color:#f92672">&gt;&lt;double&gt;</span>12.5<span style="color:#f92672">&lt;/double&gt;&lt;/test&gt;</span>
	<span style="color:#75715e">&lt;!-- 统一调整为12px常规体，只有这样才能对齐 --&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pixelsize&#34;</span><span style="color:#f92672">&gt;&lt;int&gt;</span>12<span style="color:#f92672">&lt;/int&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;embolden&#34;</span><span style="color:#f92672">&gt;&lt;bool&gt;</span>false<span style="color:#f92672">&lt;/bool&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;weight&#34;</span><span style="color:#f92672">&gt;&lt;int&gt;</span>80<span style="color:#f92672">&lt;/int&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>
<span style="color:#75715e">&lt;!-- 最后，删除等宽标记与奇偶标记 --&gt;</span>
<span style="color:#f92672">&lt;match</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;font&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isDengKuan&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;delete&#34;</span><span style="color:#f92672">&gt;&lt;/edit&gt;</span>
	<span style="color:#f92672">&lt;edit</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;isOddPx&#34;</span> <span style="color:#a6e22e">mode=</span><span style="color:#e6db74">&#34;delete&#34;</span><span style="color:#f92672">&gt;&lt;/edit&gt;</span>
<span style="color:#f92672">&lt;/match&gt;</span>

<span style="color:#f92672">&lt;/fontconfig&gt;</span>
</code></pre></div><p>配置完成后，请运行 <code>fc-cache -fv</code> 并重新登陆。</p>
<h5 id="其他-1">其他<a hidden class="anchor" aria-hidden="true" href="#其他-1">#</a></h5>
<ul>
<li>
<p>XFCE 全局：Settings =&gt; Appearance =&gt; Fonts，Font 设置为 Sans Regular 和 Monospace Regular。然后 Hinting 设置为 Slight，DPI 设置为 102。之所以重复设置，是因为这里的设置会覆盖 fontconfig 的设置，fontconfig 大约在只有 WM 下才能设置一切吧。之前设置 Hinting 为 Full，结果 Hinting 过重导致 Telegram 英文字符间距不太均匀</p>
<p><img loading="lazy" src="/Distributions/Screenshot_2022-08-18_16-09-44.png" alt=""  />
</p>
</li>
<li>
<p>xed：Edit =&gt; Preference =&gt; Font，设置为 Monospace Regular，字号 10。</p>
</li>
<li>
<p><a href="https://blog.lilydjwg.me/2022/8/8/google-chrome-fonts.216423.html">Google Chrome 中的字体设置</a>：用户要想 Google Chrome 听点话，需要在「设置」-&gt;「外观」-&gt;「自定义字体」里设置为 sans，serif，sans，monospace</p>
</li>
<li>
<p><a href="https://www.ruanyifeng.com/blog/2017/04/emoji.html">Emoji 简介</a>：它是一个日语词，<code>e</code>表示&quot;絵&quot;，<code>moji</code>表示&quot;文字&quot;。连在一起，就是&quot;絵文字&quot;。Unicode 只是规定了 Emoji 的码点和含义，并没有规定它的样式。举例来说，码点<code>U+1F600</code>表示一张微笑的脸，但是这张脸长什么样，则由各个系统自己实现。</p>
</li>
<li>
<p>Typora: Preferences =&gt; Open Advanced Settings</p>
</li>
<li>
<p>Xfce Terminal: Settings =&gt; Xfce Terminal Settings =&gt; Appearance =&gt; Use system font</p>
</li>
<li>
<p>苹果字体：</p>
<ul>
<li>Meslo LG S（更接近 Apple 的 Menlo）：<a href="https://aur.archlinux.org/packages/ttf-meslo">ttf-meslo</a></li>
<li>SF Pro &amp; New York：<a href="https://aur.archlinux.org/packages/apple-fonts">apple-fonts</a></li>
<li>PingFang SC：<a href="https://aur.archlinux.org/packages/ttf-pingfang-git">ttf-pingfang-git</a>(SC)</li>
<li>Apple Color Emoji：<a href="https://aur.archlinux.org/packages/ttf-apple-emoji">ttf-apple-emoji</a></li>
</ul>
</li>
<li>
<p><a href="https://unix.stackexchange.com/a/26058">analyze font files</a>: only support OpenType fonts.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S lcdf-typetools
$ otfinfo --info *.ttf | grep Subfamily
</code></pre></div></li>
<li>
<p><a href="https://www.omgubuntu.co.uk/2020/02/command-line-font-preview-tool">Preview Fonts</a>：真的只能查看，把字体预览转成图片，不能看字体的 metadata，没什么用的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S fontpreview
$ fontpreview /path/of/fonts
</code></pre></div></li>
</ul>
<h4 id="screen-dpihttpswinaerocomfind-change-screen-dpi-linux"><a href="https://winaero.com/find-change-screen-dpi-linux/">Screen DPI</a><a hidden class="anchor" aria-hidden="true" href="#screen-dpihttpswinaerocomfind-change-screen-dpi-linux">#</a></h4>
<p><strong>Find the DPI value for your screen</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xdpyinfo | grep -B <span style="color:#ae81ff">2</span> resolution
screen <span style="color:#75715e">#0:</span>
  dimensions:    1366x768 pixels <span style="color:#f92672">(</span>340x191 millimeters<span style="color:#f92672">)</span>
  resolution:    96x96 dots per inch
</code></pre></div><p><strong>How to calculate the right DPI value</strong></p>
<ol>
<li>
<p>Get your screen size in millimeters by running the command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xrandr | grep -w connected
eDP1 connected primary 1366x768+0+0 <span style="color:#f92672">(</span>normal left inverted right x axis y axis<span style="color:#f92672">)</span> 340mm x 190mm
</code></pre></div></li>
<li>
<p>Convert it to centimeters. My values are 34 x 19.</p>
</li>
<li>
<p>Convert centimeters to inches. Divide the values by 2.54. In my case, the values are as follows: 13.39in x 7.48in.</p>
</li>
<li>
<p>Finally, divide your screen resolution values by inch values. In my case, the values are as follows:
1366/13.39 = 102.016430=~102.
768/7.48 = 102.673796=~102.</p>
</li>
</ol>
<p><strong>How to change the DPI value</strong></p>
<ul>
<li>
<p>No desktop environment/barebones window manager</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.Xresources
Xft.dpi: <span style="color:#ae81ff">102</span>
</code></pre></div><p>If your .Xresources file is not processed, add the following line to your startup file (e.g. .xinitrc or some window manager-specific file)</p>
<pre tabindex="0"><code>xrdb -merge ~/.Xresources
</code></pre></li>
<li>
<p>Xfce</p>
<p>The DPI can be set to what you want under Settings - Appearance - Font.</p>
</li>
</ul>
<h4 id="bluetoothhttpswikiarchlinuxorgtitlebluetooth"><a href="https://wiki.archlinux.org/title/Bluetooth">Bluetooth</a><a hidden class="anchor" aria-hidden="true" href="#bluetoothhttpswikiarchlinuxorgtitlebluetooth">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S bluez bluez-utils
$ lsmod | grep btusb
$ sudo systemctl enable --now bluetooth.service 
$ sudo usermod -a -G lp kurome <span style="color:#75715e"># re-login</span>
</code></pre></div><p>要自动化 bluetoothctl 命令，使用 <code>echo -e &quot;command1\ncommand2\n&quot; | bluetoothctl</code></p>
<p>运行 <code>bluetoothctl</code> 交互命令。输入 <code>help</code> 来获取帮助。</p>
<ol>
<li>（可选操作）使用 <code>select MAC_address</code> 选择一个默认的蓝牙接收器。</li>
<li>使用命令 <code>power on</code> 打开蓝牙。蓝牙默认是关闭的，并且重启之后默认也会关闭。</li>
<li>使用命令 <code>devices</code> 获得要配对的设备的 MAC 地址。</li>
<li>如果设备没有出现在上一步的列表中，使用命令 <code>scan on</code> 去搜索发现所有可配对的设备。</li>
<li>使用命令 <code>agent on</code> 打开代理或者选择一个特定的代理：如果在 <code>agent</code> 命令后按下两次 tab 键，应该就能看到可用代理的列表。蓝牙代理用于管理蓝牙“配对码”。它可以回复外部发来的“配对码”，也可以主动发送。大部分情况下使用 <code>default-agent</code> 应该就足够了。</li>
<li>使用命令 <code>pair MAC_address</code> 配对设备（可用 tab 键补全 MAC 地址）。</li>
<li>如果配对设备不需要 PIN，那么你可能需要手动将设备添加到信任列表。使用命令 <code>trust MAC_address</code>。</li>
<li>使用命令 <code>connect MAC_address</code> 建立连接。</li>
</ol>
<p>最后，音频输出选择蓝牙耳机。</p>
<h4 id="屏蔽网站">屏蔽网站<a hidden class="anchor" aria-hidden="true" href="#屏蔽网站">#</a></h4>
<p>可以不需要插件的 一种简单的方式直接在 hosts 文件中添加一条记录即可</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vim /etc/hosts 
<span style="color:#75715e"># forbidden website </span>
<span style="color:#75715e"># 127.0.0.1 后面的网站可以替换成自己想要禁止访问的网页</span>
127.0.0.1  www.csdn.net
</code></pre></div><p>但是上面依旧会显示在搜索结果中，同理 uBlock 等，只是无法访问，我想要的是不出现在搜索结果中，比如<a href="https://chrome.google.com/webstore/detail/ublacklist/pncfbmialoiaghdehhbnbhkkgmjanfhe">uBlacklist</a>插件符合需求：</p>
<pre tabindex="0"><code>*://www.csdn.net/*
*://its401.com/*
</code></pre><h4 id="kolourpainthttpkolourpaintorg"><a href="http://kolourpaint.org/">KolourPaint</a><a hidden class="anchor" aria-hidden="true" href="#kolourpainthttpkolourpaintorg">#</a></h4>
<p>KDE 下免费、快速的图像编辑器，与Windows 7系统之前微软画图软件相似，但是添加了一些如支持透明度等的新特征。</p>
<h4 id="packages-out-of-datehttpswikiarchlinuxorgtitlearch_user_repositoryflagging_packages_out-of-date"><a href="https://wiki.archlinux.org/title/Arch_User_Repository#Flagging_packages_out-of-date">packages out-of-date</a><a hidden class="anchor" aria-hidden="true" href="#packages-out-of-datehttpswikiarchlinuxorgtitlearch_user_repositoryflagging_packages_out-of-date">#</a></h4>
<p>First, you should flag the package out-of-date indicating details on why the package is outdated, preferably including links to the release announcement or the new release tarball.</p>
<p>You should also try to reach out to the maintainer directly by email. If there is no response from the maintainer after two weeks, you can file an orphan request.</p>
<h4 id="zbarhttpsaskubuntucoma22899"><a href="https://askubuntu.com/a/22899">zbar</a><a hidden class="anchor" aria-hidden="true" href="#zbarhttpsaskubuntucoma22899">#</a></h4>
<p>Command-line QR-code decode: zbarimg</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S zbar
$ zbarimg <span style="color:#e6db74">&#34;image-file-name.jpg&#34;</span>
</code></pre></div><h4 id="zshhttpsarchicekylinonlineadvancedoptional-cfg-1htmlf09f9a80-zsh"><a href="https://arch.icekylin.online/advanced/optional-cfg-1.html#%F0%9F%9A%80-zsh">zsh</a><a hidden class="anchor" aria-hidden="true" href="#zshhttpsarchicekylinonlineadvancedoptional-cfg-1htmlf09f9a80-zsh">#</a></h4>
<p><strong>安装 zfs</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S zsh zsh-autosuggestions zsh-syntax-highlighting zsh-completions autojump
$ chsh -l <span style="color:#75715e"># 查看安装了哪些 Shell</span>
$ chsh -s /usr/bin/zsh <span style="color:#75715e"># 修改当前账户的默认 Shell</span>
$ nano ~/.zshrc <span style="color:#75715e"># 让插件生效</span>
<span style="color:#75715e"># Plugin</span>
source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/share/autojump/autojump.zsh
</code></pre></div><ul>
<li><a href="https://github.com/zsh-users/zsh-autosuggestions"><code>zsh-autosuggestions</code></a> —— 命令自动补全插件</li>
<li><a href="https://github.com/zsh-users/zsh-syntax-highlighting"><code>zsh-syntax-highlighting</code></a> —— 语法上高亮插件</li>
<li><a href="https://github.com/zsh-users/zsh-completions"><code>zsh-completions</code></a> —— 补充补全定义</li>
<li><a href="https://github.com/wting/autojump"><code>autojump</code></a> —— 一种更快的文件系统导航方式</li>
</ul>
<p>可能需要：</p>
<ul>
<li>将在 <code>~/.bash_profile</code> 所做的配置复制到 <code>~/.zsh_profile</code></li>
<li>将在 <code>~/.bashrc</code> 所做的配置复制到 <code>~/.zshrc</code></li>
</ul>
<p><a href="https://github.com/romkatv/powerlevel10k#manual"><strong>安装 powerlevel10k</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> https://github.com/romkatv/powerlevel10k.git ~/.powerlevel10k
$ echo <span style="color:#e6db74">&#39;source ~/.powerlevel10k/powerlevel10k.zsh-theme&#39;</span> &gt;&gt; ~/.zshrc
</code></pre></div><p><code>powerlevel10k</code> 中包含许多特殊图标符号，需要与之兼容的字体。</p>
<p><strong>.zshrc</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.</span>
<span style="color:#75715e"># Initialization code that may require console input (password prompts, [y/n]</span>
<span style="color:#75715e"># confirmations, etc.) must go above this block; everything else may go below.</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> -r <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>XDG_CACHE_HOME<span style="color:#66d9ef">:-</span>$HOME/.cache<span style="color:#e6db74">}</span><span style="color:#e6db74">/p10k-instant-prompt-</span><span style="color:#e6db74">${</span>(%)<span style="color:#66d9ef">:-</span>%n<span style="color:#e6db74">}</span><span style="color:#e6db74">.zsh&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
  source <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>XDG_CACHE_HOME<span style="color:#66d9ef">:-</span>$HOME/.cache<span style="color:#e6db74">}</span><span style="color:#e6db74">/p10k-instant-prompt-</span><span style="color:#e6db74">${</span>(%)<span style="color:#66d9ef">:-</span>%n<span style="color:#e6db74">}</span><span style="color:#e6db74">.zsh&#34;</span>
<span style="color:#66d9ef">fi</span>

<span style="color:#75715e"># Lines configured by zsh-newuser-install</span>
HISTFILE<span style="color:#f92672">=</span>~/.histfile
HISTSIZE<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>
SAVEHIST<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>
bindkey -e
<span style="color:#75715e"># End of lines configured by zsh-newuser-install</span>
<span style="color:#75715e"># The following lines were added by compinstall</span>
zstyle :compinstall filename <span style="color:#e6db74">&#39;/home/kurome/.zshrc&#39;</span>

autoload -Uz compinit
compinit
<span style="color:#75715e"># End of lines added by compinstall</span>

<span style="color:#75715e"># Plugin</span>
source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/share/autojump/autojump.zsh

<span style="color:#75715e"># CUSTOM BEGIN</span>
<span style="color:#75715e">## User specific environment</span>
export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.local/bin:</span>$PATH<span style="color:#e6db74">&#34;</span>
<span style="color:#75715e">## Alias</span>
alias lsptu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lsof -i | grep -i listen&#34;</span>
alias ls<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls --color=auto&#39;</span>
alias ll<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -lav --ignore=..&#39;</span>   <span style="color:#75715e"># show long listing of all except &#34;..&#34;</span>
alias l<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -lav --ignore=.?*&#39;</span>   <span style="color:#75715e"># show long listing but no hidden dotfiles except &#34;.&#34;</span>
<span style="color:#75715e"># CUSTOM END</span>

source ~/.powerlevel10k/powerlevel10k.zsh-theme
<span style="color:#75715e"># To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.</span>
<span style="color:#f92672">[[</span> ! -f ~/.p10k.zsh <span style="color:#f92672">]]</span> <span style="color:#f92672">||</span> source ~/.p10k.zsh
</code></pre></div><p><strong>默认的 .bashrc</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#</span>
<span style="color:#75715e"># ~/.bashrc</span>
<span style="color:#75715e">#</span>

<span style="color:#75715e"># If not running interactively, don&#39;t do anything</span>
<span style="color:#f92672">[[</span> $- !<span style="color:#f92672">=</span> *i* <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">return</span>

<span style="color:#f92672">[[</span> -f ~/.welcome_screen <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> . ~/.welcome_screen

_set_liveuser_PS1<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    PS1<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;[\u@\h \W]\$ &#39;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;liveuser&#34;</span> <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
        local iso_version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>grep ^VERSION<span style="color:#f92672">=</span> /usr/lib/endeavouros-release 2&gt;/dev/null | cut -d <span style="color:#e6db74">&#39;=&#39;</span> -f 2<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$iso_version<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
            local prefix<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;eos-&#34;</span>
            local iso_info<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$prefix$iso_version<span style="color:#e6db74">&#34;</span>
            PS1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[\u@</span>$iso_info<span style="color:#e6db74"> \W]\$ &#34;</span>
        <span style="color:#66d9ef">fi</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>
_set_liveuser_PS1
unset -f _set_liveuser_PS1

ShowInstallerIsoInfo<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    local file<span style="color:#f92672">=</span>/usr/lib/endeavouros-release
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -r $file <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
        cat $file
    <span style="color:#66d9ef">else</span>
        echo <span style="color:#e6db74">&#34;Sorry, installer ISO info is not available.&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>


alias ls<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls --color=auto&#39;</span>
alias ll<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -lav --ignore=..&#39;</span>   <span style="color:#75715e"># show long listing of all except &#34;..&#34;</span>
alias l<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -lav --ignore=.?*&#39;</span>   <span style="color:#75715e"># show long listing but no hidden dotfiles except &#34;.&#34;</span>

<span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;root&#34;</span> <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">return</span>

<span style="color:#f92672">[[</span> -z <span style="color:#e6db74">&#34;</span>$FUNCNEST<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> export FUNCNEST<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>          <span style="color:#75715e"># limits recursive functions, see &#39;man bash&#39;</span>

<span style="color:#75715e">## Use the up and down arrow keys for finding a command in history</span>
<span style="color:#75715e">## (you can write some initial letters of the command first).</span>
bind <span style="color:#e6db74">&#39;&#34;\e[A&#34;:history-search-backward&#39;</span>
bind <span style="color:#e6db74">&#39;&#34;\e[B&#34;:history-search-forward&#39;</span>

<span style="color:#75715e">##########################################################################################################</span>
<span style="color:#75715e">## Some generally useful functions.</span>
<span style="color:#75715e">## Consider uncommenting aliases below to start using these functions.</span>
<span style="color:#75715e">##</span>
<span style="color:#75715e">## October 2021: removed many obsolete functions. If you still need them, please look at</span>
<span style="color:#75715e">## https://github.com/EndeavourOS-archive/EndeavourOS-archiso/raw/master/airootfs/etc/skel/.bashrc</span>

_open_files_for_editing<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e"># Open any given document file(s) for editing (or just viewing).</span>
    <span style="color:#75715e"># Note1:</span>
    <span style="color:#75715e">#    - Do not use for executable files!</span>
    <span style="color:#75715e"># Note2:</span>
    <span style="color:#75715e">#    - Uses &#39;mime&#39; bindings, so you may need to use</span>
    <span style="color:#75715e">#      e.g. a file manager to make proper file bindings.</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -x /usr/bin/exo-open <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
        echo <span style="color:#e6db74">&#34;exo-open </span>$@<span style="color:#e6db74">&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
        setsid exo-open <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span> &gt;&amp; /dev/null
        <span style="color:#66d9ef">return</span>
    <span style="color:#66d9ef">fi</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -x /usr/bin/xdg-open <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">for</span> file in <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span> ; <span style="color:#66d9ef">do</span>
            echo <span style="color:#e6db74">&#34;xdg-open </span>$file<span style="color:#e6db74">&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
            setsid xdg-open <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span> &gt;&amp; /dev/null
        <span style="color:#66d9ef">done</span>
        <span style="color:#66d9ef">return</span>
    <span style="color:#66d9ef">fi</span>

    echo <span style="color:#e6db74">&#34;</span>$FUNCNAME<span style="color:#e6db74">: package &#39;xdg-utils&#39; or &#39;exo&#39; is required.&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">#------------------------------------------------------------</span>

<span style="color:#75715e">## Aliases for the functions above.</span>
<span style="color:#75715e">## Uncomment an alias if you want to use it.</span>
<span style="color:#75715e">##</span>

<span style="color:#75715e"># alias ef=&#39;_open_files_for_editing&#39;     # &#39;ef&#39; opens given file(s) for editing</span>
<span style="color:#75715e"># alias pacdiff=eos-pacdiff</span>
<span style="color:#75715e">##########################################################################################################</span>
</code></pre></div><h4 id="emacs">Emacs<a hidden class="anchor" aria-hidden="true" href="#emacs">#</a></h4>
<p><a href="https://emacs-china.org/t/emacs/7532/16"><strong>学习Emacs有几条曲线</strong></a></p>
<ol>
<li>
<p>先会用基本的快捷键, 安装各种简单的插件, 抄各种各样的配置, 先体验一下Emacs的强大功能.</p>
</li>
<li>
<p>安装复杂插件, 被各种配置搞崩溃了, 越改挂的越厉害, 大部分人卡在这个阶段, 因为不会Elisp, 导致东拼西凑的方法对于复杂插件行不通</p>
</li>
<li>
<p>你搞不懂Emacs复杂的配置的原因是因为你不懂 Elisp 编程, 学习Elisp的方法: 老老实实读Emacs内置的 <a href="https://www.gnu.org/software/emacs/manual/elisp.html">Elisp reference manual</a>, 这么厚的手册怎么学?</p>
<ul>
<li>
<p>一页一页的挨着看, 一个API一个API的读, 不要跳过</p>
</li>
<li>
<p>每个API, 都在 ielm 里面实践一下</p>
</li>
<li>
<p>遇到不知道啥鬼用的API, 去Google或EmacsWiki上搜索一下, 看看别人怎么用这些API的?</p>
</li>
</ul>
</li>
<li>
<p>如果你花了一个月耐下心读完 Elisp reference manual 以后, Emacs 90% 以上的代码你都可以看懂了, 继续折腾复杂插件, 知道 require, autoload, set-key, 各种 hook, defadvice 的在不同环境下的细微差别, 编程上知道 save-excursion, ignore-errors 这些风骚 macro 的用法. 这个阶段可以尝试手动来写一写复杂的配置了, 这个阶段你已经是 Emacs 高级用户了.</p>
</li>
<li>
<p>如果还不满足, 可以像我这样造点有趣的轮子: <a href="https://www.emacswiki.org/emacs/AndyStewart">My Emacs Plugins 50</a> , 如果你自己会写Elisp插件, 你会发现Emacs其实是越用越简单的, 因为包括正则表达式, 语法高亮, 模式, 异步子进程, hook, overlay, advice 这些代码你写熟悉以后, 你会发现所有插件的唯一差别就是复杂度和想象力的区别, 不存在想得出来写不出来的东西.</p>
</li>
<li>
<p>到了这个阶段, 唯一可以让你学习到更多知识的就是去 IRC <a href="https://emacs-china.org/c/5-emacs">#emacs</a> 和那些古老的黑客们交流, 或者去扒Github Emacser, 我知道很多日本牛逼哄哄的Emacs开发者都把插件放到 ftp 上 (比如当年的 color-moccur.el ), 学点 Google 语法就可以定向搜索. 这些人都是你会写Emacs插件后, 需要学习和进阶的榜样, 这时候你再看Elisp代码, 你的注意力会放在他们Elisp编程的一些细节上, 比如代码写的更简洁, 方法用的妙, 架构设计上等等, 这是完全不同阶段的探索体验.</p>
</li>
<li>
<p>如果你还不满足, 好好学习C语言, 然后再找个赚钱的工作, 把自己和家人照顾好. 业余时间直接用C或Elisp给Emacs底层做贡献, 把你的代码贡献固化到Emacs中, 然后你的名字可以像我一样写到 Emacs AUTHORS 里面去装逼: <a href="https://github.com/emacs-mirror/emacs/blob/7f95e1aec3014f32366129bcbf61675ab858f053/etc/AUTHORS#L349">Emacs AUTHORS 146</a></p>
</li>
</ol>
<p>如果你已经看到这里, 而且也做到上面的所有7点, 你自己的能力和精神境界都会很高了, 再也不会咋咋呼呼的吵着自己的技术要咋样咋样, 因为你会发现学的越多, 自己就是傻逼一个, 啥都不懂, 这辈子即使终身学习也学习不完, 哈哈哈哈.</p>
<p>上面就是我学习Emacs十多年的经验分享, 希望可以给同学们一点参考.</p>
<h3 id="questions">Questions<a hidden class="anchor" aria-hidden="true" href="#questions">#</a></h3>
<p><a href="https://forum.endeavouros.com/t/faq-issues-with-signature-is-marginal-trust-signature-is-unknown-trust-or-invalid-or-corrupted-package/6756"><strong>“signature is marginal trust”, “signature is unknown trust”, or “invalid or corrupted package”</strong></a></p>
<p>如果您有任何错误，您可以清除 pacman 密钥环并重新开始：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo rm -fr /etc/pacman.d/gnupg
$ sudo pacman-key --init
$ sudo pacman-key --populate archlinux archlinuxcn endeavouros
$ sudo pacman -Syy archlinux-keyring archlinuxcn-keyring endeavouros-keyring
$ sudo pacman -Syyu
</code></pre></div><ul>
<li>记着将所有用到的仓库都添加，如上面分别是 archlinux、archlinuxcn、endeavouros 三个仓库</li>
<li>千万不要运行 pacman-key refresh,超级慢，个把小时，实在没必要。</li>
</ul>
<p><a href="https://askubuntu.com/questions/505148/can-you-fix-chromes-close-minimize-maximize-buttons-so-they-are-on-the-left"><strong>当 chrome 使用 GTK+ 主题的时候，无法调整窗口大小</strong></a></p>
<p>enable  &ldquo;System title bars and borders&rdquo;</p>
<p><a href="https://bbs.archlinux.org/viewtopic.php?id=259862"><strong>有时候正确输入密码但是提示密码错误</strong></a></p>
<p>问题来自一个经常需要特权并阻止我使用真实密码登录的流氓 cronjob。请参阅 pam_faillock 和 cron。</p>
<p>一般只需要等一会儿之后就好了。</p>
<p><a href="https://stackoverflow.com/a/18194523/19750696"><strong>Download a single folder or directory from a GitHub repo</strong></a></p>
<p><strong>Update Apr. 2021</strong>: there are a few tools created by the community that can do this for you:</p>
<ul>
<li>Download Directory(Credits to fregante)
<ul>
<li>It has also been <a href="https://github.com/sindresorhus/refined-github/pull/951">integrated</a> into the excellent <a href="https://github.com/sindresorhus/refined-github"><strong>Refined Github</strong></a> chrome extension as a button in the Github web UI.</li>
</ul>
</li>
<li><a href="http://kinolien.github.io/gitzip">GitZip</a> (Credits to <a href="https://stackoverflow.com/users/2238770/kino">Kino</a> - see his answer <a href="https://stackoverflow.com/questions/7106012/download-a-single-folder-or-directory-from-a-github-repo/33753575#33753575"><strong>here</strong></a>)</li>
<li><a href="https://downgit.github.io/">DownGit</a> (Credits to <a href="https://stackoverflow.com/users/4684058/minhas-kamal?tab=profile">Minhas Kamal</a> - see his answer <a href="https://stackoverflow.com/questions/7106012/download-a-single-folder-or-directory-from-a-github-repo/38879691#38879691"><strong>here</strong></a>)</li>
</ul>
<p>Note: if you&rsquo;re trying to download a large number of files, you may need to provide a token to these tools to avoid rate limiting.</p>
<p><strong>Original (manual) approach:</strong> Checking out an individual directory is not supported by <code>git</code> natively, but Github can do this via SVN. If you checkout your code with subversion, Github will essentially convert the repo from git to subversion on the backend, then serve up the requested directory.</p>
<p>Here&rsquo;s how you can use this feature to download a specific folder. I&rsquo;ll use the popular javascript library <code>lodash</code> as an example.</p>
<ol>
<li>
<p><strong>Navigate to the folder you want to download</strong>. Let&rsquo;s download <code>/test</code> from <code>master</code> branch.</p>
</li>
<li>
<p><strong>Modify the URL for subversion</strong>. Replace <code>tree/master</code> with <code>trunk</code>.</p>
<p><code>https://github.com/lodash/lodash/tree/master/test</code> ➜</p>
<p><code>https://github.com/lodash/lodash/trunk/test</code></p>
</li>
<li>
<p><strong>Download the folder</strong>. Go to the command line and grab the folder with SVN.</p>
<pre tabindex="0"><code>svn checkout https://github.com/lodash/lodash/trunk/test
</code></pre></li>
</ol>
<p>You might not see any activity immediately because Github takes up to 30 seconds to convert larger repositories, so be patient.</p>
<blockquote>
<p><em>Full URL format explanation:</em></p>
<ul>
<li>If you&rsquo;re interested in <code>master</code> branch, use <code>trunk</code> instead. So the full path is <code>trunk/foldername</code></li>
<li>If you&rsquo;re interested in <code>foo</code> branch, use <code>branches/foo</code> instead. The full path looks like <code>branches/foo/foldername</code></li>
<li>Protip: You can use <code>svn ls</code> to see available tags and branches before downloading if you wish</li>
</ul>
</blockquote>
<p>That&rsquo;s all! Github <a href="https://help.github.com/articles/support-for-subversion-clients/">supports more subversion features</a> as well, including support for committing and pushing changes.</p>
<h2 id="wm">WM<a hidden class="anchor" aria-hidden="true" href="#wm">#</a></h2>
<p><a href="https://www.reddit.com/r/linux/comments/m03rqd/window_manager_recommendation/"><strong>Window manager recommendation?</strong></a></p>
<p>i3 (sway for Wayland) is the easy peasy starter kit. I like Bspwm, it&rsquo;s one big bash script basically to get configs going. Then there&rsquo;s the more challenging one that you can pick based on your preferred programming language: Awesome (lua), Xmonad (haskell), DWM (C), Qtile (python)</p>
<p>awesome wm, probably the most extensive wm, for one you can load whole libraries into it like xmonad, but using lua is do much easier than haskell, tho the api docs could get an overhaul as they are kind of ugly when giving code examples going straight from 1 to 10.</p>
<p><a href="https://github.com/alim0x/Awesome-Linux-Software-zh_CN#%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86"><strong>常见的窗口管理相关的工具</strong></a></p>
<p>合成器</p>
<ul>
<li><a href="https://github.com/yshui/compton">Compton</a> - Compton 是一款独立的合成管理器，适合同没有原生提供合成功能的窗口管理器一同使用。</li>
<li><a href="https://github.com/Plagman/gamescope">Gamescope</a> - Gamescope 是一款微合成器，提供一个带有独立输入，分辨率和刷新率的沙盒 Xwayland 桌面。</li>
<li><a href="https://swaywm.org/">Sway</a> - Sway 是平铺 Wayland 合成器和 X11 下 i3 窗口管理器的新替代。</li>
<li><a href="https://cgit.freedesktop.org/xorg/app/xcompmgr">Xcompmgr</a> - Xcompmgr 是一个简单的合成管理器，能够渲染下拉阴影，使用 transset 工具的话，还可以实现简单的窗口透明。</li>
</ul>
<p>叠加式窗口管理器</p>
<ul>
<li><a href="https://github.com/venam/2bwm">2bwm</a> - 快速的浮动窗口管理，有两个特殊边界，基于 XCB 库，由 mcwm 衍生。</li>
<li><a href="https://github.com/bbidulock/blackboxwm">Blackbox</a> - 快速，轻量化的 X 窗口系统窗口管理器，没有那些烦人的库依赖。</li>
<li><a href="http://fluxbox.org/">Fluxbox</a> - 基于 Blackbox 0.61.1 代码的 X 窗口管理器。</li>
<li><a href="http://openbox.org/">Openbox</a> - 高度可配置，带有可扩展标准支持的下一代窗口管理器。</li>
</ul>
<p>平铺式窗口管理器</p>
<ul>
<li><a href="https://github.com/baskerville/bspwm/wiki">Bspwm</a> - bspwm 是一个平铺式窗口管理器，将窗口以二叉树的叶结点的方式展现。</li>
<li><a href="https://herbstluftwm.org/">Herbstluftwm</a> - 使用 Xlib 和 Glib 的手工平铺式窗口管理器。</li>
<li><a href="https://i3wm.org/">i3 WM</a> - 更好的平铺及动态窗口管理器。完全重写。目标平台是 GNU/Linux 和 BSD 操作系统。</li>
<li><a href="https://github.com/Airblader/i3">i3-gaps</a> - i3-gaps 是拥有更多功能的 i3。</li>
<li><a href="https://github.com/pop-os/shell">Pop!_OS Shell</a> - Pop Shell 是基于 GNOME shell 的窗口管理器，键盘驱动，自动平铺。</li>
<li><a href="http://www.qtile.org/">Qtile</a> - qtile 是一款全功能，可 hack 的平铺窗口管理器，使用 Python 编写和配置。</li>
</ul>
<p>动态窗口管理器</p>
<ul>
<li><a href="https://awesomewm.org/">awesome</a> - 高度可配置，下一代 X 框架窗口管理器。</li>
<li><a href="https://dwm.suckless.org/">dwm</a> - X 动态窗口管理器。它以平铺，单片镜以及浮动布局的方式管理窗口。</li>
<li><a href="https://github.com/conformal/spectrwm">spectrwm</a> - 小型动态平铺 X11 窗口管理器。主要受 xmonad 和 dwm 启发。</li>
<li><a href="https://xmonad.org/">xmonad</a> - 动态平铺 X11 窗口管理器，用 Haskell 编写和配置。</li>
</ul>
<p>长时间日常使用动态窗口管理器之后发现，相比与传统的DE型桌面，这种WM型窗口管理方式确实能很大程度上提高工作效率。</p>
<p><strong>DE和WM的区别</strong></p>
<p>首先说明一下我即将提到的东西是什么。</p>
<ul>
<li>DE：Desktop Environment</li>
<li>WM：Window Manager</li>
</ul>
<p>桌面环境是一个相对完整的概念，一般情况下DE包含WM，比如Gnome3的默认WM是Mutter，KDE5的默认WM是KWin。主流的桌面环境都提供了大量自带的桌面组件来构成其完整的桌面体验。</p>
<p>窗口管理器只是管理出现在你的桌面上的各种窗口的组件，具体的管理内容包含比如：窗口堆叠方式，窗口移动规则等。大多数人接触到的是堆叠式窗口管理器，一个窗口可以叠放在其他窗口之上，调整窗口的主要方式是鼠标。我即将介绍的dwm（Dynamic Window Manager）属于动态窗口管理器，可以自定义不同窗口的出现规则如平铺或者堆叠，主要的调整窗口的方式是键盘。</p>
<p>大多数窗口管理器只提供管理窗口的逻辑和人机交互的处理，并不自带其他组件如程序启动器、终端等软件，因此只运行一个窗口管理器理论上是要比运行一个完整的桌面环境更加节约资源，也有更好的可伸缩性。</p>
<p>实际上WM这个概念是应用了奥卡姆剃刀原理，把那些看似有点用但实际上多余的功能全部剔除，只留下你真正需要的和最常用的功能并加以强化，Less is More.</p>
<h3 id="通用配置">通用配置<a hidden class="anchor" aria-hidden="true" href="#通用配置">#</a></h3>
<p>因为一个可独立运行的窗口管理器默认不携带任何多余的软件，所以为了满足日常使用需要进行一定程度的自定义配置，下面给出一下通用的配置：</p>
<h4 id="xorg--font">Xorg &amp; font<a hidden class="anchor" aria-hidden="true" href="#xorg--font">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S xorg-server xterm xorg-xinit 
$ pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji
</code></pre></div><h5 id="xinitrchttpswikiarchlinuxorgtitlexinit_e7ae80e4bd93e4b8ade69687"><a href="https://wiki.archlinux.org/title/Xinit_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">xinitrc</a><a hidden class="anchor" aria-hidden="true" href="#xinitrchttpswikiarchlinuxorgtitlexinit_e7ae80e4bd93e4b8ade69687">#</a></h5>
<p><code>~/.xinitrc</code> 可以方便的启动依赖 X 的程序，并在 X 启动时设置环境变量。如果用户主目录中存在 <code>.xinitrc</code>，<em>startx</em> 和 <em>xinit</em> 会执行此文件。如果不存在，<em>startx</em> 会执行默认的 <code>/etc/X11/xinit/xinitrc</code>。这个文件默认启动 <a href="https://wiki.archlinux.org/title/Twm">Twm</a> 和 <a href="https://wiki.archlinux.org/title/Xterm">Xterm</a>.</p>
<p>要设置窗口管理器或桌面环境，先通过复制创建默认文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cp /etc/X11/xinit/xinitrc ~/.xinitrc
</code></pre></div><p>根据示例文件修改可以保留一些默认行为，例如会引用 <code>/etc/X11/xinit/xinitrc.d</code> 中以 <code>.sh</code> 结尾的脚本。</p>
<p>然后编辑 <code>~/.xinitrc</code> ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.xinitrc
<span style="color:#75715e">#!/bin/bash</span>
xscreensaver &amp;
xsetroot -cursor_name left_ptr &amp;
exec openbox-session
</code></pre></div><p><code>~/.xinitrc</code> 中应该只有 <strong>一个</strong> 未注释掉的 <code>exec</code> 行，而且 exec 行必须位于配置文件的末尾。exec 后面的所有命令只有窗口退出后才会被执行。在窗口管理器前启动的命令，例如屏保和壁纸程序，必须自行 fork 后台进程或用<code>&amp;</code>在后台启动, 否则启动程序会等待它们退出才会启动窗口管理器或桌面环境。使用 <code>exec</code> 作为前缀会替换当前的进程，这样进程进入后台时 X 不会退出。</p>
<p>某些程序，比如 <a href="https://wiki.archlinux.org/title/Xrdb">xrdb</a>，不应该被 fork. 使用 <code>exec</code> 前缀时，程序将会用窗口管理器进程替换脚本进程，所以即使进程进入后台 X 也不会退出。</p>
<h5 id="xserverrc">xserverrc<a hidden class="anchor" aria-hidden="true" href="#xserverrc">#</a></h5>
<p><code>xserverrc</code> 文件是一个启动 X server 的 shell 脚本。如果存在 <code>~/.xserverrc</code> ，<em>startx</em> 和 <em>xinit</em> 都会执行这个文件。如果文件不存在，<em>startx</em> 会使用 <code>/etc/X11/xinit/xserverrc</code>.</p>
<p>为了保持logind的 <a href="https://wiki.archlinux.org/title/General_troubleshooting#Session_permissions">authenticated session 会话</a>，并防止通过切换终端绕过屏幕锁定器， <a href="https://wiki.archlinux.org/title/Xorg">Xorg</a>必须在发生登录的同一虚拟终端上启动。因此建议在<code>~/.xserverrc</code> 中指定 <code>vt$XDG_VTNR</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.xserverrc
<span style="color:#75715e">#!/bin/sh</span>

exec /usr/bin/Xorg -nolisten tcp <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span> vt$XDG_VTNR
</code></pre></div><h5 id="在登录时自动启用-x">在登录时自动启用 X<a hidden class="anchor" aria-hidden="true" href="#在登录时自动启用-x">#</a></h5>
<p>如果使用<a href="https://wiki.archlinux.org/title/Bash">Bash</a>, 编辑 <code>~/.bash_profile</code>,加入如下内容。如果文件不存在，从 <code>/etc/skel/.bash_profile</code> 复制一个。</p>
<p>如果使用 <a href="https://wiki.archlinux.org/title/Zsh">zsh</a>，则编辑 <code>~/.zprofile</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.bash_profile
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> ! $DISPLAY <span style="color:#f92672">&amp;&amp;</span> $XDG_VTNR -eq <span style="color:#ae81ff">1</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
  exec startx
<span style="color:#66d9ef">fi</span>
</code></pre></div><p>如果希望在 X 会话终止时保持登入状态，删除 <code>exec</code>.</p>
<h5 id="automatic-login-into-xorg-without-display-managerhttpswikiarchlinuxorgtitlesystemduserautomatic_login_into_xorg_without_display_manager"><a href="https://wiki.archlinux.org/title/Systemd/User#Automatic_login_into_Xorg_without_display_manager">Automatic login into Xorg without display manager</a><a hidden class="anchor" aria-hidden="true" href="#automatic-login-into-xorg-without-display-managerhttpswikiarchlinuxorgtitlesystemduserautomatic_login_into_xorg_without_display_manager">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S xlogin-git
$ sudo systemctl enable xlogin@username
</code></pre></div><h3 id="常用软件的推荐">常用软件的推荐<a hidden class="anchor" aria-hidden="true" href="#常用软件的推荐">#</a></h3>
<p>注意：大部分软件需要根据所使用的 wm 添加配置才能使用，具体参照他人的配置</p>
<ul>
<li>Font: <a href="https://github.com/ryanoasis/nerd-fonts">nerd</a>-fonts-ibm-plex-mono, nerd-fonts-fira-code, nerd-fonts-jetbrains-mono, ttf-sarasa-gothic(chinese only), infinality(字体渲染美化)</li>
<li>Launcher：dmenu, <a href="https://github.com/davatorium/rofi#configuration">rofi</a></li>
<li>Terminal: alacritty, <a href="https://github.com/cyd01/KiTTY/">kitty</a>, st, wezterm, termite</li>
<li>Editor: <a href="https://github.com/neovim/neovim">neovim</a>, neovide&amp;glrnvim, doom emacs, vscode, sublime-text-nightly</li>
<li>Compositor: picom-jonaburg-git, <a href="https://github.com/yshui/picom">picom</a></li>
<li>Shell: fish, zsh</li>
<li>PDF reader: zathura, atril</li>
<li>Player: <a href="https://zhuanlan.zhihu.com/p/351064855">mpd&amp;ncmpcpp</a>, deadbeaf-git</li>
<li>Notification daemon: dunst&amp;libnotify, notification-daemon</li>
<li>Volume notificator: <a href="https://github.com/florentc/xob">xob</a>, volumeicon</li>
<li>Screen locker: i3lock-color&amp;<a href="https://github.com/betterlockscreen/betterlockscreen">betterlockscreen</a>, xautolock, xscrennserver</li>
<li>System monitor: conky, btop</li>
<li>Theme controler: xsettingsd, lxappearance, qt5ct</li>
<li>Gtk themes: Light: <a href="https://www.gnome-look.org/p/1357889/">Orchis-light</a>, Dark: <a href="https://www.gnome-look.org/p/1267246/">Nordic</a></li>
<li>Qt themes: use <code>qt5ct</code> and <code>qt5-styleplugins</code> to set qt theme follow gtk2 theme</li>
<li>Icon theme: <a href="https://www.gnome-look.org/p/1166289/">Papirus</a></li>
<li>Touchpad: libinput, ibinput-gestures, xdotool</li>
<li>Fetch tool: macchina, rxfetch</li>
<li>Automounter: udiskie</li>
<li>Trash: glib2, gvfs(gui)</li>
<li>壁纸设置器：feh, nitrogen(gui)</li>
<li>文件管理器：thunar, nemo(cli), ranger(cli), pcmanfm(轻量级文件管理器)</li>
<li>电源管理器：xfce4-power-manager, cbatticon</li>
<li>截图工具：flameshot, scrot</li>
<li>输入法：fcitx5</li>
<li>科学上网工具：qv2ray</li>
<li>剪切板管理器：<a href="https://github.com/hluk/CopyQ">copyq</a></li>
<li>云同步工具：nutstore（坚果云）, dropbox</li>
<li>护眼：redshift</li>
<li>屏幕亮度调节器：light, xorg-xbacklight, brightnessctl</li>
</ul>
<p><strong>关于平铺还是浮动</strong></p>
<p>个人建议多数窗口平铺，以下窗口默认浮动：</p>
<p>virtualbox, lxappearance, qq, gpick, qalculator, slickpicker</p>
<p><strong>关于GTK主题和QT主题</strong></p>
<p>我建议让QT程序使用GTK主题，除上文提到的qt5ct再安装qt5-styleplugins</p>
<p>在qt5ct中设置风格为gtk2</p>
<p><strong>配置</strong></p>
<p>从上到下，基本上 star 越多，就越完善，越容易安装与使用：</p>
<ul>
<li><a href="https://github.com/lcpz">lcpz</a>/<a href="https://github.com/lcpz/awesome-copycats">awesome-copycats</a>: awesome (2.5k)</li>
<li><a href="https://github.com/streetturtle">streetturtle</a>/<a href="https://github.com/streetturtle/awesome-wm-widgets">awesome-wm-widgets</a>: awesome (1.5k)</li>
<li><a href="https://github.com/bakkeby">bakkeby</a>/<a href="https://github.com/bakkeby/dwm-flexipatch">dwm-flexipatch</a>:  dwm (618)</li>
<li><a href="https://github.com/siduck">siduck</a>/<a href="https://github.com/siduck/chadwm">chadwm</a>: dwm (612)：很好看的主题</li>
<li><a href="https://github.com/antoniosarosi">antoniosarosi</a>/<a href="https://github.com/antoniosarosi/dotfiles">dotfiles</a>: Qtile/Sepctrwm/Openbox/Xmonad/Dwm (471) 很全的配置（包括Arch 系统安装、桌面环境以及常用软件）</li>
<li><a href="https://github.com/pw4ever">pw4ever</a>/<a href="https://github.com/pw4ever/awesome-wm-config">awesome-wm-config</a>: awesome (223)</li>
<li><a href="https://github.com/ayamir">ayamir</a>/<a href="https://github.com/ayamir/dotfiles">dotfiles</a>: Gentoo/Arch/dwm/awesome (201)</li>
<li><a href="https://github.com/lilydjwg">lilydjwg</a>/<a href="https://github.com/lilydjwg/myawesomerc">myawesomerc</a>: awesome (85) 依云的</li>
</ul>
<h2 id="dwmhttpszhuanlanzhihucomp346719806"><a href="https://zhuanlan.zhihu.com/p/346719806">dwm</a><a hidden class="anchor" aria-hidden="true" href="#dwmhttpszhuanlanzhihucomp346719806">#</a></h2>
<h3 id="dwm与其他wm的区别">dwm与其他wm的区别<a hidden class="anchor" aria-hidden="true" href="#dwm与其他wm的区别">#</a></h3>
<p>前面已经说明了dwm与堆叠式窗口管理器的区别，下面说明一下dwm与其他平铺&amp;动态窗口管理器的区别。</p>
<p>dwm使用C语言编写，使用修改源代码的方式来进行配置。说到源代码可能有些同学就有点害怕，其实修改源代码也很简单，因为有现成的例子可以复(bai)用(piao)嘛！通过直接修改源代码理论上可以确保你的dwm能满足你所有的需求，同时也没有多余的，你不需要的功能。</p>
<p>相比之下，另外一个相当流行的动态窗口管理器i3wm也是使用C语言编写，但是通过修改其配置文件来配置，这相当于i3wm向你暴露可以被配置的接口来满足你的需求，但是这样的配置方式缺点在于你不能向其添加你需要的需求，只能向上游提交issue来完成enhancement。</p>
<p>具有和dwm相似配置能力的窗口管理器是xmonad，它也是通过直接修改源代码的方式来调整配置，但是因为使用haskell编写的所以需要安装相当多的依赖，此外其运行效率也不及dwm。</p>
<h3 id="dwm安装">dwm安装<a hidden class="anchor" aria-hidden="true" href="#dwm安装">#</a></h3>
<p><a href="https://dwm.suckless.org/"><strong>dwm</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S libxinerama
$ wget https://dl.suckless.org/dwm/dwm-6.3.tar.gz
$ tar xpvf dwm-6.3.tar.gz
$ mv dwm-6.3 ~/.dwm
$ cd .dwm
$ make clean install
$ vim ~/.xinitrc
<span style="color:#75715e">#!/bin/bash</span>
exec dwm
</code></pre></div><p><a href="https://st.suckless.org/"><strong>st</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget https://dl.suckless.org/st/st-0.8.5.tar.gz
</code></pre></div><p>如果使用的终端模拟器不是<code>st</code>，需要修改<code>config.def.h</code>文件中的以下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">/* 将其中的st修改为安装的终端模拟器 */</span>
<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>termcmd[] <span style="color:#f92672">=</span> {
     <span style="color:#e6db74">&#34;st&#34;</span>, NULL};
</code></pre></div><p><a href="https://tools.suckless.org/dmenu/"><strong>dmenu</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget https://dl.suckless.org/tools/dmenu-5.1.tar.gz
</code></pre></div><h3 id="dwm配置httpsdwmsucklessorgcustomisation"><a href="https://dwm.suckless.org/customisation/">dwm配置</a><a hidden class="anchor" aria-hidden="true" href="#dwm配置httpsdwmsucklessorgcustomisation">#</a></h3>
<p>配置dwm主要需要修改的文件是config.def.h，主要的配置方式是使用被人写好的patch加必要时候的手动修改。dwm的patch都在其<a href="https://dwm.suckless.org/patches/">官方网站</a></p>
<p>具体过程是这样的：</p>
<ol>
<li>找到你需要的patch并下载</li>
<li>将其移动到~/.dwm目录下</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ patch &lt; dwm*.diff
</code></pre></div><p>之后会输出这个patch过程的详细情况，一般情况不会出现问题</p>
<p>需要注意的是要一个一个来</p>
<p>出现问题之后需要对照如：config.def.h.rej, dwm.c.rej等后缀为rej的文件来手动修改对应的没有rej后缀的源文件</p>
<p>打开之后rej文件中行首标有+的行是需要添加的行，标有-的行是需要删除的行</p>
<p>所有更改都修改完毕之后重新编译安装，执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rm -f ./config.h <span style="color:#f92672">&amp;&amp;</span> sudo make clean install
</code></pre></div><h4 id="startinghttpswikiarchlinuxorgtitledwm"><a href="https://wiki.archlinux.org/title/dwm">Starting</a><a hidden class="anchor" aria-hidden="true" href="#startinghttpswikiarchlinuxorgtitledwm">#</a></h4>
<p>Select <em>Dwm</em> from the menu in a <a href="https://wiki.archlinux.org/title/Display_manager">display manager</a> of choice. Alternatively, to start dwm with <a href="https://wiki.archlinux.org/title/Startx">startx</a> append <code>exec dwm</code> to <code>~/.xinitrc</code> and prepend other programs to execute them as well, for example:</p>
<pre tabindex="0"><code>redshift -O3500; xset r rate 300 50; exec dwm
</code></pre><h4 id="字体和左侧状态栏图标httpswwwcxymmnetarticleqq_36390239112987099"><a href="https://www.cxymm.net/article/qq_36390239/112987099">字体和左侧状态栏图标</a><a hidden class="anchor" aria-hidden="true" href="#字体和左侧状态栏图标httpswwwcxymmnetarticleqq_36390239112987099">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S ttf-nerd-fonts-symbols-mono
$ nvim ~/.local/applications/dwm/dwm-6.2/config.h
/*设置dwm采用图标字体*/
static const char *fonts<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;Symbols Nerd Font:size=14&#34;</span><span style="color:#f92672">}</span>;	
/*图标对应的ASCLL码：https://www.nerdfonts.com/cheat-sheet*/
static const char *tags<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;\ue795&#34;</span>,<span style="color:#e6db74">&#34;\ufc6e&#34;</span>,<span style="color:#e6db74">&#34;\ue235&#34;</span>,<span style="color:#e6db74">&#34;\uf308&#34;</span><span style="color:#f92672">}</span>;		
</code></pre></div><h4 id="statusbar">Statusbar<a hidden class="anchor" aria-hidden="true" href="#statusbar">#</a></h4>
<p>The information that you want dwm to show in the statusbar should be defined with <code>xsetroot -name &quot;&quot;</code> command in <code>~/.xinitrc</code> or <code>~/.xprofile</code> (if you are using a <a href="https://wiki.archlinux.org/title/Display_manager">display manager</a>). For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Statusbar loop</span>
<span style="color:#66d9ef">while</span> true; <span style="color:#66d9ef">do</span>
   xsetroot -name <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> date +<span style="color:#e6db74">&#34;%F %R&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
   sleep 1m    <span style="color:#75715e"># Update time every minute</span>
<span style="color:#66d9ef">done</span> &amp;

<span style="color:#75715e"># Autostart section</span>
pcmanfm &amp; 

exec dwm
</code></pre></div><p><strong>Conky statusbar</strong></p>
<p><a href="https://wiki.archlinux.org/title/Conky">Conky</a> can be printed to the statusbar with <code>xsetroot -name</code>:</p>
<pre tabindex="0"><code>(conky | while read LINE; do xsetroot -name &quot;$LINE&quot;; done) &amp;
exec dwm
</code></pre><h4 id="自动更换壁纸">自动更换壁纸<a hidden class="anchor" aria-hidden="true" href="#自动更换壁纸">#</a></h4>
<p>创建壁纸目录</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/pictures/wallpapers
</code></pre></div><p>安装图片查看器<code>feh</code>,编写更换壁纸的配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S feh
$ nvim ~/.dwm/dwm-wallpaper.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#66d9ef">while</span> true
<span style="color:#66d9ef">do</span>
  feh --recursive --randomize --bg-fill ~/pictures/wallpapers/
  sleep 5m
<span style="color:#66d9ef">done</span>
</code></pre></div><p>启动DWM时，自动执行壁纸配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nvim ~/kler_profiles/.dwm/autostart.sh
<span style="color:#75715e">#!/bin/bash</span>

/bin/bash ~/kler_profiles/.dwm/dwm-wallpaper.sh &amp;
</code></pre></div><h4 id="picom">picom<a hidden class="anchor" aria-hidden="true" href="#picom">#</a></h4>
<p>picom是Xorg的独立合成器，适用于不提供合成功能的窗口管理器（例如 i3，dwm）
他可以给窗口设置淡入淡出、半透明、阴影等视觉效果。</p>
<h4 id="推荐补丁httpwww4k8kxyzarticleweixin_44335269117886927"><a href="http://www.4k8k.xyz/article/weixin_44335269/117886927">推荐补丁</a><a hidden class="anchor" aria-hidden="true" href="#推荐补丁httpwww4k8kxyzarticleweixin_44335269117886927">#</a></h4>
<pre tabindex="0"><code>透明补丁：alphasystray.diff

临时小窗口：dwm-scratchpad-6.2.diff

隐藏空标签：dwm-hide_vacant_tags-6.2.diff

窗口间距：dwm-vanitygaps-20190508-6.2.diff

自动启动脚本：dwm-autostart-20161205-bb3bd6f.diff

窗口全屏：dwm-actualfullscreen-20191112-cb3f58a.diff

状态栏显示多个窗口信息：dwm-awesomebar-20191003-80e2a76.diff
</code></pre><h2 id="awesomehttpsblogkeluorgtech20211229linux-awesome-wmhtml"><a href="https://blog.kelu.org/tech/2021/12/29/linux-awesome-wm.html">awesome</a><a hidden class="anchor" aria-hidden="true" href="#awesomehttpsblogkeluorgtech20211229linux-awesome-wmhtml">#</a></h2>
<p>awesome是一个高度可配置的、用于Xorg的下一代框架窗口管理器。它非常快而且可扩展。它主要针对的是高级用户、开发人员和任何处理日常计算任务的人，他们希望对其图形环境进行精细的控制。</p>
<h3 id="安装httpsarchlinuxblogmediumcominstalling-and-configuring-awesome-wm-b4684fd09c9"><a href="https://archlinuxblog.medium.com/installing-and-configuring-awesome-wm-b4684fd09c9">安装</a><a hidden class="anchor" aria-hidden="true" href="#安装httpsarchlinuxblogmediumcominstalling-and-configuring-awesome-wm-b4684fd09c9">#</a></h3>
<p><a href="https://wiki.archlinux.org/title/awesome#Installation">Install</a> the <a href="https://archlinux.org/packages/?name=awesome">awesome</a> package. The development version is <a href="https://aur.archlinux.org/packages/awesome-git/">awesome-git</a><sup>AUR</sup>, which is considered unstable and may have a different configuration API.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S awesome
$ vim ~/.xinitrc
<span style="color:#75715e">#!/bin/bash</span>
exec awesome
</code></pre></div><h3 id="自定义配置">自定义配置<a hidden class="anchor" aria-hidden="true" href="#自定义配置">#</a></h3>
<p>Awesome提供了一个设置文件 <strong>rc.lua</strong> ，把它拷贝到~/.config/Awesome/里。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.config/awesome/
$ cp /etc/xdg/awesome/rc.lua ~/.config/awesome/
</code></pre></div><ul>
<li>登录后顶部有一条类似Windows任务栏的东西，叫做<strong>状态栏（Status Bar）</strong>。</li>
<li>状态栏的最左侧是Awesome的图标，点击它将会打开一个小菜单，这就是Awesome的<strong>主菜单</strong>。</li>
<li>Awesome 图标的右侧可以看到阿拉伯数字1-9，这些叫做<strong>标签（Tag）</strong>，类似GNome或者KDE下的虚拟桌面。</li>
<li>在状态栏最右侧是<strong>布局切换器</strong>，布局（Layout）是根据屏幕上的可用空间来调整窗口位置、尺寸的方式。Awesome支持多种布局。</li>
</ul>
<p>每次修改完使用 <code>Mod4 + ctrl + R</code> 重新加载配置。</p>
<p>Some good examples of rc.lua would be as follows:</p>
<ul>
<li><a href="https://github.com/awesomeWM/awesome/issues/1395">Awesome screenshot thread</a></li>
<li><a href="https://github.com/setkeh/Awesome">Setkeh&rsquo;s Awesome Configuration</a></li>
<li><a href="https://github.com/copycat-killer/awesome-copycats">User configuration that supports different themes, including a status bar</a></li>
<li><a href="https://github.com/WillPower3309/awesome-dotfiles">Awesome configuration with two modern themes</a></li>
</ul>
<h4 id="定制布局和标签httpswwwhahackcomtoolsawesome"><a href="https://www.hahack.com/tools/awesome/">定制布局和标签</a><a hidden class="anchor" aria-hidden="true" href="#定制布局和标签httpswwwhahackcomtoolsawesome">#</a></h4>
<h5 id="定制布局">定制布局<a hidden class="anchor" aria-hidden="true" href="#定制布局">#</a></h5>
<p>如果希望改变默认的布局和修改布局的切换顺序，可以通过修改 <strong>rc.lua</strong> 文件来实现。找到像这样的一段代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">layouts <span style="color:#f92672">=</span>
 {
     awful.layout.suit.floating,
     awful.layout.suit.tile,
     awful.layout.suit.tile.left,
     awful.layout.suit.tile.bottom,
     awful.layout.suit.tile.top,
     awful.layout.suit.fair,
     awful.layout.suit.fair.horizontal,
     awful.layout.suit.spiral,
     awful.layout.suit.spiral.dwindle,
     awful.layout.suit.max,
     awful.layout.suit.max.fullscreen,
     awful.layout.suit.magnifier
 }
</code></pre></div><p>这是所有Awesome提供的布局方案，并且是按切换顺序排列的。可以通过调整顺序来改变实际的布局切换顺序。如果不喜欢其中的一些布局方案，你可以把相应的代码给去掉。比如，对于我而言，全屏、放大和螺旋式布局都是不常用的，并且我希望第一个布局是平铺，而不是浮动，因此可以改成：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">layouts <span style="color:#f92672">=</span>
{
    awful.layout.suit.tile,
    awful.layout.suit.tile.left,
    awful.layout.suit.tile.bottom,
    awful.layout.suit.tile.top,
    awful.layout.suit.fair,
    awful.layout.suit.fair.horizontal,
    awful.layout.suit.floating,
    awful.layout.suit.max
}
</code></pre></div><p>完成后保存修改，然后按 Mod4 + Control + r 重启 Awesome看看变化。</p>
<h5 id="浮动窗口">浮动窗口<a hidden class="anchor" aria-hidden="true" href="#浮动窗口">#</a></h5>
<p>有些程序的窗口不适合采用平铺的方式，比如Firefox的下载窗口，或者Gimp的图层窗口、工具栏窗口等，这时候我们希望将这样的窗口设置为浮动：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- 需要自动设置为浮动的程序</span>
<span style="color:#75715e">-- 只需要把你想要设置为浮动窗口的程序的Instance或者class按照下面的格式写进去就行</span>
<span style="color:#75715e">-- 了。在awesome下用Mod4 + Ctr + i就可以看到当前程序的instance和class名字</span>
<span style="color:#75715e">-- { { { Rules</span>
awful.rules.rules <span style="color:#f92672">=</span> {
   <span style="color:#75715e">-- All clients will match this rule.</span>
   {rule <span style="color:#f92672">=</span> {},
    properties <span style="color:#f92672">=</span> {border_width <span style="color:#f92672">=</span> beautiful.border_width,
                  border_color <span style="color:#f92672">=</span> beautiful.border_normal,
                  focus <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>,
                  keys <span style="color:#f92672">=</span> clientkeys,
                  buttons <span style="color:#f92672">=</span> clientbuttons}},
   {rule <span style="color:#f92672">=</span> {class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPlayer&#34;</span>},
    properties <span style="color:#f92672">=</span> {floating <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>}},
   {rule <span style="color:#f92672">=</span> {class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Smplayer&#34;</span>},
    properties <span style="color:#f92672">=</span> {floating <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>, tag <span style="color:#f92672">=</span> tags[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">6</span>]}},
   { rule <span style="color:#f92672">=</span> { class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pinentry&#34;</span> },
     properties <span style="color:#f92672">=</span> { floating <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span> } },
   { rule <span style="color:#f92672">=</span> { class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;gimp&#34;</span> },
     properties <span style="color:#f92672">=</span> { floating <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span> } },
   {rule <span style="color:#f92672">=</span> {class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Firefox&#34;</span>},
     properties <span style="color:#f92672">=</span> {tag <span style="color:#f92672">=</span> tags[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>]}},
   {rule <span style="color:#f92672">=</span> {class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Firefox&#34;</span>, name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Download&#34;</span>},
     properties <span style="color:#f92672">=</span> {floating <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>}},
   {rule <span style="color:#f92672">=</span> {class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;VirtualBox&#34;</span>},
     properties <span style="color:#f92672">=</span> {floating <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>, tag <span style="color:#f92672">=</span> tags[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>]}},
   <span style="color:#75715e">-- Set Firefox to always map on tags number 2 of screen 1.</span>
   <span style="color:#75715e">-- { rule = { class = &#34;Firefox&#34; },</span>
   <span style="color:#75715e">--   properties = { tag = tags[1][2] } },</span>
}
<span style="color:#75715e">-- } } }</span>
</code></pre></div><h5 id="定制标签">定制标签<a hidden class="anchor" aria-hidden="true" href="#定制标签">#</a></h5>
<p>只要你愿意，你可以为每一个标签命名，并为每一个标签设置默认布局。这是 <strong>rc.lua</strong> 里默认的标签设置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- { { { Tags</span>
<span style="color:#75715e">-- Define a tag table which hold all screen tags.</span>
tags <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, screen.count() <span style="color:#66d9ef">do</span>
    <span style="color:#75715e">-- Each screen has its own tag table.</span>
    tags[s] <span style="color:#f92672">=</span> awful.tag({ <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span> }, s, layouts[<span style="color:#ae81ff">1</span>])
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- } } }</span>
</code></pre></div><p>现在我们可以改变每个标签的名字，并为每一个设置默认布局。参考下面这段代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- { { { Tags</span>
<span style="color:#75715e">-- Define a tag table which will hold all screen tags.</span>
tags <span style="color:#f92672">=</span> {
  names  <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;main&#34;</span>, <span style="color:#e6db74">&#34;www&#34;</span>, <span style="color:#e6db74">&#34;im&#34;</span>, <span style="color:#e6db74">&#34;gimp&#34;</span>, <span style="color:#e6db74">&#34;office&#34;</span>, <span style="color:#e6db74">&#34;music&#34;</span>, <span style="color:#e6db74">&#34;virtual&#34;</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span> },
  layout <span style="color:#f92672">=</span> { layouts[<span style="color:#ae81ff">1</span>], layouts[<span style="color:#ae81ff">8</span>], layouts[<span style="color:#ae81ff">8</span>], layouts[<span style="color:#ae81ff">7</span>], layouts[<span style="color:#ae81ff">1</span>],
             layouts[<span style="color:#ae81ff">7</span>], layouts[<span style="color:#ae81ff">8</span>], layouts[<span style="color:#ae81ff">1</span>], layouts[<span style="color:#ae81ff">1</span>]
}}
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, screen.count() <span style="color:#66d9ef">do</span>
    <span style="color:#75715e">-- Each screen has its own tag table.</span>
    tags[s] <span style="color:#f92672">=</span> awful.tag(tags.names, s, tags.layout)
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- } } }</span>
</code></pre></div><p>在这个例子中，我们还为前5个标签分别命名为&quot;main&quot;, “www”, “im”, “gimp” 和&quot;office&quot;， 你可以根据自己的喜好进行更改。另外，我们还使用 <em>layouts</em>来指定每一个标签的布局， &ldquo;[]&ldquo;里的数字就是我们刚刚 <a href="https://www.hahack.com/tools/awesome/#sec-5-2-1">定制布局</a>的时候设置的布局的顺序，例如[1] 就是第1个布局。</p>
<h4 id="设置默认终端和编辑器">设置默认终端和编辑器<a hidden class="anchor" aria-hidden="true" href="#设置默认终端和编辑器">#</a></h4>
<p>可以在 <strong>rc.lua</strong> 中修改下面的代码来设置默认的终端和编辑器：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">terminal <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xterm&#34;</span>
editor <span style="color:#f92672">=</span> os.getenv(<span style="color:#e6db74">&#34;EDITOR&#34;</span>) <span style="color:#f92672">or</span> <span style="color:#e6db74">&#34;nano&#34;</span>
</code></pre></div><h4 id="美化">美化<a hidden class="anchor" aria-hidden="true" href="#美化">#</a></h4>
<h5 id="更换主题">更换主题<a hidden class="anchor" aria-hidden="true" href="#更换主题">#</a></h5>
<p><a href="https://awesomewm.org/doc/api/libraries/beautiful.html">Beautiful</a>是一个Lua库，它允许你使用外部文件来为awesome做主题，在不改变你的<code>rc.lua</code>的情况下，动态地改变你整个awesome的颜色和墙纸变得非常简单。</p>
<p>Awesome自带了三套主题： <em>default</em> 、 <em>sky</em> 和 <em>zenburn</em> 。</p>
<p>The default theme is at <code>/usr/share/awesome/themes/default</code>. Copy it to <code>~/.config/awesome/themes/default</code> (optionally copy them all) and change <code>rc.lua</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#960050;background-color:#1e0010">$</span> cp <span style="color:#f92672">-</span>av <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>share<span style="color:#f92672">/</span>awesome<span style="color:#f92672">/</span>themes <span style="color:#f92672">~/</span>.config<span style="color:#f92672">/</span>awesome<span style="color:#f92672">/</span>themes
<span style="color:#75715e">-- beautiful.init(gears.filesystem.get_themes_dir() .. &#34;default/theme.lua&#34;)</span>
<span style="color:#66d9ef">local</span> theme_path <span style="color:#f92672">=</span> string.format(<span style="color:#e6db74">&#34;%s/.config/awesome/themes/%s/theme.lua&#34;</span>, os.getenv(<span style="color:#e6db74">&#34;HOME&#34;</span>), <span style="color:#e6db74">&#34;default&#34;</span>)
beautiful.init(theme_path)
</code></pre></div><p>把其中的 <em>default</em> 更换成其他主题名字即可。</p>
<p>或者直接添加路径</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">beautiful.init(<span style="color:#e6db74">&#34;/usr/share/awesome/themes/default/theme.lua&#34;</span>)
</code></pre></div><p>如果嫌主题太少，这里有很多PP的用户定制主题： <a href="https://github.com/mikar/awesome-themes">Github主页</a>，下载下来然后拷贝到~/.config/awesome/themes即可以使用。</p>
<h5 id="更换背景图片">更换背景图片<a hidden class="anchor" aria-hidden="true" href="#更换背景图片">#</a></h5>
<p>主题的 <code>theme.lua</code> 文件可以配置背景、字体等内容，改一下图片路径：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">theme.wallpaper <span style="color:#f92672">=</span> themes_path <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34;default/background.png&#34;</span>
</code></pre></div><p>我希望背景图片最大化但不要拉伸，所以我将原本的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">gears.wallpaper.maximized(wallpaper, s, <span style="color:#66d9ef">true</span>)
</code></pre></div><p>改成了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">gears.wallpaper.maximized(wallpaper, s, <span style="color:#66d9ef">false</span>)
</code></pre></div><p>同时背景设置还有其他的方法：</p>
<ul>
<li>centered (surf, s, background, scale)</li>
<li>tiled (surf, s, offset)</li>
<li>fit (surf, s, background)</li>
</ul>
<p>可以参考<a href="https://awesomewm.org/apidoc/utility_libraries/gears.wallpaper.html#maximized">官方文档</a> 或者 <a href="https://github.com/awesomeWM/awesome/blob/master/lib/gears/wallpaper.lua">源码</a></p>
<h5 id="修改主菜单">修改主菜单<a hidden class="anchor" aria-hidden="true" href="#修改主菜单">#</a></h5>
<p>可以通过修改 <strong>rc.lua</strong> 的相应内容来定制主菜单的内容。下面是我的配置。里面的设置完全根据我个人口味，而且用了几个第三方的icon。因此代码仅供参考，不建议照搬：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- { { { Menu</span>
<span style="color:#75715e">-- Create a laucher widget and a main menu</span>
myawesomemenu <span style="color:#f92672">=</span> {
   { <span style="color:#e6db74">&#34;manual&#34;</span>, terminal <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34; -e man awesome&#34;</span> },
   { <span style="color:#e6db74">&#34;edit config&#34;</span>, editor_cmd <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">..</span> awesome.conffile },
   { <span style="color:#e6db74">&#34;restart&#34;</span>, awesome.restart },
   { <span style="color:#e6db74">&#34;quit&#34;</span>, awesome.quit }
}

<span style="color:#75715e">-- 创建一个favorite子菜单</span>
myfavoriteapps <span style="color:#f92672">=</span> {
   { <span style="color:#e6db74">&#34;Terminal&#34;</span>, terminal },
   { <span style="color:#e6db74">&#34;Firefox&#34;</span>, <span style="color:#e6db74">&#34;firefox&#34;</span> },
   { <span style="color:#e6db74">&#34;QQ&#34;</span>, <span style="color:#e6db74">&#34;qq2012&#34;</span>},
   { <span style="color:#e6db74">&#34;XMind&#34;</span>, <span style="color:#e6db74">&#34;/usr/local/xmind/xmind&#34;</span> },
   { <span style="color:#e6db74">&#34;Synaptic&#34;</span>, <span style="color:#e6db74">&#34;gksudo synaptic&#34;</span> },
   { <span style="color:#e6db74">&#34;Transmission&#34;</span>, <span style="color:#e6db74">&#34;transmission-gtk&#34;</span>},
   { <span style="color:#e6db74">&#34;Software-Center&#34;</span>, <span style="color:#e6db74">&#34;gksudo software-center&#34;</span> },
   { <span style="color:#e6db74">&#34;Update-Manager&#34;</span>, <span style="color:#e6db74">&#34;gksudo update-manager&#34;</span> },
   { <span style="color:#e6db74">&#34;JabRef&#34;</span>, <span style="color:#e6db74">&#34;sh /home/ehome/JabRef.sh&#34;</span> }
}

mymainmenu <span style="color:#f92672">=</span> awful.menu({ items <span style="color:#f92672">=</span> {
{ <span style="color:#e6db74">&#34;awesome&#34;</span>, myawesomemenu, beautiful.awesome_icon },
{ <span style="color:#e6db74">&#34;Debian&#34;</span>, debian.menu.Debian_menu.Debian , theme.deb_icon },
<span style="color:#75715e">-- 添加Favorite菜单，并将icon设置为theme.fav_icon</span>
{ <span style="color:#e6db74">&#34;Favorite&#34;</span>, myfavoriteapps, theme.fav_icon },
{ <span style="color:#e6db74">&#34;Home&#34;</span>, <span style="color:#e6db74">&#34;dolphin&#34;</span> , theme.home_icon },
<span style="color:#75715e">-- 添加Emacs菜单项</span>
{ <span style="color:#e6db74">&#34;Emacs&#34;</span>, <span style="color:#e6db74">&#34;emacs&#34;</span> },
<span style="color:#75715e">-- 添加Chrome菜单项</span>
{ <span style="color:#e6db74">&#34;Chrome&#34;</span>, <span style="color:#e6db74">&#34;google-chrome&#34;</span> },
<span style="color:#75715e">-- 添加一个关机对话框</span>
{ <span style="color:#e6db74">&#34;Log out&#34;</span>, <span style="color:#e6db74">&#34;/usr/local/shutdown.sh&#34;</span> }
 }
})

mylauncher <span style="color:#f92672">=</span> awful.widget.launcher({
image <span style="color:#f92672">=</span> image(beautiful.awesome_icon),
 menu <span style="color:#f92672">=</span> mymainmenu })
<span style="color:#75715e">-- } } }</span>
</code></pre></div><h5 id="gtk--qt-主题">GTK &amp; QT 主题<a hidden class="anchor" aria-hidden="true" href="#gtk--qt-主题">#</a></h5>
<p>安装工具</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S lxappearance qt5ct qt5-styleplugins
$ export QT_QPA_PLATFORMTHEME<span style="color:#f92672">=</span>qt5ct
</code></pre></div><ul>
<li>
<p>下载解压 Gtk themes  <a href="https://www.gnome-look.org/p/1267246/">Nordic</a> 到 ~/.themes</p>
</li>
<li>
<p>下载解压 Icon theme <a href="https://www.gnome-look.org/p/1166289/">Papirus</a> 到 ~/.icons</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lxappearance <span style="color:#75715e"># 选择 theme</span>
$ qt5ct <span style="color:#75715e"># set qt theme follow gtk2 theme</span>
</code></pre></div><h4 id="插件">插件<a hidden class="anchor" aria-hidden="true" href="#插件">#</a></h4>
<p>Awesome 里的插件指的是你可以在 <em>wibox</em> 上添加的小插件，通过使用插件（Widget），我们可以在状态栏上添加一些有用的信息，例如内存使用、CPU温度、电池状态，等等。</p>
<p>对于新手，可以使用其他用户创建的插件库，这些插件库集成了功能齐全的插件，因此免去了自己编写插件的工作。这类的插件库有很多，推荐的是 <a href="https://github.com/vicious-widgets/vicious">Vicious</a>。</p>
<h5 id="创建插件">创建插件<a hidden class="anchor" aria-hidden="true" href="#创建插件">#</a></h5>
<p>要创建插件，可以使用 <em>widget()</em> 函数，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">mysystray <span style="color:#f92672">=</span> widget({type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;systray&#34;</span>})
myicon <span style="color:#f92672">=</span> widget({ type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;imagebox&#34;</span> })
myicon.image <span style="color:#f92672">=</span> image(awful.util.getdir(<span style="color:#e6db74">&#34;config&#34;</span>) <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34;/myicon.png&#34;</span>)
mytextbox <span style="color:#f92672">=</span> widget({ type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;textbox&#34;</span> })
mytextbox.text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello, world!&#34;</span>
</code></pre></div><h5 id="插件的类型">插件的类型<a hidden class="anchor" aria-hidden="true" href="#插件的类型">#</a></h5>
<p>使用 <em>widget()</em> 函数创建插件的时候需要指定插件类型，Awesome自带的插件包括：</p>
<ul>
<li>systray：系统托盘插件。Awesome默认已经添加，就在状态栏上位于日期和时间左侧的区域。对于一些支持最小化到系统托盘的程序，例如ibus、chrome、shutter等，它们的图标将被放置在这里。</li>
<li>imagebox：展示一张图片。常用来和textbox一起搭配使用，创建启动器、图标和分隔符。<a href="http://awesome.naquadah.org/wiki/Nice_Icons">这里</a> 收集了很多精美的图标。</li>
<li>textboxtextbox：插件用来显示一段文本，这是最常用的插件。例如，在<a href="#%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6">创建插件</a>部分我们已经创建了一个名为mytextbox的textbox插件，并且插件显示的文本内容是&quot;Hello, World!&quot;。要修改文本内容，可以直接修改 <strong>rc.lua</strong>文件中的相应代码，或在终端中使用下面命令：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;mytextbox.text = &#34;</span>Foo Bar!<span style="color:#e6db74">&#34;&#34;</span> | awesome-client
</code></pre></div><p>Awesome还提供了<a href="https://awesomewm.org/doc/api/classes/gears.timer.html">计时器的API</a>， 允许我们周期性的执行或更新插件。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">mytimer <span style="color:#f92672">=</span> timer({ timeout <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span> })
mytimer:add_signal(<span style="color:#e6db74">&#34;timeout&#34;</span>, <span style="color:#66d9ef">function</span>() mytextbox.text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello awesome world!&#34;</span> <span style="color:#66d9ef">end</span>)
mytimer:start()
</code></pre></div><p>textbox的文本属性（颜色、字体）是可以通过使用 <a href="http://en.wikipedia.org/wiki/Pango">Pango</a> 标记语言来修改。最简单的例子是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">mytextbox.text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;span color=&#34;white&#34;&gt;Sacrebleu, I have seen a ghost!&lt;/span&gt; &#39;</span>
</code></pre></div><p>要了解更多textbox的设置，例如改变背景颜色、边框、文本对齐等，可以参看Awesome的<a href="https://awesomewm.org/doc/api/classes/wibox.widget.textbox.html">API文档</a>。</p>
<h5 id="推荐实用插件">推荐：实用插件<a hidden class="anchor" aria-hidden="true" href="#推荐实用插件">#</a></h5>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets">awesome-wm-widgets</a> 收集了丰富的插件：</p>
<ul>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/battery-widget">battery-widget</a></p>
</li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/brightness-widget">brightness-widget</a></p>
</li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/calendar-widget">calendar-widget</a></p>
</li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/logout-menu-widget">logout-menu-widget</a></p>
</li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/net-speed-widget">net-speed-widget</a></p>
</li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/translate-widget">translate-widget</a></p>
</li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/volume-widget">volume-widget</a>: need <a href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#ALSA_utilities">amixer</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S pulseaudio alsa-utils
$ pulseaudio --start
</code></pre></div><p>custom shotcuts</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.key({ modkey }, <span style="color:#e6db74">&#34;]&#34;</span>, <span style="color:#66d9ef">function</span>() volume_widget:inc(<span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span>
 <span style="color:#e6db74">&#34;increase the volume&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
awful.key({ modkey }, <span style="color:#e6db74">&#34;[&#34;</span>, <span style="color:#66d9ef">function</span>() volume_widget:dec(<span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span>
 <span style="color:#e6db74">&#34;decrease the volume&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
awful.key({ modkey }, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">&#34;</span>, <span style="color:#66d9ef">function</span>() volume_widget:toggle() <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;switch between mute and unmute&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
</code></pre></div></li>
<li>
<p><a href="https://github.com/streetturtle/awesome-wm-widgets/tree/master/weather-widget">weather-widget</a></p>
</li>
</ul>
<h5 id="音量控制插件">音量控制插件<a hidden class="anchor" aria-hidden="true" href="#音量控制插件">#</a></h5>
<p>Awesome 自己不提供音量控制插件，如果未经设置，还会发现原本键盘上的多媒体按键都会失效，这是因为没有让 Awesome 绑定这些热键。下面实现一个音量控制插件，并且将音量控制绑定到多媒体键盘的音量加（XF86AudioRaiseVolume）、音量减（XF86AudioLowerVolume）、静音（XF86AudioMute）几个按键上。</p>
<p>首先实现一个音量控制插件，将它保存为 ~/.config/awesome/volume.lua：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- Create a volume control</span>

volume_widget <span style="color:#f92672">=</span> widget({ type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;textbox&#34;</span>, name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tb_volume&#34;</span>,
                         align <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span> })

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">update_volume</span>(widget)
   <span style="color:#66d9ef">local</span> fd <span style="color:#f92672">=</span> io.popen(<span style="color:#e6db74">&#34;amixer sget Master&#34;</span>)
   <span style="color:#66d9ef">local</span> status <span style="color:#f92672">=</span> fd:read(<span style="color:#e6db74">&#34;*all&#34;</span>)
   fd:close()

   <span style="color:#66d9ef">local</span> volume <span style="color:#f92672">=</span> tonumber(string.match(status, <span style="color:#e6db74">&#34;(%d?%d?%d)%%&#34;</span>)) <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>
   <span style="color:#75715e">-- volume = string.format(&#34;% 3d&#34;, volume)</span>

   status <span style="color:#f92672">=</span> string.match(status, <span style="color:#e6db74">&#34;%[(o[^%]]*)%]&#34;</span>)

   <span style="color:#75715e">-- starting colour</span>
   <span style="color:#66d9ef">local</span> sr, sg, sb <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3F</span>, <span style="color:#ae81ff">0x3F</span>, <span style="color:#ae81ff">0x3F</span>
   <span style="color:#75715e">-- ending colour</span>
   <span style="color:#66d9ef">local</span> er, eg, eb <span style="color:#f92672">=</span> <span style="color:#ae81ff">0xDC</span>, <span style="color:#ae81ff">0xDC</span>, <span style="color:#ae81ff">0xCC</span>

   <span style="color:#66d9ef">local</span> ir <span style="color:#f92672">=</span> volume <span style="color:#f92672">*</span> (er <span style="color:#f92672">-</span> sr) <span style="color:#f92672">+</span> sr
   <span style="color:#66d9ef">local</span> ig <span style="color:#f92672">=</span> volume <span style="color:#f92672">*</span> (eg <span style="color:#f92672">-</span> sg) <span style="color:#f92672">+</span> sg
   <span style="color:#66d9ef">local</span> ib <span style="color:#f92672">=</span> volume <span style="color:#f92672">*</span> (eb <span style="color:#f92672">-</span> sb) <span style="color:#f92672">+</span> sb
   interpol_colour <span style="color:#f92672">=</span> string.format(<span style="color:#e6db74">&#34;%.2x%.2x%.2x&#34;</span>, ir, ig, ib)
   <span style="color:#66d9ef">if</span> string.find(status, <span style="color:#e6db74">&#34;on&#34;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">true</span>) <span style="color:#66d9ef">then</span>
      volume <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &lt;span background=&#39;#&#34;</span> <span style="color:#f92672">..</span> interpol_colour <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34;&#39;&gt;   &lt;/span&gt;&#34;</span>
   <span style="color:#66d9ef">else</span>
      volume <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &lt;span color=&#39;red&#39; background=&#39;#&#34;</span> <span style="color:#f92672">..</span> interpol_colour <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34;&#39;&gt;
</span><span style="color:#e6db74">       M
</span><span style="color:#e6db74">      &lt;/span&gt;&#34;</span>
   <span style="color:#66d9ef">end</span>
   widget.text <span style="color:#f92672">=</span> volume
<span style="color:#66d9ef">end</span>

update_volume(volume_widget)
awful.hooks.timer.register(<span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">function</span> () update_volume(volume_widget) <span style="color:#66d9ef">end</span>)
</code></pre></div><p>然后编辑 <strong>rc.lua</strong> ，在开头引入这个插件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- Volume contrl</span>
<span style="color:#66d9ef">local</span> volume_widget <span style="color:#f92672">=</span> require(<span style="color:#e6db74">&#34;volume&#34;</span>)
</code></pre></div><p>在 wibox 中添加这个插件，例如放在系统托盘的右侧：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">    <span style="color:#75715e">-- Add widgets to the wibox</span>
    s.mywibox:setup {
        layout <span style="color:#f92672">=</span> wibox.layout.align.horizontal,
        { <span style="color:#75715e">-- Left widgets</span>
          ...
        },
        s.mytasklist, <span style="color:#75715e">-- Middle widget</span>
        { <span style="color:#75715e">-- Right widgets</span>
          ...
          volume_widget
          ...
        },
</code></pre></div><p>最后绑定到几个多媒体键：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- volume control</span>
awful.key({ }, <span style="color:#e6db74">&#34;XF86AudioRaiseVolume&#34;</span>, <span style="color:#66d9ef">function</span> ()
             awful.util.spawn(<span style="color:#e6db74">&#34;amixer set Master 9%+&#34;</span>) <span style="color:#66d9ef">end</span>),
awful.key({ }, <span style="color:#e6db74">&#34;XF86AudioLowerVolume&#34;</span>, <span style="color:#66d9ef">function</span> ()
             awful.util.spawn(<span style="color:#e6db74">&#34;amixer set Master 9%-&#34;</span>) <span style="color:#66d9ef">end</span>),
awful.key({ }, <span style="color:#e6db74">&#34;XF86AudioMute&#34;</span>, <span style="color:#66d9ef">function</span> ()
             awful.util.spawn(<span style="color:#e6db74">&#34;amixer sset Master toggle&#34;</span>) <span style="color:#66d9ef">end</span>),
</code></pre></div><p>这个插件将在状态栏放置一个亮度随音量大小改变的白色小方块，当系统处于静音状态时，图标将变为一个红色的 <strong>M</strong> 字符。</p>
<h5 id="vicioushttpsviciousreadthedocsioenlatestindexhtml"><a href="https://vicious.readthedocs.io/en/latest/index.html">Vicious</a><a hidden class="anchor" aria-hidden="true" href="#vicioushttpsviciousreadthedocsioenlatestindexhtml">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S vicious
</code></pre></div><p>在 <code>rc.lua</code> 头部增加声明信息并添加 Date Widget：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#66d9ef">local</span> vicious <span style="color:#f92672">=</span> require(<span style="color:#e6db74">&#34;vicious&#34;</span>)
datewidget <span style="color:#f92672">=</span> wibox.widget.textbox()
vicious.register(datewidget, vicious.widgets.date, <span style="color:#e6db74">&#34;%b %d, %R&#34;</span>)
</code></pre></div><p>最后添加到 <code>wibox</code> (statusbar) 中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">    <span style="color:#75715e">-- Add widgets to the wibox</span>
    s.mywibox:setup {
        layout <span style="color:#f92672">=</span> wibox.layout.align.horizontal,
        { <span style="color:#75715e">-- Left widgets</span>
          ...
        },
        s.mytasklist, <span style="color:#75715e">-- Middle widget</span>
        { <span style="color:#75715e">-- Right widgets</span>
          ...
          datewidget
          ...
        },
</code></pre></div><h5 id="xob-音量控制">xob 音量控制<a hidden class="anchor" aria-hidden="true" href="#xob-音量控制">#</a></h5>
<p>Awesome 自己不提供音量控制插件，如果未经设置，还会发现原本键盘上的多媒体按键都会失效，这是因为没有让 Awesome 。下面实现一个音量控制插件，并且将音量控制绑定到按键上。</p>
<p><a href="https://github.com/florentc/xob"><strong>xob</strong></a></p>
<p>install pulseaudio</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S pulseaudio pamixer
</code></pre></div><p>install xob</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yay -S xob
</code></pre></div><p>Ready to use volume bar for pulseaudio</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S python-pip
$ pip install pulsectl
$ mkdir -p ~/.local/bin
$ vim ~/.local/bin/pulse-volume-watcher.py <span style="color:#75715e"># copy from xob doc</span>
$ chmod u+x ~/.local/bin/pulse-volume-watcher.py
</code></pre></div><p>为绑定音量热键，在 rc.lua 文件的 globalkeys 里加入</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.key({ modkey }, <span style="color:#e6db74">&#34;]&#34;</span>,
    <span style="color:#66d9ef">function</span> ()
        awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;pamixer -i 1&#34;</span>)
    <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;increase the volume&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
awful.key({ modkey }, <span style="color:#e6db74">&#34;[&#34;</span>,
    <span style="color:#66d9ef">function</span> ()
        awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;pamixer -d 1&#34;</span>)
    <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;decrease the volume&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
awful.key({ modkey }, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">&#34;</span>,
    <span style="color:#66d9ef">function</span> ()
        awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;pamixer -t&#34;</span>)
    <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;switch between mute and unmute&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
</code></pre></div><p>开机启动 xob，配置下面自启动<a href="#%E6%96%B9%E6%A1%88%E4%B8%80">方案一</a>后添加如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">run_once({ <span style="color:#e6db74">&#34;/home/kurome/.local/bin/pulse-volume-watcher.py | xob&#34;</span> })
</code></pre></div><h5 id="屏幕亮度控制">屏幕亮度控制<a hidden class="anchor" aria-hidden="true" href="#屏幕亮度控制">#</a></h5>
<p>用 xbacklight 命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pacman -S xorg-xbacklight
xbacklight -set <span style="color:#ae81ff">50</span>  <span style="color:#75715e"># 亮度设置在 50%</span>
xbacklight -inc <span style="color:#ae81ff">10</span>  <span style="color:#75715e"># 亮度增加 10%</span>
xbacklight -dec <span style="color:#ae81ff">10</span>  <span style="color:#75715e"># 亮度减少 10%</span>
xbacklight -get     <span style="color:#75715e"># 获取当前亮度</span>
</code></pre></div><h4 id="消息交互">消息交互<a hidden class="anchor" aria-hidden="true" href="#消息交互">#</a></h4>
<p>Naughty 是 Awesome 中的一个 lua 库，用于实现弹出消息框。利用 Naughty，我们可以实现在后台执行命令，然后在弹出消息框中显示结果。</p>
<p>首先要确保 <strong>rc.lua</strong> 的开头有这一行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">require(<span style="color:#e6db74">&#34;naughty&#34;</span>)
</code></pre></div><p>如果想更改naughty的默认设置，可以添加下面的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">naughty.config.default_preset.timeout        <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
naughty.config.default_preset.screen         <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
naughty.config.default_preset.position       <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top_right&#34;</span>
naughty.config.default_preset.margin         <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
naughty.config.default_preset.height         <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>
naughty.config.default_preset.width          <span style="color:#f92672">=</span> <span style="color:#ae81ff">300</span>
naughty.config.default_preset.gap            <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
naughty.config.default_preset.ontop          <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
naughty.config.default_preset.font           <span style="color:#f92672">=</span> beautiful.font <span style="color:#f92672">or</span> <span style="color:#e6db74">&#34;Verdana 8&#34;</span>
naughty.config.default_preset.icon           <span style="color:#f92672">=</span> <span style="color:#66d9ef">nil</span>
naughty.config.default_preset.icon_size      <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>
naughty.config.default_preset.fg             <span style="color:#f92672">=</span> beautiful.fg_focus <span style="color:#f92672">or</span> <span style="color:#e6db74">&#39;#ffffff&#39;</span>
naughty.config.default_preset.bg             <span style="color:#f92672">=</span> beautiful.bg_focus <span style="color:#f92672">or</span> <span style="color:#e6db74">&#39;#535d6c&#39;</span>
naughty.config.presets.normal.border_color   <span style="color:#f92672">=</span> beautiful.border_focus <span style="color:#f92672">or</span> <span style="color:#e6db74">&#39;#535d6c&#39;</span>
naughty.config.default_preset.border_width   <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
naughty.config.default_preset.hover_timeout  <span style="color:#f92672">=</span> <span style="color:#66d9ef">nil</span>
</code></pre></div><p>下面利用sdcv实现一个词典工具，绑定到 Mod4 + d 上，更多的例子可以参考 <a href="http://awesome.naquadah.org/wiki/Naughty">官方的教程</a> 。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.key({ modkey }, <span style="color:#e6db74">&#34;d&#34;</span>,
          <span style="color:#66d9ef">function</span> ()
             info <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
             awful.prompt.run({
                                 fg_cursor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>,bg_cursor<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;orange&#34;</span>, prompt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;span color=&#39;#008DFA&#39;&gt;sdcv:&lt;/span&gt;&#34;</span> }, 
                              mypromptbox[mouse.screen].widget,
                              <span style="color:#66d9ef">function</span>(word)
                                 <span style="color:#66d9ef">local</span> f <span style="color:#f92672">=</span> io.popen(<span style="color:#e6db74">&#34;sdcv -n &#34;</span> <span style="color:#f92672">..</span> word)
                                 <span style="color:#66d9ef">local</span> fr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
                                 <span style="color:#66d9ef">for</span> line <span style="color:#66d9ef">in</span> f:lines() <span style="color:#66d9ef">do</span>
                                    fr <span style="color:#f92672">=</span> fr <span style="color:#f92672">..</span> line <span style="color:#f92672">..</span> <span style="color:#e6db74">&#39;n&#39;</span>
                                 <span style="color:#66d9ef">end</span>
                                 f:close()
                                 naughty.notify({ title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;span color=&#39;red&#39;&gt;&#34;</span> <span style="color:#f92672">..</span> word <span style="color:#f92672">..</span> <span style="color:#e6db74">&#34;&lt;/span&gt;:&#34;</span>, text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;span font_desc=&#34;Sans 7&#34;&gt;&#39;</span> <span style="color:#f92672">..</span> fr <span style="color:#f92672">..</span><span style="color:#e6db74">&#39;&lt;/span&gt;&#39;</span>, timeout <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">400</span>, screen <span style="color:#f92672">=</span> mouse.screen })
                              <span style="color:#66d9ef">end</span>)
          <span style="color:#66d9ef">end</span>)
                               )
</code></pre></div><h4 id="标题栏">标题栏<a hidden class="anchor" aria-hidden="true" href="#标题栏">#</a></h4>
<p>搜索 <code>titlebars_enabled</code> ，设置为 false 来取消标题栏。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">   { rule_any <span style="color:#f92672">=</span> {type <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;normal&#34;</span>, <span style="color:#e6db74">&#34;dialog&#34;</span> }
     }, properties <span style="color:#f92672">=</span> { titlebars_enabled <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span> }
   },
</code></pre></div><h4 id="自启动">自启动<a hidden class="anchor" aria-hidden="true" href="#自启动">#</a></h4>
<p>最简单的方式是在 <strong>rc.lua</strong> 里添加类似这样的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;firefox&#34;</span>)
awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;thunderbird&#34;</span>)
awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;amarok&#34;</span>)
awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;amule&#34;</span>)
</code></pre></div><p><strong>Rules of thumb when a shell(spawn_with_shell) is needed</strong>:</p>
<ul>
<li>A shell is required when the commands contain <code>&amp;&amp;</code>, <code>;</code>, <code>||</code>, <code>&amp;</code> or any other unix shell language syntax</li>
<li>When shell variables are defined as part of the command</li>
<li>When the command is a shell alias</li>
</ul>
<h5 id="方案一">方案一<a hidden class="anchor" aria-hidden="true" href="#方案一">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">local <span style="color:#66d9ef">function</span> run_once<span style="color:#f92672">(</span>cmd_arr<span style="color:#f92672">)</span>
    <span style="color:#66d9ef">for</span> _, cmd in ipairs<span style="color:#f92672">(</span>cmd_arr<span style="color:#f92672">)</span> <span style="color:#66d9ef">do</span>
      awful.spawn.with_shell<span style="color:#f92672">(</span>string.format<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;pgrep -u </span>$USER<span style="color:#e6db74"> -fx &#39;%s&#39; &gt; /dev/null || (%s)&#34;</span>, cmd, cmd<span style="color:#f92672">))</span>
    end
end

run_once<span style="color:#f92672">({</span> <span style="color:#e6db74">&#34;synergy&#34;</span> <span style="color:#f92672">})</span>
run_once<span style="color:#f92672">({</span> <span style="color:#e6db74">&#34;ibus-daemon -d -x -r -n awesome&#34;</span> <span style="color:#f92672">})</span>
run_once<span style="color:#f92672">({</span> <span style="color:#e6db74">&#34;compton --conf /home/kelu/.config/compton.conf&#34;</span> <span style="color:#f92672">})</span>
run_once<span style="color:#f92672">({</span> <span style="color:#e6db74">&#34;/home/kelu/Desktop/WeChat.desktop&#34;</span> <span style="color:#f92672">})</span>
</code></pre></div><h5 id="方案二">方案二<a hidden class="anchor" aria-hidden="true" href="#方案二">#</a></h5>
<p>To implement the XDG autostart specification, create <code>autorun.sh</code> and insert the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim .config/awesome/autorun.sh
<span style="color:#75715e">#!/usr/bin/env bash</span>

<span style="color:#66d9ef">function</span> run <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">if</span> ! pgrep -f <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> ;
  <span style="color:#66d9ef">then</span>
    $@&amp;
  <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Then, make it executable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chmod u+x .config/awesome/autorun.sh
</code></pre></div><p>要在自动启动中添加程序，只需在<code>autorun.sh</code>中添加<code>run &quot;program [some arguments]&quot;</code>。<code>run</code>函数检查是否已经有一个参数相同的<code>program</code>实例，如果没有，则运行<code>program</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.config/awesome/autorun.sh
...
run <span style="color:#e6db74">&#34;fcitx5&#34;</span>
</code></pre></div><p>If everything is fine, add the following line to your <code>rc.lua</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.config/awesome/rc.lua
...
awful.spawn.with_shell<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;~/.config/awesome/autorun.sh&#34;</span><span style="color:#f92672">)</span>
...
</code></pre></div><h4 id="自定义快捷键">自定义快捷键<a hidden class="anchor" aria-hidden="true" href="#自定义快捷键">#</a></h4>
<p>查看<a href="https://wiki.archlinux.org/title/Xmodmap_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E9%94%AE%E6%98%A0%E5%B0%84%E8%A1%A8">键映射表</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xmodmap -pm
shift       Shift_L <span style="color:#f92672">(</span>0x32<span style="color:#f92672">)</span>,  Shift_R <span style="color:#f92672">(</span>0x3e<span style="color:#f92672">)</span>
lock        Caps_Lock <span style="color:#f92672">(</span>0x42<span style="color:#f92672">)</span>
control     Control_L <span style="color:#f92672">(</span>0x25<span style="color:#f92672">)</span>,  Control_R <span style="color:#f92672">(</span>0x69<span style="color:#f92672">)</span>
mod1        Alt_L <span style="color:#f92672">(</span>0x40<span style="color:#f92672">)</span>,  Meta_L <span style="color:#f92672">(</span>0xcd<span style="color:#f92672">)</span>
mod2        Num_Lock <span style="color:#f92672">(</span>0x94<span style="color:#f92672">)</span>
mod3      
mod4        Super_R <span style="color:#f92672">(</span>0x86<span style="color:#f92672">)</span>,  Super_L <span style="color:#f92672">(</span>0xce<span style="color:#f92672">)</span>,  Hyper_L <span style="color:#f92672">(</span>0xcf<span style="color:#f92672">)</span>
mod5        ISO_Level3_Shift <span style="color:#f92672">(</span>0x5c<span style="color:#f92672">)</span>,  ISO_Level3_Shift <span style="color:#f92672">(</span>0x6c<span style="color:#f92672">)</span>,  Mode_switch <span style="color:#f92672">(</span>0x85<span style="color:#f92672">)</span>,  Mode_switch <span style="color:#f92672">(</span>0xcb<span style="color:#f92672">)</span>
</code></pre></div><p>编辑 <code>rc.lua</code>，在文件中查找文本</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- {{{ Key bindings</span>
globalkeys <span style="color:#f92672">=</span> awful.util.table.join(
</code></pre></div><p>在此之下，可以添加您的自定义命令，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- {{{ Key bindings</span>
globalkeys <span style="color:#f92672">=</span> awful.util.table.join(
     <span style="color:#75715e">-- My Bindings</span>
     awful.key({ }, <span style="color:#e6db74">&#34;F1&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;terminator&#34;</span>) <span style="color:#66d9ef">end</span>),
</code></pre></div><p>以下是我的一些例子，注意不要和原有的快捷键冲突噢：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">    <span style="color:#75715e">-- Custom</span>
    awful.key({ <span style="color:#e6db74">&#34;Control&#34;</span> ,           }, <span style="color:#e6db74">&#34;3&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;shutter -f&#34;</span>) <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;screenshot&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
    awful.key({ <span style="color:#e6db74">&#34;Control&#34;</span> ,           }, <span style="color:#e6db74">&#34;4&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;shutter -a&#34;</span>) <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;screenshot&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
    awful.key({ <span style="color:#e6db74">&#34;Control&#34;</span> ,           }, <span style="color:#e6db74">&#34;5&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;shutter -s&#34;</span>) <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;screenshot&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
    awful.key({ modkey,           }, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;nautilus --no-desktop .&#34;</span>) <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nautilus&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
    awful.key({ modkey,           }, <span style="color:#e6db74">&#34;w&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;/usr/share/typora/Typora /home/kelu/Workspace/document/todo.md&#34;</span>) <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Typora&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
<span style="color:#75715e">--    awful.key({ modkey,           }, &#34;w&#34;, function () awful.util.spawn_with_shell(&#34;nautilus --no-desktop .&#34;) end,</span>
<span style="color:#75715e">--              {description = &#34;nautilus&#34;, group = &#34;custom&#34;}),</span>
    awful.key({ modkey,           }, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#66d9ef">function</span> () awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;google-chrome-stable&#34;</span>) <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;chrome&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
</code></pre></div><p>我配置了自己的group叫custom，所有快捷键的信息可以使用 <code>Mod4+S</code> 快捷键查询。</p>
<h5 id="关闭窗口快捷键">关闭窗口快捷键<a hidden class="anchor" aria-hidden="true" href="#关闭窗口快捷键">#</a></h5>
<p>在方法 <code>clientkeys = awful.util.table.join</code> 内部添加：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">    awful.key({ modkey,           }, <span style="color:#e6db74">&#34;q&#34;</span>,       <span style="color:#66d9ef">function</span> (c) c:kill()  <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;close&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
    awful.key({ altkey,           }, <span style="color:#e6db74">&#34;q&#34;</span>,       <span style="color:#66d9ef">function</span> (c) c:kill()  <span style="color:#66d9ef">end</span>,
              {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;close&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
</code></pre></div><h5 id="关机">关机<a hidden class="anchor" aria-hidden="true" href="#关机">#</a></h5>
<ul>
<li>shutdown: <code>systemctl poweroff</code></li>
<li>reboot: <code>systemctl reboot</code></li>
<li>suspend: <code>program pause &amp;; systemctl suspend</code></li>
<li>logout: <code>loginctl terminate-session ${XDG_SESSION_ID-}</code></li>
</ul>
<h3 id="其他-2">其他<a hidden class="anchor" aria-hidden="true" href="#其他-2">#</a></h3>
<h4 id="picom-1">picom<a hidden class="anchor" aria-hidden="true" href="#picom-1">#</a></h4>
<p><a href="https://wiki.archlinux.org/title/Picom">compton</a>，用于透明美化等功能的工具，如果你当前使用的软件支持窗口透明的功能，那么compton可以帮你设置透明度，阴影效果，窗口切换效果等：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S picom 
$ mkdir -p ~/.config/picom/
$ cp -av /etc/xdg/picom.conf ~/.config/picom/picom.conf
</code></pre></div><ul>
<li>
<p>Screentearing with NVIDIA&rsquo;s proprietary drivers, Try this setting in picom.conf:</p>
<pre tabindex="0"><code>vsync = true;
</code></pre></li>
<li>
<p><a href="https://raw.githubusercontent.com/yshui/picom/next/picom.sample.conf">picom.sample.conf</a></p>
</li>
</ul>
<p>启动与添加到自启动</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ picom &amp;
$ vim ~/.config/awesome/rc.lua
run_once<span style="color:#f92672">({</span> <span style="color:#e6db74">&#34;picom&#34;</span> <span style="color:#f92672">})</span>
</code></pre></div><h4 id="start-numlock-at-boot">Start Numlock At Boot<a hidden class="anchor" aria-hidden="true" href="#start-numlock-at-boot">#</a></h4>
<p>You can start numlock at boot by installing this package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S numlockx
</code></pre></div><p>Then, insert this line in the ~/.xinitrc file two lines above the exec line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">numlockx &amp;
</code></pre></div><h4 id="change-display-resolution-and-refresh-rate">Change Display Resolution And Refresh Rate<a hidden class="anchor" aria-hidden="true" href="#change-display-resolution-and-refresh-rate">#</a></h4>
<p>If you want to change the display resolution or the refresh rate of your monitor, you can use any of these programs.</p>
<p>NVIDIA cards:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S nvidia-settings 
</code></pre></div><p>XFCE settings manager:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S xfce4-settings
</code></pre></div><p>You can also use Xrandr to set your resolution and refresh rate. For a single 1080p monitor with 120Hz refresh rate, you can run this command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xrandr --output DP-0 --mode 1920x1080 --rate <span style="color:#ae81ff">120</span>
</code></pre></div><p>You can also just use xrandr to see what displays are connected and what resolutions and refresh rates they support</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xrandr
</code></pre></div><h4 id="awesome-menu">Awesome Menu<a hidden class="anchor" aria-hidden="true" href="#awesome-menu">#</a></h4>
<p>Awesome has a menu at the top left corner by default which may be useless to some people. You can disable it if you want by commenting the lines like mentioned below. These lines should start from 83.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- {{{ Menu</span>
<span style="color:#75715e">-- Create a launcher widget and a main menu</span>
<span style="color:#75715e">--myawesomemenu = {</span>
<span style="color:#75715e">--   { &#34;hotkeys&#34;, function() hotkeys_popup.show_help(nil, awful.screen.focused()) end },</span>
<span style="color:#75715e">--   { &#34;manual&#34;, terminal .. &#34; -e man awesome&#34; },</span>
<span style="color:#75715e">--   { &#34;edit config&#34;, editor_cmd .. &#34; &#34; .. awesome.conffile },</span>
<span style="color:#75715e">--   { &#34;restart&#34;, awesome.restart },</span>
<span style="color:#75715e">--   { &#34;quit&#34;, function() awesome.quit() end },</span>
<span style="color:#75715e">--}--mymainmenu = awful.menu({ items = { { &#34;awesome&#34;, myawesomemenu, beautiful.awesome_icon },</span>
                                      { <span style="color:#e6db74">&#34;open terminal&#34;</span>, terminal }
<span style="color:#75715e">--                                    }</span>
<span style="color:#75715e">--                         }}--mylauncher - awful.widget.launcher({ image = beautiful.awesome_icon,</span>
<span style="color:#75715e">--                                     menu = mymainmenu })</span>
</code></pre></div><h4 id="force-an-application-to-a-specific-tag">Force An Application To A Specific Tag<a hidden class="anchor" aria-hidden="true" href="#force-an-application-to-a-specific-tag">#</a></h4>
<p>You can force an application to always open in a specific tag. To do this, add these lines in the rc.lua file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- Set applications to always map on the tag 7 on screen 1.</span>
{ rule <span style="color:#f92672">=</span> { class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Thunderbird&#34;</span> },
    properties <span style="color:#f92672">=</span> { screen <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, tag <span style="color:#f92672">=</span> awful.util.tagnames[<span style="color:#ae81ff">7</span>] , switchtotag <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>  } },
</code></pre></div><p>Here, we want Thunderbird to open on tag 7 and on screen 1. You can modify and duplicate to as many applications you want</p>
<h4 id="输入法httpsblogtheerrorlogcomswitching-from-gnome-shell-to-awesome-wm-zhhtml"><a href="https://blog.theerrorlog.com/switching-from-gnome-shell-to-awesome-wm-zh.html">输入法</a><a hidden class="anchor" aria-hidden="true" href="#输入法httpsblogtheerrorlogcomswitching-from-gnome-shell-to-awesome-wm-zhhtml">#</a></h4>
<p>安装</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S ibus ibus-rime
</code></pre></div><p>在 Awesome 的 rc.lua 中加入以下语句，让 Awesome 启动的时候顺便运行 ibus-daemon</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.util.spawn(<span style="color:#e6db74">&#34;ibus-daemon -d -x -r -n awesome&#34;</span>)
</code></pre></div><ul>
<li>-d: run ibus as background process.</li>
<li>-x: execute ibus XIM server.</li>
<li>-r: if there is an old ibus-daemon is running, it will be replaced.</li>
<li>-n: specify the name of desktop session. [default=gnome]</li>
</ul>
<p>另外为了让各种图形库都能识别 ibus ，还需要在 <code>$HOME/.profile</code> 中加入这几个 环境变量：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export GTK_IM_MODULE<span style="color:#f92672">=</span>ibus
export XMODIFIERS<span style="color:#f92672">=</span>@im<span style="color:#f92672">=</span>ibus
export QT_IM_MODULE<span style="color:#f92672">=</span>ibus
</code></pre></div><h4 id="屏保和休眠管理">屏保和休眠管理<a hidden class="anchor" aria-hidden="true" href="#屏保和休眠管理">#</a></h4>
<p>这个其实好办， Xorg 下的e屏保有很多选择，而且大都附带休眠管理的配置。我挑了 “老牌”的 xscreensaver</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S xscreensaver
</code></pre></div><p>在 Awesome 的 rc.lua 配置文件里加入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.util.spawn(<span style="color:#e6db74">&#34;xscreensaver -no-splash&#34;</span>)
</code></pre></div><p>xscreensaver 的配置选项也很多，不过我们可以通过 xscreensaver-demo 命令用图 形界面进行设置，所有选项都保存在 <code>$HOME/.xscreensaver</code> 文件中。</p>
<p>添加一个快捷键：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.key({ <span style="color:#e6db74">&#34;Mod4&#34;</span> }, <span style="color:#e6db74">&#34;l&#34;</span>,
    <span style="color:#66d9ef">function</span> ()
        awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;xscreensaver-command --lock&#34;</span>)
    <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;lock the screen immediately&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
</code></pre></div><h4 id="rofi">rofi<a hidden class="anchor" aria-hidden="true" href="#rofi">#</a></h4>
<p>安装</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S  rofi
$ mkdir -p ~/.config/rofi/
$ rofi -dump-config &gt; ~/.config/rofi/config.rasi
</code></pre></div><p>添加快捷键(base on awesome-copycats)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">    awful.key({ modkey }, <span style="color:#e6db74">&#34;r&#34;</span>, <span style="color:#66d9ef">function</span> ()
            os.execute(string.format(<span style="color:#e6db74">&#34;rofi -show %s -theme %s&#34;</span>,
            <span style="color:#e6db74">&#39;drun&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>))
        <span style="color:#66d9ef">end</span>,
        {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;show rofi&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;launcher&#34;</span>}),
    awful.key({ altkey }, <span style="color:#e6db74">&#34;r&#34;</span>, <span style="color:#66d9ef">function</span> ()
            os.execute(string.format(<span style="color:#e6db74">&#34;rofi -show %s -theme %s&#34;</span>,
            <span style="color:#e6db74">&#39;run&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>))
        <span style="color:#66d9ef">end</span>,
        {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;show rofi&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;launcher&#34;</span>}),
    awful.key({ altkey }, <span style="color:#e6db74">&#34;Tab&#34;</span>, <span style="color:#66d9ef">function</span> ()
            os.execute(string.format(<span style="color:#e6db74">&#34;rofi -show %s -theme %s&#34;</span>,
            <span style="color:#e6db74">&#39;window&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>))
        <span style="color:#66d9ef">end</span>,
        {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;show rofi&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;launcher&#34;</span>}),
</code></pre></div><h4 id="mpdncmpcpphttpszhuanlanzhihucomp351064855"><a href="https://zhuanlan.zhihu.com/p/351064855">mpd&amp;ncmpcpp</a><a hidden class="anchor" aria-hidden="true" href="#mpdncmpcpphttpszhuanlanzhihucomp351064855">#</a></h4>
<p><strong>介绍</strong></p>
<p><a href="https://wiki.archlinux.org/title/Music_Player_Daemon_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">mpd</a>：mpd是一个播放本地音乐的后台服务</p>
<p><a href="https://wiki.archlinux.org/index.php/ncmpcpp">ncmpcpp</a>：ncmpcpp是mpd的TUI前端，用来控制mpd的工作，此外也提供一些方便的功能比如查找歌曲，支持flac等多种音乐格式</p>
<p>总之两者是client/server的关系</p>
<p>安装即可：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S mpd ncmpcpp
</code></pre></div><p><strong>配置方法</strong></p>
<p>配置分为两步，一步是mpd的，另一步是ncmpcpp的</p>
<p>这里建议直接用<a href="https://github.com/ayamir/dwm-dotfiles/tree/master/nord/.config/mpd">我的配置</a>。记得把<code>~/.config/mpd/mpd.conf</code>和<code>~/.config/ncmpcpp/config</code>里面的音乐目录改成你的音乐路径即可</p>
<p>我的配置声音输出用的是pulseaudio，所以你需要保证你的pulseaudio工作正常。</p>
<p><strong>使用</strong></p>
<p>启动mpd服务</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl start mpd.service --user
</code></pre></div><p>之后启动ncmpcpp，具体用法这里不再赘述，直接查看archwiki或者在ncmpcpp里面按F1即可看到。</p>
<p>出现问题之后首先检查mpd的日志</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl status mpd --user
</code></pre></div><p>根据不同的提示来解决问题</p>
<p>如果没有声音，首先检查一下pulseaudio，用pulseaudio的GUI配置工具pavucontrol即可</p>
<h4 id="flameshot">flameshot<a hidden class="anchor" aria-hidden="true" href="#flameshot">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">awful.key({ modkey, <span style="color:#e6db74">&#34;Shift&#34;</span> }, <span style="color:#e6db74">&#34;Print&#34;</span>,
    <span style="color:#66d9ef">function</span> ()
        awful.util.spawn_with_shell(<span style="color:#e6db74">&#34;flameshot gui&#34;</span>)
    <span style="color:#66d9ef">end</span>, {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Switch between windows&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;custom&#34;</span>}),
</code></pre></div><h4 id="awesome-copycatshttpsgithubcomlcpzawesome-copycats"><a href="https://github.com/lcpz/awesome-copycats">awesome-copycats</a><a hidden class="anchor" aria-hidden="true" href="#awesome-copycatshttpsgithubcomlcpzawesome-copycats">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone --recurse-submodules --remote-submodules --depth <span style="color:#ae81ff">1</span> -j <span style="color:#ae81ff">2</span> https://github.com/lcpz/awesome-copycats.git
$ mv -bv awesome-copycats/<span style="color:#f92672">{</span>*,.<span style="color:#f92672">[</span>^.<span style="color:#f92672">]</span>*<span style="color:#f92672">}</span> ~/.config/awesome; rm -rf awesome-copycats
$ mv -bv awesome-copycats/* ~/.config/awesome; rm -rf awesome-copycats
</code></pre></div><p>Additional default software used:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S curl alsa-utils dmenu firefox mpc mpd flameshot unclutter xorg-xbacklight xsel slock
</code></pre></div><p>然后再 rc.lua 取消掉一些注释以启用某些功能</p>
<ul>
<li>
<p>rofi instead of dmenu</p>
</li>
<li>
<p>flameshot shotcut</p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/Slock">slock</a>: To <a href="https://superuser.com/questions/855538/how-to-wake-up-enter-system-after-slock">unlock</a> <code>slock</code>, simply type your user password at the blank screen. You can verify this is the process via <a href="http://git.suckless.org/slock/tree/README">slock&rsquo;s readme</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">    awful.key({ modkey }, <span style="color:#e6db74">&#34;l&#34;</span>, <span style="color:#66d9ef">function</span> () os.execute(<span style="color:#e6db74">&#34;slock&#34;</span>) <span style="color:#66d9ef">end</span>,
        {description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;lock screen&#34;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hotkey&#34;</span>}),
</code></pre></div></li>
<li>
<p><a href="https://wiki.archlinux.org/title/unclutter">Unclutter</a> hides your X mouse cursor when you do not need it, to prevent it from getting in the way.</p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/clipboard">xsel</a> — Command-line program for getting and setting the contents of the X selection.</p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/Music_Player_Daemon_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">mpd &amp; mpc</a>: Music Player Daemon</p>
</li>
</ul>
<h4 id="touchpadhttpswikiarchlinuxorgtitlelibinput"><a href="https://wiki.archlinux.org/title/Libinput">Touchpad</a><a hidden class="anchor" aria-hidden="true" href="#touchpadhttpswikiarchlinuxorgtitlelibinput">#</a></h4>
<p><a href="https://wiki.archlinux.org/title/Libinput#Disable_touchpad">disable touchpad</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S  xorg-xinput
$ xinput list | grep Touchpad
⎜   ↳ FTE1200:00 0B05:0501 Touchpad           	id<span style="color:#f92672">=</span>15	<span style="color:#f92672">[</span>slave  pointer  <span style="color:#f92672">(</span>2<span style="color:#f92672">)]</span>
$ xinput disable <span style="color:#e6db74">&#34;FTE1200:00 0B05:0501 Touchpad&#34;</span>
$ vim .xinitrc
xinput disable <span style="color:#e6db74">&#34;FTE1200:00 0B05:0501 Touchpad&#34;</span>
</code></pre></div><h4 id="xbindkeyshttpswikiarchlinuxorgtitlexbindkeys"><a href="https://wiki.archlinux.org/title/Xbindkeys">xbindkeys</a><a hidden class="anchor" aria-hidden="true" href="#xbindkeyshttpswikiarchlinuxorgtitlexbindkeys">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S pulseaudio xbindkeys
</code></pre></div><p>之后通过 <code>xbindkeys --multikey</code> 获取键盘上与音量有关的  keycodes，也就是 f10、f11、f12</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xbindkeys --multikey
<span style="color:#e6db74">&#34;(Scheme function)&#34;</span>
    m:0x0 + c:76
    F10
<span style="color:#e6db74">&#34;(Scheme function)&#34;</span>
    m:0x0 + c:95
    F11
<span style="color:#e6db74">&#34;(Scheme function)&#34;</span>
    m:0x0 + c:96
    F12
</code></pre></div><p>通过如下命令添加默认配置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xbindkeys -d &gt; ~/.xbbaindkeysrc
</code></pre></div><p>将如下代码添加到 ~/.xbindkeysrc 最后</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Increase volume</span>
<span style="color:#e6db74">&#34;pactl set-sink-volume @DEFAULT_SINK@ +1000&#34;</span>
    m:0x0 + c:96
    F12

<span style="color:#75715e"># Decrease volume</span>
<span style="color:#e6db74">&#34;pactl set-sink-volume @DEFAULT_SINK@ -1000&#34;</span>
    m:0x0 + c:95
    F11

<span style="color:#75715e"># Mute volume</span>
<span style="color:#e6db74">&#34;pactl set-sink-mute @DEFAULT_SINK@ toggle&#34;</span>
    m:0x0 + c:76
    F10
</code></pre></div><p>然后启用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xbindkeys
</code></pre></div><h4 id="redshifthttpswikiarchlinuxorgtitleredshift"><a href="https://wiki.archlinux.org/title/redshift">redshift</a><a hidden class="anchor" aria-hidden="true" href="#redshifthttpswikiarchlinuxorgtitleredshift">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pacman -S redshift
$ cat &gt;&gt; ~/.config/awesome/rc.lua
awful.util.spawn<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;redshift-gtk -l 39.5:116.2&#34;</span><span style="color:#f92672">)</span>
</code></pre></div><p><strong>Tip:</strong> You can get the coordinates of a place with <a href="http://www.geonames.org/">GeoNames.org</a></p>
<p>autostart 效果不是很好，所以改为手动启用</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sakamotokurome.github.io/tags/unix/">Unix</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/archlinux/">ArchLinux</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://sakamotokurome.github.io/posts/gentoousage/">
    <span class="title">Next Page »</span>
    <br>
    <span>Gentoo Usage</span>
  </a>
</nav>

  </footer>
</article>

<div class="disqus-container">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    this.page.identifier = '389b00';
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "sakamotokurome" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://sakamotokurome.github.io/">Sakamoto Kurome</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
