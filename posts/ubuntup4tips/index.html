<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Ubuntu Tips | Sakamoto Kurome</title>
<meta name="keywords" content="Unix, Linux, Ubuntu" />
<meta name="description" content="New Ubuntu #!/usr/bin/bash # Restore backup cp .bashrc .bashrc.orig rsync -av /media/kurome/DataBackup/Backup/Home/latest/ /home/kurome/ # Update system sudo sed -i &#39;s@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g&#39; /etc/apt/sources.list sudo apt update sudo apt upgrade -y # Enable custom systemd service sudo cp .opt/clash/clash.service /usr/lib/systemd/system sudo cp .opt/aria2/aria2.service /usr/lib/systemd/system sudo systemctl enable --now clash.service sudo systemctl enable --now aria2.service # Install apps sudo sh -c &#39;echo &#34;deb [arch=amd64 trusted=yes] https://dl.google.com/linux/chrome/deb/ stable main&#34; &gt; /etc/apt/sources.list.d/google-chrome.list&#39; sudo apt update sudo">
<meta name="author" content="Sakamoto Kurome">
<link rel="canonical" href="https://sakamotokurome.github.io/posts/ubuntup4tips/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sakamotokurome.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sakamotokurome.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sakamotokurome.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sakamotokurome.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sakamotokurome.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.90.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://sakamotokurome.github.io/custom.css">
<meta name="google-site-verification" content="i2r403EffR8m-KBf7EHi6AYg7tfnMshaXTAynoYPnpE" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2Y212LPQ2"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-K2Y212LPQ2', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Ubuntu Tips" />
<meta property="og:description" content="New Ubuntu #!/usr/bin/bash # Restore backup cp .bashrc .bashrc.orig rsync -av /media/kurome/DataBackup/Backup/Home/latest/ /home/kurome/ # Update system sudo sed -i &#39;s@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g&#39; /etc/apt/sources.list sudo apt update sudo apt upgrade -y # Enable custom systemd service sudo cp .opt/clash/clash.service /usr/lib/systemd/system sudo cp .opt/aria2/aria2.service /usr/lib/systemd/system sudo systemctl enable --now clash.service sudo systemctl enable --now aria2.service # Install apps sudo sh -c &#39;echo &#34;deb [arch=amd64 trusted=yes] https://dl.google.com/linux/chrome/deb/ stable main&#34; &gt; /etc/apt/sources.list.d/google-chrome.list&#39; sudo apt update sudo" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sakamotokurome.github.io/posts/ubuntup4tips/" />
<meta property="og:image" content="https://sakamotokurome.github.io/Distributions/Ubuntu-logo-2022.svg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-08T15:32:04&#43;08:00" />
<meta property="article:modified_time" content="2022-03-08T15:32:04&#43;08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://sakamotokurome.github.io/Distributions/Ubuntu-logo-2022.svg" />
<meta name="twitter:title" content="Ubuntu Tips"/>
<meta name="twitter:description" content="New Ubuntu #!/usr/bin/bash # Restore backup cp .bashrc .bashrc.orig rsync -av /media/kurome/DataBackup/Backup/Home/latest/ /home/kurome/ # Update system sudo sed -i &#39;s@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g&#39; /etc/apt/sources.list sudo apt update sudo apt upgrade -y # Enable custom systemd service sudo cp .opt/clash/clash.service /usr/lib/systemd/system sudo cp .opt/aria2/aria2.service /usr/lib/systemd/system sudo systemctl enable --now clash.service sudo systemctl enable --now aria2.service # Install apps sudo sh -c &#39;echo &#34;deb [arch=amd64 trusted=yes] https://dl.google.com/linux/chrome/deb/ stable main&#34; &gt; /etc/apt/sources.list.d/google-chrome.list&#39; sudo apt update sudo"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sakamotokurome.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Ubuntu Tips",
      "item": "https://sakamotokurome.github.io/posts/ubuntup4tips/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Ubuntu Tips",
  "name": "Ubuntu Tips",
  "description": "New Ubuntu #!/usr/bin/bash # Restore backup cp .bashrc .bashrc.orig rsync -av /media/kurome/DataBackup/Backup/Home/latest/ /home/kurome/ # Update system sudo sed -i \u0026#39;s@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g\u0026#39; /etc/apt/sources.list sudo apt update sudo apt upgrade -y # Enable custom systemd service sudo cp .opt/clash/clash.service /usr/lib/systemd/system sudo cp .opt/aria2/aria2.service /usr/lib/systemd/system sudo systemctl enable --now clash.service sudo systemctl enable --now aria2.service # Install apps sudo sh -c \u0026#39;echo \u0026#34;deb [arch=amd64 trusted=yes] https://dl.google.com/linux/chrome/deb/ stable main\u0026#34; \u0026gt; /etc/apt/sources.list.d/google-chrome.list\u0026#39; sudo apt update sudo",
  "keywords": [
    "Unix", "Linux", "Ubuntu"
  ],
  "articleBody": "New Ubuntu #!/usr/bin/bash  # Restore backup cp .bashrc .bashrc.orig rsync -av /media/kurome/DataBackup/Backup/Home/latest/ /home/kurome/ # Update system sudo sed -i 's@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g' /etc/apt/sources.list sudo apt update sudo apt upgrade -y # Enable custom systemd service sudo cp .opt/clash/clash.service /usr/lib/systemd/system sudo cp .opt/aria2/aria2.service /usr/lib/systemd/system sudo systemctl enable --now clash.service sudo systemctl enable --now aria2.service # Install apps sudo sh -c 'echo \"deb [arch=amd64 trusted=yes] https://dl.google.com/linux/chrome/deb/ stable main\"  /etc/apt/sources.list.d/google-chrome.list' sudo apt update sudo apt install -y git adb fastboot aria2 qemu-system-x86 samba git unrar proxychains kdeconnect nautilus-kdeconnect tree zfsutils-linux goldendict fcitx5 fcitx5-chinese-addons google-chrome-stable gnome-tweaks gnome-shell-extensions chrome-gnome-shell timeshift libfuse2 adwaita-qt sudo sed -e 's/^socks/#socks/g' -e '$a socks4 127.0.0.1 7890' -i /etc/proxychains.conf sudo proxychains apt install ubuntu-restricted-extras -y cp /usr/share/applications/org.fcitx.Fcitx5.desktop ~/.config/autostart/ sudo sed -e '$a GTK_IM_MODULE=fcitx \\ QT_IM_MODULE=fcitx \\ XMODIFIERS=@im=fcitx \\ SDL_IM_MODULE=fcitx \\ GLFW_IM_MODULE=ibus' -i /etc/environment echo \"export QT_STYLE_OVERRIDE=adwaita-dark\"  ~/.profile # System settings gsettings set org.gnome.desktop.media-handling automount false gsettings set org.gnome.shell.extensions.dash-to-dock show-mounts false gsettings set org.gnome.shell.extensions.dash-to-dock click-action cycle-windows sudo ufw enable sudo ufw allow proto tcp from 192.168.2.0/24 to any port 1714:1764 sudo ufw allow proto udp from 192.168.2.0/24 to any port 1714:1764 sudo ufw reload sudo timedatectl set-local-rtc 0 Backup Your System  Ubuntu Help Arch Wiki  Rsync 备份\n#!/bin/bash  set -o errexit set -o nounset set -o pipefail readonly SOURCE_DIR=/ readonly BACKUP_DIR=\"$(findmnt -nr -o target -S /dev/mapper/luks-5277e33d-604f-4c1e-bc8c-40c14544614e)/Ubuntu2204\" readonly DATETIME=\"$(date '+%Y-%m-%d_%H:%M:%S')\" readonly BACKUP_PATH=\"${BACKUP_DIR}/${DATETIME}\" readonly LATEST_LINK=\"${BACKUP_DIR}/latest\" rsync -av \\ \t--delete \"${SOURCE_DIR}/\" \\ \t--link-dest \"${LATEST_LINK}\" \\ \t--exclude={\"dev/*\",\"proc/*\",\"sys/*\",\"tmp/*\",\"run/*\",\"mnt/*\",\"media/*\",\"lost+found/*\",\"Trash/*\",\"DataBackup/*\",\"DataPool/*\",\"swapfile\",\"cxoffice\",\".cxoffice\",\"*.iso\",\"*.qcow2\",\".steam\",\"Downloads/*\",\"*.exe\",\"Ventoy\",\"Desktop/*\",\"Music/*\",\".snapshots\",\"Games\",\"Pictures/*\",\"Videos/*\",\".cache\"} \\ \t\"${BACKUP_PATH}\" rm -rf \"${LATEST_LINK}\" ln -s \"${BACKUP_PATH}\" \"${LATEST_LINK}\" 注意：\n ${SOURCE_DIR}/必须带反斜杠，否则会备份SOURCE_DIR这个目录，而不是这个目录里的内容。 --exclude=\"Trash\"，Trash被认为为目录，而非文件或文件和目录，并且，它不支持路径~/.local/share/Trash 注意：正因为 --exclude 不是按照路径，所以才特别方便，比如 usb 在不同发行版之间可能会挂载到不同的路径（如 ubuntu 的会在 /media 下，fedora 的会在 /run 下），但是一般以 usb 的 label 比如 DataBackup 作为挂载目录，那么只需要把 DataBackup 放在 --exclude 之中，就可以在备份时排除这个 usb 设备而不需要考虑具体的路径了。  查看备份大小\n$ sudo du -hs /backup/ 16G /backup/ 整个备份为16GB，所花时间 12m。\n通过 crontab 使之每周一12点自动备份：\n$ sudo crontab -e 0 12 * * 1 /path/.backup.sh 还原\n分区、格式化和挂载\n# lsblk -f sda ├─sda1 │ vfat EFI A642-AF58 246.9M 2% /boot/efi └─sda2 ext4 ROOT c83192bb-14f3-45d1-9345-20785a419414 190.1G 8% / # mkdir -p /mnt/ubuntu # mount /dev/sda2 /mnt/ubuntu # mkdir -p /mnt/ubuntu/boot/efi # mount /dev/sda1 /mnt/ubuntu/boot/efi 还原：还原的时候，如果带 --delete，那么就会删除备份时 --exclude= 不包含的内容。还原的时候，同名文件内容会恢复到备份时候的状态。\n# rsync -av 备份目录 源目录 # rsync -av /path/to/backup/latest/ /mnt/ubuntu   chroot\n# mount --types proc /proc /mnt/ubuntu/proc # mount --rbind /sys /mnt/ubuntu/sys # mount --make-rslave /mnt/ubuntu/sys # mount --rbind /dev /mnt/ubuntu/dev # mount --make-rslave /mnt/ubuntu/dev # mount --bind /run /mnt/ubuntu/run # mount --make-slave /mnt/ubuntu/run # chroot /mnt/ubuntu   update /etc/fstab\n# blkid /dev/sda2: LABEL=\"ROOT\" UUID=\"c83192bb-14f3-45d1-9345-20785a419414\" TYPE=\"ext4\" PARTUUID=\"4659f9ec-1e96-4d4a-ad0e-e32a69a477ce\" /dev/sda1: LABEL_FATBOOT=\"EFI\" LABEL=\"EFI\" UUID=\"A642-AF58\" TYPE=\"vfat\" PARTUUID=\"4bf5d597-b541-e845-8b70-c8ad6374df22\" fstab 模版如下\n# ROOT UUID=c83192bb-14f3-45d1-9345-20785a419414 / ext4 errors=remount-ro 0 1 # EFI UUID=A642-AF58 /boot/efi vfat umask=0077 0 1 # SWAP UUID=63c78f3a-91ab-43f2-bf97-6e3348e0fc00 none swap default 0 0 # swapfile /swapfile none swap sw 0 0   reinstall grup\n# grub-install --target=x86_64-efi --efi-directory=/boot/efi # grub-mkconfig -o /boot/grub/grub.cfg 不能带 –bootloader-id=GRUB，否则建立 /boot/efi/EFI/GRUB 目录。\n  reboot\n# exit # cd # umount -l /mnt/ubuntu/dev{/shm,/pts,} # umount -R /mnt/ubuntu # reboot    TAR Backup\n$ cd / # THIS CD IS IMPORTANT THE FOLLOWING LONG COMMAND IS RUN FROM / $ tar -cvpzf backup.tar.gz \\ --exclude=/backup.tar.gz \\ --exclude=/proc \\ --exclude=/tmp \\ --exclude=/mnt \\ --exclude=/dev \\ --exclude=/sys \\ --exclude=/run \\  --exclude=/media \\  --exclude=/var/log \\ --exclude=/var/cache/apt/archives \\ --exclude=/usr/src/linux-headers* \\  --exclude=/home/*/.gvfs \\ --exclude=/home/*/.cache \\  --exclude=/home/*/.local/share/Trash / deja-dup/Duplicity Simple backup tool for GNOME\nconfig files\nThe deja-dup settings can also be changed with dconf-editor in the dconf-tools apt package. The settings are in org.gnome.DejaDup.\n$ gsettings list-recursively org.gnome.DejaDup $ gsettings set org.gnome.DejaDup include-list \"['/home/kurome/.aria2', '/home/kurome/.clash', '/home/kurome/.config/autostart', '/home/kurome/.config/Typora', '/home/kurome/.config/variety', '/home/kurome/.hugo', '/home/kurome/.local/bin', '/home/kurome/.local/share/applications', '/home/kurome/.local/share/TelegramDesktop', '/home/kurome/.ssh', '/home/kurome/.telegram', '/home/kurome/.typora', '/home/kurome/Documents', '/home/kurome/Downloads', '/home/kurome/Templates', '/home/kurome/Music', '/home/kurome/.config/containers', '/home/kurome/.local/share/fcitx5']\" from: launchpad.net: How do I also backup my deja Dup settings?\nThe settings used to be stored there, and the files are still present.\nIn more recent version they are stored in:\n~/.config/dconf Resotre\n$ duplicity file:///home/kurome/DataBackup/Linux/ Restore/ Others Does the UEFI partition either “MUST” or “SHOULD” be first for some reason? If so why?\nThe key words “SHOULD”, “MUST” and “MAY” (capitalised) in this answer are to be interpreted as described in RFC 2119.\nAn (U)EFI System Partition (ESP from now on):\n MAY reside at the beginning of the disk and SHOULD be FAT32 because of Windows compatibility.  The only official limit is:\n the ESP MUST reside in the first 2.2 Terabytes of the disk.  So, the ESP MUST reside anywhere in those first 2.2 TB of the disk, but there is absolutely no need for the ESP to be the first partition or reside on the beginning of the disk whatsoever. (It’s just that some large company in Redmond, WA advises system integrators differently)…\nI would put it as the last partition on the disk (if Add Boot Option Manually\nIn Boot Option Name, type Ubuntu, and in File Name select the file grubx64.efi and then Click on ‘OK’.\n13 个开源备份解决方案\n  Cronopete\n  Deja Dup\n  Rclone\n  Rdiff-backup\n  Restic\n  Rsync\n  BorgBackup：带有压缩和加密特性以用具有数据去重功能的备份解决方案。它基于 BSD 许可证，支持 Linux、MacOS 和 BSD。\n  UrBackup：它可以做镜像和文件的完整和增量备份；你可以保存整个分区或单个目录。它有 Windows、Linux、和 MacOS 客户端，并且采用 GNU Affero 公共许可证。\n  LuckyBackup：根据其网站介绍，“它是一个易于使用、快速（只传输变化部分，而不是全部数据）、安全（在做任何数据操作之前，先检查所有需要备份的目录，以确保数据安全）、可靠和完全可定制的备份解决方案。它在 GPL 许可证下发行。\n  Casync ：一个可寻址内容的同步解决方案 —— 它设计用于备份、同步、存储和检索大文件系统的多个相关版本。它使用 GNU Lesser 公共许可证。\n  Syncthing：用于在两台计算机之间同步文件。它基于 Mozilla 公共许可证使用，根据其网站介绍，它是安全和私密的。它可以工作于 MacOS、Windows、Linux、FreeBSD、Solaris 和 OpenBSD。\n  Duplicati：一个可工作于 Windows、MacOS 和 Linux 上的、并且支持多种标准协议（比如 FTP、SSH、WebDAV 和云服务）、免费的备份解决方案。它的特性是强大的加密功能，并且它使用 GPL 许可证。\n  Dirvish ：一个基于磁盘的虚拟镜像备份系统，它使用 OSL-3.0 许可证。它要求必须安装有 Rsync、Perl5、SSH。\n  Bacula：允许系统管理员去管理备份、恢复、和跨网络的不同种类计算机上的多种数据的一套计算机程序，它支持在 Linux、FreeBSD、Windows、MacOS、OpenBSD 和 Solaris 上运行，并且它的大部分源代码都是基于 AGPLv3 许可证的。\n  BackupPC：一个高性能的、企业级的、可以备份 Linux、Windows 和 MacOS 系统的 PC 和笔记本电脑上的数据到服务器磁盘上的备份解决方案。它是基于 GPLv3 许可证的。\n  Amanda ：一个使用 C 和 Perl 写的备份系统，它允许系统管理员去备份整个网络中的客户端到一台服务器上的磁带、磁盘或基于云的系统。它是由马里兰大学于 1991 年开发并拥有版权，并且它有一个 BSD 式的许可证。\n  Back in Time ：一个为 Linux 设计的简单的备份实用程序。它提供了命令行和图形用户界面，它们都是用 Python 写的。去执行一个备份，只需要指定存储快照的位置、需要备份的文件夹，和备份频率即可。它使用的是 GPLv2 许可证。\n  Timeshift ：一个 Linux 上的备份实用程序，它类似于 Windows 上的系统恢复和 MacOS 上的时间胶囊。它的 GitHub 仓库上介绍说：“Timeshift 通过定期递增的文件系统快照来保护你的系统。这些快照可以在日后用于数据恢复，以撤销某些对文件系统的修改。”\n  Kup ：一个能够帮助用户备份它们的文件到 USB 驱动器上的备份解决方案，但它也可以用于执行网络备份。它的 GitHub 仓库上介绍说：”当插入你的外部硬盘时，Kup 将自动启动并复制你的最新的修改。“\n  How to make a disk image and restore from it later?/Moving entire Linux installation to another drive\nIt’s Clonezilla(再生龍) Live: http://clonezilla.org/\nThe tutorial for Clonezilla can be found here.\nEasy backup/restore of installed system?\nYes you can use remastersys for that.You can see a complete tutorial here\nrsync+btrfs+dm-crypt 备份整个系统\nReinstall GRUB\n清理系统 删除不再需要的包 $ sudo apt autoremove APT cache # see the size of this cache $ sudo du -sh /var/cache/apt # remove only the outdated packages $ sudo apt-get autoclean # delete apt cache in its entirety $ sudo apt-get clean apt-get 和软件中心下载的软件包一般放在 /var/cache/apt/archives/ 目录，一般都安装在 /usr/\nJournal logs # check the log size $ journalctl --disk-usage # clear the logs that are older than a certain days $ journalctl --vacuum-time=3d Thumbnails cache # check the size of thumbnail cache $ du -sh ~/.cache/thumbnails $ rm -rf ~/.cache/thumbnails/* Duplicate files Find and remove duplicate files：You can use a GUI tool like FSlint or a command line tool like FDUPES for this task\nOld Linux kernels Remove old Linux kernels\n# List all installed Linux kernels $ sudo dpkg --list 'linux-image*' $ apt-get remove linux-image-VERSION 清理 Snap 与 snap 有关的系统文件都存放在 /var/lib/snapd 目录下。根据你所安装的 Snap 包的数量，这个目录的大小可能在几 GB。\n$ sudo du -sh /var/lib/snapd 根据设计，Snap 至少会在你的系统上保留一个你所安装的软件包的旧版本。你可以通过使用 Snap 命令看到这种行为：\n$ snap list --all 你应该看到同一个软件包被列了两次，而且版本和修订号都不同。\n为了释放磁盘空间，你可以删除额外的软件包版本。你怎么知道要删除哪一个呢？你可以看到，这些较旧的软件包被标记为“禁用”。\n#!/bin/bash # Removes old revisions of snaps # CLOSE ALL SNAPS BEFORE RUNNING THIS set -eu snap list --all | awk '/disabled/{print $1, $3}' | while read snapname revision; do snap remove \"$snapname\" --revision=\"$revision\" done 命令行技巧 Bash 快捷键 编辑命令\n Ctrl + a ：移到命令行首 Ctrl + e ：移到命令行尾 Ctrl + f ：按字符前移（右向） Ctrl + b ：按字符后移（左向） Alt + f ：按单词前移（右向） Alt + b ：按单词后移（左向） Ctrl + xx：在命令行首和光标之间移动 Ctrl + u ：从光标处删除至命令行首 Ctrl + k ：从光标处删除至命令行尾 Ctrl + w ：从光标处删除至字首 Alt + d ：从光标处删除至字尾 Ctrl + d ：删除光标处的字符 Ctrl + h ：删除光标前的字符 Ctrl + y ：粘贴至光标后 Alt + c ：从光标处更改为首字母大写的单词 Alt + u ：从光标处更改为全部大写的单词 Alt + l ：从光标处更改为全部小写的单词 Ctrl + t ：交换光标处和之前的字符 Alt + t ：交换光标处和之前的单词 Alt + Backspace：与 Ctrl + w 类似，分隔符有些差别  重新执行命令\n Ctrl + r：逆向搜索命令历史 Ctrl + g：从历史搜索模式退出 Ctrl + p：历史中的上一条命令 Ctrl + n：历史中的下一条命令 Alt + .：使用上一条命令的最后一个参数  控制命令\n Ctrl + l：清屏 Ctrl + o：执行当前命令，并选择上一条命令 Ctrl + s：阻止屏幕输出 Ctrl + q：允许屏幕输出 Ctrl + c：终止命令 Ctrl + z：挂起命令  Bang (!) 命令\n !!：执行上一条命令 !blah：执行最近的以 blah 开头的命令，如 !ls !blah:p：仅打印输出，而不执行 !$：上一条命令的最后一个参数，与 Alt + . 相同 !$:p：打印输出 !$ 的内容 !*：上一条命令的所有参数 !*:p：打印输出 !* 的内容 ^blah：删除上一条命令中的 blah ^blah^foo：将上一条命令中的 blah 替换为 foo ^blah^foo^：将上一条命令中所有的 blah 都替换为 foo  你可能不知道的SHELL Shell也叫做命令行界面，它是*nix操作系统下用户和计算机的交互界面。Shell这个词是指操作系统中提供访问内核服务的程序。\n这篇文章向大家介绍Shell一些非广为人知、但却实用有趣的知识，权当品尝shell主食后的甜点吧。\n科普\n先科普几个你可能不知道的事实：\n  Shell几乎是和Unix操作系统一起诞生，第一个Unix Shell是肯·汤普逊（Ken Thompson）以Multics上的Shell为模范在1971年改写而成，并命名Thompson sh。即便是后来流行的bash（shell的一种变体），它的年龄实际上比当前流行的所有的Linux kernel都大，可谓在Linux系统上是先有Shell再有Kernel。\n  当前绝大部分*nix和MacOS操作系统里的默认的Shell都是bash，bash由Brian Fox在1987年创造，全称Bourne Again shell ( bash)。\n  你或许听说除了bash之外，还有Bourne shell ( sh)，Korn shell ( ksh)，C shell （包括 csh and tcsh），但是你知道这个星球上一共存在着大约50多种不同的shell么？想了解他们，请参考 http://www.freebsd.org/ports/shells.html。\n  一些强大的命令\n  在命令行前加空格，该命令不会进入history里。\n  ctrl-x e\n快速启动你的默认编辑器（由变量$EDITOR设置）。\n  为什么说 zsh 是 shell 中的极品？ 色彩高亮\n并不是传统基于正则表达式的色彩高亮，而是真的会判断你输入的是啥的色彩高亮。\n比如一个主题白色代表普通命令或者程序，红色代表错误命令，青色的代表内建命令或者 alias （echo 和 ls ），这些都不是正则判断出来的，是真的去检查的。非零的错误码（上一条命令错误），也可以高亮显示。\n命令提示\n注意，命令提示和补全是两个完全不同的系统，很多时候提示比补全更有用。你输入命令，后面就用灰色给你提示命令的参数，而且是随着你动态输入完每一个字母不断修正变化。\n这个命令提示是基于你的历史命令数据库进行分析的，随着你输入的命令越来越多，提示将会越来越准确和顺手。\n如果你觉得它提示的正确，你可以 CTRL+F 表示采纳，后面就会自动帮你一次性全部输入完了。\n智能补全\n缩写路径补全：\n$ cd /v/w/h 敲一个TAB\n$ cd /var/www/html/ 补全目录、命令参数补全连敲两次TAB进入选择模式，除了 tab/shift+tab 可以前后切换外，你还可以使用光标键上下左右移动。回车表示确认选择，用 CTRL+G 表示退出。\n快速跳转\n输入 cd 后面加一个减号后，按一次 tab 马上就列出本次登陆后去过的最近几次路径，接着根据下面的提示输入数字按回车就过去了，比如输入：\n$ cd -5  当然你还可以不输入数字，而是再按一次 tab 进入选择模式，上下键或者 ctrl+n/p 来选择，回车确认，ctrl+g 返回。\n自动跳转\n敲入 z 命令，列出了自从我开始用zsh进入过的目录和他们的权重，进入次数越多，权重越大。z 后面加一个关键词就能跳转到所有匹配的历史路径中权重最高的那个了。空格分隔多个关键字，z会先匹配出第一个来，然后再匹配第二个…\n使用：“z -l foo\" 可以列出包含 foo 的所有历史路径。\n# 按下ALT+O 就执行 cd .. 命令 bindkey -s '\\eo' 'cd ..\\n' # 按下 ALT+; 就执行 ls -l 命令 bindkey -s '\\e;' 'ls -l\\n' 热键绑定\nzsh 里面使用 bindkey 命令可以设置一系列热键，用来运行某一个 zsh 内部命令或者某个 shell 命令。\n应该知道的LINUX技巧 首先，我想告诉大家，在Unix/Linux下，最有效率技巧的不是操作图形界面，而是命令行操作，因为命令行意味着自动化。\n日常\n  请man bash后查找Readline Key Bindings一节来看看bash的默认热键，比如：Alt-. 把上一次命令的最后一个参数打出来，而Alt-* 则列出你可以输入的命令。\n  回到上一次的工作目录： cd – （回到home是 cd ~）\n  pstree -p 可以帮你显示进程树。\n  使用 pgrep 和 pkill 来找到或是kill 某个名字的进程。 (-f 选项很有用).\n  通过  在 bash中，使用重定向到标准输出和标准错误。如： some-command logfile 2\u00261。\n  使用 man ascii 来查看 ASCII 表。\n  系统调试\n  如果你想知道磁盘、CPU、或网络状态，你可以使用 iostat, netstat, top (或更好的 htop), 还有 dstat 命令。你可以很快地知道你的系统发生了什么事。关于这方面的命令，还有iftop, iotop等。\n  要了解内存的状态，你可以使用free和vmstat命令。具体来说，你需要注意 “cached” 的值，这个值是Linux内核占用的内存。还有free的值。\n  如果你要找到哪个socket或进程在使用网络带宽，你可以使用 iftop 或 nethogs。\n  如果你要抓网络包的话，试试 wireshark 或 tshark。\n  了解 strace 和 ltrace。这两个命令可以让你查看进程的系统调用，这有助于你分析进程的hang在哪了，怎么crash和failed的。你还可以用其来做性能profile，使用 -c 选项，你可以使用-p选项来attach上任意一个进程。\n  了解用ldd命令来检查相关的动态链接库。注意：ldd的安全问题\n  使用gdb来调试一个正在运行的进程或分析core dump文件。参看我写的《GDB中应该知道的几个调试方法》\n  学会到 /proc 目录中查看信息。这是一个Linux内核运行时记录的整个操作系统的运行统计和信息，比如： /proc/cpuinfo, /proc/xxx/cwd, /proc/xxx/exe, /proc/xxx/fd/, /proc/xxx/smaps.\n  如果你调试某个东西为什么出错时，sar命令会有用。它可以让你看看 CPU, 内存, 网络, 等的统计信息。\n  使用 dmesg 来查看一些硬件或驱动程序的信息或问题。\n  powerline-shell 不想每次都安装 zsh 与 ohmyzsh？\n$ pip install powerline-shell Add the following to your .bashrc file:\nfunction _update_ps1() { PS1=$(powerline-shell $?) } if [[ $TERM != linux \u0026\u0026 ! $PROMPT_COMMAND =~ _update_ps1 ]]; then PROMPT_COMMAND=\"_update_ps1; $PROMPT_COMMAND\" fi 默认的话，路径会完整显示，会很长\ngenerate the default config at this location using:\n$ mkdir -p ~/.config/powerline-shell \u0026\u0026 \\ powerline-shell --generate-config  ~/.config/powerline-shell/config.json Segment Configuration\n{ \"segments\": [ \"virtual_env\", \"username\", \"hostname\", \"ssh\", \"cwd\", \"git\", \"hg\", \"jobs\", \"root\" ], + \"cwd\": + { + \"max_depth\": 1 + } } 检测硬盘坏道和坏块 硬盘坏道分为物理坏道和逻辑坏道。\n 物理坏道：就是硬盘实体有坏的地方，物理坏道推荐换硬盘，当然也有办法重新分区来隔离坏道，不过可能也用不久，所以不推荐。 逻辑坏道：是磁盘磁道上面的校验信息（ECC）跟磁道的数据对不上号所致。出现这一故障的原因，通常都是因为一些程序的错误操作或是该处扇区的磁介质开始出现不稳定的先兆。物理坏道也是逻辑坏道产生的一种原因。  发现 dmesg：当有硬盘坏道时，通常在dmesg输出的信息中会有 Buffer I/O Error，所以经常检查dmesg的输出可以及时发现是否存在硬盘问题。\n检测 通过fdisk 查看显示所有磁盘或闪存的信息\n$ sudo fdisk -l /dev/sd* 使用 badlocks检查 linux 硬盘上的坏道/坏块\n$ sudo badblocks -s -v /dev/sdb  badsectors.txt 修复 查看上述分区检查出来的坏道信息\n$ tail -f badsectors.txt 先备份数据再修复磁盘。硬盘在使用时不能修复，否则可能存在写并发的问题，所以修复前需要umount对应分区,或使用 Live CD\n$ sudo umount MountPoint umount 分区成功后，修复命令如下，其中-w表示写入修复的，后面是结束（END）和开始（START）块号，注意END在前，START在后。\n$ sudo badblocks -s -w /dev/sdb 205971590 205971595 修复后再次检查\n$ sudo badblocks -s -v /dev/sdb 205971590 205971595 屏蔽 执行e2fsck（针对 ext2/ext3/ext4 文件系统）或fsck命令，命令中还需要用到 badsectors.txt 文件和设备文件。\n# for ext2/ext3/ext4 $ sudo e2fsck -l badsectors.txt /dev/sdb # others $ sudo fsck -l badsectors.txt /dev/sdb 如何探索 從「指令」找到「使用說明」\n找使用說明\n$ man -f ls 閱讀使用說明\n$ man ls $ man 1 ls # 若是「bash」內建的指令，則是可以使用「help」 $ help if 上面的「man 1 ls」，「1」指的是「Manpage Sections」。\n執行下面指令可以看到各個「Section」的簡介。\n$ whatis intro 然後分別執行下面的指令，可以閱讀更詳細的說明\n$ man 1 intro $ man 2 intro $ man 3 intro $ man 4 intro $ man 5 intro $ man 6 intro $ man 7 intro $ man 8 intro 從「指令」找到「所屬套件」\n先透過「whereis」來找到「ls」所在的確切路徑。\n$ whereis ls ls: /bin/ls 然後根據這個結果，再執行下面的指令\n$ rpm -qf /bin/ls $ dpkg -S /bin/ls coreutils-8.32-1.2.x86_64 找「已安裝套件」的「檔案列表」\n$ rpm -ql coreutils $ dpkg -L coreutils 包管理相关 Better output for apt upgrade You can get this better output by asking for more verbose version output (-V, --verbose-versions, see man apt-get).\nfucked up 执行snap list可查看被snap化的应用：\n core18 是 snap 应用的运行环境 snap-store 是 ubuntu snap 应用商店 snapd 自然不用多说，是snap负责管理应用的daemon gtk-common-themes, 只是为了使 snap 化的应用样式保持一致。 gnome-3-34-1804：This snap includes a GNOME 3.28 stack (the base libraries and desktop integration components) and shares it through the content interface.  看看 mount 的结果，你会发现这些应用居然是以squashfs文件系统打包的，然后解包就是一个将squashfs的文件挂载为一个loop设备：\n$ df -t squashfs snap后的程序有两大问题：\n 一是慢，虽然Ubuntu官方宣称 snap 速度已经相比之前提升了几倍，但是，老灯同时在用Fedora 32, 所有程序打开流畅无比。但是 Ubuntu 20.04 下启动或关闭程序一些程序是能感受到明显的卡顿。这个卡顿在1秒以上。 二是体积大。其打包的app体积，相比于AppImage 或 Flatpak, 也是大很多。以Corebird这个应用为例，snap 112MB, deb 2MB, Flatpak 12MB (参考 Snappy Sceptic Files Bug to Ask Why It Even Exists 一文).  Extract a .deb file Download .deb package\n$ apt download nginx Extract .deb package using ar command\nYou can use the ar command to extract .deb file too. The syntax is:\n$ ar x {file.deb} Extract .deb package using dpkg-deb command\nYou can use the dpkg-deb command to extract .deb file too. The syntax is:\n$ dpkg-deb -xv {file.deb} {/path/to/where/extract} Get packages url using apt Not all installed packages will have a URL associated with them, of course. However, you could use apt-get dowload:\n$ apt-get download --print-uris wget 'http://archive.ubuntu.com/ubuntu/pool/main/w/wget/wget_1.15-1ubuntu1.14.04.2_amd64.deb' wget_1.15-1ubuntu1.14.04.2_amd64.deb 270522 SHA256:a3f3b049ea373402236a804a5a0952c6ef9b356ba8cc19fbc1f257db6e8f3052 This is the candidate version as shown by apt-cache policy, which might not necessarily be the installed version.\nDebian 档案库基础 对于典型的 HTTP 访问，档案库在 “/etc/apt/sources.list” 文件中像下面那样指定，例如，现在 stable = bullseye 系统。\ndeb http://deb.debian.org/debian/ bullseye main contrib non-free deb-src http://deb.debian.org/debian/ bullseye main contrib non-free 这里，我倾向于使用代号 “bullseye” 来代替套件名 “stable” ，以避免下一个 stable 版本发布时出现意外。\n“/etc/apt/sources.list” 的含义在 sources.list(5) 中进行了描述，下面是一些要点。\n “deb” 的那行定义了二进制软件包。 “deb-src” 的那行定义了源代码软件包。 第一个参数是 Debian 档案库的根 URL 。 第二个参数是发行版名称：可以使用套件名或代号。 第三个和之后的参数是 Debian 档案库的有效档案库范围名称。  Debian 档案库中的那些目录都是干什么用的？\n dists 目录是“distributions”的缩写，它是访问当前可用的 Debian 发布版本（和预发布版本）的正统方式。 pool 目录：软件包位于一个很大的“池（pool）”中，依源码包的名称进行组织。为了便于管理，pool 按照区（“main”、“contrib”和“non-free”）和源码包名的首字母进行分类。这些目录包括一些文件：每个架构的二进制软件包，以及用于生成这些二进制软件包的源码包。  总结\n一个套件的下载链接：\n[根URL]pool/[有效档案库范围名称]/[套件名首字母]/[套件名]/[套件下载档案] 例如 google chrome的仓库定义是\ndeb [arch=amd64] https://dl.google.com/linux/chrome/deb/ stable main 下载链接是\nhttps://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_104.0.5112.101-1_amd64.deb Find the package that provides a file   use the tool apt-file\n$ sudo apt-get install apt-file $ sudo apt-file update $ apt-file search libstdc++.so.6 $ apt-file find kwallet.h   You can search it in Google directly\n  Use apt search for package name only By default, apt search command looks for the searched term in both the name of the package and its description.\nYou may narrow down the search by instructing the apt command to search for package names only.\n$ apt search --names-only search_term 压缩相关 为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？ 因为 7z 和 zip 压缩格式都不能保留 unix 风格的文件权限，比如解压出个可执行文件要重新 chmod chown 才能恢复正常。而 tar 格式可以。而 tar 本身不提供压缩，无非就是把包括所有文件的內容和权限拼成一个文件而己，所以用另外如 gzip 格式压缩。为什么是 gzip，因为几乎所有 linux 都支持而已。\nextract a specific file from a tar archive Yes, just give the full stored path of the file after the tarball name.\nExample: suppose you want file etc/apt/sources.list from etc.tar:\n$ tar -xf etc.tar etc/apt/sources.list 解压zip 如果解压中文乱码：\n$ unzip -O CP936 xxx.zip CP936其实就是GBK，IBM在发明Code Page的时候将GBK放在第936页，所以叫CP936。\n注意：有些名为 *.rar 文件其实是 zip 文件，直接用 nautilus 解压会乱码，可以用 file filename.rar 确认一下，使用 unzip 解压。\n常见国家的编码 韩文编码\n1.EUC_KR：用来储存韩国KSX1001字集(旧称KSC5601)的字符。此规格由KSX2901(旧称KS C 5861)定义。\nKS X 1001字元使用两个字节来表示： “高位字节”使用0xA1-0xFE，“低位字节”使用0xA1-0xFE\n日文编码\n1.Shift_JIS ：是一个日本电脑系统常用的编码表。它能容纳全角及半角拉丁字母、平假名、片假名、符号及日语汉字。它被命名为Shift_JIS的原因，是它在放置全角字符时，要避开原本在0xA1-0xDF放置的半角假名字符。在微软及IBM的日语电脑系统中，即使用了这个编码表。这个编码表称为CP932。\n2.EUC_JP：用来存储日本JISx0208以及JISx0212的字集的字符，但日文文字较多使用ISO-2022-JP或Shift_JIS的方法来表示。\n俄文编码\n1.KOI8-R：KOI-8系列的斯拉夫文字8位元编码，供俄语及保加利亚语使用。\n常见字符编码 ASCII\nASCII是美国(国家)信息交换标准(代)码，一种使用7个或8个二进制位进行编码的方案，最多可以给256(2^80)个字符 (包括字母、数字、标点符号、控制字符及其他符号)分配(或指定)数值。基本的 ASCII 字符集共有 128 个字符，其中有 96 个可打印字符，包括常用的字母、数字、标点符号等，另外还有 32 个控制字符。\n文件中每一个字都是美标形象码或空格码，这类文件称为“美标文本文件”，或略为“文本文件”，通常可在不同电脑系统间直接交换。 文件中含有控制码或非美标码的文件，通常不能在不同电脑系统间直接交换。这类文件有一个通称，叫“二进制文件”\nANSI\n为了扩充ASCII编码，以用于显示本国的语言，不同的国家和地区制定了不同的标准，由此产生了GB2312, BIG5, JIS 等各自的编码标准。这些使用 2 个字节来代表一个字符的各种汉字延伸编码方式，称为 ANSI 编码，又称为MBCS（Muilti-Bytes Charecter Set，多字节字符集）。在简体中文系统下，ANSI 编码代表 GB2312 编码，在日文操作系统下，ANSI 编码代表 JIS 编码，所以在中文 windows下要转码成GB2312,GBK(gb2312的扩展)只需要把文本保存为ANSI 编码即可。 不同 ANSI 编码之间互不兼容，当信息在国际间交流时，无法将属于两种语言的文字，存储在同一段 ANSI 编码的文本中。一个很大的缺点是，同一个编码值，在不同的编码体系里代表着不同的字。这样就容易造成混乱\nGB2312\nGB2312是ANSI编码里的一种，对ANSI编码最初始的ASCII编码进行扩充，为了满足国内在计算机中使用汉字的需要，中国国家标准总局发布了一系列的汉字字符集国家标准编码，统称为GB码，或国标码。其中最有影响的是于1980年发布的《信息交换用汉字编码字符集 基本集》，标准号为GB 2312-1980,因其使用非常普遍，也常被通称为国标码。GB2312编码通行于我国内地；新加坡等地也采用此编码。几乎所有的中文系统和国际化的软件都支持GB2312。 GB2312是一个简体中文字符集，由6763个常用汉字和682个全角的非汉字字符组成\nGBK\nGB 2312的出现，基本满足了汉字的计算机处理需要，但对于人名、古汉语等方面出现的罕用字，GB 2312不能处理，这导致了后来GBK及GB 18030汉字字符集的出现 GBK共收入21886个汉字和图形符号，其中汉字（包括部首和构件）21003个，图形符号883个。GBK编码标准兼容GB2312，共收录汉字21003个、符号883个，并提供1894个造字码位，简、繁体字融于一库。GB2312码是中华人民共和国国家汉字信息交换用编码，全称《信息交换用汉字编码字符集——基本集》，1980年由国家标准总局发布。基本集共收入汉字6763个和非汉字图形字符682个，通行于中国大陆。新加坡等地也使用此编码。GBK是对GB2312-80的扩展.\nBig5\n在台湾、香港与澳门地区，使用的是繁体中文字符集。而1980年发布的GB2312面向简体中文字符集，并不支持繁体汉字。在这些使用繁体中文字符集的地区，一度出现过很多不同厂商提出的字符集编码，这些编码彼此互不兼容，造成了信息交流的困难。为统一繁体字符集编码，1984年，台湾五大厂商宏碁、神通、佳佳、零壹以及大众一同制定了一种繁体中文编码方案，因其来源被称为五大码，英文写作Big5，后来按英文翻译回汉字后，普遍被称为大五码。大五码是一种繁体中文汉字字符集，其中繁体汉字13053个，808个标点符号、希腊字母及特殊符号。\nunicode\n为什么电子邮件和网页都经常会出现乱码，就是因为信息的提供者可能是日文的ANSI编码体系和信息的读取者可能是中文的编码体系，他们对同一个二进制编码值进行显示，采用了不同的编码，导致乱码。这个问题促使了unicode码的诞生。 如果有一种编码，将世界上所有的符号都纳入其中，无论是英文、日文、还是中文等，大家都使用这个编码表，就不会出现编码不匹配现象。每个符号对应一个唯一的编码，乱码问题就不存在了。这就是Unicode编码。\nunicode，中文叫万国码，统一码，是统一码联盟为了世界上大多数文字系统进行整理和编码。 和unicode类似，iso组织也在做同样的事情，iso开展了 ISO/IEC 10646项目，名字叫“ Universal Multiple-Octet Coded Character Set”，简称UCS。 后来，双方意识到时间上不需要2套通用的字符集，所以双方开始进行整合，到unicode2.0时，unicode的编码和ucs的编码都基本一致。 但是又略有不同。\nUnicode深入人心，且UTF-8(Unicode中的一种)大行其道，UCS编码基本被等同于UTF-16，UTF-32了，所以目前UCS基本谈出人们的视野中。\nUTF-8\nUnicode固然统一了编码方式，但是它的效率不高，比如UCS-4(Unicode的标准之一)规定用4个字节存储一个符号，那么每个英文字母前都必然有三个字节是0，这对存储和传输来说都很耗资源。 为了提高Unicode的编码效率，于是就出现了UTF-8编码。UTF-8可以根据不同的符号自动选择编码的长短。比如英文字母可以只用1个字节就够了。\nUTF-16\nUTF-16是Unicode的其中一个使用方式,UTF-16比起UTF-8，好处在于大部分字符都以固定长度的字节 (2字节) 储存，但UTF-16却无法兼容于ASCII编码。\nBase64\n有的电子邮件系统(比如国外信箱)不支持非英文字母(比如汉字)传输，这是历史原因造成的(认为只有美国会使用电子邮件?)。因为一个英文字母使用ASCII编码来存储，占存储器的1个字节(8位)，实际上只用了7位2进制来存储，第一位并没有使用，设置为0，所以，这样的系统认为凡是第一位是1的字节都是错误的。而有的编码方案(比如GB2312)不但使用多个字节编码一个字符，并且第一位经常是1，于是邮件系统就把1换成0，这样收到邮件的人就会发现邮件乱码。\n为了能让邮件系统正常的收发信件，就需要把由其他编码存储的符号转换成ASCII码来传输。比如，在一端发送GB2312编码－根据Base64规则－转换成ASCII码，接收端收到ASCII码－根据Base64规则－还原到GB2312编码。\nBMP\nUCS-4根据最高位为0的最高字节分成2^7=128个group。每个group再根据次高字节分为256个plane。每个plane根据第3个字节分为256行 (rows)，每行包含256个cells。当然同一行的cells只是最后一个字节不同，其余都相同。 group 0的plane 0被称作Basic Multilingual Plane, 即BMP。或者说UCS-4中，高两个字节为0的码位被称作BMP。 将UCS-4的BMP去掉前面的两个零字节就得到了UCS-2。在UCS-2的两个字节前加上两个零字节，就得到了UCS-4的BMP。而目前的UCS-4规范中还没有任何字符被分配在BMP之外\n硬盘相关 dd 制作U盘启动盘 $ dd bs=4M if=fileName.iso of=/dev/sdx status=progress \u0026\u0026 sync Windows 下用 Rufus 且 dd 写入模式\nexFAT 文件系统\n所谓文件系统，就是文件的储存方式。通过文件系统可以准确找到存储在硬盘中的数据。储存设备都需要指定文件系统，计算机才能读写。\nWindows 的文件系统\n  FAT32：是最老的文件系统，所有操作系统都支持，兼容性最好。但是，它是为 32 位计算机设计的，文件不能超过 232 - 1 个字节，也就是不能超过 4GB，分区不能超过 8TB。\n  NTFS：是 Windows 的默认文件系统，用来替换 FAT32。Linux 下有如下方法创建 NTFS 文件系统\n# gparted $ sudo apt-get install gparted # mkntfs $ sudo apt-get install ntfs-3g $ sudo mkntfs --fast --label myUsbDrive /dev/sdb1 # mkfs $ mkfs.ntfs -f -L DiskLabel /dev/sdb1   exFAT：是 FAT32 的 64位升级版，ex 就是 extended 的缩写（表示\"扩展的 FAT32\"），功能不如 NTFS，但是解决了文件和分区的大小问题，两者最大都可以到 128PB。\n  Linux 的 exFAT 格式化\n$ sudo mkfs.exfat /dev/sdX1 分区表\n所谓硬盘分区，就是指一块硬盘上面，同时存在多个文件系统。每个文件系统管理的区域，就称为一个分区（partition）。\n分区大小、起始位置、结束位置、文件系统等信息，都储存在分区表里面。\n分区表也分成两种格式：MBR 和 GPT。前者是传统格式，兼容性好；后者更现代，功能更强大。\nimg转化成iso IMG是一种文件归档格式（archive format），主要是为了创建磁盘的映像文件（disk image），它可以用来封装存储整个磁盘（通常指软磁盘，Floppy Disk或Diskette）或整片光盘的内容，使用\".IMG\"这个扩展名的文件就是利用这种文件格式来创建的。\n.IMG这个文件格式可视为.ISO格式的一种超集合。由于.ISO只能封存使用ISO9660和UDF这两种文件系统的存储介质，意即.ISO只能拿来封存CD或DVD，因此才发展出了.IMG，它是以.ISO格式为基础另外新增可封存使用其它文件系统的存储介质的能力，.IMG可向后兼容于.ISO，如果是拿来封存CD或DVD，则使用.IMG和.ISO这两种格式所产生出来的内容是一样的。\n将img 转化成iso的有 nrg2iso 或 ccd2iso，分别下载如下：\n$ sudo apt-get install nrg2iso $ sudo apt-get install ccd2iso 使用如下：\n$ nrg2iso image.nrg image.iso $ ccd2iso 启用 TRIM 当我在运行 Linux 的计算机上安装我的第一块固态驱动器（SSD）后，我开始探索如何用好它们。SSD 在操作方式上与传统磁性驱动器不同，并且它们需要在软件上另行处理以达到功能优化。\n在传统磁盘驱动器上，删除时所删除的文件不会从磁盘中完全删除。这就是为什么你可以恢复已删除的文件的原因。基本上，文件系统仅引用磁盘上文件的位置，并且当文件被删除时，该引用被擦除，以允许你在这些空间中写入新数据覆盖原来的数据。然而，对于 SSD，新数据只能写在驱动器上完全新的或已擦除的单元上。因为必须在写入之前清除空间，如果在写入文件时尚未有足够的可用空间，则必须首先擦除该空间。这可能会对性能产生负面影响。\n如果操作系统在写入新数据之前就擦除了未使用的空间，而不是在写入时同时进行擦除，则可以提高文件保存性能。这种做法就是 TRIM。 TRIM 命令本质上允许你的操作系统告诉驱动器哪些区域的数据不再使用，以便擦除它们，加快驱动器将来的写入，可以 SSD 的用户提供更佳的体验。\n在 Linux 中，fstrim 提供此功能，它可以为写入新数据而准备驱动器，并延长驱动器的使用寿命。由于在我使用的 Linux 发行版上 SSD 的 trim 不是自动的，所以必须去调度该操作，否则 SSD 的性能会随着时间的推移而降低。\n为了在驱动器上运行 fstrim，驱动器本身以及其上的文件系统必须支持 TRIM。TRIM SSD 可以在命令行或 cron 任务中手动完成。作为超级用户（使用 su 或 sudo），运行 fstrim / -v 以完成手动 trim，或者设置 cron 任务以在计算机未使用时定期为你运行此命令。对于 fstrim 的完整选项列表请参考它的 man 手册。\n注：可以定期执行fstrim命令，但是不建议在mount / fstab 中使用discard 选项。因为这个选项要求SSD每次删除文件都进行trim操作，比较耗资源，尤其是在文件操作很频繁的时候。所以可以考虑用cron来定期trim。\n硬件支持根据使用的驱动器接口类型如 PCI、ATA、SCSI 还是 SD/MMC 而有所不同。你需要咨询你的 Linux 供应商以了解你的特定发行版是如何支持 TRIM 的。\n例如，红帽提供以下 SSD 磁盘指南。“性能随着所使用的块数接近磁盘容量而降低，性能影响程度因供应商而异，但是所有设备都会遇到一些性能降低。为了解决性能降低问题，主机系统（例如 Linux 内核）使用丢弃请求以通知存储器给定范围的块不再使用。”\nDebian wiki 提供了 SSD 使用的一些基本注意事项：使用 Linux 3.2 或更高版本内核，使用 SSD 的最新固件，使用 EXT4 文件系统，并且“在正常工作负载下有足够的 DRAM 用来操作而不用使用交换空间“。\nreserve 5% of the space By default, ext2/3/4 filesystems reserve 5% of the space to be useable only by root. This is to avoid a normal user completely filling the disk which would then cause system components to fail whenever they next needed to write to the disk.\nYou can see the number of reserved blocks (and lots of other information about the filesystem) by doing:\n$ sudo tune2fs -l /dev/sda8 For a /home partition, it is probably safe to set the reserved fraction to zero:\n$ sudo tune2fs -m 0 /dev/sda8 Which should make an additional ~5GB available.\nChange Partition Label e2label or tune2fs The commands e2label or tune2fs used for changing label of ext2, ext3 and ext4 type partitions.\n# e2label /dev/sda1 ROOT OR # tune2fs –L ROOT_PART /dev/sda1 Here, ROOT and ROOT_PART are the labels to be added to /dev/sda1 which is ext4 formatted partition.\nntfslabel The ntfslabel command used for changing label of NTFS partitions.\n# ntfslabel /dev/sda5 NTFS_DIR mkswap The mkswap command used for changing label of SWAP partition.\nAfter unmounting the filesystem, following command needs to be executed to change the label of swap partition.\n# mkswap -L SWAP_PART /dev/sda5 Where, /dev/sda5 is the SWAP formatted partition.\nexfatlabel The exfatlabel command used for changing the label of exFAT formatted partition.\n# exfatlabel /dev/sda3 EX_PART Disable usb automount $ gsettings get org.gnome.desktop.media-handling automount $ gsettings set org.gnome.desktop.media-handling automount false or use dconf-editor\n如果是 KDE：右键任务栏右侧的 Most Recent Device，进入设置取消自动mount 就好了。\nCreate an ISO File   Mkisofs\n$ mkisofs -o [filename.iso] [ directory_path] $ mkisofs –o backup.iso /home/tin/Documents/backup   dd\n$ dd if=[source] of=[target.iso] $ sudo dd if= /dev/sdb of= diskimage.iso   Brasero\n$ sudo apt-get install brasero   将du的输出按文件大小排序 sdu () { du -sk $@ | sort -n | awk ' BEGIN { split(\"K,M,G,T\", Units, \",\"); FS=\"\\t\"; OFS=\"\\t\"; } { u = 1; while ($1 = 1024) { $1 = $1 / 1024; u += 1 } $1 = sprintf(\"%.1f%s\", $1, Units[u]); sub(/\\.0/, \"\", $1); print $0; }' } SSHFS: How to Mount Remote File Systems Over SSH SSHFS (SSH File System) is a client for mounting a file system located on a remote machine onto your local system through an SSH connection. Using the SFTP (SSH file transfer protocol), the SSHFS command-line tool mounts a physical or virtual disk locally, allowing file transfer between a local and remote machine.\nThis article demonstrates the installation and usage of SSHFS to mount a remote folder or file system over SSH.\nInstall SSHFS $ sudo apt install sshfs Mount a Remote File System on Linux Step 1: Create Mount Point\nCreate a mount point directory in the mnt folder where the remote file system will be mounted:\n$ sudo mkdir /mnt/Step 2: Mount the Remote File System Using SSHFS\nMount the remote file system to the created mount point using the SSHFS tool:\n$ sudo sshfs [-o ] @://mnt// Enter the login password when requested if using password authentication. If the remote server uses SSH key authorization, provide the path of the private key. For example:\n$ sudo sshfs -o allow_other,IdentityFile=/home/kb/.ssh/id_rsa ubuntu@131.153.142.254:/home/ubuntu/ /mnt/test/ The allow_other option allows access to users other than root.\nStep 3: Unmount a Remote File System on Linux\nLastly, when finished with the mount point, unmount the remote file system with:\n$ sudo umount /mnt/交换文件 在桌面环境中，交换分区或文件用来实现休眠(hibernate)的功能，即将当前环境保存在磁盘的交换文件或分区部分。除此之外，某些特定软件需要 swap 才可以正确运行。交换文件与分区性能相同，且交换文件更为灵活，可随时变更大小，增加与删除。\n$ sudo fallocate -l 4G /swapfile # 创建4G的交换空间，大小根据需要自定 $ sudo dd if=/dev/zero of=/swapfile bs=1M count=4096 status=progress # 或者使用 dd $ sudo chmod 600 /swapfile # 设置正确的权限 $ sudo mkswap /swapfile # 格式化swap文件 $ sudo swapon /swapfile # 启用swap文件 最后，向 /etc/fstab 中追加如下内容：\n/swapfile none swap defaults 0 0 KDE 自身提供开箱即用的睡眠功能(suspend)，即将系统挂起到内存，消耗少量的电量。休眠(hibernate)会将系统挂起到交换分区或文件，几乎不消耗电量。\nFile recovery  Ubuntu Help Arch Wiki  Ddrescue GNU ddrescue是一个用于磁盘、CD-ROM与其他数字存储媒体的资料恢复工具。其将原始存储区块（如扇区）从一个设备或文件复制到另一个，同时以智能方式处理读取错误，透过从部分读取的区块中截取尚称良好的扇区来最小化资料损失。\nFile or grep With a bit of chances, sometimes I can recover deleted files with this script or next solution in the answer :\n#!/bin/bash  if [[ ! $1 ]]; then echo -e \"Usage:\\n\\n\\t$0'file name'\" exit 1 fi f=$(file 2/dev/null /proc/*/fd/* | awk '$NF == \"(deleted)\"{print $(NF-1)}') if [[ $f ]]; then echo \"fd $ffound...\" cp -v \"$f\" \"$1\" else echo \u00262 \"No fd found...\" exit 2 fi  There’s another useful trick: if you know a pattern in your deleted files, type alt+sys+resuo to reboot+remount in read-only, then with a live-cd, use grep to search in the hard-drive :\ngrep -a -C 500 'known pattern' /dev/sda | tee /tmp/recover then edit /tmp/recover to keep only what were your file(s) before.\nHey, if with unix philosophy all is files, it’s time to take advantage of this, no ?\n I don’t understand how the grep solution worked for you, it outputs only binary data. How is that useful? – w00t\nSure, it “only” spits out binary data. But sometimes that binary data happens to contain the ASCII bits corresponding to the file I’m looking for. I guess I don’t understand the question? – wchargin\nthe trick is to use a search pattern that is very specific to that file. The grep command will take the 500 lines before and after each matching line, so it will still spit out a lot of irrelevant data, but with a text editor that can cope with that (e.g. Vim), it’s easy to sort out the good from the bad stuff. You could also filter out all lines with nonprintable characters by piping it through another grep command: grep -av \"[^[:print:]]\" – JimmyMcHoover\n Extundelete 安装：\n$ sudo apt install extundelete 查看挂载：\n$ df -lh /dev/sdb1 6.8G 4.1G 2.8G 60% /media/taroballs/taroballs 卸载文件系统：停止对当前分区做任何操作，防止inode被覆盖。inode被覆盖基本就告别恢复了\n$ umount /dev/sdb1 通过inode节点恢复：\n  通过扫描查找删除的文件夹\n$ extundelete /dev/sdb1 --inode 2   恢复单一文件tmppasswd\n$ extundelete /dev/sdb1 --restore-file passwd   恢复目录deletetest\n$ extundelete /dev/sdb1 --restore-directory deletetest   恢复所有\n$ extundelete /dev/sdb1 --restore-all   恢复指定inode\n$ extundelete /dev/sdb1 --restore-inode 14   Commands to see mountpoint On Linux, you can now use the findmnt command from util-linux (since version 2.18):\n$ findmnt -S /dev/VG_SC/home TARGET SOURCE FSTYPE OPTIONS /home /dev/mapper/VG_SC-home ext4 rw,relatime,errors=remount-ro,data=ordered Or lsblk (also from util-linux, since 2.19):\n$ lsblk /dev/VG_SC/home NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT VG_SC-home 254:2 0 200G 0 lvm /home That one is also useful to find all the file system mounted under a specific device (disk or partition…):\n$ lsblk /dev/sda2 NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda2 8:2 0 59.5G 0 part ├─linux-debian64 (dm-1) 252:1 0 15G 0 lvm └─linux-mint (dm-2) 252:2 0 15G 0 lvm / To get the mountpoint only:\n$ findmnt -nr -o target -S /dev/storage/home /home $ lsblk -o MOUNTPOINT -nr /dev/storage/home /home Above findmnt does return with a failure exit status if the device is not mounted, not lsblk.\nSo:\nif mountpoint=$(findmnt -nr -o target -S \"$device\"); then printf '\"%s\" is mounted on \"%s\"\\n' \"$device\" \"$mountpoint\" else printf '\"%s\" does not appear to be directly mounted\\n' \"$device\" fi mount an ISO image/file  Create the mount point directory on Linux: sudo mkdir /mnt/iso Mount the ISO file on Linux: sudo mount -o loop /path/to/my-iso-image.iso /mnt/iso Verify it, run: mount OR df -H OR ls -l /mnt/iso/ Unmount the ISO file using: sudo umount /mnt/iso/  桌面环境相关 在中文介面下，如何只用英文目錄名稱？   方案一：先切到英文介面再重新開機，此時 Fedora 會問你要不要將子目錄換為英文名稱（選 Yes），再切回中文介面重新開機，Fedora 會再問你一次要不要更改子目錄為中文名稱（選 No），收工！\n  方案二：\n$ LANG=C xdg-user-dirs-gtk-update # 同意更新 $ xdg-user-dirs-gtk-update # 保留且不再問   方案三：手動修正配置文件~/.config/user-dirs.dirs ,然後在主目錄下創建對應目錄,重啟即可解決.\n  XDG_TEMPLATES_DIR If you drop any files in “Templates” folder. Then when you right-click and create a new document, you can select any of these files as a basis for the new file.\nIf you have deleted the folder and need to restore this functionality:\n$ gedit ~/.config/user-dirs.dirs Check that there is a line containing the following - if not, add this line.\nXDG_TEMPLATES_DIR=\"$HOME/Templates\" nmcheck.gnome.org nmcheck.gnome.org is not malware. It is the gnome network manager connectivity check (for captive portals/hotspots). Click the link and you will see a single text file with a text in it. It should be “NetworkManager is online”.\nCheck /etc/NetworkManager/NetworkManager.conf. There probably is a section with this in it:\n[Connectivity] uri=http://nmcheck.gnome.org/check_network_status.txt on Ubuntu 20.04 no [Connectivity]  line like accepted answer in /etc/NetworkManager/NetworkManager.conf.\nBut you can disable the auto connectivity check by:\n Go to Settings app Go to Privacy menu On Connectivity tab, uncheck Connectivity Checking  Automatic Light / Dark Mode for GNOME, this shell extension exists: Night Theme Switcher\n改善触摸板体验 众所周知，Macbook 的触摸板是体验最好的，很多果粉都吹 Macbook 的触摸板用了之后“就不再想要去用鼠标”。\n有一群人搞了一个项目：「Linux Touchpad like Macbook Update」。顾名思义，就是“把 Linux 的触摸板搞的像 Macbook 一样”。\n这个项目的主要作用就是针对现在 Linux 下对于触摸板管理的相关驱动进行一些修改和优化，以提升触摸的使用体验，尤其是包括“多点触摸”等等等。\n$ sudo add-apt-repository ppa:p12/xorg-gestures $ sudo apt-get update 当然，尽管如此，我们也只是在驱动层面改善了触摸，在应用层面还需要另一个工具的帮忙：touchegg\n安装完毕之后你的三指上滑和三指下滑都可以正常使用了，譬如三指上滑是窗口最大化，三指下滑是窗口最小化。\nPreferring Chinese fonts to Japanese ones   Copy the system configuration file /etc/fonts/conf.avail/64-language-selector-prefer.conf to the per-user font configuration folder.\n$ mkdir ~/.config/fontconfig/ $ cp /etc/fonts/conf.avail/64-language-selector-prefer.conf ~/.config/fontconfig/fonts.conf   Move SC and TC adn HK fonts in front of JP and KR ones in the aliases defined in ~/.config/fontconfig/fonts.conf:\n    sans-serif  Ubuntu Noto Sans CJK SC Noto Sans CJK TC Noto Sans CJK HK Noto Sans CJK JP Noto Sans CJK KR    serif  Noto Serif Noto Serif CJK SC Noto Serif CJK TC Noto Serif CJK JP Noto Serif CJK KR    monospace  Ubuntu Mono Noto Sans Mono CJK SC Noto Sans Mono CJK TC Noto Sans Mono CJK HK Noto Sans Mono CJK JP Noto Sans Mono CJK KR      Restart apps.\n  Mac OS X Fonts Older: Typography of Apple Inc.\nMonaco: With the August 2009 release of Mac OS X 10.6 “Snow Leopard”, Menlo was introduced as the default monospaced font instead of Monaco in Terminal and Xcode, However, Monaco remains a part of macOS. Monaco is the default font in the current Python IDLE when used on a Mac running OS X El Capitan.\nOS X Mavericks (version 10.9): Lucida Grande\nOS X Yosemite (version 10.10): Helvetica Neue\nOS X El Capitan (version 10.11) : San Francisco\nNow: Fonts for Apple platforms\n SF Pro: Is the system font for iOS, iPad OS, macOS and tvOS. SF Compact: Is the system font for watchOS and includes a rounded variant. SF Mono: Is used in coding environments like Xcode. SF Arabic: Is the Arabic system font on Apple platforms. New York: A companion to San Francisco, this serif typeface is based on essential aspects of historical type styles.  Format Chinese, Japanese, or Korean text in Pages on Mac\nFor best results, use these recommended fonts:\n Simplified Chinese: PingFang SC Traditional Chinese for Taiwan: PingFang TC Traditional Chinese for Hong Kong and Macau: PingFang HK Korean: Apple SD Gothic Neo Japanese: Hiragino Sans (sans serif) or Hiragino Mincho (serif)  Location of core fonts on OSX?\nUser ~/Library/Fonts/ Each user has complete control over the fonts installed in their Home. These fonts are available to that user when he or she is logged in to the computer. Fonts installed here are not available to all users of the computer.\nLocal /Library/Fonts/ Any local user of the computer can use fonts installed in this folder. Mac OS X does not require these additional fonts for system operation. An admin user can modify the contents of this folder. This is the recommended location for fonts that are shared among applications.\nNetwork /Network/Library/Fonts/ The Network folder is for fonts shared among all users of a local area network. This feature is normally used on network file servers, under the control of a network administrator.\nSystem /System/Library/Fonts/ Mac OS X requires fonts in this folder for system use and displays. They should not be manually altered or removed.\nClassic /System Folder/Fonts/ This folder contains fonts used by the Classic environment (Mac OS X v10.4 or earlier only). If more than one Mac OS 9.1 System Folder is present, only fonts in the System Folder selected in the Classic pane of System Preferences are used. Classic applications can access only these fonts, not those stored elsewhere. Conversely, Mac OS X applications can use these fonts, even when the Classic environment is not active.\n直接通过 Mac OS X 的安装镜像找不到字体，在网络上也没有相关教程，只能通过 OSX-KVM 安装一个虚拟机，之后尝试了多种宿主机和虚拟机数据交互方案，最终通过 sftp 成功下载所有字体：\n  QEMU 端口转发：成功！ssh 万岁！\n  How to Turn On SSH on Mac\n  How do I get an entire directory in sftp?：\nUse the -r (recursive) flag:\nget -r *     QEMU 的内置SMB服务器：Connecting to SMB shares with Mac OS X，Finder 连接后直接闪退。\n  挂载qcow2镜像内的分区：linux-apfs-rw，挂载的不知道是些什么东西，好像无法挂载 Data Volume。\n  宿主机的USB设备传递至虚拟机：Adding an USB device，虚拟机毫无反应，根本看不到设备。\n  不同版本的 Mac OS X 字体不一样，字体配置文件也不一样，参考如何修改 macOS 的系统默认中文字体 使用 TinkerTool 来查看与修改默认字体（也需要注意选择对应的版本）。\nHow to extract a .dmg file in Linux?\nJust use 7z x.\n$ 7z x jdk-8u51-macosx-x64.dmg $ cd JDK 8 Update 51/ $ 7z x JDK 8 Update 51.pkg $ 7z x Payload~ Design Principles Applied to the SF Fonts\nThis presentation clarified the difference: SF Pro Display is designed to be used at sizes above 20pt, whereas SF Pro Text is designed to be used at sizes 19pt and below.\nDownload\n  Fontshub\nOn FontsHub.pro, you can download fonts for free and use them on your site to design headlines, quotes, paragraphs, lists, or other text elements.\n  PingFang SC\n  fonts\n  苹果苹方字体完整版下载(Windows-otf版)\n  fonts.conf\nedit .config/fontconfig/fonts.conf\n    sans-serif  SF Pro PingFang SC PingFang TC PingFang HK Noto Sans CJK JP Noto Sans CJK KR    serif  New York PingFang SC PingFang TC PingFang HK Noto Serif CJK JP Noto Serif CJK KR    monospace  SF Mono PingFang SC PingFang TC PingFang HK Noto Sans Mono CJK JP Noto Sans Mono CJK KR    Windows Fonts Fonts\n   语言 字体     英语（English） Segoe UI   简体中文（Chinese Simplified） Microsoft YaHei   繁体中文（Chinese Traditional） Microsoft JhengHei   日语（Japanese） Meiryo   韩语（Korean） Malgun Gothic    Default monospace font\n   Operating system Default monospace font     Windows 10 Consolas    Add a font\nAll fonts are stored in the C:\\Windows\\Fonts folder.\n从 iso 镜像中拷贝出所有字体\n  mount iso file\n  get all fonts\n$ 7z e -aoa \\  sources/install.wim Windows/Fonts/\"*\".{ttf,ttc} \\  -o/home/kurome/Downloads/Microsoft/   Is there a unix command line tool that can analyze font files?\nIn Linux, if you have .ttf fonts, you most probably also have fontconfig, which comes with the fc-scan utility. You can parse the output for the information you want, or use the badly documented --format option.\nFor example:\nfc-scan --format \"%{foundry} : %{family}\\n\" /usr/share/fonts/truetype/msttcorefonts/arialbd.ttf font.conf\n    sans-serif  Segoe UI Microsoft YaHei icrosoft JhengHei Noto Sans CJK HK Noto Sans CJK JP Noto Sans CJK KR    serif  Noto Serif Microsoft YaHei icrosoft JhengHei Noto Serif CJK JP Noto Serif CJK KR    monospace  Consolas Microsoft YaHei icrosoft JhengHei Noto Sans Mono CJK HK Noto Sans Mono CJK JP Noto Sans Mono CJK KR    FromUbuntuToKubuntu $ sudo apt install kubuntu-desktop 类似的还有\n lubuntu-desktop ubuntu-desktop xubuntu-desktop  修改 User-Agent Chrome  方法一：依次打开 开发者工具  More tools  Network conditions，在User agent中选择（已有多种范例可以选择）或自定义相应值。 方法二：添加启动参数 –user-agent=“自定义的User-Agent值”，可在命令行或快捷方式的“目标”框中使用。 方法三：使用User-Agent Switcher for Chrome之类的扩展程序。  Firefox  方法一：在地址栏输入about:config，回车后打开配置编辑器，输入general.useragent.override创建该首选项，数据类型为字符串，再输入自定义的User-Agent字符串。 方法二：使用User Agent Switcher and Manager之类的组件。  从 Linux 终端发送桌面通知与提醒 从 Linux 终端发送通知 要从 Linux 终端发送通知，请使用 notify-send 命令。运行 which notify-send 命令来查看它是否在于你的系统中。如果没有，请使用包管理器来安装它。\n在基于 Debian 的发行版上，输入：\n$ sudo apt install notify-send 几个简单的通知示例：\n$ notify-send \"Dinner ready!\" $ notify-send \"Tip of the Day\" \"How about a nap?\" 你可以用紧急程度、自定义图标等选项来自定义通知。过 man notify-send 了解更多。你也可以在通知正文中使用一小组 HTML 标记，以使消息有一个棒的视觉感受。最重要的是，URL 被呈现为可点击的。例如：\n$ notify-send -u critical \\  \"Build failed!\" \\  \"There were 123 errors. Click here to see the results: http://buildserver/latest\" 发送的通知会被桌面环境接收，并像其他通知一样显示。它们将具有相同的外观、交互和行为。\n将 notify-send 与 at 结合使用 计划任务通常被用来定期安排命令。at 命令安排在一个指定的时间执行一条命令。如果你像这样运行它，它会以交互模式启动，你可以在其中输入要在指定时间执行的命令：\n$ at 12:00 这对脚本来说并不有用。幸运的是 at 接受来自标准输入的参数，所以我们可以这样使用它：\n$ echo \"npm run build\" | at now + 1 minute $ echo \"backup-db\" | at 13:00 有许多指定时间的方法。 从绝对时间，如 10:00，到相对时间，如 now + 2 hours ，再特殊时间，如noon 或 midnight。我们可以把它和 notify-send 结合起来，在未来的某个时间向自己发送提醒。例如：\n$ echo \"notify-send 'Stop it and go home now?' 'Enough work for today.' -u critical\" | at now Desktop file Running a .desktop file in the terminal With any recent Ubuntu that supports gtk-launch just simply go\ngtk-launch  Where  is the name of the .desktop file with or without the .desktop part. The name must not include the full path.\nSo gtk-launch foo opens /usr/share/applications/foo.desktop (or foo.desktop located in one of the other permitted directories.)\nSet variable in .desktop file Add the setting of the environment variable, via the env command, to the entry “Exec”:\nExec=env APPMENU_DISPLAY_BOTH=1 digikam -caption \"%c\" %i How to validate/verify .desktop files? You are looking for the desktop-file-validate tool provided by the desktop-files-utils package in your distribution. It check for syntax, using reserved words/characters, in summary, that it complies with the Desktop Entry specification. Here’s a example of a bad .desktop file:\n$ desktop-file-validate asdf.desktop asdf.desktop: error: value \"s.0.m.t.h.i.n.g\" for key \"Version\" in group \"Desktop Entry\" is not a known version Which in good files like caribou-autostart.desktop won’t show anything.\nDash to Dock Hide Mounted Drives on the Dock\n$ gsettings set org.gnome.shell.extensions.dash-to-dock show-mounts false How do you disable the window preview in Ubuntu dock (GNOME sidebar)?\nThis will allow you to cycle through the open windows by clicking on the icon:\n$ gsettings set org.gnome.shell.extensions.dash-to-dock click-action 'cycle-windows' To revert the action:\n$ gsettings reset org.gnome.shell.extensions.dash-to-dock click-action gsettings or dconf value list for a key\nIf it was a enumeration, you could\ngsettings range ... Example:\n$ gsettings range org.gnome.shell.extensions.dash-to-dock click-action enum 'skip' 'minimize' 'launch' 'cycle-windows' 'minimize-or-overview' 'previews' 'minimize-or-previews' 'focus-or-previews' 'focus-minimize-or-previews' 'quit' 概览 Linux 音频系统 论 Linux 是如何将音乐文件转换成空气的震动 你很有可能从未仔细研究过 Linux 的音频系统. 在大多数情况下, 在装好图形界面后（或者像 ubuntu 或 openSUSE 这种装好就带桌面环境的发行版里），音频就“自然而然”地能用了。的确，对很多人来说，自带的音频设置已经够好了。\n然而，隐藏在这“够好”下面的是一套颇为复杂的音频系统。如果你好奇心大发，想要了解 Linux 是怎么将你的音乐文件变成空气的震动的，抑或遇到了一点关于声音的问题，想要大概了解一下音频系统的构成以便定位问题来源，这里是一篇简短的介绍。\n俯瞰音频系统 要让你的喇叭或者耳机动起来，我们需要经历以下的步骤：\n首先，我们将音频文件 解码 成未压缩的音频流 (waveform)。现在，为了节省空间，大部分音频文件都是压缩过的，比如无损压缩格式 flac, ape 和有损压缩格式 mp3, aac, ogg 等。只有经过解码这个步骤，才能将这些音频文件变成声卡可以认识的音频流。\n然后，我们将这些音频流输出到一个 音频服务器 (sound server) 里。比如，如果你想一边看视频一边参加一个视频会议，你就需要使用一个音频服务器把这两个音频流混合到一起以便让声卡播放。\n最终，我们将混制好的音频流送到 声卡驱动 那里。由于所有音轨已经被音频服务器汇成一条，驱动仅需将音频流发送给声卡做最终的数模转换即可。\nLinux 下的具体实现 架构已经明晰，那么 Linux 下是哪些部件组成了这一架构的呢？\nALSA: 声卡驱动 为了保证音频被正确播放，发送和接收端需要确定比特率，采样深度等参数。\n严格来说，ALSA 是一套完整的音频处理系统（毕竟它的全名是 高级 Linux 音频架构 ）。但在现在的大多数使用情况下，我们只是将它作为一个声卡驱动用。这里主要介绍实际的使用场景。\nALSA 负责直接与声卡通讯。为了方便应用程序开发，ALSA 提供了一套与硬件无关的 API 以便程序能够轻松地设置输出参数并发送音频流。例如，是否使用声卡提供的硬件混音？还是使用软件混音器？如何调节各应用的响度？等等。\n然而，直接使用 ALSA 有很多不方便。为了使 ALSA 能够同时播放多条音频，用户必须做一些设置 。因此，大部分现代的桌面环境使用音频服务器解决这类问题。\nPulseAudio: 你或许正在用的音频服务器实现 如果你正在使用某种桌面环境的话，你大概已经用过位于托盘上面的音量控制控件。这通常就是控制 PulseAudio 服务器的一个前端。\n为了将多个程序发来的音频流按照指定的音量混音并发往声卡驱动（通常是 ALSA），PulseAudio 拥有一个内置的混音器。PulseAudio 还提供了一套很适合用户界面的 API（例如各大桌面环境的音量控件）。\n然而，由于 PulseAudio 主要针对没什么专业需求的 Linux 桌面用户，它使用一套检测系统来发现系统上可用的音频硬件，并自动决定应该如何配置这些硬件。然而，这些配置在很多情况下并不理想。更糟糕的是，为了省电或节省系统资源，内置的混音器往往不能提供最佳的质量，且会引入相当大的内部处理延迟。\n简单得说，对于懒得操心细化的配置且并不需要多么高的音频质量的普通用户来说，PuseAudio 应该已经足够好了。\nJACK: 创造者与专业用户的音频服务器 PulseAudio 也许对普通用户来说已经够好，那么对于专业用户呢？\n答案是 JACK！从设计角度上来说，JACK 并不是用来当作通用的音频服务器使用的。它是一个 “音频连接工具”（正如它的名字，“JACK Audio Connection Kit” 所言）。在 JACK 的世界里面，每个音频节点（可能是个音频软件，也有可能是一个抽象硬件，比如一个 MIDI 键盘）都可以拥有多个输入源和输出源。举个例子，你可以将你的 MIDI 的键盘的 MIDI 输出连接到 FluidSynth （一个 MIDI 电子合成器）的输入源上，这样在 FluidSynth 的输出源上就会输出合成好的声音。然后将 FluidSynth 的输出源同时连接到一个录音软件（比如 Audacity）和主音频输出上。这样。你就可以一边监听你的演奏，一边将它们录制到音频文件当中去。\n而且，由于 JACK 是被设计成用作专业音乐制作的，它内置的混音器的质量极佳。因此，有很多 JACK 用户并不用它制作音乐，而是把 JACK 当作一个质量更好且用起来更灵活的音频服务器使用。想让视频会议上的同事们听听你正在听的音乐？没问题！只要将音乐播放器的输出源接到视频会议软件的输入源上即可。\n然而，JACK 没能统治 Linux 桌面是有原因的。相对于 PulseAudio 来说，JACK 需要配置一些参数（例如声卡的比特率，缓冲区大小等等）才能正常工作。如果参数不正确，最终的声音会出现莫名其妙的卡顿和损坏。在此之外，JACK 的灵活性有些时候反而是劣势，毕竟为了达成这种灵活性，JACK 有些情况下需要用户手动配置音频节点的连接方式。\nPipeWire: 新希望 严格来说，PipeWire 不仅仅是一个音频服务器，不过它的音频服务器功能十分卓越。PipeWire 最早的设计用途是视频流处理系统，不过后来扩展为可以处理任意多媒体流（包括我们关心的音频流）。现在 Wayland 上分享桌面就是由 PipeWire 负责中介，实时视频压缩以及鉴权。相比于 PulseAudio，PipeWire 的 CPU 占用更低，混音器质量更好且处理延迟极低。对于桌面用户来说，PipeWire 对蓝牙音频设备的支持也更加可靠。对于专业用户来说，PipeWire 的音频内部处理延迟已经接近 JACK 了，足以支撑专业音频处理。\n更棒的是，PipeWire 完全实现了 PulseAudio 的应用接口。因此，理论上你只需要装上 PipeWire（发行版的包管理器应该会自动卸载 PulseAudio 以防止冲突），所有的程序和控制面板应该都可以完美工作。目前为止（2022年2月，0.3 以上版本）PipeWire 应该已经很稳定了，但是 PipeWire 毕竟是很新的项目，可能还会有一些兼容性问题。\n我应该用什么？ 如果你一般只听听音乐什么的话，PulseAudio 应该足够好了。如果你遇到了任何音质上面的问题，很有可能只是因为 PulseAudio 没有使用最佳的配置选项，或者有可能是因为你的声卡的驱动有 bug。看一看 ArchWiki 上面的 PulseAudio/Troubleshooting，大多数问题应该很好解决。\n如果你想做点音乐的话，JACK 值得一试。你需要一点配置（比如给 JACK 实时权限，找到适合你声卡的配置等等），但配好之后 JACK 的灵活性是无可匹敌的。\n如果你觉得 PipeWire 解决了你的痛点的话，PipeWire 值得一试！PipeWire 已经在我的主力机上跑了一年多了，体感没有什么稳定性问题，而且蓝牙连接过程相对 PulseAudio 更可靠。\n对于某些特殊情况，比如你只需要运行一个播放音频的软件且需要最小的延迟（a.k.a. 音游），那么你可以试着让应用程序直接使用 ALSA，毕竟这样的话音频将被直接发往声卡，省略了所有中间处理的步骤。或者也可以试试 JACK，毕竟在 JACK 里声音延迟是相对较小且可控的。\nDownload a single folder from GitHub Update Apr. 2021: there are a few tools created by the community that can do this for you:\n Download Directory(Credits to fregante)  It has also been integrated into the excellent Refined Github chrome extension as a button in the Github web UI.   GitZip (Credits to Kino - see his answer here) DownGit (Credits to Minhas Kamal - see his answer here)  Note: if you’re trying to download a large number of files, you may need to provide a token to these tools to avoid rate limiting.\nOriginal (manual) approach: Checking out an individual directory is not supported by git natively, but Github can do this via SVN. If you checkout your code with subversion, Github will essentially convert the repo from git to subversion on the backend, then serve up the requested directory.\nHere’s how you can use this feature to download a specific folder. I’ll use the popular javascript library lodash as an example.\n  Navigate to the folder you want to download. Let’s download /test from master branch.\n  Modify the URL for subversion. Replace tree/master with trunk.\nhttps://github.com/lodash/lodash/tree/master/test ➜\nhttps://github.com/lodash/lodash/trunk/test\n  Download the folder. Go to the command line and grab the folder with SVN.\nsvn checkout https://github.com/lodash/lodash/trunk/test   You might not see any activity immediately because Github takes up to 30 seconds to convert larger repositories, so be patient.\n Full URL format explanation:\n If you’re interested in master branch, use trunk instead. So the full path is trunk/foldername If you’re interested in foo branch, use branches/foo instead. The full path looks like branches/foo/foldername Protip: You can use svn ls to see available tags and branches before downloading if you wish   That’s all! Github supports more subversion features as well, including support for committing and pushing changes.\nuse Github Contents API\nou can use Github Contents API to get an archive link and tar to retrieve a specified folder.\nCommand line:\ncurl https://codeload.github.com/[owner]/[repo]/tar.gz/master | tar -xz --strip=2 [repo]\\-master/[folder_path]\\ For example: if you want to download examples/with-apollo/ folder from zeit/next.js, you can type this:\n$ curl https://codeload.github.com/zeit/next.js/tar.gz/master | tar -xz --strip=2 next.js-master/examples/with-apollo locale 切換 參考文章  Ubuntu Community Help Wiki / Locale Debian Wiki / Locale  前提 安裝完成後，一開始「/etc/default/locale」的內容如下\n# File generated by update-locale LANG=\"en_US.UTF-8\" LC_NUMERIC=\"en_US.UTF-8\" LC_TIME=\"en_US.UTF-8\" LC_MONETARY=\"en_US.UTF-8\" LC_PAPER=\"en_US.UTF-8\" LC_NAME=\"en_US.UTF-8\" LC_ADDRESS=\"en_US.UTF-8\" LC_TELEPHONE=\"en_US.UTF-8\" LC_MEASUREMENT=\"en_US.UTF-8\" LC_IDENTIFICATION=\"en_US.UTF-8\" locale-gen 執行下面指令\n$ sudo locale-gen en_US.UTF-8 zh_CN.UTF-8 zh_TW zh_TW.UTF-8 Generating locales (this might take a while)... en_US.UTF-8... done zh_CN.UTF-8... done zh_TW.BIG5... done zh_TW.UTF-8... done Generation complete. 切換成「英文界面」 修改「/etc/default/locale」這個檔案，改成如下的內容\nLANG=\"en_US.UTF-8\" 或是直接執行下面指令，修改「/etc/default/locale」這個檔案\n$ sudo sh -c 'echo \"LANG=\\\"en_US.UTF-8\\\"\"  /etc/default/locale' 切換成「中文界面」 修改「/etc/default/locale」這個檔案，改成如下的內容\nLANG=\"zh_TW.UTF-8\" 或是直接執行下面指令，修改「/etc/default/locale」這個檔案\n$ sudo sh -c 'echo \"LANG=\\\"zh_TW.UTF-8\\\"\"  /etc/default/locale' 其他方式 或是也可以善用下面的指令來操作。\n$ sudo dpkg-reconfigure locales Locales of SDDM 在使用 KDE 的时候，在设置里将语言改为英文，会发现 SSDM 依旧是中文日期，原因是：The SDDM is following the system locales defined in /etc/default/locale\n- LC_TIME=\"zh_CN.UTF-8\" + LC_TIME=\"en_US.UTF-8\" Uniform look Qt 应用程序，在 Gnome 上的 Appearence 设置就对其无效。参考 Uniform look for Qt and GTK applications 进行设置\n  方案一：安装并使用同时支持 QT 和 GTK 的主题。\n  Breeze 主题：在 KDE 平台下使用 kde-config-gtk-style 设置 GTK 主题。\n$ sudo apt install breeze-gtk-theme kde-config-gtk-style go to System Settings  Appearance  Application Style  Configure GNOME/GTK Application Style….\n  Adwaita 主题：在 Gnome 平台下使用 QT_STYLE_OVERRIDE 环境变量或 qt5ct 工具\n$ sudo apt install adwaita-qt -y $ echo \"export QT_STYLE_OVERRIDE=adwaita-dark\"  ~/.profile     方案二：使用 Kvantum。参考 How to Change Look and Feel of Qt5 Apps in Ubuntu, Debian, Fedora Linux 来设置 QT 程序的黑暗模式：\n$ sudo apt install qt5-style-kvantum qt5-style-kvantum-themes -y $ echo \"export QT_STYLE_OVERRIDE=kvantum\"  ~/.profile   离线保存网页  pocket（可离线。要账号。有时会抓取错误） keep（只有文字没有图） evernote（选项多，但阅读，添加和管理无法脱机。要账号。不能保存豆丁、百度文档里面的内容） 打印为pdf（格式有变化，图片可能缺损。不能保存豆丁、百度文档里面的内容） 另存为html（有些网站，比如豆丁文档也可以完整保存，打印为pdf则不能。缺点是一个网页文件一个文件夹，看着难受。）  接下来是我的解决方案：\nchrome插件SingleFile：Single File和SingleFile Core，两个都要装。保存为网页htm格式，一个文件，可以保存豆丁文档，可以脱机。基本完美。安装插件后务必重启浏览器。\n有一点要注意的：如果你查看的豆丁或百度文库有好多页，务必要让所有页都显示过一次，再使用single file，才能完全保存。否则脱机的时候只能看到你看过的页面。已测试。\nSingle File 把样式都内嵌了，图片也是Base64格式内嵌，还把坑爹的脚本都移除了，这样不会出现各种加载错误什么的。\n缺点：无法云同步。\n2016.7更新：刚刚发现在Chrome地址栏中输入chrome://flags，可以看到一些实验功能，其中包含了将网页保存为.mhtml格式开关，开启后重启Chrome，ctrl+s开启的保存窗口中就多出了一种保存为.mhtml的选项，也即将网页保存为单一文件。\n2020年，更新，chrome已经把mhtml加入默认保存方式\nDynamic Workspaces A kwin script that creates and deletes desktops as you move windows on the last one.\n用 JavaScript 写的，可以参考 KWin Scripting Tutorial，还有一个 Plasma Desktop Scripting\nmeta, super, and hyper keys   Meta\nThe Meta key is not found on modern keyboards. Its use is sometimes emulated with AltGr (on some international layouts) or the right Alt key on the others. In addition:\n Sun keyboards have a meta key (◆) as well Emacs calls Esc the Meta key    Super\nThe Super key is equivalent to or the ⌘ (command) key. In Ubuntu, it’s just another name for .\n  Hyper\nHyper is the fourth (counting Ctrl) and last modifier on the Space cadet keyboard. In Ubuntu, its function is undefined (I think), but it can be mapped, as in the screen shot above, to , should it be needed.\n  KDE 的 Super、Meta 是 Win 键\n终端相关 個人 bin 資料夾 $ mkdir -p ~/bin $ mkdir -p ~/.local/bin/ 在「~/.profile」這個檔案，有將這兩個路徑加入「PATH」。\n$ cat ~/.profile # ~/.profile: executed by the command interpreter for login shells. # This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login # exists. # see /usr/share/doc/bash/examples/startup-files for examples. # the files are located in the bash-doc package. # the default umask is set in /etc/profile; for setting the umask # for ssh logins, install and configure the libpam-umask package. #umask 022 # if running bash if [ -n \"$BASH_VERSION\" ]; then # include .bashrc if it exists if [ -f \"$HOME/.bashrc\" ]; then . \"$HOME/.bashrc\" fi fi # set PATH so it includes user's private bin if it exists if [ -d \"$HOME/bin\" ] ; then PATH=\"$HOME/bin:$PATH\" fi # set PATH so it includes user's private bin if it exists if [ -d \"$HOME/.local/bin\" ] ; then PATH=\"$HOME/.local/bin:$PATH\" fi 为什么执行自己的程序要在前面加./ shell是如何运行程序的：如果不给出相对路径，或者绝对路径，那么它会经历下面的查找过程。\n alias中查找 内置命令中查找 PATH中查找  $ cd /temp $ ./ls_bak 等同于\n$ /temp/ls_bak shell通常可以执行两种程序，一种是二进制程序，一种是脚本程序。如果是文本程序，且开头没有指定解释程序，则按照shell脚本处理，如果指定了解释程序，则使用解释程序来解释运行；对于二进制程序，则直接创建新的进程即可。\ngood practice to avoid using sudo su It is good practice to avoid performing more actions as root than you need to. sudo facilitates this by allowing you to run individual commands as root without having to log in as root and without needing an interactive root shell for tasks you would otherwise not run a shell to do. But sudo su is not a “backdoor,” it is simply a somewhat less elegant way to do what sudo is designed to allow you to do with sudo -s. Similarly, sudo -i is the more elegant way to achieve what sudo su - would get you: a simulated initial login shell whose environment is like what you would get if you could log in as root on the command line. See man sudo.\nDefault .bashrc You don’t need to trust this random gist on Github. Heck, it’s ~10 years old. Don’t you want the latest default - or the default that’s specific to your version of Ubuntu?\nYou can find the “skeleton” file used to initialize new users in ls -a /etc/skel.\nTo copy someone else’s comment: just run cp /etc/skel/.bashrc ~/ to copy from that “skeleton” to your current bashrc.\nuse ‘cp’ to exclude a specific directory $ shopt -s extglob $ echo images/* images/004.bmp images/033.jpg images/1276338351183.jpg images/2252.png $ echo images/!(*.jpg) images/004.bmp images/2252.png 使用wget下载目录下所有文件 $ wget http://your/website/folder/ -c -r -np -nd -k -L -p 根据需要增减参数：\n -c 断点续传 -r 递归下载指定网页目录下（包括子目录）的所有文件 -np 递归下载时不搜索上层目录，否则将下载路径的上一级目录下的其它文件 -nd 递归下载时不逐层创建目录，将所有的文件下载到当前目录 -k 将绝对链接转为相对链接，如需下载整个站点后脱机浏览网页则需加上此参数 -L 递归时不进入其它主机 -p 获得显示HTML页面所需的所有图片等。  在文件夹内进行的全文搜索 这里写了一个讲究小而美和工具之间组合的全文搜索的方法。\n主要用 fzf，一个效率很高对每一行进行模糊搜索的工具。你可以给它喂一堆任意的字符串，然后从中搜索。\n比如用 fd 喂给 fzf 所有目录，然后发送给 cd 来快速跳转目录\n$ sudo apt install fzf fd-find $ vim ~/.bashrc fcd(){ cd $(fd --type directory | fzf) } 如果我想跳转到位置比较深 workbench-scheme 下 racket 目录，只需要输入 很短的 wor rac 然后按回车就够了\n 为了全文搜索，我们需要一个喂给 fzf 所有文件的文件名 + 行号 + 行内容的小脚本 cat-all.py\n#!/usr/bin/env python3 import os,sys, subprocess IGNORE_DIRS=[\".git\",\".vscode\",\"build\"] pwd=os.getcwd() for (dirpath, dirnames, filenames) in os.walk(pwd): if not any(ig in dirpath for ig in IGNORE_DIRS): for file in filenames: full_path=dirpath+\"/\"+file relative_path=full_path[len(pwd)+1:] mimetype=subprocess.check_output([\"file\",\"--dereference\",\"--brief\", \"--mime-type\", full_path]).decode() if(mimetype.startswith(\"text\")): try: with open(full_path,\"r\") as f: for ln,line in enumerate(f,start=1): if not line.isspace(): print(relative_path,\"|\",ln,\"|\",line.strip()) except: print(\"[FAILED] \",full_path, file=sys.stderr) 然后就可以这样寻找当前目录下以前写过的所有的 hello, world\n$ cat-all.py | fzf 和 grep \"Hello, World\" 区别在于一些 hello_world，“Hello to some World”， “World Hello” 之类的也会被匹配到\n如果想按回车直接打开对应的文件，只要把 fzf 输出的内容用 awk 截取第一部分传给 xdg-open 就行了\n$ cat-all.py | fzf | awk '{print $1}' | xargs xdg-open \u0026 /dev/null 据测量在我的电脑上这样搜索 80 万 行 左右的文本需要大约 12 秒左右的时间来索引，且过程中 fzf 占用 ~130mb 的内存。\nConvert WebP to JPEG/PNG $ sudo apt-get install webp $ cwebp -q [image_quality] [JPEG/PNG_filename] -o [WebP_filename] $ dwebp [WebP_filename] -o [PNG_filename] 例如\n$ ls *webp | xargs -I image sh -c 'dwebp image -o image.png' Preserve File Permissions While Copying Files You can use the -p option of cp to preserve the mode, ownership, and timestamps of the file.\ndiff  By searching the bash manpage for the characters , you can find that this is called “process substitution.”\nYou don’t need to worry about the efficiency of creating a temporary file, because the temporary file is really just a pipe, not a file on disk. Try this:\n$ echo (echo foo) /dev/fd/63 This shows that the temporary file is really just the pipe “file descriptor 63.” Although it appears on the virtual /dev filesystem, the disk is never touched.\nThe actual efficiency issue that you might need to worry about here is the ‘process’ part of “process substitution.” Bash forks another process to perform the echo foo. On some platforms, like Cygwin, this can be very slow if performed frequently. However, on most modern platforms, forking is pretty fast. I just tried doing 1000 process substitutions at once by running the script:\necho (echo foo) (echo foo) ... 997 repetitions ... (echo foo) It took 0.225s on my older Mac laptop, and 2.3 seconds in a Ubuntu virtual machine running on the same laptop. Dividing by the 1000 invocations, this shows that process substitutions takes less than 3 milliseconds—something totally dwarfed by the runtime of diff, and probably not anything you need to worry about!\n删除字符串空白符 #!/usr/bin/bash echo $1 | tr -d [:blank:] 科普 X 和 Wayland 简介 X即X11、X Window System，是用于在类UNIX的操作系统上的位图显示的窗口系统，提供了GUI环境的基本框架。X由X.Org Foundation维护，遵守MIT协议，当前参考实现为X.Org Server。在架构方面，X使用了C/S模型，客户端和服务器可以在同一个机器上，也可以在不同的机器上，X作为Server为应用程序这个Client提供显示和I/O服务。\nWayland是一个显示服务协议，服务端为Wayland Compositor，把X的X Server和Compositor合二为一，旨在替换X，作为类Unix操作系统上更现代、简介的窗口系统，遵守MIT协议，提供了Wayland Compositor的参考C语言实现Weston。\n时至今日，原本在X Server中做的事很多已被移到kernel或者单独的库中，因此X Server就显得比较累赘了。Wayland在架构上去掉了这个中间层，将compositor作为display server，使client与compositor直接通信，从而在灵活性和性能等方面上能够比前辈更加出色。\n查看是否使用 wayland\n$ echo $XDG_SESSION_TYPE 要切换就在登录界面选择 on wayland 好了。\n主要区别 这一切都得从头说起。\nX 协议设计于 1980 年代，那时候窗口界面刚刚起步，人们还没什么 3D 特效一类的想法，而且机能也不允许，放到今天任何一个有点桌面基础的人都能理解应该给每个窗口一个 buffer 然后把这些 buffer 里的 texture 贴出来的设计逻辑，但 那时候可没那么多内存让你给每个窗口一个 buffer。所以就如同各种常见的领域一样，有个小天才一拍脑子想，反正 最后显示到桌面上的都是一个屏幕大小，我们只要准备这么大一块内存就行了嘛！换句话说，每个窗口的 buffer 要去掉自己被覆盖住的内存，整体内存大小就是可控的，在内存里是直接没有被覆盖的部分的。\n不得不说这位的思路在当时还是很有意义的，加上窗口大小都是矩形的假设，计算实际显示区域并不难，于是 Xserver 就是这样设计的。它维护一个屏幕大小的 buffer 自己计算窗口的实际位置，发生了变化（比如一个窗口盖住另一个），就给变化的窗口发一个重绘信号，这个窗口再发出绘图申请，直接绘制到 Xserver 的 buffer 里。由于 Xserver 知道所有窗口的位置，它就可以重定向鼠标键盘输入过去。然后具体的窗口移动缩放交给 window manager，它再把改过的位置回报给 Xserver。\n一切事情都变得很美好，直到某天一个人提出一个问题：我想要半透明的终端！\n程序员是不屑于解决提出问题的人的，如果用现代程序员的思维，做一下 alpha 混合其实很简单，只要 Xserver 能读取上层窗口的颜色和下层窗口的颜色就行了，可是你还记得当年的小天才吗？Xserver 说不太好意思，对于 一个像素我内存里只有一层，就是最上面显示的那个窗口……并且积习难改，我们不能改这个 feature……你想上下混合？死宅不要整天做梦，这是老祖宗留下来的不能改啊。\n如果你用过没开启 混成 Compositing 的 XFCE 和半透明的 XFCE-Terminal，你会发现它是可以透出窗口下面的壁纸的，先别着急喊我骗子，你在终端下面放一个别的窗口试试？神奇的现象发生了，终端显示的还是壁纸……\n上有政策下有对策嘛，一些终端作者想到反正壁纸总是固定的，我读取壁纸图片，取出终端所在的位置，然后在我窗口做个 alpha 混合不就行了？但是人不能自己骗自己啊，这是个客户端的假透明，我们要学习 GNOME 开发者的思维：不够好就砍掉。（大雾\nX 一看不行啊，那我们改一下协议吧，加一个叫 混成器 compositor 的东西，如果你写了这个东西，X 就不是直接更新他自己的内存 buffer 了，而是交给混成器。混成器可以获取一系列窗口的内容，让它们都画到不同的 buffer 里面（内存终于够大了啊！），再把它们处理了丢到屏幕上去。Xserver 只是要求 compositor 最后返回一整个屏幕（通常是，也可以小一点）然后给这个直接贴到最上面去（可以简单理解为混成器画好一整张就行了，别的都不管了）。\n理论上来说，混成器想怎么放这些窗口就怎么放这些窗口，就算想把他们丢到屏幕外边都行，反正你最后返回一个图就行了，Xserver 也不管是不是涩图。\n但是有个尴尬的事情，输出给你管了，输入你管不着啊！之前说了 Xserver 自己按照自己存的窗口位置分配输入，你把窗口挪走了，Xserver 可还是按照自己记录的窗口位置分配输入的，如果你想自己处理窗口位置分配输入，好嘛，Xserver 里面的代码你再复制到你混成器里一份吧！\n所以实际上 compositor 里面怎么做的呢？我最后处理完的窗口，位置和 Xserver 记录的位置还得一样，然后 Xserver 给我那个返回整张屏幕的顶层窗口，我就不接收输入了，这样直接透过顶层点到下面，就和窗口位置对应了（什么乱七八糟的破玩意啊！）。如果你要做个动画呢？你做动画的时候，Xserver 那边记录的位置可不跟你变（要是变，按照 X 的设计你这数据得跑好几个来回），你的鼠标点击在这时候是不准的，传不到窗口里面。\n这些 compositor 都是各个桌面环境做的，他们一般都集成到自己的 window manager 里了。\n而且随着时间发展，越来越多的 Xserver 和 client 是跑在同一个机器上的，很多 client 想自己利用显卡处理图形，就有人在协议上打洞，Xserver 做的越来越少了，更多的事情 client 自己都做了。\n你还想再往 X 协议上糊一层吗？别糊了兄弟，你这也太挫了！一开始 X 的设计是提供机制而非策略，Xserver 自己是符合了（然后除了 Xorg 其他实现都死了），和 Xserver 配合的可是被他绑的死死的比如 compositor，性能翻了几倍还得拉着这些历史垃圾跑，Xserver 终于活成了自己最讨厌的样子。\nWayland 做的事情很简单，反正 compositor 都做这么多了，那直接把 Xserver 的功能也丢给 compositor 吧！Compositor 下层接的是 DRM 控制渲染，libinput 控制输入，GBM/EGLStreams 控制内存管理，上层更简单了，每个窗口丢给我一个 texture，我负责安排你们这些 texture 放在哪里，然后我按照我安排的位置，告诉你们鼠标进谁窗口了键盘进谁窗口了。然后因为要把这些 texture 混合到屏幕上，一般都用 OpenGL 的硬件加速，但在 Linux 下创建 OpenGL Context 的 GLX 库是和 X 绑定的，所以一般大家都用 OpenGL ES Context 的库 EGL。这个库只干扰最后合成图片时候的事情，至于你的 texture 用的是 OpenGL 还是 OpenGL ES 还是 CPU 画的都没有关系，现在 Wayland 一概不管了，你自己客户端处理自己的内容吧，我又不是 Xserver！\n所以对于 GNOME 和 KDE 等等而言，现在他们打交道的一个是内核一个是窗口，而不是以前一样和 Xserver 打交道了，省了数据交换，同时自己可以自由控制窗口输入输出面积。Xorg 应该被淘汰不是因为功能性原因，而是因为它的设计在当时很聪明，但现在只是历史包袱，实在太挫了。\n看完这篇文章建议回去阅读《X 中的混成器與 Composite 擴展》和《Explanations》，可以了解更多的实现细节，现在再看就不会那么混乱了。\nOthers Nvidia driver\nEnabling DRM KMS is required.\nGnome Night Light\nNote: Currently, Night Light doesn’t work on NVIDIA cards in Wayland sessions.\n解决办法就是不使用 Nvidia 闭源驱动或不使用 Wayland。\nGnome cursor\nNote: By default, on Wayland, Gnome applications should be unable to display your cursor themes located in ~/.local/share/icons. As a workaround, you can add that path to XCURSOR_PATH.\n$ gsettings list-recursively org.gnome.desktop.interface | grep cursor # get default cursor settings $ vi .bash_profile # Setting cursor on wayland export XCURSOR_PATH=${XCURSOR_PATH}:/usr/share/icons:~/.local/share/icons export XCURSOR_THEME=Yaru export XCURSOR_SIZE=24 # Add local bin export PATH=${PATH}:~/.local/bin 不同情况下的图形效果\n然后对比一下水族馆的图形性能数据：\n X11 + Intel 显卡，30fps 左右。 Wayland + Intel 显卡：接近 60fps。  其实 WebGL 用得不多啦（Google 地图更常卡在网络 I/O 上而不是渲染上）。更多的是播放在线（YouTube）视频啦。\n X11 + Intel 显卡，1080p 60fps，GPU 用满，丢帧三分之一！4k 60fps 也差不多。原来重点不是分辨率（反正 GPU 的解码能力还没用满），重点是视频的帧率啊。 Wayland + Intel 显卡，4k 60fps 都不怎么丢帧，更不说其它了。GPU 图形计算用到一半左右。  Disable Caps Lock Key\nWayland’s security model prevents programs other than the compositor from grabbing raw keyboard input. Some compositors support remapping keys (for example, mutter through gnome-tweaks), but many do not.\n Open gnome-tweaks Click on the Keyboard \u0026 Mouse  Additional Layout Option Set up Caps Lock behaviour as per your needs.  Qt application with the Wayland\nTelegram 使用 gnome wayland 表现不好，毕竟是用Qt开发的，比如cursor变大，图标没有了，输入法不跟随了。\n因此：To force the usage of X11 on a Wayland session, use QT_QPA_PLATFORM=xcb.\nExec=env QT_QPA_PLATFORM=xcb /home/kurome/.opt/telegram/Telegram -workdir /home/kurome/.local/share/TelegramDesktop/ -- %u 这样就不需要设置XCURSOR环境变量了。\nLTS There is a new release every 6 months (in April and October), with the version number being year.month (e.g.: 16.04 was released in April 2016). Every two years, the April release is a Long Term Support version.\nLTS releases are the ‘enterprise grade’ releases of Ubuntu and are used the most. An estimated 95% of all Ubuntu installations are LTS releases.\nInterim releases (normal releases) will introduce new capabilities from Canonical and upstream open source projects, they serve as a proving ground for these new capabilities.\n All Interim releases (13.04 and later) are only supported for 9 months. All LTS releases (12.04 and later) are supported for five years (now is ten years) on both the desktop and the server.  Now, support means:\n Updates for potential security problems and bugs (not new versions of software) Availability of Commercial support contracts from Canonical Support by Landscape, Canonical’s enterprise oriented server management tool set  Ubuntu releases additional versions of the last LTS between releases—such as 14.04.1, that incorporate all of the updates up to this point. This is called a Point-Release (or sometimes snapshot). Those are released every quarter to half year, as needed.\nThe most important thing (for most people) is how long you get to use an install without having to do a release upgrade. A non-LTS version of Ubuntu only gets updates for 9 months from its release so to stay up-to-date —which is critically important— you need to upgrade twice a year; you need to upgrade through every Ubuntu version…\nConversely an Ubuntu LTS release is supported for 5 years and you can upgrade directly from LTS to LTS. This gives you long-lived, solid base to target and test on that makes it super-easy to release-upgrade when you decide to. It’s therefore ideal for mass deployment, high-availability systems, and just people who don’t like doing release-upgrades.\n软件的稳定性 软件的稳定性其实往往来源于：足够多的使用者与足够多的反馈跟改进。\nLinux系统，在服务器端的大多数常用软件都有足够多的使用者，所以就足够稳定，由于它在服务器端市场占有率远高于微软，所以服务器端就是比微软稳定，很正常的事。\n在桌面端，市场占用率远低于微软，不稳定也是自然的。\n为什么Linux下命令行程序往往又好用又稳定？是因为用户喜欢装逼吗？不是，因为命令行程序是服务器端跟桌面端通用的，而服务器端程序经过了足够多用户的使用，经过了足够的反馈开发迭代，所以稳定。而图形界面只有桌面用户用，桌面占有率那么低，这些程序往往缺乏足够的测试人力也缺乏足够的开发维护人力，所以并不会非常稳定。\n那么，你要想体验Linux稳定，怎么办？答案就是只使用市场占有率高，用户量大，因而获得了充分测试的软件，这就稳定了。比方说只使用服务器端。或者桌面端只使用最常用的那些，例如终端仿真器，浏览器，输入法，gcc编译器之类，肯定是稳定的。\n你看我就用浏览器，输入法，xterm，screen，编程ide，vim，以及一堆命令行的东西，稳定得很啊，六个月才重启一次电脑，重启的那一次还是因为ubuntu升级。\nHow To Download A Large File Faster From Google Drive? Step 1: Fetching Your File ID\n Open your browser and go to your google drive, open login with the account that has the file you wish to download. Locate the file that you wish to download and select it. Right click the file and click on “get shareable link” You don’t need to copy the entire link here; you only need the file ID that we will be using later.  The link will look like this: https://drive.google.com/file/d/XXXXX/view?usp=sharing\nIn this link, you only need to pay attention to the alphanumeric file ID, displayed by XXXXX here.\nStep 2: Getting an OAuth Code\n Visit OAuth 2.0 Playground by clicking here. On the developer’s webpage, in the “Select \u0026 authorize APIs” click on the “Drive API v3” option, and select the: https://www.googleapis.com/auth/drive.readonly option from the available options. Once selected click Authorize APIs button on the bottom right corner of the tab. After you click on the Authorize APIs button you will be transferred to the google account login screen. Select the same google account in which you have your file stored. Allow Google OAuth 2.0 to access your drive if asked. When you get redirected back to the OAuth 2.0 playground screen click on the “Exchange Authorization Code for Tokens” button as shown. Copy the newly generated Access Token and save it on your notepad. You will be needing this in the next step.  Step 3: Downloading The File Using A Command Line Script\n$ curl -H \"Authorization: Bearer YYYYY\" https://www.googleapis.com/drive/v3/files/XXXXX?alt=media -o ZZZZZ In your command, replace “XXXXX” with the file ID from above, “YYYYY” with the access token from above, and “ZZZZZ” with the file name that will be saved (for example, “myFile.mp4” if you’re downloading an mp4 file).\nPress Enter and let the download begin.\nUSB插槽鬆動怎麼辦  手机  充电宝  笔记本  笔记本  如何将Google搜索限制为特定语言的结果 只是想在Google搜索中添加有关语言参数的更全面的答案。\n有4种与语言相关的选项。\nWeb界面语言： hl=\n例： www.google.com/search?q=vilnius\u0026hl=lt\nWeb Interface Language Codes hl=zh-CN Chinese (Simplified) hl=zh-TW Chinese (Traditional) hl=en English hl=ja Japanese 指定语言的页面： lr=lang_\n例： www.google.com/search?q=vilnius\u0026lr=lang_lt\nSearch Language Codes lr=lang_zh-CN Chinese (Simplified) lr=lang_zh-TW Chinese (Traditional) lr=lang_en English lr=lang_ja Japanese 来自指定国家/地区的页面： cr=country\n示例：www.google.com/search?q=vilnius\u0026cr=countryLT 请注意，两个国家/地区代码字符必须大写！否则，Google会忽略该参数（自2017年1月3日起）（即使小写字母对于hl=和都适用lr=lang_）。\n还有另一个参数– gl=用于搜索结果，因为它们将显示在指定的国家/地区。我尝试对其进行测试，但对我而言，不同参数值的结果没有不同。浏览器或我的Google帐户的某些其他参数/设置可能已过时或覆盖了该设置。\nHWE The Ubuntu LTS enablement (also called HWE or Hardware Enablement) stacks provide newer kernel and X support for existing Ubuntu LTS releases.\nThe 20.04 LTS HWE Stacks continue to follow Rolling Update Model, as has been in use since 16.04 LTS.\nHow does Ubuntu make money? Firstly a lot of people work on Ubuntu in their free time (many of them programming, but also those of here for instance answering people’s questions). Also some people donate to Ubuntu.\nHowever there is more to the story. Canonical Ltd. is a private company that created and continues to pay for Ubuntu. We know Canonical hadn’t been making a profit, but Canonical was initially founded by multi-millionaire Mark Shuttleworth which meant it didn’t have to focus on making money right away.\nHowever Canonical is now looking towards to making Ubuntu profitable. (After all, they have 600+ employees to pay every month!) There are some indications this has been successful. Their key revenue streams offer services around Ubuntu:\n Support services (mostly to business) alongside which they sell Landscape Contracting services to businesses (for instance working with OEMs such as Dell, or helping Google with Chrome OS). As Ubuntu makes its way onto mobile phones and TVs then this will grow. Ubuntu Software Centre’s paid section (Canonical takes a cut of purchases) The Canonical Store (selling physical Ubuntu branded items) - discontinued Closed-source projects wishing to use Launchpad.net can purchase a license Ubuntu One (online file storage and synchronization service) and Music Store (selling music from within Ubuntu) - discontinued. Amazon referrals. When you search the Ubuntu Dash, you may see Amazon products (unless you have turned it off). Ubuntu takes a cut of these.[ref]  All of these are areas that Canonical hopes will grow.\n认证硬件  Ubuntu certified hardware Red Hat certified hardware  如果不怎么玩游戏的话，建议是直接考虑那些不带独立显卡的笔记本电脑。因为在Linux下双显卡装驱动问题很多。\n说到牌子的话，建议是考虑戴尔笔记本。因为戴尔台式机和笔记本，都是尽可能地去兼容Ubuntu来设计的。这个不是说假话做广告。我也就这个问题，看过了几乎所有戴尔系列产品的技术文档了。基本上都是在支持的操作系统列表中，无一例外地包含了Ubuntu。如果是想买能完美使用Ubuntu的本子，戴尔是首选。戴尔绝大部分笔记本机型都能很好完美兼容Ubuntu。\n还有一个重要原因就是，ubuntu的所属公司，与戴尔公司是有合作的。也正因为如此，Ubuntu默认就包含了dell的大部分硬件通用驱动，甚至硬件底层管理模块都囊括其中。\nPNG, JPG, or JPEG Ideally, both JPG and JPEG are the same formats and there is no difference between these image extensions. JPEG was shortened to JPG to make it compatible with Windows.\n    PNG JPEG/JPG     What is it? It stands for Portable Network Graphics and is a raster-based graphics format. It stands Joint Photographic Experts Group and is popular format for images.   Compression Algorithm Lossless compression Lossy compression   Transparency Image transparency is maintained image transparency is not maintained   Image Size Bigger Smaller   Image Quality Better Inferior   Available colors 16 million 16 million   Common Extensions PNG JPEG or JPG   Best for Editing, scaling, and web content Storage, editing, image processing, and posting    12 Colors That Go With Black ![](/Distributions/black with green.png)\n在线用的 Linux  JS/UIX - Terminal: 进入后，点击open terminal即可。它提供非常简单的终端环境，而且没有自带gcc等编译套件，不过练习基本命令和shell脚本还是可以的。整体使用起来也比较流畅。 copy.sh：它可以全屏体验，让你感觉就是在一台真的Linux上玩耍，同时还支持多种发行版，想体验不同系统的可以试试。 实验楼：选择 Linux 课程，点击进入课程并打开默认在线环境，就可以开始使用一个完整的在线 Linux 环境（Ubuntu），几乎和本地安装的 Linux 系统没差！ Unix Terminal Online：这个网站也支持代码的编译运行，而且速度还可以。 jsLinux：它提供多种系统选择，你也可以在上面编译运行代码。不过整体感觉不是很流畅。 Bash Shell：专门用来练习 Shell 编程的好地方。 paiza：同上，可以用来学习shell脚本。 ShellCheck：如同它的名字，这是一个用来检查你的脚本是否存在问题的工具。  全局菜单 🗓️ 2022/04/05\nayatana 是 Canonical 发起的一个 Linux 端桌面统一体验的项目，规定了桌面托盘、通知消息、全局菜单等功能的实现，Unity 桌面也是这个项目的一部分，在2017年的时候 Canonical 宣布转向使用 Gnome，而 Unity 桌面环境将停止开发。虽然 Unity桌面环境停止开发，但是部分使用 DBus 通讯的接口却保留了下来。\nGnome 是大多数发行版官方默认的桌面的环境，但是原版不安装插件用起来的却是各种难受，包括缺少任务栏/系统托盘，非常占用空间的标题栏。早期使用插件Gnome-Global-AppMenu实现全局菜单，这个仅限于Gtk2/Gtk3，到了Gtk4不支持加载外置模块，导致Gtk4开发的软件的作者除非手动兼容，不然没有全局菜单。所以Gnome-Global-AppMenu 的开发者宣布停止开发这个插件。另外一个是Fildem，目前还在积极的维护。xfce/mate/budgie 桌面环境使用vala-panel-appmenu，效果未知。KDE 从 5.9 版本开始，官方提供了支持，到了现在非常的稳定，属于开箱即用。\nUnity 之所以有全局菜单是因为 Canonical 这公司针对常见的软件包做了修改，将本来在软件内展示的菜单，展示在状态栏上面，这种操作只是一种代码外挂，并不是软件本身主动调用很接口生成菜单，有时候还会出现软件本身菜单和全局菜单同时展示的情况。常见的 UI库 GTK2/GTK3/QT都通过这种方式获得了支持，部分软件比如Firefox则采用官方定制版本才能支持全局菜单，总之实现方面并不是很完美。\n全局菜单实现需要两个部分组成，一个是桌面环境(具体点是状态条)提供一个窗口菜单注册接口，并且检测运行软件运行情况，绘制菜单项目等功能。软件端则是侦测桌面环境是否支持全局菜单，侦测到支持全局菜单，就需要注册一个会话，并且将全局菜单发送到接口。后续内容将全局菜单展示的组件称为服务端，运行的软件作为客户端，服务端到客户端的通讯方式用的是 dbus。\nAndroid 相关 Transfer files between Linux and Android  Connect Using USB Cable Apps  KDE Connect/GSConnect Android File Transfer AirDroid   Bluetooth  Two Options to Recover Your PC With Android If your PC is out of action, you can install a new operating system or run a recovery environment thanks to Android. Two solid options are available:\n ISO 2 USB: Lets you burn an ISO file directly to a USB flash drive over USB-OTG. DriveDroid: Enables you to store bootable ISO files on Android. With the paid version, support for Windows 10 installation images is added.  AVIF  Android 12 將支援「AVIF」影像格式！它能取代 JPEG 成為新一代主流標準嗎？ AVIF图片格式简介  系统相关 Irqbalance BTW: I’m pretty sure there are many cases where irqbalance could be very useful for server’s tasks but not for Desktop usage and, especially, for laptop desktop users.\nLinux is very servers oriented and any linux distros want to distribute several versions of kernels. So we all have to running a huge amount useless things for servers hardware, software, protocols and ms azure stacks etc and including irqbalance.\nIf you don’t see 100% loading on CPU0 during your work-flow, you don’t need to use irqbalance at all. Also the modern kernel is managing it itself depending on cpu0 loading.\nSeems that linux  4.9 is able to do irqbalance without an external daemon\nEven debian, ubuntu now disable it by default\nhttps://bugs.launchpad.net/ubuntu/+source/ubuntu-meta/+bug/1833322\nBlock internet access to certain programs The solution for me happened to be straight forward.\n  Create, validate new group; add required users to this group:\n  Create: groupadd no-internet\n  Validate: grep no-internet /etc/group\n  Add user: useradd -g no-internet username\nNote: If you’re modifying already existing user you should run: usermod -a -G no-internet userName check with : sudo groups userName\n    Create a script in your path and make it executable:\n  Create: nano /home/username/.local/bin/no-internet\n  Executable: chmod 755 /home/username/.local/bin/no-internet\n  Content:\n#!/bin/bash sg no-internet \"$@\"     Add iptables rule for dropping network activity for group no-internet:\n  iptables -I OUTPUT 1 -m owner --gid-owner no-internet -j DROP\nNote: Don’t forget to make the changes permanent, so it would be applied automatically after reboot. Doing it, depends on your Linux distribution.\n    Check it, for example on Firefox by running: no-internet \"firefox\"\n  In case you would want to make an exception and allow a program to access local network:\n iptables -A OUTPUT -m owner --gid-owner no-internet -d 192.168.1.0/24 -j ACCEPT iptables -A OUTPUT -m owner --gid-owner no-internet -d 127.0.0.0/8 -j ACCEPT iptables -A OUTPUT -m owner --gid-owner no-internet -j DROP  NOTE: In case of spawning the rules will be maintained. For example, if you run a program with no-internet rule and that program will open browser window, still the rules will be applied.\n通过Linux系统进入 BIOS $ sudo systemctl reboot --firmware-setup 5 Ways to Check CPU Info in Linux  lscpu /proc/cpuinfo lshw hwinfo dmidecodes hardinfo: gui  Logging in as Root in Ubuntu with Live CD $ sudo passwd root Keychain Squeezing the last drop of convenience out of ssh-agent: Keychain will allow to reuse an ssh-agent between logins, and optionally prompt for passphrases each time the user logs in.\n$ sudo apt install keychain $ vi ~/.bashrc . ~/.keychain/${HOSTNAME}-sh $ keychain ~/.ssh/id_rsa Regenerate initramfs To create/recreate/update the initramfs file means to update the initrd.img-* ramdisk files in /boot.\nNote: I prefer to create a totally fresh version by using the -c option, instead of just updating the existing file by using the -u option.\nThe proper command would be:\n$ sudo update-initramfs -c -k $(uname -r) This will create a fresh initrd.img-* file for your currently booted version of Ubuntu.\nHowever, if you can’t boot to the current version of Ubuntu, you may have to modify this command, and by booting to an older version of Ubuntu, you can do it this way:\nsudo update-initramfs -c -k 5.11.0-22-generic where the 5.11.0-22-generic part should be replaced with the version of the desired boot kernel.\nTo get more detailed information, type:\n$ man update-initramfs Reset lost root password 警告： 攻击者都可以使用上述方法修改系统，要保证系统安全，请限制物理上的访问，或者使用全磁盘加密。\n使用 LiveCD 通过 LiveCD 可以使用好几种方法：chroot并且使用passwd命令或者擦除密码域条目。任何Linux的LiveCD都可以使用，chroot时它必须匹配已经安装的架构类型。这里仅介绍 chroot 方式，因为这个方法更不容易出错。\n  启动LiveCD，挂载根文件系统.\n  然后通过下列命令重置密码：\n$ passwd --root MOUNT_POINT USER_NAME   卸载根文件系统。\n  重启，记下你的密码。\n  用 Bash 作为 Init   将 init=/bin/bash 内核参数加入启动加载器的启动项.\n  启动后可以看到 Bash 提示符。\n  根文件系统应该是只读挂载，需要以可读写模式重新挂载：\nmount -n -o remount,rw /   用 passwd 创建新的管理员密码。\n  通过 reboot -f 重启，不要再次忘记你的密码。\n  注意： 使用此法时有的键盘不能被初始系统正确加载，你可能不能在bash提示符后输入任何东西。如果出现这种情况，你不得不使用其他方法。\nMicrocode 每当听到有人说“这个问题更新一下微码就好了”，就觉得这个哥哥怎么这么迷人，好像在哪里见过。为了也让自己变成这种迷人的哥哥，我也研究了一下到底什么是微码。\n这里说的是跑在CPU处理器上的微码，不是IBM那群人嘴里说的那个微码。如果你之前没和IBM打过交道那就当这段话不存在。\n计算机体系结构是一层又一层的抽象，典型的比如操作系统对底层硬件的抽象。但鲜有人知的是，操作系统和底层硬件，尤其是CPU之间还存在着几层抽象。什么叫抽象，当然有很多种学术流的解释，但我土气一点的解释就是“不关心”，就是“Don’t care”，就是爱咋地咋地。\n用这个模式套用一下我们熟悉的抽象：操作系统要将数据写入磁盘，它不关心怎么操作磁盘；应用要给某个服务器发个数据包，它也不关心怎么操作网卡。\n回到我们的微码上来。我们现在常见的操作系统都是用C语言编写，它相对于汇编语言来说，也算是一种“高级语言”。编译器会将这种高级语言编译成汇编语言。只要C语言编写时“不关心”汇编指令是啥，那么就是相对汇编语言做了一次抽象。\n马上就到微码了。我们知道汇编指令是执行在CPU上的，那么汇编指令会关心在某个具体型号的CPU上是怎么执行的吗？肯定不会的。汇编的一条ADD指令在80286上可以执行，在最新的Icelake上也能执行，但这两个CPU内部早已发生了天翻地覆的变化，执行ADD的操作已经完全不同了。\n换句话说，就是汇编指令并“不关心”是如何在CPU上执行的。\n操作系统不关心如何操作磁盘和网卡，是因为这些都有对应的设备驱动操心。汇编指令不关心具体如何在CPU中执行，这个就是由微码来操心了。所以用类比的方式，可以把微码类比成汇编指令针对某一型号CPU的驱动。\n同样的汇编指令，会由该型号CPU的微码转成可以跑在该CPU上的微操作（Micro-ops/uops）。这些微操作指导CPU的电路完成汇编指令要求的意图。\n在大家还在编写汇编语言代码的时代，微码为汇编语言的编写提供了方便：\n 只关心汇编逻辑，而不用关心CPU内部电路设计和具体的执行方式 方便设计出新的汇编指令，由微码翻译成具体的执行逻辑，比如循环中“变量自减若大于零则转跳”，可以用一条汇编指令代替，脏活累活都交给微码去干 修复或绕过一些很难修复的处理器数字电路中的Bug  上述第二点也为CISC指令集的实现提供了技术基础。因为不可能所有复杂的指令都是由专门的执行复杂指令的硬件来完成的，也是由简单的数字逻辑模块组合而成的。\n在现代CPU里，是存在专门的将汇编指令翻译成微操作的硬件解码器的。但微码依旧存在（就是CPU微架构图中前端那个Microcode sequencer），它作为一个Lookup Table保存在一块ROM中，用来解码复杂的指令，比如浮点运算的指令等。一般是硬件解码器解码得比较快，而用微码解码会比较慢。\n理论上，如果你能更改某一个处理器的微码，那么经它翻译的指令可以变成任意其他的指令。因为它关心指令如何在CPU电路中执行。所以现在升级微码主要是用来解决处理器的稳定和安全性的问题。\n当然你也可以用它模拟自己没有的汇编指令，比如AVX系列，我只要在看到AVX512的汇编之后，把它翻译成两个“SIMD256”或者四个“SIMD128”指令就好了。\n看到这里，你给自己就又加了一层微码的buff。最后贴心地推荐一篇详细说明Microcode怎么执行的文章：Microprocessor Microcode Simple Example\n安装/更新微码 微码就是由 Intel/AMD 提供的 CPU 固件。Linux 的内核可以在引导时更新 CPU 固件，而无需 BIOS 更新。处理器的微码保存在内存中，在每次启动系统时，内核可以更新这个微码。这些来自 Intel/AMD 的微码的更新可以去修复 bug 或者使用补丁来防范 bug。\n查看当前的微码状态：\n$ sudo dmesg | grep microcode 使用包管理器\n$ sudo apt install intel-microcode 必须重启以激活微码更新：\n$ sudo reboot 手动\n只有在你的 CPU 制造商建议这么做的时候，才可以使用下列的方法去更新/安装微码，除此之外，都应该使用上面的方法去更新。大多数 Linux 发行版都可以通过包管理器来维护、更新微码。使用包管理器的方法是经过测试的，对大多数用户来说是最安全的方式。\nRepair grub When you install Windows, Windows assumes it is the only operating system (OS) on the machine, or at least it does not account for Linux. So it replaces GRUB with its own boot loader. What you have to do is replace the Windows boot loader with GRUB. I’ve seen various instructions for replacing GRUB by mucking around with GRUB commands or some such, but to me the easiest way is to simply chroot into your install and run update-grub. chroot is great because it allows you to work on your actual install, instead of trying to redirect things here and there. It is really clean.\nDNS缓存 使用以下命令来检查其状态。\n$ sudo systemctl status systemd-resolved 运行以下命令来检查DNS缓存统计信息。\n$ sudo systemd-resolve --statistics 运行以下命令来清除Ubuntu上的DNS缓存。\n$ sudo systemd-resolve --flush-caches DNS刷新命令不会清除缓存命中和未命中统计信息。 如果要清除所有缓存统计信息，则必须重新启动systemd解析的服务。\n$ sudo systemctl restart systemd-resolved Change username Unix-like operating systems decouple the user name from the user identity, so you may safely change the name without affecting the ID. All permissions, files, etc are tied to your identity (uid), not your username.\nTo manage every aspect of the user database, you use the usermod tool.\nTo change username (it is probably best to do this without being logged in):\nsudo usermod -l newUsername oldUsername This however, doesn’t rename the home folder.\nTo change home-folder, use\nsudo usermod -d /home/newHomeDir -m newUsername after you changed the username.\nFor instance, you could logout, drop to a console (Ctrl+Alt+F1), and sudo su - to become true root (as opposed to sudo -s, where $HOME is still /home/yourname.) Maybe you also have to kill some still running processes from this user first. To do so, enter ps -u username, look for the matching PID and kill them by kill PID-number.\nUpdate: as arrange mentioned, some files may reference your old home directory. You can either keep a symlink for backward compatibility, e g ln -s /home/newname /home/oldname or you can change the file contents with sed -i.bak 's/*oldname*/*newname*/g' *list of files* It creates a backup for each file with a .bak extension.\nSome additional information for not so experienced users like me: As I only have ONE user account (administrator), it would not let me change the username (“you are already logged in” was the response in TTY1 (Ctrl+Alt+F1). To get around this:\n  Login with your old credentials and add a new user, e.g. “temporary” in TTY1:\nsudo adduser temporary set the password.\n  Allow the temporary user to run sudo by adding the user to sudo group:\nsudo adduser temporary sudo   Log out with the command exit.\n  Return to tty1: Login with the ‘temporary’ user account and password. Change your username and folder as mentioned above. exit (until you get the login prompt)\n  Go back to TTY7 (Ctrl+Alt+F7) to login on the GUI/normal desktop screen and see if this works.\n  Delete temporary user and folder:\nsudo deluser temporary sudo rm -r /home/temporary   Test Network Speed $ sudo apt install speedtest-cli $ speedtest 蓝牙与WiFi信号干扰 蓝牙和WIFI干扰？把蓝牙掐死就行了\n蓝牙和Wi-Fi信号干扰问题可能你也遇到过，两者主要都是使用2.4GHz频段，导致同时开启时，蓝牙的数据吞吐量会急剧下降，配对设备困难，Wi-Fi间歇性中断，网络受到限制。目前基本没什么办法可以根治这个问题，但你可以下面的方案临时帮你解决一些问题。本文提供了4种方法，可以参考下。\n方法1：连接至5GHz无线网络\n既然知道了问题出在频段冲突上，那么可以考虑购买一个双频（2.4GHz + 5GHz）路由器，并连接至5GHz的Wi-Fi网络。该方法可以彻底解决干扰问题，但银子也是必不可少的。\n方法2：更换Wi-Fi信道\n以TP-Link路由器为例，登录路由器Web管理页，在无线设置-基本设置中找到信道选项，将其改为1、6、11中的任何一个。这些为2.4GHz的不重叠传输信道，相较于其他信道更稳定一些。\n方法3：开启网卡蓝牙共存功能\n在近几年生产的无线网卡中，都支持蓝牙共存功能，方法是在网络适配器属性的高级选项卡中，找到Bluetooth Collaboration或Bluetooth Coexistence Mode（名称可能有所不同），将其设为启用（Enable）。Windows会自动重新连接Wi-Fi，干扰蓝牙的情况也会有所缓解。\n对于 Linux\n$ lspci -knn | grep Net -A3; lsusb ... Kernel driver in use: ath9k Kernel modules: ath9k ... $ sudo tee /etc/modprobe.d/ath9k.conf  \"options ath9k btcoex_enable=1\" 方法4：远离干扰源\n将蓝牙终端与路由器、微波炉、无绳电话机等使用2.4GHz频段的设备隔开使用。\n然而蓝牙与WIFI干扰确实是头疼的问题：蓝牙鼠标会受到WIFI干扰经常反应迟缓，而蓝牙音箱则会导致WIFI断网，经常上传失败的绝望。。。。\n总之，无线信道的改进还在进行着。。。\nRAM \u0026 VRAM VRAM as RAM  MTD vramfs  RAM as VRAM Basically the answer is the operating system threats the whole memory pool for the graphics card, and ram as a virtual memory.\nVirtual memory is paged two ways through a partition like swap, or a image file like in windows.\nThe virtual memory then maps the references to memory when you call int* or \u0026memory. To a physical address on your ram or vram depending on where it’s meant to go.\nThe game cannot force the kernel or operating system to allocate virtual memory to a certain place.\nThe kernel will dynamically decide where everything goes, and will write to your hard drive if you overflow the current physical limit.\nThere are tons of articles on virtual memory on windows, bsd and linux. Mac is technically a bsd fork and does use the same methods, and so does the ps4 os.\ntl;dr Basically what you are saying doesn’t make sense in terms of virtual memory and this is done automatically( Games automatically use RAM as VRAM when you run out of VRAM. That’s why, when you go over your VRAM limit, your FPS drops like a rock ).\nAlso some people in this thread are confusing video memory and virtual memory.\n功耗控制 针对散热不好的设备或者续航能力不佳的笔记本，功耗控制显得非常必要\n使用 TLP 延长电池寿命及续航  如有需要可参阅 TLP 官方文档 和 archwiki TLP。\n 多年来，Linux 在电池优化方面取得了很大进步，但仍然有一些可选步骤改善笔记本电脑的电池寿命并且延长续航。\nTLP 作为一款自由开源的高级电源管理工具提供开箱即用的默认配置。同时也可以高度定制化，以满足特定需求。\n电压下探  以下方法仅适用于 Intel 四代酷睿 ™ Haswell 及更新 CPU。有关 AMD CPU 和 Intel 四代酷睿 ™ Haswell 之前的 CPU 请参考 archWiki Undervolting CPU。\n 对处理器的电压进行最大限度的下探，在挖掘 CPU 体质的极限的同时，起到既能降低发热，又能最大限度保持性能的效果。\n如果正常操作，降低电压一般不会损害 CPU，一般建议从 50 毫伏进行尝试，每次降压尝试多增加 10 毫伏。只要确保在降低电压前，系统中任务均被正确保存即可。\n降低功率墙 除了电压的下探，同时也可以尝试对处理器的功率墙（TDP）做出降低的限制。比如考虑这种情况 —— 在 CPU 满睿频时，其实不需要默认的那么多功耗来维持，也许在默认功耗的基础上减几瓦，也能维持满睿频，这样就又可以进一步降低温度。对功率墙进行限制不同于对电压进行下探，若限制功率墙的参数较低，这会不可避免的损失较多的性能，但是在散热过差的设备上这也是一个好办法。\n对于功率墙的调整，有些主板在 BIOS 中提供了设置项可以直接调整。对于没有设置项的主板，有的主板是锁定了瞬时和长时功率墙，这种情况就无法调整功率墙了。有的主板 BIOS 随没有提供功率墙调整项，但依旧可以通过命令行设置。\n通过以下的命令可以查看主板是否可以调整功率墙：\ngrep . /sys/class/powercap/intel-rapl/intel-rapl:0/* 2 /dev/null 如果在输出中看到了如下的 enabled 值为 1，即可以调整。第一行的数字代表现有的功率墙限制：\n/sys/class/powercap/intel-rapl/intel-rapl:0/constraint_0_power_limit_uw:100000000 /sys/class/powercap/intel-rapl/intel-rapl:0/enabled:1 具体的调整步骤参考 Set Max TDP of Intel H-series CPU。\nCheck if port is in use $ sudo lsof -i -P -n | grep LISTEN $ sudo netstat -tulpn | grep LISTEN $ sudo ss -tulpn | grep LISTEN $ sudo lsof -i:22 ## see a specific port such as 22 ## $ sudo nmap -sTU -O IP-address-Here 在已有系统安装 Windows 如果是单块硬盘，而且你是 uefi 引导模式，那么先分好 Windows 分区：\n 用 Ubuntu 安装 u 盘启动电脑，选择中文语言，点击“试用” 会启动到桌面， 再点击桌面左下角开始菜单，找到工具、磁盘工具， 在磁盘工具选中你的硬盘，右键 Ubuntu 分区，调整大小 缩小分区 以便挪出 Windows 分区（尽量有 100G+）， 缩小后，在空出的空白部分右键，新建分区，新建 NTFS 分区。 弄好以后，重启电脑，用 win10 安装 u 盘或 ventoy U 盘准备安装 Windows。 在 Windows 安装程序中选中前面新建的 Windows 分区。  你一定要事先拿bcdboot创建一个ESP到u盘上作为备份，不然将来俩系统你覆写我我覆写你，你就开不了机了，得救援模式里搞\n如果没备份的话，可以这样 修复 引导：用 Ubuntu 安装盘启动电脑，选择中文语言，点击试用，进入桌面后联网，再右键桌面打开终端，执行\n$ sudo apt install boot-repair $ sudo boot-repair DNS TXT 记录 简介\nTXT 记录是为您所在网域之外的来源提供文本信息的一种 DNS 记录，可用于多种用途。该记录的值可以是人工可读文本，也可以是机器可读文本。使用 Google Cloud 服务时，TXT 记录可用于验证域名所有权和执行电子邮件安全措施，例如 SPF、DKIM 和 DMARC。\n要为您的网域添加或修改 TXT 记录，请参阅关于 TXT 记录。\n使用nslookup查询DNS的TXT记录\n 在Windows或Linux平台的命令行中直接输入nslookup即可打开nslookup。 接着输入一个域名，即可查询A记录。输入set type=mx，就会把查询状态调整到mx，接下来输入的域名全部查询mx记录。同样的，输入set type=txt，set type=cname可以查询相应的记录。 这里的server表示DNS服务器，Non-authoritative answer表示非权威应答，即DNS服务器的缓存。  $ nslookup  set type=txt  qq.ustclug.org ... Shutdown $ sudo shutdown -h +120 # 两小时后关机 $ sudo shutdown -h 23:00 # 表示在23点定时关机 Runlevel 制脚本目录/etc/rc.d，该目录下存在各个运行级别的脚本文件，以下是centos7为例的查询结果（ubuntu 下没有 /etc/rc.d 目录，都在 /etc/ 目录下）：\n# ls /etc/rc.d/ init.d rc0.d rc1.d rc2.d rc3.d rc4.d rc5.d rc6.d rc.local # ls /etc/rc.d/rc4.d/ K50netconsole S10network S64mysqld # ls /etc/init.d/ functions mysqld netconsole network README 对于SysVinit系统，它将从以下位置执行：\n运行级别0 - /etc/rc.d/rc0.d/ 运行级别1 - /etc/rc.d/rc1.d/ 运行级别2 - /etc/rc.d/rc2.d/ 运行级别3 - /etc/rc.d/rc3.d/ 运行级别4 - /etc/rc.d/rc4.d/ 运行级别5 - /etc/rc.d/rc5.d/ 运行级别6 - /etc/rc.d/rc6.d/ 对于systemd系统，它将从以下位置执行：\nrunlevel1.target – /etc/systemd/system/rescue.target runlevel2.target – /etc/systemd/system/multi-user.target.wants runlevel3.target – /etc/systemd/system/multi-user.target.wants runlevel4.target – /etc/systemd/system/multi-user.target.wants runlevel5.target – /etc/systemd/system/graphical.target.wants Explanation   /etc/rc.d/init.d\n该文件夹包含所有服务在各个运行等级中的全部启动脚本。一般来说，它们都是标准的shell脚本，遵守最基本的标准。每个脚本最少接受两个参数start和stop，它们分别代表启动和停止服务（如网页服务）。除此之外，init脚本通常还会接受一些额外的选项，如restart（重启服务器）、status（返回服务当前状态）、reload（告知服务从配置文件中重新载入配置）以及force-reload（强制服务重载它的配置）。当用不带参数的方式运行脚本的时候，一般应该返回一个它会接受的参数列表。\n  /etc/rc.d/rc0.d～/etc/rc.d/rc6.d\n这些文件夹分别包含每个运行等级对应的init脚本。在实际使用中，它们一般通过符号链接到/etc/init.d文件夹下的实际文件。不过要注意的是，这些文件夹下的init脚本都有一些特别的名字，命名都以S（start）、K（kill）或D（disable）开头，如K+nn+服务名或S+nn+服务名，其中nn为两位数字。当init进入一个运行等级的时候，它会按照数字顺序运行所有以K开头的脚本并传入stop参数，除非对应的init脚本在前一个运行等级中没有启动。然后init按照数字顺序运行所有以S开头的脚本并传入start参数。任何以D开头的init脚本都会被忽略—这让你可以在指定的运行等级禁止一个脚本，或者你也可以仅仅移除全部符号链接。所以如果你有两个脚本，S01foo和S05bar，init首先会运行S01foo start，当它进入特定的运行等级后再执行S05bar start。\n7个运行级别(runlevel)\n 运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动 运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆 运行级别2：多用户状态(没有NFS) 运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式 运行级别4：系统未使用，保留 运行级别5：X11控制台，登陆后进入图形GUI模式 运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动    /etc/rc.d/rc.local\n并非所有的发行版都使用了rc.local，通常它是一个留给用户修改的shell脚本。一般会在init进程结束的时候运行它，所以你可以在这里放一些想要运行的额外脚本，而不用再创建自己的init脚本。\n  /etc/rc.d/rc.sysinit\n/etc/rc.d/rc.sysinit主要做在各个运行模式中相同的初始化工作，包括设定PATH、设定网络配置（/etc/sysconfig/network）、启动swap分区、设定/proc等等。\n  /etc/rc.d/rc\n当运行级别改变时，负责启动/停止各种服务。\n  Default runlevel 我们可以使用以下五种方法检查Linux系统当前运行级别：\n runlevel命令：runlevel打印系统的上一个和当前运行级别。 who命令：打印有关当前登录用户的信息。它将使用“-r”选项打印运行级别信息。 systemctl命令：它控制systemd系统和服务管理器。 使用/etc/inittab文件：系统的默认运行级别在SysVinit System的/etc/inittab文件中指定。 使用/etc/systemd/system/default.target文件：系统的默认运行级别在systemd System的/etc/systemd/system/default.target文件中指定。  在目錄/etc/rc2.d/中的連結檔S03lightdm是負責啟動圖形界面及視窗管理系統LXDE的, 這表示原本約定成俗的runlevel, 其實只是參考, 重要的是, 在要執行的runlevel中放了什麼就是什麼, 也就是說, 原本rc2.d是多人文字模式, 沒有圖形界面的, 由於連結檔S03lightdm啟動了圖形界面, 系統就當然進入了圖形界面.\n要移除連結檔S03lightdm, 有幾種方式:\n  直接刪除, 沒了這個檔就不會進入圖形界面了:\n$ sudo rm /etc/rc2.d/S03lightdm   用系統工具update-rc.d:\n$ sudo update-rc.d lightdm disable 2   Execute command at startup/shutdown On Ubuntu, scripts for the different runlevels are executed according to their presence in the /etc/rc[0-6].d directories. Runlevel 0 corresponds to shutdown, and 6 to reboot.\nTypically the script itself is stored in /etc/init.d, and then symlinks are placed in the directories corresponding to the runlevels you require.\nSo in your case, write your script, store it in /etc/init.d/, then create a symlink in each of /etc/rc0.d and /etc/rc6.d (if you want both) pointing to your script.\nThe scripts in each runlevel directory will be executed in asciibetical order, so if the order within the runlevel matters to you, choose the name of your symlink accordingly.\nExample:\n  Create a shell executable file with your script in /etc/init.d/ directory:\n$ sudo vi /etc/init.d/myscript $ sudo chmod 0744 /etc/init.d/myscript $ chown root:sys /etc/init.d/myscript   The script should have the following format:\n#!/bin/bash # chkconfig: 2345 20 80 # description: Description comes here.... # Source function library. . /etc/init.d/functions start() { # code to start app comes here  # example: daemon program_name \u0026 } stop() { # code to stop app comes here  # example: killproc program_name } case \"$1\" in start) start ;; stop) stop ;; restart) stop start ;; status) # code to check status of app comes here  # example: status program_name ;; *) echo \"Usage: $0{start|stop|status|restart}\" esac exit 0 即必须包含 case 语句，该语句须有 start（对应 S） 与 stop （对应 K）两个选项。\n  Since this has to be executed during shutdown or reboot need to create softlinks in /etc/rc0.d/ and /etc/rc6.d\n$ sudo ln -s /etc/init.d/myscript /etc/rc0.d/K99myscript $ sudo ln -s /etc/init.d/myscript /etc/rc6.d/K99myscript If you are on a Red Hat based system（即 RedHat 下有专门工具用来执行上面建立软链接操作）\n  Enable the script\n$ chkconfig --add myscript $ chkconfig --level 2345 myscript on   Check the script is indeed enabled - you should see “on” for the levels you selected.\n$ chkconfig --list | grep myscript   在 ubuntu 上我尝试运行 sudo update-rc.d myscript enable 5，结果报错 systemd failing enable with “service is transient or generated”.。解释为：\nThe manual for [systemctl](https://www.freedesktop.org/software/systemd/man/systemctl.html#is-enabled UNIT…) tells us the following about the generated status:\n The unit file was generated dynamically via a generator tool. See systemd.generator(7). Generated unit files may not be enabled, they are enabled implicitly by their generator.\n So your error message means that one of the methods through which systemd can automatically generate unit files for you is in use, preventing you from using the one you wrote yourself.\n在我建立软链接后，比如 S01myscript，执行 sudo update-rc.d myscript disable 5 会变为 K01myscript，再执行 sudo update-rc.d myscript enable 5 会变为 S01myscript 并报上面错误。\n  Notes:\n The script in rc6.d must be with no .sh extension The name of your script must begin with K99 to run at the right time. The scripts in this directory are executed in alphabetical order.    Report a problem in Ubuntu If you notice a problem in Ubuntu, you can file a bug report.\n  Type Alt+F2 and type ubuntu-bug nameofprogram\nIf you have a hardware issue or don’t know the name of the program affected, just type ubuntu-bug\n If using ubuntu-bug does not work for some reason, file a bug manually and jump to step 4 in this instruction.\n   After running one of the above commands, Ubuntu will gather information about the bug. This may take a few minutes. Review the collected information if you wish. Click Send to continue.\n  A new web browser tab will open to continue processing the bug data. Ubuntu uses the website Launchpad to manage its bug reports. If you do not have a Launchpad account, you will need to register for one to file a bug and receive email updates about its status. You can do this by clicking Create a new account.\n  After logging in to Launchpad, enter a description of the problem in the summary field.\n  After clicking Next Launchpad will search for similar bugs in case the bug you are reporting has already been reported. If the bug has already been reported, you can mark that bug as also affecting you. You can also subscribe to the bug report to receive updates about progress with fixing it. If the bug has not already been reported, click No, I need to report a new bug.\n  Fill in the description field with as much information as you can. It’s important that you specify three things:\n What you expected to happen What actually happened If possible, a minimal series of steps necessary to make it happen, where step 1 is “start the program”    Your report will be given an ID number, and its status will be updated as it is being dealt with. Thanks for helping make Ubuntu better!\n  If you get the “This is not a genuine Ubuntu package” error, it means that the software you are trying to report a bug about is not from the official Ubuntu repositories. In this case, you cannot use Ubuntu’s built-in bug reporting tool.\nFor more information about reporting bugs in Ubuntu, please read the extensive online documentation.\nOptimizing for Gaming This guide is only for Arch and Ubuntu. Any derivatives like Manjaro, Mint, PopOS, etc should also work.\nEnable Multilib Multilib is required by Steam, So if you are running Steam you can skip this step, If you can not find Steam in your repositories this is your issue.\nAdd the architecture.\n$ sudo dpkg --add-architecture i386 Update the package manager\n$ sudo apt-get update Upgrade to newer packages\n$ sudo apt-get dist-upgrade GPU Drivers Having the right GPU drivers is imporant, else games won’t run properly.\nManually check which driver you need: https://www.nvidia.com/Download/index.aspx?lang=en-us\nFor Nvidia you need to add a repository\n$ sudo add-apt-repository ppa:graphics-drivers/ppa \u0026\u0026 sudo apt-get upgrade For Nvidia 440 you need these packages so install them.\n$ sudo apt install nvidia-graphics-drivers-440 nvidia-settings vulkan vulkan-utils Now reboot\n$ sudo reboot If you use Gnome or GDM you might need to disable Wayland, This is not always the case, But I include it here just in case, If your System won’t reboot you can try this\n$ sudo nano /etc/gdm/custom.conf Remove the # in front of the #WaylandEnable=false line and it should force Xorg.\nLinux kernel Installing the newest kernel is generally the easiest kernel switch, There are other kernels available, I will include them later.\nThe easiest way is to use ukuu, First we need to install it.\n$ sudo add-apt-repository ppa:cappelikan/ppa $ sudo apt update $ sudo apt install mainline Now ukuu is installed, in this program you can select the newest stable kernel click install and when you reboot the new kernel is used. Do not remove your old kernel. If anything goes wrong you can select which kernel to boot in the grub screen at startup and remove the kernel that gives you trouble.\nFeral Gamemode gamemode 基本上是一组守护进程/库，它可以按需优化 Linux 系统的游戏性能。它实际上只是让 CPU 在用户玩游戏时自动运行在高性能模式下并帮助 Linux 用户从游戏中获得最佳性能。\n$ sudo apt install gamemode Manual\nInstall the dependencies\n$ sudo apt install meson libsystemd-dev pkg-config ninja-build git libdbus-1-dev libinih-dev Clone the repository\n$ git clone https://github.com/FeralInteractive/gamemode.git Change the directory into the just downloaded folder\n$ cd gamemode Change the tree to the newest version\n$ git checkout 1.5.1 Run the install script\n$ ./bootstrap.sh Usage\nNow that it is installed we need to enable the service with this command\n$ systemctl --user enable gamemoded \u0026\u0026 systemctl --user start gamemoded To use gamemode for supertuxkart for example, run this terminal\n$ gamemoderun supertuxkart To use it in Steam edit the launch option for the desired game to\n$ gamemoderun %command% If gamemode does not run try to make it executable:\n$ sudo chmod +x /usr/bin/gamemoderun If gamemoderun does not work for you try this as a launch command:\n$ LD_PRELOAD=$LD_PRELOAD:/usr/lib/x86_64-linux-gnu/libgamemodeauto.so.0 %command% Nvidia Improvements Nvidia users might want to enable all options listed here to improve performance in games\n Force Full Composition Pipeline avoids screen tearing by letting the GPU do all the scaling. Triple Buffer avoids stuttering gameplay It allows for a stream of data instead of chunks of data. IndirectGLXProtocol forces the game to directly communicate with the Nvidia drivers. Coolbits enables your card to be overclocked which gamemode will make use of.  Create a Xorg Config file:\n$ sudo nvidia-xconfig Edit the file with the following command\n$ sudo nano /etc/X11/xorg.conf Add in these lines under the “Device” section between the other options\nOption \"TripleBuffer\" \"on\" Option \"Coolbits\" \"28\" Add in these lines under the “Screen” section between the other options.\nOption \"metamodes\" \"nvidia-auto-select +0+0 {ForceCompositionPipeline=On, ForceFullCompositionPipeline=On}\" Option \"AllowIndirectGLXProtocol\" \"off\" Try this one with risk, It will be sure to crash GNOME, I am not sure about other DEs\njust add it to the end of the file\nSection \"Extensions\" Option \"Composite\" \"Disable\" EndSection If you run into any problems, just hit CTRL ALT F3 to switch to a different tty login, run the command to edit the file again and put a # in front of the options that are giving you trouble, Most likely the last one\nAlternatively you can just completely remove the file with the following command\n$ sudo rm /etc/X11/xorg.conf Libstrangle Libstrangle is a tool that helps you control framerates but also vsync settings. This is especially handy for games that do not support these features, You would like to half your framerate to make it run better save some power or just give your hardware a break.\nLibstrangle can be used in multiple ways depending on what you want to achieve.\nTo use libstrangle you can simply type strangle and then the amount of frames you want to run. There are some examples below, But the features you will probably use are Vsync which you use by using the -v option, the rules for OpenGL and Vulkan are different, Here is what each number does for the different apis.\n OpenGL 0 Force off, 1 Force on, n - Sync to refresh rate Vulkan 0 Force off, 1 Mailbox mode, 2 Traditional vsync, 3 Adaptive vsync  You can also limit the game depending on the power state of your device, Set it to 60 while charging and on 30 while discharging for example. You do this by adding a second number right after a colon. in example, strangle 60:30. There are more features but they are not that commonly used, you can check the gitlab link above or simply type strangle -h for more information.\nTo limit the framerate of supertuxkart to 30 simply run\n$ strangle 30 supertuxkart To Force enable vsync on 60 fps for an OpenGL Steam game set the launch option to\n$ strangle -v 1 60 %command% To set the framerate of a vulkan game on Steam to 120 fps but 60 on battery power with adaptive vsync set this as your launch command\n$ strangle -v 3 120:60 %command% Mangohud Mangohud is a monitoring tool for Vulkan and OpenGL applications. It can show CPU and GPU usage, temps, But also framerates, frametimes and a lot more.\n$ sudo add-apt-repository ppa:flexiondotorg/mangohud $ sudo apt update $ sudo apt install mangohud To configure it with a GUI you can check out GOverlay below. For a manual configuration you can edit\n$ ~/.config/MangoHud/MangoHud.conf If you want exactly my configuration you can just copy this into it without the need for GOverlay.\nbackground_alpha=0.3 font_size=20 background_color=020202 text_color=ffffff position=top-right no_display toggle_hud=F11 cpu_stats cpu_temp cpu_color=007AFA gpu_stats gpu_temp gpu_color=00BD00 ram ram_color=B3000A vram vram_color=00801B io_read io_write io_color=B84700 arch engine_color=B200B0 frame_timing=1 frametime_color=00ff00 #output_file=/home/houtworm/mangohud_log_  #fps_limit 120 #media_player #toggle_logging=F10 You can tweak all the little things you want here. You can also create different configurations per game by adding a MangoHud.conf file to the game directory.\nTo use it for any game change its launch option to\n$ mangohud %command% To use it with non Steam games use the following command\n$ mangohud supertuxkart Some games might need the 32 bit version, try this if the normal command fails.\n$ mangohud.x86 %command% VKBasalt VKBasalt is a post processing layer for Vulkan which enables you to enhance graphics further. It only works with Vulkan, This includes all Proton games.\n$ git clone https://github.com/DadSchoorse/vkBasalt.git \u0026\u0026 cd vkBasalt \u0026\u0026 meson --buildtype=release builddir \u0026\u0026 ninja -C builddir install To configure it first you need to create a config file, Run the following command to copy the example to a folder you can edit as the user.\n$ mkdir ~/.config/vkBasalt \u0026\u0026 cp /usr/share/vkBasalt/vkBasalt.conf.example ~/.config/vkBasalt/vkBasalt.conf You can tweak all the little things you want here. You can also create different configurations per game by adding a vkBasalt.conf file to the game directory.\nTo use VKBasalt for any particular game enter this as a launch option.\nENABLE_VKBASALT=1 %command% You can also start non Steam games this way by typing the following command\nENABLE_VKBASALT=1 supertuxkart GOverlay GOverlay is a Graphical User Interface for managing MangoHud and VKBasalt\n$ sudo apt-get install lazarus git $ git clone https://github.com/benjamimgois/goverlay.git $ cd goverlay $ lazbuild -B goverlay.lpi mesa-demos and vulkan-tools are optional, You need them if you want to show the previews. You can find them in your distros repository\nXbox One Controller xpad works great, is the default on modern Linux distros and supports a wide range of controllers, But if you are like me and you only Xbox One controllers then using xpadneo is much better.\nFor Bluetooth to work with xpad and the Xbox One controllers you need to disable ertm (This is not needed for xpadneo)\ncreate the config file\n$ sudo nano /etc/modprobe.d/xbox_bt.conf Add the following line to the document and save and exit with CTRL + X.\noptions bluetooth disable_ertm=1 xpadneo supports Xbox One controllers wired and over bluetooth, It enables Force Feedback even the vibration inside the triggers, It supports battery level indication, It also fixes the mapping in many many games that where previously unplayable with a Xbox One controller on Linux.\nInstall the dependencies\n$ sudo apt-get install dkms linux-headers-`uname -r` Install xpadneo from Github\n$ git clone https://github.com/atar-axis/xpadneo.git \u0026\u0026 cd xpadneo \u0026\u0026 sudo ./install.sh Now you should be able to reboot and it should be all good, Having the controllers vibrate for a second when connected is a good indicator that it works.\nQUESTIONS Ubuntu 无法关机 $ sudo vim /etc/systemd/system.conf DefaultTimeoutStartSec=5s DefaultTimeoutStopSec=5s $ sudo systemctl reload DefaultTimeoutStartSec=, DefaultTimeoutStopSec= 设置启动/停止一个单元所允许的最大时长。若仅设置一个整数而没有单位，那么单位是秒。 也可以在整数后面加上时间单位后缀： “ms”(毫秒), “s”(秒), “min”(分钟), “h”(小时), “d”(天), “w”(周) 。 对于 Type=oneshot 类型的 service 单元， 这些选项没有意义(相当于全部被禁用)。 对于其他类型的 service 单元，可以在单元文件中设置 TimeoutStartSec=, TimeoutStopSec=, RestartSec= 以覆盖此处设置的默认值 (参见systemd.service(5))。 对于其他非 service 类型的单元， DefaultTimeoutStartSec= 是 TimeoutSec= 的默认值。\n注1：尽量不要使用上面更改。应该在完全清楚自己的更改造成的影响、产生的作用的前提下，做出更改。\n注2：作为桌面操作系统，如果有硬件驱动或其他各种莫名问题，可以尝试升级到最新版本来解决。\nACPI ERROR: AE_ALREADY_EXISTS These kinds of “errors” have been discussed ad nauseam, it’s simply the kernel telling you that the ACPI information received from the system seems to be incomplete in some way, update your BIOS/UEFI in hopes for a proper fix or ignore the error if you don’t notice anything off with your system.\n(And please don’t do something dumb like setting acpi=off just to get rid of these messages)\nCan’t run CS:GO at fullscreen  Open Steam Go to the “Library” Right-click the game which needs to be reconfigured Select “Properties” from the menu Click the “Set launch options…” button type: -full and save  How To Disable Lock In Kubuntu open Workspace  Desktop Behavior  Screen Locking  uncheck Lock screen option\nGnome 3 displays two icons for same app No, there’s nothing wrong with your system.\nThe duplicated launcher icons explained:\nThe different icons are different commandline options. Some context applications with call the associated *.desktop icon. The exec option of the icon will depend on how the application is called.\nSome of the Icons you show in your image may be obvious because of the difference in the way they are named. You can see the difference in the way the app is called by right clicking and clicking on properties to see other differences.\nSome of the *.desktop files have a %U argument, used so the application will accept arguments.\nSome of the Launchers are different commands that are called differently and are named differently often by a symbolic link.\nSome exampes from the list in you image are:\nName: Online Accounts Command: unity-control-center credentials Name: Online Accounts Command: Online account credentials and settings Name: Personal File Sharing Command: gnome-file-share-properties Name: Rhythmbox Command: rhythmbox %U Name: Rhythmbox Command rhythmbox-client --select-source %U ssh_exchange_identification: Connection closed by remote host 原因是 Clash 开了 TUN 模式。关闭掉就好了。\nDisk show 129986 TB  (=ↀωↀ=)橘外猫, [2/7/22 11:16 AM] 这个是怎么回事啊\n雪梨, [2/7/22 11:21 AM] 分区表坏了？\n(=ↀωↀ=)橘外猫, [2/7/22 11:21 AM] 直接再分区吗？\n雪梨, [2/7/22 11:21 AM] 请鸽鱼老师看看诶\n雪梨, [2/7/22 11:22 AM] 还能挂载就先备份数据好了\n(=ↀωↀ=)橘外猫, [2/7/22 11:22 AM] 好的\nPegion Fish, [2/7/22 11:25 AM] JMS炸了？ 建议备份数据重建分区表 先重新插一次USB和硬盘\n(=ↀωↀ=)橘外猫, [2/7/22 11:27 AM] 重插了 用fdisk 重建吗？\nPegion Fish, [2/7/22 11:28 AM] 还是不正常？ 硬盘也重新插一下\n(=ↀωↀ=)橘外猫, [2/7/22 11:28 AM] 恩\n雪梨, [2/7/22 11:28 AM] 重建分区表，不是删掉分区再新增分区\n(=ↀωↀ=)橘外猫, [2/7/22 11:30 AM] 断电后自动好了 这是怎么回事啊\nThor Luo Bing-, [2/7/22 11:31 AM] 硬盘清空了\n(=ↀωↀ=)橘外猫, [2/7/22 11:32 AM] 没有，东西还在\nPegion Fish, [2/7/22 11:32 AM] 啊 这不是争产的吗 1T啊 这就是JMS主控抽风\n No Caching mode page found during early boot, I get following error message:\n[sdb] No Caching mode page found [sdb] Assuming drive cache: write through If I understand correctly, this is actually just a harmless info message and not an actual error. sdb is my USB disk, and it does not use caching .\nHard disks have a small amount of RAM cache to speed up write operations. The system can write a chunk of data to the disk cache without actually waiting for it to be written to the disk. This is sometimes called “write-back” mode. If there is no cache on the disk, data is directly written to it in “write-through” mode. The Asking for cache data failed warning usually occurs with devices such as USB flash drives, USB card readers, etc. which present themselves as SCSI devices to the system (sdX), but have no cache. The system asks the device: “Do you have a cache?” and gets no response. So it assumes there is no cache and puts it in “write-through” mode.\nCertificate verification failed 首先更改源文件，将所有的 https 改成 http ：\n$ sudo vi /etc/apt/sources.list deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse 1234 然后安装/更新证书 ca-certificates：\n$ sudo apt-get update $ sudo apt-get install --reinstall ca-certificates 最后将镜像源文件改回 https：\n$ sudo vi /etc/apt/sources.list deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse $ sudo apt-get update Move and overwrite subdirectories (and files) to parent directory You will have to copy them to the destination and then delete the source, using the commands cp -r * .. followed by rm -rf *.\nI don’t think you can “merge” directories using mv.\nSystem program problem detected The error “System program problem detected” comes up when a certain application crashes. Ubuntu has a program called Apport that is responsible for detecting such crashes and upon user consent, report these crashes to developers. This process intends to get the problem fixed by the developers.\nHowever it can be very annoying to common users, and there is no point in showing errors to users when they cannot do anything about it themselves. So you might want to disable them.\nRemove crash report files\nThe apport system creates crash report files in the /var/crash directory. These crash report files cause the error message to appear everytime Ubuntu boots.\n$ cd /var/crash $ ls _opt_google_chrome_chrome.1000.crash _usr_lib_chromium-browser_chromium-browser.1000.crash _usr_sbin_ulatencyd.0.crash _usr_share_apport_apport-gtk.1000.crash Just remove the crash report files\n$ sudo rm /var/crash/* After removing all the crash report files, the error message should stop popping up. However if a new crash takes place then it would appear again in future.\nTurn off apport\nAfter removing the old crash reports, if you still get the same error message, then you can completely turn off apport to get rid. Edit the configuration file at /etc/default/apport.\n$ gksudo gedit /etc/default/apport The file would contain something like this\n# set this to 0 to disable apport, or to 1 to enable it # you can temporarily override this with # sudo service apport start force_start=1 enabled=1 Just set the value of enabled to 0, and this will disable apport.\nenabled=0 Save the file and close it. From the next boot onwards, there should be no error messages ever. If you do not want to restart the system then restart apport from the command line.\n$ sudo restart apport i915 0000:00:02.0: [drm] ERROR CPU pipe A FIFO underrun Hi everyone, thanks for the help, after digging into the specific kernel issue page for i915 Intel drivers, I’ve found the problem and the temporary fix.\nThe problem has to do with issues related to C-States, or Intel’s powersaving states. On kernel’s 5.4 and below, only a max of PC3 is allowed, whereas in kernels 5.4+, deeper states (more powersaving) is used.\nAs james reports in\nhttps://gitlab.freedesktop.org/drm/intel/-/issues/272\n This problem seems to be related to the activity of deep package sleep states (on my hardware PC7 and deeper). I built and booted a 5.4 kernel and the problem went away, but that’s only because it wasn’t allowing package sleep states deeper than PC3. Check in powertop that states deeper than PC6 are actually being used under 5.4 and 5.8.\n and\n I’ve not found a fix, just worked around it with intel_idle.max_cstate=4.\n I have tested this, and adding\nintel_idle.max_cstate=4 to the cmdline of my kernel startup, does indeed fix my issues. While this bug is not yet solved in the kernel, I will mark it as solved here, as there’s nothing Arch Devs can really do about it. Please follow these issues for more information on fixes.\nRelated issue articles: https://gitlab.freedesktop.org/drm/intel/-/issues/2077\nEvince Document Viewer(42.0) does not remember last page in 22.04 Somebody added in launchpad that it could be related to apparmor, and I’ve tried temporarily disabling it with sudo apparmor_parser -R /etc/apparmor.d/usr.bin.evince as suggested by the poster. And both issues were solved.\nor\n$ sudo ln -s /etc/apparmor.d/usr.bin.evince /etc/apparmor.d/disable/ $ sudo systemctl restart apparmor.service $ sudo syst How can I create launchers on my desktop?  Note: gnome-desktop-item-edit was removed from gnome-panel in 19.10 (see gnome-desktop-item-edit: command not found on Ubuntu 19.10 and later even with the ‘gnome-panel’ package installed). So, this answer is unlikely to work for 19.10 and later.\n The old GUI dialog is still available if you still want to use this:\nUsing ALT+F2 type\ngnome-desktop-item-edit --create-new ~/Desktop This will launch the old GUI Dialog and create a launcher on your Desktop.\n解决网易云音乐在 ubuntu 22.04 无法运行的问题 $ cd /tmp $ wget http://security.ubuntu.com/ubuntu/pool/main/g/glib2.0/libglib2.0-0_2.64.6-1~ubuntu20.04.3_amd64.deb $ wget http://mirrors.kernel.org/ubuntu/pool/main/p/pango1.0/libpangocairo-1.0-0_1.44.7-2ubuntu4_amd64.deb $ dpkg -x libglib2.0-0_2.64.6-1~ubuntu20.04.3_amd64.deb fakeroot $ dpkg -x libpangocairo-1.0-0_1.44.7-2ubuntu4_amd64.deb fakeroot $ sudo cp fakeroot/usr/lib/x86_64-linux-gnu/libgio-2.0.so.0 fakeroot/usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0 /opt/netease/netease-cloud-music/libs/ 解决 ubuntu 22.04 无法启动 wps 需要安装旧版 libssl1.1\n$ wget http://security.ubuntu.com/ubuntu/pool/main/o/openssl/libssl1.1_1.1.1f-1ubuntu2.13_amd64.deb $ sudo apt install libssl1.1_1.1.1f-1ubuntu2.13_amd64.deb 然后就能启动 wps 了，\n或者也可以安装 snap 版 wps 2019\n$ sudo snap install wps-2019-snap ibus-rime 重复输入拼音 ibus rime在输入框输入中文，但是不按 enter，鼠标点击输入框其他地方，再点击输入框，之前输入的字符就会重新输入一遍。怎样使rime输入中文时候，点击其他地方后清空之前输入的拼音呢？\n 可以在 ibus 设置里取消“多个窗口间共享输入法状态”。但这只能解决多个窗口重复输入问题，单个窗口重复输入无法解决。  ",
  "wordCount" : "42822",
  "inLanguage": "en",
  "image":"https://sakamotokurome.github.io/Distributions/Ubuntu-logo-2022.svg","datePublished": "2022-03-08T15:32:04+08:00",
  "dateModified": "2022-03-08T15:32:04+08:00",
  "author":{
    "@type": "Person",
    "name": "Sakamoto Kurome"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sakamotokurome.github.io/posts/ubuntup4tips/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sakamoto Kurome",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sakamotokurome.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sakamotokurome.github.io/" accesskey="h" title="Sakamoto Kurome (Alt + H)">Sakamoto Kurome</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sakamotokurome.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Ubuntu Tips
    </h1>
    <div class="post-meta"><span title='2022-03-08 15:32:04 +0800 CST'>March 8, 2022</span>&nbsp;·&nbsp;86 min&nbsp;·&nbsp;Sakamoto Kurome

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://sakamotokurome.github.io/Distributions/Ubuntu-logo-2022.svg" alt="Ubuntu Logo">
        <p>Ubuntu Tips</p>
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#new-ubuntu" aria-label="New Ubuntu">New Ubuntu</a></li>
                <li>
                    <a href="#backup-your-system" aria-label="Backup Your System">Backup Your System</a><ul>
                        
                <li>
                    <a href="#rsync" aria-label="Rsync">Rsync</a></li>
                <li>
                    <a href="#tarhttpshelpubuntucomcommunitybackupyoursystemtar" aria-label="TAR"><a href="https://help.ubuntu.com/community/BackupYourSystem/TAR">TAR</a></a></li>
                <li>
                    <a href="#deja-duphttpswikignomeorgappsdejadupduplicityhttpshelpubuntucomcommunityduplicitybackuphowto" aria-label="deja-dup/Duplicity"><a href="https://wiki.gnome.org/Apps/DejaDup">deja-dup</a>/<a href="https://help.ubuntu.com/community/DuplicityBackupHowto">Duplicity</a></a></li>
                <li>
                    <a href="#others" aria-label="Others">Others</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b8%85%e7%90%86%e7%b3%bb%e7%bb%9f" aria-label="清理系统">清理系统</a><ul>
                        
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e4%b8%8d%e5%86%8d%e9%9c%80%e8%a6%81%e7%9a%84%e5%8c%85" aria-label="删除不再需要的包">删除不再需要的包</a></li>
                <li>
                    <a href="#apt-cache" aria-label="APT cache">APT cache</a></li>
                <li>
                    <a href="#journal-logs" aria-label="Journal logs">Journal logs</a></li>
                <li>
                    <a href="#thumbnails-cache" aria-label="Thumbnails cache">Thumbnails cache</a></li>
                <li>
                    <a href="#duplicate-files" aria-label="Duplicate files">Duplicate files</a></li>
                <li>
                    <a href="#old-linux-kernels" aria-label="Old Linux kernels">Old Linux kernels</a></li>
                <li>
                    <a href="#%e6%b8%85%e7%90%86-snaphttpslinuxcnarticle-14302-1html" aria-label="清理 Snap"><a href="https://linux.cn/article-14302-1.html">清理 Snap</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%8a%80%e5%b7%a7" aria-label="命令行技巧">命令行技巧</a><ul>
                        
                <li>
                    <a href="#bash-%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="Bash 快捷键">Bash 快捷键</a></li>
                <li>
                    <a href="#%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84shellhttpscoolshellcnarticles8619html" aria-label="你可能不知道的SHELL"><a href="https://coolshell.cn/articles/8619.html">你可能不知道的SHELL</a></a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%af%b4-zsh-%e6%98%af-shell-%e4%b8%ad%e7%9a%84%e6%9e%81%e5%93%81httpswwwzhihucomquestion21418449" aria-label="为什么说 zsh 是 shell 中的极品？"><a href="https://www.zhihu.com/question/21418449">为什么说 zsh 是 shell 中的极品？</a></a></li>
                <li>
                    <a href="#%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e7%9a%84linux%e6%8a%80%e5%b7%a7httpscoolshellcnarticles8883html" aria-label="应该知道的LINUX技巧"><a href="https://coolshell.cn/articles/8883.html">应该知道的LINUX技巧</a></a></li>
                <li>
                    <a href="#powerline-shellhttpsgithubcomb-ryanpowerline-shell" aria-label="powerline-shell"><a href="https://github.com/b-ryan/powerline-shell">powerline-shell</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e6%a3%80%e6%b5%8b%e7%a1%ac%e7%9b%98%e5%9d%8f%e9%81%93%e5%92%8c%e5%9d%8f%e5%9d%97httpsblog51ctocompengjc2417004" aria-label="检测硬盘坏道和坏块"><a href="https://blog.51cto.com/pengjc/2417004">检测硬盘坏道和坏块</a></a><ul>
                        
                <li>
                    <a href="#%e5%8f%91%e7%8e%b0" aria-label="发现">发现</a></li>
                <li>
                    <a href="#%e6%a3%80%e6%b5%8b" aria-label="检测">检测</a></li>
                <li>
                    <a href="#%e4%bf%ae%e5%a4%8d" aria-label="修复">修复</a></li>
                <li>
                    <a href="#%e5%b1%8f%e8%94%bd" aria-label="屏蔽">屏蔽</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e6%8e%a2%e7%b4%a2httpssamwhelpgithubiobook-ubuntu-qnareadhowtoexplore" aria-label="如何探索"><a href="https://samwhelp.github.io/book-ubuntu-qna/read/howto/explore/">如何探索</a></a></li>
                <li>
                    <a href="#%e5%8c%85%e7%ae%a1%e7%90%86%e7%9b%b8%e5%85%b3" aria-label="包管理相关">包管理相关</a><ul>
                        
                <li>
                    <a href="#better-output-for-apt-upgradehttpsaskubuntucoma1116616" aria-label="Better output for apt upgrade"><a href="https://askubuntu.com/a/1116616">Better output for apt upgrade</a></a></li>
                <li>
                    <a href="#fucked-uphttpsttys3devpostfucked-up-by-ubuntu-2004fucked-up" aria-label="fucked up"><a href="https://ttys3.dev/post/fucked-up-by-ubuntu-20.04/#fucked-up">fucked up</a></a></li>
                <li>
                    <a href="#extract-a-deb-filehttpswwwcybercitibizfaqhow-to-extract-a-deb-file-without-opening-it-on-debian-or-ubuntu-linux" aria-label="Extract a .deb file"><a href="https://www.cyberciti.biz/faq/how-to-extract-a-deb-file-without-opening-it-on-debian-or-ubuntu-linux/">Extract a .deb file</a></a></li>
                <li>
                    <a href="#get-packages-url-using-apthttpsaskubuntucomquestions930429get-installed-packages-url-using-apt" aria-label="Get packages url using apt"><a href="https://askubuntu.com/questions/930429/get-installed-packages-url-using-apt">Get packages url using apt</a></a></li>
                <li>
                    <a href="#debian-%e6%a1%a3%e6%a1%88%e5%ba%93%e5%9f%ba%e7%a1%80httpswwwdebianorgdocmanualsdebian-referencech02zh-cnhtml_debian_archive_basics" aria-label="Debian 档案库基础"><a href="https://www.debian.org/doc/manuals/debian-reference/ch02.zh-cn.html#_debian_archive_basics">Debian 档案库基础</a></a></li>
                <li>
                    <a href="#find-the-package-that-provides-a-filehttpsaskubuntucomquestions481how-do-i-find-the-package-that-provides-a-file" aria-label="Find the package that provides a file"><a href="https://askubuntu.com/questions/481/how-do-i-find-the-package-that-provides-a-file">Find the package that provides a file</a></a></li>
                <li>
                    <a href="#use-apt-search-for-package-name-onlyhttpsitsfosscomapt-search-commandtextuse20apt20search20for20packagesearch20for20package20names20only" aria-label="Use apt search for package name only"><a href="https://itsfoss.com/apt-search-command/#:~:text=Use%20apt%20search%20for%20package,search%20for%20package%20names%20only.">Use apt search for package name only</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8e%8b%e7%bc%a9%e7%9b%b8%e5%85%b3" aria-label="压缩相关">压缩相关</a><ul>
                        
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88-linux-%e8%a6%81%e7%94%a8-targz%e5%be%88%e5%b0%91%e7%94%a8-7z-%e6%88%96-ziphttpswwwzhihucomquestion335911358answer755424668" aria-label="为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？"><a href="https://www.zhihu.com/question/335911358/answer/755424668">为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？</a></a></li>
                <li>
                    <a href="#extract-a-specific-file-from-a-tar-archivehttpsaskubuntucomquestions168795how-do-i-extract-a-specific-file-from-a-tar-archive" aria-label="extract a specific file from a tar archive"><a href="https://askubuntu.com/questions/168795/how-do-i-extract-a-specific-file-from-a-tar-archive">extract a specific file from a tar archive</a></a></li>
                <li>
                    <a href="#%e8%a7%a3%e5%8e%8bziphttpsforumubuntuorgcnviewtopicphpf122t175405p1343326" aria-label="解压zip"><a href="https://forum.ubuntu.org.cn/viewtopic.php?f=122&amp;t=175405&amp;p=1343326">解压zip</a></a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e5%9b%bd%e5%ae%b6%e7%9a%84%e7%bc%96%e7%a0%81httpswwwjianshucomp8cb1d9d99349" aria-label="常见国家的编码"><a href="https://www.jianshu.com/p/8cb1d9d99349">常见国家的编码</a></a></li>
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81httpsjuejincnpost6844904161360740365" aria-label="常见字符编码"><a href="https://juejin.cn/post/6844904161360740365">常见字符编码</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e7%a1%ac%e7%9b%98%e7%9b%b8%e5%85%b3" aria-label="硬盘相关">硬盘相关</a><ul>
                        
                <li>
                    <a href="#dd-%e5%88%b6%e4%bd%9cu%e7%9b%98%e5%90%af%e5%8a%a8%e7%9b%98" aria-label="dd 制作U盘启动盘">dd 制作U盘启动盘</a></li>
                <li>
                    <a href="#exfathttpwwwruanyifengcomblog201810exfathtmlhmsrtoutiaoioutm_mediumtoutiaoioutm_sourcetoutiaoio" aria-label="exFAT"><a href="http://www.ruanyifeng.com/blog/2018/10/exfat.html?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io">exFAT</a></a></li>
                <li>
                    <a href="#img%e8%bd%ac%e5%8c%96%e6%88%90isohttpsos51ctocomarticle290012html" aria-label="img转化成iso"><a href="https://os.51cto.com/article/290012.html">img转化成iso</a></a></li>
                <li>
                    <a href="#%e5%90%af%e7%94%a8-trimhttpslinuxcnarticle-8177-1html" aria-label="启用 TRIM"><a href="https://linux.cn/article-8177-1.html">启用 TRIM</a></a></li>
                <li>
                    <a href="#reserve-5-of-the-spacehttpsaskubuntucomquestions249387df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home" aria-label="reserve 5% of the space"><a href="https://askubuntu.com/questions/249387/df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home">reserve 5% of the space</a></a></li>
                <li>
                    <a href="#change-partition-labelhttpswwwtecmintcomchange-modify-linux-disk-partition-label-names" aria-label="Change Partition Label"><a href="https://www.tecmint.com/change-modify-linux-disk-partition-label-names/">Change Partition Label</a></a><ul>
                        
                <li>
                    <a href="#e2label-or-tune2fs" aria-label="e2label or tune2fs">e2label or tune2fs</a></li>
                <li>
                    <a href="#ntfslabel" aria-label="ntfslabel">ntfslabel</a></li>
                <li>
                    <a href="#mkswap" aria-label="mkswap">mkswap</a></li>
                <li>
                    <a href="#exfatlabel" aria-label="exfatlabel">exfatlabel</a></li></ul>
                </li>
                <li>
                    <a href="#disable-usb-automounthttpsaskubuntucomquestions89244how-to-disable-automount-in-nautiluss-preferences" aria-label="Disable usb automount"><a href="https://askubuntu.com/questions/89244/how-to-disable-automount-in-nautiluss-preferences">Disable usb automount</a></a></li>
                <li>
                    <a href="#create-an-iso-filehttpsvituxcomhow-to-create-an-iso-file-in-ubuntu" aria-label="Create an ISO File"><a href="https://vitux.com/how-to-create-an-iso-file-in-ubuntu/">Create an ISO File</a></a></li>
                <li>
                    <a href="#%e5%b0%86du%e7%9a%84%e8%be%93%e5%87%ba%e6%8c%89%e6%96%87%e4%bb%b6%e5%a4%a7%e5%b0%8f%e6%8e%92%e5%ba%8fhttpsbloglilydjwgmeposts18368html" aria-label="将du的输出按文件大小排序"><a href="https://blog.lilydjwg.me/posts/18368.html">将du的输出按文件大小排序</a></a></li>
                <li>
                    <a href="#sshfs-how-to-mount-remote-file-systems-over-sshhttpsphoenixnapcomkbsshfs" aria-label="SSHFS: How to Mount Remote File Systems Over SSH"><a href="https://phoenixnap.com/kb/sshfs">SSHFS: How to Mount Remote File Systems Over SSH</a></a><ul>
                        
                <li>
                    <a href="#install-sshfs" aria-label="Install SSHFS">Install SSHFS</a></li>
                <li>
                    <a href="#mount-a-remote-file-system-on-linux" aria-label="Mount a Remote File System on Linux">Mount a Remote File System on Linux</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6httpsarchlinuxstudiogithubioarchlinuxtutorialrookiedeappid_5e8aebee7bdaee4baa4e68da2e69687e4bbb6-swape58fafe98089" aria-label="交换文件"><a href="https://archlinuxstudio.github.io/ArchLinuxTutorial/#/rookie/DE&amp;App?id=_5%e8%ae%be%e7%bd%ae%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6-swap%e5%8f%af%e9%80%89">交换文件</a></a></li>
                <li>
                    <a href="#file-recovery" aria-label="File recovery">File recovery</a><ul>
                        
                <li>
                    <a href="#ddrescuehttpswwwgnuorgsoftwareddrescue" aria-label="Ddrescue"><a href="https://www.gnu.org/software/ddrescue/">Ddrescue</a></a></li>
                <li>
                    <a href="#file-or-grephttpsunixstackexchangecoma98700" aria-label="File or grep"><a href="https://unix.stackexchange.com/a/98700">File or grep</a></a></li>
                <li>
                    <a href="#extundeletehttpswwwjianshucomp662293f12a47" aria-label="Extundelete"><a href="https://www.jianshu.com/p/662293f12a47">Extundelete</a></a></li></ul>
                </li>
                <li>
                    <a href="#commands-to-see-mountpointhttpsunixstackexchangecoma217412" aria-label="Commands to see mountpoint"><a href="https://unix.stackexchange.com/a/217412">Commands to see mountpoint</a></a></li>
                <li>
                    <a href="#mount-an-iso-imagefilehttpswwwcybercitibiztipshow-to-mount-iso-image-under-linuxhtml" aria-label="mount an ISO image/file"><a href="https://www.cyberciti.biz/tips/how-to-mount-iso-image-under-linux.html">mount an ISO image/file</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e6%a1%8c%e9%9d%a2%e7%8e%af%e5%a2%83%e7%9b%b8%e5%85%b3" aria-label="桌面环境相关">桌面环境相关</a><ul>
                        
                <li>
                    <a href="#%e5%9c%a8%e4%b8%ad%e6%96%87%e4%bb%8b%e9%9d%a2%e4%b8%8b%e5%a6%82%e4%bd%95%e5%8f%aa%e7%94%a8%e8%8b%b1%e6%96%87%e7%9b%ae%e9%8c%84%e5%90%8d%e7%a8%b1httpsaskfedoraprojectorgttopic11528" aria-label="在中文介面下，如何只用英文目錄名稱？"><a href="https://ask.fedoraproject.org/t/topic/11528">在中文介面下，如何只用英文目錄名稱？</a></a></li>
                <li>
                    <a href="#xdg_templates_dirhttpsaskubuntucomquestions94734what-is-the-templates-folder-in-the-home-directory-for" aria-label="XDG_TEMPLATES_DIR"><a href="https://askubuntu.com/questions/94734/what-is-the-templates-folder-in-the-home-directory-for">XDG_TEMPLATES_DIR</a></a></li>
                <li>
                    <a href="#nmcheckgnomeorghttpsaskubuntucomquestions1070823some-suspicious-software-making-request-to-nmcheck-gnome-org" aria-label="nmcheck.gnome.org"><a href="https://askubuntu.com/questions/1070823/some-suspicious-software-making-request-to-nmcheck-gnome-org">nmcheck.gnome.org</a></a></li>
                <li>
                    <a href="#automatic-light--dark-modehttpsaskubuntucomquestions1234742automatic-light-dark-mode" aria-label="Automatic Light / Dark Mode"><a href="https://askubuntu.com/questions/1234742/automatic-light-dark-mode">Automatic Light / Dark Mode</a></a></li>
                <li>
                    <a href="#%e6%94%b9%e5%96%84%e8%a7%a6%e6%91%b8%e6%9d%bf%e4%bd%93%e9%aa%8chttpsplumzmearchives12343" aria-label="改善触摸板体验"><a href="https://plumz.me/archives/12343/">改善触摸板体验</a></a></li>
                <li>
                    <a href="#preferring-chinese-fonts-to-japanese-oneshttpszhmailcom20190617ubuntu-18-04-prefer-chinese-fonts-to-japanese-ones" aria-label="Preferring Chinese fonts to Japanese ones"><a href="https://zhmail.com/2019/06/17/ubuntu-18-04-prefer-chinese-fonts-to-japanese-ones/">Preferring Chinese fonts to Japanese ones</a></a></li>
                <li>
                    <a href="#mac-os-x-fonts" aria-label="Mac OS X Fonts">Mac OS X Fonts</a></li>
                <li>
                    <a href="#windows-fontshttpsblogcsdnnetwpwalterarticledetails103760537" aria-label="Windows Fonts"><a href="https://blog.csdn.net/WPwalter/article/details/103760537">Windows Fonts</a></a></li>
                <li>
                    <a href="#fromubuntutokubuntuhttpshelpubuntucomcommunityfromubuntutokubuntu" aria-label="FromUbuntuToKubuntu"><a href="https://help.ubuntu.com/community/FromUbuntuToKubuntu">FromUbuntuToKubuntu</a></a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9-user-agenthttpswwwcnblogscomliuguanglinpchange_user-agenthtml" aria-label="修改 User-Agent"><a href="https://www.cnblogs.com/liuguanglin/p/change_user-agent.html">修改 User-Agent</a></a><ul>
                        
                <li>
                    <a href="#chrome" aria-label="Chrome">Chrome</a></li>
                <li>
                    <a href="#firefox" aria-label="Firefox">Firefox</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bb%8e-linux-%e7%bb%88%e7%ab%af%e5%8f%91%e9%80%81%e6%a1%8c%e9%9d%a2%e9%80%9a%e7%9f%a5%e4%b8%8e%e6%8f%90%e9%86%92httpslinuxcnarticle-14826-1html" aria-label="从 Linux 终端发送桌面通知与提醒"><a href="https://linux.cn/article-14826-1.html">从 Linux 终端发送桌面通知与提醒</a></a><ul>
                        
                <li>
                    <a href="#%e4%bb%8e-linux-%e7%bb%88%e7%ab%af%e5%8f%91%e9%80%81%e9%80%9a%e7%9f%a5" aria-label="从 Linux 终端发送通知">从 Linux 终端发送通知</a></li>
                <li>
                    <a href="#%e5%b0%86-notify-send-%e4%b8%8e-at-%e7%bb%93%e5%90%88%e4%bd%bf%e7%94%a8" aria-label="将 notify-send 与 at 结合使用">将 notify-send 与 at 结合使用</a></li></ul>
                </li>
                <li>
                    <a href="#desktop-file" aria-label="Desktop file">Desktop file</a><ul>
                        
                <li>
                    <a href="#running-a-desktop-file-in-the-terminalhttpsaskubuntucoma385169" aria-label="Running a .desktop file in the terminal"><a href="https://askubuntu.com/a/385169">Running a .desktop file in the terminal</a></a></li>
                <li>
                    <a href="#set-variable-in-desktop-filehttpsaskubuntucomquestions144968set-variable-in-desktop-file" aria-label="Set variable in .desktop file"><a href="https://askubuntu.com/questions/144968/set-variable-in-desktop-file">Set variable in .desktop file</a></a></li>
                <li>
                    <a href="#how-to-validateverify-desktop-fileshttpsunixstackexchangecomquestions156892how-to-validate-verify-desktop-files" aria-label="How to validate/verify .desktop files?"><a href="https://unix.stackexchange.com/questions/156892/how-to-validate-verify-desktop-files">How to validate/verify .desktop files?</a></a></li></ul>
                </li>
                <li>
                    <a href="#dash-to-dock" aria-label="Dash to Dock">Dash to Dock</a></li>
                <li>
                    <a href="#%e6%a6%82%e8%a7%88-linux-%e9%9f%b3%e9%a2%91%e7%b3%bb%e7%bb%9fhttpsszclsyamezh-cnpostslinuxaudio-system" aria-label="概览 Linux 音频系统"><a href="https://szclsya.me/zh-cn/posts/linux/audio-system/">概览 Linux 音频系统</a></a><ul>
                        
                <li>
                    <a href="#%e8%ae%ba-linux-%e6%98%af%e5%a6%82%e4%bd%95%e5%b0%86%e9%9f%b3%e4%b9%90%e6%96%87%e4%bb%b6%e8%bd%ac%e6%8d%a2%e6%88%90%e7%a9%ba%e6%b0%94%e7%9a%84%e9%9c%87%e5%8a%a8" aria-label="论 Linux 是如何将音乐文件转换成空气的震动">论 Linux 是如何将音乐文件转换成空气的震动</a></li>
                <li>
                    <a href="#%e4%bf%af%e7%9e%b0%e9%9f%b3%e9%a2%91%e7%b3%bb%e7%bb%9f" aria-label="俯瞰音频系统">俯瞰音频系统</a></li>
                <li>
                    <a href="#linux-%e4%b8%8b%e7%9a%84%e5%85%b7%e4%bd%93%e5%ae%9e%e7%8e%b0" aria-label="Linux 下的具体实现">Linux 下的具体实现</a><ul>
                        
                <li>
                    <a href="#alsa-%e5%a3%b0%e5%8d%a1%e9%a9%b1%e5%8a%a8" aria-label="ALSA: 声卡驱动">ALSA: 声卡驱动</a></li>
                <li>
                    <a href="#pulseaudio-%e4%bd%a0%e6%88%96%e8%ae%b8%e6%ad%a3%e5%9c%a8%e7%94%a8%e7%9a%84%e9%9f%b3%e9%a2%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%ae%9e%e7%8e%b0" aria-label="PulseAudio: 你或许正在用的音频服务器实现">PulseAudio: 你或许正在用的音频服务器实现</a></li>
                <li>
                    <a href="#jack-%e5%88%9b%e9%80%a0%e8%80%85%e4%b8%8e%e4%b8%93%e4%b8%9a%e7%94%a8%e6%88%b7%e7%9a%84%e9%9f%b3%e9%a2%91%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="JACK: 创造者与专业用户的音频服务器">JACK: 创造者与专业用户的音频服务器</a></li>
                <li>
                    <a href="#pipewire-%e6%96%b0%e5%b8%8c%e6%9c%9b" aria-label="PipeWire: 新希望">PipeWire: 新希望</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%88%91%e5%ba%94%e8%af%a5%e7%94%a8%e4%bb%80%e4%b9%88" aria-label="我应该用什么？">我应该用什么？</a></li>
                <li>
                    <a href="#download-a-single-folder--from-githubhttpsstackoverflowcoma1819452319750696" aria-label="Download a single folder from GitHub"><a href="https://stackoverflow.com/a/18194523/19750696">Download a single folder  from GitHub</a></a></li></ul>
                </li>
                <li>
                    <a href="#locale-%e5%88%87%e6%8f%9bhttpssamwhelpgithubionote-about-ubuntureadadjustmentenvlocalehtml" aria-label="locale 切換"><a href="https://samwhelp.github.io/note-about-ubuntu/read/adjustment/env/locale.html">locale 切換</a></a><ul>
                        
                <li>
                    <a href="#%e5%8f%83%e8%80%83%e6%96%87%e7%ab%a0" aria-label="參考文章">參考文章</a></li>
                <li>
                    <a href="#%e5%89%8d%e6%8f%90" aria-label="前提">前提</a></li>
                <li>
                    <a href="#locale-gen" aria-label="locale-gen">locale-gen</a><ul>
                        
                <li>
                    <a href="#%e5%88%87%e6%8f%9b%e6%88%90%e8%8b%b1%e6%96%87%e7%95%8c%e9%9d%a2" aria-label="切換成「英文界面」">切換成「英文界面」</a></li>
                <li>
                    <a href="#%e5%88%87%e6%8f%9b%e6%88%90%e4%b8%ad%e6%96%87%e7%95%8c%e9%9d%a2" aria-label="切換成「中文界面」">切換成「中文界面」</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e6%96%b9%e5%bc%8f" aria-label="其他方式">其他方式</a></li></ul>
                </li>
                <li>
                    <a href="#locales-of-sddmhttpsaskubuntucomquestions1040844wrong-language-displayed-by-sddm-on-login-kubuntu-18-04" aria-label="Locales of SDDM"><a href="https://askubuntu.com/questions/1040844/wrong-language-displayed-by-sddm-on-login-kubuntu-18-04">Locales of SDDM</a></a></li></ul>
                </li>
                <li>
                    <a href="#uniform-look" aria-label="Uniform look">Uniform look</a></li>
                <li>
                    <a href="#%e7%a6%bb%e7%ba%bf%e4%bf%9d%e5%ad%98%e7%bd%91%e9%a1%b5" aria-label="离线保存网页">离线保存网页</a></li>
                <li>
                    <a href="#dynamic-workspaceshttpsgithubcomd86leaderdynamic_workspaces" aria-label="Dynamic Workspaces"><a href="https://github.com/d86leader/dynamic_workspaces">Dynamic Workspaces</a></a></li>
                <li>
                    <a href="#meta-super-and-hyper-keyshttpsaskubuntucomquestions19558what-are-the-meta-super-and-hyper-keys" aria-label="meta, super, and hyper keys"><a href="https://askubuntu.com/questions/19558/what-are-the-meta-super-and-hyper-keys">meta, super, and hyper keys</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bb%88%e7%ab%af%e7%9b%b8%e5%85%b3" aria-label="终端相关">终端相关</a><ul>
                        
                <li>
                    <a href="#%e5%80%8b%e4%ba%ba-bin-%e8%b3%87%e6%96%99%e5%a4%behttpssamwhelpgithubionote-about-ubuntureadadjustmentenvbin-dirhtml" aria-label="個人 bin 資料夾"><a href="https://samwhelp.github.io/note-about-ubuntu/read/adjustment/env/bin-dir.html">個人 bin 資料夾</a></a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e6%89%a7%e8%a1%8c%e8%87%aa%e5%b7%b1%e7%9a%84%e7%a8%8b%e5%ba%8f%e8%a6%81%e5%9c%a8%e5%89%8d%e9%9d%a2%e5%8a%a0httpszhuanlanzhihucomp85833766" aria-label="为什么执行自己的程序要在前面加./"><a href="https://zhuanlan.zhihu.com/p/85833766">为什么执行自己的程序要在前面加./</a></a></li>
                <li>
                    <a href="#good-practice-to-avoid-using-sudo-suhttpsaskubuntucomquestions962021is-it-considered-good-practice-to-avoid-using-sudo-su" aria-label="good practice to avoid using sudo su"><a href="https://askubuntu.com/questions/962021/is-it-considered-good-practice-to-avoid-using-sudo-su">good practice to avoid using <code>sudo su</code></a></a></li>
                <li>
                    <a href="#default-bashrchttpsgistgithubcommariobonales1637696" aria-label="Default .bashrc"><a href="https://gist.github.com/marioBonales/1637696">Default .bashrc</a></a></li>
                <li>
                    <a href="#use-cp-to-exclude-a-specific-directoryhttpsstackoverflowcomquestions4585929how-to-use-cp-command-to-exclude-a-specific-directory1478940014789400" aria-label="use &amp;lsquo;cp&amp;rsquo; to exclude a specific directory"><a href="https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory/14789400#14789400">use &lsquo;cp&rsquo; to exclude a specific directory</a></a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8wget%e4%b8%8b%e8%bd%bd%e7%9b%ae%e5%bd%95%e4%b8%8b%e6%89%80%e6%9c%89%e6%96%87%e4%bb%b6httpswwwytyzxorgindexphpe4bdbfe794a8wgete4b88be8bdbde79baee5bd95e4b88be68980e69c89e69687e4bbb6" aria-label="使用wget下载目录下所有文件"><a href="https://www.ytyzx.org/index.php/%E4%BD%BF%E7%94%A8wget%E4%B8%8B%E8%BD%BD%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6">使用wget下载目录下所有文件</a></a></li>
                <li>
                    <a href="#%e5%9c%a8%e6%96%87%e4%bb%b6%e5%a4%b9%e5%86%85%e8%bf%9b%e8%a1%8c%e7%9a%84%e5%85%a8%e6%96%87%e6%90%9c%e7%b4%a2httpsforumsuseorgcnttopic14557" aria-label="在文件夹内进行的全文搜索"><a href="https://forum.suse.org.cn/t/topic/14557">在文件夹内进行的全文搜索</a></a></li>
                <li>
                    <a href="#convert-webp-to-jpegpnghttpsitsfosscomwebp-ubuntu-linux" aria-label="Convert WebP to JPEG/PNG"><a href="https://itsfoss.com/webp-ubuntu-linux/">Convert WebP to JPEG/PNG</a></a></li>
                <li>
                    <a href="#preserve-file-permissions-while-copying-fileshttpswwwmakeuseofcompreserve-file-permissions-in-linux-while-copying-themtextpreserve20file20permissions20using20cptextyou20can20use20the202dpand20timestamps20of20the20filetexthowever2c20you20will20need20tokeeping20their20original20permissions20intact" aria-label="Preserve File Permissions While Copying Files"><a href="https://www.makeuseof.com/preserve-file-permissions-in-linux-while-copying-them/#:~:text=Preserve%20File%20Permissions%20Using%20cp&amp;text=You%20can%20use%20the%20%2Dp,and%20timestamps%20of%20the%20file.&amp;text=However%2C%20you%20will%20need%20to,keeping%20their%20original%20permissions%20intact.">Preserve File Permissions While Copying Files</a></a></li>
                <li>
                    <a href="#diff-echo-foo-echo-barhttpsstackoverflowcoma13437445" aria-label="diff &amp;lt;(echo &amp;quot;$foo&amp;quot;) &amp;lt;(echo &amp;quot;$bar&amp;quot;)"><a href="https://stackoverflow.com/a/13437445"><code>diff &lt;(echo &quot;$foo&quot;) &lt;(echo &quot;$bar&quot;)</code></a></a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%a9%ba%e7%99%bd%e7%ac%a6" aria-label="删除字符串空白符">删除字符串空白符</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%a7%91%e6%99%ae" aria-label="科普">科普</a><ul>
                        
                <li>
                    <a href="#x-%e5%92%8c-wayland" aria-label="X 和 Wayland">X 和 Wayland</a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8b" aria-label="简介">简介</a></li>
                <li>
                    <a href="#%e4%b8%bb%e8%a6%81%e5%8c%ba%e5%88%abhttpsshalynxonepostsdifference-between-x-and-wayland" aria-label="主要区别"><a href="https://sh.alynx.one/posts/Difference-between-X-and-Wayland/">主要区别</a></a></li>
                <li>
                    <a href="#others-1" aria-label="Others">Others</a></li></ul>
                </li>
                <li>
                    <a href="#ltshttpsaskubuntucomquestions16366whats-the-difference-between-a-long-term-support-release-and-a-normal-release" aria-label="LTS"><a href="https://askubuntu.com/questions/16366/whats-the-difference-between-a-long-term-support-release-and-a-normal-release">LTS</a></a></li>
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e7%9a%84%e7%a8%b3%e5%ae%9a%e6%80%a7httpswwwzhihucomquestion301581684answer547761587" aria-label="软件的稳定性"><a href="https://www.zhihu.com/question/301581684/answer/547761587">软件的稳定性</a></a></li>
                <li>
                    <a href="#how-to-download-a-large-file-faster-from-google-drivehttpsyantraascomdownload-large-file-faster-from-google-drive" aria-label="How To Download A Large File Faster From Google Drive?"><a href="https://yantraas.com/download-large-file-faster-from-google-drive/">How To Download A Large File Faster From Google Drive?</a></a></li>
                <li>
                    <a href="#usb%e6%8f%92%e6%a7%bd%e9%ac%86%e5%8b%95%e6%80%8e%e9%ba%bc%e8%be%a6httpswwwyoutubecomwatchvwud4i6gzcpk" aria-label="USB插槽鬆動怎麼辦"><a href="https://www.youtube.com/watch?v=WUd4I6GZcpk">USB插槽鬆動怎麼辦</a></a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e5%b0%86google%e6%90%9c%e7%b4%a2%e9%99%90%e5%88%b6%e4%b8%ba%e7%89%b9%e5%ae%9a%e8%af%ad%e8%a8%80%e7%9a%84%e7%bb%93%e6%9e%9chttpsqastackcnwebapps16047how-to-restrict-a-google-search-to-results-of-a-specific-language" aria-label="如何将Google搜索限制为特定语言的结果"><a href="https://qastack.cn/webapps/16047/how-to-restrict-a-google-search-to-results-of-a-specific-language">如何将Google搜索限制为特定语言的结果</a></a></li>
                <li>
                    <a href="#hwehttpswikiubuntucomkernelltsenablementstack" aria-label="HWE"><a href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack">HWE</a></a></li>
                <li>
                    <a href="#how-does-ubuntu-make-moneyhttpsaskubuntucomquestions21730how-does-ubuntu-make-money" aria-label="How does Ubuntu make money?"><a href="https://askubuntu.com/questions/21730/how-does-ubuntu-make-money">How does Ubuntu make money?</a></a></li>
                <li>
                    <a href="#%e8%ae%a4%e8%af%81%e7%a1%ac%e4%bb%b6httpswwwzhihucomquestion286150644" aria-label="认证硬件"><a href="https://www.zhihu.com/question/286150644">认证硬件</a></a></li>
                <li>
                    <a href="#png-jpg-or-jpeghttpsrepairitwondersharecomphoto-repairpng-jpg-jpeghtml" aria-label="PNG, JPG, or JPEG"><a href="https://repairit.wondershare.com/photo-repair/png-jpg-jpeg.html">PNG, JPG, or JPEG</a></a></li>
                <li>
                    <a href="#12-colors-that-go-with-blackhttpswwwthesprucecomcolors-that-go-with-black-4796586" aria-label="12 Colors That Go With Black"><a href="https://www.thespruce.com/colors-that-go-with-black-4796586">12 Colors That Go With Black</a></a></li>
                <li>
                    <a href="#%e5%9c%a8%e7%ba%bf%e7%94%a8%e7%9a%84-linuxhttpssegmentfaultcoma1190000020776272" aria-label="在线用的 Linux"><a href="https://segmentfault.com/a/1190000020776272">在线用的 Linux</a></a></li>
                <li>
                    <a href="#%e5%85%a8%e5%b1%80%e8%8f%9c%e5%8d%95https64mborg20220405linux-desktop-global-menu" aria-label="全局菜单"><a href="https://64mb.org/2022/04/05/linux-desktop-global-menu/">全局菜单</a></a></li></ul>
                </li>
                <li>
                    <a href="#android-%e7%9b%b8%e5%85%b3" aria-label="Android 相关">Android 相关</a><ul>
                        
                <li>
                    <a href="#transfer-files-between-linux-and-androidhttpsmashtipscomtransfer-images-android-linuxtext120connect20your20android20smartphone20and20your20linuxselectede2809d20or20e2809cimport20alle2809d20if20you20want20" aria-label="Transfer files between Linux and Android"><a href="https://mashtips.com/transfer-images-android-linux/#:~:text=1%20Connect%20your%20Android%20smartphone%20and%20your%20Linux,Selected%E2%80%9D%20or%20%E2%80%9CImport%20All%E2%80%9D%20if%20you%20want%20">Transfer files between Linux and Android</a></a></li>
                <li>
                    <a href="#two-options-to-recover-your-pc-with-androidhttpswwwmakeuseofcomtagrecover-pc-using-android" aria-label="Two Options to Recover Your PC With Android"><a href="https://www.makeuseof.com/tag/recover-pc-using-android/">Two Options to Recover Your PC With Android</a></a></li>
                <li>
                    <a href="#avif" aria-label="AVIF">AVIF</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%b3%bb%e7%bb%9f%e7%9b%b8%e5%85%b3" aria-label="系统相关">系统相关</a><ul>
                        
                <li>
                    <a href="#irqbalancehttpswikiarchlinuxorgtitleimproving_performanceirqbalance" aria-label="Irqbalance"><a href="https://wiki.archlinux.org/title/Improving_performance#irqbalance">Irqbalance</a></a></li>
                <li>
                    <a href="#block-internet-access-to-certain-programshttpsserverfaultcomquestions550276how-to-block-internet-access-to-certain-programs-on-linux" aria-label="Block internet access to certain programs"><a href="https://serverfault.com/questions/550276/how-to-block-internet-access-to-certain-programs-on-linux">Block internet access to certain programs</a></a></li>
                <li>
                    <a href="#%e9%80%9a%e8%bf%87linux%e7%b3%bb%e7%bb%9f%e8%bf%9b%e5%85%a5-bios" aria-label="通过Linux系统进入 BIOS">通过Linux系统进入 BIOS</a></li>
                <li>
                    <a href="#5-ways-to-check-cpu-info-in-linuxhttpslinuxhandbookcomcheck-cpu-info-linux" aria-label="5 Ways to Check CPU Info in Linux"><a href="https://linuxhandbook.com/check-cpu-info-linux/">5 Ways to Check CPU Info in Linux</a></a></li>
                <li>
                    <a href="#logging-in-as-root-in-ubuntu-with-live-cd" aria-label="Logging in as Root in Ubuntu with Live CD">Logging in as Root in Ubuntu with Live CD</a></li>
                <li>
                    <a href="#keychainhttpswwwcybercitibizfaqubuntu-debian-linux-server-install-keychain-apt-get-command" aria-label="Keychain"><a href="https://www.cyberciti.biz/faq/ubuntu-debian-linux-server-install-keychain-apt-get-command/">Keychain</a></a></li>
                <li>
                    <a href="#regenerate-initramfshttpsaskubuntucomquestions1351911what-does-regenerate-your-initramfs-mean" aria-label="Regenerate initramfs"><a href="https://askubuntu.com/questions/1351911/what-does-regenerate-your-initramfs-mean">Regenerate initramfs</a></a></li>
                <li>
                    <a href="#reset-lost-root-passwordhttpswikiarchlinuxorgtitlereset_lost_root_password_e7ae80e4bd93e4b8ade69687" aria-label="Reset lost root password"><a href="https://wiki.archlinux.org/title/Reset_lost_root_password_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Reset lost root password</a></a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-livecd" aria-label="使用 LiveCD">使用 LiveCD</a></li>
                <li>
                    <a href="#%e7%94%a8-bash-%e4%bd%9c%e4%b8%ba-init" aria-label="用 Bash 作为 Init">用 Bash 作为 Init</a></li></ul>
                </li>
                <li>
                    <a href="#microcodehttpsdecodezpgithubio20200712quickwords44-microcode" aria-label="Microcode"><a href="https://decodezp.github.io/2020/07/12/quickwords44-microcode/">Microcode</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e6%9b%b4%e6%96%b0%e5%be%ae%e7%a0%81httpslinuxcnarticle-9411-1html" aria-label="安装/更新微码"><a href="https://linux.cn/article-9411-1.html">安装/更新微码</a></a></li></ul>
                </li>
                <li>
                    <a href="#repair-grubhttpsaskubuntucomquestions88384how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows" aria-label="Repair grub"><a href="https://askubuntu.com/questions/88384/how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows">Repair grub</a></a></li>
                <li>
                    <a href="#dns%e7%bc%93%e5%ad%98httpsblogcsdnnetcunchi4221articledetails107470928" aria-label="DNS缓存"><a href="https://blog.csdn.net/cunchi4221/article/details/107470928">DNS缓存</a></a></li>
                <li>
                    <a href="#change-usernamehttpsaskubuntucomquestions34074how-do-i-change-my-username" aria-label="Change username"><a href="https://askubuntu.com/questions/34074/how-do-i-change-my-username">Change username</a></a></li>
                <li>
                    <a href="#test-network-speedhttpsphoenixnapcomkblinux-network-speed-test" aria-label="Test Network Speed"><a href="https://phoenixnap.com/kb/linux-network-speed-test">Test Network Speed</a></a></li>
                <li>
                    <a href="#%e8%93%9d%e7%89%99%e4%b8%8ewifi%e4%bf%a1%e5%8f%b7%e5%b9%b2%e6%89%b0httpswwwbilibilicomreadcv218058" aria-label="蓝牙与WiFi信号干扰"><a href="https://www.bilibili.com/read/cv218058">蓝牙与WiFi信号干扰</a></a></li>
                <li>
                    <a href="#ram--vram" aria-label="RAM &amp;amp; VRAM">RAM &amp; VRAM</a><ul>
                        
                <li>
                    <a href="#vram-as-ramhttpswikiarchlinuxorgtitleswap_on_video_ram" aria-label="VRAM as RAM"><a href="https://wiki.archlinux.org/title/Swap_on_video_RAM">VRAM as RAM</a></a></li>
                <li>
                    <a href="#ram-as-vramhttpswwwredditcomrpcmasterracecomments4bj7f7is_there_any_way_to_use_ram_memory_as_vram" aria-label="RAM as VRAM"><a href="https://www.reddit.com/r/pcmasterrace/comments/4bj7f7/is_there_any_way_to_use_ram_memory_as_vram/">RAM as VRAM</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8a%9f%e8%80%97%e6%8e%a7%e5%88%b6httpsarchicekylinonlineadvancedpower-ctlhtml" aria-label="功耗控制"><a href="https://arch.icekylin.online/advanced/power-ctl.html">功耗控制</a></a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-tlp-%e5%bb%b6%e9%95%bf%e7%94%b5%e6%b1%a0%e5%af%bf%e5%91%bd%e5%8f%8a%e7%bb%ad%e8%88%aa" aria-label="使用 TLP 延长电池寿命及续航">使用 TLP 延长电池寿命及续航</a></li>
                <li>
                    <a href="#%e7%94%b5%e5%8e%8b%e4%b8%8b%e6%8e%a2" aria-label="电压下探">电压下探</a></li>
                <li>
                    <a href="#%e9%99%8d%e4%bd%8e%e5%8a%9f%e7%8e%87%e5%a2%99" aria-label="降低功率墙">降低功率墙</a></li></ul>
                </li>
                <li>
                    <a href="#check-if-port-is-in-usehttpswwwcybercitibizfaqunix-linux-check-if-port-is-in-use-command" aria-label="Check if port is in use"><a href="https://www.cyberciti.biz/faq/unix-linux-check-if-port-is-in-use-command/">Check if port is in use</a></a></li>
                <li>
                    <a href="#%e5%9c%a8%e5%b7%b2%e6%9c%89%e7%b3%bb%e7%bb%9f%e5%ae%89%e8%a3%85-windows" aria-label="在已有系统安装 Windows">在已有系统安装 Windows</a></li>
                <li>
                    <a href="#dns-txt-%e8%ae%b0%e5%bd%95" aria-label="DNS TXT 记录">DNS TXT 记录</a></li>
                <li>
                    <a href="#shutdownhttpszhuanlanzhihucomp97770772" aria-label="Shutdown"><a href="https://zhuanlan.zhihu.com/p/97770772">Shutdown</a></a></li>
                <li>
                    <a href="#runlevel" aria-label="Runlevel">Runlevel</a><ul>
                        
                <li>
                    <a href="#explanationhttpswwwcnblogscomyyxianrenp12395649html" aria-label="Explanation"><a href="https://www.cnblogs.com/yyxianren/p/12395649.html">Explanation</a></a></li>
                <li>
                    <a href="#default-runlevelhttpsithelpithomecomtwarticles10135276" aria-label="Default runlevel"><a href="https://ithelp.ithome.com.tw/articles/10135276">Default runlevel</a></a></li>
                <li>
                    <a href="#execute-command-at-startupshutdownhttpsunixstackexchangecomquestions48973execute-a-command-before-shutdown" aria-label="Execute command at startup/shutdown"><a href="https://unix.stackexchange.com/questions/48973/execute-a-command-before-shutdown">Execute command at startup/shutdown</a></a></li></ul>
                </li>
                <li>
                    <a href="#report-a-problem-in-ubuntuhttpshelpubuntucomstableubuntu-helpreport-ubuntu-bughtmlen" aria-label="Report a problem in Ubuntu"><a href="https://help.ubuntu.com/stable/ubuntu-help/report-ubuntu-bug.html.en">Report a problem in Ubuntu</a></a></li></ul>
                </li>
                <li>
                    <a href="#optimizing-for-gaminghttpssteamcommunitycomsharedfilesfiledetailsid1787799592" aria-label="Optimizing for Gaming"><a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1787799592">Optimizing for Gaming</a></a><ul>
                        
                <li>
                    <a href="#enable-multilib" aria-label="Enable Multilib">Enable Multilib</a></li>
                <li>
                    <a href="#gpu-drivers" aria-label="GPU Drivers">GPU Drivers</a></li>
                <li>
                    <a href="#linux-kernel" aria-label="Linux kernel">Linux kernel</a></li>
                <li>
                    <a href="#feral-gamemodehttpslinuxhintcomgamemode-improve-gaming-performance-in-linux" aria-label="Feral Gamemode"><a href="https://linuxhint.com/gamemode-improve-gaming-performance-in-linux/">Feral Gamemode</a></a></li>
                <li>
                    <a href="#nvidia-improvements" aria-label="Nvidia Improvements">Nvidia Improvements</a></li>
                <li>
                    <a href="#libstrangle" aria-label="Libstrangle">Libstrangle</a></li>
                <li>
                    <a href="#mangohud" aria-label="Mangohud">Mangohud</a></li>
                <li>
                    <a href="#vkbasalt" aria-label="VKBasalt">VKBasalt</a></li>
                <li>
                    <a href="#goverlay" aria-label="GOverlay">GOverlay</a></li>
                <li>
                    <a href="#xbox-one-controller" aria-label="Xbox One Controller">Xbox One Controller</a></li></ul>
                </li>
                <li>
                    <a href="#questions" aria-label="QUESTIONS">QUESTIONS</a><ul>
                        
                <li>
                    <a href="#ubuntu-%e6%97%a0%e6%b3%95%e5%85%b3%e6%9c%ba" aria-label="Ubuntu 无法关机">Ubuntu 无法关机</a></li>
                <li>
                    <a href="#acpi-error-ae_already_existshttpsaskubuntucomquestions1064528cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists" aria-label="ACPI ERROR: AE_ALREADY_EXISTS"><a href="https://askubuntu.com/questions/1064528/cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists">ACPI ERROR: AE_ALREADY_EXISTS</a></a></li>
                <li>
                    <a href="#cant-run-csgo-at-fullscreenhttpsaskubuntucomquestions1114857cant-run-csgo-at-fullscreen-ubuntu-18-10" aria-label="Can&amp;rsquo;t run CS:GO at fullscreen"><a href="https://askubuntu.com/questions/1114857/cant-run-csgo-at-fullscreen-ubuntu-18-10">Can&rsquo;t run CS:GO at fullscreen</a></a></li>
                <li>
                    <a href="#how-to-disable-lock-in--kubuntuhttpswwwubuntubuzzcom201604how-to-disable-suspend-lock-ubuntu-kubuntuhtmlm1textto20disable20kde20lock20behavior2c20in20the20sameactions20post20tags203a20kde2c20kubuntu2c20ubuntu2c20unity" aria-label="How To Disable Lock In Kubuntu"><a href="https://www.ubuntubuzz.com/2016/04/how-to-disable-suspend-lock-ubuntu-kubuntu.html?m=1#:~:text=To%20disable%20KDE%20lock%20behavior%2C%20in%20the%20same,actions.%20Post%20Tags%20%3A%20KDE%2C%20Kubuntu%2C%20Ubuntu%2C%20unity">How To Disable Lock In  Kubuntu</a></a></li>
                <li>
                    <a href="#gnome-3-displays-two-icons-for-same-apphttpsaskubuntucomquestions898474why-do-some-applications-have-two-icons-in-usr-share-application" aria-label="Gnome 3 displays two icons for same app"><a href="https://askubuntu.com/questions/898474/why-do-some-applications-have-two-icons-in-usr-share-application">Gnome 3 displays two icons for same app</a></a></li>
                <li>
                    <a href="#ssh_exchange_identification-connection-closed-by-remote-hosthttpswwwzhihucomquestion20023544" aria-label="ssh_exchange_identification: Connection closed by remote host"><a href="https://www.zhihu.com/question/20023544">ssh_exchange_identification: Connection closed by remote host</a></a></li>
                <li>
                    <a href="#disk-show-129986-tb" aria-label="Disk show 129986 TB">Disk show 129986 TB</a></li>
                <li>
                    <a href="#no-caching-mode-page-found" aria-label="No Caching mode page found">No Caching mode page found</a></li>
                <li>
                    <a href="#certificate-verification-failedhttpsblogcsdnnetchaowanqarticledetails121559709" aria-label="Certificate verification failed"><a href="https://blog.csdn.net/Chaowanq/article/details/121559709">Certificate verification failed</a></a></li>
                <li>
                    <a href="#move-and-overwrite-subdirectories-and-files-to-parent-directoryhttpsunixstackexchangecomquestions9899how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory" aria-label="Move and overwrite subdirectories (and files) to parent directory"><a href="https://unix.stackexchange.com/questions/9899/how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory">Move and overwrite subdirectories (and files) to parent directory</a></a></li>
                <li>
                    <a href="#system-program-problem-detectedhttpswwwcnblogscomcrazyackingp5451861html" aria-label="System program problem detected"><a href="https://www.cnblogs.com/crazyacking/p/5451861.html">System program problem detected</a></a></li>
                <li>
                    <a href="#i915-000000020-drm-error-cpu-pipe-a-fifo-underrunhttpsbbsarchlinuxorgviewtopicphpid263720" aria-label="i915 0000:00:02.0: [drm] ERROR CPU pipe A FIFO underrun"><a href="https://bbs.archlinux.org/viewtopic.php?id=263720">i915 0000:00:02.0: [drm] <em>ERROR</em> CPU pipe A FIFO underrun</a></a></li>
                <li>
                    <a href="#evince-document-viewer420-does-not-remember-last-page-in-2204httpsaskubuntucomquestions1403672evince-document-viewer42-0-does-not-remember-last-page-in-22-04" aria-label="Evince Document Viewer(42.0) does not remember last page in 22.04"><a href="https://askubuntu.com/questions/1403672/evince-document-viewer42-0-does-not-remember-last-page-in-22-04">Evince Document Viewer(42.0) does not remember last page in 22.04</a></a></li>
                <li>
                    <a href="#how-can-i-create-launchers-on-my-desktophttpsaskubuntucomquestions64222how-can-i-create-launchers-on-my-desktop" aria-label="How can I create launchers on my desktop?"><a href="https://askubuntu.com/questions/64222/how-can-i-create-launchers-on-my-desktop">How can I create launchers on my desktop?</a></a></li>
                <li>
                    <a href="#%e8%a7%a3%e5%86%b3%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%9c%a8-ubuntu-2204-%e6%97%a0%e6%b3%95%e8%bf%90%e8%a1%8c%e7%9a%84%e9%97%ae%e9%a2%98httpstmeubuntuzh473586" aria-label="解决网易云音乐在 ubuntu 22.04 无法运行的问题"><a href="https://t.me/ubuntuzh/473586">解决网易云音乐在 ubuntu 22.04 无法运行的问题</a></a></li>
                <li>
                    <a href="#%e8%a7%a3%e5%86%b3-ubuntu-2204-%e6%97%a0%e6%b3%95%e5%90%af%e5%8a%a8-wpshttpstmeubuntuzh478461" aria-label="解决 ubuntu 22.04 无法启动 wps"><a href="https://t.me/ubuntuzh/478461">解决 ubuntu 22.04 无法启动 wps</a></a></li>
                <li>
                    <a href="#ibus-rime-%e9%87%8d%e5%a4%8d%e8%be%93%e5%85%a5%e6%8b%bc%e9%9f%b3" aria-label="ibus-rime 重复输入拼音">ibus-rime 重复输入拼音</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="new-ubuntu">New Ubuntu<a hidden class="anchor" aria-hidden="true" href="#new-ubuntu">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># Restore backup</span>
cp .bashrc .bashrc.orig
rsync -av /media/kurome/DataBackup/Backup/Home/latest/ /home/kurome/

<span style="color:#75715e"># Update system</span>
sudo sed -i <span style="color:#e6db74">&#39;s@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g&#39;</span> /etc/apt/sources.list
sudo apt update
sudo apt upgrade -y

<span style="color:#75715e"># Enable custom systemd service</span>
sudo cp .opt/clash/clash.service /usr/lib/systemd/system
sudo cp .opt/aria2/aria2.service /usr/lib/systemd/system
sudo systemctl enable --now clash.service
sudo systemctl enable --now aria2.service

<span style="color:#75715e"># Install apps</span>
sudo sh -c <span style="color:#e6db74">&#39;echo &#34;deb [arch=amd64 trusted=yes] https://dl.google.com/linux/chrome/deb/ stable main&#34; &gt; /etc/apt/sources.list.d/google-chrome.list&#39;</span>
sudo apt update
sudo apt install -y git adb fastboot aria2 qemu-system-x86 samba git unrar proxychains kdeconnect nautilus-kdeconnect tree zfsutils-linux goldendict fcitx5 fcitx5-chinese-addons google-chrome-stable  gnome-tweaks gnome-shell-extensions chrome-gnome-shell timeshift libfuse2 adwaita-qt
sudo sed -e <span style="color:#e6db74">&#39;s/^socks/#socks/g&#39;</span> -e <span style="color:#e6db74">&#39;$a socks4 127.0.0.1 7890&#39;</span> -i /etc/proxychains.conf
sudo proxychains apt install ubuntu-restricted-extras -y
cp /usr/share/applications/org.fcitx.Fcitx5.desktop ~/.config/autostart/
sudo sed -e <span style="color:#e6db74">&#39;$a GTK_IM_MODULE=fcitx \
</span><span style="color:#e6db74">QT_IM_MODULE=fcitx \
</span><span style="color:#e6db74">XMODIFIERS=@im=fcitx \
</span><span style="color:#e6db74">SDL_IM_MODULE=fcitx \
</span><span style="color:#e6db74">GLFW_IM_MODULE=ibus&#39;</span> -i /etc/environment
echo <span style="color:#e6db74">&#34;export QT_STYLE_OVERRIDE=adwaita-dark&#34;</span> &gt;&gt; ~/.profile

<span style="color:#75715e"># System settings</span>
gsettings set org.gnome.desktop.media-handling automount false
gsettings set org.gnome.shell.extensions.dash-to-dock show-mounts false
gsettings set org.gnome.shell.extensions.dash-to-dock click-action cycle-windows
sudo ufw enable
sudo ufw allow proto tcp from 192.168.2.0/24 to any port 1714:1764
sudo ufw allow proto udp from 192.168.2.0/24 to any port 1714:1764
sudo ufw reload
sudo timedatectl set-local-rtc <span style="color:#ae81ff">0</span>
</code></pre></div><h2 id="backup-your-system">Backup Your System<a hidden class="anchor" aria-hidden="true" href="#backup-your-system">#</a></h2>
<ul>
<li><a href="https://help.ubuntu.com/community/BackupYourSystem">Ubuntu Help</a></li>
<li><a href="https://wiki.archlinux.org/title/System_backup">Arch Wiki</a></li>
</ul>
<h3 id="rsync">Rsync<a hidden class="anchor" aria-hidden="true" href="#rsync">#</a></h3>
<p><strong>备份</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
set -o errexit
set -o nounset
set -o pipefail

readonly SOURCE_DIR<span style="color:#f92672">=</span>/
readonly BACKUP_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>findmnt -nr -o target -S /dev/mapper/luks-5277e33d-604f-4c1e-bc8c-40c14544614e<span style="color:#66d9ef">)</span><span style="color:#e6db74">/Ubuntu2204&#34;</span>
readonly DATETIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>date <span style="color:#e6db74">&#39;+%Y-%m-%d_%H:%M:%S&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
readonly BACKUP_PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>DATETIME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
readonly LATEST_LINK<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/latest&#34;</span>

rsync -av <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--delete <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>SOURCE_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--link-dest <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LATEST_LINK<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--exclude<span style="color:#f92672">={</span><span style="color:#e6db74">&#34;dev/*&#34;</span>,<span style="color:#e6db74">&#34;proc/*&#34;</span>,<span style="color:#e6db74">&#34;sys/*&#34;</span>,<span style="color:#e6db74">&#34;tmp/*&#34;</span>,<span style="color:#e6db74">&#34;run/*&#34;</span>,<span style="color:#e6db74">&#34;mnt/*&#34;</span>,<span style="color:#e6db74">&#34;media/*&#34;</span>,<span style="color:#e6db74">&#34;lost+found/*&#34;</span>,<span style="color:#e6db74">&#34;Trash/*&#34;</span>,<span style="color:#e6db74">&#34;DataBackup/*&#34;</span>,<span style="color:#e6db74">&#34;DataPool/*&#34;</span>,<span style="color:#e6db74">&#34;swapfile&#34;</span>,<span style="color:#e6db74">&#34;cxoffice&#34;</span>,<span style="color:#e6db74">&#34;.cxoffice&#34;</span>,<span style="color:#e6db74">&#34;*.iso&#34;</span>,<span style="color:#e6db74">&#34;*.qcow2&#34;</span>,<span style="color:#e6db74">&#34;.steam&#34;</span>,<span style="color:#e6db74">&#34;Downloads/*&#34;</span>,<span style="color:#e6db74">&#34;*.exe&#34;</span>,<span style="color:#e6db74">&#34;Ventoy&#34;</span>,<span style="color:#e6db74">&#34;Desktop/*&#34;</span>,<span style="color:#e6db74">&#34;Music/*&#34;</span>,<span style="color:#e6db74">&#34;.snapshots&#34;</span>,<span style="color:#e6db74">&#34;Games&#34;</span>,<span style="color:#e6db74">&#34;Pictures/*&#34;</span>,<span style="color:#e6db74">&#34;Videos/*&#34;</span>,<span style="color:#e6db74">&#34;.cache&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
rm -rf <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LATEST_LINK<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
ln -s <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LATEST_LINK<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>注意：</p>
<ul>
<li><code>${SOURCE_DIR}/</code>必须带反斜杠，否则会备份<code>SOURCE_DIR</code>这个目录，而不是这个目录里的内容。</li>
<li><code>--exclude=&quot;Trash&quot;</code>，Trash被认为为目录，而非文件或文件和目录，并且，它不支持路径<code>~/.local/share/Trash</code></li>
<li>注意：正因为 <code>--exclude</code> 不是按照路径，所以才特别方便，比如 usb 在不同发行版之间可能会挂载到不同的路径（如 ubuntu 的会在 /media 下，fedora 的会在 /run 下），但是一般以 usb 的 label 比如 DataBackup 作为挂载目录，那么只需要把  DataBackup 放在 <code>--exclude</code> 之中，就可以在备份时排除这个 usb 设备而不需要考虑具体的路径了。</li>
</ul>
<p>查看备份大小</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo du -hs /backup/
16G    /backup/
</code></pre></div><p>整个备份为16GB，所花时间 12m。</p>
<p>通过 crontab 使之每周一12点自动备份：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo crontab -e
<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">12</span> * * <span style="color:#ae81ff">1</span> /path/.backup.sh
</code></pre></div><p><strong>还原</strong></p>
<p>分区、格式化和挂载</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># lsblk -f</span>
sda                                                                   
├─sda1
│    vfat   EFI   A642-AF58                             246.9M     2% /boot/efi
└─sda2
     ext4   ROOT  c83192bb-14f3-45d1-9345-20785a419414  190.1G     8% /
<span style="color:#75715e"># mkdir -p /mnt/ubuntu</span>
<span style="color:#75715e"># mount /dev/sda2 /mnt/ubuntu</span>
<span style="color:#75715e"># mkdir -p /mnt/ubuntu/boot/efi</span>
<span style="color:#75715e"># mount /dev/sda1 /mnt/ubuntu/boot/efi</span>
</code></pre></div><p>还原：还原的时候，如果带 <code>--delete</code>，那么就会删除备份时 <code>--exclude=</code> 不包含的内容。还原的时候，同名文件内容会恢复到备份时候的状态。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># rsync -av 备份目录 源目录</span>
<span style="color:#75715e"># rsync -av /path/to/backup/latest/ /mnt/ubuntu</span>
</code></pre></div><ul>
<li>
<p><em>chroot</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mount --types proc /proc /mnt/ubuntu/proc</span>
<span style="color:#75715e"># mount --rbind /sys /mnt/ubuntu/sys</span>
<span style="color:#75715e"># mount --make-rslave /mnt/ubuntu/sys</span>
<span style="color:#75715e"># mount --rbind /dev /mnt/ubuntu/dev</span>
<span style="color:#75715e"># mount --make-rslave /mnt/ubuntu/dev</span>
<span style="color:#75715e"># mount --bind /run /mnt/ubuntu/run</span>
<span style="color:#75715e"># mount --make-slave /mnt/ubuntu/run</span>
<span style="color:#75715e"># chroot /mnt/ubuntu</span>
</code></pre></div></li>
<li>
<p><em>update /etc/fstab</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># blkid</span>
/dev/sda2: LABEL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ROOT&#34;</span> UUID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;c83192bb-14f3-45d1-9345-20785a419414&#34;</span> TYPE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ext4&#34;</span> PARTUUID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;4659f9ec-1e96-4d4a-ad0e-e32a69a477ce&#34;</span>
/dev/sda1: LABEL_FATBOOT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;EFI&#34;</span> LABEL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;EFI&#34;</span> UUID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;A642-AF58&#34;</span> TYPE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;vfat&#34;</span> PARTUUID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;4bf5d597-b541-e845-8b70-c8ad6374df22&#34;</span>
</code></pre></div><p>fstab 模版如下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ROOT</span>
UUID<span style="color:#f92672">=</span>c83192bb-14f3-45d1-9345-20785a419414 / ext4 errors<span style="color:#f92672">=</span>remount-ro <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span>
<span style="color:#75715e"># EFI</span>
UUID<span style="color:#f92672">=</span>A642-AF58 /boot/efi vfat umask<span style="color:#f92672">=</span><span style="color:#ae81ff">0077</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span>
<span style="color:#75715e"># SWAP</span>
UUID<span style="color:#f92672">=</span>63c78f3a-91ab-43f2-bf97-6e3348e0fc00 none swap default <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
<span style="color:#75715e"># swapfile</span>
/swapfile none swap sw <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
</code></pre></div></li>
<li>
<p><em>reinstall grup</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># grub-install --target=x86_64-efi --efi-directory=/boot/efi</span>
<span style="color:#75715e"># grub-mkconfig -o /boot/grub/grub.cfg</span>
</code></pre></div><p>不能带  &ndash;bootloader-id=GRUB，否则建立 /boot/efi/EFI/GRUB 目录。</p>
</li>
<li>
<p>reboot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># exit</span>
<span style="color:#75715e"># cd</span>
<span style="color:#75715e"># umount -l /mnt/ubuntu/dev{/shm,/pts,}</span>
<span style="color:#75715e"># umount -R /mnt/ubuntu</span>
<span style="color:#75715e"># reboot </span>
</code></pre></div></li>
</ul>
<h3 id="tarhttpshelpubuntucomcommunitybackupyoursystemtar"><a href="https://help.ubuntu.com/community/BackupYourSystem/TAR">TAR</a><a hidden class="anchor" aria-hidden="true" href="#tarhttpshelpubuntucomcommunitybackupyoursystemtar">#</a></h3>
<p><strong>Backup</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd / <span style="color:#75715e"># THIS CD IS IMPORTANT THE FOLLOWING LONG COMMAND IS RUN FROM /</span>
$ tar -cvpzf backup.tar.gz <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/backup.tar.gz <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/proc <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/tmp <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/mnt <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/dev <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/sys <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/run <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/media <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/var/log <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/var/cache/apt/archives <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/usr/src/linux-headers* <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/home/*/.gvfs <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/home/*/.cache <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/home/*/.local/share/Trash /
</code></pre></div><h3 id="deja-duphttpswikignomeorgappsdejadupduplicityhttpshelpubuntucomcommunityduplicitybackuphowto"><a href="https://wiki.gnome.org/Apps/DejaDup">deja-dup</a>/<a href="https://help.ubuntu.com/community/DuplicityBackupHowto">Duplicity</a><a hidden class="anchor" aria-hidden="true" href="#deja-duphttpswikignomeorgappsdejadupduplicityhttpshelpubuntucomcommunityduplicitybackuphowto">#</a></h3>
<p>Simple backup tool for GNOME</p>
<p><a href="https://askubuntu.com/questions/145698/where-does-deja-dup-keep-its-config-files"><strong>config files</strong></a></p>
<p>The deja-dup settings can also be changed with <code>dconf-editor</code> in the <code>dconf-tools</code> apt package. The settings are in <code>org.gnome.DejaDup</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings list-recursively org.gnome.DejaDup
$ gsettings set org.gnome.DejaDup include-list <span style="color:#e6db74">&#34;[&#39;/home/kurome/.aria2&#39;, &#39;/home/kurome/.clash&#39;, &#39;/home/kurome/.config/autostart&#39;, &#39;/home/kurome/.config/Typora&#39;, &#39;/home/kurome/.config/variety&#39;, &#39;/home/kurome/.hugo&#39;, &#39;/home/kurome/.local/bin&#39;, &#39;/home/kurome/.local/share/applications&#39;, &#39;/home/kurome/.local/share/TelegramDesktop&#39;, &#39;/home/kurome/.ssh&#39;, &#39;/home/kurome/.telegram&#39;, &#39;/home/kurome/.typora&#39;, &#39;/home/kurome/Documents&#39;, &#39;/home/kurome/Downloads&#39;, &#39;/home/kurome/Templates&#39;, &#39;/home/kurome/Music&#39;, &#39;/home/kurome/.config/containers&#39;, &#39;/home/kurome/.local/share/fcitx5&#39;]&#34;</span>
</code></pre></div><p>from: <a href="https://answers.launchpad.net/deja-dup/+question/128181">launchpad.net: How do I also backup my deja Dup settings?</a></p>
<p>The settings used to be stored there, and the files are still present.</p>
<p>In more recent version they are stored in:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">~/.config/dconf
</code></pre></div><p><strong>Resotre</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ duplicity file:///home/kurome/DataBackup/Linux/ Restore/
</code></pre></div><h3 id="others">Others<a hidden class="anchor" aria-hidden="true" href="#others">#</a></h3>
<p><a href="https://askubuntu.com/questions/618244/does-the-uefi-partition-either-must-or-should-be-first-for-some-reason-if-s"><strong>Does the UEFI partition either &ldquo;MUST&rdquo; or &ldquo;SHOULD&rdquo; be first for some reason? If so why?</strong></a></p>
<p>The key words &ldquo;SHOULD&rdquo;, &ldquo;MUST&rdquo; and &ldquo;MAY&rdquo; (capitalised) in this answer are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>
<p>An (U)EFI System Partition (ESP from now on):</p>
<ul>
<li>MAY reside at the beginning of the disk
<strong>and</strong></li>
<li>SHOULD be FAT32 because of <a href="http://www.rodsbooks.com/efi-bootloaders/principles.html">Windows compatibility</a>.</li>
</ul>
<p>The only <a href="http://www.uefi.org/sites/default/files/resources/UEFI_Drive_Partition_Limits_Fact_Sheet.pdf">official limit</a> is:</p>
<ul>
<li>the ESP MUST reside in the first 2.2 Terabytes of the disk.</li>
</ul>
<p>So, the ESP MUST reside anywhere in those first 2.2 TB of the disk, but <em>there is absolutely no need for the ESP to be the first partition</em> or reside on the beginning of the disk whatsoever.
(It&rsquo;s just that some large company in Redmond, WA <a href="https://i-technet.sec.s-msft.com/dynimg/IC514408.png">advises system integrators differently</a>)&hellip;</p>
<p>I would put it as the last partition on the disk (if &lt; 2.2TB) as it&rsquo;s only used to load other OSes, but that&rsquo;s just a personal, totally subjective opinion!</p>
<p><a href="https://askubuntu.com/questions/1103170/accidently-deleted-boot-option-on-dell-laptop"><strong>Add Boot Option Manually</strong></a></p>
<p>In <em>Boot Option Name</em>, type <em>Ubuntu</em>, and in <em>File Name</em> select the file <em>grubx64.efi</em> and then Click on &lsquo;OK&rsquo;.</p>
<p><a href="https://linux.cn/article-10655-1.html"><strong>13 个开源备份解决方案</strong></a></p>
<ul>
<li>
<p>Cronopete</p>
</li>
<li>
<p>Deja Dup</p>
</li>
<li>
<p>Rclone</p>
</li>
<li>
<p>Rdiff-backup</p>
</li>
<li>
<p>Restic</p>
</li>
<li>
<p>Rsync</p>
</li>
<li>
<p><a href="https://www.borgbackup.org/">BorgBackup</a>：带有压缩和加密特性以用具有数据去重功能的备份解决方案。它基于 BSD 许可证，支持 Linux、MacOS 和 BSD。</p>
</li>
<li>
<p><a href="https://www.urbackup.org/">UrBackup</a>：它可以做镜像和文件的完整和增量备份；你可以保存整个分区或单个目录。它有 Windows、Linux、和 MacOS 客户端，并且采用 GNU Affero 公共许可证。</p>
</li>
<li>
<p><a href="http://luckybackup.sourceforge.net/">LuckyBackup</a>：根据其网站介绍，“它是一个易于使用、快速（只传输变化部分，而不是全部数据）、安全（在做任何数据操作之前，先检查所有需要备份的目录，以确保数据安全）、可靠和完全可定制的备份解决方案。它在 GPL 许可证下发行。</p>
</li>
<li>
<p><a href="http://0pointer.net/blog/casync-a-tool-for-distributing-file-system-images.html">Casync</a> ：一个可寻址内容的同步解决方案 —— 它设计用于备份、同步、存储和检索大文件系统的多个相关版本。它使用 GNU Lesser 公共许可证。</p>
</li>
<li>
<p><a href="https://syncthing.net/">Syncthing</a>：用于在两台计算机之间同步文件。它基于 Mozilla 公共许可证使用，根据其网站介绍，它是安全和私密的。它可以工作于 MacOS、Windows、Linux、FreeBSD、Solaris 和 OpenBSD。</p>
</li>
<li>
<p><a href="https://www.duplicati.com/">Duplicati</a>：一个可工作于 Windows、MacOS 和 Linux 上的、并且支持多种标准协议（比如 FTP、SSH、WebDAV 和云服务）、免费的备份解决方案。它的特性是强大的加密功能，并且它使用 GPL 许可证。</p>
</li>
<li>
<p><a href="http://dirvish.org/">Dirvish</a> ：一个基于磁盘的虚拟镜像备份系统，它使用 OSL-3.0 许可证。它要求必须安装有 Rsync、Perl5、SSH。</p>
</li>
<li>
<p><a href="https://www.bacula.org/">Bacula</a>：允许系统管理员去管理备份、恢复、和跨网络的不同种类计算机上的多种数据的一套计算机程序，它支持在 Linux、FreeBSD、Windows、MacOS、OpenBSD 和 Solaris 上运行，并且它的大部分源代码都是基于 AGPLv3 许可证的。</p>
</li>
<li>
<p><a href="https://backuppc.github.io/backuppc/">BackupPC</a>：一个高性能的、企业级的、可以备份 Linux、Windows 和 MacOS 系统的 PC 和笔记本电脑上的数据到服务器磁盘上的备份解决方案。它是基于 GPLv3 许可证的。</p>
</li>
<li>
<p><a href="http://www.amanda.org/">Amanda</a> ：一个使用 C 和 Perl 写的备份系统，它允许系统管理员去备份整个网络中的客户端到一台服务器上的磁带、磁盘或基于云的系统。它是由马里兰大学于 1991 年开发并拥有版权，并且它有一个 BSD 式的许可证。</p>
</li>
<li>
<p><a href="https://github.com/bit-team/backintime">Back in Time</a> ：一个为 Linux 设计的简单的备份实用程序。它提供了命令行和图形用户界面，它们都是用 Python 写的。去执行一个备份，只需要指定存储快照的位置、需要备份的文件夹，和备份频率即可。它使用的是 GPLv2 许可证。</p>
</li>
<li>
<p><a href="https://github.com/teejee2008/timeshift">Timeshift</a> ：一个 Linux 上的备份实用程序，它类似于 Windows 上的系统恢复和 MacOS 上的时间胶囊。它的 GitHub 仓库上介绍说：“Timeshift 通过定期递增的文件系统快照来保护你的系统。这些快照可以在日后用于数据恢复，以撤销某些对文件系统的修改。”</p>
</li>
<li>
<p><a href="https://github.com/spersson/Kup">Kup</a> ：一个能够帮助用户备份它们的文件到 USB 驱动器上的备份解决方案，但它也可以用于执行网络备份。它的 GitHub 仓库上介绍说：”当插入你的外部硬盘时，Kup 将自动启动并复制你的最新的修改。“</p>
</li>
</ul>
<p><a href="https://askubuntu.com/questions/19901/how-to-make-a-disk-image-and-restore-from-it-later"><strong>How to make a disk image and restore from it later?</strong></a>/<a href="https://askubuntu.com/questions/741723/moving-entire-linux-installation-to-another-drive"><strong>Moving entire Linux installation to another drive</strong></a></p>
<p>It&rsquo;s Clonezilla(<a href="https://clonezilla.nchc.org.tw/intro/">再生龍</a>) Live: <a href="http://clonezilla.org/">http://clonezilla.org/</a></p>
<p>The tutorial for Clonezilla can be found <a href="http://www.dedoimedo.com/computers/free_imaging_software.html">here.</a></p>
<p><a href="https://askubuntu.com/questions/13278/easy-backup-restore-of-installed-system"><strong>Easy backup/restore of installed system?</strong></a></p>
<p>Yes you can use remastersys for that.You can see a complete tutorial <a href="http://www.ubuntugeek.com/creating-custom-ubuntu-live-cd-with-remastersys.html">here</a></p>
<p><strong><a href="https://blog.lilydjwg.me/2013/12/29/rsync-btrfs-dm-crypt-full-backup.42219.html">rsync+btrfs+dm-crypt 备份整个系统</a></strong></p>
<p><a href="https://askubuntu.com/questions/6317/how-can-i-install-windows-seven-on-ubuntu-10-10/6321#6321"><strong>Reinstall GRUB</strong></a></p>
<h2 id="清理系统">清理系统<a hidden class="anchor" aria-hidden="true" href="#清理系统">#</a></h2>
<h3 id="删除不再需要的包">删除不再需要的包<a hidden class="anchor" aria-hidden="true" href="#删除不再需要的包">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt autoremove
</code></pre></div><h3 id="apt-cache">APT cache<a hidden class="anchor" aria-hidden="true" href="#apt-cache">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># see the size of this cache</span>
$ sudo du -sh /var/cache/apt 
<span style="color:#75715e"># remove only the outdated packages</span>
$ sudo apt-get autoclean
<span style="color:#75715e"># delete apt cache in its entirety</span>
$ sudo apt-get clean 
</code></pre></div><p>apt-get 和软件中心下载的软件包一般放在 <code>/var/cache/apt/archives/</code> 目录，一般都安装在 <code>/usr/</code></p>
<h3 id="journal-logs">Journal logs<a hidden class="anchor" aria-hidden="true" href="#journal-logs">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># check the log size</span>
$ journalctl --disk-usage
<span style="color:#75715e"># clear the logs that are older than a certain days</span>
$ journalctl --vacuum-time<span style="color:#f92672">=</span>3d
</code></pre></div><h3 id="thumbnails-cache">Thumbnails cache<a hidden class="anchor" aria-hidden="true" href="#thumbnails-cache">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># check the size of thumbnail cache</span>
$ du -sh ~/.cache/thumbnails
$ rm -rf ~/.cache/thumbnails/*
</code></pre></div><h3 id="duplicate-files">Duplicate files<a hidden class="anchor" aria-hidden="true" href="#duplicate-files">#</a></h3>
<p>Find and remove duplicate files：You can use a GUI tool like <a href="https://www.pixelbeat.org/fslint/">FSlint</a> or a command line tool like <a href="https://github.com/adrianlopezroche/fdupes">FDUPES</a> for this task</p>
<h3 id="old-linux-kernels">Old Linux kernels<a hidden class="anchor" aria-hidden="true" href="#old-linux-kernels">#</a></h3>
<p>Remove old Linux kernels</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># List all installed Linux kernels</span>
$ sudo dpkg --list <span style="color:#e6db74">&#39;linux-image*&#39;</span>
$ apt-get remove linux-image-VERSION
</code></pre></div><h3 id="清理-snaphttpslinuxcnarticle-14302-1html"><a href="https://linux.cn/article-14302-1.html">清理 Snap</a><a hidden class="anchor" aria-hidden="true" href="#清理-snaphttpslinuxcnarticle-14302-1html">#</a></h3>
<p>与 snap 有关的系统文件都存放在 <code>/var/lib/snapd</code> 目录下。根据你所安装的 Snap 包的数量，这个目录的大小可能在几 GB。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo du -sh /var/lib/snapd
</code></pre></div><p>根据设计，Snap 至少会在你的系统上保留一个你所安装的软件包的旧版本。你可以通过使用 Snap 命令看到这种行为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ snap list --all
</code></pre></div><p>你应该看到同一个软件包被列了两次，而且版本和修订号都不同。</p>
<p>为了释放磁盘空间，你可以删除额外的软件包版本。你怎么知道要删除哪一个呢？你可以看到，这些较旧的软件包被标记为“禁用”。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#75715e"># Removes old revisions of snaps</span>
<span style="color:#75715e"># CLOSE ALL SNAPS BEFORE RUNNING THIS</span>
set -eu
snap list --all | awk <span style="color:#e6db74">&#39;/disabled/{print $1, $3}&#39;</span> |
    <span style="color:#66d9ef">while</span> read snapname revision; <span style="color:#66d9ef">do</span>
        snap remove <span style="color:#e6db74">&#34;</span>$snapname<span style="color:#e6db74">&#34;</span> --revision<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$revision<span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">done</span>
</code></pre></div><h2 id="命令行技巧">命令行技巧<a hidden class="anchor" aria-hidden="true" href="#命令行技巧">#</a></h2>
<h3 id="bash-快捷键">Bash 快捷键<a hidden class="anchor" aria-hidden="true" href="#bash-快捷键">#</a></h3>
<p><strong>编辑命令</strong></p>
<ul>
<li><code>Ctrl + a</code> ：移到命令行首</li>
<li><code>Ctrl + e</code> ：移到命令行尾</li>
<li><code>Ctrl + f</code> ：按字符前移（右向）</li>
<li><code>Ctrl + b</code> ：按字符后移（左向）</li>
<li><code>Alt + f</code> ：按单词前移（右向）</li>
<li><code>Alt + b</code> ：按单词后移（左向）</li>
<li><code>Ctrl + xx</code>：在命令行首和光标之间移动</li>
<li><code>Ctrl + u</code> ：从光标处删除至命令行首</li>
<li><code>Ctrl + k</code> ：从光标处删除至命令行尾</li>
<li><code>Ctrl + w</code> ：从光标处删除至字首</li>
<li><code>Alt + d</code> ：从光标处删除至字尾</li>
<li><code>Ctrl + d</code> ：删除光标处的字符</li>
<li><code>Ctrl + h</code> ：删除光标前的字符</li>
<li><code>Ctrl + y</code> ：粘贴至光标后</li>
<li><code>Alt + c</code> ：从光标处更改为首字母大写的单词</li>
<li><code>Alt + u</code> ：从光标处更改为全部大写的单词</li>
<li><code>Alt + l</code> ：从光标处更改为全部小写的单词</li>
<li><code>Ctrl + t</code> ：交换光标处和之前的字符</li>
<li><code>Alt + t</code> ：交换光标处和之前的单词</li>
<li><code>Alt + Backspace</code>：与 Ctrl + w 类似，分隔符有些差别</li>
</ul>
<p><strong>重新执行命令</strong></p>
<ul>
<li><code>Ctrl + r</code>：逆向搜索命令历史</li>
<li><code>Ctrl + g</code>：从历史搜索模式退出</li>
<li><code>Ctrl + p</code>：历史中的上一条命令</li>
<li><code>Ctrl + n</code>：历史中的下一条命令</li>
<li><code>Alt + .</code>：使用上一条命令的最后一个参数</li>
</ul>
<p><strong>控制命令</strong></p>
<ul>
<li><code>Ctrl + l</code>：清屏</li>
<li><code>Ctrl + o</code>：执行当前命令，并选择上一条命令</li>
<li><code>Ctrl + s</code>：阻止屏幕输出</li>
<li><code>Ctrl + q</code>：允许屏幕输出</li>
<li><code>Ctrl + c</code>：终止命令</li>
<li><code>Ctrl + z</code>：挂起命令</li>
</ul>
<p><strong>Bang (!) 命令</strong></p>
<ul>
<li><code>!!</code>：执行上一条命令</li>
<li><code>!blah</code>：执行最近的以 blah 开头的命令，如 <code>!ls</code></li>
<li><code>!blah:p</code>：仅打印输出，而不执行</li>
<li><code>!$</code>：上一条命令的最后一个参数，与 <code>Alt + .</code> 相同</li>
<li><code>!$:p</code>：打印输出 <code>!$</code> 的内容</li>
<li><code>!*</code>：上一条命令的所有参数</li>
<li><code>!*:p</code>：打印输出 <code>!*</code> 的内容</li>
<li><code>^blah</code>：删除上一条命令中的 blah</li>
<li><code>^blah^foo</code>：将上一条命令中的 blah 替换为 foo</li>
<li><code>^blah^foo^</code>：将上一条命令中所有的 blah 都替换为 foo</li>
</ul>
<h3 id="你可能不知道的shellhttpscoolshellcnarticles8619html"><a href="https://coolshell.cn/articles/8619.html">你可能不知道的SHELL</a><a hidden class="anchor" aria-hidden="true" href="#你可能不知道的shellhttpscoolshellcnarticles8619html">#</a></h3>
<p>Shell也叫做命令行界面，它是*nix操作系统下用户和计算机的交互界面。Shell这个词是指操作系统中提供访问内核服务的程序。</p>
<p>这篇文章向大家介绍Shell一些非广为人知、但却实用有趣的知识，权当品尝shell主食后的甜点吧。</p>
<p><strong>科普</strong></p>
<p>先科普几个你可能不知道的事实：</p>
<ul>
<li>
<p>Shell几乎是和Unix操作系统一起诞生，第一个Unix Shell是肯·汤普逊（Ken Thompson）以Multics上的Shell为模范在1971年改写而成，并命名Thompson sh。即便是后来流行的bash（shell的一种变体），它的年龄实际上比当前流行的所有的Linux kernel都大，可谓在Linux系统上是先有Shell再有Kernel。</p>
</li>
<li>
<p>当前绝大部分*nix和MacOS操作系统里的默认的Shell都是bash，bash由Brian Fox在1987年创造，全称Bourne Again shell ( bash)。</p>
</li>
<li>
<p>你或许听说除了bash之外，还有Bourne shell ( sh)，Korn shell ( ksh)，C shell （包括 csh and tcsh），但是你知道这个星球上一共存在着大约50多种不同的shell么？想了解他们，请参考 <a href="https://www.freebsd.org/ports/shells.html">http://www.freebsd.org/ports/shells.html</a>。</p>
</li>
</ul>
<p><strong>一些强大的命令</strong></p>
<ul>
<li>
<p>在命令行前加空格，该命令不会进入history里。</p>
</li>
<li>
<p><code>ctrl-x e</code></p>
<p>快速启动你的默认编辑器（由变量$EDITOR设置）。</p>
</li>
</ul>
<h3 id="为什么说-zsh-是-shell-中的极品httpswwwzhihucomquestion21418449"><a href="https://www.zhihu.com/question/21418449">为什么说 zsh 是 shell 中的极品？</a><a hidden class="anchor" aria-hidden="true" href="#为什么说-zsh-是-shell-中的极品httpswwwzhihucomquestion21418449">#</a></h3>
<p><strong>色彩高亮</strong></p>
<p>并不是传统基于正则表达式的色彩高亮，而是真的会判断你输入的是啥的色彩高亮。</p>
<p>比如一个主题白色代表普通命令或者程序，红色代表错误命令，青色的代表内建命令或者 alias （echo 和 ls ），这些都不是正则判断出来的，是真的去检查的。非零的错误码（上一条命令错误），也可以高亮显示。</p>
<p><strong>命令提示</strong></p>
<p>注意，命令提示和补全是两个完全不同的系统，很多时候提示比补全更有用。你输入命令，后面就用灰色给你提示命令的参数，而且是随着你动态输入完每一个字母不断修正变化。</p>
<p>这个命令提示是基于你的历史命令数据库进行分析的，随着你输入的命令越来越多，提示将会越来越准确和顺手。</p>
<p>如果你觉得它提示的正确，你可以 CTRL+F 表示采纳，后面就会自动帮你一次性全部输入完了。</p>
<p><strong>智能补全</strong></p>
<p>缩写路径补全：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /v/w/h
</code></pre></div><p>敲一个TAB</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /var/www/html/
</code></pre></div><p>补全目录、命令参数补全连敲两次TAB进入<strong>选择模式</strong>，除了 tab/shift+tab 可以前后切换外，你还可以使用光标键上下左右移动。回车表示确认选择，用 CTRL+G 表示退出。</p>
<p><strong>快速跳转</strong></p>
<p>输入 cd 后面加一个减号后，按一次 tab 马上就列出本次登陆后去过的最近几次路径，接着根据下面的提示输入数字按回车就过去了，比如输入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd -5 &lt;回车&gt;
</code></pre></div><p>当然你还可以不输入数字，而是再按一次 tab 进入选择模式，上下键或者 ctrl+n/p 来选择，回车确认，ctrl+g 返回。</p>
<p><strong>自动跳转</strong></p>
<p>敲入 z 命令，列出了自从我开始用zsh进入过的目录和他们的权重，进入次数越多，权重越大。z 后面加一个关键词就能跳转到所有匹配的历史路径中权重最高的那个了。空格分隔多个关键字，z会先匹配出第一个来，然后再匹配第二个&hellip;</p>
<p>使用：“z -l foo&quot; 可以列出包含 foo 的所有历史路径。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 按下ALT+O 就执行 cd .. 命令</span>
bindkey -s <span style="color:#e6db74">&#39;\eo&#39;</span>   <span style="color:#e6db74">&#39;cd ..\n&#39;</span>   
<span style="color:#75715e"># 按下 ALT+; 就执行 ls -l 命令</span>
bindkey -s <span style="color:#e6db74">&#39;\e;&#39;</span>   <span style="color:#e6db74">&#39;ls -l\n&#39;</span>    
</code></pre></div><p><strong>热键绑定</strong></p>
<p>zsh 里面使用 bindkey 命令可以设置一系列热键，用来运行某一个 zsh 内部命令或者某个 shell 命令。</p>
<h3 id="应该知道的linux技巧httpscoolshellcnarticles8883html"><a href="https://coolshell.cn/articles/8883.html">应该知道的LINUX技巧</a><a hidden class="anchor" aria-hidden="true" href="#应该知道的linux技巧httpscoolshellcnarticles8883html">#</a></h3>
<p>首先，我想告诉大家，<strong>在Unix/Linux下，最有效率技巧的不是操作图形界面，而是命令行操作，因为命令行意味着自动化</strong>。</p>
<p><strong>日常</strong></p>
<ul>
<li>
<p>请man bash后查找Readline Key Bindings一节来看看bash的默认热键，比如：<code>Alt-.</code> 把上一次命令的最后一个参数打出来，而<code>Alt-*</code> 则列出你可以输入的命令。</p>
</li>
<li>
<p>回到上一次的工作目录： cd –  （回到home是 cd ~）</p>
</li>
<li>
<p>pstree -p 可以帮你显示进程树。</p>
</li>
<li>
<p>使用 pgrep 和 pkill 来找到或是kill 某个名字的进程。 (-f 选项很有用).</p>
</li>
<li>
<p>通过 &lt;(some command) 可以把某命令当成一个文件。示例：比较一个本地文件和远程文件 /etc/hosts： diff /etc/hosts &lt;(ssh somehost cat /etc/hosts)</p>
</li>
<li>
<p>在 bash中，使用重定向到标准输出和标准错误。如： some-command &gt;logfile 2&gt;&amp;1。</p>
</li>
<li>
<p>使用 man ascii 来查看 ASCII 表。</p>
</li>
</ul>
<p><strong>系统调试</strong></p>
<ul>
<li>
<p>如果你想知道磁盘、CPU、或网络状态，你可以使用 iostat, netstat, top (或更好的 htop), 还有 dstat 命令。你可以很快地知道你的系统发生了什么事。关于这方面的命令，还有iftop, iotop等。</p>
</li>
<li>
<p>要了解内存的状态，你可以使用free和vmstat命令。具体来说，你需要注意 “cached” 的值，这个值是Linux内核占用的内存。还有free的值。</p>
</li>
<li>
<p>如果你要找到哪个socket或进程在使用网络带宽，你可以使用 iftop 或 nethogs。</p>
</li>
<li>
<p>如果你要抓网络包的话，试试 wireshark 或 tshark。</p>
</li>
<li>
<p>了解 strace 和 ltrace。这两个命令可以让你查看进程的系统调用，这有助于你分析进程的hang在哪了，怎么crash和failed的。你还可以用其来做性能profile，使用 -c 选项，你可以使用-p选项来attach上任意一个进程。</p>
</li>
<li>
<p>了解用ldd命令来检查相关的动态链接库。注意：<a href="https://coolshell.cn/articles/1626.html">ldd的安全问题</a></p>
</li>
<li>
<p>使用gdb来调试一个正在运行的进程或分析core dump文件。参看我写的《<a href="https://coolshell.cn/articles/3643.html">GDB中应该知道的几个调试方法</a>》</p>
</li>
<li>
<p>学会到 /proc 目录中查看信息。这是一个Linux内核运行时记录的整个操作系统的运行统计和信息，比如： /proc/cpuinfo, /proc/xxx/cwd, /proc/xxx/exe, /proc/xxx/fd/, /proc/xxx/smaps.</p>
</li>
<li>
<p>如果你调试某个东西为什么出错时，sar命令会有用。它可以让你看看 CPU, 内存, 网络, 等的统计信息。</p>
</li>
<li>
<p>使用 dmesg 来查看一些硬件或驱动程序的信息或问题。</p>
</li>
</ul>
<h3 id="powerline-shellhttpsgithubcomb-ryanpowerline-shell"><a href="https://github.com/b-ryan/powerline-shell">powerline-shell</a><a hidden class="anchor" aria-hidden="true" href="#powerline-shellhttpsgithubcomb-ryanpowerline-shell">#</a></h3>
<p>不想每次都安装 zsh 与 ohmyzsh？</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install powerline-shell
</code></pre></div><p>Add the following to your <code>.bashrc</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">function</span> _update_ps1<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    PS1<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>powerline-shell $?<span style="color:#66d9ef">)</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $TERM !<span style="color:#f92672">=</span> linux <span style="color:#f92672">&amp;&amp;</span> ! $PROMPT_COMMAND <span style="color:#f92672">=</span>~ _update_ps1 <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
    PROMPT_COMMAND<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_update_ps1; </span>$PROMPT_COMMAND<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><p>默认的话，路径会完整显示，会很长</p>
<p>generate the default config at this location using:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.config/powerline-shell <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>powerline-shell --generate-config &gt; ~/.config/powerline-shell/config.json
</code></pre></div><p>Segment Configuration</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">{ 
    &#34;segments&#34;: 
    [  
        &#34;virtual_env&#34;,  
        &#34;username&#34;,  
        &#34;hostname&#34;,  
        &#34;ssh&#34;,   
        &#34;cwd&#34;,   
        &#34;git&#34;, 
        &#34;hg&#34;,    
        &#34;jobs&#34;,  
        &#34;root&#34; 
    ],
<span style="color:#a6e22e">+  &#34;cwd&#34;: 
</span><span style="color:#a6e22e">+    {
</span><span style="color:#a6e22e">+    &#34;max_depth&#34;: 1
</span><span style="color:#a6e22e">+    }
</span><span style="color:#a6e22e"></span>}
</code></pre></div><h2 id="检测硬盘坏道和坏块httpsblog51ctocompengjc2417004"><a href="https://blog.51cto.com/pengjc/2417004">检测硬盘坏道和坏块</a><a hidden class="anchor" aria-hidden="true" href="#检测硬盘坏道和坏块httpsblog51ctocompengjc2417004">#</a></h2>
<p>硬盘坏道分为物理坏道和逻辑坏道。</p>
<ul>
<li>物理坏道：就是硬盘实体有坏的地方，物理坏道推荐换硬盘，当然也有办法重新分区来隔离坏道，不过可能也用不久，所以不推荐。</li>
<li>逻辑坏道：是磁盘磁道上面的校验信息（ECC）跟磁道的数据对不上号所致。出现这一故障的原因，通常都是因为一些程序的错误操作或是该处扇区的磁介质开始出现不稳定的先兆。物理坏道也是逻辑坏道产生的一种原因。</li>
</ul>
<h3 id="发现">发现<a hidden class="anchor" aria-hidden="true" href="#发现">#</a></h3>
<p>dmesg：当有硬盘坏道时，通常在dmesg输出的信息中会有 Buffer I/O Error，所以经常检查dmesg的输出可以及时发现是否存在硬盘问题。</p>
<h3 id="检测">检测<a hidden class="anchor" aria-hidden="true" href="#检测">#</a></h3>
<p>通过fdisk 查看显示所有磁盘或闪存的信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo fdisk -l /dev/sd*
</code></pre></div><p>使用 badlocks检查 linux 硬盘上的坏道/坏块</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo badblocks -s -v /dev/sdb  &gt; badsectors.txt
</code></pre></div><h3 id="修复">修复<a hidden class="anchor" aria-hidden="true" href="#修复">#</a></h3>
<p>查看上述分区检查出来的坏道信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tail -f badsectors.txt
</code></pre></div><p>先备份数据再修复磁盘。硬盘在使用时不能修复，否则可能存在写并发的问题，所以修复前需要umount对应分区,或使用 Live CD</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo umount MountPoint
</code></pre></div><p>umount 分区成功后，修复命令如下，其中<code>-w</code>表示写入修复的，后面是结束（END）和开始（START）块号，注意END在前，START在后。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo badblocks -s -w /dev/sdb <span style="color:#ae81ff">205971590</span> <span style="color:#ae81ff">205971595</span>
</code></pre></div><p>修复后再次检查</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo badblocks -s -v /dev/sdb <span style="color:#ae81ff">205971590</span> <span style="color:#ae81ff">205971595</span>
</code></pre></div><h3 id="屏蔽">屏蔽<a hidden class="anchor" aria-hidden="true" href="#屏蔽">#</a></h3>
<p>执行e2fsck（针对 ext2/ext3/ext4 文件系统）或fsck命令，命令中还需要用到 badsectors.txt 文件和设备文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># for ext2/ext3/ext4</span>
$ sudo e2fsck -l badsectors.txt /dev/sdb
<span style="color:#75715e"># others</span>
$ sudo fsck -l badsectors.txt /dev/sdb
</code></pre></div><h2 id="如何探索httpssamwhelpgithubiobook-ubuntu-qnareadhowtoexplore"><a href="https://samwhelp.github.io/book-ubuntu-qna/read/howto/explore/">如何探索</a><a hidden class="anchor" aria-hidden="true" href="#如何探索httpssamwhelpgithubiobook-ubuntu-qnareadhowtoexplore">#</a></h2>
<p><strong>從「指令」找到「使用說明」</strong></p>
<p>找使用說明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man -f ls
</code></pre></div><p>閱讀使用說明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man ls
$ man <span style="color:#ae81ff">1</span> ls

<span style="color:#75715e"># 若是「bash」內建的指令，則是可以使用「help」</span>
$ help <span style="color:#66d9ef">if</span>
</code></pre></div><p>上面的「man 1 ls」，「1」指的是「Manpage Sections」。</p>
<p>執行下面指令可以看到各個「Section」的簡介。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ whatis intro
</code></pre></div><p>然後分別執行下面的指令，可以閱讀更詳細的說明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man <span style="color:#ae81ff">1</span> intro
$ man <span style="color:#ae81ff">2</span> intro
$ man <span style="color:#ae81ff">3</span> intro
$ man <span style="color:#ae81ff">4</span> intro
$ man <span style="color:#ae81ff">5</span> intro
$ man <span style="color:#ae81ff">6</span> intro
$ man <span style="color:#ae81ff">7</span> intro
$ man <span style="color:#ae81ff">8</span> intro
</code></pre></div><p><strong>從「指令」找到「所屬套件」</strong></p>
<p>先透過「whereis」來找到「ls」所在的確切路徑。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ whereis ls
ls: /bin/ls
</code></pre></div><p>然後根據這個結果，再執行下面的指令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rpm -qf /bin/ls
$ dpkg -S /bin/ls
coreutils-8.32-1.2.x86_64
</code></pre></div><p><strong>找「已安裝套件」的「檔案列表」</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rpm -ql coreutils
$ dpkg -L coreutils
</code></pre></div><h2 id="包管理相关">包管理相关<a hidden class="anchor" aria-hidden="true" href="#包管理相关">#</a></h2>
<h3 id="better-output-for-apt-upgradehttpsaskubuntucoma1116616"><a href="https://askubuntu.com/a/1116616">Better output for apt upgrade</a><a hidden class="anchor" aria-hidden="true" href="#better-output-for-apt-upgradehttpsaskubuntucoma1116616">#</a></h3>
<p>You can get this better output by asking for more verbose version output (<code>-V</code>, <code>--verbose-versions</code>, see <a href="http://manpages.ubuntu.com/manpages/bionic/en/man8/apt-get.8.html">man <code>apt-get</code></a>).</p>
<h3 id="fucked-uphttpsttys3devpostfucked-up-by-ubuntu-2004fucked-up"><a href="https://ttys3.dev/post/fucked-up-by-ubuntu-20.04/#fucked-up">fucked up</a><a hidden class="anchor" aria-hidden="true" href="#fucked-uphttpsttys3devpostfucked-up-by-ubuntu-2004fucked-up">#</a></h3>
<p>执行snap list可查看被snap化的应用：</p>
<ul>
<li>core18 是 snap 应用的运行环境</li>
<li>snap-store 是 ubuntu snap 应用商店</li>
<li>snapd 自然不用多说，是snap负责管理应用的daemon</li>
<li>gtk-common-themes, 只是为了使 snap 化的应用样式保持一致。</li>
<li>gnome-3-34-1804：This snap includes a GNOME 3.28 stack (the base libraries and desktop integration components) and shares it through the content interface.</li>
</ul>
<p>看看 mount 的结果，你会发现这些应用居然是以<code>squashfs</code>文件系统打包的，然后解包就是一个将squashfs的文件挂载为一个loop设备：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ df -t squashfs
</code></pre></div><p>snap后的程序有两大问题：</p>
<ul>
<li>一是慢，虽然Ubuntu官方宣称 snap 速度已经相比之前提升了几倍，但是，老灯同时在用Fedora 32, 所有程序打开流畅无比。但是 Ubuntu 20.04 下启动或关闭程序一些程序是能感受到明显的卡顿。这个卡顿在1秒以上。</li>
<li>二是体积大。其打包的app体积，相比于AppImage 或 Flatpak, 也是大很多。以Corebird这个应用为例，snap 112MB, deb 2MB, Flatpak 12MB (参考 <a href="https://www.omgubuntu.co.uk/2017/08/bug-report-asks-why-snappy">Snappy Sceptic Files Bug to Ask Why It Even Exists</a> 一文).</li>
</ul>
<h3 id="extract-a-deb-filehttpswwwcybercitibizfaqhow-to-extract-a-deb-file-without-opening-it-on-debian-or-ubuntu-linux"><a href="https://www.cyberciti.biz/faq/how-to-extract-a-deb-file-without-opening-it-on-debian-or-ubuntu-linux/">Extract a .deb file</a><a hidden class="anchor" aria-hidden="true" href="#extract-a-deb-filehttpswwwcybercitibizfaqhow-to-extract-a-deb-file-without-opening-it-on-debian-or-ubuntu-linux">#</a></h3>
<p><strong>Download .deb package</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt download nginx
</code></pre></div><p><strong>Extract .deb package using <code>ar</code> command</strong></p>
<p>You can use the <code>ar</code> command to extract .deb file too. The syntax is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ar x <span style="color:#f92672">{</span>file.deb<span style="color:#f92672">}</span>
</code></pre></div><p><strong>Extract .deb package using <code>dpkg-deb</code> command</strong></p>
<p>You can use the <code>dpkg-deb</code> command to extract .deb file too. The syntax is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dpkg-deb -xv <span style="color:#f92672">{</span>file.deb<span style="color:#f92672">}</span> <span style="color:#f92672">{</span>/path/to/where/extract<span style="color:#f92672">}</span>
</code></pre></div><h3 id="get-packages-url-using-apthttpsaskubuntucomquestions930429get-installed-packages-url-using-apt"><a href="https://askubuntu.com/questions/930429/get-installed-packages-url-using-apt">Get packages url using apt</a><a hidden class="anchor" aria-hidden="true" href="#get-packages-url-using-apthttpsaskubuntucomquestions930429get-installed-packages-url-using-apt">#</a></h3>
<p>Not all installed packages will have a URL associated with them, of course. However, you could use <code>apt-get dowload</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt-get download --print-uris wget
<span style="color:#e6db74">&#39;http://archive.ubuntu.com/ubuntu/pool/main/w/wget/wget_1.15-1ubuntu1.14.04.2_amd64.deb&#39;</span> wget_1.15-1ubuntu1.14.04.2_amd64.deb <span style="color:#ae81ff">270522</span> SHA256:a3f3b049ea373402236a804a5a0952c6ef9b356ba8cc19fbc1f257db6e8f3052
</code></pre></div><p>This is the candidate version as shown by <code>apt-cache policy</code>, which might not necessarily be the installed version.</p>
<h3 id="debian-档案库基础httpswwwdebianorgdocmanualsdebian-referencech02zh-cnhtml_debian_archive_basics"><a href="https://www.debian.org/doc/manuals/debian-reference/ch02.zh-cn.html#_debian_archive_basics">Debian 档案库基础</a><a hidden class="anchor" aria-hidden="true" href="#debian-档案库基础httpswwwdebianorgdocmanualsdebian-referencech02zh-cnhtml_debian_archive_basics">#</a></h3>
<p>对于典型的 HTTP 访问，档案库在 “<code>/etc/apt/sources.list</code>” 文件中像下面那样指定，例如，现在 <code>stable</code> = <code>bullseye</code> 系统。</p>
<pre tabindex="0"><code>deb http://deb.debian.org/debian/ bullseye main contrib non-free
deb-src http://deb.debian.org/debian/ bullseye main contrib non-free
</code></pre><p>这里，我倾向于使用代号 “<code>bullseye</code>” 来代替套件名 “<code>stable</code>” ，以避免下一个 <code>stable</code> 版本发布时出现意外。</p>
<p>“<code>/etc/apt/sources.list</code>” 的含义在 <code>sources.list</code>(5) 中进行了描述，下面是一些要点。</p>
<ul>
<li>“<code>deb</code>” 的那行定义了二进制软件包。</li>
<li>“<code>deb-src</code>” 的那行定义了源代码软件包。</li>
<li>第一个参数是 Debian 档案库的根 URL 。</li>
<li>第二个参数是发行版名称：可以使用套件名或代号。</li>
<li>第三个和之后的参数是 Debian 档案库的有效档案库范围名称。</li>
</ul>
<p><a href="https://www.debian.org/doc/manuals/debian-faq/ftparchives.zh-cn.html#dirtree"><strong>Debian 档案库中的那些目录都是干什么用的？</strong></a></p>
<ul>
<li><code>dists</code> 目录是“distributions”的缩写，它是访问当前可用的 Debian 发布版本（和预发布版本）的正统方式。</li>
<li><code>pool</code> 目录：软件包位于一个很大的“池（pool）”中，依源码包的名称进行组织。为了便于管理，pool 按照区（“main”、“contrib”和“non-free”）和源码包名的首字母进行分类。这些目录包括一些文件：每个架构的二进制软件包，以及用于生成这些二进制软件包的源码包。</li>
</ul>
<p><strong>总结</strong></p>
<p>一个套件的下载链接：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>根URL<span style="color:#f92672">]</span>pool/<span style="color:#f92672">[</span>有效档案库范围名称<span style="color:#f92672">]</span>/<span style="color:#f92672">[</span>套件名首字母<span style="color:#f92672">]</span>/<span style="color:#f92672">[</span>套件名<span style="color:#f92672">]</span>/<span style="color:#f92672">[</span>套件下载档案<span style="color:#f92672">]</span>
</code></pre></div><p>例如 google chrome的仓库定义是</p>
<pre tabindex="0"><code>deb [arch=amd64] https://dl.google.com/linux/chrome/deb/ stable main
</code></pre><p>下载链接是</p>
<pre tabindex="0"><code>https://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_104.0.5112.101-1_amd64.deb
</code></pre><h3 id="find-the-package-that-provides-a-filehttpsaskubuntucomquestions481how-do-i-find-the-package-that-provides-a-file"><a href="https://askubuntu.com/questions/481/how-do-i-find-the-package-that-provides-a-file">Find the package that provides a file</a><a hidden class="anchor" aria-hidden="true" href="#find-the-package-that-provides-a-filehttpsaskubuntucomquestions481how-do-i-find-the-package-that-provides-a-file">#</a></h3>
<ul>
<li>
<p>use the tool <code>apt-file</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install apt-file
$ sudo apt-file update
$ apt-file search libstdc++.so.6
$ apt-file find kwallet.h
</code></pre></div></li>
<li>
<p>You can search it in Google directly</p>
</li>
</ul>
<h3 id="use-apt-search-for-package-name-onlyhttpsitsfosscomapt-search-commandtextuse20apt20search20for20packagesearch20for20package20names20only"><a href="https://itsfoss.com/apt-search-command/#:~:text=Use%20apt%20search%20for%20package,search%20for%20package%20names%20only.">Use apt search for package name only</a><a hidden class="anchor" aria-hidden="true" href="#use-apt-search-for-package-name-onlyhttpsitsfosscomapt-search-commandtextuse20apt20search20for20packagesearch20for20package20names20only">#</a></h3>
<p>By default, apt search command looks for the searched term in both the name of the package and its description.</p>
<p>You may narrow down the search by instructing the apt command to search for package names only.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt search --names-only search_term
</code></pre></div><h2 id="压缩相关">压缩相关<a hidden class="anchor" aria-hidden="true" href="#压缩相关">#</a></h2>
<h3 id="为什么-linux-要用-targz很少用-7z-或-ziphttpswwwzhihucomquestion335911358answer755424668"><a href="https://www.zhihu.com/question/335911358/answer/755424668">为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？</a><a hidden class="anchor" aria-hidden="true" href="#为什么-linux-要用-targz很少用-7z-或-ziphttpswwwzhihucomquestion335911358answer755424668">#</a></h3>
<p>因为 7z 和 zip 压缩格式都不能保留 unix 风格的文件权限，比如解压出个可执行文件要重新 chmod chown 才能恢复正常。而 tar 格式可以。而 tar 本身不提供压缩，无非就是把包括所有文件的內容和权限拼成一个文件而己，所以用另外如 gzip 格式压缩。为什么是 gzip，因为几乎所有 linux 都支持而已。</p>
<h3 id="extract-a-specific-file-from-a-tar-archivehttpsaskubuntucomquestions168795how-do-i-extract-a-specific-file-from-a-tar-archive"><a href="https://askubuntu.com/questions/168795/how-do-i-extract-a-specific-file-from-a-tar-archive">extract a specific file from a tar archive</a><a hidden class="anchor" aria-hidden="true" href="#extract-a-specific-file-from-a-tar-archivehttpsaskubuntucomquestions168795how-do-i-extract-a-specific-file-from-a-tar-archive">#</a></h3>
<p>Yes, just give the full stored path of the file after the tarball name.</p>
<p>Example: suppose you want file <code>etc/apt/sources.list</code> from <code>etc.tar</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tar -xf etc.tar etc/apt/sources.list
</code></pre></div><h3 id="解压ziphttpsforumubuntuorgcnviewtopicphpf122t175405p1343326"><a href="https://forum.ubuntu.org.cn/viewtopic.php?f=122&amp;t=175405&amp;p=1343326">解压zip</a><a hidden class="anchor" aria-hidden="true" href="#解压ziphttpsforumubuntuorgcnviewtopicphpf122t175405p1343326">#</a></h3>
<p>如果解压中文乱码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ unzip -O CP936 xxx.zip
</code></pre></div><p><em>CP936</em>其实就是GBK，IBM在发明Code Page的时候将GBK放在第936页，所以叫<em>CP936</em>。</p>
<p>注意：有些名为 *.rar 文件其实是 zip 文件，直接用 nautilus 解压会乱码，可以用 <code>file filename.rar</code> 确认一下，使用 unzip 解压。</p>
<h4 id="常见国家的编码httpswwwjianshucomp8cb1d9d99349"><a href="https://www.jianshu.com/p/8cb1d9d99349">常见国家的编码</a><a hidden class="anchor" aria-hidden="true" href="#常见国家的编码httpswwwjianshucomp8cb1d9d99349">#</a></h4>
<p><strong>韩文编码</strong></p>
<p>1.EUC_KR：用来储存韩国KSX1001字集(旧称KSC5601)的字符。此规格由KSX2901(旧称KS C 5861)定义。</p>
<p>KS X 1001字元使用两个字节来表示： “高位字节”使用0xA1-0xFE，“低位字节”使用0xA1-0xFE</p>
<p><strong>日文编码</strong></p>
<p>1.Shift_JIS ：是一个日本电脑系统常用的编码表。它能容纳全角及半角拉丁字母、平假名、片假名、符号及日语汉字。它被命名为Shift_JIS的原因，是它在放置全角字符时，要避开原本在0xA1-0xDF放置的半角假名字符。在微软及IBM的日语电脑系统中，即使用了这个编码表。这个编码表称为CP932。</p>
<p>2.EUC_JP：用来存储日本JISx0208以及JISx0212的字集的字符，但日文文字较多使用ISO-2022-JP或Shift_JIS的方法来表示。</p>
<p><strong>俄文编码</strong></p>
<p>1.KOI8-R：KOI-8系列的斯拉夫文字8位元编码，供俄语及保加利亚语使用。</p>
<h4 id="常见字符编码httpsjuejincnpost6844904161360740365"><a href="https://juejin.cn/post/6844904161360740365">常见字符编码</a><a hidden class="anchor" aria-hidden="true" href="#常见字符编码httpsjuejincnpost6844904161360740365">#</a></h4>
<p><strong>ASCII</strong></p>
<p>ASCII是美国(国家)信息交换标准(代)码，一种使用7个或8个二进制位进行编码的方案，最多可以给<code>256(2^80)</code>个字符 (包括字母、数字、标点符号、控制字符及其他符号)分配(或指定)数值。基本的 ASCII 字符集共有 <code>128</code> 个字符，其中有 <code>96</code> 个可打印字符，包括常用的字母、数字、标点符号等，另外还有 <code>32</code> 个控制字符。</p>
<p>文件中每一个字都是美标形象码或空格码，这类文件称为“美标文本文件”，或略为“文本文件”，通常可在不同电脑系统间直接交换。 文件中含有控制码或非美标码的文件，通常不能在不同电脑系统间直接交换。这类文件有一个通称，叫“二进制文件”</p>
<p><strong>ANSI</strong></p>
<p>为了扩充ASCII编码，以用于显示本国的语言，不同的国家和地区制定了不同的标准，由此产生了<code>GB2312</code>, <code>BIG5</code>, <code>JIS</code> 等各自的编码标准。这些使用 2 个字节来代表一个字符的各种汉字延伸编码方式，称为 <code>ANSI</code> 编码，又称为<code>MBCS（Muilti-Bytes Charecter Set，多字节字符集）</code>。在简体中文系统下，<code>ANSI</code> 编码代表 <code>GB2312</code> 编码，在日文操作系统下，<code>ANSI</code> 编码代表 <code>JIS</code> 编码，所以在中文 windows下要转码成<code>GB2312</code>,<code>GBK</code>(gb2312的扩展)只需要把文本保存为<code>ANSI</code> 编码即可。 不同 <code>ANSI</code> 编码之间互不兼容，当信息在国际间交流时，无法将属于两种语言的文字，存储在同一段 <code>ANSI</code> 编码的文本中。一个很大的缺点是，同一个编码值，在不同的编码体系里代表着不同的字。这样就容易造成混乱</p>
<p><strong>GB2312</strong></p>
<p><code>GB2312</code>是<code>ANSI</code>编码里的一种，对<code>ANSI</code>编码最初始的<code>ASCII</code>编码进行扩充，为了满足国内在计算机中使用汉字的需要，中国国家标准总局发布了一系列的汉字字符集国家标准编码，统称为GB码，或国标码。其中最有影响的是于1980年发布的《信息交换用汉字编码字符集 基本集》，标准号为GB 2312-1980,因其使用非常普遍，也常被通称为国标码。GB2312编码通行于我国内地；新加坡等地也采用此编码。几乎所有的中文系统和国际化的软件都支持<code>GB2312</code>。 <code>GB2312</code>是一个简体中文字符集，由<code>6763</code>个常用汉字和<code>682</code>个全角的非汉字字符组成</p>
<p><strong>GBK</strong></p>
<p><code>GB 2312</code>的出现，基本满足了汉字的计算机处理需要，但对于人名、古汉语等方面出现的罕用字，<code>GB 2312</code>不能处理，这导致了后来<code>GBK</code>及<code>GB 18030</code>汉字字符集的出现 <code>GBK</code>共收入21886个汉字和图形符号，其中汉字（包括部首和构件）<code>21003</code>个，图形符号<code>883</code>个。<code>GBK</code>编码标准兼容<code>GB2312</code>，共收录汉字<code>21003</code>个、符号<code>883</code>个，并提供<code>1894</code>个造字码位，简、繁体字融于一库。<code>GB2312</code>码是中华人民共和国国家汉字信息交换用编码，全称《信息交换用汉字编码字符集——基本集》，1980年由国家标准总局发布。基本集共收入汉字<code>6763</code>个和非汉字图形字符<code>682</code>个，通行于中国大陆。新加坡等地也使用此编码。GBK是对GB2312-80的扩展.</p>
<p><strong>Big5</strong></p>
<p>在台湾、香港与澳门地区，使用的是繁体中文字符集。而1980年发布的<code>GB2312</code>面向简体中文字符集，并不支持繁体汉字。在这些使用繁体中文字符集的地区，一度出现过很多不同厂商提出的字符集编码，这些编码彼此互不兼容，造成了信息交流的困难。为统一繁体字符集编码，1984年，台湾五大厂商宏碁、神通、佳佳、零壹以及大众一同制定了一种繁体中文编码方案，因其来源被称为五大码，英文写作Big5，后来按英文翻译回汉字后，普遍被称为大五码。大五码是一种繁体中文汉字字符集，其中繁体汉字<code>13053</code>个，<code>808</code>个标点符号、希腊字母及特殊符号。</p>
<p><strong>unicode</strong></p>
<p>为什么电子邮件和网页都经常会出现乱码，就是因为信息的提供者可能是日文的ANSI编码体系和信息的读取者可能是中文的编码体系，他们对同一个二进制编码值进行显示，采用了不同的编码，导致乱码。这个问题促使了unicode码的诞生。 如果有一种编码，将世界上所有的符号都纳入其中，无论是英文、日文、还是中文等，大家都使用这个编码表，就不会出现编码不匹配现象。每个符号对应一个唯一的编码，乱码问题就不存在了。这就是Unicode编码。</p>
<p><code>unicode</code>，中文叫万国码，统一码，是统一码联盟为了世界上大多数文字系统进行整理和编码。 和<code>unicode</code>类似，iso组织也在做同样的事情，iso开展了 <code>ISO/IEC 10646</code>项目，名字叫<code>“ Universal Multiple-Octet Coded Character Set”</code>，简称<code>UCS</code>。 后来，双方意识到时间上不需要2套通用的字符集，所以双方开始进行整合，到<code>unicode2.0</code>时，<code>unicode</code>的编码和<code>ucs</code>的编码都基本一致。 但是又略有不同。</p>
<p><code>Unicode</code>深入人心，且<code>UTF-8</code>(Unicode中的一种)大行其道，<code>UCS</code>编码基本被等同于<code>UTF-16</code>，<code>UTF-32</code>了，所以目前UCS基本谈出人们的视野中。</p>
<p><strong>UTF-8</strong></p>
<p><code>Unicode</code>固然统一了编码方式，但是它的效率不高，比如<code>UCS-4</code>(Unicode的标准之一)规定用4个字节存储一个符号，那么每个英文字母前都必然有三个字节是0，这对存储和传输来说都很耗资源。 为了提高<code>Unicode</code>的编码效率，于是就出现了<code>UTF-8</code>编码。<code>UTF-8</code>可以根据不同的符号自动选择编码的长短。比如英文字母可以只用1个字节就够了。</p>
<p><strong>UTF-16</strong></p>
<p><code>UTF-16</code>是<code>Unicode</code>的其中一个使用方式,<code>UTF-16</code>比起<code>UTF-8</code>，好处在于大部分字符都以固定长度的字节 (2字节) 储存，但<code>UTF-16</code>却无法兼容于<code>ASCII</code>编码。</p>
<p><strong>Base64</strong></p>
<p>有的电子邮件系统(比如国外信箱)不支持非英文字母(比如汉字)传输，这是历史原因造成的(认为只有美国会使用电子邮件?)。因为一个英文字母使用ASCII编码来存储，占存储器的1个字节(8位)，实际上只用了7位2进制来存储，第一位并没有使用，设置为0，所以，这样的系统认为凡是第一位是1的字节都是错误的。而有的编码方案(比如GB2312)不但使用多个字节编码一个字符，并且第一位经常是1，于是邮件系统就把1换成0，这样收到邮件的人就会发现邮件乱码。</p>
<p>为了能让邮件系统正常的收发信件，就需要把由其他编码存储的符号转换成ASCII码来传输。比如，在一端发送GB2312编码－&gt;根据Base64规则－&gt;转换成ASCII码，接收端收到ASCII码－&gt;根据Base64规则－&gt;还原到GB2312编码。</p>
<p><strong>BMP</strong></p>
<p>UCS-4根据最高位为0的最高字节分成2^7=128个group。每个group再根据次高字节分为256个plane。每个plane根据第3个字节分为256行 (rows)，每行包含256个cells。当然同一行的cells只是最后一个字节不同，其余都相同。 group 0的plane 0被称作Basic Multilingual Plane, 即BMP。或者说UCS-4中，高两个字节为0的码位被称作BMP。 将UCS-4的BMP去掉前面的两个零字节就得到了UCS-2。在UCS-2的两个字节前加上两个零字节，就得到了UCS-4的BMP。而目前的UCS-4规范中还没有任何字符被分配在BMP之外</p>
<h2 id="硬盘相关">硬盘相关<a hidden class="anchor" aria-hidden="true" href="#硬盘相关">#</a></h2>
<h3 id="dd-制作u盘启动盘">dd 制作U盘启动盘<a hidden class="anchor" aria-hidden="true" href="#dd-制作u盘启动盘">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dd bs<span style="color:#f92672">=</span>4M <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>fileName.iso of<span style="color:#f92672">=</span>/dev/sdx status<span style="color:#f92672">=</span>progress <span style="color:#f92672">&amp;&amp;</span> sync
</code></pre></div><p>Windows 下用 Rufus 且 dd 写入模式</p>
<h3 id="exfathttpwwwruanyifengcomblog201810exfathtmlhmsrtoutiaoioutm_mediumtoutiaoioutm_sourcetoutiaoio"><a href="http://www.ruanyifeng.com/blog/2018/10/exfat.html?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io">exFAT</a><a hidden class="anchor" aria-hidden="true" href="#exfathttpwwwruanyifengcomblog201810exfathtmlhmsrtoutiaoioutm_mediumtoutiaoioutm_sourcetoutiaoio">#</a></h3>
<p><strong>文件系统</strong></p>
<p>所谓文件系统，就是文件的储存方式。通过文件系统可以准确找到存储在硬盘中的数据。储存设备都需要指定文件系统，计算机才能读写。</p>
<p><strong>Windows 的文件系统</strong></p>
<ul>
<li>
<p>FAT32：是最老的文件系统，所有操作系统都支持，兼容性最好。但是，它是为 32 位计算机设计的，文件不能超过 2<sup>32</sup> - 1 个字节，也就是不能超过 4GB，分区不能超过 8TB。</p>
</li>
<li>
<p>NTFS：是 Windows 的默认文件系统，用来替换 FAT32。Linux 下有如下方法<a href="https://askubuntu.com/questions/934560/format-usb-drive-to-ntfs-so-it-is-usable-under-windows">创建 NTFS 文件系统</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># gparted</span>
$ sudo apt-get install gparted

<span style="color:#75715e"># mkntfs</span>
$ sudo apt-get install ntfs-3g
$ sudo mkntfs --fast --label myUsbDrive /dev/sdb1

<span style="color:#75715e"># mkfs</span>
$ mkfs.ntfs -f -L DiskLabel /dev/sdb1
</code></pre></div></li>
<li>
<p>exFAT：是 FAT32 的 64位升级版，ex 就是 extended 的缩写（表示&quot;扩展的 FAT32&quot;），功能不如 NTFS，但是解决了文件和分区的大小问题，两者最大都可以到 128PB。</p>
</li>
</ul>
<p><strong>Linux 的 exFAT 格式化</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkfs.exfat /dev/sdX1
</code></pre></div><p><strong>分区表</strong></p>
<p>所谓硬盘分区，就是指一块硬盘上面，同时存在多个文件系统。每个文件系统管理的区域，就称为一个分区（partition）。</p>
<p>分区大小、起始位置、结束位置、文件系统等信息，都储存在分区表里面。</p>
<p>分区表也分成两种格式：MBR 和 GPT。前者是传统格式，兼容性好；后者更现代，功能更强大。</p>
<h3 id="img转化成isohttpsos51ctocomarticle290012html"><a href="https://os.51cto.com/article/290012.html">img转化成iso</a><a hidden class="anchor" aria-hidden="true" href="#img转化成isohttpsos51ctocomarticle290012html">#</a></h3>
<p><a href="https://zh.wikipedia.org/wiki/IMG%E6%A0%BC%E5%BC%8F">IMG</a>是一种文件归档格式（archive format），主要是为了创建磁盘的映像文件（disk image），它可以用来封装存储整个磁盘（通常指软磁盘，Floppy Disk或Diskette）或整片光盘的内容，使用&quot;.IMG&quot;这个扩展名的文件就是利用这种文件格式来创建的。</p>
<p>.IMG这个文件格式可视为.ISO格式的一种超集合。由于.ISO只能封存使用ISO9660和UDF这两种文件系统的存储介质，意即.ISO只能拿来封存CD或DVD，因此才发展出了.IMG，它是以.ISO格式为基础另外新增可封存使用其它文件系统的存储介质的能力，.IMG可向后兼容于.ISO，如果是拿来封存CD或DVD，则使用.IMG和.ISO这两种格式所产生出来的内容是一样的。</p>
<p>将img 转化成iso的有 nrg2iso 或 ccd2iso，分别下载如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install nrg2iso
$ sudo apt-get install ccd2iso
</code></pre></div><p>使用如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nrg2iso image.nrg image.iso  
$ ccd2iso &lt;.img filename&gt; &lt;.iso filename&gt; 
</code></pre></div><h3 id="启用-trimhttpslinuxcnarticle-8177-1html"><a href="https://linux.cn/article-8177-1.html">启用 TRIM</a><a hidden class="anchor" aria-hidden="true" href="#启用-trimhttpslinuxcnarticle-8177-1html">#</a></h3>
<p>当我在运行 Linux 的计算机上安装我的第一块固态驱动器（SSD）后，我开始探索如何用好它们。SSD 在操作方式上与传统磁性驱动器不同，并且它们需要在软件上另行处理以达到功能优化。</p>
<p>在传统磁盘驱动器上，删除时所删除的文件不会从磁盘中完全删除。这就是为什么你可以恢复已删除的文件的原因。基本上，文件系统仅引用磁盘上文件的位置，并且当文件被删除时，该引用被擦除，以允许你在这些空间中写入新数据覆盖原来的数据。然而，对于 SSD，新数据只能写在驱动器上完全新的或已擦除的单元上。因为必须在写入之前清除空间，如果在写入文件时尚未有足够的可用空间，则必须首先擦除该空间。这可能会对性能产生负面影响。</p>
<p>如果操作系统在写入新数据之前就擦除了未使用的空间，而不是在写入时同时进行擦除，则可以提高文件保存性能。这种做法就是 <a href="https://en.wikipedia.org/wiki/Trim_(computing)">TRIM</a>。 TRIM 命令本质上允许你的操作系统告诉驱动器哪些区域的数据不再使用，以便擦除它们，加快驱动器将来的写入，可以 SSD 的用户提供更佳的体验。</p>
<p>在 Linux 中，<code>fstrim</code> 提供此功能，它可以为写入新数据而准备驱动器，并延长驱动器的使用寿命。由于在我使用的 Linux 发行版上 SSD 的 trim 不是自动的，所以必须去调度该操作，否则 SSD 的性能会随着时间的推移而降低。</p>
<p>为了在驱动器上运行 <code>fstrim</code>，驱动器本身以及其上的文件系统必须支持 TRIM。TRIM SSD 可以在命令行或 cron 任务中手动完成。作为超级用户（使用 <code>su</code> 或 <code>sudo</code>），运行 <code>fstrim / -v</code> 以完成手动 trim，或者设置 cron 任务以在计算机未使用时定期为你运行此命令。对于 <code>fstrim</code> 的完整选项列表请参考它的 <a href="http://man7.org/linux/man-pages/man8/fstrim.8.html">man 手册</a>。</p>
<p>注：可以定期执行fstrim命令，但是不建议在mount / fstab 中使用discard 选项。因为这个选项要求SSD每次删除文件都进行trim操作，比较耗资源，尤其是在文件操作很频繁的时候。所以可以考虑用cron来定期trim。</p>
<p>硬件支持根据使用的驱动器接口类型如 PCI、<a href="https://en.wikipedia.org/wiki/Trim_(computing)#ATA">ATA</a>、<a href="https://en.wikipedia.org/wiki/Trim_(computing)#SCSI">SCSI</a> 还是 <a href="https://en.wikipedia.org/wiki/Trim_(computing)#SD.2FMMC">SD/MMC</a> 而有所不同。你需要咨询你的 Linux 供应商以了解你的特定发行版是如何支持 TRIM 的。</p>
<p>例如，红帽提供以下 <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Storage_Administration_Guide/ch-ssd.html">SSD 磁盘指南</a>。“性能随着所使用的块数接近磁盘容量而降低，性能影响程度因供应商而异，但是所有设备都会遇到一些性能降低。为了解决性能降低问题，主机系统（例如 Linux 内核）使用丢弃请求以通知存储器给定范围的块不再使用。”</p>
<p><a href="https://wiki.debian.org/SSDOptimization">Debian wiki</a> 提供了 SSD 使用的一些基本注意事项：使用 Linux 3.2 或更高版本内核，使用 SSD 的最新固件，使用 EXT4 文件系统，并且“在正常工作负载下有足够的 DRAM 用来操作而不用使用交换空间“。</p>
<h3 id="reserve-5-of-the-spacehttpsaskubuntucomquestions249387df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home"><a href="https://askubuntu.com/questions/249387/df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home">reserve 5% of the space</a><a hidden class="anchor" aria-hidden="true" href="#reserve-5-of-the-spacehttpsaskubuntucomquestions249387df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home">#</a></h3>
<p>By default, <code>ext2/3/4</code> filesystems reserve 5% of the space to be useable only by <code>root</code>. This is to avoid a normal user completely filling the disk which would then cause system components to fail whenever they next needed to write to the disk.</p>
<p>You can see the number of reserved blocks (and lots of other information about the filesystem) by doing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo tune2fs -l /dev/sda8
</code></pre></div><p>For a <code>/home</code> partition, it is probably safe to set the reserved fraction to zero:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo tune2fs -m <span style="color:#ae81ff">0</span> /dev/sda8
</code></pre></div><p>Which should make an additional ~5GB available.</p>
<h3 id="change-partition-labelhttpswwwtecmintcomchange-modify-linux-disk-partition-label-names"><a href="https://www.tecmint.com/change-modify-linux-disk-partition-label-names/">Change Partition Label</a><a hidden class="anchor" aria-hidden="true" href="#change-partition-labelhttpswwwtecmintcomchange-modify-linux-disk-partition-label-names">#</a></h3>
<h4 id="e2label-or-tune2fs">e2label or tune2fs<a hidden class="anchor" aria-hidden="true" href="#e2label-or-tune2fs">#</a></h4>
<p>The commands <strong>e2label</strong> or <strong>tune2fs</strong> used for changing label of ext2, ext3 and ext4 type partitions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># e2label /dev/sda1 ROOT</span>
OR
<span style="color:#75715e"># tune2fs –L ROOT_PART /dev/sda1</span>
</code></pre></div><p>Here, <code>ROOT</code> and <code>ROOT_PART</code> are the labels to be added to <code>/dev/sda1</code> which is ext4 formatted partition.</p>
<h4 id="ntfslabel">ntfslabel<a hidden class="anchor" aria-hidden="true" href="#ntfslabel">#</a></h4>
<p>The <strong>ntfslabel</strong> command used for changing label of NTFS partitions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ntfslabel /dev/sda5 NTFS_DIR</span>
</code></pre></div><h4 id="mkswap">mkswap<a hidden class="anchor" aria-hidden="true" href="#mkswap">#</a></h4>
<p>The <strong>mkswap</strong> command used for changing label of SWAP partition.</p>
<p>After unmounting the filesystem, following command needs to be executed to change the label of swap partition.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mkswap -L SWAP_PART /dev/sda5</span>
</code></pre></div><p>Where, <code>/dev/sda5</code> is the SWAP formatted partition.</p>
<h4 id="exfatlabel">exfatlabel<a hidden class="anchor" aria-hidden="true" href="#exfatlabel">#</a></h4>
<p>The <strong>exfatlabel</strong> command used for changing the label of exFAT formatted partition.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># exfatlabel /dev/sda3 EX_PART</span>
</code></pre></div><h3 id="disable-usb-automounthttpsaskubuntucomquestions89244how-to-disable-automount-in-nautiluss-preferences"><a href="https://askubuntu.com/questions/89244/how-to-disable-automount-in-nautiluss-preferences">Disable usb automount</a><a hidden class="anchor" aria-hidden="true" href="#disable-usb-automounthttpsaskubuntucomquestions89244how-to-disable-automount-in-nautiluss-preferences">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings get org.gnome.desktop.media-handling automount
$ gsettings set org.gnome.desktop.media-handling automount false
</code></pre></div><p>or use <a href="https://linuxconfig.org/how-to-disable-gui-desktop-usb-automount-on-linux-system">dconf-editor</a></p>
<p><a href="https://bbs.archlinux.org/viewtopic.php?id=274430">如果是 KDE</a>：右键任务栏右侧的 Most Recent Device，进入设置取消自动mount 就好了。</p>
<h3 id="create-an-iso-filehttpsvituxcomhow-to-create-an-iso-file-in-ubuntu"><a href="https://vitux.com/how-to-create-an-iso-file-in-ubuntu/">Create an ISO File</a><a hidden class="anchor" aria-hidden="true" href="#create-an-iso-filehttpsvituxcomhow-to-create-an-iso-file-in-ubuntu">#</a></h3>
<ul>
<li>
<p>Mkisofs</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkisofs -o <span style="color:#f92672">[</span>filename.iso<span style="color:#f92672">]</span> <span style="color:#f92672">[</span> directory_path<span style="color:#f92672">]</span>
$ mkisofs –o backup.iso /home/tin/Documents/backup
</code></pre></div></li>
<li>
<p>dd</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=[</span>source<span style="color:#f92672">]</span> of<span style="color:#f92672">=[</span>target.iso<span style="color:#f92672">]</span>
$ sudo dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span> /dev/sdb of<span style="color:#f92672">=</span> diskimage.iso
</code></pre></div></li>
<li>
<p>Brasero</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install brasero
</code></pre></div></li>
</ul>
<h3 id="将du的输出按文件大小排序httpsbloglilydjwgmeposts18368html"><a href="https://blog.lilydjwg.me/posts/18368.html">将du的输出按文件大小排序</a><a hidden class="anchor" aria-hidden="true" href="#将du的输出按文件大小排序httpsbloglilydjwgmeposts18368html">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sdu <span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  du -sk $@ | sort -n | awk <span style="color:#e6db74">&#39;
</span><span style="color:#e6db74">BEGIN {
</span><span style="color:#e6db74">  split(&#34;K,M,G,T&#34;, Units, &#34;,&#34;);
</span><span style="color:#e6db74">  FS=&#34;\t&#34;;
</span><span style="color:#e6db74">  OFS=&#34;\t&#34;;
</span><span style="color:#e6db74">}
</span><span style="color:#e6db74">{
</span><span style="color:#e6db74">  u = 1;
</span><span style="color:#e6db74">  while ($1 &gt;= 1024) {
</span><span style="color:#e6db74">    $1 = $1 / 1024;
</span><span style="color:#e6db74">    u += 1
</span><span style="color:#e6db74">  }
</span><span style="color:#e6db74">  $1 = sprintf(&#34;%.1f%s&#34;, $1, Units[u]);
</span><span style="color:#e6db74">  sub(/\.0/, &#34;&#34;, $1);
</span><span style="color:#e6db74">  print $0;
</span><span style="color:#e6db74">}&#39;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="sshfs-how-to-mount-remote-file-systems-over-sshhttpsphoenixnapcomkbsshfs"><a href="https://phoenixnap.com/kb/sshfs">SSHFS: How to Mount Remote File Systems Over SSH</a><a hidden class="anchor" aria-hidden="true" href="#sshfs-how-to-mount-remote-file-systems-over-sshhttpsphoenixnapcomkbsshfs">#</a></h3>
<p><strong>SSHFS</strong> (SSH File System) is a client for mounting a file system located on a remote machine onto your local system through an <a href="https://phoenixnap.com/kb/how-does-ssh-work">SSH connection</a>. Using the SFTP (SSH file transfer protocol), the SSHFS command-line tool mounts a physical or virtual disk locally, allowing file transfer between a local and remote machine.</p>
<p><strong>This article demonstrates the installation and usage of SSHFS to mount a remote folder or file system over SSH.</strong></p>
<h4 id="install-sshfs">Install SSHFS<a hidden class="anchor" aria-hidden="true" href="#install-sshfs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install sshfs
</code></pre></div><h4 id="mount-a-remote-file-system-on-linux">Mount a Remote File System on Linux<a hidden class="anchor" aria-hidden="true" href="#mount-a-remote-file-system-on-linux">#</a></h4>
<p><strong>Step 1: Create Mount Point</strong></p>
<p>Create a mount point directory in the <em>mnt</em> folder where the remote file system will be mounted:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkdir /mnt/&lt;folder name&gt;
</code></pre></div><p><strong>Step 2: Mount the Remote File System Using SSHFS</strong></p>
<p>Mount the remote file system to the created mount point using the SSHFS tool:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo sshfs <span style="color:#f92672">[</span>-o &lt;options&gt;<span style="color:#f92672">]</span> &lt;remote user&gt;@&lt;remote host&gt;:/&lt;path to remote directory&gt; /mnt/&lt;folder name&gt;/
</code></pre></div><p>Enter the login password when requested if using password authentication. If the remote server uses SSH key authorization, provide the path of the private key. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo sshfs -o allow_other,IdentityFile<span style="color:#f92672">=</span>/home/kb/.ssh/id_rsa ubuntu@131.153.142.254:/home/ubuntu/ /mnt/test/
</code></pre></div><p>The <strong><code>allow_other</code></strong> option allows access to users other than root.</p>
<p><strong>Step 3: Unmount a Remote File System on Linux</strong></p>
<p>Lastly, when finished with the mount point, unmount the remote file system with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo umount /mnt/&lt;folder name&gt;
</code></pre></div><h3 id="交换文件httpsarchlinuxstudiogithubioarchlinuxtutorialrookiedeappid_5e8aebee7bdaee4baa4e68da2e69687e4bbb6-swape58fafe98089"><a href="https://archlinuxstudio.github.io/ArchLinuxTutorial/#/rookie/DE&amp;App?id=_5%e8%ae%be%e7%bd%ae%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6-swap%e5%8f%af%e9%80%89">交换文件</a><a hidden class="anchor" aria-hidden="true" href="#交换文件httpsarchlinuxstudiogithubioarchlinuxtutorialrookiedeappid_5e8aebee7bdaee4baa4e68da2e69687e4bbb6-swape58fafe98089">#</a></h3>
<p>在桌面环境中，交换分区或文件用来实现休眠(hibernate)的功能，即将当前环境保存在磁盘的交换文件或分区部分。除此之外，某些特定软件需要 swap 才可以正确运行。交换文件与分区性能相同，且交换文件更为灵活，可随时变更大小，增加与删除。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo fallocate -l 4G /swapfile <span style="color:#75715e"># 创建4G的交换空间，大小根据需要自定</span>
$ sudo dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/dev/zero of<span style="color:#f92672">=</span>/swapfile bs<span style="color:#f92672">=</span>1M count<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span> status<span style="color:#f92672">=</span>progress <span style="color:#75715e"># 或者使用 dd</span>
$ sudo chmod <span style="color:#ae81ff">600</span> /swapfile <span style="color:#75715e"># 设置正确的权限</span>
$ sudo mkswap /swapfile <span style="color:#75715e"># 格式化swap文件</span>
$ sudo swapon /swapfile <span style="color:#75715e"># 启用swap文件</span>
</code></pre></div><p>最后，向 <code>/etc/fstab</code> 中<strong>追加</strong>如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/swapfile none swap defaults <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
</code></pre></div><p>KDE 自身提供开箱即用的睡眠功能(suspend)，即将系统挂起到内存，消耗少量的电量。休眠(hibernate)会将系统挂起到交换分区或文件，几乎不消耗电量。</p>
<h3 id="file-recovery">File recovery<a hidden class="anchor" aria-hidden="true" href="#file-recovery">#</a></h3>
<ul>
<li><a href="https://help.ubuntu.com/community/DataRecovery">Ubuntu Help</a></li>
<li><a href="https://wiki.archlinux.org/title/file_recovery">Arch Wiki</a></li>
</ul>
<h4 id="ddrescuehttpswwwgnuorgsoftwareddrescue"><a href="https://www.gnu.org/software/ddrescue/">Ddrescue</a><a hidden class="anchor" aria-hidden="true" href="#ddrescuehttpswwwgnuorgsoftwareddrescue">#</a></h4>
<p>GNU ddrescue是一个用于磁盘、CD-ROM与其他数字存储媒体的资料恢复工具。其将原始存储区块（如扇区）从一个设备或文件复制到另一个，同时以智能方式处理读取错误，透过从部分读取的区块中截取尚称良好的扇区来最小化资料损失。</p>
<h4 id="file-or-grephttpsunixstackexchangecoma98700"><a href="https://unix.stackexchange.com/a/98700">File or grep</a><a hidden class="anchor" aria-hidden="true" href="#file-or-grephttpsunixstackexchangecoma98700">#</a></h4>
<p>With a bit of chances, sometimes I can recover deleted files with this script or next solution in the answer :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> ! $1 <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
    echo -e <span style="color:#e6db74">&#34;Usage:\n\n\t</span>$0<span style="color:#e6db74"> &#39;file name&#39;&#34;</span>
    exit <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">fi</span>

f<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>file 2&gt;/dev/null /proc/*/fd/* | awk <span style="color:#e6db74">&#39;$NF == &#34;(deleted)&#34;{print $(NF-1)}&#39;</span><span style="color:#66d9ef">)</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $f <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;fd </span>$f<span style="color:#e6db74"> found...&#34;</span>
    cp -v <span style="color:#e6db74">&#34;</span>$f<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">else</span>
    echo &gt;&amp;<span style="color:#ae81ff">2</span> <span style="color:#e6db74">&#34;No fd found...&#34;</span>
    exit <span style="color:#ae81ff">2</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><hr>
<p>There&rsquo;s another useful trick: if you know a pattern in your deleted files, type alt+sys+resuo to reboot+remount in read-only, then with a live-cd, use <code>grep</code> to search in the hard-drive :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">grep -a -C <span style="color:#ae81ff">500</span> <span style="color:#e6db74">&#39;known pattern&#39;</span> /dev/sda | tee /tmp/recover
</code></pre></div><p>then edit <code>/tmp/recover</code> to keep only what were your file(s) before.</p>
<p>Hey, if with unix philosophy all is files, it&rsquo;s time to take advantage of this, no ?</p>
<blockquote>
<p>I don&rsquo;t understand how the grep solution worked for you, it outputs only binary data. How is that useful? – w00t</p>
<p>Sure, it &ldquo;only&rdquo; spits out binary data. But sometimes that binary data happens to contain the ASCII bits corresponding to the file I&rsquo;m looking for. I guess I don&rsquo;t understand the question? – wchargin</p>
<p>the trick is to use a search pattern that is very specific to that file. The grep command will take the 500 lines before and after each matching line, so it will still spit out a lot of irrelevant data, but with a text editor that can cope with that (e.g. Vim), it&rsquo;s easy to sort out the good from the bad stuff. You could also filter out all lines with nonprintable characters by piping it through another grep command: <code>grep -av &quot;[^[:print:]]&quot;</code> – JimmyMcHoover</p>
</blockquote>
<h4 id="extundeletehttpswwwjianshucomp662293f12a47"><a href="https://www.jianshu.com/p/662293f12a47">Extundelete</a><a hidden class="anchor" aria-hidden="true" href="#extundeletehttpswwwjianshucomp662293f12a47">#</a></h4>
<p>安装：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install extundelete
</code></pre></div><p>查看挂载：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ df -lh
/dev/sdb1       6.8G  4.1G  2.8G   60% /media/taroballs/taroballs
</code></pre></div><p>卸载文件系统：停止对当前分区做任何操作，防止inode被覆盖。inode被覆盖基本就告别恢复了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ umount /dev/sdb1 
</code></pre></div><p>通过inode节点恢复：</p>
<ul>
<li>
<p>通过扫描查找删除的文件夹</p>
<pre tabindex="0"><code>$ extundelete /dev/sdb1 --inode 2 
</code></pre></li>
<li>
<p>恢复单一文件tmppasswd</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ extundelete /dev/sdb1 --restore-file passwd  
</code></pre></div></li>
<li>
<p>恢复目录deletetest</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ extundelete /dev/sdb1 --restore-directory  deletetest
</code></pre></div></li>
<li>
<p>恢复所有</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ extundelete /dev/sdb1 --restore-all
</code></pre></div></li>
<li>
<p>恢复指定inode</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ extundelete /dev/sdb1 --restore-inode <span style="color:#ae81ff">14</span>
</code></pre></div></li>
</ul>
<h3 id="commands-to-see-mountpointhttpsunixstackexchangecoma217412"><a href="https://unix.stackexchange.com/a/217412">Commands to see mountpoint</a><a hidden class="anchor" aria-hidden="true" href="#commands-to-see-mountpointhttpsunixstackexchangecoma217412">#</a></h3>
<p>On Linux, you can now use the <code>findmnt</code> command from <code>util-linux</code> (since version 2.18):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ findmnt -S /dev/VG_SC/home
TARGET SOURCE                 FSTYPE OPTIONS
/home  /dev/mapper/VG_SC-home ext4   rw,relatime,errors<span style="color:#f92672">=</span>remount-ro,data<span style="color:#f92672">=</span>ordered
</code></pre></div><p>Or <code>lsblk</code> (also from <code>util-linux</code>, since 2.19):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsblk /dev/VG_SC/home
NAME       MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
VG_SC-home 254:2    <span style="color:#ae81ff">0</span>  200G  <span style="color:#ae81ff">0</span> lvm  /home
</code></pre></div><p>That one is also useful to find all the file system mounted under a specific device (disk or partition&hellip;):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsblk  /dev/sda2
NAME                    MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda2                      8:2    <span style="color:#ae81ff">0</span>  59.5G  <span style="color:#ae81ff">0</span> part
├─linux-debian64 <span style="color:#f92672">(</span>dm-1<span style="color:#f92672">)</span> 252:1    <span style="color:#ae81ff">0</span>    15G  <span style="color:#ae81ff">0</span> lvm
└─linux-mint <span style="color:#f92672">(</span>dm-2<span style="color:#f92672">)</span>     252:2    <span style="color:#ae81ff">0</span>    15G  <span style="color:#ae81ff">0</span> lvm  /
</code></pre></div><p>To get the mountpoint only:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ findmnt -nr -o target -S /dev/storage/home
/home
$ lsblk -o MOUNTPOINT -nr /dev/storage/home
/home
</code></pre></div><p>Above <code>findmnt</code> does return with a failure exit status if the device is not mounted, not <code>lsblk</code>.</p>
<p>So:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">if</span> mountpoint<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>findmnt -nr -o target -S <span style="color:#e6db74">&#34;</span>$device<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span>; <span style="color:#66d9ef">then</span>
  printf <span style="color:#e6db74">&#39;&#34;%s&#34; is mounted on &#34;%s&#34;\n&#39;</span> <span style="color:#e6db74">&#34;</span>$device<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span>$mountpoint<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">else</span>
  printf <span style="color:#e6db74">&#39;&#34;%s&#34; does not appear to be directly mounted\n&#39;</span> <span style="color:#e6db74">&#34;</span>$device<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><h3 id="mount-an-iso-imagefilehttpswwwcybercitibiztipshow-to-mount-iso-image-under-linuxhtml"><a href="https://www.cyberciti.biz/tips/how-to-mount-iso-image-under-linux.html">mount an ISO image/file</a><a hidden class="anchor" aria-hidden="true" href="#mount-an-iso-imagefilehttpswwwcybercitibiztipshow-to-mount-iso-image-under-linuxhtml">#</a></h3>
<ol>
<li>Create the mount point directory on Linux: <strong>sudo mkdir /mnt/iso</strong></li>
<li>Mount the ISO file on Linux: <strong>sudo mount -o loop /path/to/my-iso-image.iso /mnt/iso</strong></li>
<li>Verify it, run: <strong>mount</strong> OR <strong>df -H</strong> OR <strong>ls -l /mnt/iso/</strong></li>
<li>Unmount the ISO file using: <strong>sudo umount /mnt/iso/</strong></li>
</ol>
<h2 id="桌面环境相关">桌面环境相关<a hidden class="anchor" aria-hidden="true" href="#桌面环境相关">#</a></h2>
<h3 id="在中文介面下如何只用英文目錄名稱httpsaskfedoraprojectorgttopic11528"><a href="https://ask.fedoraproject.org/t/topic/11528">在中文介面下，如何只用英文目錄名稱？</a><a hidden class="anchor" aria-hidden="true" href="#在中文介面下如何只用英文目錄名稱httpsaskfedoraprojectorgttopic11528">#</a></h3>
<ul>
<li>
<p>方案一：先切到英文介面再重新開機，此時 Fedora 會問你要不要將子目錄換為英文名稱（選 Yes），再切回中文介面重新開機，Fedora 會再問你一次要不要更改子目錄為中文名稱（選 No），收工！</p>
</li>
<li>
<p>方案二：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ LANG<span style="color:#f92672">=</span>C xdg-user-dirs-gtk-update <span style="color:#75715e"># 同意更新</span>
$ xdg-user-dirs-gtk-update <span style="color:#75715e"># 保留且不再問</span>
</code></pre></div></li>
<li>
<p>方案三：手動修正配置文件<code>~/.config/user-dirs.dirs</code> ,然後在主目錄下創建對應目錄,重啟即可解決.</p>
</li>
</ul>
<h3 id="xdg_templates_dirhttpsaskubuntucomquestions94734what-is-the-templates-folder-in-the-home-directory-for"><a href="https://askubuntu.com/questions/94734/what-is-the-templates-folder-in-the-home-directory-for">XDG_TEMPLATES_DIR</a><a hidden class="anchor" aria-hidden="true" href="#xdg_templates_dirhttpsaskubuntucomquestions94734what-is-the-templates-folder-in-the-home-directory-for">#</a></h3>
<p>If you drop any files in &ldquo;Templates&rdquo; folder. Then when you right-click and create a new document, you can select any of these files as a basis for the new file.</p>
<p>If you have deleted the folder and need to restore this functionality:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gedit ~/.config/user-dirs.dirs
</code></pre></div><p>Check that there is a line containing the following - if not, add this line.</p>
<pre tabindex="0"><code>XDG_TEMPLATES_DIR=&quot;$HOME/Templates&quot;
</code></pre><h3 id="nmcheckgnomeorghttpsaskubuntucomquestions1070823some-suspicious-software-making-request-to-nmcheck-gnome-org"><a href="https://askubuntu.com/questions/1070823/some-suspicious-software-making-request-to-nmcheck-gnome-org">nmcheck.gnome.org</a><a hidden class="anchor" aria-hidden="true" href="#nmcheckgnomeorghttpsaskubuntucomquestions1070823some-suspicious-software-making-request-to-nmcheck-gnome-org">#</a></h3>
<p><a href="http://nmcheck.gnome.org/">nmcheck.gnome.org</a> is not malware. It is the gnome network manager connectivity check (for captive portals/hotspots). Click the link and you will see a single text file with a text in it. It should be &ldquo;NetworkManager is online&rdquo;.</p>
<p>Check <code>/etc/NetworkManager/NetworkManager.conf</code>. There probably is a section with this in it:</p>
<pre tabindex="0"><code>[Connectivity] 
uri=http://nmcheck.gnome.org/check_network_status.txt
</code></pre><p>on Ubuntu 20.04 no <code>[Connectivity] </code> line like accepted answer in <code>/etc/NetworkManager/NetworkManager.conf</code>.</p>
<p>But you can disable the auto connectivity check by:</p>
<ol>
<li>Go to <code>Settings</code> app</li>
<li>Go to <code>Privacy</code> menu</li>
<li>On <code>Connectivity</code> tab, uncheck <code>Connectivity Checking</code></li>
</ol>
<h3 id="automatic-light--dark-modehttpsaskubuntucomquestions1234742automatic-light-dark-mode"><a href="https://askubuntu.com/questions/1234742/automatic-light-dark-mode">Automatic Light / Dark Mode</a><a hidden class="anchor" aria-hidden="true" href="#automatic-light--dark-modehttpsaskubuntucomquestions1234742automatic-light-dark-mode">#</a></h3>
<p>for GNOME, this shell extension exists: <a href="https://extensions.gnome.org/extension/2236/night-theme-switcher/">Night Theme Switcher</a></p>
<h3 id="改善触摸板体验httpsplumzmearchives12343"><a href="https://plumz.me/archives/12343/">改善触摸板体验</a><a hidden class="anchor" aria-hidden="true" href="#改善触摸板体验httpsplumzmearchives12343">#</a></h3>
<p>众所周知，Macbook 的触摸板是体验最好的，很多果粉都吹 Macbook 的触摸板用了之后“就不再想要去用鼠标”。</p>
<p>有一群人搞了一个项目：「Linux Touchpad like Macbook Update」。顾名思义，就是“把 Linux 的触摸板搞的像 Macbook 一样”。</p>
<p>这个项目的主要作用就是针对现在 Linux 下对于触摸板管理的相关驱动进行一些修改和优化，以提升触摸的使用体验，尤其是包括“多点触摸”等等等。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:p12/xorg-gestures
$ sudo apt-get update
</code></pre></div><p>当然，尽管如此，我们也只是在驱动层面改善了触摸，在应用层面还需要另一个工具的帮忙：<a href="https://github.com/JoseExposito/touchegg">touchegg</a></p>
<p>安装完毕之后你的三指上滑和三指下滑都可以正常使用了，譬如三指上滑是窗口最大化，三指下滑是窗口最小化。</p>
<h3 id="preferring-chinese-fonts-to-japanese-oneshttpszhmailcom20190617ubuntu-18-04-prefer-chinese-fonts-to-japanese-ones"><a href="https://zhmail.com/2019/06/17/ubuntu-18-04-prefer-chinese-fonts-to-japanese-ones/">Preferring Chinese fonts to Japanese ones</a><a hidden class="anchor" aria-hidden="true" href="#preferring-chinese-fonts-to-japanese-oneshttpszhmailcom20190617ubuntu-18-04-prefer-chinese-fonts-to-japanese-ones">#</a></h3>
<ol>
<li>
<p>Copy the system configuration file /etc/fonts/conf.avail/64-language-selector-prefer.conf to the per-user font configuration folder.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir ~/.config/fontconfig/
$ cp /etc/fonts/conf.avail/64-language-selector-prefer.conf ~/.config/fontconfig/fonts.conf
</code></pre></div></li>
<li>
<p>Move SC and TC adn HK fonts in front of JP and KR ones in the aliases defined in <code>~/.config/fontconfig/fonts.conf</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE fontconfig SYSTEM &#34;fonts.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;fontconfig&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>sans-serif<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Ubuntu<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK SC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK TC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>serif<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK SC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK TC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>monospace<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Ubuntu Mono<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK SC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK TC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;/fontconfig&gt;</span>
</code></pre></div></li>
<li>
<p>Restart apps.</p>
</li>
</ol>
<h3 id="mac-os-x-fonts">Mac OS X Fonts<a hidden class="anchor" aria-hidden="true" href="#mac-os-x-fonts">#</a></h3>
<p>Older: <a href="https://en.m.wikipedia.org/wiki/Typography_of_Apple_Inc.#System_fonts"><strong>Typography of Apple Inc.</strong></a></p>
<p><a href="https://en.wikipedia.org/wiki/Monaco_(typeface)">Monaco</a>: With the August 2009 release of Mac OS X 10.6 &ldquo;Snow Leopard&rdquo;, <a href="https://en.wikipedia.org/wiki/Menlo_(typeface)">Menlo</a> was introduced as the default monospaced font instead of Monaco in Terminal and Xcode, However, Monaco remains a part of macOS. Monaco is the default font in the current Python IDLE when used on a Mac running OS X El Capitan.</p>
<p>OS X Mavericks (version 10.9): Lucida Grande</p>
<p>OS X Yosemite (version 10.10): Helvetica Neue</p>
<p>OS X El Capitan (version 10.11) : San Francisco</p>
<p>Now: <a href="https://developer.apple.com/fonts/"><strong>Fonts for Apple platforms</strong></a></p>
<ul>
<li>SF Pro: Is the system font for iOS, iPad OS, macOS and tvOS.</li>
<li>SF Compact: Is the system font for watchOS and includes a rounded variant.</li>
<li>SF Mono: Is used in coding environments like Xcode.</li>
<li>SF Arabic: Is the Arabic system font on Apple platforms.</li>
<li>New York: A companion to San Francisco, this serif typeface is based on essential aspects of historical type styles.</li>
</ul>
<p><a href="https://support.apple.com/guide/pages/format-chinese-japanese-or-korean-text-tanfbd4156e/mac"><strong>Format Chinese, Japanese, or Korean text in Pages on Mac</strong></a></p>
<p>For best results, use these recommended fonts:</p>
<ul>
<li><em>Simplified Chinese:</em> PingFang SC</li>
<li><em>Traditional Chinese for Taiwan:</em> PingFang TC</li>
<li><em>Traditional Chinese for Hong Kong and Macau:</em> PingFang HK</li>
<li><em>Korean:</em> Apple SD Gothic Neo</li>
<li><em>Japanese:</em> <a href="https://zh.wikipedia.org/zh-tw/Hiragino">Hiragino Sans (sans serif) or Hiragino Mincho (serif)</a></li>
</ul>
<p><a href="https://superuser.com/questions/407446/location-of-core-fonts-on-osx"><strong>Location of core fonts on OSX?</strong></a></p>
<p><strong>User</strong> <code>~/Library/Fonts/</code> Each user has complete control over the fonts installed in their Home. These fonts are available to that user when he or she is logged in to the computer. Fonts installed here are not available to all users of the computer.</p>
<p><strong>Local</strong> <code>/Library/Fonts/</code> Any local user of the computer can use fonts installed in this folder. Mac OS X does not require these additional fonts for system operation. An admin user can modify the contents of this folder. <strong>This is the recommended location for fonts that are shared among applications</strong>.</p>
<p><strong>Network</strong> <code>/Network/Library/Fonts/</code> The Network folder is for fonts shared among all users of a local area network. This feature is normally used on network file servers, under the control of a network administrator.</p>
<p><strong>System</strong> <code>/System/Library/Fonts/</code> Mac OS X requires fonts in this folder for system use and displays. <strong>They should not be manually altered or removed.</strong></p>
<p><strong>Classic</strong> <code>/System Folder/Fonts/</code> This folder contains fonts used by the Classic environment (Mac OS X v10.4 or earlier only). If more than one Mac OS 9.1 System Folder is present, only fonts in the System Folder selected in the Classic pane of System Preferences are used. Classic applications can access only these fonts, not those stored elsewhere. Conversely, Mac OS X applications can use these fonts, even when the Classic environment is not active.</p>
<p>直接通过 Mac OS X 的安装镜像找不到字体，在网络上也没有相关教程，只能通过 <a href="https://github.com/kholia/OSX-KVM">OSX-KVM</a> 安装一个虚拟机，之后尝试了多种宿主机和虚拟机数据交互方案，最终通过 sftp 成功下载所有字体：</p>
<ul>
<li>
<p>QEMU 端口转发：成功！ssh 万岁！</p>
<ul>
<li>
<p><a href="https://osxdaily.com/2022/07/08/turn-on-ssh-mac/">How to Turn On SSH on Mac</a></p>
</li>
<li>
<p><a href="https://superuser.com/questions/40281/how-do-i-get-an-entire-directory-in-sftp">How do I get an entire directory in sftp?</a>：</p>
<p>Use the <code>-r</code> (recursive) flag:</p>
<pre tabindex="0"><code>get -r *
</code></pre></li>
</ul>
</li>
<li>
<p>QEMU 的内置SMB服务器：<a href="https://ag.montana.edu/it/support/smb-macs.html">Connecting to SMB shares with Mac OS X</a>，Finder 连接后直接闪退。</p>
</li>
<li>
<p>挂载qcow2镜像内的分区：<a href="https://github.com/linux-apfs/linux-apfs-rw">linux-apfs-rw</a>，挂载的不知道是些什么东西，好像无法挂载 Data Volume。</p>
</li>
<li>
<p>宿主机的USB设备传递至虚拟机：<a href="https://github.com/foxlet/macOS-Simple-KVM/issues/128">Adding an USB device</a>，虚拟机毫无反应，根本看不到设备。</p>
</li>
</ul>
<p>不同版本的 Mac OS X 字体不一样，字体配置文件也不一样，参考<a href="https://www.zhihu.com/question/19862629/answer/14167340">如何修改 macOS 的系统默认中文字体</a> 使用 <a href="http://www.bresink.com/osx/TinkerTool.html">TinkerTool</a> 来查看与修改默认字体（也需要注意选择对应的版本）。</p>
<p><a href="https://superuser.com/questions/958266/how-to-extract-a-dmg-file-in-linux"><strong>How to extract a .dmg file in Linux?</strong></a></p>
<p>Just use <code>7z x</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ 7z x jdk-8u51-macosx-x64.dmg
$ cd JDK <span style="color:#ae81ff">8</span> Update 51/
$ 7z x JDK <span style="color:#ae81ff">8</span> Update 51.pkg
$ 7z x Payload~
</code></pre></div><p><a href="https://blog.jim-nielsen.com/2019/design-principles-applied-to-sf-fonts/"><strong>Design Principles Applied to the SF Fonts</strong></a></p>
<p>This presentation clarified the difference: SF Pro Display is designed to be used at sizes above 20pt, whereas SF Pro Text is designed to be used at sizes 19pt and below.</p>
<p><strong>Download</strong></p>
<ul>
<li>
<p><a href="https://fontshub.pro/">Fontshub</a></p>
<p>On FontsHub.pro, you can download fonts for free and use them on your site to design headlines, quotes, paragraphs, lists, or other text elements.</p>
</li>
<li>
<p><a href="https://github.com/paraself/PingFang-Fonts">PingFang SC</a></p>
</li>
<li>
<p><a href="https://github.com/perrychan1/fonts">fonts</a></p>
</li>
<li>
<p><a href="https://uiux.chat/d/63-windows-otf">苹果苹方字体完整版下载(Windows-otf版)</a></p>
</li>
</ul>
<p><strong>fonts.conf</strong></p>
<p>edit <code>.config/fontconfig/fonts.conf</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE fontconfig SYSTEM &#34;fonts.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;fontconfig&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>sans-serif<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>SF Pro<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang SC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang TC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>serif<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>New York<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang SC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang TC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>monospace<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>SF Mono<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang SC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang TC<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>PingFang HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;/fontconfig&gt;</span>
</code></pre></div><h3 id="windows-fontshttpsblogcsdnnetwpwalterarticledetails103760537"><a href="https://blog.csdn.net/WPwalter/article/details/103760537">Windows Fonts</a><a hidden class="anchor" aria-hidden="true" href="#windows-fontshttpsblogcsdnnetwpwalterarticledetails103760537">#</a></h3>
<p><a href="https://learn.microsoft.com/en-us/windows/win32/uxguide/vis-fonts"><strong>Fonts</strong></a></p>
<table>
<thead>
<tr>
<th>语言</th>
<th>字体</th>
</tr>
</thead>
<tbody>
<tr>
<td>英语（English）</td>
<td><a href="https://learn.microsoft.com/en-us/typography/font-list/segoe-ui">Segoe UI</a></td>
</tr>
<tr>
<td>简体中文（Chinese Simplified）</td>
<td><a href="https://learn.microsoft.com/en-us/typography/font-list/microsoft-yahei">Microsoft YaHei</a></td>
</tr>
<tr>
<td>繁体中文（Chinese Traditional）</td>
<td><a href="https://learn.microsoft.com/en-us/typography/font-list/microsoft-jhenghei">Microsoft JhengHei</a></td>
</tr>
<tr>
<td>日语（Japanese）</td>
<td>Meiryo</td>
</tr>
<tr>
<td>韩语（Korean）</td>
<td>Malgun Gothic</td>
</tr>
</tbody>
</table>
<p><a href="https://ianyepan.github.io/posts/system-default-monospace-fonts-pt1/"><strong>Default monospace font</strong></a></p>
<table>
<thead>
<tr>
<th>Operating system</th>
<th>Default monospace font</th>
</tr>
</thead>
<tbody>
<tr>
<td>Windows 10</td>
<td><a href="https://learn.microsoft.com/en-us/typography/font-list/consolas">Consolas</a></td>
</tr>
</tbody>
</table>
<p><a href="https://support.microsoft.com/en-us/office/add-a-font-b7c5f17c-4426-4b53-967f-455339c564c1"><strong>Add a font</strong></a></p>
<p>All fonts are stored in the <code>C:\Windows\Fonts</code> folder.</p>
<p><a href="https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=ttf-ms-win11-auto"><strong>从 iso 镜像中拷贝出所有字体</strong></a></p>
<ol>
<li>
<p>mount iso file</p>
</li>
<li>
<p>get all fonts</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ 7z e -aoa <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    sources/install.wim Windows/Fonts/<span style="color:#e6db74">&#34;*&#34;</span>.<span style="color:#f92672">{</span>ttf,ttc<span style="color:#f92672">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -o/home/kurome/Downloads/Microsoft/
</code></pre></div></li>
</ol>
<p><a href="https://unix.stackexchange.com/questions/26053/is-there-a-unix-command-line-tool-that-can-analyze-font-files"><strong>Is there a unix command line tool that can analyze font files?</strong></a></p>
<p>In Linux, if you have .ttf fonts, you most probably also have <a href="http://www.freedesktop.org/wiki/Software/fontconfig/">fontconfig</a>, which comes with the <code>fc-scan</code> utility. You can parse the output for the information you want, or use the badly documented <code>--format</code> option.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fc-scan --format <span style="color:#e6db74">&#34;%{foundry} : %{family}\n&#34;</span> /usr/share/fonts/truetype/msttcorefonts/arialbd.ttf
</code></pre></div><p><strong>font.conf</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE fontconfig SYSTEM &#34;fonts.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;fontconfig&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>sans-serif<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Segoe UI<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Microsoft YaHei<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>icrosoft JhengHei<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>serif<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Microsoft YaHei<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>icrosoft JhengHei<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Serif CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
    <span style="color:#f92672">&lt;alias&gt;</span>
        <span style="color:#f92672">&lt;family&gt;</span>monospace<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;prefer&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Consolas<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Microsoft YaHei<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>icrosoft JhengHei<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK HK<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK JP<span style="color:#f92672">&lt;/family&gt;</span>
            <span style="color:#f92672">&lt;family&gt;</span>Noto Sans Mono CJK KR<span style="color:#f92672">&lt;/family&gt;</span>
        <span style="color:#f92672">&lt;/prefer&gt;</span>
    <span style="color:#f92672">&lt;/alias&gt;</span>
<span style="color:#f92672">&lt;/fontconfig&gt;</span>
</code></pre></div><h3 id="fromubuntutokubuntuhttpshelpubuntucomcommunityfromubuntutokubuntu"><a href="https://help.ubuntu.com/community/FromUbuntuToKubuntu">FromUbuntuToKubuntu</a><a hidden class="anchor" aria-hidden="true" href="#fromubuntutokubuntuhttpshelpubuntucomcommunityfromubuntutokubuntu">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install kubuntu-desktop
</code></pre></div><p>类似的还有</p>
<ul>
<li>lubuntu-desktop</li>
<li>ubuntu-desktop</li>
<li>xubuntu-desktop</li>
</ul>
<h3 id="修改-user-agenthttpswwwcnblogscomliuguanglinpchange_user-agenthtml"><a href="https://www.cnblogs.com/liuguanglin/p/change_user-agent.html">修改 User-Agent</a><a hidden class="anchor" aria-hidden="true" href="#修改-user-agenthttpswwwcnblogscomliuguanglinpchange_user-agenthtml">#</a></h3>
<h4 id="chrome">Chrome<a hidden class="anchor" aria-hidden="true" href="#chrome">#</a></h4>
<ul>
<li>方法一：依次打开 <strong>开发者工具</strong> &gt; <strong>More tools</strong> &gt; <strong>Network conditions</strong>，在<strong>User agent</strong>中选择（已有多种范例可以选择）或自定义相应值。</li>
<li>方法二：添加启动参数 <strong>&ndash;user-agent=&ldquo;自定义的User-Agent值&rdquo;</strong>，可在命令行或快捷方式的“目标”框中使用。</li>
<li>方法三：使用<strong>User-Agent Switcher for Chrome</strong>之类的扩展程序。</li>
</ul>
<h4 id="firefox">Firefox<a hidden class="anchor" aria-hidden="true" href="#firefox">#</a></h4>
<ul>
<li>方法一：在地址栏输入<strong>about:config</strong>，回车后打开配置编辑器，输入<strong>general.useragent.override</strong>创建该首选项，数据类型为字符串，再输入自定义的User-Agent字符串。</li>
<li>方法二：使用<strong>User Agent Switcher and Manager</strong>之类的组件。</li>
</ul>
<h3 id="从-linux-终端发送桌面通知与提醒httpslinuxcnarticle-14826-1html"><a href="https://linux.cn/article-14826-1.html">从 Linux 终端发送桌面通知与提醒</a><a hidden class="anchor" aria-hidden="true" href="#从-linux-终端发送桌面通知与提醒httpslinuxcnarticle-14826-1html">#</a></h3>
<h4 id="从-linux-终端发送通知">从 Linux 终端发送通知<a hidden class="anchor" aria-hidden="true" href="#从-linux-终端发送通知">#</a></h4>
<p>要从 Linux 终端发送通知，请使用 <a href="https://manpages.ubuntu.com/manpages/xenial/man1/notify-send.1.html">notify-send</a> 命令。运行 <code>which notify-send</code> 命令来查看它是否在于你的系统中。如果没有，请使用包管理器来安装它。</p>
<p>在基于 Debian 的发行版上，输入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install notify-send
</code></pre></div><p>几个简单的通知示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ notify-send <span style="color:#e6db74">&#34;Dinner ready!&#34;</span>
$ notify-send <span style="color:#e6db74">&#34;Tip of the Day&#34;</span> <span style="color:#e6db74">&#34;How about a nap?&#34;</span>
</code></pre></div><p>你可以用紧急程度、自定义图标等选项来自定义通知。过 <code>man notify-send</code> 了解更多。你也可以在通知正文中使用一小组 HTML 标记，以使消息有一个棒的视觉感受。最重要的是，URL 被呈现为可点击的。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ notify-send -u critical <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;Build failed!&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;There were &lt;b&gt;123&lt;/b&gt; errors. Click here to see the results: http://buildserver/latest&#34;</span>
</code></pre></div><p>发送的通知会被桌面环境接收，并像其他通知一样显示。它们将具有相同的外观、交互和行为。</p>
<h4 id="将-notify-send-与-at-结合使用">将 notify-send 与 at 结合使用<a hidden class="anchor" aria-hidden="true" href="#将-notify-send-与-at-结合使用">#</a></h4>
<p>计划任务通常被用来定期安排命令。<code>at</code> 命令安排在一个指定的时间执行一条命令。如果你像这样运行它，它会以交互模式启动，你可以在其中输入要在指定时间执行的命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ at 12:00
</code></pre></div><p>这对脚本来说并不有用。幸运的是 <code>at</code> 接受来自标准输入的参数，所以我们可以这样使用它：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;npm run build&#34;</span> | at now + <span style="color:#ae81ff">1</span> minute
$ echo <span style="color:#e6db74">&#34;backup-db&#34;</span> | at 13:00
</code></pre></div><p>有许多指定时间的方法。 从绝对时间，如 <code>10:00</code>，到相对时间，如 <code>now + 2 hours</code> ，再特殊时间，如<code>noon</code> 或 <code>midnight</code>。我们可以把它和 <code>notify-send</code> 结合起来，在未来的某个时间向自己发送提醒。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;notify-send &#39;Stop it and go home now?&#39; &#39;Enough work for today.&#39; -u critical&#34;</span> | at now
</code></pre></div><h3 id="desktop-file">Desktop file<a hidden class="anchor" aria-hidden="true" href="#desktop-file">#</a></h3>
<h4 id="running-a-desktop-file-in-the-terminalhttpsaskubuntucoma385169"><a href="https://askubuntu.com/a/385169">Running a .desktop file in the terminal</a><a hidden class="anchor" aria-hidden="true" href="#running-a-desktop-file-in-the-terminalhttpsaskubuntucoma385169">#</a></h4>
<p>With any recent Ubuntu that supports <code>gtk-launch</code> just simply go</p>
<pre tabindex="0"><code>gtk-launch &lt;file&gt;
</code></pre><p>Where <code>&lt;file&gt;</code> is the name of the <code>.desktop</code> file with or without the <code>.desktop</code> part. The name must <strong>not</strong> include the full path.</p>
<p>So <code>gtk-launch foo</code> opens <code>/usr/share/applications/foo.desktop</code> (or <code>foo.desktop</code> located in one of the other permitted directories.)</p>
<h4 id="set-variable-in-desktop-filehttpsaskubuntucomquestions144968set-variable-in-desktop-file"><a href="https://askubuntu.com/questions/144968/set-variable-in-desktop-file">Set variable in .desktop file</a><a hidden class="anchor" aria-hidden="true" href="#set-variable-in-desktop-filehttpsaskubuntucomquestions144968set-variable-in-desktop-file">#</a></h4>
<p>Add the setting of the environment variable, via the <code>env</code> command, to the entry &ldquo;Exec&rdquo;:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">Exec</span><span style="color:#f92672">=</span><span style="color:#e6db74">env APPMENU_DISPLAY_BOTH=1 digikam -caption &#34;%c&#34; %i</span>
</code></pre></div><h4 id="how-to-validateverify-desktop-fileshttpsunixstackexchangecomquestions156892how-to-validate-verify-desktop-files"><a href="https://unix.stackexchange.com/questions/156892/how-to-validate-verify-desktop-files">How to validate/verify .desktop files?</a><a hidden class="anchor" aria-hidden="true" href="#how-to-validateverify-desktop-fileshttpsunixstackexchangecomquestions156892how-to-validate-verify-desktop-files">#</a></h4>
<p>You are looking for the <code>desktop-file-validate</code> tool provided by the <a href="https://www.freedesktop.org/wiki/Software/desktop-file-utils/">desktop-files-utils package</a> in your distribution. It check for syntax, using reserved words/characters, in summary, that it complies with the <a href="https://www.freedesktop.org/wiki/Specifications/desktop-entry-spec">Desktop Entry specification</a>. Here&rsquo;s a example of a bad .desktop file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ desktop-file-validate asdf.desktop 
asdf.desktop: error: value <span style="color:#e6db74">&#34;s.0.m.t.h.i.n.g&#34;</span> <span style="color:#66d9ef">for</span> key <span style="color:#e6db74">&#34;Version&#34;</span> in group <span style="color:#e6db74">&#34;Desktop Entry&#34;</span> is not a known version
</code></pre></div><p>Which in good files like <code>caribou-autostart.desktop</code> won&rsquo;t show anything.</p>
<h3 id="dash-to-dock">Dash to Dock<a hidden class="anchor" aria-hidden="true" href="#dash-to-dock">#</a></h3>
<p><a href="https://www.omgubuntu.co.uk/2019/11/hide-mounted-drives-ubuntu-dock#:~:text=You%20can%20access%20the%20same,toggle%20to%20the%20off%20position."><strong>Hide Mounted Drives on the Dock</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings set org.gnome.shell.extensions.dash-to-dock show-mounts false
</code></pre></div><p><a href="https://askubuntu.com/questions/1078859/how-do-you-disable-the-window-preview-in-ubuntu-dock-gnome-sidebar"><strong>How do you disable the window preview in Ubuntu dock (GNOME sidebar)?</strong></a></p>
<p>This will allow you to cycle through the open windows by clicking on the icon:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings set org.gnome.shell.extensions.dash-to-dock click-action <span style="color:#e6db74">&#39;cycle-windows&#39;</span>
</code></pre></div><p>To revert the action:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings reset org.gnome.shell.extensions.dash-to-dock click-action
</code></pre></div><p><a href="https://askubuntu.com/questions/790510/gsettings-or-dconf-value-list-for-a-key"><strong>gsettings or dconf value list for a key</strong></a></p>
<p>If it was a enumeration, you could</p>
<pre tabindex="0"><code>gsettings range ...
</code></pre><p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings range org.gnome.shell.extensions.dash-to-dock click-action 
enum
<span style="color:#e6db74">&#39;skip&#39;</span>
<span style="color:#e6db74">&#39;minimize&#39;</span>
<span style="color:#e6db74">&#39;launch&#39;</span>
<span style="color:#e6db74">&#39;cycle-windows&#39;</span>
<span style="color:#e6db74">&#39;minimize-or-overview&#39;</span>
<span style="color:#e6db74">&#39;previews&#39;</span>
<span style="color:#e6db74">&#39;minimize-or-previews&#39;</span>
<span style="color:#e6db74">&#39;focus-or-previews&#39;</span>
<span style="color:#e6db74">&#39;focus-minimize-or-previews&#39;</span>
<span style="color:#e6db74">&#39;quit&#39;</span>
</code></pre></div><h3 id="概览-linux-音频系统httpsszclsyamezh-cnpostslinuxaudio-system"><a href="https://szclsya.me/zh-cn/posts/linux/audio-system/">概览 Linux 音频系统</a><a hidden class="anchor" aria-hidden="true" href="#概览-linux-音频系统httpsszclsyamezh-cnpostslinuxaudio-system">#</a></h3>
<h4 id="论-linux-是如何将音乐文件转换成空气的震动">论 Linux 是如何将音乐文件转换成空气的震动<a hidden class="anchor" aria-hidden="true" href="#论-linux-是如何将音乐文件转换成空气的震动">#</a></h4>
<p>你很有可能从未仔细研究过 Linux 的音频系统. 在大多数情况下, 在装好图形界面后（或者像 ubuntu 或 openSUSE 这种装好就带桌面环境的发行版里），音频就“自然而然”地能用了。的确，对很多人来说，自带的音频设置已经够好了。</p>
<p>然而，隐藏在这“够好”下面的是一套颇为复杂的音频系统。如果你好奇心大发，想要了解 Linux 是怎么将你的音乐文件变成空气的震动的，抑或遇到了一点关于声音的问题，想要大概了解一下音频系统的构成以便定位问题来源，这里是一篇简短的介绍。</p>
<h4 id="俯瞰音频系统">俯瞰音频系统<a hidden class="anchor" aria-hidden="true" href="#俯瞰音频系统">#</a></h4>
<p>要让你的喇叭或者耳机动起来，我们需要经历以下的步骤：</p>
<p>首先，我们将音频文件 <code>解码</code> 成未压缩的音频流 (waveform)。现在，为了节省空间，大部分音频文件都是压缩过的，比如无损压缩格式 <code>flac</code>, <code>ape</code> 和有损压缩格式 <code>mp3</code>, <code>aac</code>, <code>ogg</code> 等。只有经过解码这个步骤，才能将这些音频文件变成声卡可以认识的音频流。</p>
<p>然后，我们将这些音频流输出到一个 <code>音频服务器</code> (sound server) 里。比如，如果你想一边看视频一边参加一个视频会议，你就需要使用一个音频服务器把这两个音频流混合到一起以便让声卡播放。</p>
<p>最终，我们将混制好的音频流送到 <code>声卡驱动</code> 那里。由于所有音轨已经被音频服务器汇成一条，驱动仅需将音频流发送给声卡做最终的数模转换即可。</p>
<h4 id="linux-下的具体实现">Linux 下的具体实现<a hidden class="anchor" aria-hidden="true" href="#linux-下的具体实现">#</a></h4>
<p>架构已经明晰，那么 Linux 下是哪些部件组成了这一架构的呢？</p>
<h5 id="alsa-声卡驱动">ALSA: 声卡驱动<a hidden class="anchor" aria-hidden="true" href="#alsa-声卡驱动">#</a></h5>
<p>为了保证音频被正确播放，发送和接收端需要确定比特率，采样深度等参数。</p>
<p>严格来说，ALSA 是一套完整的音频处理系统（毕竟它的全名是 <code>高级 Linux 音频架构</code> ）。但在现在的大多数使用情况下，我们只是将它作为一个声卡驱动用。这里主要介绍实际的使用场景。</p>
<p>ALSA 负责直接与声卡通讯。为了方便应用程序开发，ALSA 提供了一套与硬件无关的 API 以便程序能够轻松地设置输出参数并发送音频流。例如，是否使用声卡提供的硬件混音？还是使用软件混音器？如何调节各应用的响度？等等。</p>
<p>然而，直接使用 ALSA 有很多不方便。为了使 ALSA 能够同时播放多条音频，用户必须做一些设置 。因此，大部分现代的桌面环境使用音频服务器解决这类问题。</p>
<h5 id="pulseaudio-你或许正在用的音频服务器实现">PulseAudio: 你或许正在用的音频服务器实现<a hidden class="anchor" aria-hidden="true" href="#pulseaudio-你或许正在用的音频服务器实现">#</a></h5>
<p>如果你正在使用某种桌面环境的话，你大概已经用过位于托盘上面的音量控制控件。这通常就是控制 PulseAudio 服务器的一个前端。</p>
<p>为了将多个程序发来的音频流按照指定的音量混音并发往声卡驱动（通常是 ALSA），PulseAudio 拥有一个内置的混音器。PulseAudio 还提供了一套很适合用户界面的 API（例如各大桌面环境的音量控件）。</p>
<p>然而，由于 PulseAudio 主要针对没什么专业需求的 Linux 桌面用户，它使用一套检测系统来发现系统上可用的音频硬件，并自动决定应该如何配置这些硬件。然而，这些配置在很多情况下并不理想。更糟糕的是，为了省电或节省系统资源，内置的混音器往往不能提供最佳的质量，且会引入相当大的内部处理延迟。</p>
<p>简单得说，对于懒得操心细化的配置且并不需要多么高的音频质量的普通用户来说，PuseAudio 应该已经足够好了。</p>
<h5 id="jack-创造者与专业用户的音频服务器">JACK: 创造者与专业用户的音频服务器<a hidden class="anchor" aria-hidden="true" href="#jack-创造者与专业用户的音频服务器">#</a></h5>
<p>PulseAudio 也许对普通用户来说已经够好，那么对于专业用户呢？</p>
<p>答案是 JACK！从设计角度上来说，JACK 并不是用来当作通用的音频服务器使用的。它是一个 “音频连接工具”（正如它的名字，&ldquo;JACK Audio Connection Kit&rdquo; 所言）。在 JACK 的世界里面，每个音频节点（可能是个音频软件，也有可能是一个抽象硬件，比如一个 MIDI 键盘）都可以拥有多个输入源和输出源。举个例子，你可以将你的 MIDI 的键盘的 MIDI 输出连接到 FluidSynth （一个 MIDI 电子合成器）的输入源上，这样在 FluidSynth 的输出源上就会输出合成好的声音。然后将 FluidSynth 的输出源同时连接到一个录音软件（比如 Audacity）和主音频输出上。这样。你就可以一边监听你的演奏，一边将它们录制到音频文件当中去。</p>
<p>而且，由于 JACK 是被设计成用作专业音乐制作的，它内置的混音器的质量极佳。因此，有很多 JACK 用户并不用它制作音乐，而是把 JACK 当作一个质量更好且用起来更灵活的音频服务器使用。想让视频会议上的同事们听听你正在听的音乐？没问题！只要将音乐播放器的输出源接到视频会议软件的输入源上即可。</p>
<p>然而，JACK 没能统治 Linux 桌面是有原因的。相对于 PulseAudio 来说，JACK 需要配置一些参数（例如声卡的比特率，缓冲区大小等等）才能正常工作。如果参数不正确，最终的声音会出现莫名其妙的卡顿和损坏。在此之外，JACK 的灵活性有些时候反而是劣势，毕竟为了达成这种灵活性，JACK 有些情况下需要用户手动配置音频节点的连接方式。</p>
<h5 id="pipewire-新希望">PipeWire: 新希望<a hidden class="anchor" aria-hidden="true" href="#pipewire-新希望">#</a></h5>
<p>严格来说，PipeWire 不仅仅是一个音频服务器，不过它的音频服务器功能十分卓越。PipeWire 最早的设计用途是视频流处理系统，不过后来扩展为可以处理任意多媒体流（包括我们关心的音频流）。现在 Wayland 上分享桌面就是由 PipeWire 负责中介，实时视频压缩以及鉴权。相比于 PulseAudio，PipeWire 的 CPU 占用更低，混音器质量更好且处理延迟极低。对于桌面用户来说，PipeWire 对蓝牙音频设备的支持也更加可靠。对于专业用户来说，PipeWire 的音频内部处理延迟已经接近 JACK 了，足以支撑专业音频处理。</p>
<p>更棒的是，PipeWire 完全实现了 PulseAudio 的应用接口。因此，理论上你只需要装上 PipeWire（发行版的包管理器应该会自动卸载 PulseAudio 以防止冲突），所有的程序和控制面板应该都可以完美工作。目前为止（2022年2月，0.3 以上版本）PipeWire 应该已经很稳定了，但是 PipeWire 毕竟是很新的项目，可能还会有一些兼容性问题。</p>
<h4 id="我应该用什么">我应该用什么？<a hidden class="anchor" aria-hidden="true" href="#我应该用什么">#</a></h4>
<p>如果你一般只听听音乐什么的话，PulseAudio 应该足够好了。如果你遇到了任何音质上面的问题，很有可能只是因为 PulseAudio 没有使用最佳的配置选项，或者有可能是因为你的声卡的驱动有 bug。看一看 ArchWiki 上面的 <a href="https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Audio_quality">PulseAudio/Troubleshooting</a>，大多数问题应该很好解决。</p>
<p>如果你想做点音乐的话，JACK 值得一试。你需要一点配置（比如给 JACK 实时权限，找到适合你声卡的配置等等），但配好之后 JACK 的灵活性是无可匹敌的。</p>
<p>如果你觉得 PipeWire 解决了你的痛点的话，PipeWire 值得一试！PipeWire 已经在我的主力机上跑了一年多了，体感没有什么稳定性问题，而且蓝牙连接过程相对 PulseAudio 更可靠。</p>
<p>对于某些特殊情况，比如你只需要运行一个播放音频的软件且需要最小的延迟（a.k.a. 音游），那么你可以试着让应用程序直接使用 ALSA，毕竟这样的话音频将被直接发往声卡，省略了所有中间处理的步骤。或者也可以试试 JACK，毕竟在 JACK 里声音延迟是相对较小且可控的。</p>
<h4 id="download-a-single-folder--from-githubhttpsstackoverflowcoma1819452319750696"><a href="https://stackoverflow.com/a/18194523/19750696">Download a single folder  from GitHub</a><a hidden class="anchor" aria-hidden="true" href="#download-a-single-folder--from-githubhttpsstackoverflowcoma1819452319750696">#</a></h4>
<p><strong>Update Apr. 2021</strong>: there are a few tools created by the community that can do this for you:</p>
<ul>
<li>Download Directory(Credits to fregante)
<ul>
<li>It has also been <a href="https://github.com/sindresorhus/refined-github/pull/951">integrated</a> into the excellent <a href="https://github.com/sindresorhus/refined-github"><strong>Refined Github</strong></a> chrome extension as a button in the Github web UI.</li>
</ul>
</li>
<li><a href="http://kinolien.github.io/gitzip">GitZip</a> (Credits to <a href="https://stackoverflow.com/users/2238770/kino">Kino</a> - see his answer <a href="https://stackoverflow.com/questions/7106012/download-a-single-folder-or-directory-from-a-github-repo/33753575#33753575"><strong>here</strong></a>)</li>
<li><a href="https://downgit.github.io/">DownGit</a> (Credits to <a href="https://stackoverflow.com/users/4684058/minhas-kamal?tab=profile">Minhas Kamal</a> - see his answer <a href="https://stackoverflow.com/questions/7106012/download-a-single-folder-or-directory-from-a-github-repo/38879691#38879691"><strong>here</strong></a>)</li>
</ul>
<p>Note: if you&rsquo;re trying to download a large number of files, you may need to provide a token to these tools to avoid rate limiting.</p>
<p><strong>Original (manual) approach:</strong> Checking out an individual directory is not supported by <code>git</code> natively, but Github can do this via SVN. If you checkout your code with subversion, Github will essentially convert the repo from git to subversion on the backend, then serve up the requested directory.</p>
<p>Here&rsquo;s how you can use this feature to download a specific folder. I&rsquo;ll use the popular javascript library <code>lodash</code> as an example.</p>
<ol>
<li>
<p><strong>Navigate to the folder you want to download</strong>. Let&rsquo;s download <code>/test</code> from <code>master</code> branch.</p>
</li>
<li>
<p><strong>Modify the URL for subversion</strong>. Replace <code>tree/master</code> with <code>trunk</code>.</p>
<p><code>https://github.com/lodash/lodash/tree/master/test</code> ➜</p>
<p><code>https://github.com/lodash/lodash/trunk/test</code></p>
</li>
<li>
<p><strong>Download the folder</strong>. Go to the command line and grab the folder with SVN.</p>
<pre tabindex="0"><code>svn checkout https://github.com/lodash/lodash/trunk/test
</code></pre></li>
</ol>
<p>You might not see any activity immediately because Github takes up to 30 seconds to convert larger repositories, so be patient.</p>
<blockquote>
<p><em>Full URL format explanation:</em></p>
<ul>
<li>If you&rsquo;re interested in <code>master</code> branch, use <code>trunk</code> instead. So the full path is <code>trunk/foldername</code></li>
<li>If you&rsquo;re interested in <code>foo</code> branch, use <code>branches/foo</code> instead. The full path looks like <code>branches/foo/foldername</code></li>
<li>Protip: You can use <code>svn ls</code> to see available tags and branches before downloading if you wish</li>
</ul>
</blockquote>
<p>That&rsquo;s all! Github <a href="https://help.github.com/articles/support-for-subversion-clients/">supports more subversion features</a> as well, including support for committing and pushing changes.</p>
<p><a href="https://stackoverflow.com/a/44109535"><strong>use Github Contents API</strong></a></p>
<p>ou can use <a href="https://developer.github.com/v3/repos/contents/#get-archive-link">Github Contents API</a> to get an archive link and <code>tar</code> to retrieve a specified folder.</p>
<p>Command line:</p>
<pre tabindex="0"><code>curl https://codeload.github.com/[owner]/[repo]/tar.gz/master | tar -xz --strip=2 [repo]\-master/[folder_path]\
</code></pre><p>For example: if you want to download <a href="https://github.com/zeit/next.js/tree/master/examples/with-apollo">examples/with-apollo/</a> folder from <a href="https://github.com/zeit/next.js">zeit/next.js</a>, you can type this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl https://codeload.github.com/zeit/next.js/tar.gz/master | tar -xz --strip<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> next.js-master/examples/with-apollo
</code></pre></div><h3 id="locale-切換httpssamwhelpgithubionote-about-ubuntureadadjustmentenvlocalehtml"><a href="https://samwhelp.github.io/note-about-ubuntu/read/adjustment/env/locale.html">locale 切換</a><a hidden class="anchor" aria-hidden="true" href="#locale-切換httpssamwhelpgithubionote-about-ubuntureadadjustmentenvlocalehtml">#</a></h3>
<h4 id="參考文章">參考文章<a hidden class="anchor" aria-hidden="true" href="#參考文章">#</a></h4>
<ul>
<li>Ubuntu Community Help Wiki / <a href="https://help.ubuntu.com/community/Locale">Locale</a></li>
<li>Debian Wiki / <a href="https://wiki.debian.org/Locale">Locale</a></li>
</ul>
<h4 id="前提">前提<a hidden class="anchor" aria-hidden="true" href="#前提">#</a></h4>
<p>安裝完成後，一開始「/etc/default/locale」的內容如下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#  File generated by update-locale</span>
LANG<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_NUMERIC<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_TIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_MONETARY<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_PAPER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_ADDRESS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_TELEPHONE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_MEASUREMENT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
LC_IDENTIFICATION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US.UTF-8&#34;</span>
</code></pre></div><h4 id="locale-gen">locale-gen<a hidden class="anchor" aria-hidden="true" href="#locale-gen">#</a></h4>
<p>執行下面指令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo locale-gen en_US.UTF-8 zh_CN.UTF-8 zh_TW zh_TW.UTF-8 
Generating locales <span style="color:#f92672">(</span>this might take a <span style="color:#66d9ef">while</span><span style="color:#f92672">)</span>...
  en_US.UTF-8... <span style="color:#66d9ef">done</span>
  zh_CN.UTF-8... <span style="color:#66d9ef">done</span>
  zh_TW.BIG5... <span style="color:#66d9ef">done</span>
  zh_TW.UTF-8... <span style="color:#66d9ef">done</span>
Generation complete.
</code></pre></div><h5 id="切換成英文界面">切換成「英文界面」<a hidden class="anchor" aria-hidden="true" href="#切換成英文界面">#</a></h5>
<p>修改「/etc/default/locale」這個檔案，改成如下的內容</p>
<pre tabindex="0"><code>LANG=&quot;en_US.UTF-8&quot;
</code></pre><p>或是直接執行下面指令，修改「/etc/default/locale」這個檔案</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo sh -c <span style="color:#e6db74">&#39;echo &#34;LANG=\&#34;en_US.UTF-8\&#34;&#34; &gt; /etc/default/locale&#39;</span>
</code></pre></div><h5 id="切換成中文界面">切換成「中文界面」<a hidden class="anchor" aria-hidden="true" href="#切換成中文界面">#</a></h5>
<p>修改「/etc/default/locale」這個檔案，改成如下的內容</p>
<pre tabindex="0"><code>LANG=&quot;zh_TW.UTF-8&quot;
</code></pre><p>或是直接執行下面指令，修改「/etc/default/locale」這個檔案</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo sh -c <span style="color:#e6db74">&#39;echo &#34;LANG=\&#34;zh_TW.UTF-8\&#34;&#34; &gt; /etc/default/locale&#39;</span>
</code></pre></div><h5 id="其他方式">其他方式<a hidden class="anchor" aria-hidden="true" href="#其他方式">#</a></h5>
<p>或是也可以善用下面的指令來操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dpkg-reconfigure locales
</code></pre></div><h4 id="locales-of-sddmhttpsaskubuntucomquestions1040844wrong-language-displayed-by-sddm-on-login-kubuntu-18-04"><a href="https://askubuntu.com/questions/1040844/wrong-language-displayed-by-sddm-on-login-kubuntu-18-04">Locales of SDDM</a><a hidden class="anchor" aria-hidden="true" href="#locales-of-sddmhttpsaskubuntucomquestions1040844wrong-language-displayed-by-sddm-on-login-kubuntu-18-04">#</a></h4>
<p>在使用 KDE 的时候，在设置里将语言改为英文，会发现 SSDM 依旧是中文日期，原因是：The SDDM is following the system locales defined in <code>/etc/default/locale</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#f92672">- LC_TIME=&#34;zh_CN.UTF-8&#34;
</span><span style="color:#f92672"></span><span style="color:#a6e22e">+ LC_TIME=&#34;en_US.UTF-8&#34;
</span></code></pre></div><h3 id="uniform-look">Uniform look<a hidden class="anchor" aria-hidden="true" href="#uniform-look">#</a></h3>
<p>Qt 应用程序，在 Gnome 上的 Appearence 设置就对其无效。参考 <a href="https://wiki.archlinux.org/title/Uniform_look_for_Qt_and_GTK_applications">Uniform look for Qt and GTK applications</a> 进行设置</p>
<ul>
<li>
<p>方案一：安装并使用同时支持 QT 和 GTK 的主题。</p>
<ul>
<li>
<p>Breeze 主题：在 KDE 平台下使用 kde-config-gtk-style 设置 GTK 主题。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install breeze-gtk-theme kde-config-gtk-style
</code></pre></div><p>go to <em>System Settings &gt; Appearance &gt; Application Style  &gt; Configure GNOME/GTK Application Style…</em>.</p>
</li>
<li>
<p>Adwaita 主题：在 Gnome 平台下使用 QT_STYLE_OVERRIDE 环境变量或 qt5ct 工具</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install adwaita-qt -y
$ echo <span style="color:#e6db74">&#34;export QT_STYLE_OVERRIDE=adwaita-dark&#34;</span> &gt;&gt; ~/.profile
</code></pre></div></li>
</ul>
</li>
<li>
<p>方案二：使用 Kvantum。参考 <a href="https://fostips.com/qt5-apps-look-feel-ubuntu-fedora-linux/">How to Change Look and Feel of Qt5 Apps in Ubuntu, Debian, Fedora Linux</a> 来设置 QT 程序的黑暗模式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install qt5-style-kvantum qt5-style-kvantum-themes -y
$ echo <span style="color:#e6db74">&#34;export QT_STYLE_OVERRIDE=kvantum&#34;</span> &gt;&gt; ~/.profile
</code></pre></div></li>
</ul>
<h3 id="离线保存网页">离线保存网页<a hidden class="anchor" aria-hidden="true" href="#离线保存网页">#</a></h3>
<ul>
<li>pocket（可离线。要账号。有时会抓取错误）</li>
<li>keep（只有文字没有图）</li>
<li>evernote（选项多，但阅读，添加和管理无法脱机。要账号。不能保存豆丁、百度文档里面的内容）</li>
<li>打印为pdf（格式有变化，图片可能缺损。不能保存豆丁、百度文档里面的内容）</li>
<li>另存为html（有些网站，比如豆丁文档也可以完整保存，打印为pdf则不能。缺点是一个网页文件一个文件夹，看着难受。）</li>
</ul>
<p>接下来是我的解决方案：</p>
<p>chrome插件SingleFile：Single File和SingleFile Core，两个都要装。保存为网页htm格式，一个文件，可以保存豆丁文档，可以脱机。基本完美。安装插件后务必重启浏览器。</p>
<p>有一点要注意的：如果你查看的豆丁或百度文库有好多页，务必要让所有页都显示过一次，再使用single file，才能完全保存。否则脱机的时候只能看到你看过的页面。已测试。</p>
<p>Single File 把样式都内嵌了，图片也是Base64格式内嵌，还把坑爹的脚本都移除了，这样不会出现各种加载错误什么的。</p>
<p>缺点：无法云同步。</p>
<p>2016.7更新：刚刚发现在Chrome地址栏中输入<code>chrome://flags</code>，可以看到一些实验功能，其中包含了将网页保存为.mhtml格式开关，开启后重启Chrome，ctrl+s开启的保存窗口中就多出了一种保存为.mhtml的选项，也即将网页保存为单一文件。</p>
<p>2020年，更新，chrome已经把mhtml加入默认保存方式</p>
<h3 id="dynamic-workspaceshttpsgithubcomd86leaderdynamic_workspaces"><a href="https://github.com/d86leader/dynamic_workspaces">Dynamic Workspaces</a><a hidden class="anchor" aria-hidden="true" href="#dynamic-workspaceshttpsgithubcomd86leaderdynamic_workspaces">#</a></h3>
<p>A kwin script that creates and deletes desktops as you move windows on the last one.</p>
<p>用 JavaScript 写的，可以参考 <a href="https://develop.kde.org/docs/extend/plasma/kwin/">KWin Scripting Tutorial</a>，还有一个 <a href="https://develop.kde.org/docs/extend/plasma/scripting/">Plasma Desktop Scripting</a></p>
<h3 id="meta-super-and-hyper-keyshttpsaskubuntucomquestions19558what-are-the-meta-super-and-hyper-keys"><a href="https://askubuntu.com/questions/19558/what-are-the-meta-super-and-hyper-keys">meta, super, and hyper keys</a><a hidden class="anchor" aria-hidden="true" href="#meta-super-and-hyper-keyshttpsaskubuntucomquestions19558what-are-the-meta-super-and-hyper-keys">#</a></h3>
<ul>
<li>
<p><strong>Meta</strong></p>
<p>The Meta key is not found on modern keyboards. Its use is sometimes emulated with AltGr (on some international layouts) or the right Alt key on the others. In addition:</p>
<ul>
<li>Sun keyboards have a meta key (◆) as well</li>
<li><a href="http://en.wikipedia.org/wiki/Emacs">Emacs</a> calls Esc the Meta key</li>
</ul>
</li>
<li>
<p><strong>Super</strong></p>
<p>The Super key is equivalent to <img loading="lazy" src="https://i.imgur.com/AAjIi.png" alt="the Windows logo key"  />
 or the ⌘ (command) key. In Ubuntu, it&rsquo;s just another name for <img loading="lazy" src="https://i.imgur.com/AAjIi.png" alt="the Windows logo key"  />
.</p>
</li>
<li>
<p><strong>Hyper</strong></p>
<p>Hyper is the fourth (counting Ctrl) and last modifier on the Space cadet keyboard. In Ubuntu, its function is undefined (I <em>think</em>), but it can be mapped, as in the screen shot above, to <img loading="lazy" src="https://i.imgur.com/AAjIi.png" alt="the windows logo key"  />
, should it be needed.</p>
</li>
</ul>
<p>KDE 的 Super、Meta 是 Win 键</p>
<h2 id="终端相关">终端相关<a hidden class="anchor" aria-hidden="true" href="#终端相关">#</a></h2>
<h3 id="個人-bin-資料夾httpssamwhelpgithubionote-about-ubuntureadadjustmentenvbin-dirhtml"><a href="https://samwhelp.github.io/note-about-ubuntu/read/adjustment/env/bin-dir.html">個人 bin 資料夾</a><a hidden class="anchor" aria-hidden="true" href="#個人-bin-資料夾httpssamwhelpgithubionote-about-ubuntureadadjustmentenvbin-dirhtml">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/bin
$ mkdir -p ~/.local/bin/
</code></pre></div><p>在「~/.profile」這個檔案，有將這兩個路徑加入「PATH」。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat ~/.profile
<span style="color:#75715e"># ~/.profile: executed by the command interpreter for login shells.</span>
<span style="color:#75715e"># This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login</span>
<span style="color:#75715e"># exists.</span>
<span style="color:#75715e"># see /usr/share/doc/bash/examples/startup-files for examples.</span>
<span style="color:#75715e"># the files are located in the bash-doc package.</span>

<span style="color:#75715e"># the default umask is set in /etc/profile; for setting the umask</span>
<span style="color:#75715e"># for ssh logins, install and configure the libpam-umask package.</span>
<span style="color:#75715e">#umask 022</span>

<span style="color:#75715e"># if running bash</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$BASH_VERSION<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    <span style="color:#75715e"># include .bashrc if it exists</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.bashrc&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
	. <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.bashrc&#34;</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">fi</span>

<span style="color:#75715e"># set PATH so it includes user&#39;s private bin if it exists</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -d <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/bin&#34;</span> <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
    PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/bin:</span>$PATH<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">fi</span>

<span style="color:#75715e"># set PATH so it includes user&#39;s private bin if it exists</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -d <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.local/bin&#34;</span> <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span>
    PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.local/bin:</span>$PATH<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><h3 id="为什么执行自己的程序要在前面加httpszhuanlanzhihucomp85833766"><a href="https://zhuanlan.zhihu.com/p/85833766">为什么执行自己的程序要在前面加./</a><a hidden class="anchor" aria-hidden="true" href="#为什么执行自己的程序要在前面加httpszhuanlanzhihucomp85833766">#</a></h3>
<p>shell是如何运行程序的：如果不给出相对路径，或者绝对路径，那么它会经历下面的查找过程。</p>
<ul>
<li>alias中查找</li>
<li>内置命令中查找</li>
<li>PATH中查找</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /temp
$ ./ls_bak
</code></pre></div><p>等同于</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ /temp/ls_bak
</code></pre></div><p>shell通常可以执行两种程序，一种是二进制程序，一种是脚本程序。如果是文本程序，且开头没有指定解释程序，则按照shell脚本处理，如果指定了解释程序，则使用解释程序来解释运行；对于二进制程序，则直接创建新的进程即可。</p>
<h3 id="good-practice-to-avoid-using-sudo-suhttpsaskubuntucomquestions962021is-it-considered-good-practice-to-avoid-using-sudo-su"><a href="https://askubuntu.com/questions/962021/is-it-considered-good-practice-to-avoid-using-sudo-su">good practice to avoid using <code>sudo su</code></a><a hidden class="anchor" aria-hidden="true" href="#good-practice-to-avoid-using-sudo-suhttpsaskubuntucomquestions962021is-it-considered-good-practice-to-avoid-using-sudo-su">#</a></h3>
<p><strong>It is <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege">good practice</a> to avoid performing more actions as root than you need to.</strong> <code>sudo</code> facilitates this by allowing you to run individual commands as root <a href="https://askubuntu.com/a/617767/22949">without having to log in as root</a> and without <em>needing</em> an interactive root shell for tasks you would otherwise not run a shell to do. But <code>sudo su</code> is not a &ldquo;<a href="https://en.wikipedia.org/wiki/Backdoor_(computing)">backdoor</a>,&rdquo; it is simply a somewhat less elegant way to do what <code>sudo</code> is designed to allow you to do with <code>sudo -s</code>. <a href="https://www.sudo.ws/pipermail/sudo-users/2012-April/004960.html">Similarly</a>, <code>sudo -i</code> is the more elegant way to achieve what <code>sudo su -</code> would get you: a simulated <em>initial login shell</em> whose environment is like what you would get if you could log in as root on the command line. See <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html"><code>man sudo</code></a>.</p>
<h3 id="default-bashrchttpsgistgithubcommariobonales1637696"><a href="https://gist.github.com/marioBonales/1637696">Default .bashrc</a><a hidden class="anchor" aria-hidden="true" href="#default-bashrchttpsgistgithubcommariobonales1637696">#</a></h3>
<p>You don&rsquo;t need to trust this random gist on Github. Heck, it&rsquo;s ~10 years old. Don&rsquo;t you want the latest default - or the default that&rsquo;s specific to your version of Ubuntu?</p>
<p>You can find the &ldquo;skeleton&rdquo; file used to initialize new users in <code>ls -a /etc/skel</code>.</p>
<p>To copy someone else&rsquo;s comment: just run <code>cp /etc/skel/.bashrc ~/</code> to copy from that &ldquo;skeleton&rdquo; to your current bashrc.</p>
<h3 id="use-cp-to-exclude-a-specific-directoryhttpsstackoverflowcomquestions4585929how-to-use-cp-command-to-exclude-a-specific-directory1478940014789400"><a href="https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory/14789400#14789400">use &lsquo;cp&rsquo; to exclude a specific directory</a><a hidden class="anchor" aria-hidden="true" href="#use-cp-to-exclude-a-specific-directoryhttpsstackoverflowcomquestions4585929how-to-use-cp-command-to-exclude-a-specific-directory1478940014789400">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ shopt -s extglob
$ echo images/*
images/004.bmp images/033.jpg images/1276338351183.jpg images/2252.png
$ echo images/!<span style="color:#f92672">(</span>*.jpg<span style="color:#f92672">)</span>
images/004.bmp images/2252.png
</code></pre></div><h3 id="使用wget下载目录下所有文件httpswwwytyzxorgindexphpe4bdbfe794a8wgete4b88be8bdbde79baee5bd95e4b88be68980e69c89e69687e4bbb6"><a href="https://www.ytyzx.org/index.php/%E4%BD%BF%E7%94%A8wget%E4%B8%8B%E8%BD%BD%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6">使用wget下载目录下所有文件</a><a hidden class="anchor" aria-hidden="true" href="#使用wget下载目录下所有文件httpswwwytyzxorgindexphpe4bdbfe794a8wgete4b88be8bdbde79baee5bd95e4b88be68980e69c89e69687e4bbb6">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget http://your/website/folder/ -c -r -np -nd -k -L -p
</code></pre></div><p>根据需要增减参数：</p>
<ul>
<li>-c 断点续传</li>
<li>-r 递归下载指定网页目录下（包括子目录）的所有文件</li>
<li>-np 递归下载时不搜索上层目录，否则将下载路径的上一级目录下的其它文件</li>
<li>-nd 递归下载时不逐层创建目录，将所有的文件下载到当前目录</li>
<li>-k 将绝对链接转为相对链接，如需下载整个站点后脱机浏览网页则需加上此参数</li>
<li>-L 递归时不进入其它主机</li>
<li>-p 获得显示HTML页面所需的所有图片等。</li>
</ul>
<h3 id="在文件夹内进行的全文搜索httpsforumsuseorgcnttopic14557"><a href="https://forum.suse.org.cn/t/topic/14557">在文件夹内进行的全文搜索</a><a hidden class="anchor" aria-hidden="true" href="#在文件夹内进行的全文搜索httpsforumsuseorgcnttopic14557">#</a></h3>
<p>这里写了一个讲究小而美和工具之间组合的全文搜索的方法。</p>
<p>主要用 <a href="https://github.com/junegunn/fzf">fzf</a>，一个效率很高对每一行进行模糊搜索的工具。你可以给它喂一堆任意的字符串，然后从中搜索。</p>
<p>比如用 <a href="https://github.com/sharkdp/fd">fd</a> 喂给 fzf 所有目录，然后发送给 <code>cd</code> 来快速跳转目录</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install fzf fd-find
$ vim ~/.bashrc
fcd<span style="color:#f92672">(){</span>
    cd <span style="color:#66d9ef">$(</span>fd --type directory | fzf<span style="color:#66d9ef">)</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>如果我想跳转到位置比较深 <code>workbench-scheme</code> 下 <code>racket</code> 目录，只需要输入 很短的 <code>wor rac</code> 然后按回车就够了</p>
<hr>
<p>为了全文搜索，我们需要一个喂给 fzf 所有文件的文件名 + 行号 + 行内容的小脚本 <code>cat-all.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#!/usr/bin/env python3</span>
<span style="color:#f92672">import</span> os<span style="color:#f92672">,</span>sys<span style="color:#f92672">,</span> subprocess

IGNORE_DIRS<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;.git&#34;</span>,<span style="color:#e6db74">&#34;.vscode&#34;</span>,<span style="color:#e6db74">&#34;build&#34;</span>]
pwd<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getcwd()

<span style="color:#66d9ef">for</span>  (dirpath, dirnames, filenames) <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>walk(pwd):
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> any(ig <span style="color:#f92672">in</span> dirpath <span style="color:#66d9ef">for</span> ig <span style="color:#f92672">in</span> IGNORE_DIRS):
        <span style="color:#66d9ef">for</span> file <span style="color:#f92672">in</span> filenames:
            full_path<span style="color:#f92672">=</span>dirpath<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">+</span>file
            relative_path<span style="color:#f92672">=</span>full_path[len(pwd)<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>:]

            mimetype<span style="color:#f92672">=</span>subprocess<span style="color:#f92672">.</span>check_output([<span style="color:#e6db74">&#34;file&#34;</span>,<span style="color:#e6db74">&#34;--dereference&#34;</span>,<span style="color:#e6db74">&#34;--brief&#34;</span>, <span style="color:#e6db74">&#34;--mime-type&#34;</span>, full_path])<span style="color:#f92672">.</span>decode()
            
            <span style="color:#66d9ef">if</span>(mimetype<span style="color:#f92672">.</span>startswith(<span style="color:#e6db74">&#34;text&#34;</span>)):
                <span style="color:#66d9ef">try</span>:
                    <span style="color:#66d9ef">with</span> open(full_path,<span style="color:#e6db74">&#34;r&#34;</span>) <span style="color:#66d9ef">as</span> f:
                        <span style="color:#66d9ef">for</span> ln,line <span style="color:#f92672">in</span> enumerate(f,start<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>):
                            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> line<span style="color:#f92672">.</span>isspace():
                                print(relative_path,<span style="color:#e6db74">&#34;|&#34;</span>,ln,<span style="color:#e6db74">&#34;|&#34;</span>,line<span style="color:#f92672">.</span>strip())
                <span style="color:#66d9ef">except</span>:
                    print(<span style="color:#e6db74">&#34;[FAILED] &#34;</span>,full_path, file<span style="color:#f92672">=</span>sys<span style="color:#f92672">.</span>stderr) 
</code></pre></div><p>然后就可以这样寻找当前目录下以前写过的所有的 <code>hello, world</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat-all.py | fzf
</code></pre></div><p>和 <code>grep &quot;Hello, World&quot;</code> 区别在于一些 <code>hello_world</code>，“Hello to some World”， “World Hello” 之类的也会被匹配到</p>
<p>如果想按回车直接打开对应的文件，只要把 fzf 输出的内容用 awk 截取第一部分传给 xdg-open 就行了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat-all.py | fzf | awk <span style="color:#e6db74">&#39;{print $1}&#39;</span> | xargs xdg-open &amp;&gt; /dev/null
</code></pre></div><p>据测量在我的电脑上这样搜索 80 万 行 左右的文本需要大约 12 秒左右的时间来索引，且过程中 fzf 占用 ~130mb 的内存。</p>
<h3 id="convert-webp-to-jpegpnghttpsitsfosscomwebp-ubuntu-linux"><a href="https://itsfoss.com/webp-ubuntu-linux/">Convert WebP to JPEG/PNG</a><a hidden class="anchor" aria-hidden="true" href="#convert-webp-to-jpegpnghttpsitsfosscomwebp-ubuntu-linux">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install webp
$ cwebp -q <span style="color:#f92672">[</span>image_quality<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>JPEG/PNG_filename<span style="color:#f92672">]</span> -o <span style="color:#f92672">[</span>WebP_filename<span style="color:#f92672">]</span>
$ dwebp <span style="color:#f92672">[</span>WebP_filename<span style="color:#f92672">]</span> -o <span style="color:#f92672">[</span>PNG_filename<span style="color:#f92672">]</span>
</code></pre></div><p>例如</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls *webp | xargs -I image sh -c <span style="color:#e6db74">&#39;dwebp image -o image.png&#39;</span>
</code></pre></div><h3 id="preserve-file-permissions-while-copying-fileshttpswwwmakeuseofcompreserve-file-permissions-in-linux-while-copying-themtextpreserve20file20permissions20using20cptextyou20can20use20the202dpand20timestamps20of20the20filetexthowever2c20you20will20need20tokeeping20their20original20permissions20intact"><a href="https://www.makeuseof.com/preserve-file-permissions-in-linux-while-copying-them/#:~:text=Preserve%20File%20Permissions%20Using%20cp&amp;text=You%20can%20use%20the%20%2Dp,and%20timestamps%20of%20the%20file.&amp;text=However%2C%20you%20will%20need%20to,keeping%20their%20original%20permissions%20intact.">Preserve File Permissions While Copying Files</a><a hidden class="anchor" aria-hidden="true" href="#preserve-file-permissions-while-copying-fileshttpswwwmakeuseofcompreserve-file-permissions-in-linux-while-copying-themtextpreserve20file20permissions20using20cptextyou20can20use20the202dpand20timestamps20of20the20filetexthowever2c20you20will20need20tokeeping20their20original20permissions20intact">#</a></h3>
<p>You can use the <strong>-p</strong> option of cp to preserve the mode, ownership, and timestamps of the file.</p>
<h3 id="diff-echo-foo-echo-barhttpsstackoverflowcoma13437445"><a href="https://stackoverflow.com/a/13437445"><code>diff &lt;(echo &quot;$foo&quot;) &lt;(echo &quot;$bar&quot;)</code></a><a hidden class="anchor" aria-hidden="true" href="#diff-echo-foo-echo-barhttpsstackoverflowcoma13437445">#</a></h3>
<p>By searching the <a href="http://linux.die.net/man/1/bash">bash manpage</a> for the characters <code>&lt;(</code>, you can find that this is called “process substitution.”</p>
<p>You don&rsquo;t need to worry about the efficiency of creating a temporary file, because the temporary file is really just a pipe, not a file on disk. Try this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ echo &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span>
/dev/fd/63
</code></pre></div><p>This shows that the temporary file is really just the pipe “file descriptor 63.” Although it appears on the virtual <code>/dev</code> filesystem, the disk is never touched.</p>
<p>The actual efficiency issue that you might need to worry about here is the ‘process’ part of “process substitution.” Bash forks another process to perform the <code>echo foo</code>. On some platforms, like Cygwin, this can be very slow if performed frequently. However, on most modern platforms, <code>fork</code>ing is pretty fast. I just tried doing 1000 process substitutions at once by running the script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">echo &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span> &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span> ... <span style="color:#ae81ff">997</span> repetitions ... &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span>
</code></pre></div><p>It took 0.225s on my older Mac laptop, and 2.3 seconds in a Ubuntu virtual machine running on the same laptop. Dividing by the 1000 invocations, this shows that process substitutions takes less than 3 milliseconds—something totally dwarfed by the runtime of <code>diff</code>, and probably not anything you need to worry about!</p>
<h3 id="删除字符串空白符">删除字符串空白符<a hidden class="anchor" aria-hidden="true" href="#删除字符串空白符">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/bash
</span><span style="color:#75715e"></span>echo $1 | tr -d <span style="color:#f92672">[</span>:blank:<span style="color:#f92672">]</span>
</code></pre></div><h2 id="科普">科普<a hidden class="anchor" aria-hidden="true" href="#科普">#</a></h2>
<h3 id="x-和-wayland">X 和 Wayland<a hidden class="anchor" aria-hidden="true" href="#x-和-wayland">#</a></h3>
<h4 id="简介">简介<a hidden class="anchor" aria-hidden="true" href="#简介">#</a></h4>
<p>X即X11、X Window System，是用于在类UNIX的操作系统上的位图显示的窗口系统，提供了GUI环境的基本框架。X由X.Org Foundation维护，遵守MIT协议，当前参考实现为X.Org Server。在架构方面，X使用了C/S模型，客户端和服务器可以在同一个机器上，也可以在不同的机器上，X作为Server为应用程序这个Client提供显示和I/O服务。</p>
<p><img loading="lazy" src="/Distributions/XServer.png" alt=""  />
</p>
<p>Wayland是一个显示服务协议，服务端为Wayland Compositor，把X的X Server和Compositor合二为一，旨在替换X，作为类Unix操作系统上更现代、简介的窗口系统，遵守MIT协议，提供了Wayland Compositor的参考C语言实现Weston。</p>
<p><img loading="lazy" src="/Distributions/Wayland.png" alt=""  />
</p>
<p>时至今日，原本在X Server中做的事很多已被移到kernel或者单独的库中，因此X Server就显得比较累赘了。Wayland在架构上去掉了这个中间层，将compositor作为display server，使client与compositor直接通信，从而在灵活性和性能等方面上能够比前辈更加出色。</p>
<p>查看是否使用 wayland</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo $XDG_SESSION_TYPE
</code></pre></div><p>要切换就在登录界面选择 on wayland 好了。</p>
<h4 id="主要区别httpsshalynxonepostsdifference-between-x-and-wayland"><a href="https://sh.alynx.one/posts/Difference-between-X-and-Wayland/">主要区别</a><a hidden class="anchor" aria-hidden="true" href="#主要区别httpsshalynxonepostsdifference-between-x-and-wayland">#</a></h4>
<p>这一切都得从头说起。</p>
<p>X 协议设计于 1980 年代，那时候窗口界面刚刚起步，人们还没什么 3D 特效一类的想法，而且机能也不允许，放到今天任何一个有点桌面基础的人都能理解应该给每个窗口一个 buffer 然后把这些 buffer 里的 texture 贴出来的设计逻辑，但 <strong>那时候可没那么多内存让你给每个窗口一个 buffer</strong>。所以就如同各种常见的领域一样，有个小天才一拍脑子想，反正 <strong>最后显示到桌面上的都是一个屏幕大小</strong>，我们只要准备这么大一块内存就行了嘛！换句话说，每个窗口的 buffer 要去掉自己被覆盖住的内存，整体内存大小就是可控的，<strong>在内存里是直接没有被覆盖的部分的</strong>。</p>
<p>不得不说这位的思路在当时还是很有意义的，加上窗口大小都是矩形的假设，计算实际显示区域并不难，于是 Xserver 就是这样设计的。它维护一个屏幕大小的 buffer 自己计算窗口的实际位置，发生了变化（比如一个窗口盖住另一个），就给变化的窗口发一个重绘信号，这个窗口再发出绘图申请，<strong>直接绘制到 Xserver 的 buffer 里</strong>。由于 Xserver 知道所有窗口的位置，它就可以重定向鼠标键盘输入过去。然后具体的窗口移动缩放交给 window manager，它再把改过的位置回报给 Xserver。</p>
<p>一切事情都变得很美好，直到某天一个人提出一个问题：我想要半透明的终端！</p>
<p>程序员是不屑于解决提出问题的人的，如果用现代程序员的思维，做一下 alpha 混合其实很简单，只要 Xserver 能读取上层窗口的颜色和下层窗口的颜色就行了，可是你还记得当年的小天才吗？Xserver 说不太好意思，对于 <strong>一个像素我内存里只有一层，就是最上面显示的那个窗口</strong>……并且积习难改，我们不能改这个 feature……你想上下混合？死宅不要整天做梦，这是老祖宗留下来的不能改啊。</p>
<p>如果你用过没开启 混成 Compositing 的 XFCE 和半透明的 XFCE-Terminal，你会发现它是可以透出窗口下面的壁纸的，先别着急喊我骗子，你在终端下面放一个别的窗口试试？神奇的现象发生了，终端显示的还是壁纸……</p>
<p>上有政策下有对策嘛，一些终端作者想到反正壁纸总是固定的，我读取壁纸图片，取出终端所在的位置，然后在我窗口做个 alpha 混合不就行了？但是人不能自己骗自己啊，这是个客户端的假透明，我们要学习 GNOME 开发者的思维：不够好就砍掉。（大雾</p>
<p>X 一看不行啊，那我们改一下协议吧，加一个叫 混成器 compositor 的东西，如果你写了这个东西，X 就不是直接更新他自己的内存 buffer 了，而是交给混成器。混成器可以获取一系列窗口的内容，让它们都画到不同的 buffer 里面（内存终于够大了啊！），再把它们处理了丢到屏幕上去。Xserver 只是要求 compositor 最后返回一整个屏幕（通常是，也可以小一点）然后给这个直接贴到最上面去（可以简单理解为混成器画好一整张就行了，别的都不管了）。</p>
<p>理论上来说，混成器想怎么放这些窗口就怎么放这些窗口，就算想把他们丢到屏幕外边都行，反正你最后返回一个图就行了，Xserver 也不管是不是涩图。</p>
<p>但是有个尴尬的事情，输出给你管了，输入你管不着啊！之前说了 Xserver 自己按照自己存的窗口位置分配输入，你把窗口挪走了，Xserver 可还是按照自己记录的窗口位置分配输入的，如果你想自己处理窗口位置分配输入，好嘛，Xserver 里面的代码你再复制到你混成器里一份吧！</p>
<p>所以实际上 compositor 里面怎么做的呢？我最后处理完的窗口，位置和 Xserver 记录的位置还得一样，然后 Xserver 给我那个返回整张屏幕的顶层窗口，我就不接收输入了，这样直接透过顶层点到下面，就和窗口位置对应了（什么乱七八糟的破玩意啊！）。如果你要做个动画呢？你做动画的时候，Xserver 那边记录的位置可不跟你变（要是变，按照 X 的设计你这数据得跑好几个来回），你的鼠标点击在这时候是不准的，传不到窗口里面。</p>
<p>这些 compositor 都是各个桌面环境做的，他们一般都集成到自己的 window manager 里了。</p>
<p>而且随着时间发展，越来越多的 Xserver 和 client 是跑在同一个机器上的，很多 client 想自己利用显卡处理图形，就有人在协议上打洞，Xserver 做的越来越少了，更多的事情 client 自己都做了。</p>
<p>你还想再往 X 协议上糊一层吗？别糊了兄弟，你这也太挫了！一开始 X 的设计是提供机制而非策略，Xserver 自己是符合了（然后除了 Xorg 其他实现都死了），和 Xserver 配合的可是被他绑的死死的比如 compositor，性能翻了几倍还得拉着这些历史垃圾跑，Xserver 终于活成了自己最讨厌的样子。</p>
<p>Wayland 做的事情很简单，反正 compositor 都做这么多了，那直接把 Xserver 的功能也丢给 compositor 吧！Compositor 下层接的是 DRM 控制渲染，libinput 控制输入，GBM/EGLStreams 控制内存管理，上层更简单了，每个窗口丢给我一个 texture，我负责安排你们这些 texture 放在哪里，然后我按照我安排的位置，告诉你们鼠标进谁窗口了键盘进谁窗口了。然后因为要把这些 texture 混合到屏幕上，一般都用 OpenGL 的硬件加速，但在 Linux 下创建 OpenGL Context 的 GLX 库是和 X 绑定的，所以一般大家都用 OpenGL ES Context 的库 EGL。这个库只干扰最后合成图片时候的事情，至于你的 texture 用的是 OpenGL 还是 OpenGL ES 还是 CPU 画的都没有关系，现在 Wayland 一概不管了，你自己客户端处理自己的内容吧，我又不是 Xserver！</p>
<p>所以对于 GNOME 和 KDE 等等而言，现在他们打交道的一个是内核一个是窗口，而不是以前一样和 Xserver 打交道了，省了数据交换，同时自己可以自由控制窗口输入输出面积。Xorg 应该被淘汰不是因为功能性原因，而是因为它的设计在当时很聪明，但现在只是历史包袱，实在太挫了。</p>
<p>看完这篇文章建议回去阅读《<a href="https://farseerfc.me/compositor-in-X-and-compositext.html">X 中的混成器與 Composite 擴展</a>》和《<a href="https://magcius.github.io/xplain/article/">Explanations</a>》，可以了解更多的实现细节，现在再看就不会那么混乱了。</p>
<h4 id="others-1">Others<a hidden class="anchor" aria-hidden="true" href="#others-1">#</a></h4>
<p><a href="https://wiki.archlinux.org/title/wayland#Nvidia_driver"><strong>Nvidia driver</strong></a></p>
<p>Enabling DRM KMS is required.</p>
<p><a href="https://wiki.archlinux.org/title/GNOME#Night_Light"><strong>Gnome Night Light</strong></a></p>
<p><strong>Note:</strong> Currently, Night Light doesn&rsquo;t work on NVIDIA cards in Wayland sessions.</p>
<p>解决办法就是不使用 Nvidia 闭源驱动或不使用 Wayland。</p>
<p><a href="https://wiki.archlinux.org/title/Cursor_themes#GNOME"><strong>Gnome cursor</strong></a></p>
<p><strong>Note:</strong> By default, on Wayland, Gnome applications should be unable to display your cursor themes located in <code>~/.local/share/icons</code>. As a workaround, you can <a href="https://wiki.archlinux.org/title/Cursor_themes#Environment_variable">add that path to XCURSOR_PATH</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings list-recursively  org.gnome.desktop.interface  | grep cursor <span style="color:#75715e"># get default cursor settings</span>
$ vi .bash_profile
<span style="color:#75715e"># Setting cursor on wayland</span>
export XCURSOR_PATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>XCURSOR_PATH<span style="color:#e6db74">}</span>:/usr/share/icons:~/.local/share/icons
export XCURSOR_THEME<span style="color:#f92672">=</span>Yaru
export XCURSOR_SIZE<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>
<span style="color:#75715e"># Add local bin</span>
export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PATH<span style="color:#e6db74">}</span>:~/.local/bin
</code></pre></div><p><a href="https://blog.lilydjwg.me/2021/11/12/display-tearing.215968.html"><strong>不同情况下的图形效果</strong></a></p>
<p>然后对比一下<a href="https://webglsamples.org/aquarium/aquarium.html">水族馆</a>的图形性能数据：</p>
<ul>
<li>X11 + Intel 显卡，30fps 左右。</li>
<li>Wayland + Intel 显卡：接近 60fps。</li>
</ul>
<p>其实 WebGL 用得不多啦（Google 地图更常卡在网络 I/O 上而不是渲染上）。更多的是播放在线（YouTube）视频啦。</p>
<ul>
<li>X11 + Intel 显卡，1080p 60fps，GPU 用满，丢帧三分之一！4k 60fps 也差不多。原来重点不是分辨率（反正 GPU 的解码能力还没用满），重点是视频的帧率啊。</li>
<li>Wayland + Intel 显卡，4k 60fps 都不怎么丢帧，更不说其它了。GPU 图形计算用到一半左右。</li>
</ul>
<p><a href="https://wiki.archlinux.org/title/Input_remap_utilities"><strong>Disable Caps Lock Key</strong></a></p>
<p>Wayland&rsquo;s security model prevents programs other than the compositor from grabbing raw keyboard input. Some compositors support remapping keys (for example, mutter through gnome-tweaks), but many do not.</p>
<ul>
<li>Open <code>gnome-tweaks</code></li>
<li>Click on the <strong>Keyboard &amp; Mouse</strong> &gt; <strong>Additional Layout Option</strong></li>
<li>Set up <strong>Caps Lock behaviour</strong> as per your needs.</li>
</ul>
<p><a href="https://wiki.archlinux.org/title/Wayland#Qt"><strong>Qt application with the Wayland</strong></a></p>
<p>Telegram 使用 gnome wayland 表现不好，毕竟是用Qt开发的，比如cursor变大，图标没有了，输入法不跟随了。</p>
<p>因此：To force the usage of X11 on a Wayland session, use <code>QT_QPA_PLATFORM=xcb</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">Exec</span><span style="color:#f92672">=</span><span style="color:#e6db74">env QT_QPA_PLATFORM=xcb /home/kurome/.opt/telegram/Telegram -workdir /home/kurome/.local/share/TelegramDesktop/ -- %u</span>
</code></pre></div><p>这样就不需要设置XCURSOR环境变量了。</p>
<h3 id="ltshttpsaskubuntucomquestions16366whats-the-difference-between-a-long-term-support-release-and-a-normal-release"><a href="https://askubuntu.com/questions/16366/whats-the-difference-between-a-long-term-support-release-and-a-normal-release">LTS</a><a hidden class="anchor" aria-hidden="true" href="#ltshttpsaskubuntucomquestions16366whats-the-difference-between-a-long-term-support-release-and-a-normal-release">#</a></h3>
<p>There is a new release every 6 months (in April and October), with the version number being <em>year.month</em> (e.g.: 16.04 was released in April 2016). Every two years, the April release is a Long Term Support version.</p>
<p><strong>LTS releases</strong> are the ‘enterprise grade’ releases of Ubuntu and are used the most. An estimated <strong>95%</strong> of all Ubuntu installations are LTS releases.</p>
<p><strong>Interim releases</strong> (normal releases) will introduce new capabilities from Canonical and upstream open source projects, they serve as a proving ground for these new capabilities.</p>
<ul>
<li>All Interim releases (13.04 and later) are only supported for <strong>9 months</strong>.</li>
<li>All LTS releases (12.04 and later) are supported for five years (now is <strong>ten years</strong>) on both the desktop and the server.</li>
</ul>
<p>Now, support means:</p>
<ul>
<li>Updates for potential security problems and bugs (not new versions of software)</li>
<li>Availability of Commercial support contracts from Canonical</li>
<li>Support by Landscape, Canonical&rsquo;s enterprise oriented server management tool set</li>
</ul>
<p>Ubuntu releases additional versions of the last LTS between releases—such as <strong>14.04.1</strong>, that incorporate all of the updates up to this point. This is called a Point-Release (or sometimes <em>snapshot</em>). Those are released every quarter to half year, as needed.</p>
<p>The most important thing (for most people) is how long you get to use an install without having to do a release upgrade. A non-LTS version of Ubuntu only gets updates for 9 months from its release so to stay up-to-date —which is critically important— you need to upgrade twice a year; you need to upgrade through every Ubuntu version…</p>
<p>Conversely an Ubuntu LTS release is supported for 5 years and you can upgrade directly from LTS to LTS. This gives you long-lived, solid base to target and test on that makes it super-easy to release-upgrade when you decide to. It&rsquo;s therefore ideal for mass deployment, high-availability systems, and just people who don&rsquo;t like doing release-upgrades.</p>
<h3 id="软件的稳定性httpswwwzhihucomquestion301581684answer547761587"><a href="https://www.zhihu.com/question/301581684/answer/547761587">软件的稳定性</a><a hidden class="anchor" aria-hidden="true" href="#软件的稳定性httpswwwzhihucomquestion301581684answer547761587">#</a></h3>
<p>软件的稳定性其实往往来源于：足够多的使用者与足够多的反馈跟改进。</p>
<p>Linux系统，在服务器端的大多数常用软件都有足够多的使用者，所以就足够稳定，由于它在服务器端市场占有率远高于微软，所以服务器端就是比微软稳定，很正常的事。</p>
<p>在桌面端，市场占用率远低于微软，不稳定也是自然的。</p>
<p>为什么Linux下命令行程序往往又好用又稳定？是因为用户喜欢装逼吗？不是，因为命令行程序是服务器端跟桌面端通用的，而服务器端程序经过了足够多用户的使用，经过了足够的反馈开发迭代，所以稳定。而图形界面只有桌面用户用，桌面占有率那么低，这些程序往往缺乏足够的测试人力也缺乏足够的开发维护人力，所以并不会非常稳定。</p>
<p>那么，你要想体验Linux稳定，怎么办？答案就是只使用市场占有率高，用户量大，因而获得了充分测试的软件，这就稳定了。比方说只使用服务器端。或者桌面端只使用最常用的那些，例如终端仿真器，浏览器，输入法，gcc编译器之类，肯定是稳定的。</p>
<p>你看我就用浏览器，输入法，xterm，screen，编程ide，vim，以及一堆命令行的东西，稳定得很啊，六个月才重启一次电脑，重启的那一次还是因为ubuntu升级。</p>
<h3 id="how-to-download-a-large-file-faster-from-google-drivehttpsyantraascomdownload-large-file-faster-from-google-drive"><a href="https://yantraas.com/download-large-file-faster-from-google-drive/">How To Download A Large File Faster From Google Drive?</a><a hidden class="anchor" aria-hidden="true" href="#how-to-download-a-large-file-faster-from-google-drivehttpsyantraascomdownload-large-file-faster-from-google-drive">#</a></h3>
<p><strong>Step 1: Fetching Your File ID</strong></p>
<ul>
<li>Open your browser and <a href="https://drive.google.com/">go to your google drive</a>, open login with the account that has the file you wish to download.</li>
<li>Locate the file that you wish to download and select it.</li>
<li>Right click the file and click on “get shareable link”</li>
<li>You don’t need to copy the entire link here; you only need the file ID that we will be using later.</li>
</ul>
<p>The link will look like this: <strong><a href="https://drive.google.com/file/d/XXXXX/view?usp=sharing">https://drive.google.com/file/d/XXXXX/view?usp=sharing</a></strong></p>
<p>In this link, you only need to pay attention to the <strong>alphanumeric file ID</strong>, displayed by XXXXX here.</p>
<p><strong>Step 2: Getting an OAuth Code</strong></p>
<ol>
<li>Visit <a href="https://developers.google.com/oauthplayground/">OAuth 2.0 Playground by clicking here</a>.</li>
<li>On the developer’s webpage, in the “<strong>Select &amp; authorize APIs</strong>” click on the “<strong>Drive API v3</strong>” option, and select the: <strong><a href="https://www.googleapis.com/auth/drive.readonly">https://www.googleapis.com/auth/drive.readonly</a></strong> option from the available options.</li>
<li>Once selected click <strong>Authorize APIs</strong> button on the bottom right corner of the tab.</li>
<li>After you click on the Authorize APIs button you will be transferred to the google account login screen.</li>
<li>Select the same google account in which you have your file stored.</li>
<li>Allow Google OAuth 2.0 to access your drive if asked.</li>
<li>When you get redirected back to the OAuth 2.0 playground screen click on the “<strong>Exchange Authorization Code for Tokens</strong>” button as shown.</li>
<li>Copy the newly generated <strong>Access Token</strong> and save it on your notepad. You will be needing this in the next step.</li>
</ol>
<p><strong>Step 3: Downloading The File Using A Command Line Script</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -H <span style="color:#e6db74">&#34;Authorization: Bearer YYYYY&#34;</span> https://www.googleapis.com/drive/v3/files/XXXXX?alt<span style="color:#f92672">=</span>media -o ZZZZZ 
</code></pre></div><p>In your command, replace “XXXXX” with the file ID from above, “YYYYY” with the access token from above, and “ZZZZZ” with the file name that will be saved (for example, “myFile.mp4” if you’re downloading an mp4 file).</p>
<p>Press Enter and let the download begin.</p>
<h3 id="usb插槽鬆動怎麼辦httpswwwyoutubecomwatchvwud4i6gzcpk"><a href="https://www.youtube.com/watch?v=WUd4I6GZcpk">USB插槽鬆動怎麼辦</a><a hidden class="anchor" aria-hidden="true" href="#usb插槽鬆動怎麼辦httpswwwyoutubecomwatchvwud4i6gzcpk">#</a></h3>
<ol>
<li>手机</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031094951544.png" alt="image-20211031094951544"  />
</p>
<ol start="2">
<li>充电宝</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031095019000.png" alt="image-20211031095019000"  />
</p>
<ol start="3">
<li>笔记本</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031095137351.png" alt="image-20211031095137351"  />
</p>
<ol start="4">
<li>笔记本</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031095211881.png" alt="image-20211031095211881"  />
</p>
<h3 id="如何将google搜索限制为特定语言的结果httpsqastackcnwebapps16047how-to-restrict-a-google-search-to-results-of-a-specific-language"><a href="https://qastack.cn/webapps/16047/how-to-restrict-a-google-search-to-results-of-a-specific-language">如何将Google搜索限制为特定语言的结果</a><a hidden class="anchor" aria-hidden="true" href="#如何将google搜索限制为特定语言的结果httpsqastackcnwebapps16047how-to-restrict-a-google-search-to-results-of-a-specific-language">#</a></h3>
<p>只是想在Google搜索中添加有关语言参数的更全面的答案。</p>
<p>有4种与语言相关的选项。</p>
<p><strong>Web界面语言： <code>hl=</code></strong></p>
<p>例： <code>www.google.com/search?q=vilnius&amp;hl=lt</code></p>
<pre tabindex="0"><code>Web Interface Language Codes

hl=zh-CN       Chinese (Simplified)
hl=zh-TW       Chinese (Traditional)
hl=en          English
hl=ja          Japanese
</code></pre><p><strong>指定语言的页面： <code>lr=lang_</code></strong></p>
<p>例： <code>www.google.com/search?q=vilnius&amp;lr=lang_lt</code></p>
<pre tabindex="0"><code>Search Language Codes

lr=lang_zh-CN Chinese (Simplified)
lr=lang_zh-TW Chinese (Traditional)
lr=lang_en    English
lr=lang_ja    Japanese
</code></pre><p><strong>来自指定国家/地区的页面： <code>cr=country</code></strong></p>
<p>示例：<code>www.google.com/search?q=vilnius&amp;cr=countryLT</code>
<strong>请注意</strong>，两个国家/地区代码字符必须大写！否则，Google会忽略该参数（自2017年1月3日起）（即使小写字母对于<code>hl=</code>和都适用<code>lr=lang_</code>）。</p>
<p>还有另一个参数&ndash; <code>gl=</code>用于搜索结果，因为它们将显示在指定的国家/地区。我尝试对其进行测试，但对我而言，不同参数值的结果没有不同。浏览器或我的Google帐户的某些其他参数/设置可能已过时或覆盖了该设置。</p>
<h3 id="hwehttpswikiubuntucomkernelltsenablementstack"><a href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack">HWE</a><a hidden class="anchor" aria-hidden="true" href="#hwehttpswikiubuntucomkernelltsenablementstack">#</a></h3>
<p>The Ubuntu LTS enablement (also called HWE or Hardware Enablement) stacks provide newer kernel and X support for existing Ubuntu LTS releases.</p>
<p>The 20.04 LTS HWE Stacks continue to follow <a href="https://ubuntu.com/about/release-cycle#ubuntu-kernel-release-cycle">Rolling Update Model</a>, as has been in use since 16.04 LTS.</p>
<h3 id="how-does-ubuntu-make-moneyhttpsaskubuntucomquestions21730how-does-ubuntu-make-money"><a href="https://askubuntu.com/questions/21730/how-does-ubuntu-make-money">How does Ubuntu make money?</a><a hidden class="anchor" aria-hidden="true" href="#how-does-ubuntu-make-moneyhttpsaskubuntucomquestions21730how-does-ubuntu-make-money">#</a></h3>
<p>Firstly a lot of people work on Ubuntu in their free time (many of them programming, but also those of here for instance answering people&rsquo;s questions). Also some people <a href="http://www.ubuntu.com/community/get-involved/donate">donate to Ubuntu</a>.</p>
<p>However there is more to the story. <a href="http://en.wikipedia.org/wiki/Canonical_Ltd">Canonical Ltd</a>. is a private company that created and continues to pay for Ubuntu. We know Canonical hadn&rsquo;t been making a profit, but Canonical was initially founded by multi-millionaire <a href="http://en.wikipedia.org/wiki/Mark_Shuttleworth">Mark Shuttleworth</a> which meant it didn&rsquo;t have to focus on making money right away.</p>
<p>However Canonical is now looking towards to making Ubuntu profitable. (After all, they have 600+ employees to pay every month!) There are <a href="http://www.nytimes.com/2009/01/11/business/11ubuntu.html?pagewanted=3&amp;_r=2">some indications</a> this has been successful. Their key revenue streams offer services around Ubuntu:</p>
<ul>
<li>Support services (mostly to business) alongside which they sell <a href="https://landscape.canonical.com/">Landscape</a></li>
<li>Contracting services to businesses (for instance working with OEMs such as Dell, or <a href="http://blog.canonical.com/?p=294">helping Google with Chrome OS</a>). As Ubuntu makes its way onto mobile phones and TVs then this will grow.</li>
<li>Ubuntu Software Centre&rsquo;s paid section (Canonical takes a cut of purchases)</li>
<li>The <a href="http://shop.canonical.com/">Canonical Store</a> (selling physical Ubuntu branded items) - discontinued</li>
<li>Closed-source projects wishing to use Launchpad.net <a href="https://answers.edge.launchpad.net/launchpad/+faq/208">can purchase a license</a></li>
<li><a href="https://one.ubuntu.com/">Ubuntu One</a> (online file storage and synchronization service) and Music Store (selling music from within Ubuntu) - discontinued.</li>
<li>Amazon referrals. When you search the Ubuntu Dash, you may see Amazon products (unless you have turned it off). Ubuntu takes a cut of these.[<a href="https://arstechnica.com/information-technology/2012/09/ubuntu-bakes-amazon-search-results-into-os-to-raise-cash/">ref]</a></li>
</ul>
<p>All of these are areas that Canonical hopes will grow.</p>
<h3 id="认证硬件httpswwwzhihucomquestion286150644"><a href="https://www.zhihu.com/question/286150644">认证硬件</a><a hidden class="anchor" aria-hidden="true" href="#认证硬件httpswwwzhihucomquestion286150644">#</a></h3>
<ul>
<li><a href="https://ubuntu.com/certified">Ubuntu certified hardware</a></li>
<li><a href="https://catalog.redhat.com/hardware">Red Hat certified hardware</a></li>
</ul>
<p>如果不怎么玩游戏的话，建议是直接考虑那些不带独立显卡的笔记本电脑。因为在Linux下双显卡装驱动问题很多。</p>
<p>说到牌子的话，建议是考虑戴尔笔记本。因为戴尔台式机和笔记本，都是尽可能地去兼容Ubuntu来设计的。这个不是说假话做广告。我也就这个问题，看过了几乎所有戴尔系列产品的技术文档了。基本上都是在支持的操作系统列表中，无一例外地包含了Ubuntu。如果是想买能完美使用Ubuntu的本子，戴尔是首选。戴尔绝大部分笔记本机型都能很好完美兼容Ubuntu。</p>
<p>还有一个重要原因就是，ubuntu的所属公司，与戴尔公司是有合作的。也正因为如此，Ubuntu默认就包含了dell的大部分硬件通用驱动，甚至硬件底层管理模块都囊括其中。</p>
<h3 id="png-jpg-or-jpeghttpsrepairitwondersharecomphoto-repairpng-jpg-jpeghtml"><a href="https://repairit.wondershare.com/photo-repair/png-jpg-jpeg.html">PNG, JPG, or JPEG</a><a hidden class="anchor" aria-hidden="true" href="#png-jpg-or-jpeghttpsrepairitwondersharecomphoto-repairpng-jpg-jpeghtml">#</a></h3>
<p>Ideally, both JPG and JPEG are the same formats and there is no difference between these image extensions.  JPEG was shortened to JPG to make it compatible with Windows.</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>PNG</strong></th>
<th><strong>JPEG/JPG</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>What is it?</td>
<td>It stands for Portable Network Graphics and is a raster-based graphics format.</td>
<td>It stands Joint Photographic Experts Group and is popular format for images.</td>
</tr>
<tr>
<td>Compression Algorithm</td>
<td>Lossless compression</td>
<td>Lossy compression</td>
</tr>
<tr>
<td>Transparency</td>
<td>Image transparency is maintained</td>
<td>image transparency is not maintained</td>
</tr>
<tr>
<td>Image Size</td>
<td>Bigger</td>
<td>Smaller</td>
</tr>
<tr>
<td>Image Quality</td>
<td>Better</td>
<td>Inferior</td>
</tr>
<tr>
<td>Available colors</td>
<td>16 million</td>
<td>16 million</td>
</tr>
<tr>
<td>Common Extensions</td>
<td>PNG</td>
<td>JPEG or JPG</td>
</tr>
<tr>
<td>Best for</td>
<td>Editing, scaling, and web content</td>
<td>Storage, editing, image processing, and posting</td>
</tr>
</tbody>
</table>
<h3 id="12-colors-that-go-with-blackhttpswwwthesprucecomcolors-that-go-with-black-4796586"><a href="https://www.thespruce.com/colors-that-go-with-black-4796586">12 Colors That Go With Black</a><a hidden class="anchor" aria-hidden="true" href="#12-colors-that-go-with-blackhttpswwwthesprucecomcolors-that-go-with-black-4796586">#</a></h3>
<p>![](/Distributions/black with green.png)</p>
<h3 id="在线用的-linuxhttpssegmentfaultcoma1190000020776272"><a href="https://segmentfault.com/a/1190000020776272">在线用的 Linux</a><a hidden class="anchor" aria-hidden="true" href="#在线用的-linuxhttpssegmentfaultcoma1190000020776272">#</a></h3>
<ol>
<li><a href="https://www.masswerk.at/jsuix/index.html">JS/UIX - Terminal</a>: 进入后，点击open terminal即可。它提供非常简单的终端环境，而且没有自带gcc等编译套件，不过练习基本命令和shell脚本还是可以的。整体使用起来也比较流畅。</li>
<li><a href="https://copy.sh/v86/">copy.sh</a>：它可以全屏体验，让你感觉就是在一台真的Linux上玩耍，同时还支持多种发行版，想体验不同系统的可以试试。</li>
<li><a href="https://www.lanqiao.cn/courses/1">实验楼</a>：选择 Linux 课程，点击进入课程并打开默认在线环境，就可以开始使用一个完整的在线 Linux 环境（Ubuntu），几乎和本地安装的 Linux 系统没差！</li>
<li><a href="https://www.tutorialspoint.com/unix_terminal_online.php">Unix Terminal Online</a>：这个网站也支持代码的编译运行，而且速度还可以。</li>
<li><a href="https://bellard.org/jslinux/">jsLinux</a>：它提供多种系统选择，你也可以在上面编译运行代码。不过整体感觉不是很流畅。</li>
<li><a href="https://www.jdoodle.com/test-bash-shell-script-online/">Bash Shell</a>：专门用来练习 Shell 编程的好地方。</li>
<li><a href="https://paiza.io/en/projects/new?language=bash">paiza</a>：同上，可以用来学习shell脚本。</li>
<li><a href="https://www.shellcheck.net/">ShellCheck</a>：如同它的名字，这是一个用来检查你的脚本是否存在问题的工具。</li>
</ol>
<h3 id="全局菜单https64mborg20220405linux-desktop-global-menu"><a href="https://64mb.org/2022/04/05/linux-desktop-global-menu/">全局菜单</a><a hidden class="anchor" aria-hidden="true" href="#全局菜单https64mborg20220405linux-desktop-global-menu">#</a></h3>
<p>🗓️ 2022/04/05</p>
<p>ayatana 是 Canonical 发起的一个 Linux 端桌面统一体验的项目，规定了桌面托盘、通知消息、全局菜单等功能的实现，Unity 桌面也是这个项目的一部分，在2017年的时候 Canonical 宣布转向使用 Gnome，而 Unity 桌面环境将停止开发。虽然 Unity桌面环境停止开发，但是部分使用 DBus 通讯的接口却保留了下来。</p>
<p>Gnome 是大多数发行版官方默认的桌面的环境，但是原版不安装插件用起来的却是各种难受，包括缺少任务栏/系统托盘，非常占用空间的标题栏。早期使用插件<code>Gnome-Global-AppMenu</code>实现全局菜单，这个仅限于Gtk2/Gtk3，到了Gtk4不支持加载外置模块，导致Gtk4开发的软件的作者除非手动兼容，不然没有全局菜单。所以<code>Gnome-Global-AppMenu</code> 的开发者<a href="https://gitlab.com/lestcape/Gnome-Global-AppMenu/-/issues/116">宣布停止开发</a>这个插件。另外一个是<a href="https://github.com/gonzaarcr/Fildem">Fildem</a>，目前还在积极的维护。xfce/mate/budgie 桌面环境使用<a href="https://gitlab.com/vala-panel-project/vala-panel-appmenu">vala-panel-appmenu</a>，效果未知。KDE 从 5.9 版本开始，官方提供了支持，到了现在非常的稳定，属于开箱即用。</p>
<p>Unity 之所以有全局菜单是因为 Canonical 这公司针对常见的软件包做了修改，将本来在软件内展示的菜单，展示在状态栏上面，这种操作只是一种代码外挂，并不是软件本身主动调用很接口生成菜单，有时候还会出现软件本身菜单和全局菜单同时展示的情况。常见的 UI库 GTK2/GTK3/QT都通过这种方式获得了支持，部分软件比如Firefox则采用官方定制版本才能支持全局菜单，总之实现方面并不是很完美。</p>
<p>全局菜单实现需要两个部分组成，一个是桌面环境(具体点是状态条)提供一个窗口菜单注册接口，并且检测运行软件运行情况，绘制菜单项目等功能。软件端则是侦测桌面环境是否支持全局菜单，侦测到支持全局菜单，就需要注册一个会话，并且将全局菜单发送到接口。后续内容将全局菜单展示的组件称为服务端，运行的软件作为客户端，服务端到客户端的通讯方式用的是 dbus。</p>
<h2 id="android-相关">Android 相关<a hidden class="anchor" aria-hidden="true" href="#android-相关">#</a></h2>
<h3 id="transfer-files-between-linux-and-androidhttpsmashtipscomtransfer-images-android-linuxtext120connect20your20android20smartphone20and20your20linuxselectede2809d20or20e2809cimport20alle2809d20if20you20want20"><a href="https://mashtips.com/transfer-images-android-linux/#:~:text=1%20Connect%20your%20Android%20smartphone%20and%20your%20Linux,Selected%E2%80%9D%20or%20%E2%80%9CImport%20All%E2%80%9D%20if%20you%20want%20">Transfer files between Linux and Android</a><a hidden class="anchor" aria-hidden="true" href="#transfer-files-between-linux-and-androidhttpsmashtipscomtransfer-images-android-linuxtext120connect20your20android20smartphone20and20your20linuxselectede2809d20or20e2809cimport20alle2809d20if20you20want20">#</a></h3>
<ul>
<li>Connect Using USB Cable</li>
<li>Apps
<ul>
<li><a href="https://www.howtogeek.com/423442/how-to-wirelessly-transfer-android-files-to-a-linux-desktop/">KDE Connect/GSConnect</a></li>
<li><a href="https://www.omgubuntu.co.uk/2017/11/android-file-transfer-app-linux">Android File Transfer</a></li>
<li><a href="https://help.airdroid.com/hc/en-us/articles/360035143073-How-to-transfer-files-between-Linux-and-Android-">AirDroid</a></li>
</ul>
</li>
<li>Bluetooth</li>
</ul>
<h3 id="two-options-to-recover-your-pc-with-androidhttpswwwmakeuseofcomtagrecover-pc-using-android"><a href="https://www.makeuseof.com/tag/recover-pc-using-android/">Two Options to Recover Your PC With Android</a><a hidden class="anchor" aria-hidden="true" href="#two-options-to-recover-your-pc-with-androidhttpswwwmakeuseofcomtagrecover-pc-using-android">#</a></h3>
<p>If your PC is out of action, you can install a new operating system or run a recovery environment thanks to Android. Two solid options are available:</p>
<ul>
<li><a href="https://play.google.com/store/apps/details?id=com.mixapplications.iso2usb&amp;hl=zh&amp;gl=US">ISO 2 USB</a>: Lets you burn an ISO file directly to a USB flash drive over USB-OTG.</li>
<li><a href="https://play.google.com/store/apps/details?id=com.softwarebakery.drivedroid&amp;hl=zh&amp;gl=US">DriveDroid</a>: Enables you to store bootable ISO files on Android. With the paid version, support for Windows 10 installation images is added.</li>
</ul>
<h3 id="avif">AVIF<a hidden class="anchor" aria-hidden="true" href="#avif">#</a></h3>
<ul>
<li><a href="https://fc.bnext.com.tw/articles/view/1224">Android 12 將支援「AVIF」影像格式！它能取代 JPEG 成為新一代主流標準嗎？</a></li>
<li><a href="https://www.zhangxinxu.com/wordpress/2020/04/avif-image-format/?shrink=1">AVIF图片格式简介</a></li>
</ul>
<h2 id="系统相关">系统相关<a hidden class="anchor" aria-hidden="true" href="#系统相关">#</a></h2>
<h3 id="irqbalancehttpswikiarchlinuxorgtitleimproving_performanceirqbalance"><a href="https://wiki.archlinux.org/title/Improving_performance#irqbalance">Irqbalance</a><a hidden class="anchor" aria-hidden="true" href="#irqbalancehttpswikiarchlinuxorgtitleimproving_performanceirqbalance">#</a></h3>
<p><a href="https://askubuntu.com/a/1231135">BTW</a>: I&rsquo;m pretty sure there are many cases where irqbalance could be very useful for server&rsquo;s tasks but not for Desktop usage and, especially, for laptop desktop users.</p>
<p>Linux is very servers oriented and any linux distros want to distribute several versions of kernels. So we all have to running a huge amount useless things for servers hardware, software, protocols and ms azure stacks etc and including irqbalance.</p>
<p>If you don&rsquo;t see 100% loading on CPU0 during your work-flow, you don&rsquo;t need to use irqbalance at all. Also the modern kernel is managing it itself depending on cpu0 loading.</p>
<p>Seems that linux &gt; 4.9 is able to do irqbalance without an external daemon</p>
<p>Even debian, ubuntu now disable it by default</p>
<p><a href="https://bugs.launchpad.net/ubuntu/+source/ubuntu-meta/+bug/1833322">https://bugs.launchpad.net/ubuntu/+source/ubuntu-meta/+bug/1833322</a></p>
<h3 id="block-internet-access-to-certain-programshttpsserverfaultcomquestions550276how-to-block-internet-access-to-certain-programs-on-linux"><a href="https://serverfault.com/questions/550276/how-to-block-internet-access-to-certain-programs-on-linux">Block internet access to certain programs</a><a hidden class="anchor" aria-hidden="true" href="#block-internet-access-to-certain-programshttpsserverfaultcomquestions550276how-to-block-internet-access-to-certain-programs-on-linux">#</a></h3>
<p>The solution for me happened to be straight forward.</p>
<ol>
<li>
<p>Create, validate new group; add required users to this group:</p>
<ul>
<li>
<p>Create: <code>groupadd no-internet</code></p>
</li>
<li>
<p>Validate: <code>grep no-internet /etc/group</code></p>
</li>
<li>
<p>Add user: <code>useradd -g no-internet username</code></p>
<p><em>Note: If you&rsquo;re modifying already existing user you should run: <code>usermod -a -G no-internet userName</code> check with : <code>sudo groups userName</code></em></p>
</li>
</ul>
</li>
<li>
<p>Create a <em>script</em> in your path and make it executable:</p>
<ul>
<li>
<p>Create: <code>nano /home/username/.local/bin/no-internet</code></p>
</li>
<li>
<p>Executable: <code>chmod 755 /home/username/.local/bin/no-internet</code></p>
</li>
<li>
<p>Content:</p>
<pre tabindex="0"><code>#!/bin/bash
sg no-internet &quot;$@&quot;
</code></pre></li>
</ul>
</li>
<li>
<p>Add <em>iptables rule</em> for dropping network activity for group <em>no-internet</em>:</p>
<ul>
<li>
<p><code>iptables -I OUTPUT 1 -m owner --gid-owner no-internet -j DROP</code></p>
<p><em>Note: Don&rsquo;t forget to make the changes permanent, so it would be <a href="https://unix.stackexchange.com/questions/38019/execute-a-script-as-root-at-boot-on-fedora-15-16">applied automatically after reboot</a>. Doing it, depends on your Linux distribution.</em></p>
</li>
</ul>
</li>
<li>
<p>Check it, for example on Firefox by running: <code>no-internet &quot;firefox&quot;</code></p>
</li>
</ol>
<p>In case you would want to make an exception and allow a program to access <em>local network</em>:</p>
<ul>
<li><code>iptables -A OUTPUT -m owner --gid-owner no-internet -d 192.168.1.0/24 -j ACCEPT</code></li>
<li><code>iptables -A OUTPUT -m owner --gid-owner no-internet -d 127.0.0.0/8 -j ACCEPT</code></li>
<li><code>iptables -A OUTPUT -m owner --gid-owner no-internet -j DROP</code></li>
</ul>
<p><em>NOTE:</em> In case of spawning the rules will be maintained. For example, if you run a program with <em>no-internet</em> rule and that program will open browser window, still the rules will be applied.</p>
<h3 id="通过linux系统进入-bios">通过Linux系统进入 BIOS<a hidden class="anchor" aria-hidden="true" href="#通过linux系统进入-bios">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl reboot --firmware-setup
</code></pre></div><h3 id="5-ways-to-check-cpu-info-in-linuxhttpslinuxhandbookcomcheck-cpu-info-linux"><a href="https://linuxhandbook.com/check-cpu-info-linux/">5 Ways to Check CPU Info in Linux</a><a hidden class="anchor" aria-hidden="true" href="#5-ways-to-check-cpu-info-in-linuxhttpslinuxhandbookcomcheck-cpu-info-linux">#</a></h3>
<ul>
<li>lscpu</li>
<li>/proc/cpuinfo</li>
<li>lshw</li>
<li>hwinfo</li>
<li>dmidecodes</li>
<li>hardinfo: gui</li>
</ul>
<h3 id="logging-in-as-root-in-ubuntu-with-live-cd">Logging in as Root in Ubuntu with Live CD<a hidden class="anchor" aria-hidden="true" href="#logging-in-as-root-in-ubuntu-with-live-cd">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo passwd root
</code></pre></div><h3 id="keychainhttpswwwcybercitibizfaqubuntu-debian-linux-server-install-keychain-apt-get-command"><a href="https://www.cyberciti.biz/faq/ubuntu-debian-linux-server-install-keychain-apt-get-command/">Keychain</a><a hidden class="anchor" aria-hidden="true" href="#keychainhttpswwwcybercitibizfaqubuntu-debian-linux-server-install-keychain-apt-get-command">#</a></h3>
<p><a href="https://wiki.gentoo.org/wiki/Keychain#Squeezing_the_last_drop_of_convenience_out_of_ssh-agent">Squeezing the last drop of convenience out of ssh-agent</a>: Keychain will allow to reuse an <strong>ssh-agent</strong> between logins, and optionally prompt for passphrases each time the user logs in.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install keychain
$ vi ~/.bashrc
. ~/.keychain/<span style="color:#e6db74">${</span>HOSTNAME<span style="color:#e6db74">}</span>-sh
$ keychain ~/.ssh/id_rsa
</code></pre></div><h3 id="regenerate-initramfshttpsaskubuntucomquestions1351911what-does-regenerate-your-initramfs-mean"><a href="https://askubuntu.com/questions/1351911/what-does-regenerate-your-initramfs-mean">Regenerate initramfs</a><a hidden class="anchor" aria-hidden="true" href="#regenerate-initramfshttpsaskubuntucomquestions1351911what-does-regenerate-your-initramfs-mean">#</a></h3>
<p>To create/recreate/update the initramfs file means to update the <code>initrd.img-*</code> ramdisk files in <code>/boot</code>.</p>
<p><strong>Note</strong>: I prefer to create a totally fresh version by using the <code>-c</code> option, instead of just updating the existing file by using the <code>-u</code> option.</p>
<p>The proper command would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo update-initramfs -c -k <span style="color:#66d9ef">$(</span>uname -r<span style="color:#66d9ef">)</span>
</code></pre></div><p>This will create a fresh initrd.img-* file for your currently booted version of Ubuntu.</p>
<p>However, if you can&rsquo;t boot to the current version of Ubuntu, you may have to modify this command, and by booting to an older version of Ubuntu, you can do it this way:</p>
<p><code>sudo update-initramfs -c -k 5.11.0-22-generic</code> where the 5.11.0-22-generic part should be replaced with the version of the desired boot kernel.</p>
<p>To get more detailed information, type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man update-initramfs
</code></pre></div><h3 id="reset-lost-root-passwordhttpswikiarchlinuxorgtitlereset_lost_root_password_e7ae80e4bd93e4b8ade69687"><a href="https://wiki.archlinux.org/title/Reset_lost_root_password_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Reset lost root password</a><a hidden class="anchor" aria-hidden="true" href="#reset-lost-root-passwordhttpswikiarchlinuxorgtitlereset_lost_root_password_e7ae80e4bd93e4b8ade69687">#</a></h3>
<p><strong>警告：</strong> 攻击者都可以使用上述方法修改系统，要保证系统安全，请限制物理上的访问，或者使用全<a href="https://wiki.archlinux.org/title/Data-at-rest_encryption">磁盘加密</a>。</p>
<h4 id="使用-livecd">使用 LiveCD<a hidden class="anchor" aria-hidden="true" href="#使用-livecd">#</a></h4>
<p>通过 LiveCD 可以使用好几种方法：chroot并且使用<code>passwd</code>命令或者擦除密码域条目。任何Linux的LiveCD都可以使用，chroot时它必须匹配已经安装的架构类型。这里仅介绍 chroot 方式，因为这个方法更不容易出错。</p>
<ol>
<li>
<p>启动LiveCD，挂载根文件系统.</p>
</li>
<li>
<p>然后通过下列命令重置密码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ passwd --root MOUNT_POINT USER_NAME
</code></pre></div></li>
<li>
<p>卸载根文件系统。</p>
</li>
<li>
<p>重启，记下你的密码。</p>
</li>
</ol>
<h4 id="用-bash-作为-init">用 Bash 作为 Init<a hidden class="anchor" aria-hidden="true" href="#用-bash-作为-init">#</a></h4>
<ol>
<li>
<p>将 <code>init=/bin/bash</code> <a href="https://wiki.archlinux.org/title/Kernel_parameter">内核参数</a>加入启动加载器的启动项.</p>
</li>
<li>
<p>启动后可以看到 Bash 提示符。</p>
</li>
<li>
<p>根文件系统应该是只读挂载，需要以可读写模式重新挂载：</p>
<pre tabindex="0"><code>mount -n -o remount,rw /
</code></pre></li>
<li>
<p>用 passwd 创建新的管理员密码。</p>
</li>
<li>
<p>通过 <code>reboot -f</code> 重启，不要再次忘记你的密码。</p>
</li>
</ol>
<p><strong>注意：</strong> 使用此法时有的键盘不能被初始系统正确加载，你可能不能在bash提示符后输入任何东西。如果出现这种情况，你不得不使用其他方法。</p>
<h3 id="microcodehttpsdecodezpgithubio20200712quickwords44-microcode"><a href="https://decodezp.github.io/2020/07/12/quickwords44-microcode/">Microcode</a><a hidden class="anchor" aria-hidden="true" href="#microcodehttpsdecodezpgithubio20200712quickwords44-microcode">#</a></h3>
<p><img loading="lazy" src="/Distributions/processor.png" alt=""  />
</p>
<p>每当听到有人说“这个问题更新一下微码就好了”，就觉得这个哥哥怎么这么迷人，好像在哪里见过。为了也让自己变成这种迷人的哥哥，我也研究了一下到底什么是微码。</p>
<p>这里说的是跑在CPU处理器上的微码，不是IBM那群人嘴里说的那个微码。如果你之前没和IBM打过交道那就当这段话不存在。</p>
<p>计算机体系结构是一层又一层的抽象，典型的比如操作系统对底层硬件的抽象。但鲜有人知的是，操作系统和底层硬件，尤其是CPU之间还存在着几层抽象。什么叫抽象，当然有很多种学术流的解释，但我土气一点的解释就是“不关心”，就是“Don’t care”，就是爱咋地咋地。</p>
<p>用这个模式套用一下我们熟悉的抽象：操作系统要将数据写入磁盘，它不关心怎么操作磁盘；应用要给某个服务器发个数据包，它也不关心怎么操作网卡。</p>
<p>回到我们的微码上来。我们现在常见的操作系统都是用C语言编写，它相对于汇编语言来说，也算是一种“高级语言”。编译器会将这种高级语言编译成汇编语言。只要C语言编写时“不关心”汇编指令是啥，那么就是相对汇编语言做了一次抽象。</p>
<p>马上就到微码了。我们知道汇编指令是执行在CPU上的，那么汇编指令会关心在某个具体型号的CPU上是怎么执行的吗？肯定不会的。汇编的一条ADD指令在80286上可以执行，在最新的Icelake上也能执行，但这两个CPU内部早已发生了天翻地覆的变化，执行ADD的操作已经完全不同了。</p>
<p>换句话说，就是汇编指令并“不关心”是如何在CPU上执行的。</p>
<p>操作系统不关心如何操作磁盘和网卡，是因为这些都有对应的设备驱动操心。汇编指令不关心具体如何在CPU中执行，这个就是由微码来操心了。所以用类比的方式，可以把微码类比成汇编指令针对某一型号CPU的驱动。</p>
<p>同样的汇编指令，会由该型号CPU的微码转成可以跑在该CPU上的微操作（Micro-ops/uops）。这些微操作指导CPU的电路完成汇编指令要求的意图。</p>
<p>在大家还在编写汇编语言代码的时代，微码为汇编语言的编写提供了方便：</p>
<ul>
<li>只关心汇编逻辑，而不用关心CPU内部电路设计和具体的执行方式</li>
<li>方便设计出新的汇编指令，由微码翻译成具体的执行逻辑，比如循环中“变量自减若大于零则转跳”，可以用一条汇编指令代替，脏活累活都交给微码去干</li>
<li>修复或绕过一些很难修复的处理器数字电路中的Bug</li>
</ul>
<p>上述第二点也为CISC指令集的实现提供了技术基础。因为不可能所有复杂的指令都是由专门的执行复杂指令的硬件来完成的，也是由简单的数字逻辑模块组合而成的。</p>
<p>在现代CPU里，是存在专门的将汇编指令翻译成微操作的硬件解码器的。但微码依旧存在（就是CPU微架构图中前端那个Microcode sequencer），它作为一个Lookup Table保存在一块ROM中，用来解码复杂的指令，比如浮点运算的指令等。一般是硬件解码器解码得比较快，而用微码解码会比较慢。</p>
<p>理论上，如果你能更改某一个处理器的微码，那么经它翻译的指令可以变成任意其他的指令。因为它关心指令如何在CPU电路中执行。所以现在升级微码主要是用来解决处理器的稳定和安全性的问题。</p>
<p>当然你也可以用它模拟自己没有的汇编指令，比如AVX系列，我只要在看到AVX512的汇编之后，把它翻译成两个“SIMD256”或者四个“SIMD128”指令就好了。</p>
<p>看到这里，你给自己就又加了一层微码的buff。最后贴心地推荐一篇详细说明Microcode怎么执行的文章：<a href="https://www.informatimago.com/articles/microcode/microcode.html">Microprocessor Microcode Simple Example</a></p>
<h4 id="安装更新微码httpslinuxcnarticle-9411-1html"><a href="https://linux.cn/article-9411-1.html">安装/更新微码</a><a hidden class="anchor" aria-hidden="true" href="#安装更新微码httpslinuxcnarticle-9411-1html">#</a></h4>
<p>微码就是由 Intel/AMD 提供的 CPU 固件。Linux  的内核可以在引导时更新 CPU 固件，而无需 BIOS 更新。处理器的微码保存在内存中，在每次启动系统时，内核可以更新这个微码。这些来自  Intel/AMD 的微码的更新可以去修复 bug 或者使用补丁来防范 bug。</p>
<p>查看当前的微码状态：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dmesg | grep microcode
</code></pre></div><p><strong>使用包管理器</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install intel-microcode
</code></pre></div><p>必须重启以激活微码更新：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo reboot
</code></pre></div><p><strong>手动</strong></p>
<p>只有在你的 CPU 制造商建议这么做的时候，才可以使用下列的方法去更新/安装微码，除此之外，都应该使用上面的方法去更新。大多数 Linux 发行版都可以通过包管理器来维护、更新微码。使用包管理器的方法是经过测试的，对大多数用户来说是最安全的方式。</p>
<h3 id="repair-grubhttpsaskubuntucomquestions88384how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows"><a href="https://askubuntu.com/questions/88384/how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows">Repair grub</a><a hidden class="anchor" aria-hidden="true" href="#repair-grubhttpsaskubuntucomquestions88384how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows">#</a></h3>
<p>When you install Windows, Windows assumes it is the only operating system (OS) on the machine, or at least it does not account for Linux. So it replaces GRUB with its own boot loader. What you have to do is replace the Windows boot loader with GRUB. I&rsquo;ve seen various instructions for replacing GRUB by mucking around with GRUB commands or some such, but to me the easiest way is to simply <code>chroot</code> into your install and run <code>update-grub</code>. <code>chroot</code> is great because it allows you to work on your actual install, instead of trying to redirect things here and there. It is really clean.</p>
<h3 id="dns缓存httpsblogcsdnnetcunchi4221articledetails107470928"><a href="https://blog.csdn.net/cunchi4221/article/details/107470928">DNS缓存</a><a hidden class="anchor" aria-hidden="true" href="#dns缓存httpsblogcsdnnetcunchi4221articledetails107470928">#</a></h3>
<p>使用以下命令来检查其状态。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl status systemd-resolved
</code></pre></div><p>运行以下命令来检查DNS缓存统计信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemd-resolve --statistics
</code></pre></div><p>运行以下命令来清除Ubuntu上的DNS缓存。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemd-resolve --flush-caches
</code></pre></div><p>DNS刷新命令不会清除缓存命中和未命中统计信息。 如果要清除所有缓存统计信息，则必须重新启动systemd解析的服务。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl restart systemd-resolved
</code></pre></div><h3 id="change-usernamehttpsaskubuntucomquestions34074how-do-i-change-my-username"><a href="https://askubuntu.com/questions/34074/how-do-i-change-my-username">Change username</a><a hidden class="anchor" aria-hidden="true" href="#change-usernamehttpsaskubuntucomquestions34074how-do-i-change-my-username">#</a></h3>
<p>Unix-like operating systems decouple the user name from the user identity, so you may safely change the name without affecting the ID. All permissions, files, etc are tied to your identity (uid), not your username.</p>
<p>To manage every aspect of the user database, you use the <code>usermod</code> tool.</p>
<p>To change username (it is probably best to do this without being logged in):</p>
<pre tabindex="0"><code>sudo usermod -l newUsername oldUsername
</code></pre><p>This however, doesn&rsquo;t rename the home folder.</p>
<p>To change home-folder, use</p>
<pre tabindex="0"><code>sudo usermod -d /home/newHomeDir -m newUsername
</code></pre><p>after you changed the username.</p>
<p>For instance, you could logout, drop to a console (Ctrl+Alt+F1), and <code>sudo su -</code> to become true root (as opposed to <code>sudo -s</code>, where $HOME is still /home/yourname.) Maybe you also have to kill some still running processes from this user first. To do so, enter <code>ps -u username</code>, look for the matching PID and kill them by <code>kill PID-number</code>.</p>
<p>Update: as arrange mentioned, some files may reference your old home directory. You can either keep a symlink for backward compatibility, e g <code>ln -s /home/newname /home/oldname</code> or you can change the file contents with <code>sed -i.bak 's/*oldname*/*newname*/g' *list of files*</code> It creates a backup for each file with a .bak extension.</p>
<p>Some additional information for not so experienced users like me:
As I only have ONE user account (administrator), it would not let me change the username (&ldquo;you are already logged in&rdquo; was the response in TTY1 (Ctrl+Alt+F1). To get around this:</p>
<ol>
<li>
<p>Login with your old credentials and add a new user, e.g. &ldquo;temporary&rdquo; in TTY1:</p>
<pre tabindex="0"><code>sudo adduser temporary
</code></pre><p>set the password.</p>
</li>
<li>
<p>Allow the temporary user to run sudo by adding the user to sudo group:</p>
<pre tabindex="0"><code>sudo adduser temporary sudo
</code></pre></li>
<li>
<p>Log out with the command <code>exit</code>.</p>
</li>
<li>
<p>Return to tty1: Login with the &lsquo;temporary&rsquo; user account and password. Change your username and folder as mentioned above. <code>exit</code> (until you get the login prompt)</p>
</li>
<li>
<p>Go back to TTY7 (Ctrl+Alt+F7) to login on the GUI/normal desktop screen and see if this works.</p>
</li>
<li>
<p>Delete temporary user and folder:</p>
<pre tabindex="0"><code>sudo deluser temporary
sudo rm -r /home/temporary
</code></pre></li>
</ol>
<h3 id="test-network-speedhttpsphoenixnapcomkblinux-network-speed-test"><a href="https://phoenixnap.com/kb/linux-network-speed-test">Test Network Speed</a><a hidden class="anchor" aria-hidden="true" href="#test-network-speedhttpsphoenixnapcomkblinux-network-speed-test">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install speedtest-cli
$ speedtest
</code></pre></div><h3 id="蓝牙与wifi信号干扰httpswwwbilibilicomreadcv218058"><a href="https://www.bilibili.com/read/cv218058">蓝牙与WiFi信号干扰</a><a hidden class="anchor" aria-hidden="true" href="#蓝牙与wifi信号干扰httpswwwbilibilicomreadcv218058">#</a></h3>
<p><del>蓝牙和WIFI干扰？把蓝牙掐死就行了</del></p>
<p>蓝牙和Wi-Fi信号干扰问题可能你也遇到过，两者主要都是使用2.4GHz频段，导致同时开启时，蓝牙的数据吞吐量会急剧下降，配对设备困难，Wi-Fi间歇性中断，网络受到限制。目前基本没什么办法可以根治这个问题，但你可以下面的方案临时帮你解决一些问题。本文提供了4种方法，可以参考下。</p>
<p><strong>方法1：连接至5GHz无线网络</strong></p>
<p>既然知道了问题出在频段冲突上，那么可以考虑购买一个双频（2.4GHz + 5GHz）路由器，并连接至5GHz的Wi-Fi网络。该方法可以彻底解决干扰问题，但银子也是必不可少的。</p>
<p><strong>方法2：更换Wi-Fi信道</strong></p>
<p>以TP-Link路由器为例，登录路由器Web管理页，在无线设置-&gt;基本设置中找到信道选项，将其改为1、6、11中的任何一个。这些为2.4GHz的不重叠传输信道，相较于其他信道更稳定一些。</p>
<p><strong>方法3：<a href="https://askubuntu.com/questions/1200778/wifi-and-bluetooth-headset-issues">开启网卡蓝牙共存功能</a></strong></p>
<p>在近几年生产的无线网卡中，都支持蓝牙共存功能，方法是在网络适配器属性的高级选项卡中，找到Bluetooth Collaboration或Bluetooth Coexistence Mode（名称可能有所不同），将其设为启用（Enable）。Windows会自动重新连接Wi-Fi，干扰蓝牙的情况也会有所缓解。</p>
<p>对于 Linux</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lspci -knn | grep Net -A3; lsusb
...
Kernel driver in use: ath9k
Kernel modules: ath9k
...
$ sudo tee /etc/modprobe.d/ath9k.conf <span style="color:#f92672">&lt;&lt;&lt;</span> <span style="color:#e6db74">&#34;options ath9k btcoex_enable=1&#34;</span>
</code></pre></div><p><strong>方法4：远离干扰源</strong></p>
<p>将蓝牙终端与路由器、微波炉、无绳电话机等使用2.4GHz频段的设备隔开使用。</p>
<p>然而蓝牙与WIFI干扰确实是头疼的问题：蓝牙鼠标会受到WIFI干扰经常反应迟缓，而蓝牙音箱则会导致WIFI断网，经常上传失败的绝望。。。。</p>
<p>总之，无线信道的改进还在进行着。。。</p>
<h3 id="ram--vram">RAM &amp; VRAM<a hidden class="anchor" aria-hidden="true" href="#ram--vram">#</a></h3>
<h4 id="vram-as-ramhttpswikiarchlinuxorgtitleswap_on_video_ram"><a href="https://wiki.archlinux.org/title/Swap_on_video_RAM">VRAM as RAM</a><a hidden class="anchor" aria-hidden="true" href="#vram-as-ramhttpswikiarchlinuxorgtitleswap_on_video_ram">#</a></h4>
<ul>
<li><a href="http://www.linux-mtd.infradead.org/">MTD</a></li>
<li><a href="https://github.com/Overv/vramfs">vramfs</a></li>
</ul>
<h4 id="ram-as-vramhttpswwwredditcomrpcmasterracecomments4bj7f7is_there_any_way_to_use_ram_memory_as_vram"><a href="https://www.reddit.com/r/pcmasterrace/comments/4bj7f7/is_there_any_way_to_use_ram_memory_as_vram/">RAM as VRAM</a><a hidden class="anchor" aria-hidden="true" href="#ram-as-vramhttpswwwredditcomrpcmasterracecomments4bj7f7is_there_any_way_to_use_ram_memory_as_vram">#</a></h4>
<p>Basically the answer is the operating system threats the whole memory pool for the graphics card, and ram as a virtual memory.</p>
<p>Virtual memory is paged two ways through a partition like swap, or a image file like in windows.</p>
<p>The virtual memory then maps the references to memory when you call int* or &amp;memory. To a physical address on your ram or vram depending on where it&rsquo;s meant to go.</p>
<p>The game cannot force the kernel or operating system to allocate virtual memory to a certain place.</p>
<p>The kernel will dynamically decide where everything goes, and will write to your hard drive if you overflow the current physical limit.</p>
<p>There are tons of articles on virtual memory on windows, bsd and linux. Mac is technically a bsd fork and does use the same methods, and so does the ps4 os.</p>
<p>tl;dr Basically what you are saying doesn&rsquo;t make sense in terms of virtual memory and <strong>this is done automatically</strong>( Games automatically use RAM as VRAM when you run out of VRAM. That&rsquo;s why, when you go over your VRAM limit, your FPS drops like a rock ).</p>
<p>Also some people in this thread are confusing video memory and virtual memory.</p>
<h3 id="功耗控制httpsarchicekylinonlineadvancedpower-ctlhtml"><a href="https://arch.icekylin.online/advanced/power-ctl.html">功耗控制</a><a hidden class="anchor" aria-hidden="true" href="#功耗控制httpsarchicekylinonlineadvancedpower-ctlhtml">#</a></h3>
<p>针对散热不好的设备或者续航能力不佳的笔记本，功耗控制显得非常必要</p>
<h4 id="使用-tlp-延长电池寿命及续航">使用 TLP 延长电池寿命及续航<a hidden class="anchor" aria-hidden="true" href="#使用-tlp-延长电池寿命及续航">#</a></h4>
<blockquote>
<p>如有需要可参阅 <a href="https://linrunner.de/tlp/settings/index.html">TLP 官方文档</a> 和 <a href="https://wiki.archlinux.org/title/TLP_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">archwiki TLP</a>。</p>
</blockquote>
<p>多年来，Linux 在电池优化方面取得了很大进步，但仍然有一些可选步骤改善笔记本电脑的电池寿命并且延长续航。</p>
<p>TLP 作为一款自由开源的高级电源管理工具提供开箱即用的默认配置。同时也可以高度定制化，以满足特定需求。</p>
<h4 id="电压下探">电压下探<a hidden class="anchor" aria-hidden="true" href="#电压下探">#</a></h4>
<blockquote>
<p>以下方法<strong>仅适用于 Intel 四代酷睿 ™ Haswell 及更新 CPU</strong>。有关 AMD CPU 和 Intel 四代酷睿 ™ Haswell 之前的 CPU 请参考 <a href="https://wiki.archlinux.org/index.php/Undervolting_CPU">archWiki Undervolting CPU</a>。</p>
</blockquote>
<p>对处理器的电压进行最大限度的下探，在挖掘 CPU 体质的极限的同时，起到既能降低发热，又能最大限度保持性能的效果。</p>
<p>如果正常操作，降低电压<strong>一般</strong>不会损害 CPU，一般建议从 50 毫伏进行尝试，每次降压尝试多增加 10 毫伏。只要确保在降低电压前，系统中任务均被正确保存即可。</p>
<h4 id="降低功率墙">降低功率墙<a hidden class="anchor" aria-hidden="true" href="#降低功率墙">#</a></h4>
<p>除了电压的下探，同时也可以尝试对处理器的功率墙（TDP）做出降低的限制。比如考虑这种情况 —— 在 CPU 满睿频时，其实不需要默认的那么多功耗来维持，也许在默认功耗的基础上减几瓦，也能维持满睿频，这样就又可以进一步降低温度。对功率墙进行限制不同于对电压进行下探，若限制功率墙的参数较低，这会不可避免的损失较多的性能，但是在散热过差的设备上这也是一个好办法。</p>
<p>对于功率墙的调整，有些主板在 BIOS 中提供了设置项可以直接调整。对于没有设置项的主板，有的主板是锁定了瞬时和长时功率墙，这种情况就无法调整功率墙了。有的主板 BIOS 随没有提供功率墙调整项，但依旧可以通过命令行设置。</p>
<p>通过以下的命令可以查看主板是否可以调整功率墙：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">grep . /sys/class/powercap/intel-rapl/intel-rapl:0/* 2&gt; /dev/null
</code></pre></div><p>如果在输出中看到了如下的 <code>enabled</code> 值为 <code>1</code>，即可以调整。第一行的数字代表现有的功率墙限制：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/sys/class/powercap/intel-rapl/intel-rapl:0/constraint_0_power_limit_uw:100000000
/sys/class/powercap/intel-rapl/intel-rapl:0/enabled:1
</code></pre></div><p>具体的调整步骤参考 <a href="https://askubuntu.com/questions/1226254/set-max-tdp-of-intel-h-series-cpu">Set Max TDP of Intel H-series CPU</a>。</p>
<h3 id="check-if-port-is-in-usehttpswwwcybercitibizfaqunix-linux-check-if-port-is-in-use-command"><a href="https://www.cyberciti.biz/faq/unix-linux-check-if-port-is-in-use-command/">Check if port is in use</a><a hidden class="anchor" aria-hidden="true" href="#check-if-port-is-in-usehttpswwwcybercitibizfaqunix-linux-check-if-port-is-in-use-command">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo lsof -i -P -n | grep LISTEN
$ sudo netstat -tulpn | grep LISTEN
$ sudo ss -tulpn | grep LISTEN
$ sudo lsof -i:22 <span style="color:#75715e">## see a specific port such as 22 ##</span>
$ sudo nmap -sTU -O IP-address-Here
</code></pre></div><h3 id="在已有系统安装-windows">在已有系统安装 Windows<a hidden class="anchor" aria-hidden="true" href="#在已有系统安装-windows">#</a></h3>
<p>如果是单块硬盘，而且你是 uefi 引导模式，那么先分好 Windows 分区：</p>
<ul>
<li>用 Ubuntu 安装 u 盘启动电脑，选择中文语言，点击“试用” 会启动到桌面，</li>
<li>再点击桌面左下角开始菜单，找到工具、磁盘工具，</li>
<li>在磁盘工具选中你的硬盘，右键 Ubuntu 分区，调整大小 缩小分区 以便挪出 Windows 分区（尽量有 100G+），</li>
<li>缩小后，在空出的空白部分右键，新建分区，新建 NTFS 分区。</li>
<li>弄好以后，重启电脑，用 win10 安装 u 盘或 ventoy U 盘准备安装 Windows。</li>
<li>在 Windows 安装程序中选中前面新建的 Windows 分区。</li>
</ul>
<p>你一定要事先拿bcdboot创建一个ESP到u盘上作为备份，不然将来俩系统你覆写我我覆写你，你就开不了机了，得救援模式里搞</p>
<p>如果没备份的话，可以这样 修复 引导：用 Ubuntu 安装盘启动电脑，选择中文语言，点击试用，进入桌面后联网，再右键桌面打开终端，执行</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install boot-repair
$ sudo boot-repair
</code></pre></div><h3 id="dns-txt-记录">DNS TXT 记录<a hidden class="anchor" aria-hidden="true" href="#dns-txt-记录">#</a></h3>
<p><a href="https://support.google.com/a/answer/48090?hl=zh-Hans#T"><strong>简介</strong></a></p>
<p>TXT 记录是为您所在网域之外的来源提供文本信息的一种 DNS 记录，可用于多种用途。该记录的值可以是人工可读文本，也可以是机器可读文本。使用 Google Cloud 服务时，TXT 记录可用于<a href="https://support.google.com/a/answer/60216">验证域名所有权</a>和执行电子邮件安全措施，例如 <a href="https://support.google.com/a/answer/33786">SPF</a>、<a href="https://support.google.com/a/answer/174124">DKIM</a> 和 <a href="https://support.google.com/a/answer/2466580">DMARC</a>。</p>
<p>要为您的网域添加或修改 TXT 记录，请参阅<a href="https://support.google.com/a/answer/2716800">关于 TXT 记录</a>。</p>
<p><a href="https://www.mmuaa.com/post/6aa0b865ca947082.html"><strong>使用nslookup查询DNS的TXT记录</strong></a></p>
<ul>
<li>在Windows或Linux平台的命令行中直接输入nslookup即可打开nslookup。</li>
<li>接着输入一个域名，即可查询A记录。输入set type=mx，就会把查询状态调整到mx，接下来输入的域名全部查询mx记录。同样的，输入set type=txt，set type=cname可以查询相应的记录。</li>
<li>这里的server表示DNS服务器，Non-authoritative answer表示非权威应答，即DNS服务器的缓存。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nslookup
&gt; set type<span style="color:#f92672">=</span>txt
&gt; qq.ustclug.org
...
</code></pre></div><h3 id="shutdownhttpszhuanlanzhihucomp97770772"><a href="https://zhuanlan.zhihu.com/p/97770772">Shutdown</a><a hidden class="anchor" aria-hidden="true" href="#shutdownhttpszhuanlanzhihucomp97770772">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo shutdown -h +120  <span style="color:#75715e"># 两小时后关机</span>
$ sudo shutdown -h 23:00  <span style="color:#75715e"># 表示在23点定时关机</span>
</code></pre></div><h3 id="runlevel">Runlevel<a hidden class="anchor" aria-hidden="true" href="#runlevel">#</a></h3>
<p>制脚本目录/etc/rc.d，该目录下存在各个运行级别的脚本文件，以下是centos7为例的查询结果（ubuntu 下没有 /etc/rc.d 目录，都在 /etc/ 目录下）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ls /etc/rc.d/</span>
init.d rc0.d rc1.d rc2.d rc3.d rc4.d rc5.d rc6.d rc.local
<span style="color:#75715e"># ls /etc/rc.d/rc4.d/</span>
K50netconsole S10network S64mysqld
<span style="color:#75715e"># ls /etc/init.d/</span>
functions mysqld netconsole network README
</code></pre></div><p>对于SysVinit系统，它将从以下位置执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">运行级别0 - /etc/rc.d/rc0.d/
运行级别1 - /etc/rc.d/rc1.d/
运行级别2 - /etc/rc.d/rc2.d/
运行级别3 - /etc/rc.d/rc3.d/
运行级别4 - /etc/rc.d/rc4.d/
运行级别5 - /etc/rc.d/rc5.d/
运行级别6 - /etc/rc.d/rc6.d/
</code></pre></div><p>对于systemd系统，它将从以下位置执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">runlevel1.target – /etc/systemd/system/rescue.target
runlevel2.target – /etc/systemd/system/multi-user.target.wants
runlevel3.target – /etc/systemd/system/multi-user.target.wants
runlevel4.target – /etc/systemd/system/multi-user.target.wants
runlevel5.target – /etc/systemd/system/graphical.target.wants
</code></pre></div><h4 id="explanationhttpswwwcnblogscomyyxianrenp12395649html"><a href="https://www.cnblogs.com/yyxianren/p/12395649.html">Explanation</a><a hidden class="anchor" aria-hidden="true" href="#explanationhttpswwwcnblogscomyyxianrenp12395649html">#</a></h4>
<ul>
<li>
<p><strong>/etc/rc.d/init.d</strong></p>
<p>该文件夹包含所有服务在各个运行等级中的全部启动脚本。一般来说，它们都是标准的shell脚本，遵守最基本的标准。每个脚本最少接受两个参数start和stop，它们分别代表启动和停止服务（如网页服务）。除此之外，init脚本通常还会接受一些额外的选项，如restart（重启服务器）、status（返回服务当前状态）、reload（告知服务从配置文件中重新载入配置）以及force-reload（强制服务重载它的配置）。当用不带参数的方式运行脚本的时候，一般应该返回一个它会接受的参数列表。</p>
</li>
<li>
<p><strong>/etc/rc.d/rc0.d～/etc/rc.d/rc6.d</strong></p>
<p>这些文件夹分别包含每个运行等级对应的init脚本。在实际使用中，它们一般通过符号链接到/etc/init.d文件夹下的实际文件。不过要注意的是，这些文件夹下的init脚本都有一些特别的名字，命名都以S（start）、K（kill）或D（disable）开头，如K+nn+服务名或S+nn+服务名，其中nn为两位数字。当init进入一个运行等级的时候，它会按照数字顺序运行所有以K开头的脚本并传入stop参数，除非对应的init脚本在前一个运行等级中没有启动。然后init按照数字顺序运行所有以S开头的脚本并传入start参数。任何以D开头的init脚本都会被忽略—这让你可以在指定的运行等级禁止一个脚本，或者你也可以仅仅移除全部符号链接。所以如果你有两个脚本，S01foo和S05bar，init首先会运行S01foo start，当它进入特定的运行等级后再执行S05bar start。</p>
<p>7个运行级别(runlevel)</p>
<ul>
<li>运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</li>
<li>运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆</li>
<li>运行级别2：多用户状态(没有NFS)</li>
<li>运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式</li>
<li>运行级别4：系统未使用，保留</li>
<li>运行级别5：X11控制台，登陆后进入图形GUI模式</li>
<li>运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</li>
</ul>
</li>
<li>
<p><strong>/etc/rc.d/rc.local</strong></p>
<p>并非所有的发行版都使用了rc.local，通常它是一个留给用户修改的shell脚本。一般会在init进程结束的时候运行它，所以你可以在这里放一些想要运行的额外脚本，而不用再创建自己的init脚本。</p>
</li>
<li>
<p><strong>/etc/rc.d/rc.sysinit</strong></p>
<p>/etc/rc.d/rc.sysinit主要做在各个运行模式中相同的初始化工作，包括设定PATH、设定网络配置（/etc/sysconfig/network）、启动swap分区、设定/proc等等。</p>
</li>
<li>
<p><strong>/etc/rc.d/rc</strong></p>
<p>当运行级别改变时，负责启动/停止各种服务。</p>
</li>
</ul>
<h4 id="default-runlevelhttpsithelpithomecomtwarticles10135276"><a href="https://ithelp.ithome.com.tw/articles/10135276">Default runlevel</a><a hidden class="anchor" aria-hidden="true" href="#default-runlevelhttpsithelpithomecomtwarticles10135276">#</a></h4>
<p><a href="https://www.cnblogs.com/linuxprobe/p/10988256.html">我们可以使用以下五种方法检查Linux系统当前运行级别：</a></p>
<ul>
<li><code>runlevel</code>命令：<code>runlevel</code>打印系统的上一个和当前运行级别。</li>
<li><code>who</code>命令：打印有关当前登录用户的信息。它将使用“<code>-r</code>”选项打印运行级别信息。
<code>systemctl</code>命令：它控制<code>systemd</code>系统和服务管理器。</li>
<li>使用<code>/etc/inittab</code>文件：系统的默认运行级别在<code>SysVinit System</code>的<code>/etc/inittab</code>文件中指定。</li>
<li>使用<code>/etc/systemd/system/default.target</code>文件：系统的默认运行级别在<code>systemd System</code>的<code>/etc/systemd/system/default.target</code>文件中指定。</li>
</ul>
<p>在目錄/etc/rc2.d/中的連結檔S03lightdm是負責啟動圖形界面及視窗管理系統LXDE的, 這表示原本約定成俗的runlevel, 其實只是參考, 重要的是, 在要執行的runlevel中放了什麼就是什麼, 也就是說, 原本rc2.d是多人文字模式, 沒有圖形界面的, 由於連結檔S03lightdm啟動了圖形界面, 系統就當然進入了圖形界面.</p>
<p>要移除連結檔S03lightdm, 有幾種方式:</p>
<ol>
<li>
<p>直接刪除, 沒了這個檔就不會進入圖形界面了:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo rm /etc/rc2.d/S03lightdm
</code></pre></div></li>
<li>
<p>用系統工具update-rc.d:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo update-rc.d lightdm disable <span style="color:#ae81ff">2</span>
</code></pre></div></li>
</ol>
<h4 id="execute-command-at-startupshutdownhttpsunixstackexchangecomquestions48973execute-a-command-before-shutdown"><a href="https://unix.stackexchange.com/questions/48973/execute-a-command-before-shutdown">Execute command at startup/shutdown</a><a hidden class="anchor" aria-hidden="true" href="#execute-command-at-startupshutdownhttpsunixstackexchangecomquestions48973execute-a-command-before-shutdown">#</a></h4>
<p>On Ubuntu, scripts for the different runlevels are executed according to their presence in the <code>/etc/rc[0-6].d</code> directories. <a href="http://en.wikipedia.org/wiki/Runlevel">Runlevel</a> 0 corresponds to shutdown, and 6 to reboot.</p>
<p>Typically the script itself is stored in <code>/etc/init.d</code>, and then symlinks are placed in the directories corresponding to the runlevels you require.</p>
<p>So in your case, write your script, store it in <code>/etc/init.d/</code>, then create a symlink in each of <code>/etc/rc0.d</code> and <code>/etc/rc6.d</code> (if you want both) pointing to your script.</p>
<p>The scripts in each runlevel directory will be executed in <a href="http://en.wiktionary.org/wiki/ASCIIbetical">asciibetical order</a>, so if the order within the runlevel matters to you, choose the name of your symlink accordingly.</p>
<p><a href="https://unix.stackexchange.com/questions/20357/how-can-i-make-a-script-in-etc-init-d-start-at-boot">Example</a>:</p>
<ol>
<li>
<p><a href="https://docs.oracle.com/cd/E19683-01/806-4073/6jd67r96m/index.html">Create a shell executable file with your script in /etc/init.d/ directory</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/init.d/myscript
$ sudo chmod <span style="color:#ae81ff">0744</span> /etc/init.d/myscript
$ chown root:sys /etc/init.d/myscript
</code></pre></div></li>
<li>
<p><a href="https://unix.stackexchange.com/a/20361">The script should have the following format</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#75715e"># chkconfig: 2345 20 80</span>
<span style="color:#75715e"># description: Description comes here....</span>

<span style="color:#75715e"># Source function library.</span>
. /etc/init.d/functions

start<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e"># code to start app comes here </span>
    <span style="color:#75715e"># example: daemon program_name &amp;</span>
<span style="color:#f92672">}</span>

stop<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e"># code to stop app comes here </span>
    <span style="color:#75715e"># example: killproc program_name</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in 
    start<span style="color:#f92672">)</span>
       start
       ;;
    stop<span style="color:#f92672">)</span>
       stop
       ;;
    restart<span style="color:#f92672">)</span>
       stop
       start
       ;;
    status<span style="color:#f92672">)</span>
       <span style="color:#75715e"># code to check status of app comes here </span>
       <span style="color:#75715e"># example: status program_name</span>
       ;;
    *<span style="color:#f92672">)</span>
       echo <span style="color:#e6db74">&#34;Usage: </span>$0<span style="color:#e6db74"> {start|stop|status|restart}&#34;</span>
<span style="color:#66d9ef">esac</span>

exit <span style="color:#ae81ff">0</span> 
</code></pre></div><p>即必须包含 case 语句，该语句须有 start（对应 S） 与 stop （对应 K）两个选项。</p>
</li>
<li>
<p>Since this has to be executed during shutdown or reboot need to create softlinks in /etc/rc0.d/ and /etc/rc6.d</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo ln -s /etc/init.d/myscript /etc/rc0.d/K99myscript
$ sudo ln -s /etc/init.d/myscript /etc/rc6.d/K99myscript
</code></pre></div><p>If you are on a Red Hat based system（即 RedHat 下有专门工具用来执行上面建立软链接操作）</p>
<ul>
<li>
<p>Enable the script</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chkconfig --add myscript 
$ chkconfig --level <span style="color:#ae81ff">2345</span> myscript on 
</code></pre></div></li>
<li>
<p>Check the script is indeed enabled - you should see &ldquo;on&rdquo; for the levels you selected.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chkconfig --list | grep myscript
</code></pre></div></li>
</ul>
<p>在 ubuntu 上我尝试运行 <code>sudo update-rc.d myscript enable 5</code>，结果报错  <a href="https://serverfault.com/a/1054675">systemd failing enable with &ldquo;service is transient or generated&rdquo;.</a>。解释为：</p>
<p>The manual for [<em>systemctl</em>](<a href="https://www.freedesktop.org/software/systemd/man/systemctl.html#is-enabled">https://www.freedesktop.org/software/systemd/man/systemctl.html#is-enabled</a> UNIT…) tells us the following about the <code>generated</code> status:</p>
<blockquote>
<p>The unit file was generated dynamically via a generator tool. See systemd.generator(7). Generated unit files may not be enabled, they are enabled implicitly by their generator.</p>
</blockquote>
<p>So your error message means that one of the methods through which systemd can automatically generate unit files for you is in use, preventing you from using the one you wrote yourself.</p>
<p>在我建立软链接后，比如 S01myscript，执行 <code>sudo update-rc.d myscript disable 5</code>  会变为 K01myscript，再执行 <code>sudo update-rc.d myscript enable 5</code> 会变为 S01myscript 并报上面错误。</p>
</li>
<li>
<p><a href="https://askubuntu.com/a/416301">Notes</a>:</p>
<ul>
<li>The script in rc6.d must be with no .sh extension</li>
<li>The name of your script must begin with K99 to run at the right time.</li>
<li>The scripts in this directory are executed in alphabetical order.</li>
</ul>
</li>
</ol>
<h3 id="report-a-problem-in-ubuntuhttpshelpubuntucomstableubuntu-helpreport-ubuntu-bughtmlen"><a href="https://help.ubuntu.com/stable/ubuntu-help/report-ubuntu-bug.html.en">Report a problem in Ubuntu</a><a hidden class="anchor" aria-hidden="true" href="#report-a-problem-in-ubuntuhttpshelpubuntucomstableubuntu-helpreport-ubuntu-bughtmlen">#</a></h3>
<p>If you notice a problem in Ubuntu, you can file a <em>bug report</em>.</p>
<ol>
<li>
<p>Type <strong>Alt</strong>+<strong>F2</strong> and type <code>ubuntu-bug nameofprogram</code></p>
<p>If you have a hardware issue or don&rsquo;t know the name of the program affected, just type <code>ubuntu-bug</code></p>
<blockquote>
<p>If using <code>ubuntu-bug</code> does not work for some reason, <a href="https://help.ubuntu.com/community/ReportingBugs#Filing_bugs_manually_at_Launchpad.net">file a bug manually</a> and jump to step 4 in this instruction.</p>
</blockquote>
</li>
<li>
<p>After running one of the above commands, Ubuntu will gather information about the bug. This may take a few minutes. Review the collected information if you wish. Click <strong>Send</strong> to continue.</p>
</li>
<li>
<p>A new web browser tab will open to continue processing the bug data. Ubuntu uses the website <em>Launchpad</em> to manage its bug reports. If you do not have a Launchpad account, you will need to register for one to file a bug and receive email updates about its status. You can do this by clicking <strong>Create a new account</strong>.</p>
</li>
<li>
<p>After logging in to Launchpad, enter a description of the problem in the summary field.</p>
</li>
<li>
<p>After clicking <strong>Next</strong> Launchpad will search for similar bugs in case the bug you are reporting has already been reported. If the bug has already been reported, you can mark that bug as also affecting you. You can also subscribe to the bug report to receive updates about progress with fixing it. If the bug has not already been reported, click <strong>No, I need to report a new bug</strong>.</p>
</li>
<li>
<p>Fill in the description field with as much information as you can. It&rsquo;s important that you specify three things:</p>
<ul>
<li>What you expected to happen</li>
<li>What actually happened</li>
<li>If possible, a minimal series of steps necessary to make it happen, where step 1 is &ldquo;start the program&rdquo;</li>
</ul>
</li>
<li>
<p>Your report will be given an ID number, and its status will be updated as it is being dealt with. Thanks for helping make Ubuntu better!</p>
</li>
</ol>
<p>If you get the &ldquo;This is not a genuine Ubuntu package&rdquo; error, it means that the software you are trying to report a bug about is not from the official Ubuntu repositories. In this case, you cannot use Ubuntu&rsquo;s built-in bug reporting tool.</p>
<p>For more information about reporting bugs in Ubuntu, please read the extensive <a href="https://help.ubuntu.com/community/ReportingBugs">online documentation</a>.</p>
<h2 id="optimizing-for-gaminghttpssteamcommunitycomsharedfilesfiledetailsid1787799592"><a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1787799592">Optimizing for Gaming</a><a hidden class="anchor" aria-hidden="true" href="#optimizing-for-gaminghttpssteamcommunitycomsharedfilesfiledetailsid1787799592">#</a></h2>
<p>This guide is only for Arch and Ubuntu. Any derivatives like Manjaro, Mint, PopOS, etc should also work.</p>
<h3 id="enable-multilib">Enable Multilib<a hidden class="anchor" aria-hidden="true" href="#enable-multilib">#</a></h3>
<p>Multilib is required by Steam, So if you are running Steam you can skip this step, If you can not find Steam in your repositories this is your issue.</p>
<p>Add the architecture.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dpkg --add-architecture i386
</code></pre></div><p>Update the package manager</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get update
</code></pre></div><p>Upgrade to newer packages</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get dist-upgrade
</code></pre></div><h3 id="gpu-drivers">GPU Drivers<a hidden class="anchor" aria-hidden="true" href="#gpu-drivers">#</a></h3>
<p>Having the right GPU drivers is imporant, else games won&rsquo;t run properly.</p>
<p>Manually check which driver you need: <a href="https://www.nvidia.com/Download/index.aspx?lang=en-us">https://www.nvidia.com/Download/index.aspx?lang=en-us</a></p>
<p>For Nvidia you need to add a repository</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:graphics-drivers/ppa <span style="color:#f92672">&amp;&amp;</span> sudo apt-get upgrade
</code></pre></div><p>For Nvidia 440 you need these packages so install them.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install nvidia-graphics-drivers-440 nvidia-settings vulkan vulkan-utils
</code></pre></div><p>Now reboot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo reboot
</code></pre></div><p>If you use Gnome or GDM you might need to disable Wayland, This is not always the case, But I include it here just in case, If your System won&rsquo;t reboot you can try this</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/gdm/custom.conf
</code></pre></div><p>Remove the # in front of the #WaylandEnable=false line and it should force Xorg.</p>
<h3 id="linux-kernel">Linux kernel<a hidden class="anchor" aria-hidden="true" href="#linux-kernel">#</a></h3>
<p>Installing the newest kernel is generally the easiest kernel switch, There are other kernels available, I will include them later.</p>
<p>The easiest way is to use <a href="https://github.com/bkw777/mainline">ukuu</a>, First we need to install it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:cappelikan/ppa
$ sudo apt update
$ sudo apt install mainline
</code></pre></div><p>Now ukuu is installed, in this program you can select the newest stable kernel click install and when you reboot the new kernel is used. Do not remove your old kernel. If anything goes wrong you can select which kernel to boot in the grub screen at startup and remove the kernel that gives you trouble.</p>
<h3 id="feral-gamemodehttpslinuxhintcomgamemode-improve-gaming-performance-in-linux"><a href="https://linuxhint.com/gamemode-improve-gaming-performance-in-linux/">Feral Gamemode</a><a hidden class="anchor" aria-hidden="true" href="#feral-gamemodehttpslinuxhintcomgamemode-improve-gaming-performance-in-linux">#</a></h3>
<p><a href="https://github.com/FeralInteractive/gamemode">gamemode</a> 基本上是一组守护进程/库，它可以按需优化 Linux 系统的游戏性能。它实际上只是让 CPU 在用户玩游戏时自动运行在高性能模式下并帮助 Linux 用户从游戏中获得最佳性能。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install gamemode
</code></pre></div><p><strong>Manual</strong></p>
<p>Install the dependencies</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install meson libsystemd-dev pkg-config ninja-build git libdbus-1-dev libinih-dev
</code></pre></div><p>Clone the repository</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/FeralInteractive/gamemode.git
</code></pre></div><p>Change the directory into the just downloaded folder</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd gamemode
</code></pre></div><p>Change the tree to the newest version</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git checkout 1.5.1
</code></pre></div><p>Run the install script</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./bootstrap.sh
</code></pre></div><p><strong>Usage</strong></p>
<p>Now that it is installed we need to enable the service with this command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl --user enable gamemoded <span style="color:#f92672">&amp;&amp;</span> systemctl --user start gamemoded
</code></pre></div><p>To use gamemode for supertuxkart for example, run this terminal</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gamemoderun supertuxkart
</code></pre></div><p>To use it in Steam edit the launch option for the desired game to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gamemoderun %command%
</code></pre></div><p>If gamemode does not run try to make it executable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo chmod +x /usr/bin/gamemoderun
</code></pre></div><p>If gamemoderun does not work for you try this as a launch command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ LD_PRELOAD<span style="color:#f92672">=</span>$LD_PRELOAD:/usr/lib/x86_64-linux-gnu/libgamemodeauto.so.0 %command%
</code></pre></div><h3 id="nvidia-improvements">Nvidia Improvements<a hidden class="anchor" aria-hidden="true" href="#nvidia-improvements">#</a></h3>
<p>Nvidia users might want to enable all options listed here to improve performance in games</p>
<ul>
<li>Force Full Composition Pipeline avoids screen tearing by letting the GPU do all the scaling.</li>
<li>Triple Buffer avoids stuttering gameplay It allows for a stream of data instead of chunks of data.</li>
<li>IndirectGLXProtocol forces the game to directly communicate with the Nvidia drivers.</li>
<li>Coolbits enables your card to be overclocked which gamemode will make use of.</li>
</ul>
<p>Create a Xorg Config file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nvidia-xconfig
</code></pre></div><p>Edit the file with the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/X11/xorg.conf
</code></pre></div><p>Add in these lines under the &ldquo;Device&rdquo; section between the other options</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Option         <span style="color:#e6db74">&#34;TripleBuffer&#34;</span> <span style="color:#e6db74">&#34;on&#34;</span> Option         <span style="color:#e6db74">&#34;Coolbits&#34;</span> <span style="color:#e6db74">&#34;28&#34;</span>
</code></pre></div><p>Add in these lines under the &ldquo;Screen&rdquo; section between the other options.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Option         <span style="color:#e6db74">&#34;metamodes&#34;</span> <span style="color:#e6db74">&#34;nvidia-auto-select +0+0 {ForceCompositionPipeline=On, ForceFullCompositionPipeline=On}&#34;</span> Option         <span style="color:#e6db74">&#34;AllowIndirectGLXProtocol&#34;</span> <span style="color:#e6db74">&#34;off&#34;</span>
</code></pre></div><p>Try this one with risk, It will be sure to crash GNOME, I am not sure about other DEs</p>
<p>just add it to the end of the file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Section <span style="color:#e6db74">&#34;Extensions&#34;</span>   Option         <span style="color:#e6db74">&#34;Composite&#34;</span> <span style="color:#e6db74">&#34;Disable&#34;</span> EndSection
</code></pre></div><p>If you run into any problems, just hit CTRL ALT F3 to switch to a different tty login, run the command to edit the file again and put a # in front of the options that are giving you trouble, Most likely the last one</p>
<p>Alternatively you can just completely remove the file with the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo rm /etc/X11/xorg.conf
</code></pre></div><h3 id="libstrangle">Libstrangle<a hidden class="anchor" aria-hidden="true" href="#libstrangle">#</a></h3>
<p><a href="https://gitlab.com/torkel104/libstrangle">Libstrangle</a> is a tool that helps you control framerates but also vsync settings. This is especially handy for games that do not support these features, You would like to half your framerate to make it run better save some power or just give your hardware a break.</p>
<p>Libstrangle can be used in multiple ways depending on what you want to achieve.</p>
<p>To use libstrangle you can simply type strangle and then the amount of frames you want to run. There are some examples below, But the features you will probably use are Vsync which you use by using the -v option, the rules for OpenGL and Vulkan are different, Here is what each number does for the different apis.</p>
<ul>
<li>OpenGL 0 Force off, 1 Force on, n - Sync to refresh rate</li>
<li>Vulkan 0 Force off, 1 Mailbox mode, 2 Traditional vsync, 3 Adaptive vsync</li>
</ul>
<p>You can also limit the game depending on the power state of your device, Set it to 60 while charging and on 30 while discharging for example. You do this by adding a second number right after a colon. in example, strangle 60:30. There are more features but they are not that commonly used, you can check the gitlab link above or simply type strangle -h for more information.</p>
<p>To limit the framerate of supertuxkart to 30 simply run</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strangle <span style="color:#ae81ff">30</span> supertuxkart
</code></pre></div><p>To Force enable vsync on 60 fps for an OpenGL Steam game set the launch option to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strangle -v <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">60</span> %command%
</code></pre></div><p>To set the framerate of a vulkan game on Steam to 120 fps but 60 on battery power with adaptive vsync set this as your launch command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strangle -v <span style="color:#ae81ff">3</span> 120:60 %command%
</code></pre></div><h3 id="mangohud">Mangohud<a hidden class="anchor" aria-hidden="true" href="#mangohud">#</a></h3>
<p><a href="https://github.com/flightlessmango/MangoHud">Mangohud</a> is a monitoring tool for Vulkan and OpenGL applications. It can show CPU and GPU usage, temps, But also framerates, frametimes and a lot more.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:flexiondotorg/mangohud
$ sudo apt update
$ sudo apt install mangohud
</code></pre></div><p>To configure it with a GUI you can check out GOverlay below. For a manual configuration you can edit</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ~/.config/MangoHud/MangoHud.conf
</code></pre></div><p>If you want exactly my configuration you can just copy this into it without the need for GOverlay.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">background_alpha<span style="color:#f92672">=</span>0.3
font_size<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>
background_color<span style="color:#f92672">=</span><span style="color:#ae81ff">020202</span>
text_color<span style="color:#f92672">=</span>ffffff
position<span style="color:#f92672">=</span>top-right
no_display
toggle_hud<span style="color:#f92672">=</span>F11
cpu_stats
cpu_temp
cpu_color<span style="color:#f92672">=</span>007AFA
gpu_stats
gpu_temp
gpu_color<span style="color:#f92672">=</span>00BD00
ram
ram_color<span style="color:#f92672">=</span>B3000A
vram
vram_color<span style="color:#f92672">=</span>00801B
io_read
io_write
io_color<span style="color:#f92672">=</span>B84700
arch
engine_color<span style="color:#f92672">=</span>B200B0
frame_timing<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
frametime_color<span style="color:#f92672">=</span>00ff00
<span style="color:#75715e">#output_file=/home/houtworm/mangohud_log_ </span>
<span style="color:#75715e">#fps_limit 120</span>
<span style="color:#75715e">#media_player</span>
<span style="color:#75715e">#toggle_logging=F10</span>
</code></pre></div><p>You can tweak all the little things you want here. You can also create different configurations per game by adding a MangoHud.conf file to the game directory.</p>
<p>To use it for any game change its launch option to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mangohud %command%
</code></pre></div><p>To use it with non Steam games use the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mangohud supertuxkart
</code></pre></div><p>Some games might need the 32 bit version, try this if the normal command fails.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mangohud.x86 %command%
</code></pre></div><h3 id="vkbasalt">VKBasalt<a hidden class="anchor" aria-hidden="true" href="#vkbasalt">#</a></h3>
<p><a href="https://github.com/DadSchoorse/vkBasalt">VKBasalt</a> is a post processing layer for Vulkan which enables you to enhance graphics further. It only works with Vulkan, This includes all Proton games.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/DadSchoorse/vkBasalt.git <span style="color:#f92672">&amp;&amp;</span> cd vkBasalt <span style="color:#f92672">&amp;&amp;</span> meson --buildtype<span style="color:#f92672">=</span>release builddir <span style="color:#f92672">&amp;&amp;</span> ninja -C builddir install
</code></pre></div><p>To configure it first you need to create a config file, Run the following command to copy the example to a folder you can edit as the user.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir ~/.config/vkBasalt <span style="color:#f92672">&amp;&amp;</span> cp /usr/share/vkBasalt/vkBasalt.conf.example ~/.config/vkBasalt/vkBasalt.conf
</code></pre></div><p>You can tweak all the little things you want here. You can also create different configurations per game by adding a vkBasalt.conf file to the game directory.</p>
<p>To use VKBasalt for any particular game enter this as a launch option.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ENABLE_VKBASALT<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> %command%
</code></pre></div><p>You can also start non Steam games this way by typing the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ENABLE_VKBASALT<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> supertuxkart
</code></pre></div><h3 id="goverlay">GOverlay<a hidden class="anchor" aria-hidden="true" href="#goverlay">#</a></h3>
<p><a href="https://github.com/benjamimgois/goverlay">GOverlay</a> is a Graphical User Interface for managing MangoHud and VKBasalt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install lazarus git
$ git clone https://github.com/benjamimgois/goverlay.git
$ cd goverlay
$ lazbuild -B goverlay.lpi
</code></pre></div><p>mesa-demos and vulkan-tools are optional, You need them if you want to show the previews. You can find them in your distros repository</p>
<h3 id="xbox-one-controller">Xbox One Controller<a hidden class="anchor" aria-hidden="true" href="#xbox-one-controller">#</a></h3>
<p>xpad works great, is the default on modern Linux distros and supports a wide range of controllers, But if you are like me and you only Xbox One controllers then using xpadneo is much better.</p>
<p>For Bluetooth to work with xpad and the Xbox One controllers you need to disable ertm (This is not needed for xpadneo)</p>
<p>create the config file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/modprobe.d/xbox_bt.conf
</code></pre></div><p>Add the following line to the document and save and exit with CTRL + X.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">options bluetooth disable_ertm<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</code></pre></div><p><a href="https://github.com/atar-axis/xpadneo">xpadneo</a> supports Xbox One controllers wired and over bluetooth, It enables Force Feedback even the vibration inside the triggers, It supports battery level indication, It also fixes the mapping in many many games that where previously unplayable with a Xbox One controller on Linux.</p>
<p>Install the dependencies</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install dkms linux-headers-<span style="color:#e6db74">`</span>uname -r<span style="color:#e6db74">`</span>
</code></pre></div><p>Install xpadneo from Github</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/atar-axis/xpadneo.git <span style="color:#f92672">&amp;&amp;</span> cd xpadneo <span style="color:#f92672">&amp;&amp;</span> sudo ./install.sh
</code></pre></div><p>Now you should be able to reboot and it should be all good, Having the controllers vibrate for a second when connected is a good indicator that it works.</p>
<h2 id="questions">QUESTIONS<a hidden class="anchor" aria-hidden="true" href="#questions">#</a></h2>
<h3 id="ubuntu-无法关机">Ubuntu 无法关机<a hidden class="anchor" aria-hidden="true" href="#ubuntu-无法关机">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vim /etc/systemd/system.conf
DefaultTimeoutStartSec<span style="color:#f92672">=</span>5s
DefaultTimeoutStopSec<span style="color:#f92672">=</span>5s
$ sudo systemctl reload
</code></pre></div><p><code>DefaultTimeoutStartSec=</code>, <code>DefaultTimeoutStopSec=</code> 设置启动/停止一个单元所允许的最大时长。若仅设置一个整数而没有单位，那么单位是秒。 也可以在整数后面加上时间单位后缀： &ldquo;ms&rdquo;(毫秒), &ldquo;s&rdquo;(秒), &ldquo;min&rdquo;(分钟), &ldquo;h&rdquo;(小时), &ldquo;d&rdquo;(天), &ldquo;w&rdquo;(周) 。 对于 <code>Type=oneshot</code> 类型的 service 单元， 这些选项没有意义(相当于全部被禁用)。 对于其他类型的 service 单元，可以在单元文件中设置 <code>TimeoutStartSec=</code>, <code>TimeoutStopSec=</code>, <code>RestartSec=</code> 以覆盖此处设置的默认值 (参见<a href="http://www.jinbuguo.com/systemd/systemd.service.html##">systemd.service(5)</a>)。 对于其他非 service 类型的单元， <code>DefaultTimeoutStartSec=</code> 是 <code>TimeoutSec=</code> 的默认值。</p>
<p>注1：尽量不要使用上面更改。应该在完全清楚自己的更改造成的影响、产生的作用的前提下，做出更改。</p>
<p>注2：作为桌面操作系统，如果有硬件驱动或其他各种莫名问题，可以尝试升级到最新版本来解决。</p>
<h3 id="acpi-error-ae_already_existshttpsaskubuntucomquestions1064528cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists"><a href="https://askubuntu.com/questions/1064528/cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists">ACPI ERROR: AE_ALREADY_EXISTS</a><a hidden class="anchor" aria-hidden="true" href="#acpi-error-ae_already_existshttpsaskubuntucomquestions1064528cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists">#</a></h3>
<p>These kinds of &ldquo;errors&rdquo; have been discussed ad nauseam, it&rsquo;s simply the kernel telling you that the ACPI information received from the system seems to be incomplete in some way, update your BIOS/UEFI in hopes for a proper fix or ignore the error if you don&rsquo;t notice anything off with your system.</p>
<p>(And please don&rsquo;t do something dumb like setting acpi=off just to get rid of these messages)</p>
<h3 id="cant-run-csgo-at-fullscreenhttpsaskubuntucomquestions1114857cant-run-csgo-at-fullscreen-ubuntu-18-10"><a href="https://askubuntu.com/questions/1114857/cant-run-csgo-at-fullscreen-ubuntu-18-10">Can&rsquo;t run CS:GO at fullscreen</a><a hidden class="anchor" aria-hidden="true" href="#cant-run-csgo-at-fullscreenhttpsaskubuntucomquestions1114857cant-run-csgo-at-fullscreen-ubuntu-18-10">#</a></h3>
<ol>
<li>Open Steam</li>
<li>Go to the &ldquo;Library&rdquo;</li>
<li>Right-click the game which needs to be reconfigured</li>
<li>Select &ldquo;Properties&rdquo; from the menu</li>
<li>Click the &ldquo;Set launch options&hellip;&rdquo; button</li>
<li>type: -full and save</li>
</ol>
<h3 id="how-to-disable-lock-in--kubuntuhttpswwwubuntubuzzcom201604how-to-disable-suspend-lock-ubuntu-kubuntuhtmlm1textto20disable20kde20lock20behavior2c20in20the20sameactions20post20tags203a20kde2c20kubuntu2c20ubuntu2c20unity"><a href="https://www.ubuntubuzz.com/2016/04/how-to-disable-suspend-lock-ubuntu-kubuntu.html?m=1#:~:text=To%20disable%20KDE%20lock%20behavior%2C%20in%20the%20same,actions.%20Post%20Tags%20%3A%20KDE%2C%20Kubuntu%2C%20Ubuntu%2C%20unity">How To Disable Lock In  Kubuntu</a><a hidden class="anchor" aria-hidden="true" href="#how-to-disable-lock-in--kubuntuhttpswwwubuntubuzzcom201604how-to-disable-suspend-lock-ubuntu-kubuntuhtmlm1textto20disable20kde20lock20behavior2c20in20the20sameactions20post20tags203a20kde2c20kubuntu2c20ubuntu2c20unity">#</a></h3>
<p>open Workspace &gt; Desktop Behavior &gt; Screen Locking &gt; uncheck Lock screen option</p>
<h3 id="gnome-3-displays-two-icons-for-same-apphttpsaskubuntucomquestions898474why-do-some-applications-have-two-icons-in-usr-share-application"><a href="https://askubuntu.com/questions/898474/why-do-some-applications-have-two-icons-in-usr-share-application">Gnome 3 displays two icons for same app</a><a hidden class="anchor" aria-hidden="true" href="#gnome-3-displays-two-icons-for-same-apphttpsaskubuntucomquestions898474why-do-some-applications-have-two-icons-in-usr-share-application">#</a></h3>
<p>No, there&rsquo;s nothing wrong with your system.</p>
<p>The duplicated launcher icons explained:</p>
<p>The different icons are different commandline options. Some context applications with call the associated *.desktop icon. The exec option of the icon will depend on how the application is called.</p>
<p>Some of the Icons you show in your image may be obvious because of the difference in the way they are named. You can see the difference in the way the app is called by right clicking and clicking on properties to see other differences.</p>
<p>Some of the <code>*.desktop</code> files have a <code>%U</code> argument, used so the application will accept arguments.</p>
<p>Some of the Launchers are different commands that are called differently and are named differently often by a symbolic link.</p>
<p>Some exampes from the list in you image are:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Name: Online Accounts
Command: unity-control-center credentials

Name: Online Accounts
Command: Online account credentials and settings

Name: Personal File Sharing
Command: gnome-file-share-properties

Name: Rhythmbox
Command: rhythmbox %U

Name: Rhythmbox
Command rhythmbox-client --select-source %U
</code></pre></div><h3 id="ssh_exchange_identification-connection-closed-by-remote-hosthttpswwwzhihucomquestion20023544"><a href="https://www.zhihu.com/question/20023544">ssh_exchange_identification: Connection closed by remote host</a><a hidden class="anchor" aria-hidden="true" href="#ssh_exchange_identification-connection-closed-by-remote-hosthttpswwwzhihucomquestion20023544">#</a></h3>
<p>原因是 Clash 开了 TUN 模式。关闭掉就好了。</p>
<h3 id="disk-show-129986-tb">Disk show 129986 TB<a hidden class="anchor" aria-hidden="true" href="#disk-show-129986-tb">#</a></h3>
<blockquote>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:16 AM]
<img loading="lazy" src="/Distributions/photo_2022-02-07_11-41-09.jpg" alt=""  />

这个是怎么回事啊</p>
<p>雪梨, [2/7/22 11:21 AM]
分区表坏了？</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:21 AM]
直接再分区吗？</p>
<p>雪梨, [2/7/22 11:21 AM]
请鸽鱼老师看看诶</p>
<p>雪梨, [2/7/22 11:22 AM]
还能挂载就先备份数据好了</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:22 AM]
好的</p>
<p>Pegion Fish, [2/7/22 11:25 AM]
JMS炸了？
建议备份数据重建分区表
先重新插一次USB和硬盘</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:27 AM]
重插了
用fdisk 重建吗？</p>
<p>Pegion Fish, [2/7/22 11:28 AM]
还是不正常？
硬盘也重新插一下</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:28 AM]
恩</p>
<p>雪梨, [2/7/22 11:28 AM]
重建分区表，不是删掉分区再新增分区</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:30 AM]
断电后自动好了
这是怎么回事啊</p>
<p>Thor Luo Bing-, [2/7/22 11:31 AM]
硬盘清空了</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:32 AM]
没有，东西还在</p>
<p>Pegion Fish, [2/7/22 11:32 AM]
啊
这不是争产的吗
1T啊
这就是JMS主控抽风</p>
</blockquote>
<h3 id="no-caching-mode-page-found">No Caching mode page found<a hidden class="anchor" aria-hidden="true" href="#no-caching-mode-page-found">#</a></h3>
<p>during early boot, I get following error message:</p>
<pre tabindex="0"><code>[sdb] No Caching mode page found
[sdb] Assuming drive cache: write through
</code></pre><p>If I understand correctly, this is actually just a harmless info message and not an actual error. <code>sdb</code> is my USB disk, and it does not use caching .</p>
<p>Hard disks have a small amount of RAM cache to speed up write operations. The system can write a chunk of data to the disk cache without actually waiting for it to be written to the disk. This is sometimes called &ldquo;write-back&rdquo; mode. If there is no cache on the disk, data is directly written to it in &ldquo;write-through&rdquo; mode. The Asking for cache data failed warning usually occurs with devices such as USB flash drives, USB card readers, etc. which present themselves as SCSI devices to the system (sdX), but have no cache. The system asks the device: &ldquo;Do you have a cache?&rdquo; and gets no response. So it assumes there is no cache and puts it in &ldquo;write-through&rdquo; mode.</p>
<h3 id="certificate-verification-failedhttpsblogcsdnnetchaowanqarticledetails121559709"><a href="https://blog.csdn.net/Chaowanq/article/details/121559709">Certificate verification failed</a><a hidden class="anchor" aria-hidden="true" href="#certificate-verification-failedhttpsblogcsdnnetchaowanqarticledetails121559709">#</a></h3>
<p>首先更改源文件，将所有的 https 改成 http ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/apt/sources.list
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
<span style="color:#ae81ff">1234</span>
</code></pre></div><p>然后安装/更新证书 ca-certificates：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get update
$ sudo apt-get install --reinstall ca-certificates
</code></pre></div><p>最后将镜像源文件改回 https：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/apt/sources.list
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
$ sudo apt-get update
</code></pre></div><h3 id="move-and-overwrite-subdirectories-and-files-to-parent-directoryhttpsunixstackexchangecomquestions9899how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory"><a href="https://unix.stackexchange.com/questions/9899/how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory">Move and overwrite subdirectories (and files) to parent directory</a><a hidden class="anchor" aria-hidden="true" href="#move-and-overwrite-subdirectories-and-files-to-parent-directoryhttpsunixstackexchangecomquestions9899how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory">#</a></h3>
<p>You will have to copy them to the destination and then delete the source, using the commands <code>cp -r * ..</code> followed by <code>rm -rf *</code>.</p>
<p>I don&rsquo;t think you can &ldquo;merge&rdquo; directories using <code>mv</code>.</p>
<h3 id="system-program-problem-detectedhttpswwwcnblogscomcrazyackingp5451861html"><a href="https://www.cnblogs.com/crazyacking/p/5451861.html">System program problem detected</a><a hidden class="anchor" aria-hidden="true" href="#system-program-problem-detectedhttpswwwcnblogscomcrazyackingp5451861html">#</a></h3>
<p>The error &ldquo;System program problem detected&rdquo; comes up when a certain  application crashes. Ubuntu has a program called Apport that is  responsible for detecting such crashes and upon user consent, report  these crashes to developers. This process intends to get the problem  fixed by the developers.</p>
<p>However it can be very annoying to common users, and there is no  point in showing errors to users when they cannot do anything about it  themselves. So you might want to disable them.</p>
<p><img loading="lazy" src="/Distributions/system-program-problem-detected.png" alt=""  />
</p>
<p><strong>Remove crash report files</strong></p>
<p>The apport system creates crash report files in the /var/crash  directory. These crash report files cause the error message to appear  everytime Ubuntu boots.</p>
<pre tabindex="0"><code>$ cd /var/crash
$ ls
_opt_google_chrome_chrome.1000.crash
_usr_lib_chromium-browser_chromium-browser.1000.crash
_usr_sbin_ulatencyd.0.crash
_usr_share_apport_apport-gtk.1000.crash
</code></pre><p>Just remove the crash report files</p>
<pre tabindex="0"><code>$ sudo rm /var/crash/*
</code></pre><p>After removing all the crash report files, the error message should  stop popping up. However if a new crash takes place then it would appear again in future.</p>
<p><strong>Turn off apport</strong></p>
<p>After removing the old crash reports, if you still get the same error message, then you can completely turn off apport to get rid. Edit the  configuration file at /etc/default/apport.</p>
<pre tabindex="0"><code>$ gksudo gedit /etc/default/apport
</code></pre><p>The file would contain something like this</p>
<pre tabindex="0"><code># set this to 0 to disable apport, or to 1 to enable it
# you can temporarily override this with
# sudo service apport start force_start=1
enabled=1
</code></pre><p>Just set the value of enabled to 0, and this will disable apport.</p>
<pre tabindex="0"><code>enabled=0
</code></pre><p>Save the file and close it. From the next boot onwards, there should  be no error messages ever. If you do not want to restart the system then restart apport from the command line.</p>
<pre tabindex="0"><code>$ sudo restart apport
</code></pre><h3 id="i915-000000020-drm-error-cpu-pipe-a-fifo-underrunhttpsbbsarchlinuxorgviewtopicphpid263720"><a href="https://bbs.archlinux.org/viewtopic.php?id=263720">i915 0000:00:02.0: [drm] <em>ERROR</em> CPU pipe A FIFO underrun</a><a hidden class="anchor" aria-hidden="true" href="#i915-000000020-drm-error-cpu-pipe-a-fifo-underrunhttpsbbsarchlinuxorgviewtopicphpid263720">#</a></h3>
<p>Hi everyone, thanks for the help, after digging into the specific kernel issue page for i915 Intel drivers, I&rsquo;ve found the problem and the temporary fix.</p>
<p>The problem has to do with issues related to C-States, or Intel&rsquo;s powersaving states. On kernel&rsquo;s 5.4 and below, only a max of PC3 is allowed, whereas in kernels 5.4+, deeper states (more powersaving) is used.</p>
<p>As james reports in</p>
<p><a href="https://gitlab.freedesktop.org/drm/intel/-/issues/272">https://gitlab.freedesktop.org/drm/intel/-/issues/272</a></p>
<blockquote>
<p>This problem seems to be related to the activity of deep package sleep states (on my hardware PC7 and deeper). I built and booted a 5.4 kernel and the problem went away, but that&rsquo;s only because it wasn&rsquo;t allowing package sleep states deeper than PC3.
Check in powertop that states deeper than PC6 are actually being used under 5.4 and 5.8.</p>
</blockquote>
<p>and</p>
<blockquote>
<p>I&rsquo;ve not found a fix, just worked around it with intel_idle.max_cstate=4.</p>
</blockquote>
<p>I have tested this, and adding</p>
<pre tabindex="0"><code>intel_idle.max_cstate=4
</code></pre><p>to the cmdline of my kernel startup, does indeed fix my issues. While this bug is not yet solved in the kernel, I will mark it as solved here, as there&rsquo;s nothing Arch Devs can really do about it. Please follow these issues for more information on fixes.</p>
<p>Related issue articles:
<a href="https://gitlab.freedesktop.org/drm/intel/-/issues/2077">https://gitlab.freedesktop.org/drm/intel/-/issues/2077</a></p>
<h3 id="evince-document-viewer420-does-not-remember-last-page-in-2204httpsaskubuntucomquestions1403672evince-document-viewer42-0-does-not-remember-last-page-in-22-04"><a href="https://askubuntu.com/questions/1403672/evince-document-viewer42-0-does-not-remember-last-page-in-22-04">Evince Document Viewer(42.0) does not remember last page in 22.04</a><a hidden class="anchor" aria-hidden="true" href="#evince-document-viewer420-does-not-remember-last-page-in-2204httpsaskubuntucomquestions1403672evince-document-viewer42-0-does-not-remember-last-page-in-22-04">#</a></h3>
<p>Somebody added in launchpad that it could be related to apparmor, and I&rsquo;ve tried temporarily disabling it with <code>sudo apparmor_parser -R /etc/apparmor.d/usr.bin.evince</code> as suggested by the poster. And both issues were solved.</p>
<p>or</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo ln -s /etc/apparmor.d/usr.bin.evince /etc/apparmor.d/disable/
$ sudo systemctl restart apparmor.service
$ sudo syst
</code></pre></div><h3 id="how-can-i-create-launchers-on-my-desktophttpsaskubuntucomquestions64222how-can-i-create-launchers-on-my-desktop"><a href="https://askubuntu.com/questions/64222/how-can-i-create-launchers-on-my-desktop">How can I create launchers on my desktop?</a><a hidden class="anchor" aria-hidden="true" href="#how-can-i-create-launchers-on-my-desktophttpsaskubuntucomquestions64222how-can-i-create-launchers-on-my-desktop">#</a></h3>
<blockquote>
<p><strong>Note:</strong> <code>gnome-desktop-item-edit</code> was removed from <code>gnome-panel</code> in 19.10 (see <a href="https://askubuntu.com/q/1184733/">gnome-desktop-item-edit: command not found on Ubuntu 19.10 and later even with the &lsquo;gnome-panel&rsquo; package installed</a>). So, this answer is unlikely to work for 19.10 and later.</p>
</blockquote>
<p>The old GUI dialog is still available if you still want to use this:</p>
<p>Using ALT+F2 type</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gnome-desktop-item-edit --create-new ~/Desktop
</code></pre></div><p>This will launch the old GUI Dialog and create a launcher on your Desktop.</p>
<h3 id="解决网易云音乐在-ubuntu-2204-无法运行的问题httpstmeubuntuzh473586"><a href="https://t.me/ubuntuzh/473586">解决网易云音乐在 ubuntu 22.04 无法运行的问题</a><a hidden class="anchor" aria-hidden="true" href="#解决网易云音乐在-ubuntu-2204-无法运行的问题httpstmeubuntuzh473586">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /tmp
$ wget http://security.ubuntu.com/ubuntu/pool/main/g/glib2.0/libglib2.0-0_2.64.6-1~ubuntu20.04.3_amd64.deb
$ wget http://mirrors.kernel.org/ubuntu/pool/main/p/pango1.0/libpangocairo-1.0-0_1.44.7-2ubuntu4_amd64.deb

$ dpkg -x libglib2.0-0_2.64.6-1~ubuntu20.04.3_amd64.deb fakeroot
$ dpkg -x libpangocairo-1.0-0_1.44.7-2ubuntu4_amd64.deb fakeroot

$ sudo cp fakeroot/usr/lib/x86_64-linux-gnu/libgio-2.0.so.0 fakeroot/usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0 /opt/netease/netease-cloud-music/libs/
</code></pre></div><h3 id="解决-ubuntu-2204-无法启动-wpshttpstmeubuntuzh478461"><a href="https://t.me/ubuntuzh/478461">解决 ubuntu 22.04 无法启动 wps</a><a hidden class="anchor" aria-hidden="true" href="#解决-ubuntu-2204-无法启动-wpshttpstmeubuntuzh478461">#</a></h3>
<p>需要安装旧版 libssl1.1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget http://security.ubuntu.com/ubuntu/pool/main/o/openssl/libssl1.1_1.1.1f-1ubuntu2.13_amd64.deb
$ sudo apt install libssl1.1_1.1.1f-1ubuntu2.13_amd64.deb
</code></pre></div><p>然后就能启动 wps 了，</p>
<p>或者也可以安装 snap 版 wps 2019</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo snap install wps-2019-snap
</code></pre></div><h3 id="ibus-rime-重复输入拼音">ibus-rime 重复输入拼音<a hidden class="anchor" aria-hidden="true" href="#ibus-rime-重复输入拼音">#</a></h3>
<p>ibus rime在输入框输入中文，但是不按 enter，鼠标点击输入框其他地方，再点击输入框，之前输入的字符就会重新输入一遍。怎样使rime输入中文时候，点击其他地方后清空之前输入的拼音呢？</p>
<ul>
<li>可以在 ibus 设置里取消“多个窗口间共享输入法状态”。但这只能解决多个窗口重复输入问题，单个窗口重复输入无法解决。</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sakamotokurome.github.io/tags/unix/">Unix</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/ubuntu/">Ubuntu</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://sakamotokurome.github.io/posts/fedora/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Fedora</span>
  </a>
  <a class="next" href="https://sakamotokurome.github.io/posts/ubuntup3system/">
    <span class="title">Next Page »</span>
    <br>
    <span>Ubuntu System</span>
  </a>
</nav>

  </footer>
</article>


<script src="https://giscus.app/client.js"
        data-repo="SakamotoKurome/SakamotoKurome.github.io"
        data-repo-id="R_kgDOGhTL4w"
        data-category="Announcements"
        data-category-id="DIC_kwDOGhTL484CSh4m"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://sakamotokurome.github.io/">Sakamoto Kurome</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
