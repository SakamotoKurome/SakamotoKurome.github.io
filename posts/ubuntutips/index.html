<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Ubuntu Tips | Sakamoto Kurome</title>
<meta name="keywords" content="Unix, Linux, Ubuntu" />
<meta name="description" content="TIPS BackupYourSystem Rsync 目的在于恢复系统出现的错误，类似于虚拟机的快照。 备份 #!/bin/bash set -o errexit set -o nounset set -o pipefail readonly SOURCE_DIR=/ readonly BACKUP_DIR=/home/kurome/DataBackup readonly DATETIME=&#34;$(date &#39;&#43;%Y-%m-%d_%H:%M:%S&#39;)&#34; readonly BACKUP_PATH=&#34;${BACKUP_DIR}/${DATETIME}&#34; readonly LATEST_LINK=&#34;${BACKUP_DIR}/latest&#34; rsync -av \ --delete &#34;${SOURCE_DIR}/&#34; \ --link-dest &#34;${LATEST_LINK}&#34; \ --exclude={&#34;dev&#34;,&#34;proc&#34;,&#34;sys&#34;,&#34;tmp&#34;,&#34;run&#34;,&#34;mnt&#34;,&#34;media&#34;,&#34;lost&#43;found&#34;,&#34;Trash&#34;,&#34;Downloads/*&#34;,&#34;DataBackup/*&#34;,&#34;DataPool/*&#34;} \ &#34;${BACKUP_PATH}&#34; rm -rf &#34;${LATEST_LINK}&#34; ln -s &#34;${BACKUP_PATH}&#34; &#34;${LATEST_LINK}&#34; 注">
<meta name="author" content="Sakamoto Kurome">
<link rel="canonical" href="https://sakamotokurome.github.io/posts/ubuntutips/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sakamotokurome.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sakamotokurome.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sakamotokurome.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sakamotokurome.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sakamotokurome.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.90.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://sakamotokurome.github.io/custom.css">
<meta name="google-site-verification" content="i2r403EffR8m-KBf7EHi6AYg7tfnMshaXTAynoYPnpE" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2Y212LPQ2"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-K2Y212LPQ2', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Ubuntu Tips" />
<meta property="og:description" content="TIPS BackupYourSystem Rsync 目的在于恢复系统出现的错误，类似于虚拟机的快照。 备份 #!/bin/bash set -o errexit set -o nounset set -o pipefail readonly SOURCE_DIR=/ readonly BACKUP_DIR=/home/kurome/DataBackup readonly DATETIME=&#34;$(date &#39;&#43;%Y-%m-%d_%H:%M:%S&#39;)&#34; readonly BACKUP_PATH=&#34;${BACKUP_DIR}/${DATETIME}&#34; readonly LATEST_LINK=&#34;${BACKUP_DIR}/latest&#34; rsync -av \ --delete &#34;${SOURCE_DIR}/&#34; \ --link-dest &#34;${LATEST_LINK}&#34; \ --exclude={&#34;dev&#34;,&#34;proc&#34;,&#34;sys&#34;,&#34;tmp&#34;,&#34;run&#34;,&#34;mnt&#34;,&#34;media&#34;,&#34;lost&#43;found&#34;,&#34;Trash&#34;,&#34;Downloads/*&#34;,&#34;DataBackup/*&#34;,&#34;DataPool/*&#34;} \ &#34;${BACKUP_PATH}&#34; rm -rf &#34;${LATEST_LINK}&#34; ln -s &#34;${BACKUP_PATH}&#34; &#34;${LATEST_LINK}&#34; 注" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sakamotokurome.github.io/posts/ubuntutips/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-08T15:33:09&#43;08:00" />
<meta property="article:modified_time" content="2022-03-08T15:33:09&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ubuntu Tips"/>
<meta name="twitter:description" content="TIPS BackupYourSystem Rsync 目的在于恢复系统出现的错误，类似于虚拟机的快照。 备份 #!/bin/bash set -o errexit set -o nounset set -o pipefail readonly SOURCE_DIR=/ readonly BACKUP_DIR=/home/kurome/DataBackup readonly DATETIME=&#34;$(date &#39;&#43;%Y-%m-%d_%H:%M:%S&#39;)&#34; readonly BACKUP_PATH=&#34;${BACKUP_DIR}/${DATETIME}&#34; readonly LATEST_LINK=&#34;${BACKUP_DIR}/latest&#34; rsync -av \ --delete &#34;${SOURCE_DIR}/&#34; \ --link-dest &#34;${LATEST_LINK}&#34; \ --exclude={&#34;dev&#34;,&#34;proc&#34;,&#34;sys&#34;,&#34;tmp&#34;,&#34;run&#34;,&#34;mnt&#34;,&#34;media&#34;,&#34;lost&#43;found&#34;,&#34;Trash&#34;,&#34;Downloads/*&#34;,&#34;DataBackup/*&#34;,&#34;DataPool/*&#34;} \ &#34;${BACKUP_PATH}&#34; rm -rf &#34;${LATEST_LINK}&#34; ln -s &#34;${BACKUP_PATH}&#34; &#34;${LATEST_LINK}&#34; 注"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sakamotokurome.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Ubuntu Tips",
      "item": "https://sakamotokurome.github.io/posts/ubuntutips/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Ubuntu Tips",
  "name": "Ubuntu Tips",
  "description": "TIPS BackupYourSystem Rsync 目的在于恢复系统出现的错误，类似于虚拟机的快照。 备份 #!/bin/bash set -o errexit set -o nounset set -o pipefail readonly SOURCE_DIR=/ readonly BACKUP_DIR=/home/kurome/DataBackup readonly DATETIME=\u0026#34;$(date \u0026#39;+%Y-%m-%d_%H:%M:%S\u0026#39;)\u0026#34; readonly BACKUP_PATH=\u0026#34;${BACKUP_DIR}/${DATETIME}\u0026#34; readonly LATEST_LINK=\u0026#34;${BACKUP_DIR}/latest\u0026#34; rsync -av \\ --delete \u0026#34;${SOURCE_DIR}/\u0026#34; \\ --link-dest \u0026#34;${LATEST_LINK}\u0026#34; \\ --exclude={\u0026#34;dev\u0026#34;,\u0026#34;proc\u0026#34;,\u0026#34;sys\u0026#34;,\u0026#34;tmp\u0026#34;,\u0026#34;run\u0026#34;,\u0026#34;mnt\u0026#34;,\u0026#34;media\u0026#34;,\u0026#34;lost+found\u0026#34;,\u0026#34;Trash\u0026#34;,\u0026#34;Downloads/*\u0026#34;,\u0026#34;DataBackup/*\u0026#34;,\u0026#34;DataPool/*\u0026#34;} \\ \u0026#34;${BACKUP_PATH}\u0026#34; rm -rf \u0026#34;${LATEST_LINK}\u0026#34; ln -s \u0026#34;${BACKUP_PATH}\u0026#34; \u0026#34;${LATEST_LINK}\u0026#34; 注",
  "keywords": [
    "Unix", "Linux", "Ubuntu"
  ],
  "articleBody": "TIPS BackupYourSystem Rsync 目的在于恢复系统出现的错误，类似于虚拟机的快照。\n备份\n#!/bin/bash  set -o errexit set -o nounset set -o pipefail readonly SOURCE_DIR=/ readonly BACKUP_DIR=/home/kurome/DataBackup readonly DATETIME=\"$(date '+%Y-%m-%d_%H:%M:%S')\" readonly BACKUP_PATH=\"${BACKUP_DIR}/${DATETIME}\" readonly LATEST_LINK=\"${BACKUP_DIR}/latest\" rsync -av \\  --delete \"${SOURCE_DIR}/\" \\  --link-dest \"${LATEST_LINK}\" \\  --exclude={\"dev\",\"proc\",\"sys\",\"tmp\",\"run\",\"mnt\",\"media\",\"lost+found\",\"Trash\",\"Downloads/*\",\"DataBackup/*\",\"DataPool/*\"} \\  \"${BACKUP_PATH}\" rm -rf \"${LATEST_LINK}\" ln -s \"${BACKUP_PATH}\" \"${LATEST_LINK}\" 注意：\n ${SOURCE_DIR}/必须带反斜杠，否则会备份SOURCE_DIR这个目录，而不是这个目录里的内容。 --exclude=\"Trash\"，Trash被认为为目录，而非文件或文件和目录，并且，它不支持路径~/.local/share/Trash  查看备份大小\n$ sudo du -hs /backup/ 16G /backup/ 整个备份为16GB，所花时间 12m。\n通过 crontab 使之每周一12点自动备份：\n$ sudo crontab -e 0 12 * * 1 /path/.backup.sh 还原\n还原的时候，如果带 --delete，那么就会删除备份时 --exclude= 不包含的内容。还原的时候，同名文件内容会恢复到备份时候的状态。\n$ rsync -av 备份目录 源目录 $ rsync -av /backup/latest/ / TAR 目的在于迁移系统到新硬盘。\nBackup\n$ cd / # THIS CD IS IMPORTANT THE FOLLOWING LONG COMMAND IS RUN FROM / $ tar -cvpzf backup.tar.gz \\ --exclude=/backup.tar.gz \\ --exclude=/proc \\ --exclude=/tmp \\ --exclude=/mnt \\ --exclude=/dev \\ --exclude=/sys \\ --exclude=/run \\  --exclude=/media \\  --exclude=/var/log \\ --exclude=/var/cache/apt/archives \\ --exclude=/usr/src/linux-headers* \\  --exclude=/home/*/.gvfs \\ --exclude=/home/*/.cache \\  --exclude=/home/*/.local/share/Trash / Restoring\n$ sudo tar -xvpzf /path/to/backup.tar.gz -C /media/whatever --numeric-owner $ cd /media/whatever $ mkdir /proc /sys /mnt /media For the system to boot, you will need to restore grub. To do this, you will need to reconfigure it in a chroot:\n$ sudo -s for f in dev dev/pts proc ; do mount --bind /$f /media/whatever/$f ; done $ chroot /media/whatever $ dpkg-reconfigure grub-pc You will get a menu asking you what drive(s) grub should be installed on. Choose whatever drive(s) the computer will be booting from.\nFor more information on repairing grub, see [GrubHowto](https://help.ubuntu.com/community/GrubHowto#Backup, Repairing and Reinstalling GRUB)\ndeja-dup Simple backup tool for GNOME\nconfig files\nThe deja-dup settings can also be changed with dconf-editor in the dconf-tools apt package. The settings are in org.gnome.DejaDup.\n$ gsettings list-recursively org.gnome.DejaDup $ gsettings set org.gnome.DejaDup include-list ['/home/kurome/.aria2', '/home/kurome/.clash', '/home/kurome/.config/autostart', '/home/kurome/.config/Typora', '/home/kurome/.config/variety', '/home/kurome/.hugo', '/home/kurome/.local/bin', '/home/kurome/.local/share/applications', '/home/kurome/.local/share/TelegramDesktop', '/home/kurome/.oh-my-zsh', '/home/kurome/.ssh', '/home/kurome/.telegram', '/home/kurome/.typora', '/home/kurome/Documents', '/home/kurome/Downloads', '/home/kurome/Templates'] from: launchpad.net: How do I also backup my deja Dup settings?\nThe settings used to be stored there, and the files are still present.\nIn more recent version they are stored in:\n~/.config/dconf Others Does the UEFI partition either “MUST” or “SHOULD” be first for some reason? If so why?\nThe key words “SHOULD”, “MUST” and “MAY” (capitalised) in this answer are to be interpreted as described in RFC 2119.\nAn (U)EFI System Partition (ESP from now on):\n MAY reside at the beginning of the disk and SHOULD be FAT32 because of Windows compatibility.  The only official limit is:\n the ESP MUST reside in the first 2.2 Terabytes of the disk.  So, the ESP MUST reside anywhere in those first 2.2 TB of the disk, but there is absolutely no need for the ESP to be the first partition or reside on the beginning of the disk whatsoever. (It’s just that some large company in Redmond, WA advises system integrators differently)…\nI would put it as the last partition on the disk (if ubuntu 20.04 默认 fstab\n# / was on /dev/sda2 during installation UUID=4b66082e-7982-4056-91c2-39cf9177b20f / ext4 errors=remount-ro 0 1 # /boot/efi was on /dev/sda1 during installation UUID=ACEE-47E4 /boot/efi vfat umask=0077 0 1 /swapfile none swap sw 0 0 /boot/efi 是独立分区，而不是 /boot/，如果是 /boot/ 作为独立分区，还原的时候会报错 cannot create symbolic link ‘./initrd.img’: Operation not permitted\nAdd Boot Option Manually\nIn Boot Option Name, type Ubuntu, and in File Name select the file grubx64.efi and then Click on ‘OK’.\n13 个开源备份解决方案\n  Cronopete\n  Deja Dup\n  Rclone\n  Rdiff-backup\n  Restic\n  Rsync\n  BorgBackup：带有压缩和加密特性以用具有数据去重功能的备份解决方案。它基于 BSD 许可证，支持 Linux、MacOS 和 BSD。\n  UrBackup：它可以做镜像和文件的完整和增量备份；你可以保存整个分区或单个目录。它有 Windows、Linux、和 MacOS 客户端，并且采用 GNU Affero 公共许可证。\n  LuckyBackup：根据其网站介绍，“它是一个易于使用、快速（只传输变化部分，而不是全部数据）、安全（在做任何数据操作之前，先检查所有需要备份的目录，以确保数据安全）、可靠和完全可定制的备份解决方案。它在 GPL 许可证下发行。\n  Casync ：一个可寻址内容的同步解决方案 —— 它设计用于备份、同步、存储和检索大文件系统的多个相关版本。它使用 GNU Lesser 公共许可证。\n  Syncthing：用于在两台计算机之间同步文件。它基于 Mozilla 公共许可证使用，根据其网站介绍，它是安全和私密的。它可以工作于 MacOS、Windows、Linux、FreeBSD、Solaris 和 OpenBSD。\n  Duplicati：一个可工作于 Windows、MacOS 和 Linux 上的、并且支持多种标准协议（比如 FTP、SSH、WebDAV 和云服务）、免费的备份解决方案。它的特性是强大的加密功能，并且它使用 GPL 许可证。\n  Dirvish ：一个基于磁盘的虚拟镜像备份系统，它使用 OSL-3.0 许可证。它要求必须安装有 Rsync、Perl5、SSH。\n  Bacula：允许系统管理员去管理备份、恢复、和跨网络的不同种类计算机上的多种数据的一套计算机程序，它支持在 Linux、FreeBSD、Windows、MacOS、OpenBSD 和 Solaris 上运行，并且它的大部分源代码都是基于 AGPLv3 许可证的。\n  BackupPC：一个高性能的、企业级的、可以备份 Linux、Windows 和 MacOS 系统的 PC 和笔记本电脑上的数据到服务器磁盘上的备份解决方案。它是基于 GPLv3 许可证的。\n  Amanda ：一个使用 C 和 Perl 写的备份系统，它允许系统管理员去备份整个网络中的客户端到一台服务器上的磁带、磁盘或基于云的系统。它是由马里兰大学于 1991 年开发并拥有版权，并且它有一个 BSD 式的许可证。\n  Back in Time ：一个为 Linux 设计的简单的备份实用程序。它提供了命令行和图形用户界面，它们都是用 Python 写的。去执行一个备份，只需要指定存储快照的位置、需要备份的文件夹，和备份频率即可。它使用的是 GPLv2 许可证。\n  Timeshift ：一个 Linux 上的备份实用程序，它类似于 Windows 上的系统恢复和 MacOS 上的时间胶囊。它的 GitHub 仓库上介绍说：“Timeshift 通过定期递增的文件系统快照来保护你的系统。这些快照可以在日后用于数据恢复，以撤销某些对文件系统的修改。”\n  Kup ：一个能够帮助用户备份它们的文件到 USB 驱动器上的备份解决方案，但它也可以用于执行网络备份。它的 GitHub 仓库上介绍说：”当插入你的外部硬盘时，Kup 将自动启动并复制你的最新的修改。“\n  How to make a disk image and restore from it later?/Moving entire Linux installation to another drive\nIt’s Clonezilla Live: http://clonezilla.org/\nThe tutorial for Clonezilla can be found here.\nEasy backup/restore of installed system?\nYes you can use remastersys for that.You can see a complete tutorial here\n清理系统 删除不再需要的包 $ sudo apt autoremove APT cache # see the size of this cache $ sudo du -sh /var/cache/apt # remove only the outdated packages $ sudo apt-get autoclean # delete apt cache in its entirety $ sudo apt-get clean apt-get 和软件中心下载的软件包一般放在 /var/cache/apt/archives/ 目录，一般都安装在 /usr/\nJournal logs # check the log size $ journalctl --disk-usage # clear the logs that are older than a certain days $ journalctl --vacuum-time=3d Thumbnails cache # check the size of thumbnail cache $ du -sh ~/.cache/thumbnails $ rm -rf ~/.cache/thumbnails/* Duplicate files Find and remove duplicate files：You can use a GUI tool like FSlint or a command line tool like FDUPES for this task\nOld Linux kernels Remove old Linux kernels\n# List all installed Linux kernels $ sudo dpkg --list 'linux-image*' $ apt-get remove linux-image-VERSION 清理 Snap 与 snap 有关的系统文件都存放在 /var/lib/snapd 目录下。根据你所安装的 Snap 包的数量，这个目录的大小可能在几 GB。\n$ sudo du -sh /var/lib/snapd 根据设计，Snap 至少会在你的系统上保留一个你所安装的软件包的旧版本。你可以通过使用 Snap 命令看到这种行为：\n$ snap list --all 你应该看到同一个软件包被列了两次，而且版本和修订号都不同。\n为了释放磁盘空间，你可以删除额外的软件包版本。你怎么知道要删除哪一个呢？你可以看到，这些较旧的软件包被标记为“禁用”。\n#!/bin/bash # Removes old revisions of snaps # CLOSE ALL SNAPS BEFORE RUNNING THIS set -eu snap list --all | awk '/disabled/{print $1, $3}' | while read snapname revision; do snap remove \"$snapname\" --revision=\"$revision\" done 命令行技巧 Bash 快捷键 编辑命令\n Ctrl + a ：移到命令行首 Ctrl + e ：移到命令行尾 Ctrl + f ：按字符前移（右向） Ctrl + b ：按字符后移（左向） Alt + f ：按单词前移（右向） Alt + b ：按单词后移（左向） Ctrl + xx：在命令行首和光标之间移动 Ctrl + u ：从光标处删除至命令行首 Ctrl + k ：从光标处删除至命令行尾 Ctrl + w ：从光标处删除至字首 Alt + d ：从光标处删除至字尾 Ctrl + d ：删除光标处的字符 Ctrl + h ：删除光标前的字符 Ctrl + y ：粘贴至光标后 Alt + c ：从光标处更改为首字母大写的单词 Alt + u ：从光标处更改为全部大写的单词 Alt + l ：从光标处更改为全部小写的单词 Ctrl + t ：交换光标处和之前的字符 Alt + t ：交换光标处和之前的单词 Alt + Backspace：与 Ctrl + w 类似，分隔符有些差别  重新执行命令\n Ctrl + r：逆向搜索命令历史 Ctrl + g：从历史搜索模式退出 Ctrl + p：历史中的上一条命令 Ctrl + n：历史中的下一条命令 Alt + .：使用上一条命令的最后一个参数  控制命令\n Ctrl + l：清屏 Ctrl + o：执行当前命令，并选择上一条命令 Ctrl + s：阻止屏幕输出 Ctrl + q：允许屏幕输出 Ctrl + c：终止命令 Ctrl + z：挂起命令  Bang (!) 命令\n !!：执行上一条命令 !blah：执行最近的以 blah 开头的命令，如 !ls !blah:p：仅打印输出，而不执行 !$：上一条命令的最后一个参数，与 Alt + . 相同 !$:p：打印输出 !$ 的内容 !*：上一条命令的所有参数 !*:p：打印输出 !* 的内容 ^blah：删除上一条命令中的 blah ^blah^foo：将上一条命令中的 blah 替换为 foo ^blah^foo^：将上一条命令中所有的 blah 都替换为 foo  你可能不知道的SHELL Shell也叫做命令行界面，它是*nix操作系统下用户和计算机的交互界面。Shell这个词是指操作系统中提供访问内核服务的程序。\n这篇文章向大家介绍Shell一些非广为人知、但却实用有趣的知识，权当品尝shell主食后的甜点吧。\n科普\n先科普几个你可能不知道的事实：\n  Shell几乎是和Unix操作系统一起诞生，第一个Unix Shell是肯·汤普逊（Ken Thompson）以Multics上的Shell为模范在1971年改写而成，并命名Thompson sh。即便是后来流行的bash（shell的一种变体），它的年龄实际上比当前流行的所有的Linux kernel都大，可谓在Linux系统上是先有Shell再有Kernel。\n  当前绝大部分*nix和MacOS操作系统里的默认的Shell都是bash，bash由Brian Fox在1987年创造，全称Bourne Again shell ( bash)。\n  你或许听说除了bash之外，还有Bourne shell ( sh)，Korn shell ( ksh)，C shell （包括 csh and tcsh），但是你知道这个星球上一共存在着大约50多种不同的shell么？想了解他们，请参考 http://www.freebsd.org/ports/shells.html。\n  一些强大的命令\n  在命令行前加空格，该命令不会进入history里。\n  ctrl-x e\n快速启动你的默认编辑器（由变量$EDITOR设置）。\n  为什么说 zsh 是 shell 中的极品？ 色彩高亮\n并不是传统基于正则表达式的色彩高亮，而是真的会判断你输入的是啥的色彩高亮。\n比如一个主题白色代表普通命令或者程序，红色代表错误命令，青色的代表内建命令或者 alias （echo 和 ls ），这些都不是正则判断出来的，是真的去检查的。非零的错误码（上一条命令错误），也可以高亮显示。\n命令提示\n注意，命令提示和补全是两个完全不同的系统，很多时候提示比补全更有用。你输入命令，后面就用灰色给你提示命令的参数，而且是随着你动态输入完每一个字母不断修正变化。\n这个命令提示是基于你的历史命令数据库进行分析的，随着你输入的命令越来越多，提示将会越来越准确和顺手。\n如果你觉得它提示的正确，你可以 CTRL+F 表示采纳，后面就会自动帮你一次性全部输入完了。\n智能补全\n缩写路径补全：\n$ cd /v/w/h 敲一个TAB\n$ cd /var/www/html/ 补全目录、命令参数补全连敲两次TAB进入选择模式，除了 tab/shift+tab 可以前后切换外，你还可以使用光标键上下左右移动。回车表示确认选择，用 CTRL+G 表示退出。\n快速跳转\n输入 cd 后面加一个减号后，按一次 tab 马上就列出本次登陆后去过的最近几次路径，接着根据下面的提示输入数字按回车就过去了，比如输入：\n$ cd -5  当然你还可以不输入数字，而是再按一次 tab 进入选择模式，上下键或者 ctrl+n/p 来选择，回车确认，ctrl+g 返回。\n自动跳转\n敲入 z 命令，列出了自从我开始用zsh进入过的目录和他们的权重，进入次数越多，权重越大。z 后面加一个关键词就能跳转到所有匹配的历史路径中权重最高的那个了。空格分隔多个关键字，z会先匹配出第一个来，然后再匹配第二个…\n使用：“z -l foo\" 可以列出包含 foo 的所有历史路径。\n# 按下ALT+O 就执行 cd .. 命令 bindkey -s '\\eo' 'cd ..\\n' # 按下 ALT+; 就执行 ls -l 命令 bindkey -s '\\e;' 'ls -l\\n' 热键绑定\nzsh 里面使用 bindkey 命令可以设置一系列热键，用来运行某一个 zsh 内部命令或者某个 shell 命令。\n应该知道的LINUX技巧 首先，我想告诉大家，在Unix/Linux下，最有效率技巧的不是操作图形界面，而是命令行操作，因为命令行意味着自动化。\n日常\n  请man bash后查找Readline Key Bindings一节来看看bash的默认热键，比如：Alt-. 把上一次命令的最后一个参数打出来，而Alt-* 则列出你可以输入的命令。\n  回到上一次的工作目录： cd – （回到home是 cd ~）\n  pstree -p 可以帮你显示进程树。\n  使用 pgrep 和 pkill 来找到或是kill 某个名字的进程。 (-f 选项很有用).\n  通过  在 bash中，使用重定向到标准输出和标准错误。如： some-command logfile 2\u00261。\n  使用 man ascii 来查看 ASCII 表。\n  系统调试\n  如果你想知道磁盘、CPU、或网络状态，你可以使用 iostat, netstat, top (或更好的 htop), 还有 dstat 命令。你可以很快地知道你的系统发生了什么事。关于这方面的命令，还有iftop, iotop等。\n  要了解内存的状态，你可以使用free和vmstat命令。具体来说，你需要注意 “cached” 的值，这个值是Linux内核占用的内存。还有free的值。\n  如果你要找到哪个socket或进程在使用网络带宽，你可以使用 iftop 或 nethogs。\n  如果你要抓网络包的话，试试 wireshark 或 tshark。\n  了解 strace 和 ltrace。这两个命令可以让你查看进程的系统调用，这有助于你分析进程的hang在哪了，怎么crash和failed的。你还可以用其来做性能profile，使用 -c 选项，你可以使用-p选项来attach上任意一个进程。\n  了解用ldd命令来检查相关的动态链接库。注意：ldd的安全问题\n  使用gdb来调试一个正在运行的进程或分析core dump文件。参看我写的《GDB中应该知道的几个调试方法》\n  学会到 /proc 目录中查看信息。这是一个Linux内核运行时记录的整个操作系统的运行统计和信息，比如： /proc/cpuinfo, /proc/xxx/cwd, /proc/xxx/exe, /proc/xxx/fd/, /proc/xxx/smaps.\n  如果你调试某个东西为什么出错时，sar命令会有用。它可以让你看看 CPU, 内存, 网络, 等的统计信息。\n  使用 dmesg 来查看一些硬件或驱动程序的信息或问题。\n  powerline-shell 不想每次都安装 zsh 与 ohmyzsh？\n$ pip install powerline-shell Add the following to your .bashrc file:\nfunction _update_ps1() { PS1=$(powerline-shell $?) } if [[ $TERM != linux \u0026\u0026 ! $PROMPT_COMMAND =~ _update_ps1 ]]; then PROMPT_COMMAND=\"_update_ps1; $PROMPT_COMMAND\" fi 默认的话，路径会完整显示，会很长\ngenerate the default config at this location using:\n$ mkdir -p ~/.config/powerline-shell \u0026\u0026 \\ powerline-shell --generate-config  ~/.config/powerline-shell/config.json Segment Configuration\n{ \"segments\": [ \"virtual_env\", \"username\", \"hostname\", \"ssh\", \"cwd\", \"git\", \"hg\", \"jobs\", \"root\" ], + \"cwd\": + { + \"max_depth\": 1 + } } 检测硬盘坏道和坏块 硬盘坏道分为物理坏道和逻辑坏道。\n 物理坏道：就是硬盘实体有坏的地方，物理坏道推荐换硬盘，当然也有办法重新分区来隔离坏道，不过可能也用不久，所以不推荐。 逻辑坏道：是磁盘磁道上面的校验信息（ECC）跟磁道的数据对不上号所致。出现这一故障的原因，通常都是因为一些程序的错误操作或是该处扇区的磁介质开始出现不稳定的先兆。物理坏道也是逻辑坏道产生的一种原因。  发现 dmesg：当有硬盘坏道时，通常在dmesg输出的信息中会有 Buffer I/O Error，所以经常检查dmesg的输出可以及时发现是否存在硬盘问题。\n检测 通过fdisk 查看显示所有磁盘或闪存的信息\n$ sudo fdisk -l /dev/sd* 使用 badlocks检查 linux 硬盘上的坏道/坏块\n$ sudo badblocks -s -v /dev/sdb  badsectors.txt 修复 查看上述分区检查出来的坏道信息\n$ tail -f badsectors.txt 先备份数据再修复磁盘。硬盘在使用时不能修复，否则可能存在写并发的问题，所以修复前需要umount对应分区,或使用 Live CD\n$ sudo umount MountPoint umount 分区成功后，修复命令如下，其中-w表示写入修复的，后面是结束（END）和开始（START）块号，注意END在前，START在后。\n$ sudo badblocks -s -w /dev/sdb 205971590 205971595 修复后再次检查\n$ sudo badblocks -s -v /dev/sdb 205971590 205971595 屏蔽 执行e2fsck（针对 ext2/ext3/ext4 文件系统）或fsck命令，命令中还需要用到 badsectors.txt 文件和设备文件。\n# for ext2/ext3/ext4 $ sudo e2fsck -l badsectors.txt /dev/sdb # others $ sudo fsck -l badsectors.txt /dev/sdb 如何探索 從「指令」找到「使用說明」\n找使用說明\n$ man -f ls 閱讀使用說明\n$ man ls $ man 1 ls # 若是「bash」內建的指令，則是可以使用「help」 $ help if 上面的「man 1 ls」，「1」指的是「Manpage Sections」。\n執行下面指令可以看到各個「Section」的簡介。\n$ whatis intro 然後分別執行下面的指令，可以閱讀更詳細的說明\n$ man 1 intro $ man 2 intro $ man 3 intro $ man 4 intro $ man 5 intro $ man 6 intro $ man 7 intro $ man 8 intro 從「指令」找到「所屬套件」\n先透過「whereis」來找到「ls」所在的確切路徑。\n$ whereis ls ls: /bin/ls 然後根據這個結果，再執行下面的指令\n$ rpm -qf /bin/ls $ dpkg -S /bin/ls coreutils-8.32-1.2.x86_64 找「已安裝套件」的「檔案列表」\n$ rpm -ql coreutils $ dpkg -L coreutils Transfer files between Linux and Android  Connect Using USB Cable Apps  KDE Connect/GSConnect Android File Transfer AirDroid   Bluetooth  Xorg vs Wayland X即X11、X Window System，是用于在类UNIX的操作系统上的位图显示的窗口系统，提供了GUI环境的基本框架。X由X.Org Foundation维护，遵守MIT协议，当前参考实现为X.Org Server。在架构方面，X使用了C/S模型，客户端和服务器可以在同一个机器上，也可以在不同的机器上，X作为Server为应用程序这个Client提供显示和I/O服务。\nWayland是一个显示服务协议，服务端为Wayland Compositor，把X的X Server和Compositor合二为一，旨在替换X，作为类Unix操作系统上更现代、简介的窗口系统，遵守MIT协议，提供了Wayland Compositor的参考C语言实现Weston。\n时至今日，原本在X Server中做的事很多已被移到kernel或者单独的库中，因此X Server就显得比较累赘了。Wayland在架构上去掉了这个中间层，将compositor作为display server，使client与compositor直接通信，从而在灵活性和性能等方面上能够比前辈更加出色。\n查看是否使用 wayland\n$ echo $XDG_SESSION_TYPE Fedora、openSUSE 群讨论\nAppImage的制造者就是其中一个。主要反对的是Wayland声称自己取代X11，但在功能集合上二者完全不在一个层面，后者比前者强太多了。\n而他反对红帽的东西主要是因为红帽一直就是Linux桌面领域比较强权的那个企业，比如早期PulseAudio，比如SystemD，早期多灾多难制造了很多麻烦。\n推出一个新技术，在其不完善的前提下就想着取代旧技术，对于旧技术存在的但新技术不存在的功能却完全不考虑过渡方案，导致技术迭代的过程中用户就一次又一次地被抛弃。尤其和微软对比起来，微软在砍掉很重要的旧功能的时候会有完备的过渡方案，并且对于旧技术依然保持极长的支持周期。不过毕竟Windows 8那时候用户啥反应大家也不是不知道。\n能理解，并且我有时候也会有同样的抱怨，刚学会一个新软件，结果过半年这个软件就被下一次更新抛弃了。AppImage的制造者可能是希望Linux桌面能学习一下微软的一些策略。\n至于为什么反对Flatpak，因为Flatpak是红帽随同Wayland、Gnome一起强推的技术。\nX11 为什么强?\n远程应用，只把远程系统的一个应用程序在本机打开。X下面非常轻松，这就是X功能的一部分。微软的RDP也有同样的功能。并且渲染工作是在发起远程连接的那一段完成的。Wayland下面，没有，完全依赖窗口管理器自己提供的功能，而目前能做到的极限就是个VNC。\n统一的图形库，Xlib，Windows下与之对应的是Win32的UI部分。所有X11的窗口管理器都提供稳定且统一的图形库。在Wayland下面，没有，只能给你push一堆像素点，这就意味着Wayland的应用程序的向下兼容性会比原先X的程序更差。\n统一的窗口管理方式，也是X服务器的标准功能之一，在Windows下面我也不知道对标啥，但只要一个桌面环境用了X，那么应用程序就能确保自己使用一个标准的方法就能管理程序窗口，在Windows下也有同样的保障。Wayland下面，没有，完全依赖窗口管理器暴露的API或者无障碍API。\n接上述，统一的自动化工具实现方式。Windows下面的AutoHotkey不知道多少人用过，在X11下面对应的软件是xdotool。在Wayland下面，没有。ydotool先不说它已经被半弃坑了，最主要的是ydotool调用uinput，只能输入不能获得窗口状态。\n程序的可靠性。在X下面，桌面环境或者渲染器崩溃，应用程序依然健在。并且Windows也是如此的。Wayland下面就不是这么一回事了，至少对于Gnome来讲，shell崩溃就会连着所有程序全部崩溃。KDE的Kwin实现了自己的程序留活机制，但这样便从“所有X11桌面都支持”变成了“只有KDE支持”。\nWayland没有上述所有功能的原因很简单，Wayland不是软件、不是具体实现，它只是个标准，用来显示画面的标准。\n是的，没错，这些本来确实应该交给窗口管理器和渲染器完成。但是，Wayland在不支持这些功能的前提下却表示自己是X11的替代品/延续发展，这就非常地有问题，因为Wayland并没有做到功能上的延续。\n而且，Linux桌面下面的向下兼容性问题极度严重，我不想在这再重复一遍。桌面在用X11的时候，至少还能确保X的功能是一致的，无论跑在什么桌面组合上都不用担心兼容性问题，Wayland的出现，只会让原本离散的桌面更加离散。\nwlroots被称作有希望统一Wayland渲染器的实现方式，可惜在此之前Gnome和KDE已经开始做自己的Wayland实现了，这就意味着从X11转向Wayland，至少分裂成了Gnome、KDE和wlroots，其它桌面会不会突然想不开自己做Wayland实现我们也不知道。而且，三家的分裂，难道还不够折磨吗？\n看看Flameshot的Wayland支持，因为发现Gnome和KDE的运行表现不同，于是放弃了Portals API打算等待wlroots的标准，然而wlroots的标准和Gnome的不互通，于是它的支持计划被延期，无ETA。\n再看看Barrier的Wayland支持，它fork的项目是symless的synergy，这是个商业开源软件。Ubuntu 17.04的时候曾经短暂切换到Wayland，那时候symless就计划开始适配Wayland，之后Ubuntu换回X11，于是Wayland适配计划就被放弃。当一部分软件只跟着一部分发行版走、而不考虑整个Linux桌面生态的时候，Linux桌面便从事实上消失了。接下来便只剩Ubuntu桌面、openSUSE桌面、Fedora桌面了，至少对于ISV来讲是这样的，因为不然的话指数级别的适配难度会把开发者累死。\n我并不是在吹X11诋毁Wayland。只是指出现状。我知道这不是Wayland该做的事情，只是问题是：有谁能来做？\n用户关心的是能不能用上对应的功能，Wayland之后功能少了，那用户就会把锅甩给Wayland。\n这也是AppImage创造者一直反感Wayland的原因之一。\n为什么执行自己的程序要在前面加./ shell是如何运行程序的：如果不给出相对路径，或者绝对路径，那么它会经历下面的查找过程。\n alias中查找 内置命令中查找 PATH中查找  $ cd /temp $ ./ls_bak 等同于\n$ /temp/ls_bak shell通常可以执行两种程序，一种是二进制程序，一种是脚本程序。如果是文本程序，且开头没有指定解释程序，则按照shell脚本处理，如果指定了解释程序，则使用解释程序来解释运行；对于二进制程序，则直接创建新的进程即可。\nLTS There is a new release every 6 months (in April and October), with the version number being year.month (e.g.: 16.04 was released in April 2016). Every two years, the April release is a Long Term Support version.\nLTS releases are the ‘enterprise grade’ releases of Ubuntu and are used the most. An estimated 95% of all Ubuntu installations are LTS releases.\nInterim releases (normal releases) will introduce new capabilities from Canonical and upstream open source projects, they serve as a proving ground for these new capabilities.\n All Interim releases (13.04 and later) are only supported for 9 months. All LTS releases (12.04 and later) are supported for five years (now is ten years) on both the desktop and the server.  Now, support means:\n Updates for potential security problems and bugs (not new versions of software) Availability of Commercial support contracts from Canonical Support by Landscape, Canonical’s enterprise oriented server management tool set  Ubuntu releases additional versions of the last LTS between releases—such as 14.04.1, that incorporate all of the updates up to this point. This is called a Point-Release (or sometimes snapshot). Those are released every quarter to half year, as needed.\nThe most important thing (for most people) is how long you get to use an install without having to do a release upgrade. A non-LTS version of Ubuntu only gets updates for 9 months from its release so to stay up-to-date —which is critically important— you need to upgrade twice a year; you need to upgrade through every Ubuntu version…\nConversely an Ubuntu LTS release is supported for 5 years and you can upgrade directly from LTS to LTS. This gives you long-lived, solid base to target and test on that makes it super-easy to release-upgrade when you decide to. It’s therefore ideal for mass deployment, high-availability systems, and just people who don’t like doing release-upgrades.\n设计shell脚本选项 getopt 写shell脚本的时候，通过while、case、shift来设计脚本的命令行选项是一件比较麻烦的事，因为Unix命令行的选项和参数自由度很高，支持短选项和长选项，参数可能是可选的，选项顺序可能是无所谓的，等等。\nbash下的getopt命令可以解析命令行的选项和参数，将散乱、自由的命令行选项和参数进行改造，得到一个完整的、规范化的参数列表，这样再使用while、case和shift进行处理就简单的太多了。\ngetopt有不同的版本，本文介绍的是它的增强版(enhanced)，相比传统的getopt(也称为兼容版本的getopt)，它提供了引号保护的能力。另外，除了不同版本的getopt，bash还有一个内置命令getopts(注意，有个尾随的字符s)，也用来解析命令行选项，但只能解析短选项。\n要验证安装的getopt是增强版的还是传统版的，使用getopt -T判断即可。如果它什么都不输出，则是增强版，此时它的退出状态码为4。如果输出\"–\"，则是传统版的getopt，此时它的退出状态码为0。如果想在脚本中进行版本检查，可以参考如下代码：\n$ getopt -T \u0026/dev/null;[ $? -ne 4 ] \u0026\u0026 { echo \"not enhanced version\";exit 1; } …\n在中文介面下，如何只用英文目錄名稱？  先切到英文介面再重新開機，此時 Fedora 會問你要不要將子目錄換為英文名稱（選 Yes），再切回中文介面重新開機，Fedora 會再問你一次要不要更改子目錄為中文名稱（選 No），收工！ LANG=C xdg-user-dirs-gtk-update # 同意更新 xdg-user-dirs-gtk-update # 保留且不再問 手動修正配置文件~/.config/user-dirs.dirs ,然後在主目錄下創建對應目錄,重啟即可解決.  dd 制作U盘启动盘 $ dd bs=4M if=fileName.iso of=/dev/sdx status=progress \u0026\u0026 sync Windows 下用 Rufus 且 dd 写入模式\n为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？ 因为 7z 和 zip 压缩格式都不能保留 unix 风格的文件权限，比如解压出个可执行文件要重新 chmod chown 才能恢复正常。而 tar 格式可以。而 tar 本身不提供压缩，无非就是把包括所有文件的內容和权限拼成一个文件而己，所以用另外如 gzip 格式压缩。为什么是 gzip，因为几乎所有 linux 都支持而已。\n置默认编辑器 visudo 等操作会打开默认编辑器，在linux中默认编辑器读取EDITOR环境变量，可通过一下命令设置\nexport EDITOR=nano 可将其加入~/.bashrc文件，使得每次登录都可使用\n$ nano ~/.bashrc export EDITOR=nano $ . ~/.bashrc debian系统提供了一个管理工具来设置默认编辑器\n$ sudo update-alternatives --config editor 有两个相似选项\n /usr/bin/vim.basic /usr/bin/vim.tiny  它们的区别：\nim.basic is just plain vanilla Vim (as you can check with apt-file vim.basic or dpkg -S /usr/bin/vim.basic).\nWhile vim.tiny, as the name implies, is a trimmed-down version of Vim (this question explains it further).\n$ vim.tiny --version 通过Linux系统进入 BIOS $ sudo systemctl reboot --firmware-setup 5 Ways to Check CPU Info in Linux  lscpu /proc/cpuinfo lshw hwinfo dmidecodes hardinfo: gui  exFAT 文件系统\n所谓文件系统，就是文件的储存方式。通过文件系统可以准确找到存储在硬盘中的数据。储存设备都需要指定文件系统，计算机才能读写。\nWindows 的文件系统\n  FAT32：是最老的文件系统，所有操作系统都支持，兼容性最好。但是，它是为 32 位计算机设计的，文件不能超过 232 - 1 个字节，也就是不能超过 4GB，分区不能超过 8TB。\n  NTFS：是 Windows 的默认文件系统，用来替换 FAT32。Linux 下有如下方法创建 NTFS 文件系统\n# gparted $ sudo apt-get install gparted # mkntfs $ sudo apt-get install ntfs-3g $ sudo mkntfs --fast --label myUsbDrive /dev/sdb1 # mkfs $ mkfs.ntfs -f -L DiskLabel /dev/sdb1   exFAT：是 FAT32 的 64位升级版，ex 就是 extended 的缩写（表示\"扩展的 FAT32\"），功能不如 NTFS，但是解决了文件和分区的大小问题，两者最大都可以到 128PB。\n  Linux 的 exFAT 格式化\n$ sudo mkfs.exfat /dev/sdX1 分区表\n所谓硬盘分区，就是指一块硬盘上面，同时存在多个文件系统。每个文件系统管理的区域，就称为一个分区（partition）。\n分区大小、起始位置、结束位置、文件系统等信息，都储存在分区表里面。\n分区表也分成两种格式：MBR 和 GPT。前者是传统格式，兼容性好；后者更现代，功能更强大。\nLogging in as Root in Ubuntu with Live CD $ sudo passwd root How To Download A Large File Faster From Google Drive? Step 1: Fetching Your File ID\n Open your browser and go to your google drive, open login with the account that has the file you wish to download. Locate the file that you wish to download and select it. Right click the file and click on “get shareable link” You don’t need to copy the entire link here; you only need the file ID that we will be using later.  The link will look like this: https://drive.google.com/file/d/XXXXX/view?usp=sharing\nIn this link, you only need to pay attention to the alphanumeric file ID, displayed by XXXXX here.\nStep 2: Getting an OAuth Code\n Visit OAuth 2.0 Playground by clicking here. On the developer’s webpage, in the “Select \u0026 authorize APIs” click on the “Drive API v3” option, and select the: https://www.googleapis.com/auth/drive.readonly option from the available options. Once selected click Authorize APIs button on the bottom right corner of the tab. After you click on the Authorize APIs button you will be transferred to the google account login screen. Select the same google account in which you have your file stored. Allow Google OAuth 2.0 to access your drive if asked. When you get redirected back to the OAuth 2.0 playground screen click on the “Exchange Authorization Code for Tokens” button as shown. Copy the newly generated Access Token and save it on your notepad. You will be needing this in the next step.  Step 3: Downloading The File Using A Command Line Script\n$ curl -H \"Authorization: Bearer YYYYY\" https://www.googleapis.com/drive/v3/files/XXXXX?alt=media -o ZZZZZ In your command, replace “XXXXX” with the file ID from above, “YYYYY” with the access token from above, and “ZZZZZ” with the file name that will be saved (for example, “myFile.mp4” if you’re downloading an mp4 file).\nPress Enter and let the download begin.\nUSB插槽鬆動怎麼辦  手机  充电宝  笔记本  笔记本  nmcheck.gnome.org nmcheck.gnome.org is not malware. It is the gnome network manager connectivity check (for captive portals/hotspots). Click the link and you will see a single text file with a text in it. It should be “NetworkManager is online”.\nCheck /etc/NetworkManager/NetworkManager.conf. There probably is a section with this in it:\n[Connectivity] uri=http://nmcheck.gnome.org/check_network_status.txt on Ubuntu 20.04 no [Connectivity]  line like accepted answer in /etc/NetworkManager/NetworkManager.conf.\nBut you can disable the auto connectivity check by:\n Go to Settings app Go to Privacy menu On Connectivity tab, uncheck Connectivity Checking  XDG_TEMPLATES_DIR If you drop any files in “Templates” folder. Then when you right-click and create a new document, you can select any of these files as a basis for the new file.\nIf you have deleted the folder and need to restore this functionality:\n$ gedit ~/.config/user-dirs.dirs Check that there is a line containing the following - if not, add this line.\nXDG_TEMPLATES_DIR=\"$HOME/Templates\" 软件的稳定性 软件的稳定性其实往往来源于：足够多的使用者与足够多的反馈跟改进。\nLinux系统，在服务器端的大多数常用软件都有足够多的使用者，所以就足够稳定，由于它在服务器端市场占有率远高于微软，所以服务器端就是比微软稳定，很正常的事。\n在桌面端，市场占用率远低于微软，不稳定也是自然的。\n为什么Linux下命令行程序往往又好用又稳定？是因为用户喜欢装逼吗？不是，因为命令行程序是服务器端跟桌面端通用的，而服务器端程序经过了足够多用户的使用，经过了足够的反馈开发迭代，所以稳定。而图形界面只有桌面用户用，桌面占有率那么低，这些程序往往缺乏足够的测试人力也缺乏足够的开发维护人力，所以并不会非常稳定。\n那么，你要想体验Linux稳定，怎么办？答案就是只使用市场占有率高，用户量大，因而获得了充分测试的软件，这就稳定了。比方说只使用服务器端。或者桌面端只使用最常用的那些，例如终端仿真器，浏览器，输入法，gcc编译器之类，肯定是稳定的。\n你看我就用浏览器，输入法，xterm，screen，编程ide，vim，以及一堆命令行的东西，稳定得很啊，六个月才重启一次电脑，重启的那一次还是因为ubuntu升级。\n如何将Google搜索限制为特定语言的结果 只是想在Google搜索中添加有关语言参数的更全面的答案。\n有4种与语言相关的选项。\nWeb界面语言： hl=\n例： www.google.com/search?q=vilnius\u0026hl=lt\nWeb Interface Language Codes hl=zh-CN Chinese (Simplified) hl=zh-TW Chinese (Traditional) hl=en English hl=ja Japanese 指定语言的页面： lr=lang_\n例： www.google.com/search?q=vilnius\u0026lr=lang_lt\nSearch Language Codes lr=lang_zh-CN Chinese (Simplified) lr=lang_zh-TW Chinese (Traditional) lr=lang_en English lr=lang_ja Japanese 来自指定国家/地区的页面： cr=country\n示例：www.google.com/search?q=vilnius\u0026cr=countryLT 请注意，两个国家/地区代码字符必须大写！否则，Google会忽略该参数（自2017年1月3日起）（即使小写字母对于hl=和都适用lr=lang_）。\n还有另一个参数– gl=用于搜索结果，因为它们将显示在指定的国家/地区。我尝试对其进行测试，但对我而言，不同参数值的结果没有不同。浏览器或我的Google帐户的某些其他参数/设置可能已过时或覆盖了该设置。\nTwo Options to Recover Your PC With Android If your PC is out of action, you can install a new operating system or run a recovery environment thanks to Android. Two solid options are available:\n ISO 2 USB: Lets you burn an ISO file directly to a USB flash drive over USB-OTG. DriveDroid: Enables you to store bootable ISO files on Android. With the paid version, support for Windows 10 installation images is added.  good practice to avoid using sudo su It is good practice to avoid performing more actions as root than you need to. sudo facilitates this by allowing you to run individual commands as root without having to log in as root and without needing an interactive root shell for tasks you would otherwise not run a shell to do. But sudo su is not a “backdoor,” it is simply a somewhat less elegant way to do what sudo is designed to allow you to do with sudo -s. Similarly, sudo -i is the more elegant way to achieve what sudo su - would get you: a simulated initial login shell whose environment is like what you would get if you could log in as root on the command line. See man sudo.\nSSHFS: How to Mount Remote File Systems Over SSH SSHFS (SSH File System) is a client for mounting a file system located on a remote machine onto your local system through an SSH connection. Using the SFTP (SSH file transfer protocol), the SSHFS command-line tool mounts a physical or virtual disk locally, allowing file transfer between a local and remote machine.\nThis article demonstrates the installation and usage of SSHFS to mount a remote folder or file system over SSH.\nInstall SSHFS $ sudo apt install sshfs Mount a Remote File System on Linux Step 1: Create Mount Point\nCreate a mount point directory in the mnt folder where the remote file system will be mounted:\n$ sudo mkdir /mnt/Step 2: Mount the Remote File System Using SSHFS\nMount the remote file system to the created mount point using the SSHFS tool:\n$ sudo sshfs [-o ] @://mnt// Enter the login password when requested if using password authentication. If the remote server uses SSH key authorization, provide the path of the private key. For example:\n$ sudo sshfs -o allow_other,IdentityFile=/home/kb/.ssh/id_rsa ubuntu@131.153.142.254:/home/ubuntu/ /mnt/test/ The allow_other option allows access to users other than root.\nStep 3: Unmount a Remote File System on Linux\nLastly, when finished with the mount point, unmount the remote file system with:\n$ sudo umount /mnt/img转化成iso IMG是一种文件归档格式（archive format），主要是为了创建磁盘的映像文件（disk image），它可以用来封装存储整个磁盘（通常指软磁盘，Floppy Disk或Diskette）或整片光盘的内容，使用\".IMG\"这个扩展名的文件就是利用这种文件格式来创建的。\n.IMG这个文件格式可视为.ISO格式的一种超集合。由于.ISO只能封存使用ISO9660和UDF这两种文件系统的存储介质，意即.ISO只能拿来封存CD或DVD，因此才发展出了.IMG，它是以.ISO格式为基础另外新增可封存使用其它文件系统的存储介质的能力，.IMG可向后兼容于.ISO，如果是拿来封存CD或DVD，则使用.IMG和.ISO这两种格式所产生出来的内容是一样的。\n将img 转化成iso的有 nrg2iso 或 ccd2iso，分别下载如下：\n$ sudo apt-get install nrg2iso $ sudo apt-get install ccd2iso 使用如下：\n$ nrg2iso image.nrg image.iso $ ccd2iso HWE The Ubuntu LTS enablement (also called HWE or Hardware Enablement) stacks provide newer kernel and X support for existing Ubuntu LTS releases.\nThe 20.04 LTS HWE Stacks continue to follow Rolling Update Model, as has been in use since 16.04 LTS.\nMicrocode 每当听到有人说“这个问题更新一下微码就好了”，就觉得这个哥哥怎么这么迷人，好像在哪里见过。为了也让自己变成这种迷人的哥哥，我也研究了一下到底什么是微码。\n这里说的是跑在CPU处理器上的微码，不是IBM那群人嘴里说的那个微码。如果你之前没和IBM打过交道那就当这段话不存在。\n计算机体系结构是一层又一层的抽象，典型的比如操作系统对底层硬件的抽象。但鲜有人知的是，操作系统和底层硬件，尤其是CPU之间还存在着几层抽象。什么叫抽象，当然有很多种学术流的解释，但我土气一点的解释就是“不关心”，就是“Don’t care”，就是爱咋地咋地。\n用这个模式套用一下我们熟悉的抽象：操作系统要将数据写入磁盘，它不关心怎么操作磁盘；应用要给某个服务器发个数据包，它也不关心怎么操作网卡。\n回到我们的微码上来。我们现在常见的操作系统都是用C语言编写，它相对于汇编语言来说，也算是一种“高级语言”。编译器会将这种高级语言编译成汇编语言。只要C语言编写时“不关心”汇编指令是啥，那么就是相对汇编语言做了一次抽象。\n马上就到微码了。我们知道汇编指令是执行在CPU上的，那么汇编指令会关心在某个具体型号的CPU上是怎么执行的吗？肯定不会的。汇编的一条ADD指令在80286上可以执行，在最新的Icelake上也能执行，但这两个CPU内部早已发生了天翻地覆的变化，执行ADD的操作已经完全不同了。\n换句话说，就是汇编指令并“不关心”是如何在CPU上执行的。\n操作系统不关心如何操作磁盘和网卡，是因为这些都有对应的设备驱动操心。汇编指令不关心具体如何在CPU中执行，这个就是由微码来操心了。所以用类比的方式，可以把微码类比成汇编指令针对某一型号CPU的驱动。\n同样的汇编指令，会由该型号CPU的微码转成可以跑在该CPU上的微操作（Micro-ops/uops）。这些微操作指导CPU的电路完成汇编指令要求的意图。\n在大家还在编写汇编语言代码的时代，微码为汇编语言的编写提供了方便：\n 只关心汇编逻辑，而不用关心CPU内部电路设计和具体的执行方式 方便设计出新的汇编指令，由微码翻译成具体的执行逻辑，比如循环中“变量自减若大于零则转跳”，可以用一条汇编指令代替，脏活累活都交给微码去干 修复或绕过一些很难修复的处理器数字电路中的Bug  上述第二点也为CISC指令集的实现提供了技术基础。因为不可能所有复杂的指令都是由专门的执行复杂指令的硬件来完成的，也是由简单的数字逻辑模块组合而成的。\n在现代CPU里，是存在专门的将汇编指令翻译成微操作的硬件解码器的。但微码依旧存在（就是CPU微架构图中前端那个Microcode sequencer），它作为一个Lookup Table保存在一块ROM中，用来解码复杂的指令，比如浮点运算的指令等。一般是硬件解码器解码得比较快，而用微码解码会比较慢。\n理论上，如果你能更改某一个处理器的微码，那么经它翻译的指令可以变成任意其他的指令。因为它关心指令如何在CPU电路中执行。所以现在升级微码主要是用来解决处理器的稳定和安全性的问题。\n当然你也可以用它模拟自己没有的汇编指令，比如AVX系列，我只要在看到AVX512的汇编之后，把它翻译成两个“SIMD256”或者四个“SIMD128”指令就好了。\n看到这里，你给自己就又加了一层微码的buff。最后贴心地推荐一篇详细说明Microcode怎么执行的文章：Microprocessor Microcode Simple Example\n安装/更新微码 微码就是由 Intel/AMD 提供的 CPU 固件。Linux 的内核可以在引导时更新 CPU 固件，而无需 BIOS 更新。处理器的微码保存在内存中，在每次启动系统时，内核可以更新这个微码。这些来自 Intel/AMD 的微码的更新可以去修复 bug 或者使用补丁来防范 bug。\n查看当前的微码状态：\n$ sudo dmesg | grep microcode 使用包管理器\n$ sudo apt install intel-microcode 必须重启以激活微码更新：\n$ sudo reboot 手动\n只有在你的 CPU 制造商建议这么做的时候，才可以使用下列的方法去更新/安装微码，除此之外，都应该使用上面的方法去更新。大多数 Linux 发行版都可以通过包管理器来维护、更新微码。使用包管理器的方法是经过测试的，对大多数用户来说是最安全的方式。\nAutomatic Light / Dark Mode for GNOME, this shell extension exists: Night Theme Switcher\n将du的输出按文件大小排序 sdu () { du -sk $@ | sort -n | awk ' BEGIN { split(\"K,M,G,T\", Units, \",\"); FS=\"\\t\"; OFS=\"\\t\"; } { u = 1; while ($1 = 1024) { $1 = $1 / 1024; u += 1 } $1 = sprintf(\"%.1f%s\", $1, Units[u]); sub(/\\.0/, \"\", $1); print $0; }' } 改善触摸板体验 众所周知，Macbook 的触摸板是体验最好的，很多果粉都吹 Macbook 的触摸板用了之后“就不再想要去用鼠标”。\n有一群人搞了一个项目：「Linux Touchpad like Macbook Update」。顾名思义，就是“把 Linux 的触摸板搞的像 Macbook 一样”。\n这个项目的主要作用就是针对现在 Linux 下对于触摸板管理的相关驱动进行一些修改和优化，以提升触摸的使用体验，尤其是包括“多点触摸”等等等。\n$ sudo add-apt-repository ppa:p12/xorg-gestures $ sudo apt-get update 当然，尽管如此，我们也只是在驱动层面改善了触摸，在应用层面还需要另一个工具的帮忙：touchegg\n安装完毕之后你的三指上滑和三指下滑都可以正常使用了，譬如三指上滑是窗口最大化，三指下滑是窗口最小化。\nReset lost root password 警告： 攻击者都可以使用上述方法修改系统，要保证系统安全，请限制物理上的访问，或者使用全磁盘加密。\n使用 LiveCD 通过 LiveCD 可以使用好几种方法：chroot并且使用passwd命令或者擦除密码域条目。任何Linux的LiveCD都可以使用，chroot时它必须匹配已经安装的架构类型。这里仅介绍 chroot 方式，因为这个方法更不容易出错。\n  启动LiveCD，挂载根文件系统.\n  然后通过下列命令重置密码：\n$ passwd --root MOUNT_POINT USER_NAME   卸载根文件系统。\n  重启，记下你的密码。\n  用 Bash 作为 Init   将 init=/bin/bash 内核参数加入启动加载器的启动项.\n  启动后可以看到 Bash 提示符。\n  根文件系统应该是只读挂载，需要以可读写模式重新挂载：\nmount -n -o remount,rw /   用 passwd 创建新的管理员密码。\n  通过 reboot -f 重启，不要再次忘记你的密码。\n  注意： 使用此法时有的键盘不能被初始系统正确加载，你可能不能在bash提示符后输入任何东西。如果出现这种情况，你不得不使用其他方法。\nHow to block internet access to certain programs on Linux The solution for me happened to be straight forward.\n  Create, validate new group; add required users to this group:\n  Create: groupadd no-internet\n  Validate: grep no-internet /etc/group\n  Add user: useradd -g no-internet username\nNote: If you’re modifying already existing user you should run: usermod -a -G no-internet userName check with : sudo groups userName\n    Create a script in your path and make it executable:\n  Create: nano /home/username/.local/bin/no-internet\n  Executable: chmod 755 /home/username/.local/bin/no-internet\n  Content:\n#!/bin/bash sg no-internet \"$@\"     Add iptables rule for dropping network activity for group no-internet:\n  iptables -I OUTPUT 1 -m owner --gid-owner no-internet -j DROP\nNote: Don’t forget to make the changes permanent, so it would be applied automatically after reboot. Doing it, depends on your Linux distribution.\n    Check it, for example on Firefox by running: no-internet \"firefox\"\n  In case you would want to make an exception and allow a program to access local network:\n iptables -A OUTPUT -m owner --gid-owner no-internet -d 192.168.1.0/24 -j ACCEPT iptables -A OUTPUT -m owner --gid-owner no-internet -d 127.0.0.0/8 -j ACCEPT iptables -A OUTPUT -m owner --gid-owner no-internet -j DROP  NOTE: In case of spawning the rules will be maintained. For example, if you run a program with no-internet rule and that program will open browser window, still the rules will be applied.\nHow does Ubuntu make money? Firstly a lot of people work on Ubuntu in their free time (many of them programming, but also those of here for instance answering people’s questions). Also some people donate to Ubuntu.\nHowever there is more to the story. Canonical Ltd. is a private company that created and continues to pay for Ubuntu. We know Canonical hadn’t been making a profit, but Canonical was initially founded by multi-millionaire Mark Shuttleworth which meant it didn’t have to focus on making money right away.\nHowever Canonical is now looking towards to making Ubuntu profitable. (After all, they have 600+ employees to pay every month!) There are some indications this has been successful. Their key revenue streams offer services around Ubuntu:\n Support services (mostly to business) alongside which they sell Landscape Contracting services to businesses (for instance working with OEMs such as Dell, or helping Google with Chrome OS). As Ubuntu makes its way onto mobile phones and TVs then this will grow. Ubuntu Software Centre’s paid section (Canonical takes a cut of purchases) The Canonical Store (selling physical Ubuntu branded items) - discontinued Closed-source projects wishing to use Launchpad.net can purchase a license Ubuntu One (online file storage and synchronization service) and Music Store (selling music from within Ubuntu) - discontinued. Amazon referrals. When you search the Ubuntu Dash, you may see Amazon products (unless you have turned it off). Ubuntu takes a cut of these.[ref]  All of these are areas that Canonical hopes will grow.\n启用 TRIM 当我在运行 Linux 的计算机上安装我的第一块固态驱动器（SSD）后，我开始探索如何用好它们。SSD 在操作方式上与传统磁性驱动器不同，并且它们需要在软件上另行处理以达到功能优化。\n在传统磁盘驱动器上，删除时所删除的文件不会从磁盘中完全删除。这就是为什么你可以恢复已删除的文件的原因。基本上，文件系统仅引用磁盘上文件的位置，并且当文件被删除时，该引用被擦除，以允许你在这些空间中写入新数据覆盖原来的数据。然而，对于 SSD，新数据只能写在驱动器上完全新的或已擦除的单元上。因为必须在写入之前清除空间，如果在写入文件时尚未有足够的可用空间，则必须首先擦除该空间。这可能会对性能产生负面影响。\n如果操作系统在写入新数据之前就擦除了未使用的空间，而不是在写入时同时进行擦除，则可以提高文件保存性能。这种做法就是 TRIM。 TRIM 命令本质上允许你的操作系统告诉驱动器哪些区域的数据不再使用，以便擦除它们，加快驱动器将来的写入，可以 SSD 的用户提供更佳的体验。\n在 Linux 中，fstrim 提供此功能，它可以为写入新数据而准备驱动器，并延长驱动器的使用寿命。由于在我使用的 Linux 发行版上 SSD 的 trim 不是自动的，所以必须去调度该操作，否则 SSD 的性能会随着时间的推移而降低。\n为了在驱动器上运行 fstrim，驱动器本身以及其上的文件系统必须支持 TRIM。TRIM SSD 可以在命令行或 cron 任务中手动完成。作为超级用户（使用 su 或 sudo），运行 fstrim / -v 以完成手动 trim，或者设置 cron 任务以在计算机未使用时定期为你运行此命令。对于 fstrim 的完整选项列表请参考它的 man 手册。\n注：可以定期执行fstrim命令，但是不建议在mount / fstab 中使用discard 选项。因为这个选项要求SSD每次删除文件都进行trim操作，比较耗资源，尤其是在文件操作很频繁的时候。所以可以考虑用cron来定期trim。\n硬件支持根据使用的驱动器接口类型如 PCI、ATA、SCSI 还是 SD/MMC 而有所不同。你需要咨询你的 Linux 供应商以了解你的特定发行版是如何支持 TRIM 的。\n例如，红帽提供以下 SSD 磁盘指南。“性能随着所使用的块数接近磁盘容量而降低，性能影响程度因供应商而异，但是所有设备都会遇到一些性能降低。为了解决性能降低问题，主机系统（例如 Linux 内核）使用丢弃请求以通知存储器给定范围的块不再使用。”\nDebian wiki 提供了 SSD 使用的一些基本注意事项：使用 Linux 3.2 或更高版本内核，使用 SSD 的最新固件，使用 EXT4 文件系统，并且“在正常工作负载下有足够的 DRAM 用来操作而不用使用交换空间“。\nreserve 5% of the space By default, ext2/3/4 filesystems reserve 5% of the space to be useable only by root. This is to avoid a normal user completely filling the disk which would then cause system components to fail whenever they next needed to write to the disk.\nYou can see the number of reserved blocks (and lots of other information about the filesystem) by doing:\n$ sudo tune2fs -l /dev/sda8 For a /home partition, it is probably safe to set the reserved fraction to zero:\n$ sudo tune2fs -m 0 /dev/sda8 Which should make an additional ~5GB available.\nChange Partition Label e2label or tune2fs The commands e2label or tune2fs used for changing label of ext2, ext3 and ext4 type partitions.\n# e2label /dev/sda1 ROOT OR # tune2fs –L ROOT_PART /dev/sda1 Here, ROOT and ROOT_PART are the labels to be added to /dev/sda1 which is ext4 formatted partition.\nntfslabel The ntfslabel command used for changing label of NTFS partitions.\n# ntfslabel /dev/sda5 NTFS_DIR mkswap The mkswap command used for changing label of SWAP partition.\nAfter unmounting the filesystem, following command needs to be executed to change the label of swap partition.\n# mkswap -L SWAP_PART /dev/sda5 Where, /dev/sda5 is the SWAP formatted partition.\nexfatlabel The exfatlabel command used for changing the label of exFAT formatted partition.\n# exfatlabel /dev/sda3 EX_PART Disable usb automount $ gsettings get org.gnome.desktop.media-handling automount $ gsettings set org.gnome.desktop.media-handling automount false or use dconf-editor\nCreate an ISO File   Mkisofs\n$ mkisofs -o [filename.iso] [ directory_path] $ mkisofs –o backup.iso /home/tin/Documents/backup   dd\n$ dd if=[source] of=[target.iso] $ sudo dd if= /dev/sdb of= diskimage.iso   Brasero\n$ sudo apt-get install brasero   keychain Squeezing the last drop of convenience out of ssh-agent: Keychain will allow to reuse an ssh-agent between logins, and optionally prompt for passphrases each time the user logs in.\n$ sudo apt install keychain $ vi ~/.bashrc . ~/.keychain/${HOSTNAME}-sh $ keychain ~/.ssh/id_rsa Default .bashrc You don’t need to trust this random gist on Github. Heck, it’s ~10 years old. Don’t you want the latest default - or the default that’s specific to your version of Ubuntu?\nYou can find the “skeleton” file used to initialize new users in ls -a /etc/skel.\nTo copy someone else’s comment: just run cp /etc/skel/.bashrc ~/ to copy from that “skeleton” to your current bashrc.\nuse ‘cp’ to exclude a specific directory $ shopt -s extglob $ echo images/* images/004.bmp images/033.jpg images/1276338351183.jpg images/2252.png $ echo images/!(*.jpg) images/004.bmp images/2252.png regenerate initramfs To create/recreate/update the initramfs file means to update the initrd.img-* ramdisk files in /boot.\nNote: I prefer to create a totally fresh version by using the -c option, instead of just updating the existing file by using the -u option.\nThe proper command would be:\n$ sudo update-initramfs -c -k $(uname -r) This will create a fresh initrd.img-* file for your currently booted version of Ubuntu.\nHowever, if you can’t boot to the current version of Ubuntu, you may have to modify this command, and by booting to an older version of Ubuntu, you can do it this way:\nsudo update-initramfs -c -k 5.11.0-22-generic where the 5.11.0-22-generic part should be replaced with the version of the desired boot kernel.\nTo get more detailed information, type:\n$ man update-initramfs extract a specific file from a tar archive Yes, just give the full stored path of the file after the tarball name.\nExample: suppose you want file etc/apt/sources.list from etc.tar:\n$ tar -xf etc.tar etc/apt/sources.list repair grub When you install Windows, Windows assumes it is the only operating system (OS) on the machine, or at least it does not account for Linux. So it replaces GRUB with its own boot loader. What you have to do is replace the Windows boot loader with GRUB. I’ve seen various instructions for replacing GRUB by mucking around with GRUB commands or some such, but to me the easiest way is to simply chroot into your install and run update-grub. chroot is great because it allows you to work on your actual install, instead of trying to redirect things here and there. It is really clean.\nDNS缓存 使用以下命令来检查其状态。\n$ sudo systemctl status systemd-resolved 运行以下命令来检查DNS缓存统计信息。\n$ sudo systemd-resolve --statistics 运行以下命令来清除Ubuntu上的DNS缓存。\n$ sudo systemd-resolve --flush-caches DNS刷新命令不会清除缓存命中和未命中统计信息。 如果要清除所有缓存统计信息，则必须重新启动systemd解析的服务。\n$ sudo systemctl restart systemd-resolved change my username Unix-like operating systems decouple the user name from the user identity, so you may safely change the name without affecting the ID. All permissions, files, etc are tied to your identity (uid), not your username.\nTo manage every aspect of the user database, you use the usermod tool.\nTo change username (it is probably best to do this without being logged in):\nsudo usermod -l newUsername oldUsername This however, doesn’t rename the home folder.\nTo change home-folder, use\nsudo usermod -d /home/newHomeDir -m newUsername after you changed the username.\nFor instance, you could logout, drop to a console (Ctrl+Alt+F1), and sudo su - to become true root (as opposed to sudo -s, where $HOME is still /home/yourname.) Maybe you also have to kill some still running processes from this user first. To do so, enter ps -u username, look for the matching PID and kill them by kill PID-number.\nUpdate: as arrange mentioned, some files may reference your old home directory. You can either keep a symlink for backward compatibility, e g ln -s /home/newname /home/oldname or you can change the file contents with sed -i.bak 's/*oldname*/*newname*/g' *list of files* It creates a backup for each file with a .bak extension.\nSome additional information for not so experienced users like me: As I only have ONE user account (administrator), it would not let me change the username (“you are already logged in” was the response in TTY1 (Ctrl+Alt+F1). To get around this:\n  Login with your old credentials and add a new user, e.g. “temporary” in TTY1:\nsudo adduser temporary set the password.\n  Allow the temporary user to run sudo by adding the user to sudo group:\nsudo adduser temporary sudo   Log out with the command exit.\n  Return to tty1: Login with the ‘temporary’ user account and password. Change your username and folder as mentioned above. exit (until you get the login prompt)\n  Go back to TTY7 (Ctrl+Alt+F7) to login on the GUI/normal desktop screen and see if this works.\n  Delete temporary user and folder:\nsudo deluser temporary sudo rm -r /home/temporary   Test Network Speed $ sudo apt install speedtest-cli $ speedtest 蓝牙与WiFi信号干扰 蓝牙和WIFI干扰？把蓝牙掐死就行了\n蓝牙和Wi-Fi信号干扰问题可能你也遇到过，两者主要都是使用2.4GHz频段，导致同时开启时，蓝牙的数据吞吐量会急剧下降，配对设备困难，Wi-Fi间歇性中断，网络受到限制。目前基本没什么办法可以根治这个问题，但你可以下面的方案临时帮你解决一些问题。本文提供了4种方法，可以参考下。\n方法1：连接至5GHz无线网络\n既然知道了问题出在频段冲突上，那么可以考虑购买一个双频（2.4GHz + 5GHz）路由器，并连接至5GHz的Wi-Fi网络。该方法可以彻底解决干扰问题，但银子也是必不可少的。\n方法2：更换Wi-Fi信道\n以TP-Link路由器为例，登录路由器Web管理页，在无线设置-基本设置中找到信道选项，将其改为1、6、11中的任何一个。这些为2.4GHz的不重叠传输信道，相较于其他信道更稳定一些。\n方法3：开启网卡蓝牙共存功能\n在近几年生产的无线网卡中，都支持蓝牙共存功能，方法是在网络适配器属性的高级选项卡中，找到Bluetooth Collaboration或Bluetooth Coexistence Mode（名称可能有所不同），将其设为启用（Enable）。Windows会自动重新连接Wi-Fi，干扰蓝牙的情况也会有所缓解。\n对于 Linux\n$ lspci -knn | grep Net -A3; lsusb ... Kernel driver in use: ath9k Kernel modules: ath9k ... $ sudo tee /etc/modprobe.d/ath9k.conf  \"options ath9k btcoex_enable=1\" 方法4：远离干扰源\n将蓝牙终端与路由器、微波炉、无绳电话机等使用2.4GHz频段的设备隔开使用。\n然而蓝牙与WIFI干扰确实是头疼的问题：蓝牙鼠标会受到WIFI干扰经常反应迟缓，而蓝牙音箱则会导致WIFI断网，经常上传失败的绝望。。。。\n总之，无线信道的改进还在进行着。。。\nRAM \u0026 VRAM VRAM as RAM  MTD vramfs  RAM as VRAM Basically the answer is the operating system threats the whole memory pool for the graphics card, and ram as a virtual memory.\nVirtual memory is paged two ways through a partition like swap, or a image file like in windows.\nThe virtual memory then maps the references to memory when you call int* or \u0026memory. To a physical address on your ram or vram depending on where it’s meant to go.\nThe game cannot force the kernel or operating system to allocate virtual memory to a certain place.\nThe kernel will dynamically decide where everything goes, and will write to your hard drive if you overflow the current physical limit.\nThere are tons of articles on virtual memory on windows, bsd and linux. Mac is technically a bsd fork and does use the same methods, and so does the ps4 os.\ntl;dr Basically what you are saying doesn’t make sense in terms of virtual memory and this is done automatically( Games automatically use RAM as VRAM when you run out of VRAM. That’s why, when you go over your VRAM limit, your FPS drops like a rock ).\nAlso some people in this thread are confusing video memory and virtual memory.\nOptimizing for Gaming This guide is only for Arch and Ubuntu. Any derivatives like Manjaro, Mint, PopOS, etc should also work.\nEnable Multilib Multilib is required by Steam, So if you are running Steam you can skip this step, If you can not find Steam in your repositories this is your issue.\nAdd the architecture.\n$ sudo dpkg --add-architecture i386 Update the package manager\n$ sudo apt-get update Upgrade to newer packages\n$ sudo apt-get dist-upgrade GPU Drivers Having the right GPU drivers is imporant, else games won’t run properly.\nManually check which driver you need: https://www.nvidia.com/Download/index.aspx?lang=en-us\nFor Nvidia you need to add a repository\n$ sudo add-apt-repository ppa:graphics-drivers/ppa \u0026\u0026 sudo apt-get upgrade For Nvidia 440 you need these packages so install them.\n$ sudo apt install nvidia-graphics-drivers-440 nvidia-settings vulkan vulkan-utils Now reboot\n$ sudo reboot If you use Gnome or GDM you might need to disable Wayland, This is not always the case, But I include it here just in case, If your System won’t reboot you can try this\n$ sudo nano /etc/gdm/custom.conf Remove the # in front of the #WaylandEnable=false line and it should force Xorg.\nLinux kernel Installing the newest kernel is generally the easiest kernel switch, There are other kernels available, I will include them later.\nThe easiest way is to use ukuu, First we need to install it.\n$ sudo add-apt-repository ppa:cappelikan/ppa $ sudo apt update $ sudo apt install mainline Now ukuu is installed, in this program you can select the newest stable kernel click install and when you reboot the new kernel is used. Do not remove your old kernel. If anything goes wrong you can select which kernel to boot in the grub screen at startup and remove the kernel that gives you trouble.\nFeral Gamemode gamemode 基本上是一组守护进程/库，它可以按需优化 Linux 系统的游戏性能。它实际上只是让 CPU 在用户玩游戏时自动运行在高性能模式下并帮助 Linux 用户从游戏中获得最佳性能。\n$ sudo apt install gamemode Manual\nInstall the dependencies\n$ sudo apt install meson libsystemd-dev pkg-config ninja-build git libdbus-1-dev libinih-dev Clone the repository\n$ git clone https://github.com/FeralInteractive/gamemode.git Change the directory into the just downloaded folder\n$ cd gamemode Change the tree to the newest version\n$ git checkout 1.5.1 Run the install script\n$ ./bootstrap.sh Usage\nNow that it is installed we need to enable the service with this command\n$ systemctl --user enable gamemoded \u0026\u0026 systemctl --user start gamemoded To use gamemode for supertuxkart for example, run this terminal\n$ gamemoderun supertuxkart To use it in Steam edit the launch option for the desired game to\n$ gamemoderun %command% If gamemode does not run try to make it executable:\n$ sudo chmod +x /usr/bin/gamemoderun If gamemoderun does not work for you try this as a launch command:\n$ LD_PRELOAD=$LD_PRELOAD:/usr/lib/x86_64-linux-gnu/libgamemodeauto.so.0 %command% Nvidia Improvements Nvidia users might want to enable all options listed here to improve performance in games\n Force Full Composition Pipeline avoids screen tearing by letting the GPU do all the scaling. Triple Buffer avoids stuttering gameplay It allows for a stream of data instead of chunks of data. IndirectGLXProtocol forces the game to directly communicate with the Nvidia drivers. Coolbits enables your card to be overclocked which gamemode will make use of.  Create a Xorg Config file:\n$ sudo nvidia-xconfig Edit the file with the following command\n$ sudo nano /etc/X11/xorg.conf Add in these lines under the “Device” section between the other options\nOption \"TripleBuffer\" \"on\" Option \"Coolbits\" \"28\" Add in these lines under the “Screen” section between the other options.\nOption \"metamodes\" \"nvidia-auto-select +0+0 {ForceCompositionPipeline=On, ForceFullCompositionPipeline=On}\" Option \"AllowIndirectGLXProtocol\" \"off\" Try this one with risk, It will be sure to crash GNOME, I am not sure about other DEs\njust add it to the end of the file\nSection \"Extensions\" Option \"Composite\" \"Disable\" EndSection If you run into any problems, just hit CTRL ALT F3 to switch to a different tty login, run the command to edit the file again and put a # in front of the options that are giving you trouble, Most likely the last one\nAlternatively you can just completely remove the file with the following command\n$ sudo rm /etc/X11/xorg.conf Libstrangle Libstrangle is a tool that helps you control framerates but also vsync settings. This is especially handy for games that do not support these features, You would like to half your framerate to make it run better save some power or just give your hardware a break.\nLibstrangle can be used in multiple ways depending on what you want to achieve.\nTo use libstrangle you can simply type strangle and then the amount of frames you want to run. There are some examples below, But the features you will probably use are Vsync which you use by using the -v option, the rules for OpenGL and Vulkan are different, Here is what each number does for the different apis.\n OpenGL 0 Force off, 1 Force on, n - Sync to refresh rate Vulkan 0 Force off, 1 Mailbox mode, 2 Traditional vsync, 3 Adaptive vsync  You can also limit the game depending on the power state of your device, Set it to 60 while charging and on 30 while discharging for example. You do this by adding a second number right after a colon. in example, strangle 60:30. There are more features but they are not that commonly used, you can check the gitlab link above or simply type strangle -h for more information.\nTo limit the framerate of supertuxkart to 30 simply run\n$ strangle 30 supertuxkart To Force enable vsync on 60 fps for an OpenGL Steam game set the launch option to\n$ strangle -v 1 60 %command% To set the framerate of a vulkan game on Steam to 120 fps but 60 on battery power with adaptive vsync set this as your launch command\n$ strangle -v 3 120:60 %command% Mangohud Mangohud is a monitoring tool for Vulkan and OpenGL applications. It can show CPU and GPU usage, temps, But also framerates, frametimes and a lot more.\n$ sudo add-apt-repository ppa:flexiondotorg/mangohud $ sudo apt update $ sudo apt install mangohud To configure it with a GUI you can check out GOverlay below. For a manual configuration you can edit\n$ ~/.config/MangoHud/MangoHud.conf If you want exactly my configuration you can just copy this into it without the need for GOverlay.\nbackground_alpha=0.3 font_size=20 background_color=020202 text_color=ffffff position=top-right no_display toggle_hud=F11 cpu_stats cpu_temp cpu_color=007AFA gpu_stats gpu_temp gpu_color=00BD00 ram ram_color=B3000A vram vram_color=00801B io_read io_write io_color=B84700 arch engine_color=B200B0 frame_timing=1 frametime_color=00ff00 #output_file=/home/houtworm/mangohud_log_  #fps_limit 120 #media_player #toggle_logging=F10 You can tweak all the little things you want here. You can also create different configurations per game by adding a MangoHud.conf file to the game directory.\nTo use it for any game change its launch option to\n$ mangohud %command% To use it with non Steam games use the following command\n$ mangohud supertuxkart Some games might need the 32 bit version, try this if the normal command fails.\n$ mangohud.x86 %command% VKBasalt VKBasalt is a post processing layer for Vulkan which enables you to enhance graphics further. It only works with Vulkan, This includes all Proton games.\n$ git clone https://github.com/DadSchoorse/vkBasalt.git \u0026\u0026 cd vkBasalt \u0026\u0026 meson --buildtype=release builddir \u0026\u0026 ninja -C builddir install To configure it first you need to create a config file, Run the following command to copy the example to a folder you can edit as the user.\n$ mkdir ~/.config/vkBasalt \u0026\u0026 cp /usr/share/vkBasalt/vkBasalt.conf.example ~/.config/vkBasalt/vkBasalt.conf You can tweak all the little things you want here. You can also create different configurations per game by adding a vkBasalt.conf file to the game directory.\nTo use VKBasalt for any particular game enter this as a launch option.\nENABLE_VKBASALT=1 %command% You can also start non Steam games this way by typing the following command\nENABLE_VKBASALT=1 supertuxkart GOverlay GOverlay is a Graphical User Interface for managing MangoHud and VKBasalt\n$ sudo apt-get install lazarus git $ git clone https://github.com/benjamimgois/goverlay.git $ cd goverlay $ lazbuild -B goverlay.lpi mesa-demos and vulkan-tools are optional, You need them if you want to show the previews. You can find them in your distros repository\nXbox One Controller xpad works great, is the default on modern Linux distros and supports a wide range of controllers, But if you are like me and you only Xbox One controllers then using xpadneo is much better.\nFor Bluetooth to work with xpad and the Xbox One controllers you need to disable ertm (This is not needed for xpadneo)\ncreate the config file\n$ sudo nano /etc/modprobe.d/xbox_bt.conf Add the following line to the document and save and exit with CTRL + X.\noptions bluetooth disable_ertm=1 xpadneo supports Xbox One controllers wired and over bluetooth, It enables Force Feedback even the vibration inside the triggers, It supports battery level indication, It also fixes the mapping in many many games that where previously unplayable with a Xbox One controller on Linux.\nInstall the dependencies\n$ sudo apt-get install dkms linux-headers-`uname -r` Install xpadneo from Github\n$ git clone https://github.com/atar-axis/xpadneo.git \u0026\u0026 cd xpadneo \u0026\u0026 sudo ./install.sh Now you should be able to reboot and it should be all good, Having the controllers vibrate for a second when connected is a good indicator that it works.\n认证硬件  Ubuntu certified hardware Red Hat certified hardware  如果不怎么玩游戏的话，建议是直接考虑那些不带独立显卡的笔记本电脑。因为在Linux下双显卡装驱动问题很多。\n说到牌子的话，建议是考虑戴尔笔记本。因为戴尔台式机和笔记本，都是尽可能地去兼容Ubuntu来设计的。这个不是说假话做广告。我也就这个问题，看过了几乎所有戴尔系列产品的技术文档了。基本上都是在支持的操作系统列表中，无一例外地包含了Ubuntu。如果是想买能完美使用Ubuntu的本子，戴尔是首选。戴尔绝大部分笔记本机型都能很好完美兼容Ubuntu。\n还有一个重要原因就是，ubuntu的所属公司，与戴尔公司是有合作的。也正因为如此，Ubuntu默认就包含了dell的大部分硬件通用驱动，甚至硬件底层管理模块都囊括其中。\n功耗控制 针对散热不好的设备或者续航能力不佳的笔记本，功耗控制显得非常必要\n使用 TLP 延长电池寿命及续航  如有需要可参阅 TLP 官方文档 和 archwiki TLP。\n 多年来，Linux 在电池优化方面取得了很大进步，但仍然有一些可选步骤改善笔记本电脑的电池寿命并且延长续航。\nTLP 作为一款自由开源的高级电源管理工具提供开箱即用的默认配置。同时也可以高度定制化，以满足特定需求。\n电压下探  以下方法仅适用于 Intel 四代酷睿 ™ Haswell 及更新 CPU。有关 AMD CPU 和 Intel 四代酷睿 ™ Haswell 之前的 CPU 请参考 archWiki Undervolting CPU。\n 对处理器的电压进行最大限度的下探，在挖掘 CPU 体质的极限的同时，起到既能降低发热，又能最大限度保持性能的效果。\n如果正常操作，降低电压一般不会损害 CPU，一般建议从 50 毫伏进行尝试，每次降压尝试多增加 10 毫伏。只要确保在降低电压前，系统中任务均被正确保存即可。\n降低功率墙 除了电压的下探，同时也可以尝试对处理器的功率墙（TDP）做出降低的限制。比如考虑这种情况 —— 在 CPU 满睿频时，其实不需要默认的那么多功耗来维持，也许在默认功耗的基础上减几瓦，也能维持满睿频，这样就又可以进一步降低温度。对功率墙进行限制不同于对电压进行下探，若限制功率墙的参数较低，这会不可避免的损失较多的性能，但是在散热过差的设备上这也是一个好办法。\n对于功率墙的调整，有些主板在 BIOS 中提供了设置项可以直接调整。对于没有设置项的主板，有的主板是锁定了瞬时和长时功率墙，这种情况就无法调整功率墙了。有的主板 BIOS 随没有提供功率墙调整项，但依旧可以通过命令行设置。\n通过以下的命令可以查看主板是否可以调整功率墙：\ngrep . /sys/class/powercap/intel-rapl/intel-rapl:0/* 2 /dev/null 如果在输出中看到了如下的 enabled 值为 1，即可以调整。第一行的数字代表现有的功率墙限制：\n/sys/class/powercap/intel-rapl/intel-rapl:0/constraint_0_power_limit_uw:100000000 /sys/class/powercap/intel-rapl/intel-rapl:0/enabled:1 具体的调整步骤参考 Set Max TDP of Intel H-series CPU。\n交换文件 在桌面环境中，交换分区或文件用来实现休眠(hibernate)的功能，即将当前环境保存在磁盘的交换文件或分区部分。除此之外，某些特定软件需要 swap 才可以正确运行。交换文件与分区性能相同，且交换文件更为灵活，可随时变更大小，增加与删除。\n$ dd if=/dev/zero of=/swapfile bs=1M count=4096 status=progress #创建4G的交换空间 大小根据需要自定 $ chmod 600 /swapfile #设置正确的权限 $ mkswap /swapfile #格式化swap文件 $ swapon /swapfile #启用swap文件 最后，向/etc/fstab 中追加如下内容：\n/swapfile none swap defaults 0 0 KDE 自身提供开箱即用的睡眠功能(suspend)，即将系统挂起到内存，消耗少量的电量。休眠(hibernate)会将系统挂起到交换分区或文件，几乎不消耗电量。\nQUESTIONS Ubuntu 无法关机 $ sudo vim /etc/systemd/system.conf DefaultTimeoutStartSec=5s DefaultTimeoutStopSec=5s $ sudo systemctl reload DefaultTimeoutStartSec=, DefaultTimeoutStopSec= 设置启动/停止一个单元所允许的最大时长。若仅设置一个整数而没有单位，那么单位是秒。 也可以在整数后面加上时间单位后缀： “ms”(毫秒), “s”(秒), “min”(分钟), “h”(小时), “d”(天), “w”(周) 。 对于 Type=oneshot 类型的 service 单元， 这些选项没有意义(相当于全部被禁用)。 对于其他类型的 service 单元，可以在单元文件中设置 TimeoutStartSec=, TimeoutStopSec=, RestartSec= 以覆盖此处设置的默认值 (参见systemd.service(5))。 对于其他非 service 类型的单元， DefaultTimeoutStartSec= 是 TimeoutSec= 的默认值。\n注1：尽量不要使用上面更改。应该在完全清楚自己的更改造成的影响、产生的作用的前提下，做出更改。\n注2：作为桌面操作系统，如果有硬件驱动或其他各种莫名问题，可以尝试升级到最新版本来解决。\nACPI ERROR: AE_ALREADY_EXISTS These kinds of “errors” have been discussed ad nauseam, it’s simply the kernel telling you that the ACPI information received from the system seems to be incomplete in some way, update your BIOS/UEFI in hopes for a proper fix or ignore the error if you don’t notice anything off with your system.\n(And please don’t do something dumb like setting acpi=off just to get rid of these messages)\n解压zip乱码 $ unzip -O CP936 xxx.zip 用GBK, GB18030也可以\nCan’t run CS:GO at fullscreen  Open Steam Go to the “Library” Right-click the game which needs to be reconfigured Select “Properties” from the menu Click the “Set launch options…” button type: -full and save  How To Disable Lock In Kubuntu open Workspace  Desktop Behavior  Screen Locking  uncheck Lock screen option\nGnome 3 displays two icons for same app No, there’s nothing wrong with your system.\nThe duplicated launcher icons explained:\nThe different icons are different commandline options. Some context applications with call the associated *.desktop icon. The exec option of the icon will depend on how the application is called.\nSome of the Icons you show in your image may be obvious because of the difference in the way they are named. You can see the difference in the way the app is called by right clicking and clicking on properties to see other differences.\nSome of the *.desktop files have a %U argument, used so the application will accept arguments.\nSome of the Launchers are different commands that are called differently and are named differently often by a symbolic link.\nSome exampes from the list in you image are:\nName: Online Accounts Command: unity-control-center credentials Name: Online Accounts Command: Online account credentials and settings Name: Personal File Sharing Command: gnome-file-share-properties Name: Rhythmbox Command: rhythmbox %U Name: Rhythmbox Command rhythmbox-client --select-source %U ssh_exchange_identification: Connection closed by remote host 原因是 Clash 开了 TUN 模式。关闭掉就好了。\nDisk show 129986 TB  (=ↀωↀ=)橘外猫, [2/7/22 11:16 AM] 这个是怎么回事啊\n雪梨, [2/7/22 11:21 AM] 分区表坏了？\n(=ↀωↀ=)橘外猫, [2/7/22 11:21 AM] 直接再分区吗？\n雪梨, [2/7/22 11:21 AM] 请鸽鱼老师看看诶\n雪梨, [2/7/22 11:22 AM] 还能挂载就先备份数据好了\n(=ↀωↀ=)橘外猫, [2/7/22 11:22 AM] 好的\nPegion Fish, [2/7/22 11:25 AM] JMS炸了？ 建议备份数据重建分区表 先重新插一次USB和硬盘\n(=ↀωↀ=)橘外猫, [2/7/22 11:27 AM] 重插了 用fdisk 重建吗？\nPegion Fish, [2/7/22 11:28 AM] 还是不正常？ 硬盘也重新插一下\n(=ↀωↀ=)橘外猫, [2/7/22 11:28 AM] 恩\n雪梨, [2/7/22 11:28 AM] 重建分区表，不是删掉分区再新增分区\n(=ↀωↀ=)橘外猫, [2/7/22 11:30 AM] 断电后自动好了 这是怎么回事啊\nThor Luo Bing-, [2/7/22 11:31 AM] 硬盘清空了\n(=ↀωↀ=)橘外猫, [2/7/22 11:32 AM] 没有，东西还在\nPegion Fish, [2/7/22 11:32 AM] 啊 这不是争产的吗 1T啊 这就是JMS主控抽风\n No Caching mode page found during early boot, I get following error message:\n[sdb] No Caching mode page found [sdb] Assuming drive cache: write through If I understand correctly, this is actually just a harmless info message and not an actual error. sdb is my USB disk, and it does not use caching .\nHard disks have a small amount of RAM cache to speed up write operations. The system can write a chunk of data to the disk cache without actually waiting for it to be written to the disk. This is sometimes called “write-back” mode. If there is no cache on the disk, data is directly written to it in “write-through” mode. The Asking for cache data failed warning usually occurs with devices such as USB flash drives, USB card readers, etc. which present themselves as SCSI devices to the system (sdX), but have no cache. The system asks the device: “Do you have a cache?” and gets no response. So it assumes there is no cache and puts it in “write-through” mode.\nCertificate verification failed 首先更改源文件，将所有的 https 改成 http ：\n$ sudo vi /etc/apt/sources.list deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse 1234 然后安装/更新证书 ca-certificates：\n$ sudo apt-get update $ sudo apt-get install --reinstall ca-certificates 最后将镜像源文件改回 https：\n$ sudo vi /etc/apt/sources.list deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse $ sudo apt-get update Move and overwrite subdirectories (and files) to parent directory You will have to copy them to the destination and then delete the source, using the commands cp -r * .. followed by rm -rf *.\nI don’t think you can “merge” directories using mv.\nSystem program problem detected The error “System program problem detected” comes up when a certain application crashes. Ubuntu has a program called Apport that is responsible for detecting such crashes and upon user consent, report these crashes to developers. This process intends to get the problem fixed by the developers.\nHowever it can be very annoying to common users, and there is no point in showing errors to users when they cannot do anything about it themselves. So you might want to disable them.\nRemove crash report files\nThe apport system creates crash report files in the /var/crash directory. These crash report files cause the error message to appear everytime Ubuntu boots.\n$ cd /var/crash $ ls _opt_google_chrome_chrome.1000.crash _usr_lib_chromium-browser_chromium-browser.1000.crash _usr_sbin_ulatencyd.0.crash _usr_share_apport_apport-gtk.1000.crash Just remove the crash report files\n$ sudo rm /var/crash/* After removing all the crash report files, the error message should stop popping up. However if a new crash takes place then it would appear again in future.\nTurn off apport\nAfter removing the old crash reports, if you still get the same error message, then you can completely turn off apport to get rid. Edit the configuration file at /etc/default/apport.\n$ gksudo gedit /etc/default/apport The file would contain something like this\n# set this to 0 to disable apport, or to 1 to enable it # you can temporarily override this with # sudo service apport start force_start=1 enabled=1 Just set the value of enabled to 0, and this will disable apport.\nenabled=0 Save the file and close it. From the next boot onwards, there should be no error messages ever. If you do not want to restart the system then restart apport from the command line.\n$ sudo restart apport ",
  "wordCount" : "23712",
  "inLanguage": "en",
  "datePublished": "2022-03-08T15:33:09+08:00",
  "dateModified": "2022-03-08T15:33:09+08:00",
  "author":{
    "@type": "Person",
    "name": "Sakamoto Kurome"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sakamotokurome.github.io/posts/ubuntutips/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sakamoto Kurome",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sakamotokurome.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sakamotokurome.github.io/" accesskey="h" title="Sakamoto Kurome (Alt + H)">Sakamoto Kurome</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sakamotokurome.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Ubuntu Tips
    </h1>
    <div class="post-meta"><span title='2022-03-08 15:33:09 +0800 CST'>March 8, 2022</span>&nbsp;·&nbsp;48 min&nbsp;·&nbsp;Sakamoto Kurome

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#tips" aria-label="TIPS">TIPS</a><ul>
                        
                <li>
                    <a href="#backupyoursystemhttpshelpubuntucomcommunitybackupyoursystem" aria-label="BackupYourSystem"><a href="https://help.ubuntu.com/community/BackupYourSystem">BackupYourSystem</a></a><ul>
                        
                <li>
                    <a href="#rsync" aria-label="Rsync">Rsync</a></li>
                <li>
                    <a href="#tarhttpshelpubuntucomcommunitybackupyoursystemtar" aria-label="TAR"><a href="https://help.ubuntu.com/community/BackupYourSystem/TAR">TAR</a></a></li>
                <li>
                    <a href="#deja-duphttpswikignomeorgappsdejadup" aria-label="deja-dup"><a href="https://wiki.gnome.org/Apps/DejaDup">deja-dup</a></a></li>
                <li>
                    <a href="#others" aria-label="Others">Others</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b8%85%e7%90%86%e7%b3%bb%e7%bb%9f" aria-label="清理系统">清理系统</a><ul>
                        
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e4%b8%8d%e5%86%8d%e9%9c%80%e8%a6%81%e7%9a%84%e5%8c%85" aria-label="删除不再需要的包">删除不再需要的包</a></li>
                <li>
                    <a href="#apt-cache" aria-label="APT cache">APT cache</a></li>
                <li>
                    <a href="#journal-logs" aria-label="Journal logs">Journal logs</a></li>
                <li>
                    <a href="#thumbnails-cache" aria-label="Thumbnails cache">Thumbnails cache</a></li>
                <li>
                    <a href="#duplicate-files" aria-label="Duplicate files">Duplicate files</a></li>
                <li>
                    <a href="#old-linux-kernels" aria-label="Old Linux kernels">Old Linux kernels</a></li>
                <li>
                    <a href="#%e6%b8%85%e7%90%86-snaphttpslinuxcnarticle-14302-1html" aria-label="清理 Snap"><a href="https://linux.cn/article-14302-1.html">清理 Snap</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%8a%80%e5%b7%a7" aria-label="命令行技巧">命令行技巧</a><ul>
                        
                <li>
                    <a href="#bash-%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="Bash 快捷键">Bash 快捷键</a></li>
                <li>
                    <a href="#%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84shellhttpscoolshellcnarticles8619html" aria-label="你可能不知道的SHELL"><a href="https://coolshell.cn/articles/8619.html">你可能不知道的SHELL</a></a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%af%b4-zsh-%e6%98%af-shell-%e4%b8%ad%e7%9a%84%e6%9e%81%e5%93%81httpswwwzhihucomquestion21418449" aria-label="为什么说 zsh 是 shell 中的极品？"><a href="https://www.zhihu.com/question/21418449">为什么说 zsh 是 shell 中的极品？</a></a></li>
                <li>
                    <a href="#%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e7%9a%84linux%e6%8a%80%e5%b7%a7httpscoolshellcnarticles8883html" aria-label="应该知道的LINUX技巧"><a href="https://coolshell.cn/articles/8883.html">应该知道的LINUX技巧</a></a></li>
                <li>
                    <a href="#powerline-shellhttpsgithubcomb-ryanpowerline-shell" aria-label="powerline-shell"><a href="https://github.com/b-ryan/powerline-shell">powerline-shell</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e6%a3%80%e6%b5%8b%e7%a1%ac%e7%9b%98%e5%9d%8f%e9%81%93%e5%92%8c%e5%9d%8f%e5%9d%97httpsblog51ctocompengjc2417004" aria-label="检测硬盘坏道和坏块"><a href="https://blog.51cto.com/pengjc/2417004">检测硬盘坏道和坏块</a></a><ul>
                        
                <li>
                    <a href="#%e5%8f%91%e7%8e%b0" aria-label="发现">发现</a></li>
                <li>
                    <a href="#%e6%a3%80%e6%b5%8b" aria-label="检测">检测</a></li>
                <li>
                    <a href="#%e4%bf%ae%e5%a4%8d" aria-label="修复">修复</a></li>
                <li>
                    <a href="#%e5%b1%8f%e8%94%bd" aria-label="屏蔽">屏蔽</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e6%8e%a2%e7%b4%a2httpssamwhelpgithubiobook-ubuntu-qnareadhowtoexplore" aria-label="如何探索"><a href="https://samwhelp.github.io/book-ubuntu-qna/read/howto/explore/">如何探索</a></a></li>
                <li>
                    <a href="#transfer-files-between-linux-and-androidhttpsmashtipscomtransfer-images-android-linuxtext120connect20your20android20smartphone20and20your20linuxselectede2809d20or20e2809cimport20alle2809d20if20you20want20" aria-label="Transfer files between Linux and Android"><a href="https://mashtips.com/transfer-images-android-linux/#:~:text=1%20Connect%20your%20Android%20smartphone%20and%20your%20Linux,Selected%E2%80%9D%20or%20%E2%80%9CImport%20All%E2%80%9D%20if%20you%20want%20">Transfer files between Linux and Android</a></a></li>
                <li>
                    <a href="#xorg-vs-wayland" aria-label="Xorg vs Wayland">Xorg vs Wayland</a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e6%89%a7%e8%a1%8c%e8%87%aa%e5%b7%b1%e7%9a%84%e7%a8%8b%e5%ba%8f%e8%a6%81%e5%9c%a8%e5%89%8d%e9%9d%a2%e5%8a%a0httpszhuanlanzhihucomp85833766" aria-label="为什么执行自己的程序要在前面加./"><a href="https://zhuanlan.zhihu.com/p/85833766">为什么执行自己的程序要在前面加./</a></a></li>
                <li>
                    <a href="#ltshttpsaskubuntucomquestions16366whats-the-difference-between-a-long-term-support-release-and-a-normal-release" aria-label="LTS"><a href="https://askubuntu.com/questions/16366/whats-the-difference-between-a-long-term-support-release-and-a-normal-release">LTS</a></a></li>
                <li>
                    <a href="#%e8%ae%be%e8%ae%a1shell%e8%84%9a%e6%9c%ac%e9%80%89%e9%a1%b9-getopthttpswwwcnblogscomf-ck-need-up9758075html" aria-label="设计shell脚本选项 getopt"><a href="https://www.cnblogs.com/f-ck-need-u/p/9758075.html">设计shell脚本选项 getopt</a></a></li>
                <li>
                    <a href="#%e5%9c%a8%e4%b8%ad%e6%96%87%e4%bb%8b%e9%9d%a2%e4%b8%8b%e5%a6%82%e4%bd%95%e5%8f%aa%e7%94%a8%e8%8b%b1%e6%96%87%e7%9b%ae%e9%8c%84%e5%90%8d%e7%a8%b1httpsaskfedoraprojectorgttopic11528" aria-label="在中文介面下，如何只用英文目錄名稱？"><a href="https://ask.fedoraproject.org/t/topic/11528">在中文介面下，如何只用英文目錄名稱？</a></a></li>
                <li>
                    <a href="#dd-%e5%88%b6%e4%bd%9cu%e7%9b%98%e5%90%af%e5%8a%a8%e7%9b%98" aria-label="dd 制作U盘启动盘">dd 制作U盘启动盘</a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88-linux-%e8%a6%81%e7%94%a8-targz%e5%be%88%e5%b0%91%e7%94%a8-7z-%e6%88%96-ziphttpswwwzhihucomquestion335911358answer755424668" aria-label="为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？"><a href="https://www.zhihu.com/question/335911358/answer/755424668">为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？</a></a></li>
                <li>
                    <a href="#%e7%bd%ae%e9%bb%98%e8%ae%a4%e7%bc%96%e8%be%91%e5%99%a8httpswwwcnblogscomwswindp10164052html" aria-label="置默认编辑器"><a href="https://www.cnblogs.com/wswind/p/10164052.html">置默认编辑器</a></a></li>
                <li>
                    <a href="#%e9%80%9a%e8%bf%87linux%e7%b3%bb%e7%bb%9f%e8%bf%9b%e5%85%a5-bios" aria-label="通过Linux系统进入 BIOS">通过Linux系统进入 BIOS</a></li>
                <li>
                    <a href="#5-ways-to-check-cpu-info-in-linuxhttpslinuxhandbookcomcheck-cpu-info-linux" aria-label="5 Ways to Check CPU Info in Linux"><a href="https://linuxhandbook.com/check-cpu-info-linux/">5 Ways to Check CPU Info in Linux</a></a></li>
                <li>
                    <a href="#exfathttpwwwruanyifengcomblog201810exfathtmlhmsrtoutiaoioutm_mediumtoutiaoioutm_sourcetoutiaoio" aria-label="exFAT"><a href="http://www.ruanyifeng.com/blog/2018/10/exfat.html?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io">exFAT</a></a></li>
                <li>
                    <a href="#logging-in-as-root-in-ubuntu-with-live-cd" aria-label="Logging in as Root in Ubuntu with Live CD">Logging in as Root in Ubuntu with Live CD</a></li>
                <li>
                    <a href="#how-to-download-a-large-file-faster-from-google-drivehttpsyantraascomdownload-large-file-faster-from-google-drive" aria-label="How To Download A Large File Faster From Google Drive?"><a href="https://yantraas.com/download-large-file-faster-from-google-drive/">How To Download A Large File Faster From Google Drive?</a></a></li>
                <li>
                    <a href="#usb%e6%8f%92%e6%a7%bd%e9%ac%86%e5%8b%95%e6%80%8e%e9%ba%bc%e8%be%a6httpswwwyoutubecomwatchvwud4i6gzcpk" aria-label="USB插槽鬆動怎麼辦"><a href="https://www.youtube.com/watch?v=WUd4I6GZcpk">USB插槽鬆動怎麼辦</a></a></li>
                <li>
                    <a href="#nmcheckgnomeorghttpsaskubuntucomquestions1070823some-suspicious-software-making-request-to-nmcheck-gnome-org" aria-label="nmcheck.gnome.org"><a href="https://askubuntu.com/questions/1070823/some-suspicious-software-making-request-to-nmcheck-gnome-org">nmcheck.gnome.org</a></a></li>
                <li>
                    <a href="#xdg_templates_dirhttpsaskubuntucomquestions94734what-is-the-templates-folder-in-the-home-directory-for" aria-label="XDG_TEMPLATES_DIR"><a href="https://askubuntu.com/questions/94734/what-is-the-templates-folder-in-the-home-directory-for">XDG_TEMPLATES_DIR</a></a></li>
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e7%9a%84%e7%a8%b3%e5%ae%9a%e6%80%a7httpswwwzhihucomquestion301581684answer547761587" aria-label="软件的稳定性"><a href="https://www.zhihu.com/question/301581684/answer/547761587">软件的稳定性</a></a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e5%b0%86google%e6%90%9c%e7%b4%a2%e9%99%90%e5%88%b6%e4%b8%ba%e7%89%b9%e5%ae%9a%e8%af%ad%e8%a8%80%e7%9a%84%e7%bb%93%e6%9e%9chttpsqastackcnwebapps16047how-to-restrict-a-google-search-to-results-of-a-specific-language" aria-label="如何将Google搜索限制为特定语言的结果"><a href="https://qastack.cn/webapps/16047/how-to-restrict-a-google-search-to-results-of-a-specific-language">如何将Google搜索限制为特定语言的结果</a></a></li>
                <li>
                    <a href="#two-options-to-recover-your-pc-with-androidhttpswwwmakeuseofcomtagrecover-pc-using-android" aria-label="Two Options to Recover Your PC With Android"><a href="https://www.makeuseof.com/tag/recover-pc-using-android/">Two Options to Recover Your PC With Android</a></a></li>
                <li>
                    <a href="#good-practice-to-avoid-using-sudo-suhttpsaskubuntucomquestions962021is-it-considered-good-practice-to-avoid-using-sudo-su" aria-label="good practice to avoid using sudo su"><a href="https://askubuntu.com/questions/962021/is-it-considered-good-practice-to-avoid-using-sudo-su">good practice to avoid using <code>sudo su</code></a></a></li>
                <li>
                    <a href="#sshfs-how-to-mount-remote-file-systems-over-sshhttpsphoenixnapcomkbsshfs" aria-label="SSHFS: How to Mount Remote File Systems Over SSH"><a href="https://phoenixnap.com/kb/sshfs">SSHFS: How to Mount Remote File Systems Over SSH</a></a><ul>
                        
                <li>
                    <a href="#install-sshfs" aria-label="Install SSHFS">Install SSHFS</a></li>
                <li>
                    <a href="#mount-a-remote-file-system-on-linux" aria-label="Mount a Remote File System on Linux">Mount a Remote File System on Linux</a></li></ul>
                </li>
                <li>
                    <a href="#img%e8%bd%ac%e5%8c%96%e6%88%90isohttpsos51ctocomarticle290012html" aria-label="img转化成iso"><a href="https://os.51cto.com/article/290012.html">img转化成iso</a></a></li>
                <li>
                    <a href="#hwehttpswikiubuntucomkernelltsenablementstack" aria-label="HWE"><a href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack">HWE</a></a></li>
                <li>
                    <a href="#microcodehttpsdecodezpgithubio20200712quickwords44-microcode" aria-label="Microcode"><a href="https://decodezp.github.io/2020/07/12/quickwords44-microcode/">Microcode</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e6%9b%b4%e6%96%b0%e5%be%ae%e7%a0%81httpslinuxcnarticle-9411-1html" aria-label="安装/更新微码"><a href="https://linux.cn/article-9411-1.html">安装/更新微码</a></a></li></ul>
                </li>
                <li>
                    <a href="#automatic-light--dark-modehttpsaskubuntucomquestions1234742automatic-light-dark-mode" aria-label="Automatic Light / Dark Mode"><a href="https://askubuntu.com/questions/1234742/automatic-light-dark-mode">Automatic Light / Dark Mode</a></a></li>
                <li>
                    <a href="#%e5%b0%86du%e7%9a%84%e8%be%93%e5%87%ba%e6%8c%89%e6%96%87%e4%bb%b6%e5%a4%a7%e5%b0%8f%e6%8e%92%e5%ba%8fhttpsbloglilydjwgmeposts18368html" aria-label="将du的输出按文件大小排序"><a href="https://blog.lilydjwg.me/posts/18368.html">将du的输出按文件大小排序</a></a></li>
                <li>
                    <a href="#%e6%94%b9%e5%96%84%e8%a7%a6%e6%91%b8%e6%9d%bf%e4%bd%93%e9%aa%8chttpsplumzmearchives12343" aria-label="改善触摸板体验"><a href="https://plumz.me/archives/12343/">改善触摸板体验</a></a></li>
                <li>
                    <a href="#reset-lost-root-passwordhttpswikiarchlinuxorgtitlereset_lost_root_password_e7ae80e4bd93e4b8ade69687" aria-label="Reset lost root password"><a href="https://wiki.archlinux.org/title/Reset_lost_root_password_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Reset lost root password</a></a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-livecd" aria-label="使用 LiveCD">使用 LiveCD</a></li>
                <li>
                    <a href="#%e7%94%a8-bash-%e4%bd%9c%e4%b8%ba-init" aria-label="用 Bash 作为 Init">用 Bash 作为 Init</a></li></ul>
                </li>
                <li>
                    <a href="#how-to-block-internet-access-to-certain-programs-on-linuxhttpsserverfaultcomquestions550276how-to-block-internet-access-to-certain-programs-on-linux" aria-label="How to block internet access to certain programs on Linux"><a href="https://serverfault.com/questions/550276/how-to-block-internet-access-to-certain-programs-on-linux">How to block internet access to certain programs on Linux</a></a></li>
                <li>
                    <a href="#how-does-ubuntu-make-moneyhttpsaskubuntucomquestions21730how-does-ubuntu-make-money" aria-label="How does Ubuntu make money?"><a href="https://askubuntu.com/questions/21730/how-does-ubuntu-make-money">How does Ubuntu make money?</a></a></li>
                <li>
                    <a href="#%e5%90%af%e7%94%a8-trimhttpslinuxcnarticle-8177-1html" aria-label="启用 TRIM"><a href="https://linux.cn/article-8177-1.html">启用 TRIM</a></a></li>
                <li>
                    <a href="#reserve-5-of-the-spacehttpsaskubuntucomquestions249387df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home" aria-label="reserve 5% of the space"><a href="https://askubuntu.com/questions/249387/df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home">reserve 5% of the space</a></a></li>
                <li>
                    <a href="#change-partition-labelhttpswwwtecmintcomchange-modify-linux-disk-partition-label-names" aria-label="Change Partition Label"><a href="https://www.tecmint.com/change-modify-linux-disk-partition-label-names/">Change Partition Label</a></a><ul>
                        
                <li>
                    <a href="#e2label-or-tune2fs" aria-label="e2label or tune2fs">e2label or tune2fs</a></li>
                <li>
                    <a href="#ntfslabel" aria-label="ntfslabel">ntfslabel</a></li>
                <li>
                    <a href="#mkswap" aria-label="mkswap">mkswap</a></li>
                <li>
                    <a href="#exfatlabel" aria-label="exfatlabel">exfatlabel</a></li></ul>
                </li>
                <li>
                    <a href="#disable-usb-automounthttpsaskubuntucomquestions89244how-to-disable-automount-in-nautiluss-preferences" aria-label="Disable usb automount"><a href="https://askubuntu.com/questions/89244/how-to-disable-automount-in-nautiluss-preferences">Disable usb automount</a></a></li>
                <li>
                    <a href="#create-an-iso-filehttpsvituxcomhow-to-create-an-iso-file-in-ubuntu" aria-label="Create an ISO File"><a href="https://vitux.com/how-to-create-an-iso-file-in-ubuntu/">Create an ISO File</a></a></li>
                <li>
                    <a href="#keychainhttpswwwcybercitibizfaqubuntu-debian-linux-server-install-keychain-apt-get-command" aria-label="keychain"><a href="https://www.cyberciti.biz/faq/ubuntu-debian-linux-server-install-keychain-apt-get-command/">keychain</a></a></li>
                <li>
                    <a href="#default-bashrchttpsgistgithubcommariobonales1637696" aria-label="Default .bashrc"><a href="https://gist.github.com/marioBonales/1637696">Default .bashrc</a></a></li>
                <li>
                    <a href="#use-cp-to-exclude-a-specific-directoryhttpsstackoverflowcomquestions4585929how-to-use-cp-command-to-exclude-a-specific-directory1478940014789400" aria-label="use &amp;lsquo;cp&amp;rsquo; to exclude a specific directory"><a href="https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory/14789400#14789400">use &lsquo;cp&rsquo; to exclude a specific directory</a></a></li>
                <li>
                    <a href="#regenerate-initramfshttpsaskubuntucomquestions1351911what-does-regenerate-your-initramfs-mean" aria-label="regenerate initramfs"><a href="https://askubuntu.com/questions/1351911/what-does-regenerate-your-initramfs-mean">regenerate initramfs</a></a></li>
                <li>
                    <a href="#extract-a-specific-file-from-a-tar-archivehttpsaskubuntucomquestions168795how-do-i-extract-a-specific-file-from-a-tar-archive" aria-label="extract a specific file from a tar archive"><a href="https://askubuntu.com/questions/168795/how-do-i-extract-a-specific-file-from-a-tar-archive">extract a specific file from a tar archive</a></a></li>
                <li>
                    <a href="#repair-grubhttpsaskubuntucomquestions88384how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows" aria-label="repair grub"><a href="https://askubuntu.com/questions/88384/how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows">repair grub</a></a></li>
                <li>
                    <a href="#dns%e7%bc%93%e5%ad%98httpsblogcsdnnetcunchi4221articledetails107470928" aria-label="DNS缓存"><a href="https://blog.csdn.net/cunchi4221/article/details/107470928">DNS缓存</a></a></li>
                <li>
                    <a href="#change-my-usernamehttpsaskubuntucomquestions34074how-do-i-change-my-username" aria-label="change my username"><a href="https://askubuntu.com/questions/34074/how-do-i-change-my-username">change my username</a></a></li>
                <li>
                    <a href="#test-network-speedhttpsphoenixnapcomkblinux-network-speed-test" aria-label="Test Network Speed"><a href="https://phoenixnap.com/kb/linux-network-speed-test">Test Network Speed</a></a></li>
                <li>
                    <a href="#%e8%93%9d%e7%89%99%e4%b8%8ewifi%e4%bf%a1%e5%8f%b7%e5%b9%b2%e6%89%b0httpswwwbilibilicomreadcv218058" aria-label="蓝牙与WiFi信号干扰"><a href="https://www.bilibili.com/read/cv218058">蓝牙与WiFi信号干扰</a></a></li>
                <li>
                    <a href="#ram--vram" aria-label="RAM &amp;amp; VRAM">RAM &amp; VRAM</a><ul>
                        
                <li>
                    <a href="#vram-as-ramhttpswikiarchlinuxorgtitleswap_on_video_ram" aria-label="VRAM as RAM"><a href="https://wiki.archlinux.org/title/Swap_on_video_RAM">VRAM as RAM</a></a></li>
                <li>
                    <a href="#ram-as-vramhttpswwwredditcomrpcmasterracecomments4bj7f7is_there_any_way_to_use_ram_memory_as_vram" aria-label="RAM as VRAM"><a href="https://www.reddit.com/r/pcmasterrace/comments/4bj7f7/is_there_any_way_to_use_ram_memory_as_vram/">RAM as VRAM</a></a></li></ul>
                </li>
                <li>
                    <a href="#optimizing-for-gaminghttpssteamcommunitycomsharedfilesfiledetailsid1787799592" aria-label="Optimizing for Gaming"><a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1787799592">Optimizing for Gaming</a></a><ul>
                        
                <li>
                    <a href="#enable-multilib" aria-label="Enable Multilib">Enable Multilib</a></li>
                <li>
                    <a href="#gpu-drivers" aria-label="GPU Drivers">GPU Drivers</a></li>
                <li>
                    <a href="#linux-kernel" aria-label="Linux kernel">Linux kernel</a></li>
                <li>
                    <a href="#feral-gamemodehttpslinuxhintcomgamemode-improve-gaming-performance-in-linux" aria-label="Feral Gamemode"><a href="https://linuxhint.com/gamemode-improve-gaming-performance-in-linux/">Feral Gamemode</a></a></li>
                <li>
                    <a href="#nvidia-improvements" aria-label="Nvidia Improvements">Nvidia Improvements</a></li>
                <li>
                    <a href="#libstrangle" aria-label="Libstrangle">Libstrangle</a></li>
                <li>
                    <a href="#mangohud" aria-label="Mangohud">Mangohud</a></li>
                <li>
                    <a href="#vkbasalt" aria-label="VKBasalt">VKBasalt</a></li>
                <li>
                    <a href="#goverlay" aria-label="GOverlay">GOverlay</a></li>
                <li>
                    <a href="#xbox-one-controller" aria-label="Xbox One Controller">Xbox One Controller</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%ae%a4%e8%af%81%e7%a1%ac%e4%bb%b6httpswwwzhihucomquestion286150644" aria-label="认证硬件"><a href="https://www.zhihu.com/question/286150644">认证硬件</a></a></li>
                <li>
                    <a href="#%e5%8a%9f%e8%80%97%e6%8e%a7%e5%88%b6httpsarchicekylinonlineadvancedpower-ctlhtml" aria-label="功耗控制"><a href="https://arch.icekylin.online/advanced/power-ctl.html">功耗控制</a></a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-tlp-%e5%bb%b6%e9%95%bf%e7%94%b5%e6%b1%a0%e5%af%bf%e5%91%bd%e5%8f%8a%e7%bb%ad%e8%88%aa" aria-label="使用 TLP 延长电池寿命及续航">使用 TLP 延长电池寿命及续航</a></li>
                <li>
                    <a href="#%e7%94%b5%e5%8e%8b%e4%b8%8b%e6%8e%a2" aria-label="电压下探">电压下探</a></li>
                <li>
                    <a href="#%e9%99%8d%e4%bd%8e%e5%8a%9f%e7%8e%87%e5%a2%99" aria-label="降低功率墙">降低功率墙</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6httpsarchlinuxstudiogithubioarchlinuxtutorialrookiedeappid_5e8aebee7bdaee4baa4e68da2e69687e4bbb6-swape58fafe98089" aria-label="交换文件"><a href="https://archlinuxstudio.github.io/ArchLinuxTutorial/#/rookie/DE&amp;App?id=_5%e8%ae%be%e7%bd%ae%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6-swap%e5%8f%af%e9%80%89">交换文件</a></a></li></ul>
                </li>
                <li>
                    <a href="#questions" aria-label="QUESTIONS">QUESTIONS</a><ul>
                        
                <li>
                    <a href="#ubuntu-%e6%97%a0%e6%b3%95%e5%85%b3%e6%9c%ba" aria-label="Ubuntu 无法关机">Ubuntu 无法关机</a></li>
                <li>
                    <a href="#acpi-error-ae_already_existshttpsaskubuntucomquestions1064528cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists" aria-label="ACPI ERROR: AE_ALREADY_EXISTS"><a href="https://askubuntu.com/questions/1064528/cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists">ACPI ERROR: AE_ALREADY_EXISTS</a></a></li>
                <li>
                    <a href="#%e8%a7%a3%e5%8e%8bzip%e4%b9%b1%e7%a0%81httpsforumubuntuorgcnviewtopicphpf122t175405p1343326" aria-label="解压zip乱码"><a href="https://forum.ubuntu.org.cn/viewtopic.php?f=122&amp;t=175405&amp;p=1343326">解压zip乱码</a></a></li>
                <li>
                    <a href="#cant-run-csgo-at-fullscreenhttpsaskubuntucomquestions1114857cant-run-csgo-at-fullscreen-ubuntu-18-10" aria-label="Can&amp;rsquo;t run CS:GO at fullscreen"><a href="https://askubuntu.com/questions/1114857/cant-run-csgo-at-fullscreen-ubuntu-18-10">Can&rsquo;t run CS:GO at fullscreen</a></a></li>
                <li>
                    <a href="#how-to-disable-lock-in--kubuntuhttpswwwubuntubuzzcom201604how-to-disable-suspend-lock-ubuntu-kubuntuhtmlm1textto20disable20kde20lock20behavior2c20in20the20sameactions20post20tags203a20kde2c20kubuntu2c20ubuntu2c20unity" aria-label="How To Disable Lock In Kubuntu"><a href="https://www.ubuntubuzz.com/2016/04/how-to-disable-suspend-lock-ubuntu-kubuntu.html?m=1#:~:text=To%20disable%20KDE%20lock%20behavior%2C%20in%20the%20same,actions.%20Post%20Tags%20%3A%20KDE%2C%20Kubuntu%2C%20Ubuntu%2C%20unity">How To Disable Lock In  Kubuntu</a></a></li>
                <li>
                    <a href="#gnome-3-displays-two-icons-for-same-apphttpsaskubuntucomquestions898474why-do-some-applications-have-two-icons-in-usr-share-application" aria-label="Gnome 3 displays two icons for same app"><a href="https://askubuntu.com/questions/898474/why-do-some-applications-have-two-icons-in-usr-share-application">Gnome 3 displays two icons for same app</a></a></li>
                <li>
                    <a href="#ssh_exchange_identification-connection-closed-by-remote-hosthttpswwwzhihucomquestion20023544" aria-label="ssh_exchange_identification: Connection closed by remote host"><a href="https://www.zhihu.com/question/20023544">ssh_exchange_identification: Connection closed by remote host</a></a></li>
                <li>
                    <a href="#disk-show-129986-tb" aria-label="Disk show 129986 TB">Disk show 129986 TB</a></li>
                <li>
                    <a href="#no-caching-mode-page-found" aria-label="No Caching mode page found">No Caching mode page found</a></li>
                <li>
                    <a href="#certificate-verification-failedhttpsblogcsdnnetchaowanqarticledetails121559709" aria-label="Certificate verification failed"><a href="https://blog.csdn.net/Chaowanq/article/details/121559709">Certificate verification failed</a></a></li>
                <li>
                    <a href="#move-and-overwrite-subdirectories-and-files-to-parent-directoryhttpsunixstackexchangecomquestions9899how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory" aria-label="Move and overwrite subdirectories (and files) to parent directory"><a href="https://unix.stackexchange.com/questions/9899/how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory">Move and overwrite subdirectories (and files) to parent directory</a></a></li>
                <li>
                    <a href="#system-program-problem-detectedhttpswwwcnblogscomcrazyackingp5451861html" aria-label="System program problem detected"><a href="https://www.cnblogs.com/crazyacking/p/5451861.html">System program problem detected</a></a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="tips">TIPS<a hidden class="anchor" aria-hidden="true" href="#tips">#</a></h2>
<h3 id="backupyoursystemhttpshelpubuntucomcommunitybackupyoursystem"><a href="https://help.ubuntu.com/community/BackupYourSystem">BackupYourSystem</a><a hidden class="anchor" aria-hidden="true" href="#backupyoursystemhttpshelpubuntucomcommunitybackupyoursystem">#</a></h3>
<h4 id="rsync">Rsync<a hidden class="anchor" aria-hidden="true" href="#rsync">#</a></h4>
<p>目的在于恢复系统出现的错误，类似于虚拟机的快照。</p>
<p><strong>备份</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
set -o errexit
set -o nounset
set -o pipefail

readonly SOURCE_DIR<span style="color:#f92672">=</span>/
readonly BACKUP_DIR<span style="color:#f92672">=</span>/home/kurome/DataBackup
readonly DATETIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>date <span style="color:#e6db74">&#39;+%Y-%m-%d_%H:%M:%S&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
readonly BACKUP_PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>DATETIME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
readonly LATEST_LINK<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/latest&#34;</span>

rsync -av <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --delete <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>SOURCE_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --link-dest <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LATEST_LINK<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --exclude<span style="color:#f92672">={</span><span style="color:#e6db74">&#34;dev&#34;</span>,<span style="color:#e6db74">&#34;proc&#34;</span>,<span style="color:#e6db74">&#34;sys&#34;</span>,<span style="color:#e6db74">&#34;tmp&#34;</span>,<span style="color:#e6db74">&#34;run&#34;</span>,<span style="color:#e6db74">&#34;mnt&#34;</span>,<span style="color:#e6db74">&#34;media&#34;</span>,<span style="color:#e6db74">&#34;lost+found&#34;</span>,<span style="color:#e6db74">&#34;Trash&#34;</span>,<span style="color:#e6db74">&#34;Downloads/*&#34;</span>,<span style="color:#e6db74">&#34;DataBackup/*&#34;</span>,<span style="color:#e6db74">&#34;DataPool/*&#34;</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
rm -rf <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LATEST_LINK<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
ln -s <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BACKUP_PATH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LATEST_LINK<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>注意：</p>
<ul>
<li><code>${SOURCE_DIR}/</code>必须带反斜杠，否则会备份<code>SOURCE_DIR</code>这个目录，而不是这个目录里的内容。</li>
<li><code>--exclude=&quot;Trash&quot;</code>，Trash被认为为目录，而非文件或文件和目录，并且，它不支持路径<code>~/.local/share/Trash</code></li>
</ul>
<p>查看备份大小</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo du -hs /backup/
16G    /backup/
</code></pre></div><p>整个备份为16GB，所花时间 12m。</p>
<p>通过 crontab 使之每周一12点自动备份：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo crontab -e
<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">12</span> * * <span style="color:#ae81ff">1</span> /path/.backup.sh
</code></pre></div><p><strong>还原</strong></p>
<p>还原的时候，如果带 <code>--delete</code>，那么就会删除备份时 <code>--exclude=</code> 不包含的内容。还原的时候，同名文件内容会恢复到备份时候的状态。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rsync -av 备份目录 源目录
$ rsync -av /backup/latest/ /
</code></pre></div><h4 id="tarhttpshelpubuntucomcommunitybackupyoursystemtar"><a href="https://help.ubuntu.com/community/BackupYourSystem/TAR">TAR</a><a hidden class="anchor" aria-hidden="true" href="#tarhttpshelpubuntucomcommunitybackupyoursystemtar">#</a></h4>
<p>目的在于迁移系统到新硬盘。</p>
<p><strong>Backup</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd / <span style="color:#75715e"># THIS CD IS IMPORTANT THE FOLLOWING LONG COMMAND IS RUN FROM /</span>
$ tar -cvpzf backup.tar.gz <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/backup.tar.gz <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/proc <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/tmp <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/mnt <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/dev <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/sys <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/run <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/media <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/var/log <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/var/cache/apt/archives <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/usr/src/linux-headers* <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/home/*/.gvfs <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--exclude<span style="color:#f92672">=</span>/home/*/.cache <span style="color:#ae81ff">\ </span>
--exclude<span style="color:#f92672">=</span>/home/*/.local/share/Trash /
</code></pre></div><p><strong>Restoring</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo tar -xvpzf /path/to/backup.tar.gz -C /media/whatever --numeric-owner
$ cd /media/whatever
$ mkdir /proc /sys /mnt /media 
</code></pre></div><p>For the system to boot, you will need to restore grub. To do this, you will need to reconfigure it in a chroot:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo -s
<span style="color:#66d9ef">for</span> f in dev dev/pts proc ; <span style="color:#66d9ef">do</span> mount --bind /$f /media/whatever/$f ; <span style="color:#66d9ef">done</span>
$ chroot /media/whatever
$ dpkg-reconfigure grub-pc
</code></pre></div><p>You will get a menu asking you what drive(s) grub should be installed on. Choose whatever drive(s) the computer will be booting from.</p>
<p>For more information on repairing grub, see [GrubHowto](<a href="https://help.ubuntu.com/community/GrubHowto#Backup">https://help.ubuntu.com/community/GrubHowto#Backup</a>, Repairing and Reinstalling GRUB)</p>
<h4 id="deja-duphttpswikignomeorgappsdejadup"><a href="https://wiki.gnome.org/Apps/DejaDup">deja-dup</a><a hidden class="anchor" aria-hidden="true" href="#deja-duphttpswikignomeorgappsdejadup">#</a></h4>
<p>Simple backup tool for GNOME</p>
<p><a href="https://askubuntu.com/questions/145698/where-does-deja-dup-keep-its-config-files"><strong>config files</strong></a></p>
<p>The deja-dup settings can also be changed with <code>dconf-editor</code> in the <code>dconf-tools</code> apt package. The settings are in <code>org.gnome.DejaDup</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings list-recursively org.gnome.DejaDup
$ gsettings set org.gnome.DejaDup include-list <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;/home/kurome/.aria2&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.clash&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.config/autostart&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.config/Typora&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.config/variety&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.hugo&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.local/bin&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.local/share/applications&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.local/share/TelegramDesktop&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.oh-my-zsh&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.ssh&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.telegram&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/.typora&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/Documents&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/Downloads&#39;</span>, <span style="color:#e6db74">&#39;/home/kurome/Templates&#39;</span><span style="color:#f92672">]</span>
</code></pre></div><p>from: <a href="https://answers.launchpad.net/deja-dup/+question/128181">launchpad.net: How do I also backup my deja Dup settings?</a></p>
<p>The settings used to be stored there, and the files are still present.</p>
<p>In more recent version they are stored in:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">~/.config/dconf
</code></pre></div><h4 id="others">Others<a hidden class="anchor" aria-hidden="true" href="#others">#</a></h4>
<p><a href="https://askubuntu.com/questions/618244/does-the-uefi-partition-either-must-or-should-be-first-for-some-reason-if-s"><strong>Does the UEFI partition either &ldquo;MUST&rdquo; or &ldquo;SHOULD&rdquo; be first for some reason? If so why?</strong></a></p>
<p>The key words &ldquo;SHOULD&rdquo;, &ldquo;MUST&rdquo; and &ldquo;MAY&rdquo; (capitalised) in this answer are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>
<p>An (U)EFI System Partition (ESP from now on):</p>
<ul>
<li>MAY reside at the beginning of the disk
<strong>and</strong></li>
<li>SHOULD be FAT32 because of <a href="http://www.rodsbooks.com/efi-bootloaders/principles.html">Windows compatibility</a>.</li>
</ul>
<p>The only <a href="http://www.uefi.org/sites/default/files/resources/UEFI_Drive_Partition_Limits_Fact_Sheet.pdf">official limit</a> is:</p>
<ul>
<li>the ESP MUST reside in the first 2.2 Terabytes of the disk.</li>
</ul>
<p>So, the ESP MUST reside anywhere in those first 2.2 TB of the disk, but <em>there is absolutely no need for the ESP to be the first partition</em> or reside on the beginning of the disk whatsoever.
(It&rsquo;s just that some large company in Redmond, WA <a href="https://i-technet.sec.s-msft.com/dynimg/IC514408.png">advises system integrators differently</a>)&hellip;</p>
<p>I would put it as the last partition on the disk (if &lt; 2.2TB) as it&rsquo;s only used to load other OSes, but that&rsquo;s just a personal, totally subjective opinion!</p>
<p><strong>ubuntu 20.04 默认 fstab</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># / was on /dev/sda2 during installation</span>
UUID<span style="color:#f92672">=</span>4b66082e-7982-4056-91c2-39cf9177b20f /               ext4    errors<span style="color:#f92672">=</span>remount-ro <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">1</span>
<span style="color:#75715e"># /boot/efi was on /dev/sda1 during installation</span>
UUID<span style="color:#f92672">=</span>ACEE-47E4  /boot/efi       vfat    umask<span style="color:#f92672">=</span><span style="color:#ae81ff">0077</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">1</span>
/swapfile                                 none            swap    sw              <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>
</code></pre></div><p>/boot/efi 是独立分区，而不是 /boot/，如果是 /boot/ 作为独立分区，还原的时候会报错 cannot create symbolic link &lsquo;./initrd.img&rsquo;: Operation not permitted</p>
<p><a href="https://askubuntu.com/questions/1103170/accidently-deleted-boot-option-on-dell-laptop"><strong>Add Boot Option Manually</strong></a></p>
<p>In <em>Boot Option Name</em>, type <em>Ubuntu</em>, and in <em>File Name</em> select the file <em>grubx64.efi</em> and then Click on &lsquo;OK&rsquo;.</p>
<p><a href="https://linux.cn/article-10655-1.html"><strong>13 个开源备份解决方案</strong></a></p>
<ul>
<li>
<p>Cronopete</p>
</li>
<li>
<p>Deja Dup</p>
</li>
<li>
<p>Rclone</p>
</li>
<li>
<p>Rdiff-backup</p>
</li>
<li>
<p>Restic</p>
</li>
<li>
<p>Rsync</p>
</li>
<li>
<p><a href="https://www.borgbackup.org/">BorgBackup</a>：带有压缩和加密特性以用具有数据去重功能的备份解决方案。它基于 BSD 许可证，支持 Linux、MacOS 和 BSD。</p>
</li>
<li>
<p><a href="https://www.urbackup.org/">UrBackup</a>：它可以做镜像和文件的完整和增量备份；你可以保存整个分区或单个目录。它有 Windows、Linux、和 MacOS 客户端，并且采用 GNU Affero 公共许可证。</p>
</li>
<li>
<p><a href="http://luckybackup.sourceforge.net/">LuckyBackup</a>：根据其网站介绍，“它是一个易于使用、快速（只传输变化部分，而不是全部数据）、安全（在做任何数据操作之前，先检查所有需要备份的目录，以确保数据安全）、可靠和完全可定制的备份解决方案。它在 GPL 许可证下发行。</p>
</li>
<li>
<p><a href="http://0pointer.net/blog/casync-a-tool-for-distributing-file-system-images.html">Casync</a> ：一个可寻址内容的同步解决方案 —— 它设计用于备份、同步、存储和检索大文件系统的多个相关版本。它使用 GNU Lesser 公共许可证。</p>
</li>
<li>
<p><a href="https://syncthing.net/">Syncthing</a>：用于在两台计算机之间同步文件。它基于 Mozilla 公共许可证使用，根据其网站介绍，它是安全和私密的。它可以工作于 MacOS、Windows、Linux、FreeBSD、Solaris 和 OpenBSD。</p>
</li>
<li>
<p><a href="https://www.duplicati.com/">Duplicati</a>：一个可工作于 Windows、MacOS 和 Linux 上的、并且支持多种标准协议（比如 FTP、SSH、WebDAV 和云服务）、免费的备份解决方案。它的特性是强大的加密功能，并且它使用 GPL 许可证。</p>
</li>
<li>
<p><a href="http://dirvish.org/">Dirvish</a> ：一个基于磁盘的虚拟镜像备份系统，它使用 OSL-3.0 许可证。它要求必须安装有 Rsync、Perl5、SSH。</p>
</li>
<li>
<p><a href="https://www.bacula.org/">Bacula</a>：允许系统管理员去管理备份、恢复、和跨网络的不同种类计算机上的多种数据的一套计算机程序，它支持在 Linux、FreeBSD、Windows、MacOS、OpenBSD 和 Solaris 上运行，并且它的大部分源代码都是基于 AGPLv3 许可证的。</p>
</li>
<li>
<p><a href="https://backuppc.github.io/backuppc/">BackupPC</a>：一个高性能的、企业级的、可以备份 Linux、Windows 和 MacOS 系统的 PC 和笔记本电脑上的数据到服务器磁盘上的备份解决方案。它是基于 GPLv3 许可证的。</p>
</li>
<li>
<p><a href="http://www.amanda.org/">Amanda</a> ：一个使用 C 和 Perl 写的备份系统，它允许系统管理员去备份整个网络中的客户端到一台服务器上的磁带、磁盘或基于云的系统。它是由马里兰大学于 1991 年开发并拥有版权，并且它有一个 BSD 式的许可证。</p>
</li>
<li>
<p><a href="https://github.com/bit-team/backintime">Back in Time</a> ：一个为 Linux 设计的简单的备份实用程序。它提供了命令行和图形用户界面，它们都是用 Python 写的。去执行一个备份，只需要指定存储快照的位置、需要备份的文件夹，和备份频率即可。它使用的是 GPLv2 许可证。</p>
</li>
<li>
<p><a href="https://github.com/teejee2008/timeshift">Timeshift</a> ：一个 Linux 上的备份实用程序，它类似于 Windows 上的系统恢复和 MacOS 上的时间胶囊。它的 GitHub 仓库上介绍说：“Timeshift 通过定期递增的文件系统快照来保护你的系统。这些快照可以在日后用于数据恢复，以撤销某些对文件系统的修改。”</p>
</li>
<li>
<p><a href="https://github.com/spersson/Kup">Kup</a> ：一个能够帮助用户备份它们的文件到 USB 驱动器上的备份解决方案，但它也可以用于执行网络备份。它的 GitHub 仓库上介绍说：”当插入你的外部硬盘时，Kup 将自动启动并复制你的最新的修改。“</p>
</li>
</ul>
<p><a href="https://askubuntu.com/questions/19901/how-to-make-a-disk-image-and-restore-from-it-later"><strong>How to make a disk image and restore from it later?</strong></a>/<a href="https://askubuntu.com/questions/741723/moving-entire-linux-installation-to-another-drive"><strong>Moving entire Linux installation to another drive</strong></a></p>
<p>It&rsquo;s Clonezilla Live: <a href="http://clonezilla.org/">http://clonezilla.org/</a></p>
<p>The tutorial for Clonezilla can be found <a href="http://www.dedoimedo.com/computers/free_imaging_software.html">here.</a></p>
<p><a href="https://askubuntu.com/questions/13278/easy-backup-restore-of-installed-system"><strong>Easy backup/restore of installed system?</strong></a></p>
<p>Yes you can use remastersys for that.You can see a complete tutorial <a href="http://www.ubuntugeek.com/creating-custom-ubuntu-live-cd-with-remastersys.html">here</a></p>
<h3 id="清理系统">清理系统<a hidden class="anchor" aria-hidden="true" href="#清理系统">#</a></h3>
<h4 id="删除不再需要的包">删除不再需要的包<a hidden class="anchor" aria-hidden="true" href="#删除不再需要的包">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt autoremove
</code></pre></div><h4 id="apt-cache">APT cache<a hidden class="anchor" aria-hidden="true" href="#apt-cache">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># see the size of this cache</span>
$ sudo du -sh /var/cache/apt 
<span style="color:#75715e"># remove only the outdated packages</span>
$ sudo apt-get autoclean
<span style="color:#75715e"># delete apt cache in its entirety</span>
$ sudo apt-get clean 
</code></pre></div><p>apt-get 和软件中心下载的软件包一般放在 <code>/var/cache/apt/archives/</code> 目录，一般都安装在 <code>/usr/</code></p>
<h4 id="journal-logs">Journal logs<a hidden class="anchor" aria-hidden="true" href="#journal-logs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># check the log size</span>
$ journalctl --disk-usage
<span style="color:#75715e"># clear the logs that are older than a certain days</span>
$ journalctl --vacuum-time<span style="color:#f92672">=</span>3d
</code></pre></div><h4 id="thumbnails-cache">Thumbnails cache<a hidden class="anchor" aria-hidden="true" href="#thumbnails-cache">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># check the size of thumbnail cache</span>
$ du -sh ~/.cache/thumbnails
$ rm -rf ~/.cache/thumbnails/*
</code></pre></div><h4 id="duplicate-files">Duplicate files<a hidden class="anchor" aria-hidden="true" href="#duplicate-files">#</a></h4>
<p>Find and remove duplicate files：You can use a GUI tool like <a href="https://www.pixelbeat.org/fslint/">FSlint</a> or a command line tool like <a href="https://github.com/adrianlopezroche/fdupes">FDUPES</a> for this task</p>
<h4 id="old-linux-kernels">Old Linux kernels<a hidden class="anchor" aria-hidden="true" href="#old-linux-kernels">#</a></h4>
<p>Remove old Linux kernels</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># List all installed Linux kernels</span>
$ sudo dpkg --list <span style="color:#e6db74">&#39;linux-image*&#39;</span>
$ apt-get remove linux-image-VERSION
</code></pre></div><h4 id="清理-snaphttpslinuxcnarticle-14302-1html"><a href="https://linux.cn/article-14302-1.html">清理 Snap</a><a hidden class="anchor" aria-hidden="true" href="#清理-snaphttpslinuxcnarticle-14302-1html">#</a></h4>
<p>与 snap 有关的系统文件都存放在 <code>/var/lib/snapd</code> 目录下。根据你所安装的 Snap 包的数量，这个目录的大小可能在几 GB。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo du -sh /var/lib/snapd
</code></pre></div><p>根据设计，Snap 至少会在你的系统上保留一个你所安装的软件包的旧版本。你可以通过使用 Snap 命令看到这种行为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ snap list --all
</code></pre></div><p>你应该看到同一个软件包被列了两次，而且版本和修订号都不同。</p>
<p>为了释放磁盘空间，你可以删除额外的软件包版本。你怎么知道要删除哪一个呢？你可以看到，这些较旧的软件包被标记为“禁用”。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#75715e"># Removes old revisions of snaps</span>
<span style="color:#75715e"># CLOSE ALL SNAPS BEFORE RUNNING THIS</span>
set -eu
snap list --all | awk <span style="color:#e6db74">&#39;/disabled/{print $1, $3}&#39;</span> |
    <span style="color:#66d9ef">while</span> read snapname revision; <span style="color:#66d9ef">do</span>
        snap remove <span style="color:#e6db74">&#34;</span>$snapname<span style="color:#e6db74">&#34;</span> --revision<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$revision<span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">done</span>
</code></pre></div><h3 id="命令行技巧">命令行技巧<a hidden class="anchor" aria-hidden="true" href="#命令行技巧">#</a></h3>
<h4 id="bash-快捷键">Bash 快捷键<a hidden class="anchor" aria-hidden="true" href="#bash-快捷键">#</a></h4>
<p><strong>编辑命令</strong></p>
<ul>
<li><code>Ctrl + a</code> ：移到命令行首</li>
<li><code>Ctrl + e</code> ：移到命令行尾</li>
<li><code>Ctrl + f</code> ：按字符前移（右向）</li>
<li><code>Ctrl + b</code> ：按字符后移（左向）</li>
<li><code>Alt + f</code> ：按单词前移（右向）</li>
<li><code>Alt + b</code> ：按单词后移（左向）</li>
<li><code>Ctrl + xx</code>：在命令行首和光标之间移动</li>
<li><code>Ctrl + u</code> ：从光标处删除至命令行首</li>
<li><code>Ctrl + k</code> ：从光标处删除至命令行尾</li>
<li><code>Ctrl + w</code> ：从光标处删除至字首</li>
<li><code>Alt + d</code> ：从光标处删除至字尾</li>
<li><code>Ctrl + d</code> ：删除光标处的字符</li>
<li><code>Ctrl + h</code> ：删除光标前的字符</li>
<li><code>Ctrl + y</code> ：粘贴至光标后</li>
<li><code>Alt + c</code> ：从光标处更改为首字母大写的单词</li>
<li><code>Alt + u</code> ：从光标处更改为全部大写的单词</li>
<li><code>Alt + l</code> ：从光标处更改为全部小写的单词</li>
<li><code>Ctrl + t</code> ：交换光标处和之前的字符</li>
<li><code>Alt + t</code> ：交换光标处和之前的单词</li>
<li><code>Alt + Backspace</code>：与 Ctrl + w 类似，分隔符有些差别</li>
</ul>
<p><strong>重新执行命令</strong></p>
<ul>
<li><code>Ctrl + r</code>：逆向搜索命令历史</li>
<li><code>Ctrl + g</code>：从历史搜索模式退出</li>
<li><code>Ctrl + p</code>：历史中的上一条命令</li>
<li><code>Ctrl + n</code>：历史中的下一条命令</li>
<li><code>Alt + .</code>：使用上一条命令的最后一个参数</li>
</ul>
<p><strong>控制命令</strong></p>
<ul>
<li><code>Ctrl + l</code>：清屏</li>
<li><code>Ctrl + o</code>：执行当前命令，并选择上一条命令</li>
<li><code>Ctrl + s</code>：阻止屏幕输出</li>
<li><code>Ctrl + q</code>：允许屏幕输出</li>
<li><code>Ctrl + c</code>：终止命令</li>
<li><code>Ctrl + z</code>：挂起命令</li>
</ul>
<p><strong>Bang (!) 命令</strong></p>
<ul>
<li><code>!!</code>：执行上一条命令</li>
<li><code>!blah</code>：执行最近的以 blah 开头的命令，如 <code>!ls</code></li>
<li><code>!blah:p</code>：仅打印输出，而不执行</li>
<li><code>!$</code>：上一条命令的最后一个参数，与 <code>Alt + .</code> 相同</li>
<li><code>!$:p</code>：打印输出 <code>!$</code> 的内容</li>
<li><code>!*</code>：上一条命令的所有参数</li>
<li><code>!*:p</code>：打印输出 <code>!*</code> 的内容</li>
<li><code>^blah</code>：删除上一条命令中的 blah</li>
<li><code>^blah^foo</code>：将上一条命令中的 blah 替换为 foo</li>
<li><code>^blah^foo^</code>：将上一条命令中所有的 blah 都替换为 foo</li>
</ul>
<h4 id="你可能不知道的shellhttpscoolshellcnarticles8619html"><a href="https://coolshell.cn/articles/8619.html">你可能不知道的SHELL</a><a hidden class="anchor" aria-hidden="true" href="#你可能不知道的shellhttpscoolshellcnarticles8619html">#</a></h4>
<p>Shell也叫做命令行界面，它是*nix操作系统下用户和计算机的交互界面。Shell这个词是指操作系统中提供访问内核服务的程序。</p>
<p>这篇文章向大家介绍Shell一些非广为人知、但却实用有趣的知识，权当品尝shell主食后的甜点吧。</p>
<p><strong>科普</strong></p>
<p>先科普几个你可能不知道的事实：</p>
<ul>
<li>
<p>Shell几乎是和Unix操作系统一起诞生，第一个Unix Shell是肯·汤普逊（Ken Thompson）以Multics上的Shell为模范在1971年改写而成，并命名Thompson sh。即便是后来流行的bash（shell的一种变体），它的年龄实际上比当前流行的所有的Linux kernel都大，可谓在Linux系统上是先有Shell再有Kernel。</p>
</li>
<li>
<p>当前绝大部分*nix和MacOS操作系统里的默认的Shell都是bash，bash由Brian Fox在1987年创造，全称Bourne Again shell ( bash)。</p>
</li>
<li>
<p>你或许听说除了bash之外，还有Bourne shell ( sh)，Korn shell ( ksh)，C shell （包括 csh and tcsh），但是你知道这个星球上一共存在着大约50多种不同的shell么？想了解他们，请参考 <a href="https://www.freebsd.org/ports/shells.html">http://www.freebsd.org/ports/shells.html</a>。</p>
</li>
</ul>
<p><strong>一些强大的命令</strong></p>
<ul>
<li>
<p>在命令行前加空格，该命令不会进入history里。</p>
</li>
<li>
<p><code>ctrl-x e</code></p>
<p>快速启动你的默认编辑器（由变量$EDITOR设置）。</p>
</li>
</ul>
<h4 id="为什么说-zsh-是-shell-中的极品httpswwwzhihucomquestion21418449"><a href="https://www.zhihu.com/question/21418449">为什么说 zsh 是 shell 中的极品？</a><a hidden class="anchor" aria-hidden="true" href="#为什么说-zsh-是-shell-中的极品httpswwwzhihucomquestion21418449">#</a></h4>
<p><strong>色彩高亮</strong></p>
<p>并不是传统基于正则表达式的色彩高亮，而是真的会判断你输入的是啥的色彩高亮。</p>
<p>比如一个主题白色代表普通命令或者程序，红色代表错误命令，青色的代表内建命令或者 alias （echo 和 ls ），这些都不是正则判断出来的，是真的去检查的。非零的错误码（上一条命令错误），也可以高亮显示。</p>
<p><strong>命令提示</strong></p>
<p>注意，命令提示和补全是两个完全不同的系统，很多时候提示比补全更有用。你输入命令，后面就用灰色给你提示命令的参数，而且是随着你动态输入完每一个字母不断修正变化。</p>
<p>这个命令提示是基于你的历史命令数据库进行分析的，随着你输入的命令越来越多，提示将会越来越准确和顺手。</p>
<p>如果你觉得它提示的正确，你可以 CTRL+F 表示采纳，后面就会自动帮你一次性全部输入完了。</p>
<p><strong>智能补全</strong></p>
<p>缩写路径补全：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /v/w/h
</code></pre></div><p>敲一个TAB</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /var/www/html/
</code></pre></div><p>补全目录、命令参数补全连敲两次TAB进入<strong>选择模式</strong>，除了 tab/shift+tab 可以前后切换外，你还可以使用光标键上下左右移动。回车表示确认选择，用 CTRL+G 表示退出。</p>
<p><strong>快速跳转</strong></p>
<p>输入 cd 后面加一个减号后，按一次 tab 马上就列出本次登陆后去过的最近几次路径，接着根据下面的提示输入数字按回车就过去了，比如输入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd -5 &lt;回车&gt;
</code></pre></div><p>当然你还可以不输入数字，而是再按一次 tab 进入选择模式，上下键或者 ctrl+n/p 来选择，回车确认，ctrl+g 返回。</p>
<p><strong>自动跳转</strong></p>
<p>敲入 z 命令，列出了自从我开始用zsh进入过的目录和他们的权重，进入次数越多，权重越大。z 后面加一个关键词就能跳转到所有匹配的历史路径中权重最高的那个了。空格分隔多个关键字，z会先匹配出第一个来，然后再匹配第二个&hellip;</p>
<p>使用：“z -l foo&quot; 可以列出包含 foo 的所有历史路径。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 按下ALT+O 就执行 cd .. 命令</span>
bindkey -s <span style="color:#e6db74">&#39;\eo&#39;</span>   <span style="color:#e6db74">&#39;cd ..\n&#39;</span>   
<span style="color:#75715e"># 按下 ALT+; 就执行 ls -l 命令</span>
bindkey -s <span style="color:#e6db74">&#39;\e;&#39;</span>   <span style="color:#e6db74">&#39;ls -l\n&#39;</span>    
</code></pre></div><p><strong>热键绑定</strong></p>
<p>zsh 里面使用 bindkey 命令可以设置一系列热键，用来运行某一个 zsh 内部命令或者某个 shell 命令。</p>
<h4 id="应该知道的linux技巧httpscoolshellcnarticles8883html"><a href="https://coolshell.cn/articles/8883.html">应该知道的LINUX技巧</a><a hidden class="anchor" aria-hidden="true" href="#应该知道的linux技巧httpscoolshellcnarticles8883html">#</a></h4>
<p>首先，我想告诉大家，<strong>在Unix/Linux下，最有效率技巧的不是操作图形界面，而是命令行操作，因为命令行意味着自动化</strong>。</p>
<p><strong>日常</strong></p>
<ul>
<li>
<p>请man bash后查找Readline Key Bindings一节来看看bash的默认热键，比如：<code>Alt-.</code> 把上一次命令的最后一个参数打出来，而<code>Alt-*</code> 则列出你可以输入的命令。</p>
</li>
<li>
<p>回到上一次的工作目录： cd –  （回到home是 cd ~）</p>
</li>
<li>
<p>pstree -p 可以帮你显示进程树。</p>
</li>
<li>
<p>使用 pgrep 和 pkill 来找到或是kill 某个名字的进程。 (-f 选项很有用).</p>
</li>
<li>
<p>通过 &lt;(some command) 可以把某命令当成一个文件。示例：比较一个本地文件和远程文件 /etc/hosts： diff /etc/hosts &lt;(ssh somehost cat /etc/hosts)</p>
</li>
<li>
<p>在 bash中，使用重定向到标准输出和标准错误。如： some-command &gt;logfile 2&gt;&amp;1。</p>
</li>
<li>
<p>使用 man ascii 来查看 ASCII 表。</p>
</li>
</ul>
<p><strong>系统调试</strong></p>
<ul>
<li>
<p>如果你想知道磁盘、CPU、或网络状态，你可以使用 iostat, netstat, top (或更好的 htop), 还有 dstat 命令。你可以很快地知道你的系统发生了什么事。关于这方面的命令，还有iftop, iotop等。</p>
</li>
<li>
<p>要了解内存的状态，你可以使用free和vmstat命令。具体来说，你需要注意 “cached” 的值，这个值是Linux内核占用的内存。还有free的值。</p>
</li>
<li>
<p>如果你要找到哪个socket或进程在使用网络带宽，你可以使用 iftop 或 nethogs。</p>
</li>
<li>
<p>如果你要抓网络包的话，试试 wireshark 或 tshark。</p>
</li>
<li>
<p>了解 strace 和 ltrace。这两个命令可以让你查看进程的系统调用，这有助于你分析进程的hang在哪了，怎么crash和failed的。你还可以用其来做性能profile，使用 -c 选项，你可以使用-p选项来attach上任意一个进程。</p>
</li>
<li>
<p>了解用ldd命令来检查相关的动态链接库。注意：<a href="https://coolshell.cn/articles/1626.html">ldd的安全问题</a></p>
</li>
<li>
<p>使用gdb来调试一个正在运行的进程或分析core dump文件。参看我写的《<a href="https://coolshell.cn/articles/3643.html">GDB中应该知道的几个调试方法</a>》</p>
</li>
<li>
<p>学会到 /proc 目录中查看信息。这是一个Linux内核运行时记录的整个操作系统的运行统计和信息，比如： /proc/cpuinfo, /proc/xxx/cwd, /proc/xxx/exe, /proc/xxx/fd/, /proc/xxx/smaps.</p>
</li>
<li>
<p>如果你调试某个东西为什么出错时，sar命令会有用。它可以让你看看 CPU, 内存, 网络, 等的统计信息。</p>
</li>
<li>
<p>使用 dmesg 来查看一些硬件或驱动程序的信息或问题。</p>
</li>
</ul>
<h4 id="powerline-shellhttpsgithubcomb-ryanpowerline-shell"><a href="https://github.com/b-ryan/powerline-shell">powerline-shell</a><a hidden class="anchor" aria-hidden="true" href="#powerline-shellhttpsgithubcomb-ryanpowerline-shell">#</a></h4>
<p>不想每次都安装 zsh 与 ohmyzsh？</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install powerline-shell
</code></pre></div><p>Add the following to your <code>.bashrc</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">function</span> _update_ps1<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    PS1<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>powerline-shell $?<span style="color:#66d9ef">)</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $TERM !<span style="color:#f92672">=</span> linux <span style="color:#f92672">&amp;&amp;</span> ! $PROMPT_COMMAND <span style="color:#f92672">=</span>~ _update_ps1 <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
    PROMPT_COMMAND<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_update_ps1; </span>$PROMPT_COMMAND<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><p>默认的话，路径会完整显示，会很长</p>
<p>generate the default config at this location using:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.config/powerline-shell <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>powerline-shell --generate-config &gt; ~/.config/powerline-shell/config.json
</code></pre></div><p>Segment Configuration</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">{ 
    &#34;segments&#34;: 
    [  
        &#34;virtual_env&#34;,  
        &#34;username&#34;,  
        &#34;hostname&#34;,  
        &#34;ssh&#34;,   
        &#34;cwd&#34;,   
        &#34;git&#34;, 
        &#34;hg&#34;,    
        &#34;jobs&#34;,  
        &#34;root&#34; 
    ],
<span style="color:#a6e22e">+  &#34;cwd&#34;: 
</span><span style="color:#a6e22e">+    {
</span><span style="color:#a6e22e">+    &#34;max_depth&#34;: 1
</span><span style="color:#a6e22e">+    }
</span><span style="color:#a6e22e"></span>}
</code></pre></div><h3 id="检测硬盘坏道和坏块httpsblog51ctocompengjc2417004"><a href="https://blog.51cto.com/pengjc/2417004">检测硬盘坏道和坏块</a><a hidden class="anchor" aria-hidden="true" href="#检测硬盘坏道和坏块httpsblog51ctocompengjc2417004">#</a></h3>
<p>硬盘坏道分为物理坏道和逻辑坏道。</p>
<ul>
<li>物理坏道：就是硬盘实体有坏的地方，物理坏道推荐换硬盘，当然也有办法重新分区来隔离坏道，不过可能也用不久，所以不推荐。</li>
<li>逻辑坏道：是磁盘磁道上面的校验信息（ECC）跟磁道的数据对不上号所致。出现这一故障的原因，通常都是因为一些程序的错误操作或是该处扇区的磁介质开始出现不稳定的先兆。物理坏道也是逻辑坏道产生的一种原因。</li>
</ul>
<h4 id="发现">发现<a hidden class="anchor" aria-hidden="true" href="#发现">#</a></h4>
<p>dmesg：当有硬盘坏道时，通常在dmesg输出的信息中会有 Buffer I/O Error，所以经常检查dmesg的输出可以及时发现是否存在硬盘问题。</p>
<h4 id="检测">检测<a hidden class="anchor" aria-hidden="true" href="#检测">#</a></h4>
<p>通过fdisk 查看显示所有磁盘或闪存的信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo fdisk -l /dev/sd*
</code></pre></div><p>使用 badlocks检查 linux 硬盘上的坏道/坏块</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo badblocks -s -v /dev/sdb  &gt; badsectors.txt
</code></pre></div><h4 id="修复">修复<a hidden class="anchor" aria-hidden="true" href="#修复">#</a></h4>
<p>查看上述分区检查出来的坏道信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tail -f badsectors.txt
</code></pre></div><p>先备份数据再修复磁盘。硬盘在使用时不能修复，否则可能存在写并发的问题，所以修复前需要umount对应分区,或使用 Live CD</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo umount MountPoint
</code></pre></div><p>umount 分区成功后，修复命令如下，其中<code>-w</code>表示写入修复的，后面是结束（END）和开始（START）块号，注意END在前，START在后。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo badblocks -s -w /dev/sdb <span style="color:#ae81ff">205971590</span> <span style="color:#ae81ff">205971595</span>
</code></pre></div><p>修复后再次检查</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo badblocks -s -v /dev/sdb <span style="color:#ae81ff">205971590</span> <span style="color:#ae81ff">205971595</span>
</code></pre></div><h4 id="屏蔽">屏蔽<a hidden class="anchor" aria-hidden="true" href="#屏蔽">#</a></h4>
<p>执行e2fsck（针对 ext2/ext3/ext4 文件系统）或fsck命令，命令中还需要用到 badsectors.txt 文件和设备文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># for ext2/ext3/ext4</span>
$ sudo e2fsck -l badsectors.txt /dev/sdb
<span style="color:#75715e"># others</span>
$ sudo fsck -l badsectors.txt /dev/sdb
</code></pre></div><h3 id="如何探索httpssamwhelpgithubiobook-ubuntu-qnareadhowtoexplore"><a href="https://samwhelp.github.io/book-ubuntu-qna/read/howto/explore/">如何探索</a><a hidden class="anchor" aria-hidden="true" href="#如何探索httpssamwhelpgithubiobook-ubuntu-qnareadhowtoexplore">#</a></h3>
<p><strong>從「指令」找到「使用說明」</strong></p>
<p>找使用說明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man -f ls
</code></pre></div><p>閱讀使用說明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man ls
$ man <span style="color:#ae81ff">1</span> ls

<span style="color:#75715e"># 若是「bash」內建的指令，則是可以使用「help」</span>
$ help <span style="color:#66d9ef">if</span>
</code></pre></div><p>上面的「man 1 ls」，「1」指的是「Manpage Sections」。</p>
<p>執行下面指令可以看到各個「Section」的簡介。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ whatis intro
</code></pre></div><p>然後分別執行下面的指令，可以閱讀更詳細的說明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man <span style="color:#ae81ff">1</span> intro
$ man <span style="color:#ae81ff">2</span> intro
$ man <span style="color:#ae81ff">3</span> intro
$ man <span style="color:#ae81ff">4</span> intro
$ man <span style="color:#ae81ff">5</span> intro
$ man <span style="color:#ae81ff">6</span> intro
$ man <span style="color:#ae81ff">7</span> intro
$ man <span style="color:#ae81ff">8</span> intro
</code></pre></div><p><strong>從「指令」找到「所屬套件」</strong></p>
<p>先透過「whereis」來找到「ls」所在的確切路徑。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ whereis ls
ls: /bin/ls
</code></pre></div><p>然後根據這個結果，再執行下面的指令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rpm -qf /bin/ls
$ dpkg -S /bin/ls
coreutils-8.32-1.2.x86_64
</code></pre></div><p><strong>找「已安裝套件」的「檔案列表」</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rpm -ql coreutils
$ dpkg -L coreutils
</code></pre></div><h3 id="transfer-files-between-linux-and-androidhttpsmashtipscomtransfer-images-android-linuxtext120connect20your20android20smartphone20and20your20linuxselectede2809d20or20e2809cimport20alle2809d20if20you20want20"><a href="https://mashtips.com/transfer-images-android-linux/#:~:text=1%20Connect%20your%20Android%20smartphone%20and%20your%20Linux,Selected%E2%80%9D%20or%20%E2%80%9CImport%20All%E2%80%9D%20if%20you%20want%20">Transfer files between Linux and Android</a><a hidden class="anchor" aria-hidden="true" href="#transfer-files-between-linux-and-androidhttpsmashtipscomtransfer-images-android-linuxtext120connect20your20android20smartphone20and20your20linuxselectede2809d20or20e2809cimport20alle2809d20if20you20want20">#</a></h3>
<ul>
<li>Connect Using USB Cable</li>
<li>Apps
<ul>
<li><a href="https://www.howtogeek.com/423442/how-to-wirelessly-transfer-android-files-to-a-linux-desktop/">KDE Connect/GSConnect</a></li>
<li><a href="https://www.omgubuntu.co.uk/2017/11/android-file-transfer-app-linux">Android File Transfer</a></li>
<li><a href="https://help.airdroid.com/hc/en-us/articles/360035143073-How-to-transfer-files-between-Linux-and-Android-">AirDroid</a></li>
</ul>
</li>
<li>Bluetooth</li>
</ul>
<h3 id="xorg-vs-wayland">Xorg vs Wayland<a hidden class="anchor" aria-hidden="true" href="#xorg-vs-wayland">#</a></h3>
<p>X即X11、X Window System，是用于在类UNIX的操作系统上的位图显示的窗口系统，提供了GUI环境的基本框架。X由X.Org Foundation维护，遵守MIT协议，当前参考实现为X.Org Server。在架构方面，X使用了C/S模型，客户端和服务器可以在同一个机器上，也可以在不同的机器上，X作为Server为应用程序这个Client提供显示和I/O服务。</p>
<p><img loading="lazy" src="/Distributions/XServer.png" alt=""  />
</p>
<p>Wayland是一个显示服务协议，服务端为Wayland Compositor，把X的X Server和Compositor合二为一，旨在替换X，作为类Unix操作系统上更现代、简介的窗口系统，遵守MIT协议，提供了Wayland Compositor的参考C语言实现Weston。</p>
<p><img loading="lazy" src="/Distributions/Wayland.png" alt=""  />
</p>
<p>时至今日，原本在X Server中做的事很多已被移到kernel或者单独的库中，因此X Server就显得比较累赘了。Wayland在架构上去掉了这个中间层，将compositor作为display server，使client与compositor直接通信，从而在灵活性和性能等方面上能够比前辈更加出色。</p>
<p>查看是否使用 wayland</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo $XDG_SESSION_TYPE
</code></pre></div><p><strong>Fedora、openSUSE 群讨论</strong></p>
<p>AppImage的制造者就是其中一个。主要反对的是Wayland声称自己取代X11，但在功能集合上二者完全不在一个层面，后者比前者强太多了。</p>
<p>而他反对红帽的东西主要是因为红帽一直就是Linux桌面领域比较强权的那个企业，比如早期PulseAudio，比如SystemD，早期多灾多难制造了很多麻烦。</p>
<p>推出一个新技术，在其不完善的前提下就想着取代旧技术，对于旧技术存在的但新技术不存在的功能却完全不考虑过渡方案，导致技术迭代的过程中用户就一次又一次地被抛弃。尤其和微软对比起来，微软在砍掉很重要的旧功能的时候会有完备的过渡方案，并且对于旧技术依然保持极长的支持周期。不过毕竟Windows 8那时候用户啥反应大家也不是不知道。</p>
<p>能理解，并且我有时候也会有同样的抱怨，刚学会一个新软件，结果过半年这个软件就被下一次更新抛弃了。AppImage的制造者可能是希望Linux桌面能学习一下微软的一些策略。</p>
<p>至于为什么反对Flatpak，因为Flatpak是红帽随同Wayland、Gnome一起强推的技术。</p>
<p>X11 为什么强?</p>
<p>远程应用，只把远程系统的一个应用程序在本机打开。X下面非常轻松，这就是X功能的一部分。微软的RDP也有同样的功能。并且渲染工作是在发起远程连接的那一段完成的。Wayland下面，没有，完全依赖窗口管理器自己提供的功能，而目前能做到的极限就是个VNC。</p>
<p>统一的图形库，Xlib，Windows下与之对应的是Win32的UI部分。所有X11的窗口管理器都提供稳定且统一的图形库。在Wayland下面，没有，只能给你push一堆像素点，这就意味着Wayland的应用程序的向下兼容性会比原先X的程序更差。</p>
<p>统一的窗口管理方式，也是X服务器的标准功能之一，在Windows下面我也不知道对标啥，但只要一个桌面环境用了X，那么应用程序就能确保自己使用一个标准的方法就能管理程序窗口，在Windows下也有同样的保障。Wayland下面，没有，完全依赖窗口管理器暴露的API或者无障碍API。</p>
<p>接上述，统一的自动化工具实现方式。Windows下面的AutoHotkey不知道多少人用过，在X11下面对应的软件是xdotool。在Wayland下面，没有。ydotool先不说它已经被半弃坑了，最主要的是ydotool调用uinput，只能输入不能获得窗口状态。</p>
<p>程序的可靠性。在X下面，桌面环境或者渲染器崩溃，应用程序依然健在。并且Windows也是如此的。Wayland下面就不是这么一回事了，至少对于Gnome来讲，shell崩溃就会连着所有程序全部崩溃。KDE的Kwin实现了自己的程序留活机制，但这样便从“所有X11桌面都支持”变成了“只有KDE支持”。</p>
<p>Wayland没有上述所有功能的原因很简单，Wayland不是软件、不是具体实现，它只是个标准，用来显示画面的标准。</p>
<p>是的，没错，这些本来确实应该交给窗口管理器和渲染器完成。但是，Wayland在不支持这些功能的前提下却表示自己是X11的替代品/延续发展，这就非常地有问题，因为Wayland并没有做到功能上的延续。</p>
<p>而且，Linux桌面下面的向下兼容性问题极度严重，我不想在这再重复一遍。桌面在用X11的时候，至少还能确保X的功能是一致的，无论跑在什么桌面组合上都不用担心兼容性问题，Wayland的出现，只会让原本离散的桌面更加离散。</p>
<p>wlroots被称作有希望统一Wayland渲染器的实现方式，可惜在此之前Gnome和KDE已经开始做自己的Wayland实现了，这就意味着从X11转向Wayland，至少分裂成了Gnome、KDE和wlroots，其它桌面会不会突然想不开自己做Wayland实现我们也不知道。而且，三家的分裂，难道还不够折磨吗？</p>
<p>看看Flameshot的Wayland支持，因为发现Gnome和KDE的运行表现不同，于是放弃了Portals API打算等待wlroots的标准，然而wlroots的标准和Gnome的不互通，于是它的支持计划被延期，无ETA。</p>
<p>再看看Barrier的Wayland支持，它fork的项目是symless的synergy，这是个商业开源软件。Ubuntu 17.04的时候曾经短暂切换到Wayland，那时候symless就计划开始适配Wayland，之后Ubuntu换回X11，于是Wayland适配计划就被放弃。当一部分软件只跟着一部分发行版走、而不考虑整个Linux桌面生态的时候，Linux桌面便从事实上消失了。接下来便只剩Ubuntu桌面、openSUSE桌面、Fedora桌面了，至少对于ISV来讲是这样的，因为不然的话指数级别的适配难度会把开发者累死。</p>
<p>我并不是在吹X11诋毁Wayland。只是指出现状。我知道这不是Wayland该做的事情，只是问题是：有谁能来做？</p>
<p>用户关心的是能不能用上对应的功能，Wayland之后功能少了，那用户就会把锅甩给Wayland。</p>
<p>这也是AppImage创造者一直反感Wayland的原因之一。</p>
<h3 id="为什么执行自己的程序要在前面加httpszhuanlanzhihucomp85833766"><a href="https://zhuanlan.zhihu.com/p/85833766">为什么执行自己的程序要在前面加./</a><a hidden class="anchor" aria-hidden="true" href="#为什么执行自己的程序要在前面加httpszhuanlanzhihucomp85833766">#</a></h3>
<p>shell是如何运行程序的：如果不给出相对路径，或者绝对路径，那么它会经历下面的查找过程。</p>
<ul>
<li>alias中查找</li>
<li>内置命令中查找</li>
<li>PATH中查找</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /temp
$ ./ls_bak
</code></pre></div><p>等同于</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ /temp/ls_bak
</code></pre></div><p>shell通常可以执行两种程序，一种是二进制程序，一种是脚本程序。如果是文本程序，且开头没有指定解释程序，则按照shell脚本处理，如果指定了解释程序，则使用解释程序来解释运行；对于二进制程序，则直接创建新的进程即可。</p>
<h3 id="ltshttpsaskubuntucomquestions16366whats-the-difference-between-a-long-term-support-release-and-a-normal-release"><a href="https://askubuntu.com/questions/16366/whats-the-difference-between-a-long-term-support-release-and-a-normal-release">LTS</a><a hidden class="anchor" aria-hidden="true" href="#ltshttpsaskubuntucomquestions16366whats-the-difference-between-a-long-term-support-release-and-a-normal-release">#</a></h3>
<p>There is a new release every 6 months (in April and October), with the version number being <em>year.month</em> (e.g.: 16.04 was released in April 2016). Every two years, the April release is a Long Term Support version.</p>
<p><strong>LTS releases</strong> are the ‘enterprise grade’ releases of Ubuntu and are used the most. An estimated <strong>95%</strong> of all Ubuntu installations are LTS releases.</p>
<p><strong>Interim releases</strong> (normal releases) will introduce new capabilities from Canonical and upstream open source projects, they serve as a proving ground for these new capabilities.</p>
<ul>
<li>All Interim releases (13.04 and later) are only supported for <strong>9 months</strong>.</li>
<li>All LTS releases (12.04 and later) are supported for five years (now is <strong>ten years</strong>) on both the desktop and the server.</li>
</ul>
<p>Now, support means:</p>
<ul>
<li>Updates for potential security problems and bugs (not new versions of software)</li>
<li>Availability of Commercial support contracts from Canonical</li>
<li>Support by Landscape, Canonical&rsquo;s enterprise oriented server management tool set</li>
</ul>
<p>Ubuntu releases additional versions of the last LTS between releases—such as <strong>14.04.1</strong>, that incorporate all of the updates up to this point. This is called a Point-Release (or sometimes <em>snapshot</em>). Those are released every quarter to half year, as needed.</p>
<p>The most important thing (for most people) is how long you get to use an install without having to do a release upgrade. A non-LTS version of Ubuntu only gets updates for 9 months from its release so to stay up-to-date —which is critically important— you need to upgrade twice a year; you need to upgrade through every Ubuntu version…</p>
<p>Conversely an Ubuntu LTS release is supported for 5 years and you can upgrade directly from LTS to LTS. This gives you long-lived, solid base to target and test on that makes it super-easy to release-upgrade when you decide to. It&rsquo;s therefore ideal for mass deployment, high-availability systems, and just people who don&rsquo;t like doing release-upgrades.</p>
<h3 id="设计shell脚本选项-getopthttpswwwcnblogscomf-ck-need-up9758075html"><a href="https://www.cnblogs.com/f-ck-need-u/p/9758075.html">设计shell脚本选项 getopt</a><a hidden class="anchor" aria-hidden="true" href="#设计shell脚本选项-getopthttpswwwcnblogscomf-ck-need-up9758075html">#</a></h3>
<p>写shell脚本的时候，通过while、case、shift来设计脚本的命令行选项是一件比较麻烦的事，因为Unix命令行的选项和参数自由度很高，支持短选项和长选项，参数可能是可选的，选项顺序可能是无所谓的，等等。</p>
<p>bash下的getopt命令可以解析命令行的选项和参数，<strong>将散乱、自由的命令行选项和参数进行改造，得到一个完整的、规范化的参数列表，这样再使用while、case和shift进行处理就简单的太多了</strong>。</p>
<p>getopt有不同的版本，本文介绍的是它的增强版(enhanced)，相比传统的getopt(也称为兼容版本的getopt)，它提供了引号保护的能力。另外，除了不同版本的getopt，bash还有一个内置命令getopts(注意，有个尾随的字符s)，也用来解析命令行选项，但只能解析短选项。</p>
<p>要验证安装的getopt是增强版的还是传统版的，使用<code>getopt -T</code>判断即可。如果它什么都不输出，则是增强版，此时它的退出状态码为4。如果输出&quot;&ndash;&quot;，则是传统版的getopt，此时它的退出状态码为0。如果想在脚本中进行版本检查，可以参考如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ getopt -T &amp;&gt;/dev/null;<span style="color:#f92672">[</span> $? -ne <span style="color:#ae81ff">4</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">{</span> echo <span style="color:#e6db74">&#34;not enhanced version&#34;</span>;exit 1; <span style="color:#f92672">}</span>
</code></pre></div><p>&hellip;</p>
<h3 id="在中文介面下如何只用英文目錄名稱httpsaskfedoraprojectorgttopic11528"><a href="https://ask.fedoraproject.org/t/topic/11528">在中文介面下，如何只用英文目錄名稱？</a><a hidden class="anchor" aria-hidden="true" href="#在中文介面下如何只用英文目錄名稱httpsaskfedoraprojectorgttopic11528">#</a></h3>
<ul>
<li>先切到英文介面再重新開機，此時 Fedora 會問你要不要將子目錄換為英文名稱（選 Yes），再切回中文介面重新開機，Fedora 會再問你一次要不要更改子目錄為中文名稱（選 No），收工！</li>
<li>LANG=C xdg-user-dirs-gtk-update # 同意更新
xdg-user-dirs-gtk-update # 保留且不再問</li>
<li>手動修正配置文件~/.config/user-dirs.dirs ,然後在主目錄下創建對應目錄,重啟即可解決.</li>
</ul>
<h3 id="dd-制作u盘启动盘">dd 制作U盘启动盘<a hidden class="anchor" aria-hidden="true" href="#dd-制作u盘启动盘">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dd bs<span style="color:#f92672">=</span>4M <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>fileName.iso of<span style="color:#f92672">=</span>/dev/sdx status<span style="color:#f92672">=</span>progress <span style="color:#f92672">&amp;&amp;</span> sync
</code></pre></div><p>Windows 下用 Rufus 且 dd 写入模式</p>
<h3 id="为什么-linux-要用-targz很少用-7z-或-ziphttpswwwzhihucomquestion335911358answer755424668"><a href="https://www.zhihu.com/question/335911358/answer/755424668">为什么 Linux 要用 tar.gz，很少用 7Z 或 ZIP？</a><a hidden class="anchor" aria-hidden="true" href="#为什么-linux-要用-targz很少用-7z-或-ziphttpswwwzhihucomquestion335911358answer755424668">#</a></h3>
<p>因为 7z 和 zip 压缩格式都不能保留 unix 风格的文件权限，比如解压出个可执行文件要重新 chmod chown 才能恢复正常。而 tar 格式可以。而 tar 本身不提供压缩，无非就是把包括所有文件的內容和权限拼成一个文件而己，所以用另外如 gzip 格式压缩。为什么是 gzip，因为几乎所有 linux 都支持而已。</p>
<h3 id="置默认编辑器httpswwwcnblogscomwswindp10164052html"><a href="https://www.cnblogs.com/wswind/p/10164052.html">置默认编辑器</a><a hidden class="anchor" aria-hidden="true" href="#置默认编辑器httpswwwcnblogscomwswindp10164052html">#</a></h3>
<p>visudo 等操作会打开默认编辑器，在linux中默认编辑器读取EDITOR环境变量，可通过一下命令设置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export EDITOR<span style="color:#f92672">=</span>nano
</code></pre></div><p>可将其加入~/.bashrc文件，使得每次登录都可使用</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nano ~/.bashrc
export EDITOR<span style="color:#f92672">=</span>nano
$ . ~/.bashrc
</code></pre></div><p>debian系统提供了一个管理工具来设置默认编辑器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo update-alternatives --config editor 
</code></pre></div><p>有两个相似选项</p>
<ul>
<li>/usr/bin/vim.basic</li>
<li>/usr/bin/vim.tiny</li>
</ul>
<p>它们的<a href="https://askubuntu.com/questions/483308/what-are-the-differences-between-vim-basic-and-vim-tiny">区别</a>：</p>
<p><strong>im.basic</strong> is just plain vanilla Vim (as you can check with <code>apt-file vim.basic</code> or <code>dpkg -S /usr/bin/vim.basic</code>).</p>
<p>While <strong>vim.tiny</strong>, as the name implies, is a <em>trimmed-down</em> version of Vim (<a href="https://askubuntu.com/q/104138/153234">this question</a> explains it further).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim.tiny --version
</code></pre></div><h3 id="通过linux系统进入-bios">通过Linux系统进入 BIOS<a hidden class="anchor" aria-hidden="true" href="#通过linux系统进入-bios">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl reboot --firmware-setup
</code></pre></div><h3 id="5-ways-to-check-cpu-info-in-linuxhttpslinuxhandbookcomcheck-cpu-info-linux"><a href="https://linuxhandbook.com/check-cpu-info-linux/">5 Ways to Check CPU Info in Linux</a><a hidden class="anchor" aria-hidden="true" href="#5-ways-to-check-cpu-info-in-linuxhttpslinuxhandbookcomcheck-cpu-info-linux">#</a></h3>
<ul>
<li>lscpu</li>
<li>/proc/cpuinfo</li>
<li>lshw</li>
<li>hwinfo</li>
<li>dmidecodes</li>
<li>hardinfo: gui</li>
</ul>
<h3 id="exfathttpwwwruanyifengcomblog201810exfathtmlhmsrtoutiaoioutm_mediumtoutiaoioutm_sourcetoutiaoio"><a href="http://www.ruanyifeng.com/blog/2018/10/exfat.html?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io">exFAT</a><a hidden class="anchor" aria-hidden="true" href="#exfathttpwwwruanyifengcomblog201810exfathtmlhmsrtoutiaoioutm_mediumtoutiaoioutm_sourcetoutiaoio">#</a></h3>
<p><strong>文件系统</strong></p>
<p>所谓文件系统，就是文件的储存方式。通过文件系统可以准确找到存储在硬盘中的数据。储存设备都需要指定文件系统，计算机才能读写。</p>
<p><strong>Windows 的文件系统</strong></p>
<ul>
<li>
<p>FAT32：是最老的文件系统，所有操作系统都支持，兼容性最好。但是，它是为 32 位计算机设计的，文件不能超过 2<sup>32</sup> - 1 个字节，也就是不能超过 4GB，分区不能超过 8TB。</p>
</li>
<li>
<p>NTFS：是 Windows 的默认文件系统，用来替换 FAT32。Linux 下有如下方法<a href="https://askubuntu.com/questions/934560/format-usb-drive-to-ntfs-so-it-is-usable-under-windows">创建 NTFS 文件系统</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># gparted</span>
$ sudo apt-get install gparted

<span style="color:#75715e"># mkntfs</span>
$ sudo apt-get install ntfs-3g
$ sudo mkntfs --fast --label myUsbDrive /dev/sdb1

<span style="color:#75715e"># mkfs</span>
$ mkfs.ntfs -f -L DiskLabel /dev/sdb1
</code></pre></div></li>
<li>
<p>exFAT：是 FAT32 的 64位升级版，ex 就是 extended 的缩写（表示&quot;扩展的 FAT32&quot;），功能不如 NTFS，但是解决了文件和分区的大小问题，两者最大都可以到 128PB。</p>
</li>
</ul>
<p><strong>Linux 的 exFAT 格式化</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkfs.exfat /dev/sdX1
</code></pre></div><p><strong>分区表</strong></p>
<p>所谓硬盘分区，就是指一块硬盘上面，同时存在多个文件系统。每个文件系统管理的区域，就称为一个分区（partition）。</p>
<p>分区大小、起始位置、结束位置、文件系统等信息，都储存在分区表里面。</p>
<p>分区表也分成两种格式：MBR 和 GPT。前者是传统格式，兼容性好；后者更现代，功能更强大。</p>
<h3 id="logging-in-as-root-in-ubuntu-with-live-cd">Logging in as Root in Ubuntu with Live CD<a hidden class="anchor" aria-hidden="true" href="#logging-in-as-root-in-ubuntu-with-live-cd">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo passwd root
</code></pre></div><h3 id="how-to-download-a-large-file-faster-from-google-drivehttpsyantraascomdownload-large-file-faster-from-google-drive"><a href="https://yantraas.com/download-large-file-faster-from-google-drive/">How To Download A Large File Faster From Google Drive?</a><a hidden class="anchor" aria-hidden="true" href="#how-to-download-a-large-file-faster-from-google-drivehttpsyantraascomdownload-large-file-faster-from-google-drive">#</a></h3>
<p><strong>Step 1: Fetching Your File ID</strong></p>
<ul>
<li>Open your browser and <a href="https://drive.google.com/">go to your google drive</a>, open login with the account that has the file you wish to download.</li>
<li>Locate the file that you wish to download and select it.</li>
<li>Right click the file and click on “get shareable link”</li>
<li>You don’t need to copy the entire link here; you only need the file ID that we will be using later.</li>
</ul>
<p>The link will look like this: <strong><a href="https://drive.google.com/file/d/XXXXX/view?usp=sharing">https://drive.google.com/file/d/XXXXX/view?usp=sharing</a></strong></p>
<p>In this link, you only need to pay attention to the <strong>alphanumeric file ID</strong>, displayed by XXXXX here.</p>
<p><strong>Step 2: Getting an OAuth Code</strong></p>
<ol>
<li>Visit <a href="https://developers.google.com/oauthplayground/">OAuth 2.0 Playground by clicking here</a>.</li>
<li>On the developer’s webpage, in the “<strong>Select &amp; authorize APIs</strong>” click on the “<strong>Drive API v3</strong>” option, and select the: <strong><a href="https://www.googleapis.com/auth/drive.readonly">https://www.googleapis.com/auth/drive.readonly</a></strong> option from the available options.</li>
<li>Once selected click <strong>Authorize APIs</strong> button on the bottom right corner of the tab.</li>
<li>After you click on the Authorize APIs button you will be transferred to the google account login screen.</li>
<li>Select the same google account in which you have your file stored.</li>
<li>Allow Google OAuth 2.0 to access your drive if asked.</li>
<li>When you get redirected back to the OAuth 2.0 playground screen click on the “<strong>Exchange Authorization Code for Tokens</strong>” button as shown.</li>
<li>Copy the newly generated <strong>Access Token</strong> and save it on your notepad. You will be needing this in the next step.</li>
</ol>
<p><strong>Step 3: Downloading The File Using A Command Line Script</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -H <span style="color:#e6db74">&#34;Authorization: Bearer YYYYY&#34;</span> https://www.googleapis.com/drive/v3/files/XXXXX?alt<span style="color:#f92672">=</span>media -o ZZZZZ 
</code></pre></div><p>In your command, replace “XXXXX” with the file ID from above, “YYYYY” with the access token from above, and “ZZZZZ” with the file name that will be saved (for example, “myFile.mp4” if you’re downloading an mp4 file).</p>
<p>Press Enter and let the download begin.</p>
<h3 id="usb插槽鬆動怎麼辦httpswwwyoutubecomwatchvwud4i6gzcpk"><a href="https://www.youtube.com/watch?v=WUd4I6GZcpk">USB插槽鬆動怎麼辦</a><a hidden class="anchor" aria-hidden="true" href="#usb插槽鬆動怎麼辦httpswwwyoutubecomwatchvwud4i6gzcpk">#</a></h3>
<ol>
<li>手机</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031094951544.png" alt="image-20211031094951544"  />
</p>
<ol start="2">
<li>充电宝</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031095019000.png" alt="image-20211031095019000"  />
</p>
<ol start="3">
<li>笔记本</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031095137351.png" alt="image-20211031095137351"  />
</p>
<ol start="4">
<li>笔记本</li>
</ol>
<p><img loading="lazy" src="Distributions/image-20211031095211881.png" alt="image-20211031095211881"  />
</p>
<h3 id="nmcheckgnomeorghttpsaskubuntucomquestions1070823some-suspicious-software-making-request-to-nmcheck-gnome-org"><a href="https://askubuntu.com/questions/1070823/some-suspicious-software-making-request-to-nmcheck-gnome-org">nmcheck.gnome.org</a><a hidden class="anchor" aria-hidden="true" href="#nmcheckgnomeorghttpsaskubuntucomquestions1070823some-suspicious-software-making-request-to-nmcheck-gnome-org">#</a></h3>
<p><a href="http://nmcheck.gnome.org/">nmcheck.gnome.org</a> is not malware. It is the gnome network manager connectivity check (for captive portals/hotspots). Click the link and you will see a single text file with a text in it. It should be &ldquo;NetworkManager is online&rdquo;.</p>
<p>Check <code>/etc/NetworkManager/NetworkManager.conf</code>. There probably is a section with this in it:</p>
<pre tabindex="0"><code>[Connectivity] 
uri=http://nmcheck.gnome.org/check_network_status.txt
</code></pre><p>on Ubuntu 20.04 no <code>[Connectivity] </code> line like accepted answer in <code>/etc/NetworkManager/NetworkManager.conf</code>.</p>
<p>But you can disable the auto connectivity check by:</p>
<ol>
<li>Go to <code>Settings</code> app</li>
<li>Go to <code>Privacy</code> menu</li>
<li>On <code>Connectivity</code> tab, uncheck <code>Connectivity Checking</code></li>
</ol>
<h3 id="xdg_templates_dirhttpsaskubuntucomquestions94734what-is-the-templates-folder-in-the-home-directory-for"><a href="https://askubuntu.com/questions/94734/what-is-the-templates-folder-in-the-home-directory-for">XDG_TEMPLATES_DIR</a><a hidden class="anchor" aria-hidden="true" href="#xdg_templates_dirhttpsaskubuntucomquestions94734what-is-the-templates-folder-in-the-home-directory-for">#</a></h3>
<p>If you drop any files in &ldquo;Templates&rdquo; folder. Then when you right-click and create a new document, you can select any of these files as a basis for the new file.</p>
<p>If you have deleted the folder and need to restore this functionality:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gedit ~/.config/user-dirs.dirs
</code></pre></div><p>Check that there is a line containing the following - if not, add this line.</p>
<pre tabindex="0"><code>XDG_TEMPLATES_DIR=&quot;$HOME/Templates&quot;
</code></pre><h3 id="软件的稳定性httpswwwzhihucomquestion301581684answer547761587"><a href="https://www.zhihu.com/question/301581684/answer/547761587">软件的稳定性</a><a hidden class="anchor" aria-hidden="true" href="#软件的稳定性httpswwwzhihucomquestion301581684answer547761587">#</a></h3>
<p>软件的稳定性其实往往来源于：足够多的使用者与足够多的反馈跟改进。</p>
<p>Linux系统，在服务器端的大多数常用软件都有足够多的使用者，所以就足够稳定，由于它在服务器端市场占有率远高于微软，所以服务器端就是比微软稳定，很正常的事。</p>
<p>在桌面端，市场占用率远低于微软，不稳定也是自然的。</p>
<p>为什么Linux下命令行程序往往又好用又稳定？是因为用户喜欢装逼吗？不是，因为命令行程序是服务器端跟桌面端通用的，而服务器端程序经过了足够多用户的使用，经过了足够的反馈开发迭代，所以稳定。而图形界面只有桌面用户用，桌面占有率那么低，这些程序往往缺乏足够的测试人力也缺乏足够的开发维护人力，所以并不会非常稳定。</p>
<p>那么，你要想体验Linux稳定，怎么办？答案就是只使用市场占有率高，用户量大，因而获得了充分测试的软件，这就稳定了。比方说只使用服务器端。或者桌面端只使用最常用的那些，例如终端仿真器，浏览器，输入法，gcc编译器之类，肯定是稳定的。</p>
<p>你看我就用浏览器，输入法，xterm，screen，编程ide，vim，以及一堆命令行的东西，稳定得很啊，六个月才重启一次电脑，重启的那一次还是因为ubuntu升级。</p>
<h3 id="如何将google搜索限制为特定语言的结果httpsqastackcnwebapps16047how-to-restrict-a-google-search-to-results-of-a-specific-language"><a href="https://qastack.cn/webapps/16047/how-to-restrict-a-google-search-to-results-of-a-specific-language">如何将Google搜索限制为特定语言的结果</a><a hidden class="anchor" aria-hidden="true" href="#如何将google搜索限制为特定语言的结果httpsqastackcnwebapps16047how-to-restrict-a-google-search-to-results-of-a-specific-language">#</a></h3>
<p>只是想在Google搜索中添加有关语言参数的更全面的答案。</p>
<p>有4种与语言相关的选项。</p>
<p><strong>Web界面语言： <code>hl=</code></strong></p>
<p>例： <code>www.google.com/search?q=vilnius&amp;hl=lt</code></p>
<pre tabindex="0"><code>Web Interface Language Codes

hl=zh-CN       Chinese (Simplified)
hl=zh-TW       Chinese (Traditional)
hl=en          English
hl=ja          Japanese
</code></pre><p><strong>指定语言的页面： <code>lr=lang_</code></strong></p>
<p>例： <code>www.google.com/search?q=vilnius&amp;lr=lang_lt</code></p>
<pre tabindex="0"><code>Search Language Codes

lr=lang_zh-CN Chinese (Simplified)
lr=lang_zh-TW Chinese (Traditional)
lr=lang_en    English
lr=lang_ja    Japanese
</code></pre><p><strong>来自指定国家/地区的页面： <code>cr=country</code></strong></p>
<p>示例：<code>www.google.com/search?q=vilnius&amp;cr=countryLT</code>
<strong>请注意</strong>，两个国家/地区代码字符必须大写！否则，Google会忽略该参数（自2017年1月3日起）（即使小写字母对于<code>hl=</code>和都适用<code>lr=lang_</code>）。</p>
<p>还有另一个参数&ndash; <code>gl=</code>用于搜索结果，因为它们将显示在指定的国家/地区。我尝试对其进行测试，但对我而言，不同参数值的结果没有不同。浏览器或我的Google帐户的某些其他参数/设置可能已过时或覆盖了该设置。</p>
<h3 id="two-options-to-recover-your-pc-with-androidhttpswwwmakeuseofcomtagrecover-pc-using-android"><a href="https://www.makeuseof.com/tag/recover-pc-using-android/">Two Options to Recover Your PC With Android</a><a hidden class="anchor" aria-hidden="true" href="#two-options-to-recover-your-pc-with-androidhttpswwwmakeuseofcomtagrecover-pc-using-android">#</a></h3>
<p>If your PC is out of action, you can install a new operating system or run a recovery environment thanks to Android. Two solid options are available:</p>
<ul>
<li><a href="https://play.google.com/store/apps/details?id=com.mixapplications.iso2usb&amp;hl=zh&amp;gl=US">ISO 2 USB</a>: Lets you burn an ISO file directly to a USB flash drive over USB-OTG.</li>
<li><a href="https://play.google.com/store/apps/details?id=com.softwarebakery.drivedroid&amp;hl=zh&amp;gl=US">DriveDroid</a>: Enables you to store bootable ISO files on Android. With the paid version, support for Windows 10 installation images is added.</li>
</ul>
<h3 id="good-practice-to-avoid-using-sudo-suhttpsaskubuntucomquestions962021is-it-considered-good-practice-to-avoid-using-sudo-su"><a href="https://askubuntu.com/questions/962021/is-it-considered-good-practice-to-avoid-using-sudo-su">good practice to avoid using <code>sudo su</code></a><a hidden class="anchor" aria-hidden="true" href="#good-practice-to-avoid-using-sudo-suhttpsaskubuntucomquestions962021is-it-considered-good-practice-to-avoid-using-sudo-su">#</a></h3>
<p><strong>It is <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege">good practice</a> to avoid performing more actions as root than you need to.</strong> <code>sudo</code> facilitates this by allowing you to run individual commands as root <a href="https://askubuntu.com/a/617767/22949">without having to log in as root</a> and without <em>needing</em> an interactive root shell for tasks you would otherwise not run a shell to do. But <code>sudo su</code> is not a &ldquo;<a href="https://en.wikipedia.org/wiki/Backdoor_(computing)">backdoor</a>,&rdquo; it is simply a somewhat less elegant way to do what <code>sudo</code> is designed to allow you to do with <code>sudo -s</code>. <a href="https://www.sudo.ws/pipermail/sudo-users/2012-April/004960.html">Similarly</a>, <code>sudo -i</code> is the more elegant way to achieve what <code>sudo su -</code> would get you: a simulated <em>initial login shell</em> whose environment is like what you would get if you could log in as root on the command line. See <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html"><code>man sudo</code></a>.</p>
<h3 id="sshfs-how-to-mount-remote-file-systems-over-sshhttpsphoenixnapcomkbsshfs"><a href="https://phoenixnap.com/kb/sshfs">SSHFS: How to Mount Remote File Systems Over SSH</a><a hidden class="anchor" aria-hidden="true" href="#sshfs-how-to-mount-remote-file-systems-over-sshhttpsphoenixnapcomkbsshfs">#</a></h3>
<p><strong>SSHFS</strong> (SSH File System) is a client for mounting a file system located on a remote machine onto your local system through an <a href="https://phoenixnap.com/kb/how-does-ssh-work">SSH connection</a>. Using the SFTP (SSH file transfer protocol), the SSHFS command-line tool mounts a physical or virtual disk locally, allowing file transfer between a local and remote machine.</p>
<p><strong>This article demonstrates the installation and usage of SSHFS to mount a remote folder or file system over SSH.</strong></p>
<h4 id="install-sshfs">Install SSHFS<a hidden class="anchor" aria-hidden="true" href="#install-sshfs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install sshfs
</code></pre></div><h4 id="mount-a-remote-file-system-on-linux">Mount a Remote File System on Linux<a hidden class="anchor" aria-hidden="true" href="#mount-a-remote-file-system-on-linux">#</a></h4>
<p><strong>Step 1: Create Mount Point</strong></p>
<p>Create a mount point directory in the <em>mnt</em> folder where the remote file system will be mounted:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkdir /mnt/&lt;folder name&gt;
</code></pre></div><p><strong>Step 2: Mount the Remote File System Using SSHFS</strong></p>
<p>Mount the remote file system to the created mount point using the SSHFS tool:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo sshfs <span style="color:#f92672">[</span>-o &lt;options&gt;<span style="color:#f92672">]</span> &lt;remote user&gt;@&lt;remote host&gt;:/&lt;path to remote directory&gt; /mnt/&lt;folder name&gt;/
</code></pre></div><p>Enter the login password when requested if using password authentication. If the remote server uses SSH key authorization, provide the path of the private key. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo sshfs -o allow_other,IdentityFile<span style="color:#f92672">=</span>/home/kb/.ssh/id_rsa ubuntu@131.153.142.254:/home/ubuntu/ /mnt/test/
</code></pre></div><p>The <strong><code>allow_other</code></strong> option allows access to users other than root.</p>
<p><strong>Step 3: Unmount a Remote File System on Linux</strong></p>
<p>Lastly, when finished with the mount point, unmount the remote file system with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo umount /mnt/&lt;folder name&gt;
</code></pre></div><h3 id="img转化成isohttpsos51ctocomarticle290012html"><a href="https://os.51cto.com/article/290012.html">img转化成iso</a><a hidden class="anchor" aria-hidden="true" href="#img转化成isohttpsos51ctocomarticle290012html">#</a></h3>
<p><a href="https://zh.wikipedia.org/wiki/IMG%E6%A0%BC%E5%BC%8F">IMG</a>是一种文件归档格式（archive format），主要是为了创建磁盘的映像文件（disk image），它可以用来封装存储整个磁盘（通常指软磁盘，Floppy Disk或Diskette）或整片光盘的内容，使用&quot;.IMG&quot;这个扩展名的文件就是利用这种文件格式来创建的。</p>
<p>.IMG这个文件格式可视为.ISO格式的一种超集合。由于.ISO只能封存使用ISO9660和UDF这两种文件系统的存储介质，意即.ISO只能拿来封存CD或DVD，因此才发展出了.IMG，它是以.ISO格式为基础另外新增可封存使用其它文件系统的存储介质的能力，.IMG可向后兼容于.ISO，如果是拿来封存CD或DVD，则使用.IMG和.ISO这两种格式所产生出来的内容是一样的。</p>
<p>将img 转化成iso的有 nrg2iso 或 ccd2iso，分别下载如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install nrg2iso
$ sudo apt-get install ccd2iso
</code></pre></div><p>使用如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nrg2iso image.nrg image.iso  
$ ccd2iso &lt;.img filename&gt; &lt;.iso filename&gt; 
</code></pre></div><h3 id="hwehttpswikiubuntucomkernelltsenablementstack"><a href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack">HWE</a><a hidden class="anchor" aria-hidden="true" href="#hwehttpswikiubuntucomkernelltsenablementstack">#</a></h3>
<p>The Ubuntu LTS enablement (also called HWE or Hardware Enablement) stacks provide newer kernel and X support for existing Ubuntu LTS releases.</p>
<p>The 20.04 LTS HWE Stacks continue to follow <a href="https://ubuntu.com/about/release-cycle#ubuntu-kernel-release-cycle">Rolling Update Model</a>, as has been in use since 16.04 LTS.</p>
<h3 id="microcodehttpsdecodezpgithubio20200712quickwords44-microcode"><a href="https://decodezp.github.io/2020/07/12/quickwords44-microcode/">Microcode</a><a hidden class="anchor" aria-hidden="true" href="#microcodehttpsdecodezpgithubio20200712quickwords44-microcode">#</a></h3>
<p><img loading="lazy" src="/Distributions/processor.png" alt=""  />
</p>
<p>每当听到有人说“这个问题更新一下微码就好了”，就觉得这个哥哥怎么这么迷人，好像在哪里见过。为了也让自己变成这种迷人的哥哥，我也研究了一下到底什么是微码。</p>
<p>这里说的是跑在CPU处理器上的微码，不是IBM那群人嘴里说的那个微码。如果你之前没和IBM打过交道那就当这段话不存在。</p>
<p>计算机体系结构是一层又一层的抽象，典型的比如操作系统对底层硬件的抽象。但鲜有人知的是，操作系统和底层硬件，尤其是CPU之间还存在着几层抽象。什么叫抽象，当然有很多种学术流的解释，但我土气一点的解释就是“不关心”，就是“Don’t care”，就是爱咋地咋地。</p>
<p>用这个模式套用一下我们熟悉的抽象：操作系统要将数据写入磁盘，它不关心怎么操作磁盘；应用要给某个服务器发个数据包，它也不关心怎么操作网卡。</p>
<p>回到我们的微码上来。我们现在常见的操作系统都是用C语言编写，它相对于汇编语言来说，也算是一种“高级语言”。编译器会将这种高级语言编译成汇编语言。只要C语言编写时“不关心”汇编指令是啥，那么就是相对汇编语言做了一次抽象。</p>
<p>马上就到微码了。我们知道汇编指令是执行在CPU上的，那么汇编指令会关心在某个具体型号的CPU上是怎么执行的吗？肯定不会的。汇编的一条ADD指令在80286上可以执行，在最新的Icelake上也能执行，但这两个CPU内部早已发生了天翻地覆的变化，执行ADD的操作已经完全不同了。</p>
<p>换句话说，就是汇编指令并“不关心”是如何在CPU上执行的。</p>
<p>操作系统不关心如何操作磁盘和网卡，是因为这些都有对应的设备驱动操心。汇编指令不关心具体如何在CPU中执行，这个就是由微码来操心了。所以用类比的方式，可以把微码类比成汇编指令针对某一型号CPU的驱动。</p>
<p>同样的汇编指令，会由该型号CPU的微码转成可以跑在该CPU上的微操作（Micro-ops/uops）。这些微操作指导CPU的电路完成汇编指令要求的意图。</p>
<p>在大家还在编写汇编语言代码的时代，微码为汇编语言的编写提供了方便：</p>
<ul>
<li>只关心汇编逻辑，而不用关心CPU内部电路设计和具体的执行方式</li>
<li>方便设计出新的汇编指令，由微码翻译成具体的执行逻辑，比如循环中“变量自减若大于零则转跳”，可以用一条汇编指令代替，脏活累活都交给微码去干</li>
<li>修复或绕过一些很难修复的处理器数字电路中的Bug</li>
</ul>
<p>上述第二点也为CISC指令集的实现提供了技术基础。因为不可能所有复杂的指令都是由专门的执行复杂指令的硬件来完成的，也是由简单的数字逻辑模块组合而成的。</p>
<p>在现代CPU里，是存在专门的将汇编指令翻译成微操作的硬件解码器的。但微码依旧存在（就是CPU微架构图中前端那个Microcode sequencer），它作为一个Lookup Table保存在一块ROM中，用来解码复杂的指令，比如浮点运算的指令等。一般是硬件解码器解码得比较快，而用微码解码会比较慢。</p>
<p>理论上，如果你能更改某一个处理器的微码，那么经它翻译的指令可以变成任意其他的指令。因为它关心指令如何在CPU电路中执行。所以现在升级微码主要是用来解决处理器的稳定和安全性的问题。</p>
<p>当然你也可以用它模拟自己没有的汇编指令，比如AVX系列，我只要在看到AVX512的汇编之后，把它翻译成两个“SIMD256”或者四个“SIMD128”指令就好了。</p>
<p>看到这里，你给自己就又加了一层微码的buff。最后贴心地推荐一篇详细说明Microcode怎么执行的文章：<a href="https://www.informatimago.com/articles/microcode/microcode.html">Microprocessor Microcode Simple Example</a></p>
<h4 id="安装更新微码httpslinuxcnarticle-9411-1html"><a href="https://linux.cn/article-9411-1.html">安装/更新微码</a><a hidden class="anchor" aria-hidden="true" href="#安装更新微码httpslinuxcnarticle-9411-1html">#</a></h4>
<p>微码就是由 Intel/AMD 提供的 CPU 固件。Linux  的内核可以在引导时更新 CPU 固件，而无需 BIOS 更新。处理器的微码保存在内存中，在每次启动系统时，内核可以更新这个微码。这些来自  Intel/AMD 的微码的更新可以去修复 bug 或者使用补丁来防范 bug。</p>
<p>查看当前的微码状态：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dmesg | grep microcode
</code></pre></div><p><strong>使用包管理器</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install intel-microcode
</code></pre></div><p>必须重启以激活微码更新：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo reboot
</code></pre></div><p><strong>手动</strong></p>
<p>只有在你的 CPU 制造商建议这么做的时候，才可以使用下列的方法去更新/安装微码，除此之外，都应该使用上面的方法去更新。大多数 Linux 发行版都可以通过包管理器来维护、更新微码。使用包管理器的方法是经过测试的，对大多数用户来说是最安全的方式。</p>
<h3 id="automatic-light--dark-modehttpsaskubuntucomquestions1234742automatic-light-dark-mode"><a href="https://askubuntu.com/questions/1234742/automatic-light-dark-mode">Automatic Light / Dark Mode</a><a hidden class="anchor" aria-hidden="true" href="#automatic-light--dark-modehttpsaskubuntucomquestions1234742automatic-light-dark-mode">#</a></h3>
<p>for GNOME, this shell extension exists: <a href="https://extensions.gnome.org/extension/2236/night-theme-switcher/">Night Theme Switcher</a></p>
<h3 id="将du的输出按文件大小排序httpsbloglilydjwgmeposts18368html"><a href="https://blog.lilydjwg.me/posts/18368.html">将du的输出按文件大小排序</a><a hidden class="anchor" aria-hidden="true" href="#将du的输出按文件大小排序httpsbloglilydjwgmeposts18368html">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sdu <span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  du -sk $@ | sort -n | awk <span style="color:#e6db74">&#39;
</span><span style="color:#e6db74">BEGIN {
</span><span style="color:#e6db74">  split(&#34;K,M,G,T&#34;, Units, &#34;,&#34;);
</span><span style="color:#e6db74">  FS=&#34;\t&#34;;
</span><span style="color:#e6db74">  OFS=&#34;\t&#34;;
</span><span style="color:#e6db74">}
</span><span style="color:#e6db74">{
</span><span style="color:#e6db74">  u = 1;
</span><span style="color:#e6db74">  while ($1 &gt;= 1024) {
</span><span style="color:#e6db74">    $1 = $1 / 1024;
</span><span style="color:#e6db74">    u += 1
</span><span style="color:#e6db74">  }
</span><span style="color:#e6db74">  $1 = sprintf(&#34;%.1f%s&#34;, $1, Units[u]);
</span><span style="color:#e6db74">  sub(/\.0/, &#34;&#34;, $1);
</span><span style="color:#e6db74">  print $0;
</span><span style="color:#e6db74">}&#39;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="改善触摸板体验httpsplumzmearchives12343"><a href="https://plumz.me/archives/12343/">改善触摸板体验</a><a hidden class="anchor" aria-hidden="true" href="#改善触摸板体验httpsplumzmearchives12343">#</a></h3>
<p>众所周知，Macbook 的触摸板是体验最好的，很多果粉都吹 Macbook 的触摸板用了之后“就不再想要去用鼠标”。</p>
<p>有一群人搞了一个项目：「Linux Touchpad like Macbook Update」。顾名思义，就是“把 Linux 的触摸板搞的像 Macbook 一样”。</p>
<p>这个项目的主要作用就是针对现在 Linux 下对于触摸板管理的相关驱动进行一些修改和优化，以提升触摸的使用体验，尤其是包括“多点触摸”等等等。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:p12/xorg-gestures
$ sudo apt-get update
</code></pre></div><p>当然，尽管如此，我们也只是在驱动层面改善了触摸，在应用层面还需要另一个工具的帮忙：<a href="https://github.com/JoseExposito/touchegg">touchegg</a></p>
<p>安装完毕之后你的三指上滑和三指下滑都可以正常使用了，譬如三指上滑是窗口最大化，三指下滑是窗口最小化。</p>
<h3 id="reset-lost-root-passwordhttpswikiarchlinuxorgtitlereset_lost_root_password_e7ae80e4bd93e4b8ade69687"><a href="https://wiki.archlinux.org/title/Reset_lost_root_password_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Reset lost root password</a><a hidden class="anchor" aria-hidden="true" href="#reset-lost-root-passwordhttpswikiarchlinuxorgtitlereset_lost_root_password_e7ae80e4bd93e4b8ade69687">#</a></h3>
<p><strong>警告：</strong> 攻击者都可以使用上述方法修改系统，要保证系统安全，请限制物理上的访问，或者使用全<a href="https://wiki.archlinux.org/title/Data-at-rest_encryption">磁盘加密</a>。</p>
<h4 id="使用-livecd">使用 LiveCD<a hidden class="anchor" aria-hidden="true" href="#使用-livecd">#</a></h4>
<p>通过 LiveCD 可以使用好几种方法：chroot并且使用<code>passwd</code>命令或者擦除密码域条目。任何Linux的LiveCD都可以使用，chroot时它必须匹配已经安装的架构类型。这里仅介绍 chroot 方式，因为这个方法更不容易出错。</p>
<ol>
<li>
<p>启动LiveCD，挂载根文件系统.</p>
</li>
<li>
<p>然后通过下列命令重置密码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ passwd --root MOUNT_POINT USER_NAME
</code></pre></div></li>
<li>
<p>卸载根文件系统。</p>
</li>
<li>
<p>重启，记下你的密码。</p>
</li>
</ol>
<h4 id="用-bash-作为-init">用 Bash 作为 Init<a hidden class="anchor" aria-hidden="true" href="#用-bash-作为-init">#</a></h4>
<ol>
<li>
<p>将 <code>init=/bin/bash</code> <a href="https://wiki.archlinux.org/title/Kernel_parameter">内核参数</a>加入启动加载器的启动项.</p>
</li>
<li>
<p>启动后可以看到 Bash 提示符。</p>
</li>
<li>
<p>根文件系统应该是只读挂载，需要以可读写模式重新挂载：</p>
<pre tabindex="0"><code>mount -n -o remount,rw /
</code></pre></li>
<li>
<p>用 passwd 创建新的管理员密码。</p>
</li>
<li>
<p>通过 <code>reboot -f</code> 重启，不要再次忘记你的密码。</p>
</li>
</ol>
<p><strong>注意：</strong> 使用此法时有的键盘不能被初始系统正确加载，你可能不能在bash提示符后输入任何东西。如果出现这种情况，你不得不使用其他方法。</p>
<h3 id="how-to-block-internet-access-to-certain-programs-on-linuxhttpsserverfaultcomquestions550276how-to-block-internet-access-to-certain-programs-on-linux"><a href="https://serverfault.com/questions/550276/how-to-block-internet-access-to-certain-programs-on-linux">How to block internet access to certain programs on Linux</a><a hidden class="anchor" aria-hidden="true" href="#how-to-block-internet-access-to-certain-programs-on-linuxhttpsserverfaultcomquestions550276how-to-block-internet-access-to-certain-programs-on-linux">#</a></h3>
<p>The solution for me happened to be straight forward.</p>
<ol>
<li>
<p>Create, validate new group; add required users to this group:</p>
<ul>
<li>
<p>Create: <code>groupadd no-internet</code></p>
</li>
<li>
<p>Validate: <code>grep no-internet /etc/group</code></p>
</li>
<li>
<p>Add user: <code>useradd -g no-internet username</code></p>
<p><em>Note: If you&rsquo;re modifying already existing user you should run: <code>usermod -a -G no-internet userName</code> check with : <code>sudo groups userName</code></em></p>
</li>
</ul>
</li>
<li>
<p>Create a <em>script</em> in your path and make it executable:</p>
<ul>
<li>
<p>Create: <code>nano /home/username/.local/bin/no-internet</code></p>
</li>
<li>
<p>Executable: <code>chmod 755 /home/username/.local/bin/no-internet</code></p>
</li>
<li>
<p>Content:</p>
<pre tabindex="0"><code>#!/bin/bash
sg no-internet &quot;$@&quot;
</code></pre></li>
</ul>
</li>
<li>
<p>Add <em>iptables rule</em> for dropping network activity for group <em>no-internet</em>:</p>
<ul>
<li>
<p><code>iptables -I OUTPUT 1 -m owner --gid-owner no-internet -j DROP</code></p>
<p><em>Note: Don&rsquo;t forget to make the changes permanent, so it would be <a href="https://unix.stackexchange.com/questions/38019/execute-a-script-as-root-at-boot-on-fedora-15-16">applied automatically after reboot</a>. Doing it, depends on your Linux distribution.</em></p>
</li>
</ul>
</li>
<li>
<p>Check it, for example on Firefox by running: <code>no-internet &quot;firefox&quot;</code></p>
</li>
</ol>
<p>In case you would want to make an exception and allow a program to access <em>local network</em>:</p>
<ul>
<li><code>iptables -A OUTPUT -m owner --gid-owner no-internet -d 192.168.1.0/24 -j ACCEPT</code></li>
<li><code>iptables -A OUTPUT -m owner --gid-owner no-internet -d 127.0.0.0/8 -j ACCEPT</code></li>
<li><code>iptables -A OUTPUT -m owner --gid-owner no-internet -j DROP</code></li>
</ul>
<p><em>NOTE:</em> In case of spawning the rules will be maintained. For example, if you run a program with <em>no-internet</em> rule and that program will open browser window, still the rules will be applied.</p>
<h3 id="how-does-ubuntu-make-moneyhttpsaskubuntucomquestions21730how-does-ubuntu-make-money"><a href="https://askubuntu.com/questions/21730/how-does-ubuntu-make-money">How does Ubuntu make money?</a><a hidden class="anchor" aria-hidden="true" href="#how-does-ubuntu-make-moneyhttpsaskubuntucomquestions21730how-does-ubuntu-make-money">#</a></h3>
<p>Firstly a lot of people work on Ubuntu in their free time (many of them programming, but also those of here for instance answering people&rsquo;s questions). Also some people <a href="http://www.ubuntu.com/community/get-involved/donate">donate to Ubuntu</a>.</p>
<p>However there is more to the story. <a href="http://en.wikipedia.org/wiki/Canonical_Ltd">Canonical Ltd</a>. is a private company that created and continues to pay for Ubuntu. We know Canonical hadn&rsquo;t been making a profit, but Canonical was initially founded by multi-millionaire <a href="http://en.wikipedia.org/wiki/Mark_Shuttleworth">Mark Shuttleworth</a> which meant it didn&rsquo;t have to focus on making money right away.</p>
<p>However Canonical is now looking towards to making Ubuntu profitable. (After all, they have 600+ employees to pay every month!) There are <a href="http://www.nytimes.com/2009/01/11/business/11ubuntu.html?pagewanted=3&amp;_r=2">some indications</a> this has been successful. Their key revenue streams offer services around Ubuntu:</p>
<ul>
<li>Support services (mostly to business) alongside which they sell <a href="https://landscape.canonical.com/">Landscape</a></li>
<li>Contracting services to businesses (for instance working with OEMs such as Dell, or <a href="http://blog.canonical.com/?p=294">helping Google with Chrome OS</a>). As Ubuntu makes its way onto mobile phones and TVs then this will grow.</li>
<li>Ubuntu Software Centre&rsquo;s paid section (Canonical takes a cut of purchases)</li>
<li>The <a href="http://shop.canonical.com/">Canonical Store</a> (selling physical Ubuntu branded items) - discontinued</li>
<li>Closed-source projects wishing to use Launchpad.net <a href="https://answers.edge.launchpad.net/launchpad/+faq/208">can purchase a license</a></li>
<li><a href="https://one.ubuntu.com/">Ubuntu One</a> (online file storage and synchronization service) and Music Store (selling music from within Ubuntu) - discontinued.</li>
<li>Amazon referrals. When you search the Ubuntu Dash, you may see Amazon products (unless you have turned it off). Ubuntu takes a cut of these.[<a href="https://arstechnica.com/information-technology/2012/09/ubuntu-bakes-amazon-search-results-into-os-to-raise-cash/">ref]</a></li>
</ul>
<p>All of these are areas that Canonical hopes will grow.</p>
<h3 id="启用-trimhttpslinuxcnarticle-8177-1html"><a href="https://linux.cn/article-8177-1.html">启用 TRIM</a><a hidden class="anchor" aria-hidden="true" href="#启用-trimhttpslinuxcnarticle-8177-1html">#</a></h3>
<p>当我在运行 Linux 的计算机上安装我的第一块固态驱动器（SSD）后，我开始探索如何用好它们。SSD 在操作方式上与传统磁性驱动器不同，并且它们需要在软件上另行处理以达到功能优化。</p>
<p>在传统磁盘驱动器上，删除时所删除的文件不会从磁盘中完全删除。这就是为什么你可以恢复已删除的文件的原因。基本上，文件系统仅引用磁盘上文件的位置，并且当文件被删除时，该引用被擦除，以允许你在这些空间中写入新数据覆盖原来的数据。然而，对于 SSD，新数据只能写在驱动器上完全新的或已擦除的单元上。因为必须在写入之前清除空间，如果在写入文件时尚未有足够的可用空间，则必须首先擦除该空间。这可能会对性能产生负面影响。</p>
<p>如果操作系统在写入新数据之前就擦除了未使用的空间，而不是在写入时同时进行擦除，则可以提高文件保存性能。这种做法就是 <a href="https://en.wikipedia.org/wiki/Trim_(computing)">TRIM</a>。 TRIM 命令本质上允许你的操作系统告诉驱动器哪些区域的数据不再使用，以便擦除它们，加快驱动器将来的写入，可以 SSD 的用户提供更佳的体验。</p>
<p>在 Linux 中，<code>fstrim</code> 提供此功能，它可以为写入新数据而准备驱动器，并延长驱动器的使用寿命。由于在我使用的 Linux 发行版上 SSD 的 trim 不是自动的，所以必须去调度该操作，否则 SSD 的性能会随着时间的推移而降低。</p>
<p>为了在驱动器上运行 <code>fstrim</code>，驱动器本身以及其上的文件系统必须支持 TRIM。TRIM SSD 可以在命令行或 cron 任务中手动完成。作为超级用户（使用 <code>su</code> 或 <code>sudo</code>），运行 <code>fstrim / -v</code> 以完成手动 trim，或者设置 cron 任务以在计算机未使用时定期为你运行此命令。对于 <code>fstrim</code> 的完整选项列表请参考它的 <a href="http://man7.org/linux/man-pages/man8/fstrim.8.html">man 手册</a>。</p>
<p>注：可以定期执行fstrim命令，但是不建议在mount / fstab 中使用discard 选项。因为这个选项要求SSD每次删除文件都进行trim操作，比较耗资源，尤其是在文件操作很频繁的时候。所以可以考虑用cron来定期trim。</p>
<p>硬件支持根据使用的驱动器接口类型如 PCI、<a href="https://en.wikipedia.org/wiki/Trim_(computing)#ATA">ATA</a>、<a href="https://en.wikipedia.org/wiki/Trim_(computing)#SCSI">SCSI</a> 还是 <a href="https://en.wikipedia.org/wiki/Trim_(computing)#SD.2FMMC">SD/MMC</a> 而有所不同。你需要咨询你的 Linux 供应商以了解你的特定发行版是如何支持 TRIM 的。</p>
<p>例如，红帽提供以下 <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Storage_Administration_Guide/ch-ssd.html">SSD 磁盘指南</a>。“性能随着所使用的块数接近磁盘容量而降低，性能影响程度因供应商而异，但是所有设备都会遇到一些性能降低。为了解决性能降低问题，主机系统（例如 Linux 内核）使用丢弃请求以通知存储器给定范围的块不再使用。”</p>
<p><a href="https://wiki.debian.org/SSDOptimization">Debian wiki</a> 提供了 SSD 使用的一些基本注意事项：使用 Linux 3.2 或更高版本内核，使用 SSD 的最新固件，使用 EXT4 文件系统，并且“在正常工作负载下有足够的 DRAM 用来操作而不用使用交换空间“。</p>
<h3 id="reserve-5-of-the-spacehttpsaskubuntucomquestions249387df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home"><a href="https://askubuntu.com/questions/249387/df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home">reserve 5% of the space</a><a hidden class="anchor" aria-hidden="true" href="#reserve-5-of-the-spacehttpsaskubuntucomquestions249387df-h-used-space-avail-free-space-is-less-than-the-total-size-of-home">#</a></h3>
<p>By default, <code>ext2/3/4</code> filesystems reserve 5% of the space to be useable only by <code>root</code>. This is to avoid a normal user completely filling the disk which would then cause system components to fail whenever they next needed to write to the disk.</p>
<p>You can see the number of reserved blocks (and lots of other information about the filesystem) by doing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo tune2fs -l /dev/sda8
</code></pre></div><p>For a <code>/home</code> partition, it is probably safe to set the reserved fraction to zero:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo tune2fs -m <span style="color:#ae81ff">0</span> /dev/sda8
</code></pre></div><p>Which should make an additional ~5GB available.</p>
<h3 id="change-partition-labelhttpswwwtecmintcomchange-modify-linux-disk-partition-label-names"><a href="https://www.tecmint.com/change-modify-linux-disk-partition-label-names/">Change Partition Label</a><a hidden class="anchor" aria-hidden="true" href="#change-partition-labelhttpswwwtecmintcomchange-modify-linux-disk-partition-label-names">#</a></h3>
<h4 id="e2label-or-tune2fs">e2label or tune2fs<a hidden class="anchor" aria-hidden="true" href="#e2label-or-tune2fs">#</a></h4>
<p>The commands <strong>e2label</strong> or <strong>tune2fs</strong> used for changing label of ext2, ext3 and ext4 type partitions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># e2label /dev/sda1 ROOT</span>
OR
<span style="color:#75715e"># tune2fs –L ROOT_PART /dev/sda1</span>
</code></pre></div><p>Here, <code>ROOT</code> and <code>ROOT_PART</code> are the labels to be added to <code>/dev/sda1</code> which is ext4 formatted partition.</p>
<h4 id="ntfslabel">ntfslabel<a hidden class="anchor" aria-hidden="true" href="#ntfslabel">#</a></h4>
<p>The <strong>ntfslabel</strong> command used for changing label of NTFS partitions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ntfslabel /dev/sda5 NTFS_DIR</span>
</code></pre></div><h4 id="mkswap">mkswap<a hidden class="anchor" aria-hidden="true" href="#mkswap">#</a></h4>
<p>The <strong>mkswap</strong> command used for changing label of SWAP partition.</p>
<p>After unmounting the filesystem, following command needs to be executed to change the label of swap partition.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># mkswap -L SWAP_PART /dev/sda5</span>
</code></pre></div><p>Where, <code>/dev/sda5</code> is the SWAP formatted partition.</p>
<h4 id="exfatlabel">exfatlabel<a hidden class="anchor" aria-hidden="true" href="#exfatlabel">#</a></h4>
<p>The <strong>exfatlabel</strong> command used for changing the label of exFAT formatted partition.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># exfatlabel /dev/sda3 EX_PART</span>
</code></pre></div><h3 id="disable-usb-automounthttpsaskubuntucomquestions89244how-to-disable-automount-in-nautiluss-preferences"><a href="https://askubuntu.com/questions/89244/how-to-disable-automount-in-nautiluss-preferences">Disable usb automount</a><a hidden class="anchor" aria-hidden="true" href="#disable-usb-automounthttpsaskubuntucomquestions89244how-to-disable-automount-in-nautiluss-preferences">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings get org.gnome.desktop.media-handling automount
$ gsettings set org.gnome.desktop.media-handling automount false
</code></pre></div><p>or use <a href="https://linuxconfig.org/how-to-disable-gui-desktop-usb-automount-on-linux-system">dconf-editor</a></p>
<h3 id="create-an-iso-filehttpsvituxcomhow-to-create-an-iso-file-in-ubuntu"><a href="https://vitux.com/how-to-create-an-iso-file-in-ubuntu/">Create an ISO File</a><a hidden class="anchor" aria-hidden="true" href="#create-an-iso-filehttpsvituxcomhow-to-create-an-iso-file-in-ubuntu">#</a></h3>
<ul>
<li>
<p>Mkisofs</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkisofs -o <span style="color:#f92672">[</span>filename.iso<span style="color:#f92672">]</span> <span style="color:#f92672">[</span> directory_path<span style="color:#f92672">]</span>
$ mkisofs –o backup.iso /home/tin/Documents/backup
</code></pre></div></li>
<li>
<p>dd</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=[</span>source<span style="color:#f92672">]</span> of<span style="color:#f92672">=[</span>target.iso<span style="color:#f92672">]</span>
$ sudo dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span> /dev/sdb of<span style="color:#f92672">=</span> diskimage.iso
</code></pre></div></li>
<li>
<p>Brasero</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install brasero
</code></pre></div></li>
</ul>
<h3 id="keychainhttpswwwcybercitibizfaqubuntu-debian-linux-server-install-keychain-apt-get-command"><a href="https://www.cyberciti.biz/faq/ubuntu-debian-linux-server-install-keychain-apt-get-command/">keychain</a><a hidden class="anchor" aria-hidden="true" href="#keychainhttpswwwcybercitibizfaqubuntu-debian-linux-server-install-keychain-apt-get-command">#</a></h3>
<p><a href="https://wiki.gentoo.org/wiki/Keychain#Squeezing_the_last_drop_of_convenience_out_of_ssh-agent">Squeezing the last drop of convenience out of ssh-agent</a>: Keychain will allow to reuse an <strong>ssh-agent</strong> between logins, and optionally prompt for passphrases each time the user logs in.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install keychain
$ vi ~/.bashrc
. ~/.keychain/<span style="color:#e6db74">${</span>HOSTNAME<span style="color:#e6db74">}</span>-sh
$ keychain ~/.ssh/id_rsa
</code></pre></div><h3 id="default-bashrchttpsgistgithubcommariobonales1637696"><a href="https://gist.github.com/marioBonales/1637696">Default .bashrc</a><a hidden class="anchor" aria-hidden="true" href="#default-bashrchttpsgistgithubcommariobonales1637696">#</a></h3>
<p>You don&rsquo;t need to trust this random gist on Github. Heck, it&rsquo;s ~10 years old. Don&rsquo;t you want the latest default - or the default that&rsquo;s specific to your version of Ubuntu?</p>
<p>You can find the &ldquo;skeleton&rdquo; file used to initialize new users in <code>ls -a /etc/skel</code>.</p>
<p>To copy someone else&rsquo;s comment: just run <code>cp /etc/skel/.bashrc ~/</code> to copy from that &ldquo;skeleton&rdquo; to your current bashrc.</p>
<h3 id="use-cp-to-exclude-a-specific-directoryhttpsstackoverflowcomquestions4585929how-to-use-cp-command-to-exclude-a-specific-directory1478940014789400"><a href="https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory/14789400#14789400">use &lsquo;cp&rsquo; to exclude a specific directory</a><a hidden class="anchor" aria-hidden="true" href="#use-cp-to-exclude-a-specific-directoryhttpsstackoverflowcomquestions4585929how-to-use-cp-command-to-exclude-a-specific-directory1478940014789400">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ shopt -s extglob
$ echo images/*
images/004.bmp images/033.jpg images/1276338351183.jpg images/2252.png
$ echo images/!<span style="color:#f92672">(</span>*.jpg<span style="color:#f92672">)</span>
images/004.bmp images/2252.png
</code></pre></div><h3 id="regenerate-initramfshttpsaskubuntucomquestions1351911what-does-regenerate-your-initramfs-mean"><a href="https://askubuntu.com/questions/1351911/what-does-regenerate-your-initramfs-mean">regenerate initramfs</a><a hidden class="anchor" aria-hidden="true" href="#regenerate-initramfshttpsaskubuntucomquestions1351911what-does-regenerate-your-initramfs-mean">#</a></h3>
<p>To create/recreate/update the initramfs file means to update the <code>initrd.img-*</code> ramdisk files in <code>/boot</code>.</p>
<p><strong>Note</strong>: I prefer to create a totally fresh version by using the <code>-c</code> option, instead of just updating the existing file by using the <code>-u</code> option.</p>
<p>The proper command would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo update-initramfs -c -k <span style="color:#66d9ef">$(</span>uname -r<span style="color:#66d9ef">)</span>
</code></pre></div><p>This will create a fresh initrd.img-* file for your currently booted version of Ubuntu.</p>
<p>However, if you can&rsquo;t boot to the current version of Ubuntu, you may have to modify this command, and by booting to an older version of Ubuntu, you can do it this way:</p>
<p><code>sudo update-initramfs -c -k 5.11.0-22-generic</code> where the 5.11.0-22-generic part should be replaced with the version of the desired boot kernel.</p>
<p>To get more detailed information, type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ man update-initramfs
</code></pre></div><h3 id="extract-a-specific-file-from-a-tar-archivehttpsaskubuntucomquestions168795how-do-i-extract-a-specific-file-from-a-tar-archive"><a href="https://askubuntu.com/questions/168795/how-do-i-extract-a-specific-file-from-a-tar-archive">extract a specific file from a tar archive</a><a hidden class="anchor" aria-hidden="true" href="#extract-a-specific-file-from-a-tar-archivehttpsaskubuntucomquestions168795how-do-i-extract-a-specific-file-from-a-tar-archive">#</a></h3>
<p>Yes, just give the full stored path of the file after the tarball name.</p>
<p>Example: suppose you want file <code>etc/apt/sources.list</code> from <code>etc.tar</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tar -xf etc.tar etc/apt/sources.list
</code></pre></div><h3 id="repair-grubhttpsaskubuntucomquestions88384how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows"><a href="https://askubuntu.com/questions/88384/how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows">repair grub</a><a hidden class="anchor" aria-hidden="true" href="#repair-grubhttpsaskubuntucomquestions88384how-can-i-repair-grub-how-to-get-ubuntu-back-after-installing-windows">#</a></h3>
<p>When you install Windows, Windows assumes it is the only operating system (OS) on the machine, or at least it does not account for Linux. So it replaces GRUB with its own boot loader. What you have to do is replace the Windows boot loader with GRUB. I&rsquo;ve seen various instructions for replacing GRUB by mucking around with GRUB commands or some such, but to me the easiest way is to simply <code>chroot</code> into your install and run <code>update-grub</code>. <code>chroot</code> is great because it allows you to work on your actual install, instead of trying to redirect things here and there. It is really clean.</p>
<h3 id="dns缓存httpsblogcsdnnetcunchi4221articledetails107470928"><a href="https://blog.csdn.net/cunchi4221/article/details/107470928">DNS缓存</a><a hidden class="anchor" aria-hidden="true" href="#dns缓存httpsblogcsdnnetcunchi4221articledetails107470928">#</a></h3>
<p>使用以下命令来检查其状态。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl status systemd-resolved
</code></pre></div><p>运行以下命令来检查DNS缓存统计信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemd-resolve --statistics
</code></pre></div><p>运行以下命令来清除Ubuntu上的DNS缓存。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemd-resolve --flush-caches
</code></pre></div><p>DNS刷新命令不会清除缓存命中和未命中统计信息。 如果要清除所有缓存统计信息，则必须重新启动systemd解析的服务。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl restart systemd-resolved
</code></pre></div><h3 id="change-my-usernamehttpsaskubuntucomquestions34074how-do-i-change-my-username"><a href="https://askubuntu.com/questions/34074/how-do-i-change-my-username">change my username</a><a hidden class="anchor" aria-hidden="true" href="#change-my-usernamehttpsaskubuntucomquestions34074how-do-i-change-my-username">#</a></h3>
<p>Unix-like operating systems decouple the user name from the user identity, so you may safely change the name without affecting the ID. All permissions, files, etc are tied to your identity (uid), not your username.</p>
<p>To manage every aspect of the user database, you use the <code>usermod</code> tool.</p>
<p>To change username (it is probably best to do this without being logged in):</p>
<pre tabindex="0"><code>sudo usermod -l newUsername oldUsername
</code></pre><p>This however, doesn&rsquo;t rename the home folder.</p>
<p>To change home-folder, use</p>
<pre tabindex="0"><code>sudo usermod -d /home/newHomeDir -m newUsername
</code></pre><p>after you changed the username.</p>
<p>For instance, you could logout, drop to a console (Ctrl+Alt+F1), and <code>sudo su -</code> to become true root (as opposed to <code>sudo -s</code>, where $HOME is still /home/yourname.) Maybe you also have to kill some still running processes from this user first. To do so, enter <code>ps -u username</code>, look for the matching PID and kill them by <code>kill PID-number</code>.</p>
<p>Update: as arrange mentioned, some files may reference your old home directory. You can either keep a symlink for backward compatibility, e g <code>ln -s /home/newname /home/oldname</code> or you can change the file contents with <code>sed -i.bak 's/*oldname*/*newname*/g' *list of files*</code> It creates a backup for each file with a .bak extension.</p>
<p>Some additional information for not so experienced users like me:
As I only have ONE user account (administrator), it would not let me change the username (&ldquo;you are already logged in&rdquo; was the response in TTY1 (Ctrl+Alt+F1). To get around this:</p>
<ol>
<li>
<p>Login with your old credentials and add a new user, e.g. &ldquo;temporary&rdquo; in TTY1:</p>
<pre tabindex="0"><code>sudo adduser temporary
</code></pre><p>set the password.</p>
</li>
<li>
<p>Allow the temporary user to run sudo by adding the user to sudo group:</p>
<pre tabindex="0"><code>sudo adduser temporary sudo
</code></pre></li>
<li>
<p>Log out with the command <code>exit</code>.</p>
</li>
<li>
<p>Return to tty1: Login with the &lsquo;temporary&rsquo; user account and password. Change your username and folder as mentioned above. <code>exit</code> (until you get the login prompt)</p>
</li>
<li>
<p>Go back to TTY7 (Ctrl+Alt+F7) to login on the GUI/normal desktop screen and see if this works.</p>
</li>
<li>
<p>Delete temporary user and folder:</p>
<pre tabindex="0"><code>sudo deluser temporary
sudo rm -r /home/temporary
</code></pre></li>
</ol>
<h3 id="test-network-speedhttpsphoenixnapcomkblinux-network-speed-test"><a href="https://phoenixnap.com/kb/linux-network-speed-test">Test Network Speed</a><a hidden class="anchor" aria-hidden="true" href="#test-network-speedhttpsphoenixnapcomkblinux-network-speed-test">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install speedtest-cli
$ speedtest
</code></pre></div><h3 id="蓝牙与wifi信号干扰httpswwwbilibilicomreadcv218058"><a href="https://www.bilibili.com/read/cv218058">蓝牙与WiFi信号干扰</a><a hidden class="anchor" aria-hidden="true" href="#蓝牙与wifi信号干扰httpswwwbilibilicomreadcv218058">#</a></h3>
<p><del>蓝牙和WIFI干扰？把蓝牙掐死就行了</del></p>
<p>蓝牙和Wi-Fi信号干扰问题可能你也遇到过，两者主要都是使用2.4GHz频段，导致同时开启时，蓝牙的数据吞吐量会急剧下降，配对设备困难，Wi-Fi间歇性中断，网络受到限制。目前基本没什么办法可以根治这个问题，但你可以下面的方案临时帮你解决一些问题。本文提供了4种方法，可以参考下。</p>
<p><strong>方法1：连接至5GHz无线网络</strong></p>
<p>既然知道了问题出在频段冲突上，那么可以考虑购买一个双频（2.4GHz + 5GHz）路由器，并连接至5GHz的Wi-Fi网络。该方法可以彻底解决干扰问题，但银子也是必不可少的。</p>
<p><strong>方法2：更换Wi-Fi信道</strong></p>
<p>以TP-Link路由器为例，登录路由器Web管理页，在无线设置-&gt;基本设置中找到信道选项，将其改为1、6、11中的任何一个。这些为2.4GHz的不重叠传输信道，相较于其他信道更稳定一些。</p>
<p><strong>方法3：<a href="https://askubuntu.com/questions/1200778/wifi-and-bluetooth-headset-issues">开启网卡蓝牙共存功能</a></strong></p>
<p>在近几年生产的无线网卡中，都支持蓝牙共存功能，方法是在网络适配器属性的高级选项卡中，找到Bluetooth Collaboration或Bluetooth Coexistence Mode（名称可能有所不同），将其设为启用（Enable）。Windows会自动重新连接Wi-Fi，干扰蓝牙的情况也会有所缓解。</p>
<p>对于 Linux</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lspci -knn | grep Net -A3; lsusb
...
Kernel driver in use: ath9k
Kernel modules: ath9k
...
$ sudo tee /etc/modprobe.d/ath9k.conf <span style="color:#f92672">&lt;&lt;&lt;</span> <span style="color:#e6db74">&#34;options ath9k btcoex_enable=1&#34;</span>
</code></pre></div><p><strong>方法4：远离干扰源</strong></p>
<p>将蓝牙终端与路由器、微波炉、无绳电话机等使用2.4GHz频段的设备隔开使用。</p>
<p>然而蓝牙与WIFI干扰确实是头疼的问题：蓝牙鼠标会受到WIFI干扰经常反应迟缓，而蓝牙音箱则会导致WIFI断网，经常上传失败的绝望。。。。</p>
<p>总之，无线信道的改进还在进行着。。。</p>
<h3 id="ram--vram">RAM &amp; VRAM<a hidden class="anchor" aria-hidden="true" href="#ram--vram">#</a></h3>
<h4 id="vram-as-ramhttpswikiarchlinuxorgtitleswap_on_video_ram"><a href="https://wiki.archlinux.org/title/Swap_on_video_RAM">VRAM as RAM</a><a hidden class="anchor" aria-hidden="true" href="#vram-as-ramhttpswikiarchlinuxorgtitleswap_on_video_ram">#</a></h4>
<ul>
<li><a href="http://www.linux-mtd.infradead.org/">MTD</a></li>
<li><a href="https://github.com/Overv/vramfs">vramfs</a></li>
</ul>
<h4 id="ram-as-vramhttpswwwredditcomrpcmasterracecomments4bj7f7is_there_any_way_to_use_ram_memory_as_vram"><a href="https://www.reddit.com/r/pcmasterrace/comments/4bj7f7/is_there_any_way_to_use_ram_memory_as_vram/">RAM as VRAM</a><a hidden class="anchor" aria-hidden="true" href="#ram-as-vramhttpswwwredditcomrpcmasterracecomments4bj7f7is_there_any_way_to_use_ram_memory_as_vram">#</a></h4>
<p>Basically the answer is the operating system threats the whole memory pool for the graphics card, and ram as a virtual memory.</p>
<p>Virtual memory is paged two ways through a partition like swap, or a image file like in windows.</p>
<p>The virtual memory then maps the references to memory when you call int* or &amp;memory. To a physical address on your ram or vram depending on where it&rsquo;s meant to go.</p>
<p>The game cannot force the kernel or operating system to allocate virtual memory to a certain place.</p>
<p>The kernel will dynamically decide where everything goes, and will write to your hard drive if you overflow the current physical limit.</p>
<p>There are tons of articles on virtual memory on windows, bsd and linux. Mac is technically a bsd fork and does use the same methods, and so does the ps4 os.</p>
<p>tl;dr Basically what you are saying doesn&rsquo;t make sense in terms of virtual memory and <strong>this is done automatically</strong>( Games automatically use RAM as VRAM when you run out of VRAM. That&rsquo;s why, when you go over your VRAM limit, your FPS drops like a rock ).</p>
<p>Also some people in this thread are confusing video memory and virtual memory.</p>
<h3 id="optimizing-for-gaminghttpssteamcommunitycomsharedfilesfiledetailsid1787799592"><a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1787799592">Optimizing for Gaming</a><a hidden class="anchor" aria-hidden="true" href="#optimizing-for-gaminghttpssteamcommunitycomsharedfilesfiledetailsid1787799592">#</a></h3>
<p>This guide is only for Arch and Ubuntu. Any derivatives like Manjaro, Mint, PopOS, etc should also work.</p>
<h4 id="enable-multilib">Enable Multilib<a hidden class="anchor" aria-hidden="true" href="#enable-multilib">#</a></h4>
<p>Multilib is required by Steam, So if you are running Steam you can skip this step, If you can not find Steam in your repositories this is your issue.</p>
<p>Add the architecture.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo dpkg --add-architecture i386
</code></pre></div><p>Update the package manager</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get update
</code></pre></div><p>Upgrade to newer packages</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get dist-upgrade
</code></pre></div><h4 id="gpu-drivers">GPU Drivers<a hidden class="anchor" aria-hidden="true" href="#gpu-drivers">#</a></h4>
<p>Having the right GPU drivers is imporant, else games won&rsquo;t run properly.</p>
<p>Manually check which driver you need: <a href="https://www.nvidia.com/Download/index.aspx?lang=en-us">https://www.nvidia.com/Download/index.aspx?lang=en-us</a></p>
<p>For Nvidia you need to add a repository</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:graphics-drivers/ppa <span style="color:#f92672">&amp;&amp;</span> sudo apt-get upgrade
</code></pre></div><p>For Nvidia 440 you need these packages so install them.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install nvidia-graphics-drivers-440 nvidia-settings vulkan vulkan-utils
</code></pre></div><p>Now reboot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo reboot
</code></pre></div><p>If you use Gnome or GDM you might need to disable Wayland, This is not always the case, But I include it here just in case, If your System won&rsquo;t reboot you can try this</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/gdm/custom.conf
</code></pre></div><p>Remove the # in front of the #WaylandEnable=false line and it should force Xorg.</p>
<h4 id="linux-kernel">Linux kernel<a hidden class="anchor" aria-hidden="true" href="#linux-kernel">#</a></h4>
<p>Installing the newest kernel is generally the easiest kernel switch, There are other kernels available, I will include them later.</p>
<p>The easiest way is to use <a href="https://github.com/bkw777/mainline">ukuu</a>, First we need to install it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:cappelikan/ppa
$ sudo apt update
$ sudo apt install mainline
</code></pre></div><p>Now ukuu is installed, in this program you can select the newest stable kernel click install and when you reboot the new kernel is used. Do not remove your old kernel. If anything goes wrong you can select which kernel to boot in the grub screen at startup and remove the kernel that gives you trouble.</p>
<h4 id="feral-gamemodehttpslinuxhintcomgamemode-improve-gaming-performance-in-linux"><a href="https://linuxhint.com/gamemode-improve-gaming-performance-in-linux/">Feral Gamemode</a><a hidden class="anchor" aria-hidden="true" href="#feral-gamemodehttpslinuxhintcomgamemode-improve-gaming-performance-in-linux">#</a></h4>
<p><a href="https://github.com/FeralInteractive/gamemode">gamemode</a> 基本上是一组守护进程/库，它可以按需优化 Linux 系统的游戏性能。它实际上只是让 CPU 在用户玩游戏时自动运行在高性能模式下并帮助 Linux 用户从游戏中获得最佳性能。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install gamemode
</code></pre></div><p><strong>Manual</strong></p>
<p>Install the dependencies</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install meson libsystemd-dev pkg-config ninja-build git libdbus-1-dev libinih-dev
</code></pre></div><p>Clone the repository</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/FeralInteractive/gamemode.git
</code></pre></div><p>Change the directory into the just downloaded folder</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd gamemode
</code></pre></div><p>Change the tree to the newest version</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git checkout 1.5.1
</code></pre></div><p>Run the install script</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./bootstrap.sh
</code></pre></div><p><strong>Usage</strong></p>
<p>Now that it is installed we need to enable the service with this command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl --user enable gamemoded <span style="color:#f92672">&amp;&amp;</span> systemctl --user start gamemoded
</code></pre></div><p>To use gamemode for supertuxkart for example, run this terminal</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gamemoderun supertuxkart
</code></pre></div><p>To use it in Steam edit the launch option for the desired game to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gamemoderun %command%
</code></pre></div><p>If gamemode does not run try to make it executable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo chmod +x /usr/bin/gamemoderun
</code></pre></div><p>If gamemoderun does not work for you try this as a launch command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ LD_PRELOAD<span style="color:#f92672">=</span>$LD_PRELOAD:/usr/lib/x86_64-linux-gnu/libgamemodeauto.so.0 %command%
</code></pre></div><h4 id="nvidia-improvements">Nvidia Improvements<a hidden class="anchor" aria-hidden="true" href="#nvidia-improvements">#</a></h4>
<p>Nvidia users might want to enable all options listed here to improve performance in games</p>
<ul>
<li>Force Full Composition Pipeline avoids screen tearing by letting the GPU do all the scaling.</li>
<li>Triple Buffer avoids stuttering gameplay It allows for a stream of data instead of chunks of data.</li>
<li>IndirectGLXProtocol forces the game to directly communicate with the Nvidia drivers.</li>
<li>Coolbits enables your card to be overclocked which gamemode will make use of.</li>
</ul>
<p>Create a Xorg Config file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nvidia-xconfig
</code></pre></div><p>Edit the file with the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/X11/xorg.conf
</code></pre></div><p>Add in these lines under the &ldquo;Device&rdquo; section between the other options</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Option         <span style="color:#e6db74">&#34;TripleBuffer&#34;</span> <span style="color:#e6db74">&#34;on&#34;</span> Option         <span style="color:#e6db74">&#34;Coolbits&#34;</span> <span style="color:#e6db74">&#34;28&#34;</span>
</code></pre></div><p>Add in these lines under the &ldquo;Screen&rdquo; section between the other options.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Option         <span style="color:#e6db74">&#34;metamodes&#34;</span> <span style="color:#e6db74">&#34;nvidia-auto-select +0+0 {ForceCompositionPipeline=On, ForceFullCompositionPipeline=On}&#34;</span> Option         <span style="color:#e6db74">&#34;AllowIndirectGLXProtocol&#34;</span> <span style="color:#e6db74">&#34;off&#34;</span>
</code></pre></div><p>Try this one with risk, It will be sure to crash GNOME, I am not sure about other DEs</p>
<p>just add it to the end of the file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Section <span style="color:#e6db74">&#34;Extensions&#34;</span>   Option         <span style="color:#e6db74">&#34;Composite&#34;</span> <span style="color:#e6db74">&#34;Disable&#34;</span> EndSection
</code></pre></div><p>If you run into any problems, just hit CTRL ALT F3 to switch to a different tty login, run the command to edit the file again and put a # in front of the options that are giving you trouble, Most likely the last one</p>
<p>Alternatively you can just completely remove the file with the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo rm /etc/X11/xorg.conf
</code></pre></div><h4 id="libstrangle">Libstrangle<a hidden class="anchor" aria-hidden="true" href="#libstrangle">#</a></h4>
<p><a href="https://gitlab.com/torkel104/libstrangle">Libstrangle</a> is a tool that helps you control framerates but also vsync settings. This is especially handy for games that do not support these features, You would like to half your framerate to make it run better save some power or just give your hardware a break.</p>
<p>Libstrangle can be used in multiple ways depending on what you want to achieve.</p>
<p>To use libstrangle you can simply type strangle and then the amount of frames you want to run. There are some examples below, But the features you will probably use are Vsync which you use by using the -v option, the rules for OpenGL and Vulkan are different, Here is what each number does for the different apis.</p>
<ul>
<li>OpenGL 0 Force off, 1 Force on, n - Sync to refresh rate</li>
<li>Vulkan 0 Force off, 1 Mailbox mode, 2 Traditional vsync, 3 Adaptive vsync</li>
</ul>
<p>You can also limit the game depending on the power state of your device, Set it to 60 while charging and on 30 while discharging for example. You do this by adding a second number right after a colon. in example, strangle 60:30. There are more features but they are not that commonly used, you can check the gitlab link above or simply type strangle -h for more information.</p>
<p>To limit the framerate of supertuxkart to 30 simply run</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strangle <span style="color:#ae81ff">30</span> supertuxkart
</code></pre></div><p>To Force enable vsync on 60 fps for an OpenGL Steam game set the launch option to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strangle -v <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">60</span> %command%
</code></pre></div><p>To set the framerate of a vulkan game on Steam to 120 fps but 60 on battery power with adaptive vsync set this as your launch command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strangle -v <span style="color:#ae81ff">3</span> 120:60 %command%
</code></pre></div><h4 id="mangohud">Mangohud<a hidden class="anchor" aria-hidden="true" href="#mangohud">#</a></h4>
<p><a href="https://github.com/flightlessmango/MangoHud">Mangohud</a> is a monitoring tool for Vulkan and OpenGL applications. It can show CPU and GPU usage, temps, But also framerates, frametimes and a lot more.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:flexiondotorg/mangohud
$ sudo apt update
$ sudo apt install mangohud
</code></pre></div><p>To configure it with a GUI you can check out GOverlay below. For a manual configuration you can edit</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ~/.config/MangoHud/MangoHud.conf
</code></pre></div><p>If you want exactly my configuration you can just copy this into it without the need for GOverlay.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">background_alpha<span style="color:#f92672">=</span>0.3
font_size<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>
background_color<span style="color:#f92672">=</span><span style="color:#ae81ff">020202</span>
text_color<span style="color:#f92672">=</span>ffffff
position<span style="color:#f92672">=</span>top-right
no_display
toggle_hud<span style="color:#f92672">=</span>F11
cpu_stats
cpu_temp
cpu_color<span style="color:#f92672">=</span>007AFA
gpu_stats
gpu_temp
gpu_color<span style="color:#f92672">=</span>00BD00
ram
ram_color<span style="color:#f92672">=</span>B3000A
vram
vram_color<span style="color:#f92672">=</span>00801B
io_read
io_write
io_color<span style="color:#f92672">=</span>B84700
arch
engine_color<span style="color:#f92672">=</span>B200B0
frame_timing<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
frametime_color<span style="color:#f92672">=</span>00ff00
<span style="color:#75715e">#output_file=/home/houtworm/mangohud_log_ </span>
<span style="color:#75715e">#fps_limit 120</span>
<span style="color:#75715e">#media_player</span>
<span style="color:#75715e">#toggle_logging=F10</span>
</code></pre></div><p>You can tweak all the little things you want here. You can also create different configurations per game by adding a MangoHud.conf file to the game directory.</p>
<p>To use it for any game change its launch option to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mangohud %command%
</code></pre></div><p>To use it with non Steam games use the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mangohud supertuxkart
</code></pre></div><p>Some games might need the 32 bit version, try this if the normal command fails.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mangohud.x86 %command%
</code></pre></div><h4 id="vkbasalt">VKBasalt<a hidden class="anchor" aria-hidden="true" href="#vkbasalt">#</a></h4>
<p><a href="https://github.com/DadSchoorse/vkBasalt">VKBasalt</a> is a post processing layer for Vulkan which enables you to enhance graphics further. It only works with Vulkan, This includes all Proton games.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/DadSchoorse/vkBasalt.git <span style="color:#f92672">&amp;&amp;</span> cd vkBasalt <span style="color:#f92672">&amp;&amp;</span> meson --buildtype<span style="color:#f92672">=</span>release builddir <span style="color:#f92672">&amp;&amp;</span> ninja -C builddir install
</code></pre></div><p>To configure it first you need to create a config file, Run the following command to copy the example to a folder you can edit as the user.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir ~/.config/vkBasalt <span style="color:#f92672">&amp;&amp;</span> cp /usr/share/vkBasalt/vkBasalt.conf.example ~/.config/vkBasalt/vkBasalt.conf
</code></pre></div><p>You can tweak all the little things you want here. You can also create different configurations per game by adding a vkBasalt.conf file to the game directory.</p>
<p>To use VKBasalt for any particular game enter this as a launch option.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ENABLE_VKBASALT<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> %command%
</code></pre></div><p>You can also start non Steam games this way by typing the following command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ENABLE_VKBASALT<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> supertuxkart
</code></pre></div><h4 id="goverlay">GOverlay<a hidden class="anchor" aria-hidden="true" href="#goverlay">#</a></h4>
<p><a href="https://github.com/benjamimgois/goverlay">GOverlay</a> is a Graphical User Interface for managing MangoHud and VKBasalt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install lazarus git
$ git clone https://github.com/benjamimgois/goverlay.git
$ cd goverlay
$ lazbuild -B goverlay.lpi
</code></pre></div><p>mesa-demos and vulkan-tools are optional, You need them if you want to show the previews. You can find them in your distros repository</p>
<h4 id="xbox-one-controller">Xbox One Controller<a hidden class="anchor" aria-hidden="true" href="#xbox-one-controller">#</a></h4>
<p>xpad works great, is the default on modern Linux distros and supports a wide range of controllers, But if you are like me and you only Xbox One controllers then using xpadneo is much better.</p>
<p>For Bluetooth to work with xpad and the Xbox One controllers you need to disable ertm (This is not needed for xpadneo)</p>
<p>create the config file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo nano /etc/modprobe.d/xbox_bt.conf
</code></pre></div><p>Add the following line to the document and save and exit with CTRL + X.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">options bluetooth disable_ertm<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</code></pre></div><p><a href="https://github.com/atar-axis/xpadneo">xpadneo</a> supports Xbox One controllers wired and over bluetooth, It enables Force Feedback even the vibration inside the triggers, It supports battery level indication, It also fixes the mapping in many many games that where previously unplayable with a Xbox One controller on Linux.</p>
<p>Install the dependencies</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install dkms linux-headers-<span style="color:#e6db74">`</span>uname -r<span style="color:#e6db74">`</span>
</code></pre></div><p>Install xpadneo from Github</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/atar-axis/xpadneo.git <span style="color:#f92672">&amp;&amp;</span> cd xpadneo <span style="color:#f92672">&amp;&amp;</span> sudo ./install.sh
</code></pre></div><p>Now you should be able to reboot and it should be all good, Having the controllers vibrate for a second when connected is a good indicator that it works.</p>
<h3 id="认证硬件httpswwwzhihucomquestion286150644"><a href="https://www.zhihu.com/question/286150644">认证硬件</a><a hidden class="anchor" aria-hidden="true" href="#认证硬件httpswwwzhihucomquestion286150644">#</a></h3>
<ul>
<li><a href="https://ubuntu.com/certified">Ubuntu certified hardware</a></li>
<li><a href="https://catalog.redhat.com/hardware">Red Hat certified hardware</a></li>
</ul>
<p>如果不怎么玩游戏的话，建议是直接考虑那些不带独立显卡的笔记本电脑。因为在Linux下双显卡装驱动问题很多。</p>
<p>说到牌子的话，建议是考虑戴尔笔记本。因为戴尔台式机和笔记本，都是尽可能地去兼容Ubuntu来设计的。这个不是说假话做广告。我也就这个问题，看过了几乎所有戴尔系列产品的技术文档了。基本上都是在支持的操作系统列表中，无一例外地包含了Ubuntu。如果是想买能完美使用Ubuntu的本子，戴尔是首选。戴尔绝大部分笔记本机型都能很好完美兼容Ubuntu。</p>
<p>还有一个重要原因就是，ubuntu的所属公司，与戴尔公司是有合作的。也正因为如此，Ubuntu默认就包含了dell的大部分硬件通用驱动，甚至硬件底层管理模块都囊括其中。</p>
<h3 id="功耗控制httpsarchicekylinonlineadvancedpower-ctlhtml"><a href="https://arch.icekylin.online/advanced/power-ctl.html">功耗控制</a><a hidden class="anchor" aria-hidden="true" href="#功耗控制httpsarchicekylinonlineadvancedpower-ctlhtml">#</a></h3>
<p>针对散热不好的设备或者续航能力不佳的笔记本，功耗控制显得非常必要</p>
<h4 id="使用-tlp-延长电池寿命及续航">使用 TLP 延长电池寿命及续航<a hidden class="anchor" aria-hidden="true" href="#使用-tlp-延长电池寿命及续航">#</a></h4>
<blockquote>
<p>如有需要可参阅 <a href="https://linrunner.de/tlp/settings/index.html">TLP 官方文档</a> 和 <a href="https://wiki.archlinux.org/title/TLP_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">archwiki TLP</a>。</p>
</blockquote>
<p>多年来，Linux 在电池优化方面取得了很大进步，但仍然有一些可选步骤改善笔记本电脑的电池寿命并且延长续航。</p>
<p>TLP 作为一款自由开源的高级电源管理工具提供开箱即用的默认配置。同时也可以高度定制化，以满足特定需求。</p>
<h4 id="电压下探">电压下探<a hidden class="anchor" aria-hidden="true" href="#电压下探">#</a></h4>
<blockquote>
<p>以下方法<strong>仅适用于 Intel 四代酷睿 ™ Haswell 及更新 CPU</strong>。有关 AMD CPU 和 Intel 四代酷睿 ™ Haswell 之前的 CPU 请参考 <a href="https://wiki.archlinux.org/index.php/Undervolting_CPU">archWiki Undervolting CPU</a>。</p>
</blockquote>
<p>对处理器的电压进行最大限度的下探，在挖掘 CPU 体质的极限的同时，起到既能降低发热，又能最大限度保持性能的效果。</p>
<p>如果正常操作，降低电压<strong>一般</strong>不会损害 CPU，一般建议从 50 毫伏进行尝试，每次降压尝试多增加 10 毫伏。只要确保在降低电压前，系统中任务均被正确保存即可。</p>
<h4 id="降低功率墙">降低功率墙<a hidden class="anchor" aria-hidden="true" href="#降低功率墙">#</a></h4>
<p>除了电压的下探，同时也可以尝试对处理器的功率墙（TDP）做出降低的限制。比如考虑这种情况 —— 在 CPU 满睿频时，其实不需要默认的那么多功耗来维持，也许在默认功耗的基础上减几瓦，也能维持满睿频，这样就又可以进一步降低温度。对功率墙进行限制不同于对电压进行下探，若限制功率墙的参数较低，这会不可避免的损失较多的性能，但是在散热过差的设备上这也是一个好办法。</p>
<p>对于功率墙的调整，有些主板在 BIOS 中提供了设置项可以直接调整。对于没有设置项的主板，有的主板是锁定了瞬时和长时功率墙，这种情况就无法调整功率墙了。有的主板 BIOS 随没有提供功率墙调整项，但依旧可以通过命令行设置。</p>
<p>通过以下的命令可以查看主板是否可以调整功率墙：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">grep . /sys/class/powercap/intel-rapl/intel-rapl:0/* 2&gt; /dev/null
</code></pre></div><p>如果在输出中看到了如下的 <code>enabled</code> 值为 <code>1</code>，即可以调整。第一行的数字代表现有的功率墙限制：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/sys/class/powercap/intel-rapl/intel-rapl:0/constraint_0_power_limit_uw:100000000
/sys/class/powercap/intel-rapl/intel-rapl:0/enabled:1
</code></pre></div><p>具体的调整步骤参考 <a href="https://askubuntu.com/questions/1226254/set-max-tdp-of-intel-h-series-cpu">Set Max TDP of Intel H-series CPU</a>。</p>
<h3 id="交换文件httpsarchlinuxstudiogithubioarchlinuxtutorialrookiedeappid_5e8aebee7bdaee4baa4e68da2e69687e4bbb6-swape58fafe98089"><a href="https://archlinuxstudio.github.io/ArchLinuxTutorial/#/rookie/DE&amp;App?id=_5%e8%ae%be%e7%bd%ae%e4%ba%a4%e6%8d%a2%e6%96%87%e4%bb%b6-swap%e5%8f%af%e9%80%89">交换文件</a><a hidden class="anchor" aria-hidden="true" href="#交换文件httpsarchlinuxstudiogithubioarchlinuxtutorialrookiedeappid_5e8aebee7bdaee4baa4e68da2e69687e4bbb6-swape58fafe98089">#</a></h3>
<p>在桌面环境中，交换分区或文件用来实现休眠(hibernate)的功能，即将当前环境保存在磁盘的交换文件或分区部分。除此之外，某些特定软件需要 swap 才可以正确运行。交换文件与分区性能相同，且交换文件更为灵活，可随时变更大小，增加与删除。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/dev/zero of<span style="color:#f92672">=</span>/swapfile bs<span style="color:#f92672">=</span>1M count<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span> status<span style="color:#f92672">=</span>progress <span style="color:#75715e">#创建4G的交换空间 大小根据需要自定</span>
$ chmod <span style="color:#ae81ff">600</span> /swapfile <span style="color:#75715e">#设置正确的权限</span>
$ mkswap /swapfile <span style="color:#75715e">#格式化swap文件</span>
$ swapon /swapfile <span style="color:#75715e">#启用swap文件</span>
</code></pre></div><p>最后，向/etc/fstab 中<strong>追加</strong>如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/swapfile none swap defaults <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>
</code></pre></div><p>KDE 自身提供开箱即用的睡眠功能(suspend)，即将系统挂起到内存，消耗少量的电量。休眠(hibernate)会将系统挂起到交换分区或文件，几乎不消耗电量。</p>
<h2 id="questions">QUESTIONS<a hidden class="anchor" aria-hidden="true" href="#questions">#</a></h2>
<h3 id="ubuntu-无法关机">Ubuntu 无法关机<a hidden class="anchor" aria-hidden="true" href="#ubuntu-无法关机">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vim /etc/systemd/system.conf
DefaultTimeoutStartSec<span style="color:#f92672">=</span>5s
DefaultTimeoutStopSec<span style="color:#f92672">=</span>5s
$ sudo systemctl reload
</code></pre></div><p><code>DefaultTimeoutStartSec=</code>, <code>DefaultTimeoutStopSec=</code> 设置启动/停止一个单元所允许的最大时长。若仅设置一个整数而没有单位，那么单位是秒。 也可以在整数后面加上时间单位后缀： &ldquo;ms&rdquo;(毫秒), &ldquo;s&rdquo;(秒), &ldquo;min&rdquo;(分钟), &ldquo;h&rdquo;(小时), &ldquo;d&rdquo;(天), &ldquo;w&rdquo;(周) 。 对于 <code>Type=oneshot</code> 类型的 service 单元， 这些选项没有意义(相当于全部被禁用)。 对于其他类型的 service 单元，可以在单元文件中设置 <code>TimeoutStartSec=</code>, <code>TimeoutStopSec=</code>, <code>RestartSec=</code> 以覆盖此处设置的默认值 (参见<a href="http://www.jinbuguo.com/systemd/systemd.service.html##">systemd.service(5)</a>)。 对于其他非 service 类型的单元， <code>DefaultTimeoutStartSec=</code> 是 <code>TimeoutSec=</code> 的默认值。</p>
<p>注1：尽量不要使用上面更改。应该在完全清楚自己的更改造成的影响、产生的作用的前提下，做出更改。</p>
<p>注2：作为桌面操作系统，如果有硬件驱动或其他各种莫名问题，可以尝试升级到最新版本来解决。</p>
<h3 id="acpi-error-ae_already_existshttpsaskubuntucomquestions1064528cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists"><a href="https://askubuntu.com/questions/1064528/cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists">ACPI ERROR: AE_ALREADY_EXISTS</a><a hidden class="anchor" aria-hidden="true" href="#acpi-error-ae_already_existshttpsaskubuntucomquestions1064528cant-install-ubuntu-from-an-usb-stick-ae-not-found-ae-already-exists">#</a></h3>
<p>These kinds of &ldquo;errors&rdquo; have been discussed ad nauseam, it&rsquo;s simply the kernel telling you that the ACPI information received from the system seems to be incomplete in some way, update your BIOS/UEFI in hopes for a proper fix or ignore the error if you don&rsquo;t notice anything off with your system.</p>
<p>(And please don&rsquo;t do something dumb like setting acpi=off just to get rid of these messages)</p>
<h3 id="解压zip乱码httpsforumubuntuorgcnviewtopicphpf122t175405p1343326"><a href="https://forum.ubuntu.org.cn/viewtopic.php?f=122&amp;t=175405&amp;p=1343326">解压zip乱码</a><a hidden class="anchor" aria-hidden="true" href="#解压zip乱码httpsforumubuntuorgcnviewtopicphpf122t175405p1343326">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ unzip -O CP936 xxx.zip
</code></pre></div><p>用GBK, GB18030也可以</p>
<h3 id="cant-run-csgo-at-fullscreenhttpsaskubuntucomquestions1114857cant-run-csgo-at-fullscreen-ubuntu-18-10"><a href="https://askubuntu.com/questions/1114857/cant-run-csgo-at-fullscreen-ubuntu-18-10">Can&rsquo;t run CS:GO at fullscreen</a><a hidden class="anchor" aria-hidden="true" href="#cant-run-csgo-at-fullscreenhttpsaskubuntucomquestions1114857cant-run-csgo-at-fullscreen-ubuntu-18-10">#</a></h3>
<ol>
<li>Open Steam</li>
<li>Go to the &ldquo;Library&rdquo;</li>
<li>Right-click the game which needs to be reconfigured</li>
<li>Select &ldquo;Properties&rdquo; from the menu</li>
<li>Click the &ldquo;Set launch options&hellip;&rdquo; button</li>
<li>type: -full and save</li>
</ol>
<h3 id="how-to-disable-lock-in--kubuntuhttpswwwubuntubuzzcom201604how-to-disable-suspend-lock-ubuntu-kubuntuhtmlm1textto20disable20kde20lock20behavior2c20in20the20sameactions20post20tags203a20kde2c20kubuntu2c20ubuntu2c20unity"><a href="https://www.ubuntubuzz.com/2016/04/how-to-disable-suspend-lock-ubuntu-kubuntu.html?m=1#:~:text=To%20disable%20KDE%20lock%20behavior%2C%20in%20the%20same,actions.%20Post%20Tags%20%3A%20KDE%2C%20Kubuntu%2C%20Ubuntu%2C%20unity">How To Disable Lock In  Kubuntu</a><a hidden class="anchor" aria-hidden="true" href="#how-to-disable-lock-in--kubuntuhttpswwwubuntubuzzcom201604how-to-disable-suspend-lock-ubuntu-kubuntuhtmlm1textto20disable20kde20lock20behavior2c20in20the20sameactions20post20tags203a20kde2c20kubuntu2c20ubuntu2c20unity">#</a></h3>
<p>open Workspace &gt; Desktop Behavior &gt; Screen Locking &gt; uncheck Lock screen option</p>
<h3 id="gnome-3-displays-two-icons-for-same-apphttpsaskubuntucomquestions898474why-do-some-applications-have-two-icons-in-usr-share-application"><a href="https://askubuntu.com/questions/898474/why-do-some-applications-have-two-icons-in-usr-share-application">Gnome 3 displays two icons for same app</a><a hidden class="anchor" aria-hidden="true" href="#gnome-3-displays-two-icons-for-same-apphttpsaskubuntucomquestions898474why-do-some-applications-have-two-icons-in-usr-share-application">#</a></h3>
<p>No, there&rsquo;s nothing wrong with your system.</p>
<p>The duplicated launcher icons explained:</p>
<p>The different icons are different commandline options. Some context applications with call the associated *.desktop icon. The exec option of the icon will depend on how the application is called.</p>
<p>Some of the Icons you show in your image may be obvious because of the difference in the way they are named. You can see the difference in the way the app is called by right clicking and clicking on properties to see other differences.</p>
<p>Some of the <code>*.desktop</code> files have a <code>%U</code> argument, used so the application will accept arguments.</p>
<p>Some of the Launchers are different commands that are called differently and are named differently often by a symbolic link.</p>
<p>Some exampes from the list in you image are:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Name: Online Accounts
Command: unity-control-center credentials

Name: Online Accounts
Command: Online account credentials and settings

Name: Personal File Sharing
Command: gnome-file-share-properties

Name: Rhythmbox
Command: rhythmbox %U

Name: Rhythmbox
Command rhythmbox-client --select-source %U
</code></pre></div><h3 id="ssh_exchange_identification-connection-closed-by-remote-hosthttpswwwzhihucomquestion20023544"><a href="https://www.zhihu.com/question/20023544">ssh_exchange_identification: Connection closed by remote host</a><a hidden class="anchor" aria-hidden="true" href="#ssh_exchange_identification-connection-closed-by-remote-hosthttpswwwzhihucomquestion20023544">#</a></h3>
<p>原因是 Clash 开了 TUN 模式。关闭掉就好了。</p>
<h3 id="disk-show-129986-tb">Disk show 129986 TB<a hidden class="anchor" aria-hidden="true" href="#disk-show-129986-tb">#</a></h3>
<blockquote>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:16 AM]
<img loading="lazy" src="/Distributions/photo_2022-02-07_11-41-09.jpg" alt=""  />

这个是怎么回事啊</p>
<p>雪梨, [2/7/22 11:21 AM]
分区表坏了？</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:21 AM]
直接再分区吗？</p>
<p>雪梨, [2/7/22 11:21 AM]
请鸽鱼老师看看诶</p>
<p>雪梨, [2/7/22 11:22 AM]
还能挂载就先备份数据好了</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:22 AM]
好的</p>
<p>Pegion Fish, [2/7/22 11:25 AM]
JMS炸了？
建议备份数据重建分区表
先重新插一次USB和硬盘</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:27 AM]
重插了
用fdisk 重建吗？</p>
<p>Pegion Fish, [2/7/22 11:28 AM]
还是不正常？
硬盘也重新插一下</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:28 AM]
恩</p>
<p>雪梨, [2/7/22 11:28 AM]
重建分区表，不是删掉分区再新增分区</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:30 AM]
断电后自动好了
这是怎么回事啊</p>
<p>Thor Luo Bing-, [2/7/22 11:31 AM]
硬盘清空了</p>
<p>(=ↀωↀ=)橘外猫, [2/7/22 11:32 AM]
没有，东西还在</p>
<p>Pegion Fish, [2/7/22 11:32 AM]
啊
这不是争产的吗
1T啊
这就是JMS主控抽风</p>
</blockquote>
<h3 id="no-caching-mode-page-found">No Caching mode page found<a hidden class="anchor" aria-hidden="true" href="#no-caching-mode-page-found">#</a></h3>
<p>during early boot, I get following error message:</p>
<pre tabindex="0"><code>[sdb] No Caching mode page found
[sdb] Assuming drive cache: write through
</code></pre><p>If I understand correctly, this is actually just a harmless info message and not an actual error. <code>sdb</code> is my USB disk, and it does not use caching .</p>
<p>Hard disks have a small amount of RAM cache to speed up write operations. The system can write a chunk of data to the disk cache without actually waiting for it to be written to the disk. This is sometimes called &ldquo;write-back&rdquo; mode. If there is no cache on the disk, data is directly written to it in &ldquo;write-through&rdquo; mode. The Asking for cache data failed warning usually occurs with devices such as USB flash drives, USB card readers, etc. which present themselves as SCSI devices to the system (sdX), but have no cache. The system asks the device: &ldquo;Do you have a cache?&rdquo; and gets no response. So it assumes there is no cache and puts it in &ldquo;write-through&rdquo; mode.</p>
<h3 id="certificate-verification-failedhttpsblogcsdnnetchaowanqarticledetails121559709"><a href="https://blog.csdn.net/Chaowanq/article/details/121559709">Certificate verification failed</a><a hidden class="anchor" aria-hidden="true" href="#certificate-verification-failedhttpsblogcsdnnetchaowanqarticledetails121559709">#</a></h3>
<p>首先更改源文件，将所有的 https 改成 http ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/apt/sources.list
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
<span style="color:#ae81ff">1234</span>
</code></pre></div><p>然后安装/更新证书 ca-certificates：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get update
$ sudo apt-get install --reinstall ca-certificates
</code></pre></div><p>最后将镜像源文件改回 https：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/apt/sources.list
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
$ sudo apt-get update
</code></pre></div><h3 id="move-and-overwrite-subdirectories-and-files-to-parent-directoryhttpsunixstackexchangecomquestions9899how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory"><a href="https://unix.stackexchange.com/questions/9899/how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory">Move and overwrite subdirectories (and files) to parent directory</a><a hidden class="anchor" aria-hidden="true" href="#move-and-overwrite-subdirectories-and-files-to-parent-directoryhttpsunixstackexchangecomquestions9899how-to-move-and-overwrite-subdirectories-and-files-to-parent-directory">#</a></h3>
<p>You will have to copy them to the destination and then delete the source, using the commands <code>cp -r * ..</code> followed by <code>rm -rf *</code>.</p>
<p>I don&rsquo;t think you can &ldquo;merge&rdquo; directories using <code>mv</code>.</p>
<h3 id="system-program-problem-detectedhttpswwwcnblogscomcrazyackingp5451861html"><a href="https://www.cnblogs.com/crazyacking/p/5451861.html">System program problem detected</a><a hidden class="anchor" aria-hidden="true" href="#system-program-problem-detectedhttpswwwcnblogscomcrazyackingp5451861html">#</a></h3>
<p>The error &ldquo;System program problem detected&rdquo; comes up when a certain  application crashes. Ubuntu has a program called Apport that is  responsible for detecting such crashes and upon user consent, report  these crashes to developers. This process intends to get the problem  fixed by the developers.</p>
<p>However it can be very annoying to common users, and there is no  point in showing errors to users when they cannot do anything about it  themselves. So you might want to disable them.</p>
<p><img loading="lazy" src="/Distributions/system-program-problem-detected.png" alt=""  />
</p>
<p><strong>Remove crash report files</strong></p>
<p>The apport system creates crash report files in the /var/crash  directory. These crash report files cause the error message to appear  everytime Ubuntu boots.</p>
<pre tabindex="0"><code>$ cd /var/crash
$ ls
_opt_google_chrome_chrome.1000.crash
_usr_lib_chromium-browser_chromium-browser.1000.crash
_usr_sbin_ulatencyd.0.crash
_usr_share_apport_apport-gtk.1000.crash
</code></pre><p>Just remove the crash report files</p>
<pre tabindex="0"><code>$ sudo rm /var/crash/*
</code></pre><p>After removing all the crash report files, the error message should  stop popping up. However if a new crash takes place then it would appear again in future.</p>
<p><strong>Turn off apport</strong></p>
<p>After removing the old crash reports, if you still get the same error message, then you can completely turn off apport to get rid. Edit the  configuration file at /etc/default/apport.</p>
<pre tabindex="0"><code>$ gksudo gedit /etc/default/apport
</code></pre><p>The file would contain something like this</p>
<pre tabindex="0"><code># set this to 0 to disable apport, or to 1 to enable it
# you can temporarily override this with
# sudo service apport start force_start=1
enabled=1
</code></pre><p>Just set the value of enabled to 0, and this will disable apport.</p>
<pre tabindex="0"><code>enabled=0
</code></pre><p>Save the file and close it. From the next boot onwards, there should  be no error messages ever. If you do not want to restart the system then restart apport from the command line.</p>
<pre tabindex="0"><code>$ sudo restart apport
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sakamotokurome.github.io/tags/unix/">Unix</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/ubuntu/">Ubuntu</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://sakamotokurome.github.io/posts/gentoo/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Gentoo</span>
  </a>
  <a class="next" href="https://sakamotokurome.github.io/posts/ubuntusystem/">
    <span class="title">Next Page »</span>
    <br>
    <span>Ubuntu System</span>
  </a>
</nav>

  </footer>
</article>

<div class="disqus-container">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    this.page.identifier = '62457d';
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "sakamotokurome" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://sakamotokurome.github.io/">Sakamoto Kurome</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
