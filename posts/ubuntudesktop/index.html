<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Ubuntu Desktop | Sakamoto Kurome</title>
<meta name="keywords" content="Unix, Linux, Ubuntu" />
<meta name="description" content="友邦拓 乌班图 During the first ten years of this HOWTO&rsquo;s life, I reported that from a new user&rsquo;s point of view, all Linux distributions are almost equivalent. But in 2006-2007, an actual best choice emerged: Ubuntu. While other distros have their own areas of strength, Ubuntu is far and away the most accessible to Linux newbies. Beware, though, of the hideous and nigh-unusable &ldquo;Unity&rdquo; desktop interface">
<meta name="author" content="Sakamoto Kurome">
<link rel="canonical" href="https://sakamotokurome.github.io/posts/ubuntudesktop/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sakamotokurome.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sakamotokurome.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sakamotokurome.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sakamotokurome.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sakamotokurome.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.90.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://sakamotokurome.github.io/custom.css">
<meta name="google-site-verification" content="i2r403EffR8m-KBf7EHi6AYg7tfnMshaXTAynoYPnpE" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2Y212LPQ2"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-K2Y212LPQ2', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Ubuntu Desktop" />
<meta property="og:description" content="友邦拓 乌班图 During the first ten years of this HOWTO&rsquo;s life, I reported that from a new user&rsquo;s point of view, all Linux distributions are almost equivalent. But in 2006-2007, an actual best choice emerged: Ubuntu. While other distros have their own areas of strength, Ubuntu is far and away the most accessible to Linux newbies. Beware, though, of the hideous and nigh-unusable &ldquo;Unity&rdquo; desktop interface" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sakamotokurome.github.io/posts/ubuntudesktop/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-08T15:32:08&#43;08:00" />
<meta property="article:modified_time" content="2022-03-08T15:32:08&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ubuntu Desktop"/>
<meta name="twitter:description" content="友邦拓 乌班图 During the first ten years of this HOWTO&rsquo;s life, I reported that from a new user&rsquo;s point of view, all Linux distributions are almost equivalent. But in 2006-2007, an actual best choice emerged: Ubuntu. While other distros have their own areas of strength, Ubuntu is far and away the most accessible to Linux newbies. Beware, though, of the hideous and nigh-unusable &ldquo;Unity&rdquo; desktop interface"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sakamotokurome.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Ubuntu Desktop",
      "item": "https://sakamotokurome.github.io/posts/ubuntudesktop/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Ubuntu Desktop",
  "name": "Ubuntu Desktop",
  "description": "友邦拓 乌班图 During the first ten years of this HOWTO\u0026rsquo;s life, I reported that from a new user\u0026rsquo;s point of view, all Linux distributions are almost equivalent. But in 2006-2007, an actual best choice emerged: Ubuntu. While other distros have their own areas of strength, Ubuntu is far and away the most accessible to Linux newbies. Beware, though, of the hideous and nigh-unusable \u0026ldquo;Unity\u0026rdquo; desktop interface",
  "keywords": [
    "Unix", "Linux", "Ubuntu"
  ],
  "articleBody": "友邦拓 乌班图\n During the first ten years of this HOWTO’s life, I reported that from a new user’s point of view, all Linux distributions are almost equivalent. But in 2006-2007, an actual best choice emerged: Ubuntu. While other distros have their own areas of strength, Ubuntu is far and away the most accessible to Linux newbies. Beware, though, of the hideous and nigh-unusable “Unity” desktop interface that Ubuntu introduced as a default a few years later; the Xubuntu or Kubuntu variants are better.\nEric Steven Raymond - How To Become A Hacker\n 学习 Linux 几点忠告 不要當“傳教士”\n(這點有一個重大弊端：開放軟體沒有商業軟件那樣的宣傳，如果使用者都如此低調，用戶群不會大幅擴展。)\n很多人在討論區不斷的引起的Linux對比Windows之類的討論，甚至爭的面紅耳赤，這是沒有必要的\n這種爭論是浪費時間而沒有任何用處的。對，你花了一下午，用許多事實“捍衛”了Linux比Windows好這個說法。但是Windows的支持者並不會喜歡上Linux的，他們只是稍微退縮一下，然後找一些新的證據來跟你辯論。\n世界上的人們都在利用Linux的研究最前沿的科學，我們還在這裡討論“要不要用Linux的這種無聊的問題，什麼時候才能趕上時代前進的步伐？\n什麼叫做Window支持者，什麼叫做Linux的支持者？我們為什麼要支持某一個而反對另外一個？你不需要為 Linux的護法，不需要成為 Linux的支持者“或者”GNU的傳教士“ GNU / Linux的已經用事實向世界證明了它們的威力，已經被大多數人接受。你只需要安安靜靜享受的GNU / Linux的給你的樂趣和自由。\n你需要關心的不是你的工具是什麼，而是你用它做了什麼。精通的Linux並不說明任何問題，因為它只是一個工具而已。如果你用的Windows能很好的完成你的任務，那你就沒有必要費時間去熟悉Linux操作系統。直到有一天你發現一項任務只有Linux操作系統才能完成的時候再換也不遲，因為你身邊的的Linux的愛好者一定會很樂意的幫助你。\n如果你在使用Linux操作系統的過程中對它產生了感情，那麼你應該明白那些習慣於使用Windows的人也會對Windows產生依賴。類似的爭論還有很多：微軟 Office Word和TeX，Emacs和Vim，Wolfram Mathematica和Maple，侏儒，fvwm的和KDE的時候，狗派… …和冷靜地對自己說：“我不站在它們任何一邊。”儘管這有些不容易辦到。\n各人的需要不同，生活的環境不同。對你來說好的東西，對別人來說不一定好，我們需要尊重別人的選擇。如果你當面說別人正在用的程序不好，沒有必要。\n不要強迫自己”\n喜歡電腦的人總是有某些心理強迫傾向。有的人說：“鍵盤比滑鼠快。我不要用滑鼠。這樣才有高效率。”所以他在編輯器裡無論什麼時候總是用20W的，大於 10J這樣的命令到達目的點。他甚至覺得圖形界面是多餘的，乾脆都不裝 Xwindow。\n全部用鍵盤看起來的確比讓手離開鍵盤去拿鼠標，再回來“快”多了，但是快的擊鍵頻率不等於工作的高效率，對你的健康更沒有什麼好處。這只能把你變成打鍵盤的機器。\n當你正在檢查你的文章或者程序，思維正在隨著字符的含義流動，突然為 20W，大於 10J這樣的東西出現在你的腦子裡，是不是會打斷思路？不？那說明你當時思考的問題比較簡單，這些干擾還不會起到副作用。\n其實很多人用電腦的時候，思想都受到某種教學的束縛，上面這個只是教多數種類中的一種。某些人創造了很多這種數學，用他的工作方式來要求別人，嘲笑方式跟他不一樣的人。比如有的人嘲笑其它人寫程序不按ç 8字符縮進，嘲笑別人在六裡用方向鍵，嘲笑別人不知道是什麼增值稅，嘲笑其它人用在Java，C＃這種由地方選區回收內存語言 … …\n你不用管各種各樣的教學，電腦只是你的工具，你想怎麼用就怎麼用。沒有人能夠約束你，沒有人可以嘲笑你的工作方式。電腦明天就不再是這個樣子，所以今天你不用完全了解它。你沒有必要知道別人創造的一切，因為你需要留點時間自己創造些東西。只要有樂趣！\n當你下次修改文章的時候，不妨試試悠閒的用滑鼠在你眼睛看到的地方輕輕點一下。\n 如果你發現自己有類似的強迫症，建議去諮詢一下心理醫生。\n 不要“玩”Linux\nLinux的很多人用的時候會感覺很迷茫，該用哪個發行版本呢？是不是我少裝了什麼？怎麼升級這麼快啊！怎麼這麼不穩定！每當遇到新的軟件他就想試用，每當新的版本出現，他就更新，然後用鼠標在新的菜單裡選擇從來沒見過的程序來用用。\n其實你是為了玩Linux而使用Linux操作系統的，而沒有找到正確的理由來利用Linux操作系統。你首先要明確用電腦的目的，你用它是為了解決你的實際問題，而不是為了學習安裝操作系統，不是為了測試哪個版本好用，不是為了“趕上潮流，更不是因為你硬盤太大了，你想多佔點空間。\n如果你啟動了電腦之後不知道應該幹什麼，那麼最好先不要用電腦，因為你可能有更重要的事情需要做。這沒什麼說的。\n不用挑剔發行版本\n很多人剛開始用linux的時候，總是在懷疑別的發行版本是否比自己正在用的這個好，總是懷疑自己以後什麼時候會失去支持，不得不換用別的發行。所以很多人今天是紅帽，明天又換成了Debian的，一會兒又是巴布亞… …甚至有的人在一台機器上裝了兩個版本的Linux操作系統，然後比較哪一個好。\n其實你完全沒有必要這樣做，任何發行，只要你熟悉了，你在上面的工作方式幾乎不會受到任何影響。我以前一直用的紅帽，當我有一天在我的一台新機器上安裝Debian時，我發現使用紅帽的經驗完全沒有浪費。我用了一個下午就配置好了Debian，使它服服貼貼的聽我的話，就跟沒有換發行版本一樣。\nDebian，拓林思，SuSE，紅帽，Gentoo… …任何一個版本都是不錯的。很多人認為自己攢一個 LFS的是高水平黑客的象徵，但是不是每個人都有精力去了解所有細節。\n不要盲目升級\n不知道這是心理作用還是什麼，有的人看到比較大的版本號，就會很想換成那個。很多人的Redhat的本來配置的很舒服了，可是一旦Redhat的發行新的版本，他們就會盡快下載過來，然後選擇升級安裝。結果很多時候把自己原來修改得很好的配置文件給沖掉了。新的軟件又帶來了新的問題，比如有一次我的rxvt的就升級到2.7.8跟miniChinput衝突了，升級到Redhat的8.0，xmms的發現居然缺省不能放了MP3播放，XFree86的是i810的模塊在啟動上有新的漏洞，Mozilla中，會導致突然退出。\n如果你已經配置好了一切，千萬別再整體升級了，這會浪費你很多很多時間的，不值得。有句話說得好：“如果沒有打破，不解決它。”如果你的程序能夠完成你需要做的事情，你何必升級呢？？？？\n 是的，不論是從論壇還是其他的地方反映出來的大部分都是這個問題，要么比较SUSE和Ubuntu的好，要么比Ubuntu或者Mandriva的好等等的言論。很多人還是把Linux操作系統看成了一個表面的東西。並沒有塌下心來學習 Linux系統。\n 不要配置你不需要的東西\n如果你只想做一個像我這樣的普通用戶，主要目的是用的Linux來完成自己的科研任務和日常工作，那就可以不用系統管理員或者網絡管理員的標準來要求自己，因為當一個系統和網絡管理員確實很辛苦。普通用戶學習那些不經常用到的複雜的維護系統的工具，其實是浪費時間，學了不用是會很快忘記的！\n我不是一個合格的網絡管理員，我的服務器都只設置了我自己需要的功能，設置好ssh連接的ftp已經足夠了，那樣可以省去我很多麻煩。我從來不過度考慮“安全，因為 Linux操作系統缺省已經很安全了。我沒有磁帶機，就不用管tar的那些稀奇古怪的參數了，czf，xzf，ztf已經可以滿足我所有的需要。桑達，awk的，…我也只會幾種常用的命令行。\n不要習慣的使用根帳號。在需要的時候才用！\n這是很多剛接觸的UNIX類操作系統的人常見的現象，他們不喜歡在管理系統的時候才用，而是一直用根帳號幹所有事情，配置系統，安裝程序，瀏覽網頁，玩遊戲，編程 … …\n結果有一天，他不小心在某個系統目錄使用了del * …後果不堪設想 … …\n不要用商業的眼光來看待Linux\nLinux不是商業軟件，所以不要用要求Solaris操作系統，視窗那樣的眼光來看 Linux操作系統。自由軟件的作者們從來不拉攏用戶，他們對用戶不負有任何責任。實際上在自由軟件的世界裡，開發者“和”用戶“並沒有明確的界限，大家是朋友。\n自由軟件很可能只是滿足作者和他的朋友的需要，甚至是為了好玩而創造的。自由軟件不是完美的，自由軟件承認自己有缺點，它不會自吹自擂，蒙蔽“用戶”的耳目。這種對作者責任的解脫激發了作者的創造力，他們不用過分考慮“向上兼容，他們往往比背上重重包袱的商業軟件結構更合理，技術更先進。\n所以當你用某個自由軟件遇到困難的時候，不應該埋怨軟件的作者，因為他們對你並沒有義務。你不應該把自己當成一個挑剔的顧客，而要把自己作為這個軟件的顧問和一個和藹的建議者，這樣你才能理解作者寫這個程序時的快樂，在遇到問題時向作者反映，幫助他完善這個軟件，成為一個快樂的參與者。就像你的哥哥送你一個他用舊了的自行車，你應該珍惜這份友情，而不要在車壞了，或者騎車摔了一跤的時候大罵你的哥哥。如果你真的不能使用這種合作的心態，那麼最好不要使用這個軟件。\n這是一種先進的文化，它包含了互相合作，科學創新的精神。理解這一點不是很容易，很多人往往是因為不能理解這種文化而離開自由軟件。這對於作者來說並沒有什麼損失。\n幹你的正事去\n很多人跟我說，你的網頁浪費我好多時間來配置這配置那，一會兒是fvwm的，一會兒是Mutt中… …\n嗯… …那些東西都是我有空的時候一點一點積累的，如果你想一次性搞定所有那些東西，恐怕得花你幾個星期甚至幾個月的時間！並不是一定要搞定所有這些東西你才能正常工作的。除非你真的非得利用某個程序，或者你閒著沒事，否則你可以不管這些東西。\n上面幾條僅供參考\n以上只是個人意見，不一定適合所有人。取捨由你了！\nSettings DNS GUI\n 打开设置窗口 如果你连接到了 WiFi 网络，点击“Wi-FI”标签栏。否则，如果你有一个有线连接，点击『Network』标签栏。 选择你要设置 DNS 的网络连接，并且点击齿轮状的按钮，打开网络管理器。 选择 IPv4 设置标签栏。 禁用自动开关，并且输入 DNS 的 IP 地址，用逗号隔开。我们使用 Google DNS 域名解析服务器。 点击“Apply”按钮，保存修改。  这个修改应该会立即有效，除非那些已经缓存了的 DNS 条目。如果你想切换回旧的设置，打开网络管理器，IPv4 设置，并且启用自动开关。\nCLI\n# 显示当前网络连接 $ nmcli connection show # 修改当前网络连接对应的DNS服务器，这里的网络连接可以用名称或者UUID来标识 $ nmcli con mod ens160 ipv4.dns \"114.114.114.114 8.8.4.4\" # 配置生效 $ nmcli con up ens160 或者\n# Config File $ vi /etc/netplan/01-network-manager-all.yaml network: version: 2 renderer: NetworkManager ethernets: ens3: dhcp4: no addresses: - 192.168.100.199/24 gateway4: 192.168.100.1 nameservers: address: [114.114.114.114, 8.8.4.4] wifis: ... # Apply the changes you made in the config file $ sudo netplan apply # To check if the system successfully applied the changes $ systemd-resolve --status | grep 'DNS Servers' -A2 DNS Servers: 114.114.114.114 8.8.8.8 8.8.4.4 注意：您系统上的文件可能缺少整个以太网或 wifi 部分。 在这种情况下，添加缺少的行，确保遵守示例中提供的缩进。\nTesting the Domain Name Resolution Speed\n$ time dig @114.114.114.114 Others  Bluetooth: OFF Formats: United States Blank screen: 10 Night Light: On Touchpad: OFF Fractional Scaling  SoftWare\u0026Updates software-properties-gtk or software-properties-kde (Kubuntu) and update-manager (Software Updator)\n  Ubuntu Software 栏 Download from 选择 USTC MIRRORS。\n  Other Software 栏下开启 Canonical Partner Repositories (The partner repositories offer access to proprietary and closed-source software)。\n  Ubuntu 自动下载并安装对你的系统至关重要的安全更新。而这个自动更新经常导致你“无法锁定管理目录”错误。在 Updates 栏下选择\n For other packages, subscribe to: All updates Automatically check for updates: Every two weeks When there are security updates: Download and Install automatically When there are other updates: Display immediately Notify me of a new Ubuntu version: For long-term support versions    更新系统:\n$ sudo apt update $ sudo apt upgrade $ sudo apt autoremove   Livepatch: 更新内核不需要 Reboot required 了\n$ sudo ua attach    Ubuntu Software \u0026 Update 卡在 cache refresh\n通过 apt update 可以看见是 Connecting to security.ubuntu.com Failed，解决办法是更改 /etc/hosts 文件添加其 IP，可通过 EASYCOUNTER 查找：\n## security.ubuntu.com 91.189.88.142 security.ubuntu.com 91.189.88.152 security.ubuntu.com 91.189.91.38 security.ubuntu.com 91.189.91.39 security.ubuntu.com ## archive.canonical.com 91.189.92.150 archive.canonical.com 91.189.92.191 archive.canonical.com 91.189.91.15 archive.canonical.com ## downloads.sourceforge.net 216.105.38.13 downloads.sourceforge.net ubuntu下如何获取源码包和源码\n  在 Software \u0026 Updates 中选中 Source code，不要 Reload，因为很慢，在命令行中 update。或者在软件源配置文件 /etc/apt/sources.list 中添加 deb-src 项。\n  获取 xxx 源码包的详细信息\n$ sudo apt-cache showsrc xxx   获取源码包，并将源码包解压到同名目录\n$ sudo apt-get source xxx   Upgrade Ubuntu version\n 打开 Software Updater 更新软件 打开 Software \u0026 Updates 选择 Updates 栏，在 Notify me of a new Ubuntu Version 中选择 For any new version 。 打开 Software Updater 更新到新 Ubuntu 版本。 使用 lsb_release -a 确认 Ubuntu 版本。  Input Method Editor 首先在 Language Support (gnome-language-selector，注意不要在终端中运行这个命令，因为环境不一样) 中下载语言包\nIBus ubuntu libpinyin 输入法支持云拼音，只需要开启就可以了。\n搜狗细胞词库\n到hslinuxextra下载sougou-phrases-full.7z。\n经过与ibus开发者协商，ibus-pinyin的词库查找规则做了一些更改，只要在词库目录（就是有一个.db文件的那个目录，一般是/usr/share/ibus-libpinyin/db/目录）把新词库复制过来并改名为local.db就可以使用了，如果感觉词库不好，直接删除掉local.db，就可以让ibus使用原来的词库。\n覆盖以后，你把ibus重启一下ibus-daemon -d -x -r，如果你能打出下面的这个词组，说明生效了：\n弗雷德霍姆行列式 这个词库，基于ibus原有的android词库文件，另外增加了搜狗的细胞词库。\nFcitx 4 在Ubuntu Wayland 桌面中使用fictx管理中文输入法\n$ sudo apt install fcitx -y 设置 fcitx：\n  在 Language Support 中选择 fcitx，全局应用，并恢复 ibus 自定义切换语言快捷键设置。\n  (可选）wayland桌面默认不读取/etc/profile中的环境变量，而是从/etc/environment文件中读取，这是导致fcitx不能正常工作的原因。\n$ sudo vim /etc/environment INPUT_METHOD=fcitx GTK_IM_MODULE=fcitx QT_IM_MODULE=fcitx XMODIFIERS=@im=fcitx   输入法框架：\n 搜狗输入法 for Linux 百度输入法Linux版 Google拼音  其他：\n 百度输入法不能安装用于更换皮肤的 fcitx-ui-qimpanel，否则乱码。需要手动安装 fcitx-libs，否则开机不自动启动。 在 fcitx 与 sogoupinyin 安装完之后，需要重启才能使用。  皮肤：\n fcitx 皮肤：/usr/share/fcitx/skin sogoupinyin 皮肤：/usr/share/sogou-qimpanel/skin。  旧：可以改名为 zip 解压 新：受版权保护    Fcitx 5 安装 配置工具 KDE 下使用 kde-config-fcitx5， Gnome 下使用 fcitx5-config-qt。\n20.04 (20220122) 官方仓库里没有 Gnome 的配置工具 kcm-fcitx5（内含 fcitx5-config-qt），因此通过 ppa:zhsj/fcitx5 来安装\n$ sudo add-apt-repository ppa:zhsj/fcitx5 $ sudo apt-get update $ sudo apt install fcitx5 fcitx5-chinese-addons 或者也可以通过**通过 flatpak 安装**。\n安装后在 Ubuntu 在 Language Support 里修改输入法系统为 fcitx5，记得点击 Apply System-Wide。\n安装报如下错\nE: Failed to fetch http://103.95.217.6/ppa.launchpad.net/zhsj/fcitx5/ubuntu/pool/main/f/fcitx5-chinese-addons/fcitx5-module-cloudpinyin_5.0.4-1~ubuntu20.04.1~ppa1_amd64.deb 503 Service Unavailable [IP: 103.95.217.6 80] E: Aborting install. 可以在浏览器中打开链接直接下载。\n肥猫百万大词库 Download latest version of “zhwiki.dict” from https://github.com/felixonmars/fcitx5-pinyin-zhwiki/releases\nCopy into ~/.local/share/fcitx5/pinyin/dictionaries/ (create the folder if it does not exist)\n可以在设置中看到是否启用，或者输入 “jinjinjin” 会出现 “鑫”。\nfcitx5 皮肤绘制简易教程 Tips 通过 Fcitx5 输入特殊字符\n将光标定位到任意一个输入框内，然后按下 Ctrl + Alt + Shift + U，然后输入 circle one，您将会看到多种形式的 ①。alpha, beta, sigma 等同理。\nemoji表情\nfcitx输入法自带的表情名都是英文的，而且以两个:包含住的，例如🌹（玫瑰rose），按下;后，输入🌹即可打出玫瑰的图标（更多内置图标名字见 Fcitx Configuration = Addons = Quick Phrase = Editor = emoji-eac)。\nRIME RIME/中州韵输入法引擎（Rime Input Method Engine），是一个跨平台的可高度定制的输入法算法框架。基于这个算法框架，Rime 開發者與其他開源社區的參與者在 Windows、macOS、Linux、Android 等平臺上創造了不同的輸入法前端實現。每个平台都有各自的名称：\n 【中州韵】 ibus_rime → Linux 【小狼毫】 Weasel → Windows 【鼠须管】 Squirrel → Mac OS X  在 Linux 下有两大主要的输入法支持框架：fcitx 和 IBus。\n fcitx 是 Free Chinese Input Toy for X 的简称。 IBus 是 Intelligent Input Bus 的简称。  Rime 二者都支持，有 ibus_rime 和 fcitx-rime 两个版本。值得注意的是，基于 Fcitx 输入法框架的 fcitx-rime 是第三方软件，由 Fcitx 团队开发和维护。\n# ibus $ sudo apt install ibus-rime # fcitx4 $ sudo apt install fcitx-rime # fcitx5〔方案選單〕  $ sudo apt install fcitx5-rime 按组合键 Ctrl+` 或 F4 键唤出输入方案选单，由此调整 Rime 输入〔方案選單〕 法最常用的选项。您可通过方案选单切换已经安装的输入方案。\n更多中州韵输入法配置，请阅读晦涩的官方文档：\n 用户指南 · rime/home Wiki 配置指南 · rime/home Wiki 方案設計書 · rime/home Wiki  必知必会  输入法代号：ibus_rime ibus 用户资料夹： ~/.config/ibus/rime/ fcitx 用户资料夹：~/.config/fcitx/rime fcitx5 用户资料夹：~/.local/share/fcitx5/rime 共享资料夹： /usr/share/rime-data/  共享资料夹包含预设输入方案的源文件。 这些文件属于 Rime 所发行软件的一部份，在访问权限控制较严格的系统上对用户是只读的，因此谢绝软件版本更新以外的任何修改—— 一旦用户修改这里的文件，很可能影响后续的软件升级或在升级时丢失数据。\n在「部署 Rime」操作时，将用到这里的输入方案源文件、并结合用户定制的内容来编译预设输入方案。\n「用户资料夹」数据说明\n用户资料夹则包含为用户准备的内容，如\n 〔全局設定〕 default.yaml 〔發行版設定〕 ibus_rime.yaml：定制外观一般情况下会在 .custom.yaml 文件中进行配置，Linux 下就是 ibus_rime.custom.yaml，macOS 下是 squirrel.custom.yaml，windows 下就是 weasel.custom.yaml 〔預設輸入方案副本〕 .schema.yaml ibus_rime.schema.yaml ※〔安裝信息〕 installation.yaml ※〔用戶狀態信息〕 user.yaml  编译输入方案所产出的二进制文件：\n 〔Rime 棱鏡〕 .prism.bin 〔Rime 固態詞典〕 .table.bin：由系统文本词库（一般以xxx.dict.yaml结尾）通过「重新部署/deploy」生成的固态词典（一般以xxx.table.bin结尾），这部份词库因为在输入过程是固定不変的，所以存在用大量的词彚，也不允许用戸来直接删除。 〔Rime 反查詞典〕 .reverse.bin  记录用户写作习惯的文件：\n ※〔用戶詞典〕 .userdb.kct：记录我们用戸输入习惯的用戸词典（一般以xxx.userdb.kct）结尾。这部份词库的词彚，正常情况下是由用戸输入的时候随时生成的；其词彚可以动态调整，数量理论上来说不会特别多，也允许用戸自行删除（shift+delete）。 ※〔用戶詞典快照〕 .userdb.txt、.userdb.kct.snapshot 見於同步文件夾  以及用户自己设定的：\n ※〔用戶對全局設定的定製信息〕 default.custom.yaml ※〔用戶對預設輸入方案的定製信息〕 .custom.yaml ※〔用戶自製輸入方案〕及配套的詞典源文件  注：以上标有 ※ 号的文件，包含用户资料，您在清理文件时要注意备份！\n关于配置的位置问题\n要更改輸入方案裏面的選項，給輸入方案打補靪；\n要更改全局選項，給 default.yaml 打補靪；\n要更改「小狼毫」專屬的選項，如界面樣式，給 weasel.yaml 打補靪。\n總地來說規則是：要修改的配置項在 x(.schema).yaml 裏，就編輯 x.custom.yaml 打補靪。\n定制 定制指南 当用户需要对 Rime 中的各种设定做小幅的调节，最直接、但不完全正确的做法是：编辑「共享资料夹」中那些 .yaml 文档（/usr/share/rime-data/ ）。\n这种方法有很大缺陷：\n 当 Rime 软件升级时，也会升级各种设定档、预设输入方案。用户编辑过的文档会被覆盖为更高版本，所做调整也便丢失了。 软件升级后，你不能将备份文件直接覆盖升级后的文件。这将失去本次升级所新增和修复的功能。唯一的方法是，重新编辑升级后的文件。  因此，对于随 Rime 发行的设定档及预设输入方案，推荐的定制方法是：\n在「用户资料夹」下创建 .yaml 定制文档；比如\n default.yaml 的定制文件名为 default.custom.yaml luna_pinyin 的定制文件名为 luna_pinyin.custom.yaml luna_pinyin_simp 的定制文件名为 luna_pinyin_simp.custom.yaml symbols.yaml 的定制文件名为 symbols.custom.yaml  规范为在文件名主体（ID）和 .yaml 之间增加次级扩展名 .custom。定制文档的书写格式为：\npatch: \"一级设定项/二级设定项/三级设定项\": 新的设定值 \"另一个设定项\": 新的设定值 \"再一个设定项\": 新的设定值 \"含列表的设定项/@n\": 列表第n个元素新的设定值，从0开始计数 \"含列表的设定项/@last\": 列表最后一个元素新的设定值 \"含列表的设定项/@before 0\": 在列表第一个元素之前插入新的设定值（不建议在补丁中使用） \"含列表的设定项/@after last\": 在列表 \"一级设定项/二级设定项/三级设定项\": 新的设定值最后一个元素之后插入新的设定值（不建议在补丁中使用） \"含列表的设定项/@next\": 在列表最后一个元素之后插入新的设定值（不建议在补丁中使用） 就是这样：patch 定义了一组「补丁」，以源文件中的设定为基础，写入新的设定项、或以新的设定值取代现有设定项的值。\n每次修改配置文件，你需要重新部署来生效。\n重新部署的操作方法\n  点击输入法的程序指示器，选择「部署」\n  点击输入法状态栏上的 ⟲ (Deploy) 按钮。如果找不到状态栏，在终端输入以下命令，可触发自动部署：\n# ibus $ rm ~/.config/ibus/rime/default.yaml; ibus-daemon -drx   定制每页候选数 Rime 中，默认每页至多显示 5 个候选项，而允许的范围是 1〜9（个别 Rime 发行版可支持 10 个候选）。\n设定每页候选个数的默认值为 9，在用户目录建立定制文档 ：\n$ vi ~/.config/ibus/rime/default.custom.yaml patch: \"menu/page_size\": 9 重新部署即可生效。\n注意！ 如果 default.custom.yaml 里面已经有其他设定内容，只要以相同的缩进方式添加 patch: 以下的部分，不可重复 patch: 这一行。\n定制方案选单 $ vi ~/.config/ibus/rime/default.custom.yaml patch: # 對於列表類型，現在無有辦法指定如何添加、消除或單一修改某項，於是要在定製檔中將整個列表替換！ schema_list: - schema: luna_pinyin - schema: cangjie5 - schema: luna_pinyin_fluency - schema: luna_pinyin_simp # 這樣就啓用了未曾有過的高級輸入方案！其實這麼好的方案應該排在最前面哈。 - schema: my_coolest_ever_schema 调整方案候选顺序，增加输入法方案，或者通过 # 注释内容将不用的方案移除候选菜单。\n重新部署生效。\n定制字体字号 GNOME 桌面可以使用扩展 IBus Tweaker。\n$ vi ~/.config/fcitx/rime/default.custom.yaml patch: # 字體名稱，從記事本等處的系統字體對話框裏能看到 \"style/font_face\": \"明兰\" # 字號，只認數字的，不認「五號」、「小五」這樣的 \"style/font_point\": 16 横排与竖排候选码 在ibus_rime.custom.yaml添加如下内容：\npatch: style/horizontal: true 定制皮肤 Rime 中，输入法的显示效果称为「颜色主题」(color scheme)。在网上看到一个有趣的主题，如何添加到 Rime 中使用呢？假如我们要加入这里提供的「丹青」主题，在系统 custom 设置文件 (即 ibus_rime.custom.yaml) 中加入以下配置即可：\n# 在配色方案列表裏加入標識爲 tantsing 的新方案 \"preset_color_schemes/tantsing\":  author: Mijiag back_color: 0xE3E3E3 border_color: 0x000000 candidate_text_color: 0x000000 comment_text_color: 0x474747 hilited_back_color: 0x1A0791 hilited_candidate_back_color: 0x6F0B73 hilited_candidate_text_color: 0xE3E3E3 hilited_text_color: 0xE3E3E3 name: \"丹青/Tantsing\" text_color: 0x000000 引用该主题的时候，使用名字 tantsing：\n# squirrel.custom.yaml patch: style: color_scheme: tantsing horizontal: true inline_preedit: true font_point: 16 corner_radius: 5 candidate_format: \"%c\\u2005%@ \\u2005\" 如果要自己制作 Rime 主题，「Rime 西米」是一款网页端工具，可以辅助制作，实时渲染颜色，便于查看最终显示效果。这里有一些预定义的主题可供使用。\n输入符号 符号文件 /usr/share/rime-data/symbols.yaml 开头已经说明了使用方法：\n# Usage: patch your Rime schema to enable /X symbols: # patch: # punctuator/import_preset: symbols # recognizer/patterns/punct: '^/([0-9]0?|[A-Za-z]+)$' 想在朙月拼音·简化字 luna_pinyin_simp 方案下输入符号，就新建 luna_pinyin_simp.custom.yaml：\npatch: punctuator/import_preset: symbols recognizer/patterns/punct: '^/([0-9]0?|[A-Za-z]+)$' 重新部署生效。\n输入符号请键入识别码：\n 星号 /xh 箭头 /jt 數字 /1 更多符号参阅文件 symbols.yaml。  其他方案下输入符号，照葫芦画瓢。\n符号自定义 拷贝 /usr/share/rime-data/symbols.yaml 为 ~/.config/ibus/rime/symbols.custom.yaml。在末尾添加自定义符号：\n# 个人常用信息 '/yx': [ xiaoming@gmail.com, xiaoming@163.com, 1234567910 ] # 快速输入勾和叉  '/gc': [ ✓, ☑, ✗, ☒ ] 想在朙月拼音·简化字 luna_pinyin_simp 方案下输入符号，就修改 luna_pinyin_simp.custom.yaml 文件内容为：\npatch: punctuator/import_preset: symbols.custom recognizer/patterns/punct: '^/([0-9]0?|[A-Za-z]+)$' 重新部署生效。\n然后在中文模式下，输入 /gc，就会显示出自定义的符号，输入对应的数字，符号就会上屏。\n输入直角引号 有的人喜欢在写作的时候使用直角引号：「」和『』，Rime 在 symbols.yaml 里面，已经提供了这个功能，不过是在 [ 和 ] 按键上提供的，中文输入法状态下，按下[ (])，返回的结果中包含 「 (」)，如果按住 Shift 键，按下 [ (])，返回的结果中包含 『 (』)。\n但是因为这毕竟是引号，最好是按下引号的时候，能够输出直角引号，在symbols.custom.yaml 中，找到 punctuator 部分下的 hafl_shape (半角的意思)下面，把下面的映射\n'''' : { pair: [ '‘', '’' ] } '\"' : { pair: [ '“', '”' ] } 改成\n'''' : { pair: [ '『', '』' ] } '\"' : { pair: [ '「', '」' ] } 这样就可以直接输入直角引号了，另外一种方式就是在词典中添加直角引号映射，在jdhao.dict.yaml 中加入下面的映射即可：\n「」\tsyh\t1000 『』\tdyh\t1000 朙月拼音·简化字扩展词库  朙（míng）同“明”\n 下载词库，将下面几个文件的 luna_pinyin 修改为朙月拼音·简化字 luna_pinyin_simp：\nluna_pinyin.hanyu.dict.yaml luna_pinyin.poetry.dict.yaml luna_pinyin.cn_en.dict.yaml luna_pinyin.extended.dict.yaml 文件名和文件内容都需要同步修改。比如 luna_pinyin_simp.extended.dict.yaml，并同步修改文件内的方案 ID。\nimport_tables: - luna_pinyin - luna_pinyin_simp.hanyu - luna_pinyin_simp.poetry - luna_pinyin_simp.cn_en 接着将四个文件移动到用户资料夹 ~/.config/ibus/rime 下。\n其后，将 luna_pinyin.custom.yaml 中的内容添加到 luna_pinyin_simp.custom.yaml 中。\npatch: punctuator/import_preset: symbols recognizer/patterns/punct: '^/([0-9]0?|[A-Za-z]+)$' # 載入朙月拼音擴充詞庫 translator/dictionary: luna_pinyin_simp.extended # 改寫拼寫運算，使得含西文的詞彙（位於 luna_pinyin.cn_en.dict.yaml 中）不影響簡拼功能（注意，此功能只適用於朙月拼音系列方案，不適用於各類雙拼方案） # 本條補靪只在「小狼毫 0.9.30」、「鼠鬚管 0.9.25 」、「Rime-1.2」及更高的版本中起作用。 speller/algebra/@before 0: xform/^([b-df-hj-np-tv-z])$/$1_/ 重新部署生效。\n其他扩展词库，xiaoTaoist 制作的词库扩展包，GitHub 地址。\n增加自己的词库 我们可以仿照上一步的词典文件建立自己额外的词典，增加自己的词汇。例如，建立名为 my.dict.yaml 的文件，然后参照 luna_pinyin_simp.cn_en.dict.yaml 添加几个自己常用的词汇，文件内容如下：\n# my.dict.yaml 文件内容 # Rime dictionary # encoding: utf-8 # --- name: my version: \"2020.05.28\" sort: by_weight use_preset_vocabulary: true ... GitHub\tgithub\t100 Stack Overflow\tso\t1000 词典的格式为: 词汇编码词频，各个项目之间必须用 Tab（也就是制表符 ）分割。一个最保险的方法就是，复制粘贴。词频部分可以不要。\n然后在 luna_pinyin_simp.extended.dict.yaml 的 import_tables 中加上自己建立的词汇。\nimport_tables: - luna_pinyin - luna_pinyin_simp.hanyu - luna_pinyin_simp.poetry - luna_pinyin_simp.cn_en - my 一切添加妥当之后，重新部署生效。\n导入其他词库 以导入词库 fcitx5-pinyin-zhwiki-rime 和 fcitx5-pinyin-moegirl-rime 为例.\n提示： 将自定义词库放入~/.local/share/fcitx5/rime/亦可,文件名(文件名.dict.yaml)应与词库名统一(词库格式)\n1.更改~/.local/share/fcitx5/rime/luna_pinyin.custom.yaml文件(以luna_pinyin为例,其余输入方案修改方案名即可)\n$ vim ~/.local/share/fcitx5/rime/luna_pinyin.custom.yaml # 文件中“patch:”应只存在一个,若已存在只需粘贴后面的代码 # 此文件用于修改特定输入方案,把上方的luna_pinyin改为其它输入方案名即可完成对其它输入方案的修改 patch: \"translator/dictionary\": extended #词典名字可自定义,与下方文件名保持一致即可 2.新建~/.local/share/fcitx5/rime/extended.dict.yaml文件\n提示： 导入自定义词库只需将词库名添加到“import_tables:”之后\n$ vim ~/.local/share/fcitx5/rime/extended.dict.yaml # 以下禁用了默认词库同时不启用默认的“八股文”词库及词频系统,如果您不希望候选词中的出现繁体字、方框字的话 --- name: extended version: \"2021.02.19\" sort: by_weight use_preset_vocabulary: false #是否启用默认的“八股文”词库及词频系统,如需启用请设为 true 。 import_tables: # - luna_pinyin #默认词库,如需启用请取消注释 - zhwiki - moegirl # - 自定义词库名 ... 朙月拼音·简化字默认英文 如果经常和英语打交道，偶尔输入汉字，可以把朙月拼音初始状态设为英语，需要时再切回中文。参考 这里 给出的说明，在 luna_pinyin_simp.custom.yaml 文件中加入下面的设置：\npatch: \"switches/@0/reset\": 1 # 初始的 ascii mode 设置为「西文」 模糊拼音 这里是官方给的一个模板 （朙月拼音）。将模板剪贴进 ~/.config/ibus/rime/luna_pinyin_simp.custom.yaml 文件中，然后需要哪组就去掉那一行前面的 # 即可。\n# luna_pinyin.custom.yaml # # 【朙月拼音】模糊音定製模板 # 佛振配製 :-) # # 位置： # ~/.config/ibus/rime (Linux) # ~/Library/Rime (Mac OS) # %APPDATA%\\Rime (Windows) # # 於重新部署後生效 # patch: 'speller/algebra': - erase/^xx$/ # 第一行保留 # 模糊音定義 # 需要哪組就刪去行首的 # 號，單雙向任選 #- derive/^([zcs])h/$1/ # zh, ch, sh = z, c, s #- derive/^([zcs])([^h])/$1h$2/ # z, c, s = zh, ch, sh #- derive/^n/l/ # n = l #- derive/^l/n/ # l = n # 這兩組一般是單向的 #- derive/^r/l/ # r = l #- derive/^ren/yin/ # ren = yin, reng = ying #- derive/^r/y/ # r = y # 下面 hu  f 這組寫法複雜一些，分情況討論 #- derive/^hu$/fu/ # hu = fu #- derive/^hong$/feng/ # hong = feng #- derive/^hu([in])$/fe$1/ # hui = fei, hun = fen #- derive/^hu([ao])/f$1/ # hua = fa, ... #- derive/^fu$/hu/ # fu = hu #- derive/^feng$/hong/ # feng = hong #- derive/^fe([in])$/hu$1/ # fei = hui, fen = hun #- derive/^f([ao])/hu$1/ # fa = hua, ... # 韻母部份 #- derive/^([bpmf])eng$/$1ong/ # meng = mong, ... #- derive/([ei])n$/$1ng/ # en = eng, in = ing #- derive/([ei])ng$/$1n/ # eng = en, ing = in # 樣例足夠了，其他請自己總結…… # 反模糊音？ # 誰說方言沒有普通話精確、有模糊音，就能有反模糊音。 # 示例爲分尖團的中原官話： #- derive/^ji$/zii/ # 在設計者安排下鳩佔鵲巢，尖音i只好雙寫了 #- derive/^qi$/cii/ #- derive/^xi$/sii/ #- derive/^ji/zi/ #- derive/^qi/ci/ #- derive/^xi/si/ #- derive/^ju/zv/ #- derive/^qu/cv/ #- derive/^xu/sv/ # 韻母部份，只能從大面上覆蓋 #- derive/^([bpm])o$/$1eh/ # bo = beh, ... #- derive/(^|[dtnlgkhzcs]h?)e$/$1eh/ # ge = geh, se = sheh, ... #- derive/^([gkh])uo$/$1ue/ # guo = gue, ... #- derive/^([gkh])e$/$1uo/ # he = huo, ... #- derive/([uv])e$/$1o/ # jue = juo, lve = lvo, ... #- derive/^fei$/fi/ # fei = fi #- derive/^wei$/vi/ # wei = vi #- derive/^([nl])ei$/$1ui/ # nei = nui, lei = lui #- derive/^([nlzcs])un$/$1vn/ # lun = lvn, zun = zvn, ...  #- derive/^([nlzcs])ong$/$1iong/ # long = liong, song = siong, ... # 這個辦法雖從拼寫上做出了區分，然而受詞典制約，候選字仍是混的。 # 只有真正的方音輸入方案纔能做到！但「反模糊音」這個玩法快速而有效！ # 模糊音定義先於簡拼定義，方可令簡拼支持以上模糊音 - abbrev/^([a-z]).+$/$1/ # 簡拼（首字母） - abbrev/^([zcs]h).+$/$1/ # 簡拼（zh, ch, sh） # 以下是一組容錯拼寫，《漢語拼音》方案以前者爲正 - derive/^([nl])ve$/$1ue/ # nve = nue, lve = lue - derive/^([jqxy])u/$1v/ # ju = jv, - derive/un$/uen/ # gun = guen, - derive/ui$/uei/ # gui = guei, - derive/iu$/iou/ # jiu = jiou, # 自動糾正一些常見的按鍵錯誤 - derive/([aeiou])ng$/$1gn/ # dagn = dang  - derive/([dtngkhrzcs])o(u|ng)$/$1o/ # zho = zhong|zhou - derive/ong$/on/ # zhonguo = zhong guo - derive/ao$/oa/ # hoa = hao - derive/([iu])a(o|ng?)$/a$1$2/ # tain = tian # 分尖團後 v = ü 的改寫條件也要相應地擴充： #'translator/preedit_format': # - \"xform/([nljqxyzcs])v/$1ü/\" 同步用户资料 默认地，词典快照备份到 ~/.config/ibus/rime/sync/UUID 这个地方。我们可以设定同步的目标文件夹，直接编辑 ~/.config/ibus/rime/installation.yaml：\nsync_dir: '/DATA/Backup/RimeSync' 然后，点击输入法程序指示器选择「同步」。你的 用户配置、用户词库 等都会被放在目标文件夹。\n 注意！可能有些你自己添加的文件不会被备份，注意下就行。\n 我们可以借助移动存储设备，或在线存储服务如百度网盘、坚果云等，在多台电脑及不同系统之间同步用户词典和用户设定。在新电脑上配置一下 installation.yaml 文件，执行 部署 - 同步 - 部署 ，你的 用户配置、用户词库 都回来了。\n新世纪五笔 参阅 https://github.com/GuoBinyong/wubixinshiji。Rime输入法之五笔自动上屏。\n后续配置来自视频 rime 中的小狼毫输入法的安装和基础自定义 所分享的文件： https://www.lanzous.com/ia2g86h。\nEasy english 用于输入英文。拷贝下面两个文件到「用户资料夹」：\n easy_en.schema.yaml easy_en.dict.yaml  vim default.custom.yaml 添加输入方案：\nschema_list: - schema: wubixinshiji  # 新世纪五笔 - schema: wubixinshiji_pinyin  # 新世纪五笔·拼音 - schema: luna_pinyin_simp  # 朙月拼音·简化字 - schema: easy_en - schema: pinyin_simp  # 袖珍简化字拼音 输入日期 将文件 rime.lua 拷贝到 ~/.config/ibus/rime/ 下，在方案配置文件比如 wubi86.schema.yaml 的 engine\\translators: 下面添加滤镜引用：\ntranslators: - lua_translator@date_translator - lua_translator@week_translator 安装表情 emoji Rime 提供了很多表情，地址在 这里\n东风破是 Rime 的配置管理器和输入方案存储库。 仓库地址和介绍见： rime/plum: 東風破，使用如下命令安装 emoji，\nrime-install emoji 然后，使用下面的命令给输入方案打 patch，我使用的输入方案是 luna_pinyin_simp，所以参考 这里 的命令：\nbash rime-install emoji:customize:schema=luna_pinyin_simp 这样才会 patch 成功，这时，位于 %appdata%/rime 目录下的luna_pinyin_simp.custom.yaml 文件中会增加以下配置：\n__patch: # Rx: emoji:customize:schema=luna_pinyin_simp { - patch/+: __include: emoji_suggestion:/patch # } 然后重新部署，emoji 添加成功了！\n切换中英文 切换中英文，rime在默认情况下，输入中文时按shift键会切换为英文，但字符还在，需要按回车输出字符，有的用户可能不习惯shift这个键位，或者不习惯按shift不直接上屏，还要按一下回车，对此，我们可以做出修改 default.custom.yaml：\npatch: ascii_composer/good_old_caps_lock: true ascii_composer/switch_key: Caps_Lock: clear Shift_L: commit_code Shift_R: inline_ascii Control_L: noop Control_R: noop 注意换行前空格以及冒号后的空格，还有字母大小写，前两行代码先不看，下面五行分别代表：\n caps_lock即为大写键，shift_L即为左shift，R是右，control_L即为左ctrl键，R为右 冒号后的字符即为这个键位的操作  clear表示按下此键后已输入的字符清除，同时rime输入状态切换为英文，大写键一定不能改为noop，否则大写英文将会无法输出，很多教程里都改为了noop，这点值得注意 commit_code即为提交代码，就是将已输入的字符上屏，同时输入法切换为英文 inline_ascii即为插入字符，就是已输入的字符为上屏前，按此键后输入法转为英文，可以接着输入，回车键再上屏 noop就是这个键在输入法里不会有任何操作    各个键位和代码的意思已经介绍完了，可以按自己的喜好，自行修改。\n不过仍有部分用户从win7开始是用的ctrl键+空格键切换中英文，且习惯输入法为默认英文。RIME的快捷键是在“default.yaml”文档中定义的，我们可以将“default.yaml”文档中相关代码直接复制过来，接上面代码：\nkey_binder: bindings: - {accept: \"Control+Shift+2\", toggle: ascii_mode, when: always} 注意到“ascii_mode了”吗，“字符模式”即为我们需要的中英文切换快捷键，默认快捷键为ctrl+shift+2，我们可以将其代码修改为Control+space即为ctrl+空格，注意大小写，这样我们就能让输入法默认英文同时用回习惯的操作\n至此，关于“default.yaml”的设置基本完成，样例如下：\npatch: ascii_composer/good_old_caps_lock: true ascii_composer/switch_key: Caps_Lock: clear Shift_L: noop Shift_R: noop Control_L: noop Control_R: noop key_binder/bindings: - { when: always, accept: Control+space, toggle: ascii_mode } - { when: has_menu, accept: minus, send: Page_Up } - { when: has_menu, accept: equal, send: Page_Down } 注意：如果没有Page_Up，Page_Down两行，就没办法用 + 与 - 进行翻页了。\n下面我们开始对“luna_pinyin.custom.yaml”进行修改\nrime默认先输入中文，但是有些用户可能习惯默认英文，在“luna_pinyin.custom.yaml”文档里，我们可以进行如下修改（定制简化字输出）：\npatch: \"switches/@0/reset\": 1 意思就是將 switcher 列表中的第一個元素（即 ascii_mode 開關）的初始值重設爲狀態1（即「英文」）。\n四叶草拼音输入方案 下载 rime-cloverpinyin 最新版本（如clover.schema-build-1.1.4.zip）输入方案（配置方案），解压到用户资料夹\n在用户资料夹下创建 default.custom.yaml ，内容为\npatch: \"menu/page_size\": 8 schema_list: - schema: clover 其中 8 表示打字的时候输入面板的每一页的候选词数目，可以设置成 1~9 任意数字。\n写好该文件之后，点击右下角托盘图标右键菜单，点“重新部署”，然后再点右键，在方案列表里面应该就有“ 🍀️四叶草拼音输入法”的选项了。\nAutomatically switch wallpapers Apps  Shotwell：在侧边栏 Photos 中 Ctrl + A，在菜单栏 File 中选择 Set as Desktop SlideShow…；这会把图片复制到 .local/share/shotwell/wallpaper，并在该目录生成 wallpaper.xml，wallpaper.xml 定义自动切换壁纸动画。 替代软件：BingWall 等。 脚本分享：styli.sh、lswc 动态壁纸：komorebi、LiveWallpaper  Variety 默认仓库版本可能较低，导致一些 Bug，因此最好用 PPA\n$ sudo add-apt-repository ppa:variety/stable $ sudo apt update $ sudo apt install variety -y 支持 wallhaven，添加 keywords 就可以使用了，配置文件在 ~/.config/variety/variety.conf ：\n Touhou Azur Lane Genshin Impact anime girls cosplay GUWEIZ WLOP  unsplash.sh   gsettings set org.gnome.desktop.background picture-uri file://$HOME/Wallpaper\n  添加脚本\n$ vi $HOME/.unsplash.sh #!/bin/bash SAVE_DIR=$HOME/DataOne/Unsplash FILE_NAME=daily$(date '+%Y%m%d').jpeg wget -O $SAVE_DIR/$FILE_NAME https://source.unsplash.com/1920x1080/daily cp $SAVE_DIR/$FILE_NAME $HOME/Wallpaper 在 Unsplash Source 查看更多 API。\n  crontab -e\n0 12 * * * /home/vane/.unsplash.sh   除了使用 crontab 外，还可以使用 Startup Applications Preferences 添加一个启动项。\n  wallhaven.sh wallhaven图片右键下载的是原图，不是缩略图。\n  gsettings set org.gnome.desktop.background picture-uri $HOME/Wallpaper\n一般文件内容开头都会有一个文件类型的标记，根据文件名后缀只是一个快捷的方法，不用读取文件内容就判断文件类型，但不是唯一的方法。\n  vi $HOME/.wallhaven/wallhaven.sh\n#!/bin/bash  WORK_DIR=$HOME/.wallhaven SAVE_DIR=$HOME/Pictures/wallhaven IMG_URL=https://w.wallhaven.cc/full function GetListing() { echo 'get listing' listing=$(curl https://wallhaven.cc/api/v1/search?apikey=\u0026categories=010\u0026purity=111\u0026atleast=1920x1080\u0026ratios=16x9\u0026sorting=random\u0026order=desc\u0026page=1) echo 'save listing' echo $listing | jq -r '.data[].path' | awk -F '/' '{print $NF}'  $WORK_DIR/listing echo 'save res' cat $WORK_DIR/listing | wc -l  $WORK_DIR/res SetWallpaper } function SetWallpaper() { if [ -a $WORK_DIR/res ]; then echo 'read res' read res if [ $res -ne 0 ]; then echo 'get img' img=$(cat $WORK_DIR/listing | tail -${res} | head -1) echo \"down $imgfrom $IMG_URL/${img:10:2}/$img\" curl -o $SAVE_DIR/$img $IMG_URL/${img:10:2}/$img if [ $? -eq 0 ]; then echo 'set wallpaper' cp $SAVE_DIR/$img $HOME/Wallpaper echo 'res-1' echo $(($res - 1))  $WORK_DIR/res echo 'exit' exit 0 else echo 'download error' SetWallpaper fi else echo 'res=0' GetListing fi else echo 'no res' GetListing fi } SetWallpaper 使用 Shell 脚本来处理 JSON，jq Manual，wallhaven API v1 Documentation\n  crontab -e\n0 12 * * * /home/vane/.wallhaven/wallhaven.sh Gsettings 无法在 Cron 中使用：出现此问题是因为 cron 仅使用一组非常有限的环境变量。 唯一一个负责在将其设置为 cron 作业时以正确方式运行问题脚本的环境变量是 DBUS_SESSION_BUS_ADDRESS。\n  astronomy.sh #!/bin/bash API_KEY=zTL5rJmctXwHcsjfCSalfDRNFTeaVYa9FxgINVVU HTTP_REQUEST=https://api.nasa.gov/planetary/apod?api_key=$API_KEY HTTP_RESPONSE=$(curl $HTTP_REQUEST) IMG_HDURL=$(echo $HTTP_RESPONSE | jq -r '.hdurl') IMG_FILENAME=$(echo ${IMG_HDURL##*/}) curl -o $HOME/DataOne/Images/Astronomy/$IMG_FILENAME $IMG_HDURL cp -av $HOME/DataOne/Images/Astronomy/$IMG_FILENAME $HOME/Wallpaper Social Telegram 先通过手机登录，再在电脑端登录。电脑先登录，手机老是收不到验证码。\n简介   Telegram —— 中文名又称\"电报\"，或简称\"TG\"。\n  Telegram 是跨平台的即时通信软件，其客户端是自由及开放源代码软件，但服务器是专有软件。\n  Telegram 在中国大陆境内无法直接连接，注册和使用都需要科学上网，请自备节点和工具。\n  下载：Telegram 有官方版和第三方版本，但出于安全和隐私的考虑，推荐大家使用 Telegram 官方版客户端\n  推荐设置  Privacy and Security  Phone Number  谁能看见我的手机号码：Nobody 谁能通过手机号码找到我：My Contacts   Forwarded Messages：Nobody Calls：Nobody Groups：My Contacts   Local Passcode：本地密码只是本设备打开 Telegram 的应用密码 Two-Step Verification：为了账号安全，强烈推荐您设置两步验证密码。 Delete my account：推荐您设置为一年  隐私保护注意事项  资料设置  昵称及用户名：避免使用与其他社交平台相同或相似的昵称及用户名 手机号码：在\"设置——隐私——电话号码\"中设置\"不允许任何人查看我的手机号码\"和\"仅允许联系人通过手机号码找到我\"。   群组聊天：Telegram 的群聊是\"不安全\"的。 公开群组的所有聊天内容都可被其他人查看，即使他人并未注册 Telegram； 对于群组内的机器人，它们可以收集群组内的绝大部分消息。 媒体文件：在分享照片时，请注意使用专业修图软件打码处理关键信息，并清除照片包含的地理位置信息 分享链接：从其他平台分享内容至 Telegram 时，请注意清除分享链接中的用户 UserID 识别信息，他人完全有可能从您的分享链接中获取您的用户信息。 第三方客户端：如无特殊需要，请使用官方 Telegram 客户端。第三方客户端有能力获取和控制您的账户，读取您全部的聊天记录，收集您设备的可识别信息，包括但不限于：手机号、设备型号、IMEI码、MAC码等。  常见问题及解答  无法给他人发送私聊：“Sorry, you can only send messages to mutual contacts at the momet.”  @SpamBot But I can’t message non-contacts！ No，I’ll never do any of this   群组和频道有什么类型？有什么特点？  群组(Group)或者频道(Channel)有两种类型。  一种是公开群组(Public Group/Channel) 一种是私有群组(Private Group/Channel)   公开群组(Public Group/Channel) 有自定义设置的ID，所有人可以通过搜索功能，输入id查询到相应的群组。公开群组的历史消息对所有人可见，即使没加入公开群组，也可以查看群组历史消息。 私有群组(Private Group/Channel) 没有自定义的ID，要加入只能通过点击邀请链接或者被邀请入群， 在私有群组，群主可以设定历史消息的可见性。而对于没有加入群组的人，则不可以查看群组的消息。   Telegram 用户名是什么？  其他用户可以通过用户名找到您，您将出现在“全局结果”下的联系人搜索中。这样人们就可以在不知道您的电话号码的情况下通过 Telegram 与您联系。 由于用户名的唯一性，可以防止他人盗用你的头像和昵称冒充你。   如何添加联系人？：添加和删除联系人都是单向操作，对方设备并不会同步。 添加非手机号码联系人后，对方能知道自己的手机号码吗？：如果想取消分享你的手机号，请到隐私设置(Privacy and Security)中找到手机号码(Phone Number)的设置，在里面移除对方即可。 不登陆 Telegram 如何查看频道消息？：Telegram 公开频道可以直接通过浏览器输入 https://t.me/s/频道id 访问，不需要拥有TG账号。  进阶知识 什么是 MTProxy 代理？\n MTProxy 是 Telegram 的官方项目，仅能用于代理 Telegram 软件 MTP 代理是在 Telegram 中内置的代理程序，可以直接在软件内配置，而不需要下载任何其他 App 来配置代理  主题与美化 美化主题频道\n 官方 Desktop 桌面版主题频道 @themes 官方 Android 安卓主题频道 @Androidthemes  Sticker Pack 用现成的图片集来制作 stickers pack。Linux 可以方便地使用 ImageMagick 来操作。\nTelegram 要求 Sticker 图片为 PNG 格式，并且要有透明层，至少一边为 512 像素，另一边则不超过 512 像素。最大文件大小为 350KB。透明层就算了，我不会玩 PS。那么直接偷懒(死)来批量把当前目录下 JPG 和 PNG 混杂的图片们统一转换为 PNG 好了。\n几条命令发给 stickers bot：\n /newstickerpack 发送表情包的名字… 在内置的 emoji 中发送一个最符合你要发送图片的表情… 然后把对应的图片作为文件发送 如果还有其他图片的话重复 3-4 全部表情图片设置完毕，发送 /publish 命令 为你的 stickers pack 取一个短名字 (用于 URL)  在Telegram上使用EFB同时推送QQ与微信消息 众所周知,待机耗电两巨头皆出自TX,但其对于工作人群和大学生而言又是不可或缺的通讯手段.Telegram作为一款合格的IM支持Android众多特性(TX出来挨打),通知栏回复、消息再提醒、自定义震动以及最关键的FCM推送(FCM的特性和优势可以在Google上查询).使用插件利用Telegram来完成QQ微信的消息代收是目前Android系统较优秀的解决方案\n事前准备 物品准备\n 墙外VPS一枚 Telegram账号一枚 稳定的飞机 Xshell(注意不要下载成苏杰马克丁版)/PUTTY 可联网设备一枚,推荐电脑 基本的Linux和vim知识  本教程基于EFB v2.0.0, efb-qq-slave v2.0.0b2, efb-wechat-slave v2.0.0制作,方案为MASTER SLAVE处于同一系统且QQ微信各使用一个 Bot ,使用 Debian 10\n获取 Telegram ID\n向 @get_id_bot 发起会话,击 /start 即可获得你的 Telegram ID\n使用EFB转发微信消息 申请 Telegram Bot\n向 @BotFather 发起会话，发送命令 /newbot 以创建Bot（用户名须以Bot为结尾）\n设置好后还须对bot进行权限设置\n发送 /setprivacy 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Disable”.\n发送 /setjoingroups 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Enable”.\n发送 /setcommands 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后发送如下内容：\nhelp - 显示命令列表. link - 将聊天链接到群组. unlink_all - 取消所有聊天与群组的链接. info - 显示当前Telegram聊天的信息. chat - 生成聊天对话框. update_info - 更新组名称和资料图片. 安装 EFB 及其从端\n安装相关依赖:\n$ apt install python3 python3-pip python3-pil python3-setuptools python3-numpy python3-yaml python3-requests ffmpeg libmagic-dev libwebp-dev vim -y 安装 EFB :\n$ pip3 install ehforwarderbot efb-telegram-master efb-wechat-slave 创建配置文件\n创建 EFB 配置文件:\n$ mkdir -p ~/.ehforwarderbot/profiles/wx/ $ vim ~/.ehforwarderbot/profiles/wx/config.yaml master_channel: blueset.telegram slave_channels: - blueset.wechat 创建 ETM 配置文件:\n$ mkdir -p ~/.ehforwarderbot/profiles/wx/blueset.telegram $ vim ~/.ehforwarderbot/profiles/wx/blueset.telegram/config.yaml token: \"123456\" #值为你在 @BotFather 处获得的 bot token admins: - 123456 #值为你在 @get_id_bot 处获得的 chat id 创建 EWS 配置文件:\n$ mkdir -p ~/.ehforwarderbot/profiles/wx/blueset.wechat $ vim ~/.ehforwarderbot/profiles/wx/blueset.wechat/config.yaml 其内容参见可选的配置文件，根据文档配置即可。\n输入ehforwarderbot --profile wx,扫码登录即可收发消息,使用screen命令保存后台\n使用EFB转发QQ消息 申请 Telegram Bot\n向 @BotFather 发起会话，发送命令 /newbot 以创建Bot（用户名须以Bot为结尾）\n设置好后还须对bot进行权限设置\n发送 /setprivacy 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Disable”.\n发送 /setjoingroups 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Enable”.\n发送 /setcommands 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后发送如下内容：\nlink - 将会话绑定到 Telegram 群组. chat - 生成会话头. recog - 回复语音消息以进行识别. extra - 获取更多功能. 安装 EFB 及其从端\n$ apt-get install libopus0 ffmpeg libmagic1 python3-pip git nano docker.io libssl-dev python3-dev build-essential #安装相关依赖 $ pip3 install efb-telegram-master #安装 EFB $ pip3 install -U git+https://github.com/milkice233/efb-qq-slave $ pip3 install git+https://github.com/milkice233/efb-qq-plugin-iot 创建配置文件\n创建 EFB 配置文件:\n$ mkdir -p ~/.ehforwarderbot/profiles/qq/ $ vim ~/.ehforwarderbot/profiles/qq/config.yaml master_channel: blueset.telegram slave_channels: - milkice.qq 创建 ETM 配置文件:\n$ mkdir -p ~/.ehforwarderbot/profiles/qq/blueset.telegram $ vim ~/.ehforwarderbot/profiles/qq/blueset.telegram/config.yaml token: \"123456\" #值为你在 @BotFather 处获得的 bot token admins: - 123456 #值为你在 @get_id_bot 处获得的 chat id IOT 部分:\n$ wget https://github.com/opq-osc/OPQ/releases/download/v6.0.20/OPQBot_6.0.20_darwin_amd64.tar.gz #根据需要版本自行更改链 启动需要到Gitter获取token并填入CoreConf.conf文件\n如果需要更改API的端口请更改Port (例如更改成2333端口,就改成Port = “0.0.0.0:2333”)\n进入到文件目录 执行命令\nscreen -S iot ./OPQBot #输入完毕后 Ctrl+A+D  登录请 等待控制台输出Everything is ok!后 再用浏览器访问 http://IP:PORT/v1/Login/GetQRcode (IP为你机子的内网ip或者公网ip,PORT为你上一步更改的端口,默认8888\n然后用手机扫码登录,不支持帐号密码登陆\n创建 EQS 配置文件\n$ mkdir -p ~/.ehforwarderbot/profiles/qq/milkice.qq $ vim ~/.ehforwarderbot/profiles/qq/milkice.qq/config.yaml Client: iot iot: qq: 1234567890 # 此处填写登录的QQ号 host: \"http://127.0.0.1\" # 默认IP为本地 port: 8888 # 默认端口为 8888 receive_self_msg: False # 不接收自己发出的消息 输入ehforwarderbot --profile qq 即可,同样可以使用screen命令保存后台\n问题发现及解决方案   提示错误: efb-wechat-slave 2.0.0 has requirement requests=2.22.0, but you'll have requests 2.21.0 which is incompatible.\n输入 pip3 install requests==2.22.0 解决\n  升级相关组件输入 pip3 install --upgrade efb-qq-slave efb-wechat-slave efb-telegram-master\n  参考链接 安装并使用 EFB：在 Telegram 收发 QQ 消息 - Milkice’s IceBox\n在 Telegram 上实现微信收发，EHForwarderBot 搭建记录 - Eliot’s Blog\nEFB WeChat Slave Channel：EFB 微信从端 (EWS) - bluesethttps://linux.cn/article-12826-1.html\n导出 Telegram 贴图 教程：不能导出动态sticker。\n这只 bot 在这里（新的@ygmxstickersetbot），源码在这里。\n默认 Desktop [Desktop Entry] Version=1.5 Name=Telegram Desktop Comment=Official desktop version of Telegram messaging app TryExec=/home/kurome/.telegram/Telegram Exec=/home/kurome/.telegram/Telegram -workdir /home/kurome/.local/share/TelegramDesktop/ -- %u Icon=telegram Terminal=false StartupWMClass=TelegramDesktop Type=Application Categories=Chat;Network;InstantMessaging;Qt; MimeType=x-scheme-handler/tg; Keywords=tg;chat;im;messaging;messenger;sms;tdesktop; Actions=Quit; SingleMainWindow=true X-GNOME-UsesNotifications=true X-GNOME-SingleWindow=true [Desktop Action Quit] Exec=/home/kurome/.telegram/Telegram -workdir /home/kurome/.local/share/TelegramDesktop/ -quit Name=Quit Telegram Icon=application-exit xdg-open xdg-open opens a file or URL in the user's preferred application. If a URL is provided the URL will be opened in the user's preferred web browser. If a file is provided the file will be opened in the preferred application for files of that type. xdg-open supports file, ftp, http and https URLs. 在设置了默认 desktop 文件后，在浏览器中点击 JOIN GROUP 依旧打不开 Telegram，有如下报错：\n$ xdg-open tg://join?invite=xxxx gio: tg://join?invite=xxxx: The specified location is not supported 参考xdg-open doesn’t recognize custom protocol解决：\n$ xdg-mime default telegram.desktop x-scheme-handler/tg Telegram 充當雲端筆記 Telegram本身有非常多的新闻、咨询以及网友们非常有深度的讨论，因此可以通过Saved Message或者建立群组频道来转存感兴趣的信息。farseerfc 的小窝 就有一个。\n中文搜索 问题在哪 Telegram 群组和频道越来越多，消息也越来越多，但是搜索中文的消息却是一个很大的问题。\n主要原因\nTelegram 的搜索是以”词”为基础单位的，是以英文标点符号或空格作为”词”的间隔。\n这是以英文为基础的搜索方式，这样的方式对于英文的搜索就很方便，比如”hello”，用”he”就搜索不到，必须用”hello”，这就符合英文的语境，当我想要找”he”消息时并不想看到有”hello”的消息。\n但是这种方式对于中文等语言来说就很不方便，中文是以字为单位的，按照上面的方式，比如消息内容”动态贴纸不能用这个bot导出”用”贴纸”或”导出”就不能搜索到此消息。\n如何解决 知道问题出在哪儿？那又如何解决呢？ 解决方案：\n 发消息时以英文标点符号或空格作为间隔，比如消息”动态贴纸不能用这个bot导出”，可以用”动态 贴纸 不能 用这个 bot 导出”方法发出，这样就可以用”动态”“贴纸”“不能”“导出”关键词搜索到此消息。 发消息时可以加’tag’，比如想发送消息”ABCDEFG”，可以发送”#tag ABCDEFG”，下次可以用”#tag”关键词搜索找到都有这个标签的消息。 已发的消息，以标点符号或空格作为间隔单位搜索，比如”好像国区是没有，点链接提示转到国区，关掉就好了，账号可以在不同地区购买”，可以用”好像国区是没有”“点链接提示转到国区”“关掉就好了”“账号可以在不同地区购买”关键词搜索到此消息。  Mutt Mutt 是一个基于文本的邮件客户端，因其强大的功能而闻名。 Mutt虽然已诞生二十多年了，但仍然是大量用户的首选邮件客户端。\nMutt主要侧重于作为邮件用户代理（MUA），最初是为了查看邮件而编写的。 与其他邮件应用程序相比，稍后实现的功能（检索，发送和过滤邮件）比较简单，因此用户可能希望使用外部应用程序来扩展Mutt的功能。\n模块搭配方案 就像穿衣搭配一样，收件发件过滤邮件转发邮件各种功能都有很多种程序可以用，mutt怎么搭配呢？\n常用选项有这些(User/Transport/Delivery)：\n MUA 收件：fetchmail或getmail或OfflineIMAP MTA 发件：sendmail或msmtp或postfix。其中msmtp兼容强，postfix对国内不友好 MDA 分类: procmail或maildrop 邮件编辑：VIM。  一般搭配是：\n 老式搭配：mutt + getmail + sendmail + procmail 新式搭配：mutt + fetchmail + msmtp + maildrop  这里我们用：mutt + fetchmail + msmtp + procmail\n安装：\n$ sudo apt install mutt fetchmail msmtp procmail -y Mutt或各个写协作程序在配置前都是不能使用的，学习曲线还是比较陡峭的，所以要做好准备去花好一段去了解和学习各个部件。\n大概的配置流程是：\n 配置收件：~/.fetchmailrc 配置过滤：~/.procmailrc 配置发件：~/.msmtprc 配置mutt框架本身：~/.muttrc  注意：初学过程中，不要一上来就配置mutt。最好是先从各个部件开始：收件-过滤邮件-阅读邮件-发件-mutt界面，按照这种顺序。\n收件：配置Fetchmail  Fetchmail是由著名的《大教堂与集市》作者 Eric Steven Raymond 编写的。\n Fetchmail是一个非常简单的收件程序，而且是前台运行、一次性运行的，意思是：你每次手动执行fetchmail命令，都是在前台一次收取完，程序就自动退出了，不是像一般邮件客户端一直在后台运行。\n注意：fetchmail只负责收件，而不负责存储！所以它是要调用另一个程序如procmail来进行存储的。\nfetchmail的配置文件为~/.fetchmailrc。然后文件权限最少要设置chmod 600 ~/.fetchmailrc\n比如我们要设置多个邮箱账户同时收取，那么配置如下：\npoll pop.AAA.com protocol POP3 user \"me@AAA.com\" password \"123\" poll pop.BBB.com protocol POP3 user \"me\" there with password \"123\" is falko here fetchall poll pop.CCC.com protocol POP3 user \"me\" there with password \"123\" is till here keep poll pop.DDD.com protocol POP3 user \"me\" password \"123\" ## QQ 邮箱 poll pop.qq.com port 995 protocol POP3 user \"1664548605@qq.com\" password [授权码] ssl keep # 全局选项 mimedecode # 不加 -d %T 就会报 ~/Mail/inbox is not a mailbox. 错误 mda \"/usr/bin/procmail -d %T\" 其中：\n 各种参数可以不按顺序，也可以不在一行。 空格隔开每个参数，poll隔开每个账户。 here, there, with, is等等，都不是关键词，随便写不影响参数。 以下是必填  poll后面是邮件服务器的地址，一般是pop.xxx.com protocol后面是收件协议，一般是pop或pop3 user后面是用户名，可以是username，也可以是邮箱地址 password后面是密码   sslproto：可能会报错 fetchmail: pop.qq.com: upgrade to TLS failed.，故可以禁掉SSL，同 man 手册查到  加上option --nosslcertck，虽然有报错，但至少可以收邮件了。 加--sslprotocl '', 注意要用空字符串   四选一：  nofetchall ：仅检索新消息（默认）。 fetchall ：获取所有消息，无论是否看到。 keep ：不要从服务器上删除看到的消息。 nokeep ：从服务器中删除看到的消息。   mimedecode用来自动解码MIME mda后面指定本机安装的邮件过滤分类程序。如果不填，则收取的邮件在本地不会保存。注意用which procmail查一下路径。 QQ 邮箱客户端设置 Outlook 设置：失败了  配置完成后，可以运行fetcmail -v来看看是否有错误信息，如果能够正常显示很多行的收取信息，那么就能正确登录邮箱收取了。\n一般收取的命令如下：\n# 只收取未读邮件 $ fetchmai # 收取所有邮件 $ fetchmail -a # （重要）收取新邮件，但不在服务器端删除已经收取的邮件 $ fetchmail -k 但是fetchmail只负责收取，不负责“下载”部分，你找不到邮件存在哪了。 所以还需要配置MDA分类器，如procmail，才能看到下载后的邮件。\n注意：Fetch其实不是在Mutt“里”使用的，而是脱离mutt之外的！也就是说，Mutt只负责读取本地存储邮件的文件夹更新，而不会自动帮你去执行fetchmail命令。\n你必须自己手动执行，或者用Crontab定期收取，或者设为Daemon守护进程，还可以在Mutt中设置快捷键执行Shell命令：\n  要使fetchmail作为守护进程运行，我们必须编辑/etc/default/fetchmail并将START_DAEMON设置为yes\n$ vi /etc/default/fetchmail START_DAEMON=yes xxxxxxxxxx yum -y install tigervnc-servershell\n  设置Mutt快捷键收取邮件的方法是在~/.muttrc中加入macro：\nmacro index,pager I 'shell-escape fetchmail -vkenter' 这样的话，你就可以在index邮件列表中按I执行外部shell命令收取邮件了。\n  邮件过滤：配置Procmail Procmail是单纯负责邮件的存储、过滤和分类的，一般配合fetchmail收件使用。\n在Pipline中，fetchmail把收到的邮件全部传送到Procmail进行过滤筛选处理，然后Procmail就会把邮件存到本地形成文件，然后给邮件分类为工作、生活、重要、垃圾等。\n当然，分类规则是自己可以指定的。可以根据发信人、主题、长度以及关键字 等对邮件进行排序、分类、整理。\nProcmail 的配置文件是 ~/.procmailrc ，记得改权限：chmod 600 ~/.procmailrc。\n内容也非常简单，前面是邮件位置、日志等默认选项，后面则是一块一块的过滤规则。\n基本配置：\n# 邮件存储地址 MAILDIR=$HOME/Mail # 默认：收件箱 DEFAULT=$MAILDIR/inbox VERBOSE=off LOGFILE=/tmp/procmaillog # 某个垃圾邮件规则 :0 * ^From: webmaster@st\\.zju\\.edu\\.cn # 垃圾文件的存储位置 /dev/null # 其它所有都存到收件箱中 :0: inbox/ 其中，$HOME/Mail是设定的邮件存储位置。\n我们需要手动创建mkdir ~/Mail，否则程序会报错。\n配置好后，我们再测试一下就会看到：\n$ fetchmail -a 78 messages for 1664548605@qq.com at pop.qq.com (2843793 octets). reading message 1664548605@qq.com@pop.qq.com:1 of 78 (36692 octets) not flushed ... $ tree ~/Mail /home/vane/Mail └── inbox 0 directories, 1 file $ du -h Mail/inbox 2.1M Mail/inbox 可以看到，所有邮件都保存在了inbox这个单一文件中。这个文件可以打开看到MIME格式(协议)的邮件源码。就像HTML一样，展示给我们的和背后的源码不一样。\n那么怎么把这个类似HTML的MIME格式邮件解析为我们人能读懂的内容呢？——这个我们就要靠mutt自己了，mutt自身具备基本的MIME邮件解析功能（不包括HTML格式邮件读取）。\n发件：配置msmtp msmtp是作为sendmail发邮件程序更好的替代品。\nmsmtp的配置文件为~/.msmtprc，记得改权限：chmod 600 ~/.msmtprc\n配置内容比收件还简单，因为发件永远比收件简单。\n基本配置：\naccount default auth login host smtp.XXX.com port 587 from ME@XXX.com user ME password passwd # 关于tls，如果是阿里云则不用写，如果是Outlook的话，必须写 tls on tls_starttls off tls_certcheck off # QQ 邮箱例子 account default # QQ邮箱这里必须是 on，否则会 535 Login Fail auth on host smtp.qq.com port 587 from 1664548605@qq.com # user 必须是 @ 之前的部分，不能自定义，否则会 535 Login Fail user 1664548605 password [授权码] tls on tls_starttls off tls_certcheck off logfile /tmp/msmtp.log QQ 邮箱例子：使用mutt+msmtp在Linux命令行界面下发邮件。\n总之，哪怕QQ 邮箱设置对了，也要多试几次才能发送成功。\n主界面：配置Mutt Mutt的配置文件为~/.muttrc，记得改权限：chmod 600 ~/.muttrc\n另外：mutt的配置文件还可以放在~/.mutt/muttrc。这种方法有一个好处，即~/.mutt/目录下可以放很多主题、插件等文件。\n基本配置：\n# 通用设定 set use_from=yes set envelope_from=yes #移动已读邮件 set move=yes #回复的时候调用原文 set include set charset=\"utf-8\" #自动显示HTML auto_view text/html # 发送者账号 set realname=\"Vane Hsiung\" set from=\"1664548605@qq.com\" # 分类邮箱 #Mail box type set mbox_type = Maildir set folder = \"$HOME/Mail\" #INBOX set spoolfile = \"$HOME/Mail/inbox\" #Seen box set mbox=\"$HOME/Mail/seen\" #Sent box set record=\"$HOME/Mail/sent\" #Draft box set postponed=\"$HOME/Mail/draft\" # 关联程序（需要自己用which命令确定一下） # 默认使用 nano set editor=\"vim\" set sendmail=\"/usr/bin/msmtp\" 以上如果有什么问题，可参考etchmail + proc + msmtp + mutt configuration samples。\n确认邮箱服务器 即使上面配置一切OK，也不一定能正常收发邮件。因为你用的Gmail、QQ、网易、阿里云等等，后台都有一系列的第三方收取设置。这是各不相同的。\n除了第三方客户端的允许，我们还要设置POP。最好放开全部邮件或者最近30天，然后禁止客户端删信。这是什么意思呢？POP默认客户端在收件后，服务器上的邮件就自动删除了！这个不太合适，所以必须要禁止。\n基本操作 邮件列表操作：\n 基本：q:Quit, d:删除当前邮件, s:将邮件移动至指定文件夹, m:创建新邮件, r:回复当前邮件, ?:帮助 移动：j/k 上下移动邮件, z/Z上下翻页,  跳至序号处（不进入邮件）  打开选中的邮件 /在当前文件夹搜索 d 将选中邮件标记为删除, N 将选中邮件标记为未读, $ 让标记的东西生效，如删除、未读等。 f 转发选中邮件, e 编辑选中邮件 c切换文件夹(inbox/seen/draft等), 需要输入文件夹名称，或按?在列表里选择，j/k上下移动。  在邮件中的操作：\n j/k 上一封／下一封邮件, : 向下翻页, : 向下滚动 e 编辑当前邮件, t编辑TO，c编辑CC，b编辑BCC，y发送邮件，a添加附件，Return查看附件，E编辑附件，D删除附件  使用命令操作：\nMutt如同Vim一样，不光可以把命令绑定为快捷键，还能直接输入:直接输入命令。 但是稍有不同的是，Mutt称之为Action，而且需要用:exec 这样格式执行。\n比如sidebar侧边栏的移动，命令是：sidebar-next, sidebar-prev。 那么我们可以直接输入:exec sidebar-next，按下回车执行。\nIRC 简介 芬兰人雅尔可·欧伊卡利宁（Jarkko Oikarinen）于1988年8月创造了IRC来取代一个叫做MUT的程序。\n IRC（Internet Relay Chat的缩写，“因特网中继聊天”）是一个位于应用层的协议。 其主要用于群体聊天，但同样也可以用于个人对个人的聊天。 一个IRC服务器可以连接其他的IRC服务器以扩展为一个IRC网络。 IRC 不强制注册；但如果你注册了，就可以强制把占用自己唯一 ID 的人踢下线。 IRC 协议简单，开源实现多，其第三方机器人程序非常众多，几乎每种语言都有一个实现。 IRC 是开源社区会议标准；因此，许多开源世界的技术大牛混在那里。  irchelp：一个致力于帮助用户了解IRC的网站。\nIRC：Linux文档项目的IRC HOWTO\n服务器 首先要区分一些概念：\n Networks：是指的互相隔离的网络，如Freenode和DALnet这些是世界知名的网络，但互相隔离，频道不共享。 Servers：Network网络中的某一台电脑服务器，你加入世界上任何一个server都能加入这个Network。IRC是一个分布式的客户端/服务器结构。通过连接到一个IRC服务器，我们可以访问这个服务器以及它所连接的其他服务器上的频道（即这个 Network 中所有频道）。  频道存在于一个IRC服务器上。一个频道类似于一个聊天室，频道名称必须以#符号开始，例如#irchelp。\n要使用IRC，必须先登录到一个IRC服务器上，最常见的为irc.freenode.net——最大的IRC网络，为免费和开源软件社区，非营利组织和相关社区提供讨论设施。\nFreenode 用户模式。\nIRC使用的服务器端口有:\n 6667（明文传输，如irc://irc.freenode.net） 6697（SSL加密传输，如ircs://irc.freenode.net:6697）。  IRCD: 简称互联网中继聊天守护，是服务器软件实现了IRC 协议，使人们通过上网彼此交谈（交换文本即时消息）。\n客户端 IRC用户透过客户端软件和服务器相连。\n Internet Relay Chat客户端的比较 IRCv3 Client Support  常用客户端：\n   Client Homepage 描述     HexChat https://hexchat.github.io/ 基于XChat的图形化IRC客户端。   Irssi https://irssi.org/ 支持IPv6的模块化文本UI IRC客户端。   Pidgin https://pidgin.im/ 具有GTK +界面的流行即时消息客户端。   WeeChat https://weechat.org/ 便携式和多接口（文本，Web和GUI）IRC客户端。   Konversation https://konversation.kde.org/ 基于KDE框架的用户友好型IRC客户端。   Polari https://wiki.gnome.org/Apps/Polari GNOME的IRC客户端   ircii http://eterna.com.au/ircii/ 在大多数UNIX平台下运行的IRC和ICB客户端。   kvirc http://www.kvirc.net/ 使用Qt GUI工具包的便携式IRC客户端。   Quassel https://quassel-irc.org/ Qt5 IRC客户端支持远程守护进程以实现全天候连接    Irssi 安装\n$ apt install irssi 命令行输入irssi即进入了聊天室。\n和一般Linux程序的一般命令、格式都不同，IRC客户端一般有自己的命令。窗口右下方[(status)]是输入命令的地方。\n一般命令(不区分大小写)：\n /quit，退出程序。一般的ctrl-c, ctrl-d, esc, q之类的都不管用 /help，帮助 /network list 查看已保存的服务器列表 /connect xxx.xxx.xxx 连接某服务器。连接 freenode，需要到 https://irc.com/login/sso 注册，然后按照 https://freenode.net/kb/answer/sasl 进行设置。 /join xxx 加入某channel /leave或/part 离开当前channel /normal或/n 查看当前channel的人数 /list -YES 查看当前服务器的所有chennels (慎用) /nick NewNickName 更改当前昵称 /msg NickName Content 给某人发送消息，一般都是给/msg nickserv管理人NPC发送消息  常用快捷键：\n Alt + 1/2/3/4...，切换window窗口，一般一个channel一个窗口 Alt + n/p，上下滚动屏幕  IRC 常用缩写词\n配置\n如果想长期保存、备份一个固定的程序配置，那么就需要修改配置文件。\nirssi默认的配置文件为~/.irssi/config。\n配置中，会在第一次运行时就自动设置了一些，包括根据当前电脑账户的用户名设置nickname等。整个配置，是一直“类似”JSON的格式。\nsettings ：记录自己的名字：nick, real_name, user_name\nservers ：这是指的Network而不是具体某台server，如Freenode、Dal、ESPer、EFnet等大型网络。服务器配置案例：\nservers = ( { address = \"irc.dal.net\"; chatnet = \"DALnet\"; port = \"6667\"; }, { address = \"路径\"; chatnet = \"下面chatnet对应的名称\"; port = \"端口\"; autoconnect = true; use_ssl = \"yes\"; password = \"用户名:密码\"; } ); chatnets：记录各个网络的登录信息，也可以作为“别名”，这样每次/connect不用输入全路径了。配置完每个服务器后，还要配置相应的chatnets，每一条的名称都要与servers中的对应。\nchatnets = { DALnet = { type = \"IRC\"; max_kicks = \"4\"; max_msgs = \"20\";max_whois = \"30\"; }; Freenode = { type = \"IRC\"; max_kicks = \"4\"; max_msgs = \"20\";max_whois = \"30\"; autosendcmd = \"/msg nickserv identify MyName MyPassword\"; }; }; channels ：记录自己收藏的频道名。RC的频道不是用URL之类很复杂的东西，全都是用#tag这种简单一个标签来区分的，非常好记。\nchannels = ( { name = \"#lobby\"; chatnet = \"EsperNet\"; autojoin = \"No\"; }, { name = \"#freenode\"; chatnet = \"Freenode\"; autojoin = \"No\"; }, ); statusbar：界面美化的设置。目前IRSSI的世界里，唯一知名的主题只有weed。\nMultimedia Rhythmbox Music\n搜 “无损音乐” “车载音乐” 打包下载。\n电台\n很多电台是基于mms协议的，如果rhythmbox无法播放mms协议的电台，则需要安装支持mms协议的gstreamer插件——因为rhymbox使用gstreamer做后台解码。支持mms协议的插件为gstreamer bad插件，所以执行命令：\n$ sudo apt-get install gstreamer0.10-plugins-bad 同样的，如果需要播放mp3文件则安装ugly插件，需要播放wma文件则安装ffmpeg插件。\n电视台和电台MMS地址\n分享Rhythmbox电台列表\n最终还是没什么无法播放mms，因为 Rhythmbox 报错了。\nFeelUOwn FeelUOwn 是一个稳定、用户友好以及高度可定制的音乐播放器。支持全平台。\nClementine Clementine is a modern music player and library organizer for Windows, Linux and macOS.\ncmus Small, fast and powerful console music player for Unix-like operating systems.\n官方教程翻译版\nDeaDBeeF DeaDBeeF (as in 0xDEADBEEF) is a modular cross-platform audio player which runs on GNU/Linux distributions, macOS, Windows, *BSD, OpenSolaris, and other UNIX-like systems.\njellyfin The Free Software Media System\nAudacious Audacious is an open source audio player.\nKDE elisa/amarok elisa: Simple music player aiming to provide a nice experience for its users\namarok: Powerful music player that lets you rediscover your music\nElisa 在播放文件不可用的时候会迅速的删光所有歌曲，它的播放列表经常被破坏\nosdlyrics Standalone lyrics fetcher/displayer (windowed and OSD mode).\nZonyLrcToolsX ZonyLrcToolsX 是一个能够方便地下载歌词的小软件。（ps：一点也不见得方便）\nNeteaseMusic Linux 下官方只发布了 deb 包，flatpak 直接安装\nYesPlayMusic 高颜值的第三方网易云播放器\nNetEase-MusicBox 网易云音乐命令行版\nlx-music-desktop 一个基于 electron 的音乐软件\nlisten1_desktop one for all free music in china\nQQMusic Spotify 作为世界上最大的音乐流媒体服务商，Spotify 因优秀的设计和精准的音乐推荐算法让不少人为之倾心。\n在正式注册 Spotify 之前，我们先来看一看曲库的问题。由于不同地区的歌曲版权差异，Spotify 在不同地区提供服务时，其相应的曲库也有所不同。例如港区的曲库中，粤语歌就要比美区多，相反美区的英文歌就要比港区多。同理，若你喜欢听其他语种的歌，注册当地的 Spotify 则是最好的选择。\n注册后要是发现当前的地区选择并不是很理想，想要换区也是可行的。首先要挂上自己想要换到地区的代理，然后进入自己的「Profile/资料」界面，点击「Edit Profile/修改资料」，「Country/国家」这个选项就会出现你当前所挂代理地区，保存更改即可换区成功。\n登录的话，需要先在登录界面设置Proxy重启。登录后在设置里改回来，不再需要Proxy了。\nSpotifyd An open source Spotify client running as a UNIX daemon.\nPulseAudio PulseAudio 是在GNOME 或 KDE等桌面环境中广泛使用的音频服务。它在内核音频组件（比如ALSA 和 OSS）和应用程序之间充当代理的角色。\n配置 Pulseaudio 支持通过多种模块扩展其功能。在这里可以找到PulseAudio可用的模块的详细信息： Pulseaudio Loadable Modules。增加 load-module  到文件 /etc/pulse/default.pa就可以启用对应的模块。\n启动 警告： 如果你给每个用户拷贝了配置文件（例如client.conf, daemon.conf 或者 default.pa）到~/.config/pulse/ 或者 ~/.pulse/目录下，确定这些文件的修改与/etc/pulse/下的文件修改同步，否则PulseAudio可能由于配置文件错误而拒绝启动。\n注意： 大多数X11环境会在启动X11会话时自动启动PulseAudio。\n少数情况下PulseAudio在启动X11时没有自动启动，可运行下面的命令启动：\n$ pulseaudio --start 运行下面的命令可以终止PulseAudio：\n$ pulseaudio --kill 在不支持的桌面环境中自动启动\n注意： 正如之前所说, 如果用户安装了桌面环境，PulseAudio很可能通过 /etc/X11/xinit/xinitrc.d/pulseaudio文件或者 /etc/xdg/autostart/目录下的文件自动启动\n查看PulseAudio是否正在运行：\n$ pgrep -af pulseaudio 369 /usr/bin/pulseaudio 如果PulseAudio未运行而且用户正在使用X11，运行下面的命令可以在启动PulseAudio的同时加载需要的X11插件：\n$ start-pulseaudio-x11 如果你没有运行GNOME, KDE或者Xfce，并且你的~/.xinitrc文件并未引用/etc/X11/xinit/xinitrc.d目录下的文件内容，为了让PulseAudio自动启动，你可以这样做：\n~/.xinitrc /usr/bin/start-pulseaudio-x11 后端设置 ALSA\n配置ALSA与PulseAudio共同工作必须的文件/etc/asound.conf。\n为了防止应用程序使用ALSA的OSS模拟功能而忽略PulseAudio（从而导致其他应用程序无法播放声音），确定snd_pcm_oss模块没有在系统启动时自动加载。如果该模块已经被加载(lsmod | grep oss)，运行下面命令以卸载该模块：\n# rmmod snd_pcm_oss 均衡器 PulseAudio内置了10段均衡器系统，按下列步骤操作以启用均衡器：\n加载均衡器通道和dbus协议模块\n$ pactl load-module module-equalizer-sink $ pactl load-module module-dbus-protocol 安装并运行图形前端\n$ sudo apt install pulseaudio-equalizer $ qpaeq 每次启动时加载均衡器和dbus模块\n编辑 /etc/pulse/default.pa 并加入下面几行：\n### Load the integrated PulseAudio equalizer and D-Bus module load-module module-equalizer-sink load-module module-dbus-protocol Pipewire 从 Pulseaudio 切换到 Pipewire 的理由是对于蓝牙的“LDAC”“APTX”之类编码格式的支持\nFFmpeg  powershell 执行与在 cmd 执行不一样，poweshell 某些 -c:v 会报错 ffmpeg 输出参数含义  frame: 编码的帧数量 fps：每秒编码的帧数 q：质量因子 size/ Lsize：视频和音频编码后的大小，即基本等于视频和音频 之和 time：输出帧的显示时间 bitrate：输出视频的比特率 dup：输入帧重复（duplicate）的数量 drop：输入帧丢弃（drop）的个数 speed：编码速度    视频文件本身其实是一个容器（container），里面包括了视频和音频，也可能有字幕等其他内容。\n视频和音频都需要经过编码，才能保存成文件。不同的编码格式（CODEC），有不同的压缩率，会导致文件大小和清晰度的差异。\n编码器（encoders）是实现某种编码格式的库文件。只有安装了某种格式的编码器，才能实现该格式视频/音频的编码和解码。\nFFmpeg 的命令行参数非常多，可以分成五个部分：\n$ ffmpeg [全局参数] [输入文件参数] -i 输入文件 [输出文件参数] [输出文件] 常用参数  -c：指定编码器 -c copy：直接复制，不经过重新编码（这样比较快） -c:v：指定视频编码器 -c:a：指定音频编码器 -i：指定输入文件 -an：去除音频流 -vn： 去除视频流 -preset：指定输出的视频质量，会影响文件的生成速度，有以下几个可用的值 ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow。 -y：不经过确认，输出时直接覆盖同名文件。  查看视频文件的元信息 $ ffmpeg -i input.mp4 -hide_banner 转换编码格式 $ ffmpeg -i [input.file] -c:v libx264 output.mp4 转成 H.264 编码，一般使用编码器 libx264\n转换容器格式 $ ffmpeg -i input.mp4 -c copy output.mkv 改变分辨率 $ ffmpeg -i input.mp4 -vf scale=720:-1 output.mp4 提取视频 $ ffmpeg -i input.mp4 -an -c:v copy ouput.mp4 -vcodec codec 强制使用codec编解码方式。如果用copy表示原始编解码数据必须被拷贝。\n提取音频 $ ffmpeg -i input.mp4 -vn -c:a copy output.aac -c:a copy表示不改变音频编码，直接拷贝。\n添加音轨 $ ffmpeg -i input.aac -i input.mp4 output.mp4 音视频合成 $ ffmpeg -i video.mp4 -i audio.aac -c:v copy -c:a copy output.mp4 截图 从指定时间开始，连续对1秒钟的视频进行截图\n$ ffmpeg -y -i input.mp4 -ss 00:01:24 -t 00:00:01 output_%3d.jpg 指定只截取一帧\n$ ffmpeg -ss 01:23:45 -i input.mp4 -vframes 1 -q:v 2 output.jpg -vframes 1指定只截取一帧，-q:v 2表示输出的图片质量，一般是1到5之间（1 为质量最高）。\n裁剪 $ ffmpeg -ss [start] -i [input] -t [duration] -c copy [output] $ ffmpeg -ss [start] -i [input] -to [end] -c copy [output] 裁剪（cutting）指的是，截取原始视频里面的一个片段，输出为一个新视频。可以指定开始时间（start）和持续时间（duration），也可以指定结束时间（end）。\n添加字幕  外挂字幕：一个单独的外部字幕文件，格式类型一般有srt、vtt、ass等等。播放视频时，需要把外挂字幕和视频放在同一目录下，并在播放器中选择字幕文件才可以在视频中看到字幕。 软字幕：也叫内挂字幕、封装字幕、内封字幕，字幕流等，就是把前面的外挂字幕的字幕文件嵌入到视频中作为流的一部分，如果一个视频有多个字幕流那么播放视频是还得选择对应的字幕流 硬字幕：是嵌入到视频帧里面的字幕，它就像视频水印一样作为视频帧的一分部分了，不管再任何平台字幕看起来都是一样的，而且也不再要求播放器单独对字母进行渲染  常见的字幕格式有：\n SRT（标准外挂字幕格式）：只包含文字和时间码，没有样式，显示效果由播放器决定，不同的播放器显示出的效果可能差别很大。 ASS（高级外挂字幕格式）：支持样式、字体、字幕定位、淡入淡出、简单的特效。如果不缺字体，不同的播放器显示效果基本一致。  ffmpeg字幕处理流程(容器是否支持字幕流指的是输出容器)\n添加软字幕：\n$ ffmpeg -i video.mp4 -i subtitle.srt -c copy output.mkv 软字幕只有部分容器格式比如(mkv)才支持，MP4/MOV等不支持，而且也只有部分播放器支持软字幕或者外挂字幕(如VLC播放器)。\n添加多个字幕：\nffmpeg -i input.mp4 -i zh_CN.srt -i en_US.srt -map 0:v -map 0:a -map 1 -map 2 -c:v copy -c:a copy -metadata:s:s:0 language=chn -metadata:s:s:1 language=eng \"output.mp4\"  -map 是轨道参数，如果只有一个字幕，就不需要这个参数。-map 0:v 表示第一个文件输入视频轨道，-map 0:a 表示第二个轨道是第一个文件输入的音频轨道，-map 1 建立第三个轨道，-map 2 建立第四个轨道。如果没添加 map 参数，默认就只有一个字幕轨道，第二个英文字幕会覆盖第一个中文字幕轨道。 -metadata:s:s:0 language=chn 第一条字幕的语言设置为中文，-metadata:s:s:1 language=eng 第二条字幕的语言设置为英文。 language 不能自定义，只能设置成固定的缩写。  添加硬字幕：\n$ ffmpeg -i video.mkv -vf subtitles=subtitle.srt out.mp4 下载 m3u8 现在比较常见的视频流媒体，大部分都是 m3u8 格式的，而对于 m3u8 格式的视频而言，如果你下载过，你会发现它就是一个文本文件，大概也就只有几十 kb，从磁盘大小来看，应该也知道它并不是一个直接的视频文件。\n什么是 m3u8\n说到 m3u8 就要先说说 HLS（HTTP Live Streaming）。HLS 是 Apple 公司针对 iPhone、iPod、iTouch 等移动设备，而研发的基于 HTTP 协议的流媒体解决方案。在 HLS 技术中，Web 服务器可以向客户端提供接近实时的音视频流，但是它又是使用的标准的 HTTP 协议。所以基本上，比较大型的点播直播类服务，都是基于 HLS 的。\n而该技术的原理，就是将视频文件或者视频流，进行切片（ts文件），并建立索引文件（m3u8），它支持的视频流编码为 H.264，音频流编码为 AAC。\n简单来说，基于 HLS 的视频流，会将完整的视频，切割成一个个比较小的视频片段（ts 文件），然后根据协议组合成一个 m3u8 文件。这些比较小的 ts 文件，是可以单独播放的。而视频播放器，拿到 m3u8 文件之后，根据对其内 ts 片段的索引，连续播放不同的视频片段，来达到流畅的播放效果。\n下载的 m3u8 文件\n说这些概念都没用，我们来看两个真实的被下载的 m3u8 文件。\n这种 m3u8 文件就还是比较清晰的，能看到它一个个的片段。但是需要注意的是，这里的片段，全部是基于域名的相对地址，也就是说，这样一个 m3u8 文件，你丢到播放器里，是无法播放的，但是如果你记录了原始下载这个 m3u8 的链接，它在播放器里是可以正常播放的。\n当然，如果你修改这个 m3u8 文件，将它相对路径拼接上域名地址，也是可以达到播放的效果的。\n再来看看另外一种 m3u8 文件，它其内的 ts 片段，都是完整地址。\n像这种具有完整地址的 ts 片段，哪怕你将它保存成一个本地的文件，播放器依然是可以直接播放的，不过这里本质上依然是在在线播放。\n这两中 m3u8 文件，虽然有细微的差别，但是它们都是基于标准的协议。\n简单总结一下：\n m3u8 不是视频内容的文件，它占用的磁盘空间非常的小。 m3u8 文件，如果其内的 ts 片段，是完整地址，则可以保存后播放，否者只能在线播放。 播放器播放 m3u8 文件的时候，实际上，还是在线从线上获取的视频流进行播放，所以是存在失效的情况的。  暂时知道这三点就可以了，接下来我们再看如何将一个 m3u8 文件，下载成一个 mp4 视频文件。\n使用 fmpeg 下载 m3u8\nffmpeg 是一套可以用来记录、转换音视频，并将其转化为流的开源程序，采用 LGPL 或 GPL 协议许可证书，很多大型的音视频软件，内部都是基于 ffmpeg 的。\n$ ffmpeg -i \"m3u8_file_uri\" \"save_video.mp4\" 到此，如果 m3u8 的链接正确可播放，就会开始下载，等待下载完成就可以了，最终会在指定目录下，保存 save_video.mp4 文件，它就是最终我们下载的离线视频文件。\nShotcut Shotcut is a free, open source, cross-platform video editor.\nDaVinci Resolve 专业的剪辑、调色、特效和音频后期制作！\nMKVToolNix MKVToolNix is a set of tools to create, alter and inspect Matroska(mkv) files under Linux, other Unices and Windows.\n轨道提取模式：\nmkvextract 输入文件名 tracks [选项] TID1:目标文件名1 [TID2:目标文件名2 ...] TID:输出文件名 如果输入文件中存在 ID 为 TID 的轨道，则将其提取为文件 输出文件名。轨道 ID 与 mkvmerge --identify 文件 选项所输出的相同。\n$ mkvextract \"Another Movie.mkv\" tracks 0:video.h265 \"1:main audio.aac\" MPV MPV 是一个基于 MPlayer 和 mplayer2 的开源极简全能播放器。支持各种视频格式、音频解码、支持特效字幕（电影动漫的ass特效字幕都没啥问题），不仅支持本地播放，同样支持网络播放（mpv 集成了 youtube-dl）。重点是 MPV 具有多系统平台支持、命令行、自定义、GPU 解码、脚本支持等特点……\nOSC 界面 由于默认情况下，MPV 播放器简约到连 GUI 界面都没有提供，因此需要通过命令行或配置文件设置。\n虽然 MPV 并没有提供官方的 GUI 界面，没有菜单，但它提供 OSC 操作界面和快捷键用于操作，只要关联好文件格式，使用 mpv 打开视频后，使用上其实也非常的简单方便。\n快捷键 操作主要通过键盘快捷键（区分大小写）调整。下面介绍一些常用的 mpv 快捷键（更多的快捷键请阅读官方参考手册）。\n鼠标操作\n   快捷键 作用说明     鼠标左键双击 进入/退出全屏   鼠标右键单击 暂停/继续播放   鼠标滚轮 快进/快退    播放控制\n   快捷键  作用说明     p Space 暂停、继续播放   / * 减少/增加音量   9 0 减少/增加音量（数字键盘区的9、0不可用）   m  静音   ← → 快退/快进5秒   ↑ ↓ 快进/快退1分钟     上一个/下一个（播放列表中）   Enter  下一个（播放列表中）   l  设定/清除 A-B循环点   L  循环播放   s  截屏   q  停止播放并退出   Q  保存当前播放进度并退出，播放同样文件从上次保存进度继续播放。    视频控制\n   快捷键 作用说明     _(下划线) 循环切换可用视频轨   A 循环切换视频画面比例   Alt+0 0.5倍源视频画面大小   Alt+1 1倍源视频画面大小   Alt+2 2倍源视频画面大小    音频控制\n   快捷键  作用说明     #  循环切换可用音频轨   Ctrl + Ctrl - 音轨延迟+/- 0.1秒    字幕控制\n   快捷键  作用说明     V  关闭/开启字幕   j J 循环切换可用字幕轨   x z 字幕延迟 +/- 0.1秒   r t 上移/下移字幕位置    窗口控制\n   快捷键 作用说明     T 窗口始终置顶   f 进入/退出全屏   ESC 退出全屏    配置 因为mpv本身不具有图形化前端，绝大多数的设置选项都是靠在主设置文件 ~/.config/mpv/mpv.conf 中输入参数实现的。\n## 部分选项之间有关联作用，MPV读取参数时由上往下读，所以注意书写通用参数的顺序，可查看手册[02]的顺序逻辑部分的错误示范 ## 基础 ## # 视频硬件解码API选择 # 因系统环境、显卡、驱动等差异硬件解码API方式（阅读官方参考手册查询）各有不同，建议实际测试验证后再填入可用API。 # 默认值为 no（使用软件解码），auto 为自动。 hwdec=auto # 尽可能所有格式先尝试上面指定视频硬件解码API #hwdec-codecs=all  # 输出log， # ~~/ 意思是 mpv config dir(for example ~/.config/mpv/) log-file=\"~~/mpv.log\" ## 功能 ## # --fs 等效 --fullscreen。运行MPV自动进入全屏 #fs=yes  # 默认为系统原生窗口界面，启用此项使用无边框界面 #border=no # 窗口置顶 #ontop=yes  # 窗口模式下最大占屏幕的百分比 # 例如在FHD屏上打开4k视频初始窗口过大 #autofit-larger=80%x80%  # 窗口模式下最小占屏幕的百分比 # 例如在4k屏上打开720p视频初始窗口过小 #autofit-smaller=50%x50%  # 默认yes，默认情况下MPV的窗口比例锁定为视频比例。启用此项以实现窗口自由拉伸行为 # 当 keepaspect=yes 时四周填充黑边 # keepaspect-window=no  # 以暂停状态启动播放器 #pause=yes  # 始终循环播放当前文件 #loop=inf  # 播放列表循环 #loop-playlist=no  # 默认情况下播完列表所有文件MPV自动关闭，设置为 yes 所有播放完毕不退出，设置为 always 可以实现类似“每个文件播完都暂停”的效果  keep-open=yes # 退出时记住播放状态。缓存目录默认在设置文件夹中的 \"watch_later\" save-position-on-quit=yes # 播放网络视频时的向后缓存大小（KiB或MiB） demuxer-max-bytes=20MiB ## OSD ## ## OSD 即 On-Screen-Display ，通常为屏幕上弹出显示的信息。  ## OSC 即 on-screen-controller ，MPV中指的是简易操控界面 #  在跳转时间轴时显示的信息类型 osd-on-seek=msg-bar # 更改OSD字体大小（全局，影响多个功能显示的文本）（默认值：55） #osd-font-size=40  # 以秒为单位显示OSD时间（毫秒精度），有助于查看视频帧的确切时间戳 osd-fractions=yes # 开始播放时短暂显示的信息：文件名 osd-playing-msg=\"${filename}\" # 设置OSD文本信息的持续时间（毫秒）（默认值：1000） osd-duration=2000 ## 音频 ## # 最大音量。默认值130（130的响度约为100的两倍） volume-max=120 # 播放器启动音量。0为静音，默认100 #volume=100  # 自动加载同名外挂音轨（fuzzy为模糊名，exact为精确名）  audio-file-auto=fuzzy ## 视频 ## # 如果做过专业校色应开启（系统目录存在对应的icm校色文档）。未做校色的广色域屏应手动指定 --target-prim= #icc-profile-auto=yes  ## 脚本 滤镜 着色器 ## ## 内置脚本开关（如果没有必要的目的，那就不要屏蔽mpv内建的功能 # 控制台 #load-osd-console=no # 统计信息 #load-stats-overlay=no  ## 字幕 ## # 自动加载当前播放文件的同名外挂字幕 sub-auto=fuzzy # 在指定的额外目录中寻找匹配的字幕，支持相对和绝对路径。 # 示例即自动搜索当前文件路径下名为\"sub\",\"subtitles\",\"字幕\"和C盘的\"字幕库\"文件夹内 #sub-file-paths=sub;subtitles;字幕;C:/字幕库 # 字幕首选语言为中文，但MPV优先加载外挂轨道，此项参数可能实际用处不大 slang=chs,sc,zh,chi,zho # 在插值和颜色管理之前，将字幕混合到视频帧上。值video类似于yes，但是以视频的原始分辨率绘制字幕，并与视频一起缩放 # 启用此功能会将字幕限制在视频的可见部分（不能出现在视频下方的黑色空白处） # 还会让字幕受 --icc-profile --target-prim --target-trc --interpolation --gamma-factor --glsl-shaders 的影响 # 与 --interpolation 一起使用时，可提高字幕渲染性能  #blend-subtitles=video  # [当 --blend-subtitles=yes/video 时无效] 使ASS字幕尽可能输出在黑边上 sub-ass-force-margins=yes ## 截图 ## ## 以下预设参数只是为了截取最高质量的图片（高质量截图处理效率较低） #  screenshot-format=png # JPEG的最高质量，默认为90  #screenshot-jpeg-quality=100  # 用与源视频相同的色度半采样写入JPEG，默认yes #screenshot-jpeg-source-chroma=yes  # PNG压缩等级，过高的等级影响性能，默认为7  #screenshot-png-compression=5  # PNG的压缩过滤器。默认5即可实现最佳压缩率  #screenshot-png-filter=5  # 使用适当的色彩空间标记屏幕截图（并非所有格式受支持）默认no #screenshot-tag-colorspace=yes  # 主要影响PNG，尽可能使用和视频输出时相同的位深，默认yes #screenshot-high-bit-depth=yes # 若直接在模板中设置路径，此时无需 --screenshot-directory screenshot-template=\"MPV-%P-N%n\" # 截屏文件保存路径 # ~/ 意思是 user home directory root (similar to shell, $HOME) screenshot-directory=\"~/Pictures\" VLC VLC is a free and open source cross-platform multimedia player and framework that plays most multimedia files, and various streaming protocols.\nSkins\n Put the downloaded VLT files in the following folder: ~/.local/share/vlc/skins2 Then open your VLC settings and change your interface from native to skins ( Tools = Performances = Interface = Use custom skin = Skin resource file = Save ). You can choose your desired skin already there or change it when you are in the skins mode by rightclicking somewhere on the skin and going to InterfaceChoose Skin. VLC needs to be restarted to change to skins mode.  这些主题好像只支持英文。\nSMPlayer 多媒体播放器\nDownload Aria2 Aria2是一款开源下载工具，可帮助简化不同设备和服务器之间的下载过程。它支持磁力链接、BT种子、http等类型的文件下载，与迅雷相比，Aria2有着优秀的性能及较低的资源占用，架构本身非常轻巧，通常只需要4兆字节（HTTP下载）到9兆字节（用于BitTorrent交互）之间。最重要的一点是Aria2完全免费！\n$ sudo apt-get install aria2 下载安装完成之后，可以通过输入 aria2c -v 来验证是否安装成功。\nUsage 命令行使用\n使用Aria2下载文件，只需在命令后附加地址即可：\n$ aria2c URL 下载后以其他名称保存文件\n$ aria2c -o fileName URL 下载多个文件\n$ aria2c -Z URL URL 从列表下载文件：\n$ aria2c -i URLs.txt 限制下载速度：\n# 单个文件 aria2c –max-download-limit=500k URL # 全局 aria2c –max-overall-download-limit=500k URL 断点续传：\n$ aria2c -c URL 下载磁力链接文件：要下载磁力链接文件，如果下载没有速度，可以添加--bt-tracker=选项，tracker 中用 , 隔开：\n$ aria2c --bt-tracker=tracker,tracker torrent tracker 服务器：\n  trackerslist：trackers_best (20 trackers) = link / mirror / mirror 2\n  TrackersListCollection：BEST Tracker list (78 trackers)= link / mirror\n  中国可用的 BT Tracker 服务器列表\n  将多行文本转换成一行并用逗号隔开\n$ cat tracker | xargs | tr ' ' ','   分段下载：可以加快文件的下载速度，对于下载大文件时特别有用，-s 后面的参数值介于1~5之间，你可以根据实际情况选择。下面命令将使用2连接来下载该文件：\n$ aria2c -s 2 URL 后台下载：\n$ aria2c -D url $ aria2c –deamon=true url 验证文件：\n$ aria2c –checksum=md5=提供的md5 设置dht端口：\n$ aria2c –dht-listen-port=1234 torrent 下载需要引用页的文件：\n$ aria2c –referer=referurl URL 下载需要Cookie验证的文件：\n$ aria2c –essay-header=’Cookie:key=value’ URL $ aria2c –load-cookies=cookie文件 URL 从密码保护的网站下载一个文件：\n$ aria2c --http-user=xxx --http-password=xxx URL $ aria2c --ftp-user=xxx --ftp-password=xxx URL 注意：当源地址存在诸如\u0026,*等shell的特殊字符，请使用单引号或双引号把URI包含起来。\n代理\n/usr/bin/aria2c --conf-path=/path/of/aria2.conf --{http,https,ftp,all}-proxy=\"[http://][USER:PASSWORD@]HOST[:PORT]\" 例如\n$ /usr/bin/aria2c --conf-path=/home/kurome/.aria2/aria2.conf --http-proxy=\"http://127.0.0.1:7890\" 覆盖先前定义的代理, 使用 \"\"，例如：\n/usr/bin/aria2c --conf-path=/path/of/aria2.conf --all-proxy=\"\" RPC Server 模式\n该模式可以配合 Web UI 进行图形管理。默认启动是 6800 端口，怕别人盗用，可以设置用户名和密码(1.18.4以上版本支持密钥)。\n$ aria2c --enable-rpc --rpc-listen-all --rpc-allow-origin-all -c --dir ~/Download Configuration 默认情况下，aria2 检查旧路径 $HOME/.aria2/aria2.conf 是否存在，否则它会将 $XDG_CONFIG_HOME/aria2/aria2.conf 解析为它的配置文件。 您可以使用 --conf-path 选项指定配置文件的路径。 如果您不想使用配置文件，请使用 --no-conf 选项。\n配置详解：\n# Description: Awesome Aria2 configuration file # Version: 2021.09.15 ## '#'开头为注释内容, 选项都有相应的注释说明, 根据需要修改 ## ## 被注释的选项填写的是默认值, 如为空则无默认设置，请自行选取需要更改的添加到你的配置文件中 ## ## 文件保存设置 ## # 下载路径(可使用绝对路径或相对路径), 默认: 当前启动位置 #dir= dir=/home/kurome/Downloads # 磁盘缓存 # 启用磁盘缓存. 如果设置为 0, 将禁用磁盘缓存. 此功能将下载的数据缓存在内存中, 最多占用此选项设置的字节数. 缓存存储由 aria2 实例创建并对所有下载共享. 由于数据以较大的单位写入并按文件的偏移重新排序, 所以磁盘缓存的一个优点是减少磁盘的 I/O. 如果调用哈希检查时并且数据缓存在内存中时, 将不需要从磁盘中读取. 大小可以包含 K 或 M (1K = 1024, 1M = 1024K). disk-cache=64M # 文件预分配方式, 可选：none, prealloc, trunc, falloc, 默认:prealloc # 预分配对于机械硬盘可有效降低磁盘碎片、提升磁盘读写性能、延长磁盘寿命。 # 机械硬盘使用 ext4（具有扩展支持），btrfs，xfs 或 NTFS（仅 MinGW 编译版本）等文件系统建议设置为 falloc # 若无法下载，提示 fallocate failed.cause：Operation not supported 则说明不支持，请设置为 none # prealloc 分配速度慢, trunc 无实际作用，不推荐使用。 # 固态硬盘不需要预分配，只建议设置为 none ，否则可能会导致双倍文件大小的数据写入，从而影响寿命。 file-allocation=none # 文件分配限制 # 不对比此参数设置大小小的分配文件. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). no-file-allocation-limit=64M # 断点续传 # 继续下载部分完成的文件. 启用此选项可以继续下载从浏览器或其他程序按顺序下载的文件. 此选项目前只支持 HTTP(S)/FTP 下载的文件. continue=true # 始终断点续传 # 始终断点续传. 如果设置为\"是\", aria2 始终尝试断点续传, 如果无法恢复, 则中止下载. 如果设置为\"否\", 对于不支持断点续传的 URI 或 aria2 遇到 N 个不支持断点续传的 URI (N 为 --max-resume-failure-tries 选项设置的值), aria2 会从头下载文件. 参见 --max-resume-failure-tries 参数. always-resume=false # 最大断点续传尝试次数 # 当 --always-resume 选项设置为\"否\"时, 如果 aria2 检测到有 N 个 URI 不支持断点续传时, 将从头开始下载文件. 如果 N 设置为 0, 当所有 URI 都不支持断点续传时才会从头下载文件. 参见 --always-resume 选项. max-resume-failure-tries=0 # 获取服务器文件时间 # 从 HTTP/FTP 服务获取远程文件的时间戳, 如果可用将设置到本地文件 remote-time=true ## 进度保存设置 ## # 从会话文件中读取下载任务 input-file=/home/kurome/.aria2/aria2.session # 会话文件保存路径 # 当退出时保存错误及未完成的任务到指定的文件中. 必须用绝对路径 # 您可以在重启 aria2 时使用 --input-file 选项重新加载. 如果您希望输出的内容使用 GZip 压缩, 您可以在文件名后增加 .gz 扩展名. 请注意, 通过 aria2.addTorrent() 和 aria2.addMetalink() RPC 方法添加的下载, 其元数据没有保存到文件的将不会保存. 通过 aria2.remove() 和 aria2.forceRemove() 删除的下载将不会保存. #save-session= save-session=/home/kurome/.aria2/aria2.session # 任务状态改变后保存会话的间隔时间（秒）, 0 为仅在进程正常退出时保存, 默认:0 # 为了及时保存任务状态、防止任务丢失，此项值只建议设置为 1 save-session-interval=1 # 自动保存任务进度到控制文件(*.aria2)的间隔时间（秒），0 为仅在进程正常退出时保存，默认：60 # 不论设置的值为多少, aria2 会在任务结束时保存控制文件. 可以设置的值为 0 到 600. # 此项值也会间接影响从内存中把缓存的数据写入磁盘的频率 # 想降低磁盘 IOPS (每秒读写次数)则提高间隔时间 # 想在意外非正常退出时尽量保存更多的下载进度则降低间隔时间 # 非正常退出：进程崩溃、系统崩溃、SIGKILL 信号、设备断电等 auto-save-interval=20 # 强制保存，即使任务已完成也保存信息到会话文件, 默认:false # 即使任务完成或删除时使用 --save-session 选项时也保存该任务. 此选项在这种情况下还会保存控制文件. 此选项可以保存被认为已经完成但正在做种的 BT 任务. # 开启后会在任务完成后保留 .aria2 文件，文件被移除且任务存在的情况下重启后会重新下载。 # 关闭后已完成的任务列表会在重启后清空。 force-save=false ## 下载连接设置 ## # 文件未找到重试次数 # 如果 aria2 从远程 HTTP/FTP 服务器收到 \"文件未找到\" 的状态超过此选项设置的次数后下载将会失败. 设置为 0 将会禁用此选项. 此选项仅影响 HTTP/FTP 服务器. 重试时同时会记录重试次数, 所以也需要设置 --max-tries 这个选项. max-file-not-found=10 # 最大尝试次数 # 设置最大尝试次数. 0 表示不限制，默认:5 max-tries=0 # 重试等待时间, 默认:0 (禁用) # 设置重试间隔时间(秒). 当此选项的值大于 0 时, aria2 在 HTTP 服务器返回 503 响应时将会重试. retry-wait=10 # 连接超时时间 # 设置建立 HTTP/FTP/代理服务器 连接的超时时间(秒). 当连接建立后, 此选项不再生效, 请使用 --timeout 选项. connect-timeout=10 # 超时时间。默认：60 timeout=10 # 最大同时下载任务数, 运行时可修改, 默认:5 max-concurrent-downloads=5 # 单服务器最大连接线程数, 任务添加时可指定, 默认:1 # 最大值为 16 (增强版无限制), 且受限于单任务最大连接线程数(split)所设定的值。 max-connection-per-server=16 # 单任务最大连接线程数, 任务添加时可指定, 默认:5 # 下载时使用 N 个连接. 如果提供超过 N 个 URI 地址, 则使用前 N 个地址, 剩余的地址将作为备用. 如果提供的 URI 地址不足 N 个, 这些地址多次使用以保证同时建立 N 个连接. 同一服务器的连接数会被 --max-connection-per-server 选项限制. split=64 # 文件最小分段大小, 添加时可指定, 默认:20M # aria2 不会分割小于 2*SIZE 字节的文件. 例如, 文件大小为 20MB, 如果 SIZE 为 10M, aria2 会把文件分成 2 段 [0-10MB) 和 [10MB-20MB), 并且使用 2 个源进行下载 (如果 --split = 2). 如果 SIZE 为 15M, 由于 2*15M  20MB, 因此 aria2 不会分割文件并使用 1 个源进行下载. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). 可以设置的值为: 1M-1024M. # 理论上值越小使用下载分段就越多，所能获得的实际线程数就越大，下载速度就越快，但受限于所下载文件服务器的策略。 min-split-size=4M # 文件分片大小，最小值为 1M，默认：1M # 设置 HTTP/FTP 下载的分配大小. aria2 根据这个边界分割文件. 所有的分割都是这个长度的倍数. 此选项不适用于 BitTorrent 下载. 如果 Metalink 文件中包含分片哈希的结果此选项也不适用. piece-length=1M # 允许分片大小变化。默认：false # 如果设置为\"否\", 当分片长度与控制文件中的不同时, aria2 将会中止下载. 如果设置为\"是\", 您可以继续, 但部分下载进度将会丢失. allow-piece-length-change=true # 分片选择算法 # 指定 HTTP/FTP 下载使用的分片选择算法. 分片表示的是并行下载时固定长度的分隔段. 如果设置为\"默认\", aria2 将会按减少建立连接数选择分片. 由于建立连接操作的成本较高, 因此这是合理的默认行为. 如果设置为\"顺序\", aria2 将选择索引最小的分片. 索引为 0 时表示为文件的第一个分片. 这将有助于视频的边下边播. --enable-http-pipelining 选项有助于减少重连接的开销. 请注意, aria2 依赖于 --min-split-size 选项, 所以有必要对 --min-split-size 选项设置一个合理的值. 如果设置为\"随机\", aria2 将随机选择一个分片. 就像\"顺序\"一样, 依赖于 --min-split-size 选项. 如果设置为\"几何\", aria2 会先选择索引最小的分片, 然后会为之前选择的分片保留指数增长的空间. 这将减少建立连接的次数, 同时文件开始部分将会先行下载. 这也有助于视频的边下边播. #stream-piece-selector=default # 最小速度限制 # 当下载速度低于此选项设置的值(B/s) 时将会关闭连接. 0 表示不设置最小速度限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). 此选项不会影响 BT 下载. lowest-speed-limit=0 # 全局最大下载速度 # 设置全局最大下载速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). max-overall-download-limit=0 # 最大下载速度 # 设置每个任务的最大下载速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). max-download-limit=0 # 禁用 IPv6, 默认:false disable-ipv6=true # 支持 GZip # 如果远程服务器的响应头中包含 Content-Encoding: gzip 或 Content-Encoding: deflate , 将发送包含 Accept: deflate, gzip 的请求头并解压缩响应. http-accept-gzip=true # URI 复用 # 当所有给定的 URI 地址都已使用, 继续使用已经使用过的 URI 地址. reuse-uri=false # URI 选择算法 # 指定 URI 选择的算法. 可选的值包括 \"按顺序\", \"反馈\" 和 \"自适应\". 如果设置为\"按顺序\", URI 将按列表中出现的顺序使用. 如果设置为\"反馈\", aria2 将根据之前的下载速度选择 URI 列表中下载速度最快的服务器. 同时也将有效跳过无效镜像. 之前统计的下载速度将作为服务器状态文件的一部分, 参见 --server-stat-of 和 --server-stat-if 选项. 如果设置为\"自适应\", 将从最好的镜像和保留的连接里选择一项. 补充说明, 其返回的镜像没有被测试过, 同时如果每个镜像都已经被测试过时, 返回的镜像还会被重新测试. 否则, 其将不会选择其他镜像. 例如\"反馈\", 其使用服务器状态文件. #uri-selector=feedback # 禁用 netrc，默认:false no-netrc=true # .netrc 文件路径 #netrc-path=$(HOME)/.netrc # 允许覆盖 # 如果相应的控制文件不存在时从头重新下载文件. 参见 --auto-file-renaming 选项. allow-overwrite=false # 文件自动重命名。默认:true # 重新命名已经存在的文件. 此选项仅对 HTTP(S)/FTP 下载有效. 新的文件名后会在文件名后、扩展名 (如果有) 前追加句点和数字(1..9999). auto-file-renaming=true # 使用 UTF-8 处理 Content-Disposition，默认:false # 处理 \"Content-Disposition\" 头中的字符串时使用 UTF-8 字符集来代替 ISO-8859-1, 例如, 文件名参数, 但不是扩展版本的文件名. content-disposition-default-utf8=true # 最低 TLS 版本，可选：TLSv1.1、TLSv1.2、TLSv1.3 默认:TLSv1.2 #min-tls-version=TLSv1.2 ## BT/PT 下载设置 ## # BT 监听端口(TCP), 默认:6881-6999 # 设置 BT 下载的 TCP 端口. 多个端口可以使用逗号 \",\" 分隔, 例如: 6881,6885. 您还可以使用短横线 \"-\" 表示范围: 6881-6999, 或可以一起使用: 6881-6889, 6999. # 直通外网的设备，比如 VPS ，务必配置防火墙和安全组策略允许此端口入站 # 内网环境的设备，比如 NAS ，除了防火墙设置，还需在路由器设置外网端口转发到此端口 listen-port=51413 # DHT 网络与 UDP tracker 监听端口(UDP), 默认:6881-6999 # 设置 DHT (IPv4, IPv6) 和 UDP 服务器使用的 UCP 端口. 多个端口可以使用逗号 \",\" 分隔, 例如: 6881,6885. 您还可以使用短横线 \"-\" 表示范围: 6881-6999, 或可以一起使用: 6881-6889, 6999. # 因协议不同，可以与 BT 监听端口使用相同的端口，方便配置防火墙和端口转发策略。 dht-listen-port=51413 # 启用 DHT (IPv4), 默认:true # 启用 IPv4 DHT 功能. 此选项同时会启用 UDP 服务器支持. PT 下载(私有种子)会自动禁用 enable-dht=true # 启用 DHT (IPv6)，默认:false # 启用 IPv6 DHT 功能. 如果种子设置为私有, 即使此选项设置为\"是\", aria2 也不会启用 DHT. 使用 --dht-listen-port 选项设置监听的端口. # 在没有 IPv6 支持的环境开启可能会导致 DHT 功能异常 enable-dht6=false # 外部 IP 地址 # 指定用在 BitTorrent 下载和 DHT 中的外部 IP 地址. 它可能被发送到 BitTorrent 服务器. 对于 DHT, 此选项将会报告本地节点正在下载特定的种子. 这对于在私有网络中使用 DHT 非常关键. 虽然这个方法叫外部, 但其可以接受各种类型的 IP 地址. # 使用场景：在家庭宽带没有公网 IP 的情况下可以把 BT 和 DHT 监听端口转发至具有公网 IP 的服务器，在此填写服务器的 IP ，可以提升 BT 下载速率。 #bt-external-ip= # DHT (IPv4) 文件，默认：$HOME/.aria2/dht.dat # 修改 IPv4 DHT 路由表文件路径. dht-file-path=/home/kurome/.aria2/dht.dat # DHT (IPv6) 文件，默认：$HOME/.aria2/dht6.dat # 修改 IPv6 DHT 路由表文件路径. dht-file-path6=/home/kurome/.aria2/dht6.dat # IPv4 DHT 网络引导节点 dht-entry-point=dht.transmissionbt.com:6881 # IPv6 DHT 网络引导节点 dht-entry-point6=dht.transmissionbt.com:6881 # 启用本地节点发现(LPD),PT 下载(私有种子)会自动禁用,默认:false bt-enable-lpd=true # 指定用于本地节点发现的接口，可能的值：接口，IP地址 # 如果未指定此选项，则选择默认接口。 #bt-lpd-interface= # 启用节点交换, 默认:true # 启用节点交换扩展. 如果种子设置为私有, 即使此选项设置为\"是\", aria2 也不会启用此功能. enable-peer-exchange=true # BT 下载最大连接数（单任务），运行时可修改。0 为不限制，默认:55 # 理想情况下连接数越多下载越快，但在实际情况是只有少部分连接到的做种者上传速度快，其余的上传慢或者不上传。 # 如果不限制，当下载非常热门的种子或任务数非常多时可能会因连接数过多导致进程崩溃或网络阻塞。 # 进程崩溃：如果设备 CPU 性能一般，连接数过多导致 CPU 占用过高，因资源不足 Aria2 进程会强制被终结。 # 网络阻塞：在内网环境下，即使下载没有占满带宽也会导致其它设备无法正常上网。因远古低性能路由器的转发性能瓶颈导致。 bt-max-peers=128 # BT 下载期望速度值（单任务），运行时可修改。单位 K 或 M 。默认:50K # BT 下载速度低于此选项值时会临时提高连接数来获得更快的下载速度，不过前提是有更多的做种者可供连接。 # 实测临时提高连接数没有上限，但不会像不做限制一样无限增加，会根据算法进行合理的动态调节。 bt-request-peer-speed-limit=10M # 全局最大上传速度, 运行时可修改, 默认:0 (无限制) # 设置全局最大上传速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). # 设置过低可能影响 BT 下载速度 max-overall-upload-limit=2M # 单任务上传速度限制, 默认:0 (无限制) # 设置每个任务的最大上传速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). max-upload-limit=0 # 最小分享率, 0 为一直做种, 默认:1.0 # 指定分享率. 当分享率达到此选项设置的值时会完成做种. 强烈建议您将此选项设置为大于等于 1.0. 如果您想不限制分享比率, 可以设置为 0.0. 如果同时设置了 --seed-time 选项, 当任意一个条件满足时将停止做种. seed-ratio=1.0 # 最小做种时间（分钟） # 此选项设置为 0 时, 将在 BT 任务下载完成后不进行做种. seed-time=30 # 做种前检查文件哈希, 默认:true # 如果设置为\"是\", 当使用 --check-integrity 选项完成哈希检查及文件完成后才继续做种. 如果您希望仅当文件损坏或未完成时检查文件, 请设置为\"否\". 此选项仅对 BT 下载有效 bt-hash-check-seed=true # 继续之前的BT任务时, 无需再次校验, 默认:false # 不检查之前下载文件中每个分片的哈希值. bt-seed-unverified=false # BT tracker 服务器连接超时时间（秒）。默认：60 # 建立连接后，此选项无效，将使用 bt-tracker-timeout 选项的值 bt-tracker-connect-timeout=10 # BT tracker 服务器超时时间（秒）。默认：60 bt-tracker-timeout=10 # BT 服务器连接间隔时间。默认：0 (自动) # 设置请求 BT 服务器的间隔时间 (秒). 此选项将完全覆盖服务器返回的最小间隔时间和间隔时间, aria2 仅使用此选项的值.如果设置为 0, aria2 将根据服务器的响应情况和下载进程决定时间间隔. #bt-tracker-interval=0 # BT 下载优先下载文件开头或结尾 # 尝试先下载每个文件开头或结尾的分片. 此选项有助于预览文件. 参数可以包括两个关键词: head 和 tail. 如果包含两个关键词, 需要使用逗号分隔. 每个关键词可以包含一个参数, SIZE. 例如, 如果指定 head=SIZE, 每个文件的最前 SIZE 数据将会获得更高的优先级. tail=SIZE 表示每个文件的最后 SIZE 数据. SIZE 可以包含 K 或 M (1K = 1024, 1M = 1024K). bt-prioritize-piece=head=32M,tail=32M # 保存通过 WebUI(RPC) 上传的种子文件(.torrent)，默认:true # 在 dir 选项设置的目录中保存上传的种子文件或 Metalink 文件. 文件名包括 SHA-1 哈希后的元数据和扩展名两部分. 对于种子文件, 扩展名为 '.torrent'. 对于 Metalink 为 '.meta4'. 如果此选项设置为\"否\", 通过 aria2.addTorrent() 或 aria2.addMetalink() 方法添加的下载将无法通过 --save-session 选项保存. # 所有涉及种子文件保存的选项都建议开启，不保存种子文件有任务丢失的风险。 # 通过 RPC 自定义临时下载目录可能不会保存种子文件。 rpc-save-upload-metadata=true # 下载种子文件(.torrent)自动开始下载, 默认:true，可选：false|mem # true：保存种子文件 # false：仅下载种子文件 # mem：将种子保存在内存中 # 如果设置为\"是\"或\"仅内存\", 当后缀为 .torrent 或内容类型为 application/x-bittorrent 的文件下载完成时, aria2 将按种子文件读取并下载该文件中提到的文件. 如果设置为\"仅内存\", 该种子文件将不会写入到磁盘中, 而仅会存储在内存中. 如果设置为\"否\", 则 .torrent 文件会下载到磁盘中, 但不会按种子文件读取并且其中的文件不会进行下载. follow-torrent=true # 种子文件下载完后暂停任务，默认：false # 在开启 follow-torrent 选项后下载种子文件或磁力会自动开始下载任务进行下载，而同时开启当此选项后会建立相关任务并暂停。 pause-metadata=false # 保存磁力链接元数据为种子文件(.torrent), 默认:false # 保存种子文件为 \".torrent\" 文件. 此选项仅对磁链生效. 文件名为十六进制编码后的哈希值及 \".torrent\"后缀. 保存的目录与下载文件的目录相同. 如果相同的文件已存在, 种子文件将不会保存. bt-save-metadata=true # 加载已保存的元数据文件(.torrent)，默认:false # 当使用磁链下载时, 在从 DHT 获取种子元数据之前, 首先尝试加载使用 --bt-save-metadata 选项保存的文件. 如果文件加载成功, 则不会从 DHT 下载元数据. bt-load-saved-metadata=true # 删除 BT 下载任务中未选择文件，默认:false # 当 BT 任务完成后删除未选择的文件. 要选择需要下载的文件, 请使用 --select-file 选项. 如果没有选择, 则所有文件都默认为需要下载. 此选项会从磁盘上直接删除文件, 请谨慎使用此选项. bt-remove-unselected-file=true # BT强制加密, 默认: false # 启用后将拒绝旧的 BT 握手协议并仅使用混淆握手及加密。可以解决部分运营商对 BT 下载的封锁，且有一定的防版权投诉与迅雷吸血效果。 # 此选项相当于后面两个选项(bt-require-crypto=true, bt-min-crypto-level=arc4)的快捷开启方式，但不会修改这两个选项的值。 bt-force-encryption=true # BT加密需求，默认：false # 启用后拒绝与旧的 BitTorrent 握手协议(\\19BitTorrent protocol)建立连接，始终使用混淆处理握手。 #bt-require-crypto=true # BT最低加密等级，可选：plain（明文），arc4（加密），默认：plain # 设置加密方法的最小级别. 如果节点提供多种加密方法, aria2 将选择满足给定级别的最低级别. #bt-min-crypto-level=arc4 # 分离仅做种任务，默认：false # 从正在下载的任务中排除已经下载完成且正在做种的任务，并开始等待列表中的下一个任务。 # 统计当前活动下载任务(参见 -j 选项) 时排除仅做种的任务. 这意味着, 如果参数设置为 -j3, 此选项打开并且当前有 3 个正在活动的任务, 并且其中有 1 个进入做种模式, 那么其会从正在下载的数量中排除(即数量会变为 2), 在队列中等待的下一个任务将会开始执行. 但要知道, 在 RPC 方法中, 做种的任务仍然被认为是活动的下载任务. bt-detach-seed-only=true ## 客户端伪装 ## # 自定义 User Agent user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36 Edg/93.0.961.47 # BT 客户端伪装 # PT 下载需要保持 user-agent 和 peer-agent 两个参数一致 # 部分 PT 站对 Aria2 有特殊封禁机制，客户端伪装不一定有效，且有封禁账号的风险。 # 自定义 User Agent，默认：aria2/$VERSION #user-agent=Deluge 1.3.15 # Peer Agent # 指定 BT 扩展握手期间用于节点客户端版本的字符串. peer-agent=Deluge 1.3.15 # 节点 ID 前缀 # 指定节点 ID 的前缀. BT 中节点 ID 长度为 20 字节. 如果超过 20 字节, 将仅使用前 20 字节. 如果少于 20 字节, 将在其后不足随机的数据保证为 20 字节. peer-id-prefix=-DE13F0- ## 执行额外命令 ## # 下载停止后执行的命令 # 从 正在下载 到 删除、错误、完成 时触发。暂停被标记为未开始下载，故与此项无关。 #on-download-stop=/home/kurome/.aria2/delete.sh # 下载完成后执行的命令 # 此项未定义则执行 下载停止后执行的命令 (on-download-stop) #on-download-complete=/home/kurome/.aria2/clean.sh # 下载错误后执行的命令 # 此项未定义则执行 下载停止后执行的命令 (on-download-stop) #on-download-error= # 下载暂停后执行的命令 #on-download-pause= # 下载开始后执行的命令 #on-download-start= # BT 下载完成后执行的命令 #on-bt-download-complete= ## RPC 设置 ## # 启用 JSON-RPC/XML-RPC 服务器, 默认:false enable-rpc=true # 接受所有远程请求, 默认:false # 在 RPC 响应头增加 Access-Control-Allow-Origin 字段, 值为 * .web界面跨域权限需要 rpc-allow-origin-all=true # 允许外部访问, 默认:false rpc-listen-all=true # RPC 监听端口, 默认:6800 rpc-listen-port=6800 # RPC 密钥, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项 rpc-secret=SetForYourself # RPC 最大请求大小 # 设置 JSON-RPC/XML-RPC 最大的请求大小. 如果 aria2 检测到请求超过设定的字节数, 会直接取消连接. rpc-max-request-size=10M # RPC 服务 SSL/TLS 加密, 默认：false # RPC 将通过 SSL/TLS 加密传输. RPC 客户端需要使用 https 协议连接服务器. 对于 WebSocket 客户端, 使用 wss 协议. 使用 --rpc-certificate 和 --rpc-private-key 选项设置服务器的证书和私钥. # 不推荐开启，建议使用 web server 反向代理，比如 Nginx、Caddy ，灵活性更强。 #rpc-secure= # 在 RPC 服务中启用 SSL/TLS 加密时的证书文件, # 使用 PEM 格式时，您必须通过 --rpc-private-key 指定私钥 #rpc-certificate=/path/to/certificate.pem # 在 RPC 服务中启用 SSL/TLS 加密时的私钥文件 #rpc-private-key=/path/to/certificate.key # 事件轮询方式, 可选：epoll, kqueue, port, poll, select, 不同系统默认值不同 # 设置事件轮训的方法. 对于 epoll, kqueue, port 和 poll, 只有系统支持时才可用. 最新的 Linux 支持 epoll. 各种 *BSD 系统包括 Mac OS X 支持 kqueue. Open Solaris 支持 port. 默认值根据您使用的操作系统不同而不同. #event-poll=select ## 高级选项 ## # 启用异步 DNS 功能。默认：true #async-dns=true # 指定异步 DNS 服务器列表，未指定则从 /etc/resolv.conf 中读取。 #async-dns-server=119.29.29.29,223.5.5.5,8.8.8.8,1.1.1.1 # 指定单个网络接口，可能的值：接口，IP地址，主机名 # 如果接口具有多个 IP 地址，则建议指定 IP 地址。 # 已知指定网络接口会影响依赖本地 RPC 的连接的功能场景，即通过 localhost 和 127.0.0.1 无法与 Aria2 服务端进行讯通。 #interface= # 指定多个网络接口，多个值之间使用逗号(,)分隔。 # 使用 interface 选项时会忽略此项。 #multiple-interface= ## 日志设置 ## # 日志文件保存路径，默认：不保存 # 如果设置为 \"-\", 日志则写入到 stdout. 如果忽略或设置为空字符串(\"\"), 日志将不会记录到磁盘上. #log= # 日志级别，可选 debug, info, notice, warn, error 。默认：debug #log-level=warn # 控制台日志级别，可选 debug, info, notice, warn, error ，默认：notice console-log-level=notice # 安静模式，禁止在控制台输出日志，默认：false quiet=false # 下载进度摘要输出间隔时间（秒），0 为禁止输出。默认：60 summary-interval=0 ## BitTorrent trackers ## # BT 服务器地址 2022/02/26 # 逗号分隔的 BT 服务器地址. 如果服务器地址在 --bt-exclude-tracker 选项中, 其将不会生效. bt-tracker=udp://open.tracker.cl:1337/announce,udp://tracker.opentrackr.org:1337/announce,udp://9.rarbg.com:2810/announce,udp://www.torrent.eu.org:451/announce,udp://tracker2.dler.org:80/announce,udp://tracker.torrent.eu.org:451/announce,udp://tracker.moeking.me:6969/announce,udp://tracker.bitsearch.to:1337/announce,udp://tracker.0x.tf:6969/announce,udp://tracker-udp.gbitt.info:80/announce,udp://tr.cili001.com:8070/announce,udp://retracker.lanta-net.ru:2710/announce,udp://open.stealth.si:80/announce,udp://ipv4.tracker.harry.lu:80/announce,udp://explodie.org:6969/announce,udp://exodus.desync.com:6969/announce,udp://bt2.archive.org:6969/announce,udp://bt1.archive.org:6969/announce,https://tracker.nanoha.org:443/announce,https://tracker.lilithraws.org:443/announce 更多：Aria2 完美配置\nAria2 Web 控制台\nAira2 没有软件界面，程序员可以用代码执行任务，但普通用户怎样添加下载任务呢？——打开浏览器，输入网址aria2c.com（YAAW 的中文版）就可以打开 Aria2 Web 控制台。\nJSON-RPC Path 默认为: http://localhost:6800/jsonrpc，如果提示 “Aria2 RPC 服务器错误”，按照以下方法修改：\n 普通情况设置为: http://host:port/jsonrpc  host: 指运行 Aria2 所在机器的 IP 或者名字 port: 使用 --rpc-listen-port 选项设置的端口, 未设置则是 6800；可通过 lsof -i:6800 查看端口是否被占用   使用 --rpc-secret=xxxxxx 选项设置为: http://token:xxxxxx@host:port/jsonrpc 使用 --rpc-user=user --rpc-passwd=pwd 选项设置为: http://user:pwd@host:port/jsonrpc 以上JSON-RPC Path 中的 http 可以用 ws 替代, 代表使用 WebSocket 协议。换用 ws 也可能解决 “Aria2 RPC 服务器错误”。 当使用 https://aria2c.com 访问时, 可能需要使用 https 或 wss 协议。  在 Web UI 中对 Aria2 的设置会在 Aria2 重启后丢失,，必要的设置请写入配置文件。\n已经下载完成的任务会在 Aria2 重启后消失, 除非启用了 --force-save 选项。\n自启动 两个方案：\n  建立 desktop 文件放入 ~/.config/autostart 中：\n$ vim ~/.config/autostart/aria2.desktop [Desktop Entry] Type=Application Exec=/usr/bin/aria2c --conf-path=/home/kurome/.aria2/aria2.conf -D --all-proxy=\"\" Hidden=false NoDisplay=false X-GNOME-Autostart-enabled=true Name[en_US]=Aria2 Daemon Name=Aria2 Daemon Comment[en_US]= Comment= 但这个就看桌面环境怎么操作了，比如我在 openSUSE KDE上的问题：开机登陆后，aria2 启动，但是 logout 后，aria2 就不启动了。\n  建议换 systemd，手写个 service\n$ sudo vim /usr/lib/systemd/system/aria2.service [Unit] Description=Aria2c download manager After=network.target [Service] Type=simple User=kurome ExecStart=/usr/bin/aria2c --conf-path=/home/kurome/.aria2/aria2.conf --all-proxy=\"\" [Install] WantedBy=multi-user.target $ sudo systemctl enable --now aria2.service “systemd: Failed at step USER spawning /usr/sbin/opendkim: No such process”：注意 User 部分，首先必须按照如下写，其次必须是存在的用户\nUser=tadeusz   Others AriaNg\nAriaNg 是一个让 aria2 更容易使用的现代 Web 前端\n 使用很简单，将文件下载解压即可，可以本地打开 index.html 文件，也可上传到服务器。 如果您懒得部署 AriaNg ，可以直接访问现成的 http://a2.ssss.fun 。 打开后需要配置 AriaNg，打开 AriaNg 设置 - RPC，修改 Aria2 RPC 地址 和 Aria2 RPC 密钥 ，点击 重新加载 AriaNg 即可。  WebUI-Aria2\n这个项目的目标是创建世界上最好和最热门的界面来与 aria2 交互。\n使用非常简单，只需在任何网络浏览器中下载并打开 index.html。\nAria2 for ….\n比如 YAAW for Chrome、Aria2 for Chrome 、Aria2 for Edge 之类的。\n在浏览器中直接内置一个 AriaNg，用于直接管理 Aria2。\nUsing Aria2 as a Daemon\n运行 gnome-session-properties打开应用程序首选项管理（即 Ubuntu 中的 Startup Applications），添加：\n Name: Aria2 Daemon Command: /usr/bin/aria2c --conf-path=/home/kurome/.aria2/aria2.conf -D  会建立 .config/autostart/aria2c.desktop\n[Desktop Entry] Type=Application Exec=/usr/bin/aria2c --conf-path=/home/vane/.aria2/aria2.conf -D Hidden=false NoDisplay=false X-GNOME-Autostart-enabled=true Name[en_US]=Aria2 Daemon Name=Aria2 Daemon Comment[en_US]= Comment= BT 下载预热 是这样滴，和很多BT客户端一样，Aria2有个dht.dat文件(开启ipv6还有个dht6.dat)，这玩意用于存储一种叫做DHT Routing Table的东西，DHT网络由无数节点组成，你接触到一个后能通过它接触到更多的节点，Aria2我记得是有内置的节点，但是！如果你在Aria2第一次运行的时候直接下载磁力链接或者冷门种子，你很可能遇到连MetaData都无法获取的情况，这就是因为第一次只是初始化dht.dat文件，你本地不存在DHT Routing Table的缓存，所以你无法从DHT网络中获取足够的数据。\n那么怎么办？我的建议是，找个热门种子(千万建议是种子，而不是磁力链接)，然后下一波，挂着做种，过几个小时后退出Aria2，或者等Aria2会话自动保存，你会发现dht.dat从空文件变成有数据了，这时候你下载就会正常很多。\n什么是 PT 答：PT（Private Tracker）下载其实也是Bt下载的一种，但有两个明显的改进：一是私密的小范围下载，二是进行流量统计，根据上载量决定你的权限。\nBT下载时，软件会分析.torrent种子文件得到Tracker地址，然后连接Tracker服务器，服务器返回其他下载者的IP，下载者再与这些IP联系进行下载，从而减轻了服务器的负担，BT下载的Tracker是公开的，而Private Tracker 下载(PT下载)的Tracker则是私有的，每个人的Tracker是不同的，即passkey不同，passkey对PT下载者很重要，所以不要轻易泄露出去。\n其实和通常BT相比，PT就是多了一个passkey验证，这样就能保证未注册的用户不能下载。所以passkey很重要，一旦发现有问题，就要到站点上去重置passkey。Tracker Server根据passkey把BT客户端上传量和下载量进行计算，从而算出分享率(上传量/下载量)。如果分享率太小，将会被删除帐号，从而不能下载。\n这样Private Tracker 下载(PT下载)是一种小范围的BT下载，通过禁用DHT有要求地选择并控制用户数量，这样，在有限的范围内，下载的用户基本上都可以达到自己的宽带上限，Private Tracker 下载(PT下载)下载还通过论坛等方式的约束机制将BT下载的理念现实化，真正让用户做到下载的过程中努力上传。因此，Private Tracker 下载(PT下载)的速度很快，能够让用户款待得到最大程度的使用。\nPT通过对做种时间和流量的要求在一定程度上避免了BT中存在的下完不做种的现象，因此在网络上，尤其是需要大文件（如高清）资源交换的时候广受欢迎，在PT站里，“水管”代表上传带宽的大小，大水管可以通过快速的上传获得积分，PT站点也会采取措施（比如做种时间，优惠等）使上传较慢的小水管能够参与贡献和共享资源。\nRPC 首先了解什么叫RPC，为什么要RPC，RPC是指远程过程调用，也就是说两台服务器A，B，一个应用部署在A服务器上，想要调用B服务器上应用提供的函数/方法，由于不在一个内存空间，不能直接调用，需要通过网络来表达调用的语义和传达调用的数据。\n比如说，一个方法可能是这样定义的：\nEmployee getEmployeeByName(String fullName) 那么：\n 首先，要解决通讯的问题，主要是通过在客户端和服务器之间建立TCP连接，远程过程调用的所有交换的数据都在这个连接里传输。连接可以是按需连接，调用结束后就断掉，也可以是长连接，多个远程过程调用共享同一个连接。 第二，要解决寻址的问题，也就是说，A服务器上的应用怎么告诉底层的RPC框架，如何连接到B服务器（如主机或IP地址）以及特定的端口，方法的名称名称是什么，这样才能完成调用。比如基于Web服务协议栈的RPC，就要提供一个endpoint URI，或者是从UDDI服务上查找。如果是RMI调用的话，还需要一个RMI Registry来注册服务的地址。 第三，当A服务器上的应用发起远程过程调用时，方法的参数需要通过底层的网络协议如TCP传递到B服务器，由于网络协议是基于二进制的，内存中的参数的值要序列化成二进制的形式，也就是序列化（Serialize）或编组（marshal），通过寻址和传输将序列化的二进制发送给B服务器。 第四，B服务器收到请求后，需要对参数进行反序列化（序列化的逆操作），恢复为内存中的表达方式，然后找到对应的方法（寻址的一部分）进行本地调用，然后得到返回值。 第五，返回值还要发送回服务器A上的应用，也要经过序列化的方式发送，服务器A接到后，再反序列化，恢复为内存中的表达方式，交给A服务器上的应用  为什么RPC呢？就是无法在一个进程内，甚至一个计算机内通过本地调用的方式完成的需求，比如比如不同的系统间的通讯，甚至不同的组织间的通讯。由于计算能力需要横向扩展，需要在多台机器组成的集群上部署应用，\nRPC的协议有很多，比如最早的CORBA，Java RMI，Web Service的RPC风格，Hessian，Thrift，甚至Rest API。\n其他 BT 下载工具  qBittorrent Transmission rTorrent Deluge  有支持ed2k的计划吗？ 真是笑死我了，你们难道真的认为那所谓迅雷等国产BT下载软件会使用真正的eDonkey网络？\n非也！它们只不过通过ed2k链接所列出的哈希值 直接链接到它们服务器自身（如迅雷、百度）所存储的文件 或链接到BitTorrent协议的种子和磁力链接上。你们用的软件不是P2P（Peer to Peer），而是P2SP（Peer to Server and to Peer）！\n如果你们用过真正的ed2k下载器（如eMule、aMule）的话，你们会发现，真正的eDonkey网络早已消亡，截至目前全球用户也就50-60万的样子。\n最后，作为曾经的eMule老用户，我可以说明真正的eDonkey网络不仅有繁琐的排队机制，还有文件优先级网络优先级等复杂的设定，远比你们想像中难用的多。\n warez groups\n  RELOADED\nRELOADED成立于2004年，前身是传奇破解组DEVIANCE，曾经在2次重大的政府扫荡中生存下来，由于竞争对手HOODLUM和VENGEANCE被端掉，RELOADED从此称霸PC游戏破解圈，在新游的首发破解上，RELOADED能占据80%。\nRELOADED也是国内最常见的PC游戏破解组，你在各个资源站看到标题写着某某游戏“R组”破解，就是他们的“杰作”。\n高光时刻：\n1、各大破解组都在追求游戏发售前破解游戏，而RELOADED最著名的应该就是2008年对《刺客信条》的破解了，R组在游戏发售1个月之前就放出破解版。\n2、修复了《彩虹六号：维加斯2》数字版的BUG，育碧当年对《彩虹六号：维加斯2》数字版无法运行的BUG毫无办法，最终只能给玩家发放RELOADED的游戏破解补丁…这次事件让育碧颜面扫地，却成就了RELOADED。\n3、打破《分裂细胞：混沌理论》424天不被破解的记录。\n  SKIDROW\nSKIDROW 是来自美国的游戏破解组，成立时间大概是上个世纪90年代，主要作品有《猎杀潜艇5》、《刺客信条2》等，之后由于人员解散，直到2007年 SKIDROW 才重新开始活跃。\nSKIDROW 在同行中的口碑一般，被RELOADED等破解组爆出过盗用其他破解组代码的料。\n1、 Skidrow成名于DRM事件，DRM是育碧的反破解系统，Skidrow破解组成功破解了育碧两袋DRM系统，最著名的作品是对《刺客信条2》的破解。\n2、2017年，继CPY之后，成功破解了最新的Denuvo64加密技术。并批评CPY只会用Emulation(仿真器)而不是真正的破解。\n  Razor1911\nRazor1911 是来自挪威的破解组，成立于1985年，最初由3个年轻的计算机爱好者组成，主要是破解Commodore64和amiga机种的游戏软件，名称中的1911是因为1991在16进制里写作777，代表不朽。\n作为老牌破解组之一， Razor1911在2001年和2004年的FBI两次反盗版行动中幸存下来，不知道是不是因为名字带来的好运。在业内，如果说RELOADED是以高产著称，那么Razor1911就是以技术见长。\nRazor1911破解组最著名的作品应该是《星际争霸：母巢之战》的硬盘版，间接导致了星际争霸在全世界的流行。\n1、制作《星际争霸：母巢之战》硬盘版，在这一版的星际争霸中，所有文件的体积加起来只有100m多一点，而最为经典的地方就在于他们把光盘版中两个600m左右的install.exe文件压缩到了只有22m的大小。\n2、破解《GTA4》和该游戏价值20万美元的SecuRom反破解系统。\n3、破解EA origin平台的加密技术。\n4、破解《孤岛危机》和《上古卷轴5：天际》。\n  CPY\nCPY全名 CONSPiR4CY，是来自于意大利的破解组，成立于1999年，相比上面的三大破解组成立较晚。但是最近几年，CPY在破解了Denuvo加密技术（D加密）后名声大噪，俨然已超越了上面三大破解组。\n在国内有CPY掌握核心技术的说法，Steam、EA origin、Denuvo等加密技术先后被CPY破解。\n高光时刻：\n1、2015年，继Steam平台后，EA origin平台加密技术被破解，宣布了这套加密系统彻底完蛋。\n2、破解D加密技术，随后一系列热门游戏遭到破解，包括：《合金装备5 幻痛》《古墓丽影 崛起》《毁灭战士4》《看门狗2》等等。\n  CODEX\n会破解D加密，如今几乎已经垄断破解业。并在.nfo文件招聘栏中提到CODEX什么都不要，只要竞争!\n2022年2月，CODEX宣告退休。\n PLAZA EMPRESS    STEAMPUNKS\n  youtube-dl youtube-dl 是一个命令行程序，用于从 YouTube.com 和更多其他网站下载视频。 基于 Python 实现，不限于特定平台。\n# 安装 $ pip install -i https://pypi.tuna.tsinghua.edu.cn/simple youtube-dl # 使用 $ youtube-dl [OPTIONS] URL [URL...] 当前版本（2021.06.06）不能下载哔哩哔哩播放列表，可以用类似软件如 you-get， annie 代替。\nUsage 下载视频或整个视频播放列表\n 要从 Youtube 下载视频或整个视频播放列表，只需直接使用 URL 即可：youtube-dl [url]。程序自动选择一个最清晰的格式下载。 如果要指定视频下载之后的名称，可以使用如下方式：youtube-dl -o '名称' [url]。 还可以在下载视频时附加更多详细信息，可用的参数有标题、上传者名称（频道名称）和视频上传日期等：youtube-dl -o '%(title)s by %(uploader)s on %(upload_date)s in %(playlist)s.%(ext)s' [ul]。  查看视频的所有类型，只看不下载\n命令：youtube-dl -F [url]或者youtube-dl --list-formats [url]。 这是一个列清单参数，执行后并不会下载视频，但能知道这个目标视频都有哪些格式存在，以便有选择的下载。\n下载指定质量的视频和音频并自动合并\n下载最佳/最差质量的音/视频文件：\n默认情况下，youtube-dl将自主选择最佳质量的视频下载。 但是，也可以以特定的质量或格式来下载视频或播放列表\nYoutube-dl 支持以下品质：\n best选择最佳质量的音/视频文件 worst选择质量最差的格式（视频和音频） bestvideo选择最佳质量的仅视频格式（例如DASH视频），可能无法使用。 worstvideo选择质量最差的纯视频格式，可能无法使用。 bestaudio选择最优质的音频格式，可能无法使用。 worstaudio选择质量最差的音频格式，可能无法使用。  例如，如果要自动选择并下载最佳质量格式（音频和视频），只需使用以下命令：youtube-dl -f best [url]。\n您还可以组合使用以下不同的格式选项：youtube-dl -f bestvideo+bestaudio [ul]。该命令将分别下载最高质量的仅视频和最高质量的纯音频格式，再用ffmpeg或avconv合并成一个最佳质量的mkv文件；如果您不想合并，请将+（加号）替换为,（逗号）即可分别得到最高质量的音频和视频（两个文件）：youtube-dl -f 'bestvideo,bestaudio' [url]。\n 下载指定质量的音/视频文件：\n-F 获取的所有视频格式的清单，最左边一列就是编号对应着不同的格式。由于YouTube的1080p及以上的分辨率都是音视频分离的，所以我们需要分别下载视频和音频，可以使用137+140这样的组合。如果系统中安装了ffmpeg的话，youtube-dl 会自动合并下好的视频和音频，然后自动删除单独的音视频文件：youtube-dl -f [format code] [url]。\n从播放列表下载视频时，某些视频可能没有相同的格式。 在这种情况下，可以按首选顺序指定多个格式代码，例如：命令youtube-dl -f 22/17/18 将以格式 22 下载视频（如果可用）；如果格式 22不可用，则它将下载格式 17（如果可用）；如果格式 22 和 17 都不可用，最后尝试下载格式 18。如果所有格式代码都不匹配，Youtube-dl 会报出提示。还需要注意的是，斜杠是左关联的，即最左侧的格式代码是首选。\n下载字幕\n youtube-dl --write-sub [url]这样会下载一个vtt格式的英文字幕和mkv格式的1080p视频下来 youtube-dl --write-sub --skip-download [url]下载单独的vtt字幕文件,而不会下载视频 youtube-dl --write-sub --all-subs [url]下载所有语言的字幕(如果有的话) youtube-dl --write-auto-sub [url]下载自动生成的字幕(YouTube only)  下载多个视频\n youtube-dl  有时我们需要一次下载多个不同的视频，此时我们只需用空格将多个URL分隔开即可。 youtube-dl -a url.txt也可以将要下载视频的URL全部放在文本文件中，并将其作为参数传递给youtube-dl。此命令将下载url.txt文件中所有URL指向的视频。  只下载（视频中的）音频\n youtube-dl -x [url]仅从视频网站下载其音频。 youtube-dl -x --audio-format mp3 [ul]默认情况下，youtube-dl 将以Ogg （opus）格式保存音频。此命令将从给定的视频/播放列表下载音频，将其转换为 MP3 并将其保存在当前目录中。应注意：您应该安装 ffmpeg 或 avconv 将文件转换为 mp3 格式。  下载带有描述、元数据、注释、字幕和缩略图的视频\n要下载视频及其他详细信息，如：说明、元数据、注释、字幕和缩略图等，请使用以下命令： youtube-dl --write-description --write-info-json --write-annotations --write-sub --write-thumbnail [url]\n通过文件扩展名下载音/视频\n  以您的首选格式下载视频，例如 MP4，只需执行：youtube-dl --format mp4 [url]或者youtube-dl -f mp4 [url]。\n  某些视频可能无法以您的首选格式提供。 在这种情况下，youtube-dl 将下载其他最佳可用格式。例如： youtube-dl -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best' [ul] 此命令将下载最佳质量的MP4格式文件。如果 MP4 格式不可用，则它将下载其他最佳可用格式。\n限制下载视频的大小\n  从YouTube播放列表下载多个视频时，您可能只想下载特定大小的视频。例如：\n 此命令不会下载任何小于指定大小（例如100MB）的视频：youtube-dl --min-filesize 100M 。 如果您不想下载大于给定大小的视频，可以这样：youtube-dl --max-filesize 100M 。  我们还可以用组合格式，选择运算符来下载特定大小的视频。例如：\n 以下命令将下载最佳视频格式但不大于 100MB 的视频：youtube-dl -f 'best[filesize。  按日期下载视频\nYoutube-dl 允许我们按照上传日期来筛选和下载视频或播放列表，例如：\n 要下载 2019 年 8 月 1 日上传的视频，可以使用：youtube-dl --date 20190801 [URL]； 下载在特定日期或之前上传的视频：youtube-dl --datebefore 20190801 [URL]； 下载在特定日期或之后上传的视频：youtube-dl --dateafter 20190101 [URL]； 仅下载过去 6 个月内上传的视频：youtube-dl --dateafter now-6months [URL]； 下载特定时间段内（例如 2018 年 1 月 1 日至 2019 年 1 月 1 日）上传的视频：youtube-dl --dateafter 20180101 --datebefore 20190101 [URL]。  从播放列表下载特定的视频\n从播放列表下载特定的视频，是youtube-dl 的另一个非常有用的功能。例如：\n 要从播放列表下载第 10 个文件，可使用：youtube-dl --playlist-items 10 [playlist_url]； 要下载多个指定的文件，只需用逗号分隔：youtube-dl --playlist-items 2,3,7,10 [playlist_url]；  也可以按序号来指定要下载范围，例如：\n 从第 10 个开始，直接下载完整个列表：youtube-dl --playlist-start 10 [playlist_url]； 在播放列表中仅下载从第 2 到第 5 的文件：youtube-dl --playlist-start 2 --playlist-end 5 [playlist_url]。  Configuration 在 Linux 和 macOS 上，系统配置文件位于 /etc/youtube-dl.conf，用户配置文件位于 ~/.config/youtube-dl/config。\n# Continue on download errors, for example to skip unavailable videos in a playlist --ignore-errors # Time to wait before giving up, in seconds --socket-timeout 10 # Download only videos not listed in the archive file. Record the IDs of all downloaded videos in it. #--download-archive /path/archive.txt # Number of retries (default is 10), or \"infinite\". --retries infinite # Give these arguments to the external downloader --external-downloader aria2c --external-downloader-args \"--no-conf -c\" # Output filename template, see the \"OUTPUT TEMPLATE\" for all the info -o '~/Videos/%(id)s.%(ext)s' # Write thumbnail image to disk #--write-thumbnail # download best 30hz mp4 file , h264+aac ,use http or https protocol,because we can use aria2c downloader to have a faster speed --format '(bestvideo[ext=mp4][fps # Embed thumbnail in the audio as cover art #--embed-thumbnail # Write metadata to the video file --add-metadata curl 简介 curl 是常用的命令行工具，用来请求 Web 服务器。它的名字就是客户端（client）的 URL 工具的意思。\n它的功能非常强大，命令行参数多达几十种。如果熟练的话，完全可以取代 Postman 这一类的图形界面工具。\n本文介绍它的主要命令行参数，作为日常的参考，方便查阅。\n不带有任何参数时，curl 就是发出 GET 请求。\n$ curl https://www.example.com 上面命令向www.example.com发出 GET 请求，服务器返回的内容会在命令行输出。\n主要命令行参数 -A\n-A参数指定客户端的用户代理标头，即User-Agent。curl 的默认用户代理字符串是curl/[version]。\n$ curl -A 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36' https://google.com 上面命令将User-Agent改成 Chrome 浏览器。\n$ curl -A '' https://google.com 上面命令会移除User-Agent标头。\n也可以通过-H参数直接指定标头，更改User-Agent。\n$ curl -H 'User-Agent: php/1.0' https://google.com -b\n-b参数用来向服务器发送 Cookie。\n$ curl -b 'foo=bar' https://google.com 上面命令会生成一个标头Cookie: foo=bar，向服务器发送一个名为foo、值为bar的 Cookie。\n$ curl -b 'foo1=bar;foo2=bar2' https://google.com 上面命令发送两个 Cookie。\n$ curl -b cookies.txt https://www.google.com 上面命令读取本地文件cookies.txt，里面是服务器设置的 Cookie（参见-c参数），将其发送到服务器。\n-c\n-c参数将服务器设置的 Cookie 写入一个文件。\n$ curl -c cookies.txt https://www.google.com 上面命令将服务器的 HTTP 回应所设置 Cookie 写入文本文件cookies.txt。\n-d\n-d参数用于发送 POST 请求的数据体。\n$ curl -d 'login=emma＆password=123'-X POST https://google.com/login # 或者 $ curl -d 'login=emma' -d 'password=123' -X POST https://google.com/login 使用-d参数以后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。\n-d参数可以读取本地文本文件的数据，向服务器发送。\n$ curl -d '@data.txt' https://google.com/login 上面命令读取data.txt文件的内容，作为数据体向服务器发送。\n–data-urlencode\n--data-urlencode参数等同于-d，发送 POST 请求的数据体，区别在于会自动将发送的数据进行 URL 编码。\n$ curl --data-urlencode 'comment=hello world' https://google.com/login 上面代码中，发送的数据hello world之间有一个空格，需要进行 URL 编码。\n-e\n-e参数用来设置 HTTP 的标头Referer，表示请求的来源。\ncurl -e 'https://google.com?q=example' https://www.example.com 上面命令将Referer标头设为https://google.com?q=example。\n-H参数可以通过直接添加标头Referer，达到同样效果。\ncurl -H 'Referer: https://google.com?q=example' https://www.example.com -F\n-F参数用来向服务器上传二进制文件。\n$ curl -F 'file=@photo.png' https://google.com/profile 上面命令会给 HTTP 请求加上标头Content-Type: multipart/form-data，然后将文件photo.png作为file字段上传。\n-F参数可以指定 MIME 类型。\n$ curl -F 'file=@photo.png;type=image/png' https://google.com/profile 上面命令指定 MIME 类型为image/png，否则 curl 会把 MIME 类型设为application/octet-stream。\n-F参数也可以指定文件名。\n$ curl -F 'file=@photo.png;filename=me.png' https://google.com/profile 上面命令中，原始文件名为photo.png，但是服务器接收到的文件名为me.png。\n-G\n-G参数用来构造 URL 的查询字符串。\n$ curl -G -d 'q=kitties' -d 'count=20' https://google.com/search 上面命令会发出一个 GET 请求，实际请求的 URL 为https://google.com/search?q=kitties\u0026count=20。如果省略--G，会发出一个 POST 请求。\n如果数据需要 URL 编码，可以结合--data--urlencode参数。\n$ curl -G --data-urlencode 'comment=hello world' https://www.example.com -H\n-H参数添加 HTTP 请求的标头。\n$ curl -H 'Accept-Language: en-US' https://google.com 上面命令添加 HTTP 标头Accept-Language: en-US。\n$ curl -H 'Accept-Language: en-US' -H 'Secret-Message: xyzzy' https://google.com 上面命令添加两个 HTTP 标头。\n$ curl -d '{\"login\": \"emma\", \"pass\": \"123\"}' -H 'Content-Type: application/json' https://google.com/login 上面命令添加 HTTP 请求的标头是Content-Type: application/json，然后用-d参数发送 JSON 数据。\n-i\n-i参数打印出服务器回应的 HTTP 标头。\n$ curl -i https://www.example.com 上面命令收到服务器回应后，先输出服务器回应的标头，然后空一行，再输出网页的源码。\n-I\n-I参数向服务器发出 HEAD 请求，然会将服务器返回的 HTTP 标头打印出来。\n$ curl -I https://www.example.com 上面命令输出服务器对 HEAD 请求的回应。\n--head参数等同于-I。\n$ curl --head https://www.example.com -k\n-k参数指定跳过 SSL 检测。\n$ curl -k https://www.example.com 上面命令不会检查服务器的 SSL 证书是否正确。\n-L\n-L参数会让 HTTP 请求跟随服务器的重定向。curl 默认不跟随重定向。\n$ curl -L -d 'tweet=hi' https://api.twitter.com/tweet –limit-rate4\n--limit-rate用来限制 HTTP 请求和回应的带宽，模拟慢网速的环境。\n$ curl --limit-rate 200k https://google.com 上面命令将带宽限制在每秒 200K 字节。\n-o\n-o参数将服务器的回应保存成文件，等同于wget命令。\n$ curl -o example.html https://www.example.com 上面命令将www.example.com保存成example.html。\n-O\n-O参数将服务器回应保存成文件，并将 URL 的最后部分当作文件名。\n$ curl -O https://www.example.com/foo/bar.html 上面命令将服务器回应保存成文件，文件名为bar.html。\n-s\n-s参数将不输出错误和进度信息。\n$ curl -s https://www.example.com 上面命令一旦发生错误，不会显示错误信息。不发生错误的话，会正常显示运行结果。\n如果想让 curl 不产生任何输出，可以使用下面的命令。\n$ curl -s -o /dev/null https://google.com -S\n-S参数指定只输出错误信息，通常与-s一起使用。\n$ curl -s -o /dev/null https://google.com 上面命令没有任何输出，除非发生错误。\n-u\n-u参数用来设置服务器认证的用户名和密码。\n$ curl -u 'bob:12345' https://google.com/login 上面命令设置用户名为bob，密码为12345，然后将其转为 HTTP 标头Authorization: Basic Ym9iOjEyMzQ1。\ncurl 能够识别 URL 里面的用户名和密码。\n$ curl https://bob:12345@google.com/login 上面命令能够识别 URL 里面的用户名和密码，将其转为上个例子里面的 HTTP 标头。\n$ curl -u 'bob' https://google.com/login 上面命令只设置了用户名，执行后，curl 会提示用户输入密码。\n-v\n-v参数输出通信的整个过程，用于调试。\n$ curl -v https://www.example.com --trace参数也可以用于调试，还会输出原始的二进制数据。\n$ curl --trace - https://www.example.com -x\n-x参数指定 HTTP 请求的代理。\n$ curl -x socks5://james:cats@myproxy.com:8080 https://www.example.com 上面命令指定 HTTP 请求通过myproxy.com:8080的 socks5 代理发出。\n如果没有指定代理协议，默认为 HTTP。\n$ curl -x james:cats@myproxy.com:8080 https://www.example.com 上面命令中，请求的代理使用 HTTP 协议。\n-X\n-X参数指定 HTTP 请求的方法。\n$ curl -X POST https://www.example.com 上面命令对https://www.example.com发出 POST 请求。\nHTTPie HTTPie（http）以一种更人性化的方式做同样的工作。你会看到彩色的、格式化的输出，这使得它更容易理解和调试。\naxel Lightweight CLI download accelerator\nUSENET 起源 简单地说，USENET是一个巨大无比的网上讨论组，一般也称为\"新闻组\"（newsgroups）。你可以将它想象成一个包罗万象、无所不有的网上论坛，但是它又不同于我们通常看到的普通论坛。这要从它的起源说起。\n上个世纪70年代末，当时还没有互联网和浏览器，它们都要在十多年后才会出现。那时所谓\"上网\"，就是用modem（调制解调器），拨一个电话号码，将自己的电脑连到另一台电脑（也称\"主机\"），收收邮件，看看上面系统管理员发的通告。如果想换一台主机看看，那就必须先挂断，再拨另外一个电话号码。\n这样的上网方式，很不利于开展多人的讨论。由于是拨号上网，只有地理位置相近的用户，才会登录同一台主机。很难想象，同一台机器的登录用户，既有东岸的纽约人，也有西岸的洛杉矶人。即使长途电话费不是问题，当时的主机也没有能力同时负担太多的远程终端。因此，迫切需要一种大规模的、分布式的、多中心的远程信息交换手段。\n1979年，Duke大学的两个研究生Tom Truscott和Jim Ellis，提出一种分布式的网上讨论组的构想。这种讨论组创建之初，主要是供UNIX爱好者协会（USENIX）的成员使用，因此就被定名为USENET。当然，后来全世界的用户都在使用它。\n运行机制 USENET的运行机制其实非常简单。对于用户来说，只有三步。\n1）网络服务提供商（ISP）在一个网络中，设定一台服务器作为USENET专用服务器，再将它的网址告诉用户。\n2）用户想要发言的时候，就向这个网址发送帖子（post），这与发送Email很相似，但是两者格式不一样，在USENET上发言必须使用专用的客户端。不过，现在大多数的Email客户端都带有新闻组功能，最常见的Outlook Express的设置可以参考网上的说明。\n3）查看其他人的发言时，就必须从服务器上下载其他人的帖子。下载完成后，如果想回复某人的帖子，就再重复第二步。\n可以看到，这个过程同邮件列表的运行几乎一模一样，不同之处在于，USENET服务器每天会同其他USENET服务器交换帖子。这就是说，全世界所有的USENET服务器最终都可以互相交换帖子，保持内容的同步。所以理论上，不管你的帖子是发到哪一台服务器上，最终全世界的人们都会看到，并且会从世界各地给你回复。\n因此，USENET就有一个其他交流机制所没有的优点，即这是一个真正的全世界参与的讨论组。\n内容结构 由于USENET中的讨论内容无所不包，所以必须根据主题分类。每一个主题就是一个\"频道\"，对这个主题感兴趣的用户就订阅这个频道。\nUSENET中的主题分类采用等级制（hierarchies），在形式上同域名很相似，即\"一级主题.二级主题.三级主题….\"，中间以小数点分隔。\n一级主题有9个。\n * comp.*: 与计算机相关的讨论。（computer-related discussions，比如comp.software, comp.sys.amiga）\n* misc.*: 各种不属于其他分类的主题。（Miscellaneous topics，比如misc.education, misc.forsale, misc.kids）\n* news.*: 对USENET本身的讨论（比如news.groups, news.admin）\n* rec.*: 休闲和娱乐（Recreation and entertainment，比如rec.music, rec.arts.movies）\n* sci.*: 与科学相关的讨论。（Science related discussions，比如sci.psychology, sci.research）\n* soc.*: 与社会相关的讨论。（Social discussions，比如soc.college.org, soc.culture.african）\n* talk.*: 各种争议性话题的讨论。（Talk about various controversial topics，比如talk.religion, talk.politics, talk.origins）\n* humanities.*: 艺术、文学、哲学方面的讨论。（Fine arts, literature, and philosophy，比如humanities.classics, humanities.design.misc）\n* alt.*: 自由讨论区。（alternative）\n 这9个一级主题中，除了alt.*以外，都不能自行设立讨论区。只有在alt主题区中，可以自己发起主题\"频道\"。\n二进制内容 USENET最初设计的时候，只打算用来传递文本信息，没有考虑传递二进制数据（也就是\"文件\"）。但是，随着互联网的发展，不传递二进制数据看上去是不可能的。\n于是，专门的编码方式被设计了出来，使得二进制文件可以转换成文本文件，在USENET上传递，用户下载以后再传换成原来的格式。这时，USENET就不仅是一个讨论组了，而成了传递文件的一种手段，图片、音频和视频都可以通过USENET传播。\n事实上，如今USENET上的流量，99%都已经是二进制文件了。它们大部分都在alt.binaries这个主题中传播。由于不受监管，所以各种各样的文件都有。\n收费服务 根据一项统计，2007年4月USENET上一天的流量为3.12TB，且还在快速增加中。这么大的流量，使得世界上提供USENET的服务商肯定不会很多。大家可以查看这个网页，上面有USENET提供商的不完全列表。\n这些服务商，又分为免费和收费两种。免费的USENET绝大多数都不提供二进制文件下载，查看alt.free.newsservers主题可以获得最新的免费USENET服务器的信息。\n在收费服务商中，名气比较大的是GIGANEWS，它提供多种收费账户供用户选择。其中白金用户每月费用为19.99美元，可以无限量下载，14天内不满意可以退款。如果你是一个狂热的下载爱好者，我强烈推荐去购买一个账户。\nGoogle Groups Google Groups也提供免费USENET服务。（当然，没有二进制文件下载。）我会另写文章专门介绍，这里就省略了。\n百度网盘 阿里云盘小白羊版 BaiduPCS-Go 坚果云 xdm Powerfull download accelerator and video downloader\nMotrix A full-featured download manager.\nThunder flatpak 版迅雷下载，用于下载 ed2k 链接。\nEditor VSCode 中国国内下载 VSCode 速度慢问题解决：使用 azure 中国 cdn 镜像地址加速下载 VSCode\n将默认下载地址\nhttps://az764295.vo.msecnd.net/stable/ 替换为 vscode.cdn.azure.cn\nhttps://vscode.cdn.azure.cn/stable/ 自动换行\n将word wrap的off改成on\n最适合程序员的笔记软件\nhttps://github.dev/[用户名]/[仓库名] 大小写转换快捷键\n File-Preference-Keybord Shortcuts 或直接按ctrl+k+ctrl+s 在上面的搜索栏中，输入 Transform 就可以看到有Transform to Uppercase和Trasnfrom to Lowercase的命令 设置快捷键  Google Keep Now I am using Google Keep.\nGoogle Keep键盘快捷键\n   hortcut Action     J/K Next/previous note   Shift + J/K Move note to next/previous position   N/P Next/previous list item   Shift + N/P Move list item to next/previous position   C New note   L New list   / Search   Ctrl + A Select all   E Archive   # Delete   F Pin/unpin   X Select   Ctrl + G Toggle list and grid view   Esc Close editor   Ctrl + Shift + 8 Toggle checkboxes   Ctrl + ] / [ Indent/dedent list item   ? Open shortcut list   @ Send feedback    Joplin $ wget -O - https://raw.githubusercontent.com/laurent22/joplin/dev/Joplin_install_and_update.sh | bash joplin.desktop\n[Desktop Entry] Encoding=UTF-8 Name=Joplin Comment=Joplin for Desktop Exec=${HOME}/.joplin/Joplin.AppImage ${SANDBOXPARAM} %u Icon=joplin StartupWMClass=Joplin Type=Application Categories=Office; MimeType=x-scheme-handler/joplin; X-GNOME-SingleWindow=true // should be removed eventually as it was upstream to be an XDG specification SingleMainWindow=true 为知笔记 notion 思源笔记 备份盘 \u0026 同步盘  备份盘：\n同步盘：\nObsidian 闭源软件\n最适合程序员的笔记软件 程序员的笔记软件，应该满足下面几个条件。\n 跨平台，同时支持桌面电脑（Windows，Mac，Linux）和手机（Android，iOS）。 随时同步，打开任何一台机器，都能接着上一次的工作继续写。 实时存储，如果软件突然关闭，也不会丢失内容。 支持 Markdown 格式，便于后期直接发布。 支持推送到远程 Git 仓库，产生历史版本，同时作为远程备份。  Stackedit.io 和 HackMD.io，都不是很理想。\nGitHub 官方推出的 github.dev。只要访问 https://github.dev/[用户名]/[仓库名]，你就能在浏览器里面，使用 VS Code 编辑指定仓库。它实际上就是 VS Code 编辑器的 Web 版，并且与 Git 高度集成。GitHub 提供了一个快捷入口。 打开 GitHub 仓库主页，按一下小数点（.）这个键， 页面就会自动跳转到 VS Code 编辑环境。\n如果你更希望使用手机原生 App，我推荐 Obsidian。它有全平台的客户端，并且可以参考这篇文章设置 Git 集成。\n评论里还有很多推荐，选择一个合适的就行。\n安装 使用 AppImage 报 dlopen(): error loading libfuse.so.2 错误：\n$ sudo apt install libfuse2 自动同步 全平台同步使用 remotely-save，同时将文档备份到 Git。\n我希望在每次关闭 Obsidian 窗口（即编辑完毕后）自动同步内容到 Git 仓库\n  obsidian.desktop\n[Desktop Entry] Name=Obsidian GenericName=Markdown Editor Exec=/home/kurome/.obsidian/obsidian Icon=obsidian Type=Application StartupNotify=true Categories=Office;WordProcessor; MimeType=x-scheme-handler/obsidian;text/html;text/markdown;text/x-markdown;   obsidian\n#!/usr/bin/bash TIME=\"$(date '+%Y%m%d%H%M%S')\" NOTEON=$HOME/Documents/Note_ON function Git_Sync() { cd $NOTEON git pull echo '#Ignore files larger than 100MB' cat .gitignore_default  .gitignore find . -size +100M | sed 's|^./||g' | cat  .gitignore git add . git commit -m \"Update-${TIME}\" git push -v } /home/kurome/.obsidian/Obsidian-0.15.6.AppImage trap Git_Sync EXIT   Typora 安装：\n# sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE $ wget -qO - https://typora.io/linux/public-key.asc | $ sudo apt-key add - # add Typora's repository $ sudo add-apt-repository 'deb https://typora.io/linux ./' $ sudo apt-get update # install typora $ sudo apt-get install typora 如果安装的时二进制包，则建立 typora.desktop\n$ gedit ~/.local/share/applications/typora.desktop [Desktop Entry] Name=Typora Comment=a minimal Markdown reading \u0026 writing app. Change Log: (https://typora.io/windows/dev_release.html) GenericName=Markdown Editor Exec=/home/kurome/.typora/Typora %U Icon=typora Type=Application StartupNotify=true Categories=Office;WordProcessor; MimeType=text/markdown;text/x-markdown; typora 有时会出现丢数据的现象，很困扰；特别是围栏代码块，失去了缩进，成了一行，完全不可阅读了。但是其他的 Markdown Editor 用的不习惯，例如 VSCode、Sublime、ghostwriter、marktext。因此最好通过 ppa 安装，获取 Typora 最新的版本。\n在Joplin下，菜单Tools-Options-GeneralText editor command可以设置第三方编辑软件。\n配置 File  Preferences：\n General  Auto Save: on Editor  Spell Check: Disable Image  Use relative path if possible: on Markdown  Syntax Support  Inline Math: on  有时候标点符号没有与文字对齐，比如句号在右中，而不是右下，可以将语言设置为中文（it works for me）。\nCan I use Typora for free ?\nYou will have a 15-day free trial before the purchase. If you use the dev version or the Linux version, you will have much longer trial time if you keep Typora updated. However, we may show a “trial button”, disable certain features or shorten trial time in the future, but most functions will be kept.\nTypora’s pricing plan\nIt is one-time payment, not subscription.\nA Typora license is granted to the “user”, which can be activated on up to 3 devices from one person for one license with no expiration time.\nYou will have 15 days to evaluate Typora for free before purchasing a license code. If you’re not satisfied with Typora for any reason, you will be able to get a full refund within 30 days from the license purchase.\nCrack Typora 1.1.5 (一 / 二)\n  安装依赖环境：\n$ sudo apt install python3-pip nodejs   新建将要使用的目录：\n$ cd ~/Downloads $ mkdir workstation/outfile $ mkdir workstation/outappasar   克隆脚本文件，下载安装包：\n$ git clone https://github.com/Mas0nShi/typoraCracker.git $ wget https://typora.io/linux/Typora-linux-x64.tar.gz $ tar xvzf Typora-linux-x64.tar.gz 原始仓库地址、Gitee 备份地址\n  安装依赖:\n$ pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r typoraCracker/requirements.txt Missing dependencies for SOCKS support：\n关闭代理，安装 pysocks\n# Unset socks proxy $ unset all_proxy $ unset ALL_PROXY # Install missing dependencies: $ pip install pysocks # Reset proxy $ source ~/.bashrc   执行解包命名：\n$ mkdir -p workstation/outfile/ $ python3 typoraCracker/typora.py bin/Typora-linux-x64/resources/app.asar workstation/outfile/   替换掉License.js文件\n$ cp typoraCracker/example/patch/License.js workstation/outfile/dec_app/   打包app.asar文件\n$ python3 typoraCracker/typora.py -u workstation/outfile/dec_app workstation/outappasar   将打包回来的app.asar文件重新丢到Typora的resources目录下\n$ cp workstation/outappasar/app.asar bin/Typora-linux-x64/resources/   授权码生成\n$ node typoraCracker/example/keygen.js CAJ8Q4-ETFCZ4-RH3X85-GMKD68   激活：授权码输入生成的码，邮箱输入crack@example.com，完事。\n  综上，破解 Typora 其实就是破解 app.asar 文件，破解一次 Typora 后，保留破解的 app.asar，不论在哪个平台，用破解后的 app.asar 覆盖原本的 resources/app.asar，就能实现破解 Typora（要求版本一致）。\n更多：\n Typora 授权解密与剖析 typoraCracker 【Mac】记一次对付费 Markdown 软件 Typora 1.0 的逆向  Recover Unsaved Drafts\nPreferences = General = Save \u0026 Recover = Recover Unsaved Drafts = 选择要恢复的文档，打开后另存为到之前保存的地址覆盖它即可\nCtrl 5 of typora does not work\n不知道哪里覆盖了。重新定义一个快捷键。\nOpen Menu → Preference in Typora, then click “Open Advanced Settings”.\n\"keyBinding\": { \"Heading 5\": \"Alt+5\", }, 主题推荐\nGitHub 主题，很习惯了：\n D42ker GitHub Github  MarkText Foxit PDF Reader Industry’s most powerful PDF reader.\nPortable PDF Unlocker/PDFCrack Print the Secured PDF in Google Chrome\n有的用户虽然记得PDF文档的密码，但由于经常使用这个PDF文档，为了方便使用也想将这个密码去除。而去除的方法也非常简单，用最常见的谷歌浏览器就可以做到。首先运行谷歌浏览器，将需要去除密码的PDF文档拖曳进浏览器窗口。这时会弹出一个对话框，输入相应的密码就可以看到内容。接着在文档内容中点击鼠标右键，选择菜单里面的“打印”命令。\n在弹出的打印窗口点击左侧“目标”中的“更改”按钮，在弹出的对话框中选择“本地目标”中的“另存为PDF”命令。返回到打印窗口后直接点击“保存”按钮，在弹出的对话框里面设置文档的保存位置，再点击“保存”按钮就会将当前的PDF文档另外存储一份，这样也就相当于去除了PDF文档的密码了。\nOnline PDF Password Remover\n https://smallpdf.com/unlock-pdf https://www.ilovepdf.com/unlock_pdf  **How to Unlock A PDF for Editing Without Password? [Five Methods]**\npdftk 给 pdf 电子书加目录\n对许多人来说 pdf 格式的电子书最头疼的两件事： → 1) 每页都是没经过 OCR 处理过的图片 2) 没有目录。\n以下这个批量加目录的方法我用好久了，见过我这么操作过的都想学一下，这里详细地记录以下，也方便以后有人再问的时候 :)\n用到的软件是 pdftk pdftk-java 。linux 发行版一般都有这个这个软件可以直接安装。\npdftk 的用法就是：输出 (dump_data) pdf 的元信息 (data.txt)，编辑以后，重新倒入 (update_info) 到 pdf 文件里面\n主要是这两条命令:\npdftk [my.pdf] dump_data  [data.txt] pdftk [my.pdf] update_info [data.txt] output my2.pdf 在第一条命令输出的 data.txt 里面加入如下的内容，然后通过第二条命令就可以创建新的目录条目\nBookmarkBegin BookmarkTitle: name BookmarkLevel: level BookmarkPageNumber: page number 另外电子书的第一页通常是封面，紧接着的是其它的东西。但是书里面标注的页码的第一页往往后面的某页。\nPDF 支持把页码标注成其它的格式 (page_labels)，第一页标注成 cover，第二到第十页标注成罗马数字，然后从第十一页标注成 1,2,3,4,5,6…\n# 把第一页标注成名字为 cover 的非数字 (NoNumber) PageLabelBegin PageLabelNewIndex: 1 PageLabelStart: 1 PageLabelPrefix: cover PageLabelNumStyle: NoNumber # 从第二页 (PageLabelNewIndex) 开始标注成小写罗马数字 (LowercaseRomanNumerals) PageLabelBegin PageLabelNewIndex: 2 PageLabelStart: 1 # 从数字 1 开始数，如果这里变成 3 = 起始的罗马数字会是 iii PageLabelNumStyle: LowercaseRomanNumerals # 从 {true start page} 开始用普通的数字标注 PageLabelBegin PageLabelNewIndex: {true start page} PageLabelStart: 1 PageLabelNumStyle: DecimalArabicNumerals 对于一本书，这种手动添加的方法会很慢，下面是一个小脚本来半自动化。\n 由于电子书 100% 可以搜索到目录 编号 标题 页码。如果搜索不到，也可以直接从书里面复制。\n复制粘贴一下，调整成这种格式\n14 I: Reduction Semantics\t1 1 Semantics via Syntax\t5 2 Analyzing Syntactic Semantics\t13 3 The λ-Calculus\t23 4 ISWIM\t45 II: PLT Redex\t201 11 The Basics\t205 12 Variables and Meta-functions\t217 13 Layered Development\t227 14 Testing\t237 ...... 第一行是对于人类，而非 pdf 格式来说真正的第一页\n后面根据行首 tab 的数量来决定目录的层级\n每行后面的数字是页码\n然后用这个小脚本 toc-gen.py\n#!/usr/bin/env python3 # # Usage # toc-gen.py # def make_offset(off: int): if off  1: print(\"\"\"PageLabelBegin PageLabelNewIndex: 1 PageLabelStart: 1 PageLabelPrefix: cover PageLabelNumStyle: NoNumber\"\"\") if off  2: print(\"\"\"PageLabelBegin PageLabelNewIndex: 2 PageLabelStart: 1 PageLabelNumStyle: LowercaseRomanNumerals\"\"\") print(f\"\"\"PageLabelBegin PageLabelNewIndex: {off}PageLabelStart: 1 PageLabelNumStyle: DecimalArabicNumerals\"\"\") def make_bookmark(t: str, l: int, p: int): print(f\"\"\"BookmarkBegin BookmarkTitle: {t}BookmarkLevel: {l}BookmarkPageNumber: {p}\"\"\") if __name__ == '__main__': offset = int(input()) make_offset(offset) while True: try: line = input() if not line.strip(): break except EOFError: break title = \" \".join(line.split()[0:-1]) n_of_tabs = len(line) - len(line.lstrip()) page = int(line.split()[-1]) make_bookmark(t=title, l=n_of_tabs + 1, p=page + offset) 来获取这些内容，把这些内容粘贴到 [data.txt] 后面，然后再用 pdftk 的第二条命令\nPageLabelBegin PageLabelNewIndex: 1 PageLabelStart: 1 PageLabelPrefix: cover PageLabelNumStyle: NoNumber PageLabelBegin PageLabelNewIndex: 2 PageLabelStart: 1 PageLabelNumStyle: LowercaseRomanNumerals PageLabelBegin PageLabelNewIndex: 14 PageLabelStart: 1 PageLabelNumStyle: DecimalArabicNumerals BookmarkBegin BookmarkTitle: Reduction Semantics BookmarkLevel: 1 BookmarkPageNumber: 15 BookmarkBegin BookmarkTitle: Semantics via Syntax BookmarkLevel: 2 BookmarkPageNumber: 19 BookmarkBegin BookmarkTitle: Analyzing Syntactic Semantics BookmarkLevel: 2 BookmarkPageNumber: 27 BookmarkBegin BookmarkTitle: The λ-Calculus BookmarkLevel: 2 BookmarkPageNumber: 37 BookmarkBegin BookmarkTitle: ISWIM BookmarkLevel: 2 BookmarkPageNumber: 59 BookmarkBegin BookmarkTitle: An Abstract Syntax Machine BookmarkLevel: 2 BookmarkPageNumber: 79 BookmarkBegin BookmarkTitle: Abstract Register Machines BookmarkLevel: 2 BookmarkPageNumber: 103 BookmarkBegin BookmarkTitle: Tail Calls and More Space Savings BookmarkLevel: 2 BookmarkPageNumber: 121 BookmarkBegin BookmarkTitle: Control: Errors, Exceptions, and Continuations BookmarkLevel: 2 BookmarkPageNumber: 129 BookmarkBegin BookmarkTitle: State: Imperative Assignment .............. Bingo! 这下舒服了 :)\nTesseract Tesseract Open Source OCR Engine\n更多 OCR 软件请看：Comparison of optical character recognition software\nEvaluation：An analysis of the accuracy and reliability of the OCR packages Google Docs OCR, Tesseract, ABBYY FineReader, and Transym, employing a dataset including 1227 images from 15 different categories concluded Google Docs OCR and ABBYY to be performing better than others.\nOCRmyPDF OCRmyPDF adds an OCR text layer to scanned PDF files, allowing them to be searched\nPandaOCR PandaOC/R - 多功能OCR图文识别+翻译+朗读+弹窗+公式+表格+图床+搜图+二维码\ngImageReader A Gtk/Qt front-end to tesseract-ocr.\nOCRfeeder 支持多个 OCR 后端，例如Tesseract、CuneiForm、GOCR、Ocrad\ntianruoocr 简介：基于天若幽心开源的代码进行完善制作而成，进行了简单重构，移除了更新的弹窗。\n已停止维护，欢迎使用新版跨平台 OCR 工具（树洞 OCR 文字识别），跟之前天若OCR使用习惯出入较大，且不支持翻译。\nmarguerite 答 ORC 我来告诉你什么是 OCR：\nOCR 说白了就是，把一个特定字体的某个字变成计算机可匹配的位置数据，比如在 50x50 像素的格子里，「儿」这个字的撇的黑色像素点落在大概 (30~45, 0~100) 这个范围内，然后把图片进行切割细分，得到许多个 50x50 的格子，在这个格子里 (30~45, 0~100) 它有黑色像素点，那么就非常可能是「儿」字。当然也可能是别的字，究竟是什么字，常用汉字就那么多个，这是概率问题。\n而 OCR 的重点是：\n 字体。你针对宋体的 OCR 训练数据拿到黑体上识别率不见得高。 训练。所谓的训练就是让计算机匹配时所遵守的概率无限趋近于现实。你可能需要拿出比如 3 万个字（一篇文章），先用默认的识别一遍（这涉及到了「如何根据某个特定字体制作出默认的数据」），然后逐字逐句去挑错，再改进默认数据（这涉及到了「你需要会编程，能够写出一个根据 tesseract 库改数据的软件」），最后越改这个数据越接近现实。  最后才是拿你训练过的数据去进行我上面做过的：\n$ tesseract ./test.png result -l chi_sim 参考、归纳、脑补自：http://miphol.com/muse/2013/05/tesseract-ocr.html\n这是 OCR 工作的基本原理和流程，这完全不可能是一个非程序员做的事情，程序员也懒得做这种事情，这是一种苦逼的体力劳动。\nWindows 下的 OCR 软件比如微软 word 自带的那个，ABBYY FineReader（这个最好，而且可以 wine）、以及汉王的软件，都是多少苦逼程序员一起，经历了这种枯燥乏味的流程后的结果。\nLinux 下的 OCR 软件都是开源的「框架」，比如 tesseract 和你之前问过的 ocropus，它们只是为在 Linux 下进行这种苦逼工作提供了一个基础，提供了可能性，并不是像你要求的那样拿来就能用的东西。因为没有训练过的数据，你安装的中文数据包只是可供你拿来训练的数据。\n何况在 Linux 下训练了也没用，OCR 最大的需求是 word 文档转出来的 PDF 和起点网站吧，那些用的字体可不是文泉驿。你现在能够得到的可供训练的数据估计就是 Google 根据 Droid Sans 弄出来的，训练 1 万年也只能识别 Droid Sans，问题是你能把纸面上的字体改了么。想要微软字体的数据？抱歉，微软是商业字体啊。\n所以我觉得现在是你对你需求的描述和理解就不对。钻进死胡同了。\nWPS WPS Office is a lightweight, feature-rich comprehensive office suite with high compatibility.\nttf-mscorefonts-installer\nttf-mscorefonts-installer is a Debian package that includes the following set of fonts, and with the help of this installer, you can easily download and use Microsoft’s True core fonts.\n Andale Mono Arial Black Arial (Bold, Italic, Bold Italic) Comic Sans MS (Bold) Courier New (Bold, Italic, Bold Italic) Georgia (Bold, Italic, Bold Italic) Impact Times New Roman (Bold, Italic, Bold Italic) Trebuchet (Bold, Italic, Bold Italic) Verdana (Bold, Italic, Bold Italic) Webdings  $ sudo proxychains apt install --reinstall ttf-mscorefonts-installer $ sudo fc-cache -vr ttf-wps-fonts\nThese are the symbol fonts required by wps-office. They are used to display math formulas. We have collected the fonts here to make things easier.\n$ cd /tmp $ git clone https://github.com/iamdh4/ttf-wps-fonts.git $ mkdir -p ~/.local/share/fonts/wps-fonts $ mv ttf-wps-fonts/* ~/.local/share/fonts/wps-fonts $ chmod 644 ~/.local/share/fonts/wps-fonts/* $ fc-cache -vfs $ rm -rf ttf-wps-fonts WPS 缺少中文\n最近发现了 flatpak 版 wps 没有中文的解决方案：\n 下载中文版 wps 的包，解压缩后找到里面的 mui 目录，复制到国际版 wps flatpak 的对应目录下，修改一下配置文件，你就得到了中文版 wps\n Sublime Text Atom Vim 安装 vim ycm 全能补全\n$ sudo apt install -y vim-gtk3 vim-addon-manager vim-youcompleteme vim-python-jedi $ vam install youcompleteme python-jedi 然后用 gvim 就有 ycm 智能补全和提示了\nvimtutor Start Vim on a copy of the tutor file.\nvi 与 vim.tiny $ whereis vi vi: /usr/bin/vi /usr/share/man/man1/vi.1.gz $ ls -al /usr/bin/vi lrwxrwxrwx 1 root root 20 Oct 26 20:31 /usr/bin/vi - /etc/alternatives/vi $ ls -al /etc/alternatives/vi lrwxrwxrwx 1 root root 17 Oct 26 20:31 /etc/alternatives/vi - /usr/bin/vim.tiny 可见，在Ubuntu上，vi是vim.tiny的软连接，但是执行命令vi与vim.tiny后是不一样，比如vi是：在编辑模式下使用方向键的时候，并不会使光标移动，而是在命令行中出现[A [B [C [D之类的字母；并且编辑错误的话，退格键(Backspace键)是使用不了的。\nMethods to find out which (configuration) files are read by executable when started-‘strace vim/nano’ (Ubuntu)：\n$ strace -o $HOME/tracefile vi $ cat tracefile | grep vimrc stat(\"/usr/share/vim/vimrc.tiny\", {st_mode=S_IFREG|0644, st_size=662, ...}) = 0 openat(AT_FDCWD, \"/usr/share/vim/vimrc.tiny\", O_RDONLY) = 3 stat(\"/home/vane/.vimrc\", 0x7fff3e755550) = -1 ENOENT (No such file or directory) openat(AT_FDCWD, \"/home/vane/.vimrc\", O_RDONLY) = -1 ENOENT (No such file or directory) openat(AT_FDCWD, \"/home/vane/_vimrc\", O_RDONLY) = -1 ENOENT (No such file or directory) stat(\"/home/vane/.vim/vimrc\", 0x7fff3e755550) = -1 ENOENT (No such file or directory) openat(AT_FDCWD, \"/home/vane/.vim/vimrc\", O_RDONLY) = -1 ENOENT (No such file or directory) 可以看到 vi，加载的是 /usr/share/vim/vimrc.tiny\n$ strace -o $HOME/tracefile vim.tiny $ cat tracefile | grep vimrc stat(\"/usr/share/vim/vimrc\", {st_mode=S_IFREG|0644, st_size=2266, ...}) = 0 openat(AT_FDCWD, \"/usr/share/vim/vimrc\", O_RDONLY) = 3 stat(\"/home/vane/.vimrc\", 0x7fff7c99cc30) = -1 ENOENT (No such file or directory) openat(AT_FDCWD, \"/home/vane/.vimrc\", O_RDONLY) = -1 ENOENT (No such file or directory) openat(AT_FDCWD, \"/home/vane/_vimrc\", O_RDONLY) = -1 ENOENT (No such file or directory) stat(\"/home/vane/.vim/vimrc\", 0x7fff7c99cc30) = -1 ENOENT (No such file or directory) openat(AT_FDCWD, \"/home/vane/.vim/vimrc\", O_RDONLY) = -1 ENOENT (No such file or directory) 可以看到 vim.tiny，加载的是 /usr/share/vim/vimrc\n$ diff -u /etc/vim/vimrc /etc/vim/vimrc.tiny --- /etc/vim/vimrc 2020-01-30 19:11:47.000000000 +0800 +++ /etc/vim/vimrc.tiny 2020-04-15 14:40:31.000000000 +0800 @@ -1,55 +1,13 @@ ... +\" Vim configuration file, in effect when invoked as \"vi\". The aim of this +\" configuration file is to provide a Vim environment as compatible with the +\" original vi as possible. Note that ~/.vimrc configuration files as other +\" configuration files in the runtimepath are still sourced. +\" When Vim is invoked differently (\"vim\", \"view\", \"evim\", ...) this file is +\" _not_ sourced; /etc/vim/vimrc and/or /etc/vim/gvimrc are. ... 可以看到，上面什么说明白了。\nVim clear last search highlighting :noh VIMRC The ultimate Vim configuration (vimrc)\ncopilot.vim Neovim plugin for GitHub Copilot\nNeovim Neovim 提出了将 Vim 扩展为一个 IDE 的想法。\n它增加了现代终端的功能，如光标样式、焦点事件、括号内粘贴等，并内置了一个终端模拟器。最重要的是，你不需要忘却 Vim 的习惯就可以开始使用 Neovim。\n现代化Neovim配置\ngit仓库。\n除此之外，目前一个比较好的配置是：https://github.com/LunarVim/LunarVim。\nvimplus 现代化的vim插件管理工具，开箱即用\nranger A VIM-inspired filemanager for the console\nShell Tmux Tmux 是一个终端复用器（terminal multiplexer），非常有用，属于常用的开发工具。\n简介 会话与进程\n命令行的典型使用方式是，打开一个终端窗口（terminal window，以下简称\"窗口\"），在里面输入命令。用户与计算机的这种临时的交互，称为一次\"会话\"（session） 。\n会话的一个重要特点是，窗口与其中启动的进程是连在一起的。打开窗口，会话开始；关闭窗口，会话结束，会话内部的进程也会随之终止，不管有没有运行完。\n一个典型的例子就是，SSH 登录远程计算机，打开一个远程窗口执行命令。这时，网络突然断线，再次登录的时候，是找不回上一次执行的命令的。因为上一次 SSH 会话已经终止了，里面的进程也随之消失了。\n为了解决这个问题，会话与窗口可以\"解绑\"：窗口关闭时，会话并不终止，而是继续运行，等到以后需要的时候，再让会话\"绑定\"其他窗口。\nTmux 的作用\nTmux 就是会话与窗口的\"解绑\"工具，将它们彻底分离。\n 它允许在单个窗口中，同时访问多个会话。这对于同时运行多个命令行程序很有用。 它可以让新窗口\"接入\"已经存在的会话。 它允许每个会话有多个连接窗口，因此可以多人实时共享会话。 它还支持窗口任意的垂直和水平拆分。  类似的终端复用器还有 GNU Screen。Tmux 与它功能相似，但是更易用，也更强大。\n基本用法 安装\nTmux 一般需要自己安装。\n$ sudo apt-get install tmux 启动与退出\n安装完成后，键入tmux命令，就进入了 Tmux 窗口。\n$ tmux Tmux 窗口，底部有一个状态栏。状态栏的左侧是窗口信息（编号和名称），右侧是系统信息。\n按下Ctrl+d或者显式输入exit命令，就可以退出 Tmux 窗口。\n$ exit 前缀键\nTmux 窗口有大量的快捷键。所有快捷键都要通过前缀键唤起。默认的前缀键是Ctrl+b，即先按下Ctrl+b，快捷键才会生效。\n举例来说，帮助命令的快捷键是Ctrl+b ?。它的用法是，在 Tmux 窗口中，先按下Ctrl+b，再按下?，就会显示帮助信息。\n然后，按下 ESC 键或q键，就可以退出帮助。\n会话管理 新建会话\n第一个启动的 Tmux 窗口，编号是0，第二个窗口的编号是1，以此类推。这些窗口对应的会话，就是 0 号会话、1 号会话。\n使用编号区分会话，不太直观，更好的方法是为会话起名。\n$ tmux new -s  上面命令新建一个指定名称的会话。\n分离会话\n在 Tmux 窗口中，按下Ctrl+b d或者输入tmux detach命令，就会将当前会话与窗口分离。\n$ tmux detach 上面命令执行后，就会退出当前 Tmux 窗口，但是会话和里面的进程仍然在后台运行。\ntmux ls命令或Ctrl+b s可以查看当前所有的 Tmux 会话。\n$ tmux ls # or $ tmux list-session 接入会话\ntmux attach命令用于重新接入某个已存在的会话。\n# 使用会话编号 $ tmux attach -t 0 # 使用会话名称 $ tmux attach -t  杀死会话\ntmux kill-session命令用于杀死某个会话。\n# 使用会话编号 $ tmux kill-session -t 0 # 使用会话名称 $ tmux kill-session -t  切换会话\ntmux switch命令用于切换会话。\n# 使用会话编号 $ tmux switch -t 0 # 使用会话名称 $ tmux switch -t  重命名会话\ntmux rename-session命令或Ctrl+b $用于重命名会话。\n$ tmux rename-session -t 0  上面命令将0号会话重命名。\n最简操作流程 综上所述，以下是 Tmux 的最简操作流程。\n 在服务器端新建会话tmux new -s my_session。 在 Tmux 窗口运行所需的程序。 按下快捷键Ctrl+b d将会话分离。 下次使用时，重新连接到会话tmux attach-session -t my_session。  窗格操作 Tmux 可以将窗口分成多个窗格（pane），每个窗格运行不同的命令。以下命令都是在 Tmux 窗口中执行。\n划分窗格\ntmux split-window命令用来划分窗格。\n# 划分上下两个窗格，或 Ctrl+b \" $ tmux split-window # 划分左右两个窗格，或 Ctrl+b % $ tmux split-window -h 移动光标\ntmux select-pane命令或Ctrl+b 用来移动光标位置。\n# 光标切换到上方窗格，或 Ctrl+b ; $ tmux select-pane -U # 光标切换到下方窗格，或 Ctrl+b o $ tmux select-pane -D # 光标切换到左边窗格 $ tmux select-pane -L # 光标切换到右边窗格 $ tmux select-pane -R  Ctrl+b x：关闭当前窗格。 Ctrl+b !：将当前窗格拆分为一个独立窗口。 Ctrl+b z：当前窗格全屏显示，再使用一次会变回原来大小。 Ctrl+b Ctrl+：按箭头方向调整窗格大小。 Ctrl+b q：显示窗格编号。  交换窗格位置\ntmux swap-pane命令用来交换窗格位置。\n# 当前窗格上移，或 Ctrl+b { $ tmux swap-pane -U # 当前窗格下移，或 Ctrl+b } $ tmux swap-pane -D  Ctrl+b Ctrl+o：所有窗格向前移动一个位置，第一个窗格变成最后一个窗格。 Ctrl+b Alt+o：所有窗格向后移动一个位置，最后一个窗格变成第一个窗格。  窗口管理 除了将一个窗口划分成多个窗格，Tmux 也允许新建多个窗口。\n新建窗口\ntmux new-window命令用来创建新窗口。\n$ tmux new-window # 新建一个指定名称的窗口 $ tmux new-window -n  Ctrl+b c：创建一个新窗口，状态栏会显示多个窗口的信息。\n切换窗口\ntmux select-window命令用来切换窗口。\n# 切换到指定编号的窗口 $ tmux select-window -t  # 切换到指定名称的窗口 $ tmux select-window -t   Ctrl+b p：切换到上一个窗口（按照状态栏上的顺序）。 Ctrl+b n：切换到下一个窗口。 Ctrl+b ：切换到指定编号的窗口，其中的是状态栏上的窗口编号。 Ctrl+b w：从列表中选择窗口。  重命名窗口\ntmux rename-window命令或Ctrl+b ,用于为当前窗口起名（或重命名）。\n$ tmux rename-window  其他命令 下面是一些其他命令。\n# 列出所有快捷键，及其对应的 Tmux 命令 $ tmux list-keys # 列出所有 Tmux 命令及其参数 $ tmux list-commands # 列出当前所有 Tmux 会话的信息 $ tmux info # 重新加载当前的 Tmux 配置 $ tmux source-file ~/.tmux.conf Fish 命令行是程序员的必备技能。图形界面虽然好看，解决问题还是要靠命令行。\n命令行由 Shell 提供。各种命令通过 Shell，传递给操作系统的内核。学习命令行就是在学习 Shell。\nShell 有好几种，目前最常用是 Bash 和 zsh。但是，在我看来，它们都不如 Fish Shell 好用。\n五年前，我第一次尝试 Fish，感到很惊艳，一直用到现在。本文介绍 Fish 的主要特点，希望你也来尝试它。\n简介 Fish 是\"the friendly interactive shell\"的简称，最大特点就是方便易用。很多其他 Shell 需要配置才有的功能，Fish 默认提供，不需要任何配置。\n如果你想拥有一个方便好用的 Shell，又不想学习一大堆语法，或者花费很多时间配置，那么你一定要尝试一下 Fish。\n安装 Ubuntu 的安装方法。\n$ sudo apt install fish 其他系统的安装请参考官方网站。\n启动与帮助 安装完成后，就可以启动 Fish。\n$ fish 由于 Fish 的语法与 Bash 有很大差异，Bash 脚本一般不兼容。因此，我建议不要将 Fish 设为默认 Shell，而是每次手动启动它。\n使用过程中，如果需要帮助，可以输入help命令。浏览器就会自动打开，显示在线文档。\n$ help 彩色显示 进入 Fish 以后，你注意到的第一件事，可能就是它默认彩色显示。\n# 无效命令为红色 $ mkd # 有效命令为蓝色 $ mkdir 有效路径会有下划线。\n$ cat ~/somefi 上面代码表示，存在以~/somefi开头的路径。如果没有下划线，你就知道这个路径不存在。\n自动建议 Fish 会自动在光标后面给出建议，表示可能的选项，颜色为灰色。\n# 命令建议 $ /bin/hostname # 参数建议 $ grep --ignore-case # 路径建议 $ ls node_modules 如果采纳建议，可以按下→或Control + F。如果只采纳一部分，可以按下Alt + →。\n自动补全 输入命令时，Fish 会自动显示匹配的上一条历史记录。\n$ git commit -m \"feat: first commit\" 如果没有匹配的历史记录，Fish 会猜测可能的结果，自动补全各种输入。比如，输入pyt再按下Tab，就会自动补全为python命令。\n如果有多个可能的结果，Fish 会把它们都列出，还带有简要介绍。\n$ vi[按下 Tab 键] vi (Executable link, 2.7MB) view (Vi IMproved, 一个程序员的文本编辑器) viewer.py (Executable, 967B) viewres (Graphical class browser for Xt) ...and 12 more rows 这时，再按一次tab，就可以在这些命令之中选择。\n除了补全命令，Fish 还可以补全参数。比如，ls命令的-l参数后面按下Tab键，就会显示可以连用的其他参数。\n$ ls -l[按下 Tab 键] -l1 (List one file per line) -lA (Show hidden except . and ..) -la (Show hidden) -lB (Ignore files ending with ~) ...and 16 more rows``` Fish 还可以自动补全 Git 分支。\n$ git checkout master 易懂的语法 Fish 的语法非常自然，一眼就能看懂。\nif语句：\nif grep fish /etc/shells echo Found fish else if grep bash /etc/shells echo Found bash else echo Got nothing end switch语句：\nswitch (uname) case Linux echo Hi Tux! case Darwin echo Hi Hexley! case FreeBSD NetBSD DragonFly echo Hi Beastie! case '*' echo Hi, stranger! end while循环：\nwhile true echo \"Loop forever\" end for循环：\nfor file in *.txt cp $file $file.bak end 函数 Fish 的函数用来封装命令，或者为现有的命令起别名。\nfunction ll ls -lhG $argv end 上面代码定义了一个ll函数。命令行执行这个函数以后，就可以用ll命令替代ls -lhG。其中，变量$argv表示函数的参数。\n下面是另一个例子。\nfunction ls command ls -hG $argv end 上面的代码重新定义ls命令。注意，函数体内的ls之前，要加上command，否则会因为无限循环而报错。\n提示符 fish_prompt函数用于定义命令行提示符（prompt）。\nfunction fish_prompt set_color purple date \"+%m/%d/%y\" set_color FF0 echo (pwd) '' set_color normal end 执行上面的函数以后，你的命令行提示符就会变成下面这样。\n02/06/13 /home/tutorial  配置 Fish 的配置文件是~/.config/fish/config.fish，每次 Fish 启动，就会自动加载这个文件。\n我们可以在这个文件里面写入各种自定义函数，它们会被自动加载。比如，上面的fish_prompt函数就可以写在这个文件里面，这样每次启动 Fish，就会出现自定义的提示符。\nFish 还提供 Web 界面配置该文件。\n$ fish_config 输入上面的命令以后，浏览器就会自动打开本机的 8000 端口，用户可以在网页上对 Fish 进行配置，比如选择提示符和配色主题。\nZsh Oh My Zsh $ sh -c \"$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)\" oh-my-zsh应该对通配符作了限制，需要用跳脱字符\nsudo apt remove fcitx\\* Zsh theme：What’s the best theme for Oh My Zsh?\nzsh4humans Bash include local bin\n$ vim .bashrc export PATH=/home/kurome/.local/bin:$PATH bash-git-prompt $ git clone https://github.com/magicmonty/bash-git-prompt.git ~/.bash-git-prompt --depth=1 $ vim ~/.bashrc if [ -f \"$HOME/.bash-git-prompt/gitprompt.sh\" ]; then GIT_PROMPT_ONLY_IN_REPO=1 source $HOME/.bash-git-prompt/gitprompt.sh fi bash-completion 一般已经安装配置好了。\nawesome-bash Proxy v2ray 节点准备 简单来讲节点是形如如下的神秘链接：\nss://xxxxxxxxxxxxxxxxxxxxxxxxxxxx vmess://xxxxxxxxxxxxxxxxxxxxxxxxxxxx 如果你没有这些连接：\n 自行部署，你则需要自行购买处于自由互联网的服务器并进行节点搭建，这不在本文讨论范围内。如果你需要购买服务器，推荐一个 VPS 提供商：justhost.ru。 购买机场的订阅服务，可以参考它们的订阅流程以获取节点。需要提醒的是，机场服务属于灰色产业，随时有停止服务的可能，购买建议以月付进行购买以避免过大损失。关于机场审计规则，我们的观点是\"我可以不看，但是你不可以封禁\"。对于机场审计程度，读者可根据自身实际情况自行评估。 如果你不想花任何费用，可安装赛风这类软件。它是自由软件。如果你使用赛风，可以非常方便的发送空邮件到get@psiphon3.com以获取赛风下载链接。赛风应用目前只支持 Windows\\Android\\IOS\\MacOS 平台。当你在这些平台上能够访问自由互联网时，可以去各个渠道搜索可用的节点和代理资源。注意，使用公共节点需要自行承担可能的风险。  安装 v2ray/Xray-core 是使用 Qv2ray（原项目已停止开发） 以及 V2rayA 的前提，需要先进行安装。\nQv2ray 和 V2rayA 是两款非常优秀的在 Linux 上可用的科学上网通用客户端：\n Qv2ray：安装后在 Plugins 中，选择 V2ray Core Plugin，并进行 V2ray 的设置。现在你已经可以使用，你需要按照官方文档导入已有的链接或订阅。 V2rayA：2rayA 是一个浏览器客户端，使用非常方便。更多使用方法请看官方文档  代理配置 在经过上述步骤后，你应该已经有了 SOCKS5 代理以及 HTTP 代理的地址和端口。接下来进行设置：\n  系统代理：在节点链接后，你可在系统设置 - 网络设置 - 代理中设置代理。注意，系统设置中的代理配置在 KDE 桌面环境中并不是所有应用都会遵守。没有遵循系统设置代理的应用还需要单独进行代理配置。\n  终端\n可以通过 export 命令设置当前终端的代理方式。比如使用 tldr 或 github raw 等资源需要设置 https 代理。\nexport https_proxy=http://127.0.0.1:8889 export http_proxy=http://127.0.0.1:8889 export all_proxy=http://127.0.0.1:8889 不同终端命令所识别的环境变量名不同，如 all_proxy 对 curl 生效，而对 wget 则不生效，具体可查看各个命令的 man page。\n  proxychains/proxychains-ng\n如果对于一个应用，KDE 的系统代理不生效，在终端 export 了 ALL_PROXY 变量再用终端启动此应用代理也不生效，并且这个应用自身也没有配置代理的选项（即应用不支持代理）。此时可以使用 proxychains，它可以为单行命令配置代理，它是一个预加载的 hook，允许通过一个或多个 SOCKS 或 HTTP 代理重定向现有动态链接程序的 TCP 流量（即强制应用走代理）。\n$ sudo apt install proxychains $ sudo vim /etc/proxychains.conf socks5 127.0.0.1 1089   透明代理 全局代理，也即透明代理。之所以叫做透明代理，是因为这代理对于操作系统中的各个应用相当于是透明的，应用们感知不到代理的存在。之所以叫做全局代理，很明显意为全局所有流量都走代理。\n  在 Qv2ray 的“首选项-入站设置”的下方启用任意门设置选项。\n 监听 ipv4 地址可填127.0.0.1 或 0.0.0.0，建议前者。若需双栈代理，则在监听 ipv6 地址填上::1（如果监听 ipv4 填了 0.0.0.0 则可不填）。 嗅探选择 Full，Destination Override 的三项均勾选。 模式选择“tproxy”。    安装cgproxy软件，编辑/etc/cgproxy/config.json：\n 在cgroup_proxy中括号里加上\"/\"，port改为 Qv2ray 首选项里的透明代理的端口。 cgproxy默认配置是代理所有 tcp 和 udp，ipv4 和 ipv6 的流量，如果不希望代理其中的某种（些）流量，则将对应的enable_xxx改为 false。注意这里的配置要和 Qv2ray 选项里的配置一致，如 Qv2ray 选项里没有勾选 udp，则这里务必把enable_udp改为 false。 如果希望当本机作为网关设备时为连接到本机的其他设备（如连接到本机开设的 wifi 热点的设备）也提供透明代理，则把enable_gateway改为 true    透明代理的基本原理是拦截系统发出的所有流量，并将这些流量转到代理工具里，从而实现让系统所有流量都走代理的目的。此时，为了避免流量出现死循环（即代理工具发出的流量又转回到代理工具里），需要将代理工具排除在透明代理环境外面。有两种方式可以实现这一点：\n  通过execsnoop监控代理工具的启动，并自动将其移至透明代理环境外面：\n cgproxy软件自带execsnoop支持，以上cgproxy测试过的发行版均可支持。 编辑/etc/cgproxy/config.json，在program_noproxy中括号里加上\"v2ray\"、\"qv2ray\"，以使qv2ray和v2ray发出的流量不经过透明代理。如果你的v2ray或qv2ray不在PATH里，则需要填写它们的绝对路径。    在每次连接代理节点时，让qv2ray自己把自己移到透明代理环境外面：\n安装 Qvplugin-Command 插件，在插件设置里的“pre-connection”栏里加上一句\nsh -c \"cgnoproxy --pid $(pgrep -x qv2ray)\"     如果启用了 udp 的透明代理（dns 也是 udp），则给 v2ray 二进制文件加上相应的特权：\nsudo setcap \"cap_net_admin,cap_net_bind_service=ep\" /usr/bin/v2ray 否则 udp 的透明代理可能会出问题。如果每次更新了 v2ray 二进制文件，都需要重新执行此命令。\n  启动透明代理服务：systemctl start cgproxy.service或systemctl enable --now cgproxy.service。\n  以上步骤完成后，透明代理应该能正常使用了。\ndns 如果勾选了“dns 拦截”，且启用了 dns 和 udp 的透明代理，则 v2ray 会拦截对系统 dns 的请求，并将其转发到 v2ray 的内置 dns 里，即让 v2ray 内置 dns 接管系统 dns。但 v2ray 内置 dns 是会遵循路由规则的。\n如果没勾选“dns 拦截”，则 v2ray 虽然不会让内置 dns 接管系统 dns，但如果启用了 dns 和 udp 的透明代理，则系统 dns 也会走透明代理进 v2ray，并遵循 v2ray 的路由规则。\n因此，在启用了 dns 和 udp 的透明代理时，若系统 dns 或 v2ray 的内置 dns 配置不当，可能导致 dns 请求发不出去，从而影响正常上网。\n由于 qv2ray 常见的路由规则是绕过国内 ip，国外 ip 均走代理。在这个情形中，以下两个配置是典型的有问题的 dns 配置方式：\n 配置了国外普通 dns 作为首选，但代理本身不支持 udp（此时 dns 查询的 udp 流量出不去，dns 无法查询） 配置了使用域名的 doh 作为首选。此时 doh 的域名无法被解析，从而 doh 也无法使用。  一般而言，如果并不在意将 dns 查询发给谁，那么，在绕过国内 ip 的情况下，只需要配置一个国内普通 dns 作为首选即可保证不会出问题。若代理本身不支持 udp，又希望使用国外 dns，则可以考虑使用使用 ip 的 doh（如https://1.1.1.1/dns-query等）。\n如果需要更复杂的 dns 配置，建议参考上游文档，并选择合适的不会影响正常上网的 dns 配置。\nClash 下载 clash\n$ gzip -d clash-v1.6.5.gz $ mkdir ~/.clash \u0026\u0026 mv clash-v1.6.5 ~/.clash/clash 下载配置\n$ wget -O config.yaml [订阅链接] 运行 clash\n$ chmod 770 clash./clash -d . 使用 clash dashboard 选择节点\n设置系统代理：\n  GUI：打开系统设置，点击网络代理右边的 ⚙ 按钮，选择手动\n HTTP 和 HTTPS 代理为 127.0.0.1:7890 Socks 主机为 127.0.0.1:7891    CLI：change system proxy settings from the command line\n# To modify a DConf setting: $ gsettings set    # To read a DConf setting: $ gsettings get     相关软件：\n glider Lantern Privoxy openvpn Shadowsocks Tor trojan：trojan教程  脚本一 $ vi ~/.clash/run-clash.sh #!/bin/bash CLASH_HOME=/home/vane/.clash subscription=\"订阅连接\" # 设置系统代理 function setting { gsettings set org.gnome.system.proxy.http host '127.0.0.1' gsettings set org.gnome.system.proxy.http port '7890' gsettings set org.gnome.system.proxy.https host '127.0.0.1' gsettings set org.gnome.system.proxy.https port '7890' gsettings set org.gnome.system.proxy.socks host '127.0.0.1' gsettings set org.gnome.system.proxy.socks port '7891' } # 更新订阅 function update { wget -O $CLASH_HOME/config.yaml $subscription } # 运行 clash function run { # 打开系统代理（之前已经设置了） gsettings set org.gnome.system.proxy mode 'manual' $CLASH_HOME/clash -d $CLASH_HOME/ } # 停止运行 clash function stop { # 关闭系统代理  gsettings set org.gnome.system.proxy mode 'none' } if [ \"$1\" = \"-u\" ]; then update elif [ \"$1\" = \"-r\" ]; then run elif [ \"$1\" = \"-s\" ]; then setting else if [ \"$1\" ]; then $CLASH_HOME/clash $1 else echo Plese run clash -r fi fi trap stop EXIT How to change system proxy settings from the command line on Ubuntu desktop\n$ chmod 700 run-clash.sh 脚本二 $ vi ~/.clash/up.sh #!/bin/bash SubscriptionLink=\"\" /usr/bin/wget --no-proxy -O /home/kurome/.clash/config.yaml $SubscriptionLink $ vi ~/.clash/rc.sh #!/bin/bash /home/kurome/.clash/clash -d /home/kurome/.clash/ $ chmod u+x ~/.clash/up.sh vi ~/.clash/rc.sh clash as a daemon：\n$ sudo vi /usr/lib/systemd/system/clash.service [Unit] Description=Clash daemon, A rule-based proxy in Go. After=network.target [Service] Type=simple Restart=always RestartSec=10 ExecStart=/bin/bash /home/kurome/.clash/rc.sh [Install] WantedBy=multi-user.target 运行\n$ systemctl enable clash.service $ systemctl start clash.service $ systemctl status clash.service 如果不想代理了，可以直接在 clash dashboard 的 Proxy （如果有的话）或者 Settting 里选择 DIRECT，而不是关闭 clash.service。根据设置的规则，有的流量会走代理，有的流量直接走。\n脚本三   clash.service\n$ sudo vi /usr/lib/systemd/system/clash.service [Unit] Description=clash After=network.target [Service] WorkingDirectory=\"your home directory\"/.clash ExecStart=\"your home directory\"/.clash/start-clash.sh ExecStop=\"your home directory\"/.clash/stop-clash.sh Environment=\"HOME=your home directory\" Environment=\"CLASH_URL=your subscribe address\" [Install] WantedBy=multi-user.target   start-clash.sh\n$ vi ${HOME}/.clash/start-clash.sh #!/bin/bash # save pid file echo $$  ${HOME}/.clash/clash.pid diff ${HOME}/.clash/config.yaml (curl -s ${CLASH_URL}) if [ \"$?\" == 0 ] then ${HOME}/.clash/clash else TIME=`date '+%Y-%m-%d %H:%M:%S'` cp ${HOME}/.clash/config.yaml \"${HOME}/.clash/config.yaml.bak${TIME}\" curl -L -o ${HOME}/.clash/config.yaml ${CLASH_URL} ${HOME}/.clash/clash fi   stop-clash.sh\n$ vi ${HOME}/.clash/stop-clash.sh #!/bin/bash # read pid file PID=`cat ${HOME}/.config/clash/clash.pid` kill -9 ${PID} rm ${HOME}/.config/clash/clash.pid   diff \nBy searching the bash manpage for the characters , you can find that this is called “process substitution.”\nYou don’t need to worry about the efficiency of creating a temporary file, because the temporary file is really just a pipe, not a file on disk. Try this:\n$ echo (echo foo) /dev/fd/63 This shows that the temporary file is really just the pipe “file descriptor 63.” Although it appears on the virtual /dev filesystem, the disk is never touched.\nThe actual efficiency issue that you might need to worry about here is the ‘process’ part of “process substitution.” Bash forks another process to perform the echo foo. On some platforms, like Cygwin, this can be very slow if performed frequently. However, on most modern platforms, forking is pretty fast. I just tried doing 1000 process substitutions at once by running the script:\necho (echo foo) (echo foo) ... 997 repetitions ... (echo foo) It took 0.225s on my older Mac laptop, and 2.3 seconds in a Ubuntu virtual machine running on the same laptop. Dividing by the 1000 invocations, this shows that process substitutions takes less than 3 milliseconds—something totally dwarfed by the runtime of diff, and probably not anything you need to worry about!\nTUN 模式 “系统代理”一般只是桌面环境下的约定，需要 app 遵循约定才行。也就是说 HTTP_PROXY 这种环境变量只是约定俗成的，大家都从这里面读取代理地址，但是程序里必须要有读取这个变量的相关代码才行。\n因此某些软件\u0026命令行软件不支持系统代理。\nClash for Windows tun 模式对全部 app 生效——对于不遵循系统代理的软件，TUN 模式可以接管其流量并交由 CFW 处理。启动 TUN 模式需要进行如下操作：\n  安装 nftables 和 iproute2 并重启\n$ sudo apt install nftables iproute2 $ sudo reboot   点击General中Service Mode右边Manage，在打开窗口中安装服务模式，安装完成应用会自动重启（某些系统需要手动重启 APP），Service Mode 右边地球图标变为绿色即安装成功\n  点击General中TUN Mode右边开关启动 TUN 模式\n  无法安装参考：\n$ curl https://gist.githubusercontent.com/Fndroid/2119fcb5ccb5a543a8f6a609418ae43f/raw/592eba4f480c7ccb4f29c9b8e80d24bfd5dda8cf/linux.sh  cfw-tun.sh \u0026\u0026 chmod +x cfw-tun.sh \u0026\u0026 sudo ./cfw-tun.sh install  如要卸载则将 install 改为 uninstall，最后一部分位 CFW 安装目录\n  Setup System stack in Fake-IP mode Edit config\ndns: enable: true listen: 0.0.0.0:1053 fake-ip-range: 198.18.0.1/16 enhanced-mode: fake-ip nameserver: - 114.114.114.114 tun: enable: true stack: system dns-hijack: - tcp://8.8.8.8:53 interface-name: en0 Run Clash\nsudo ./clash Set Route\n# Based on https://github.com/Kr328/kr328-clash-setup-scripts/blob/master/setup-clash-tun.sh ipset create localnetwork hash:net ipset add localnetwork 127.0.0.0/8 ipset add localnetwork 10.0.0.0/8 ipset add localnetwork 169.254.0.0/16 ipset add localnetwork 192.168.0.0/16 ipset add localnetwork 224.0.0.0/4 ipset add localnetwork 240.0.0.0/4 ipset add localnetwork 172.16.0.0/12 ip tuntap add user root mode tun utun0 ip link set utun0 up ip route replace default dev utun0 table 0x162 ip rule add fwmark 0x162 lookup 0x162 iptables -t mangle -N CLASH iptables -t mangle -F CLASH iptables -t mangle -A CLASH -p tcp --dport 53 -j MARK --set-mark 0x162 iptables -t mangle -A CLASH -p udp --dport 53 -j MARK --set-mark 0x162 iptables -t mangle -A CLASH -m addrtype --dst-type BROADCAST -j RETURN iptables -t mangle -A CLASH -m set --match-set localnetwork dst -j RETURN iptables -t mangle -A CLASH -d 198.18.0.0/16 -j MARK --set-mark 0x162 iptables -t mangle -A CLASH -j MARK --set-mark 0x162 iptables -t mangle -I OUTPUT -j CLASH iptables -t mangle -I PREROUTING -m set ! --match-set localnetwork dst -j MARK --set-mark 0x162 sysctl -w net/ipv4/ip_forward=1 sysctl -w net.ipv4.conf.utun0.rp_filter=0 Set Gateway and DNS server in other devices\nSet the gateway and DNS server, then enjoy the clash\nTProxy Mode Transparent proxies act as intermediaries between a user and a web service. When a user connects to a service, the transparent proxy intercepts the request before passing it on to the provider. Transparent proxies are considered transparent because the user isn’t aware of them. On the other hand, the servers hosting the service recognize that the proxied traffic is coming from a proxy and not directly from the user.\nAnd Tproxy is first choice of realize transparent proxy with NAT on Linux. In the past, Clash TProxy mode only support TCP traffic. After version 0.19, Clash TProxy mode also support UDP traffic, it will solve a NAT problem.\nWhat’s different between TProxy mode and TUN mode?\nThere’s no big difference in user-side.\nIn developer side, Tproxy is a proxy, although it is not perceived by the application. And TUN is a gatway, application knows there is a gateway, and traffic must pass through it.\nCheck your config\nMake sure you config have no tun field.\ndns: enable: true listen: 0.0.0.0:1053 enhanced-mode: redir-host # or fake-ip nameserver: - 114.114.114.114 Add Rules in iptable\niptables -t nat -N clash iptables -t nat -A clash -d 0.0.0.0/8 -j RETURN iptables -t nat -A clash -d 10.0.0.0/8 -j RETURN iptables -t nat -A clash -d 127.0.0.0/8 -j RETURN iptables -t nat -A clash -d 169.254.0.0/16 -j RETURN iptables -t nat -A clash -d 172.16.0.0/12 -j RETURN iptables -t nat -A clash -d 192.168.0.0/16 -j RETURN iptables -t nat -A clash -d 224.0.0.0/4 -j RETURN iptables -t nat -A clash -d 240.0.0.0/4 -j RETURN iptables -t nat -A clash -d \"$local_ipv4\" -j RETURN iptables -t nat -A clash -p tcp -j REDIRECT --to-port \"$proxy_port\" iptables -t nat -I PREROUTING -p tcp -d 8.8.8.8 -j REDIRECT --to-port \"$proxy_port\" iptables -t nat -I PREROUTING -p tcp -d 8.8.4.4 -j REDIRECT --to-port \"$proxy_port\" iptables -t nat -A PREROUTING -p tcp -j clash iptables -t nat -A OUTPUT -p tcp -d 198.18.0.0/16 -j REDIRECT --to-port \"$proxy_port\" # use it just for fake-ip iptables -t nat -N CLASH_DNS iptables -t nat -F CLASH_DNS iptables -t nat -A CLASH_DNS -p udp -j REDIRECT --to-port 1053 iptables -t nat -I OUTPUT -p udp --dport 53 -j CLASH_DNS iptables -t nat -I PREROUTING -p udp --dport 53 -j REDIRECT --to 1053 配置文件 Clash 是基于 Go 语言写的科学上网工具，目前支持 windows, mac, android, openwrt, linux 平台，支持 ss, trojan, vmess, snell 协议，支持分流规则。\nclash 配置文件格式为 yaml 格式，格式如下：\nport: 7890 socks-port: 7891 allow-lan: true mode: Rule log-level: info external-controller: :9090 proxies: - {name: cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1} proxy-groups: - name: 🔰 节点选择 type: select proxies: - ♻️ 自动选择 - 🎯 全球直连 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1 rules: - DOMAIN-SUFFIX,local,🎯 全球直连 proxies proxies 代表节点数据，所有的分流规则都是按照这些节点数据来的，这里可以有很多个节点数据，可以是 trojan, ss, vmess 类型都可以，我们来看个例子：\n{name: cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1, server: xxxx, port: 59113, type: vmess, uuid: 1111111, alterId: 0, cipher: auto, tls: false} clash 用统一的格式来定义不同的节点类型，用 type 来进行区分，特有的属性只需要在这个结构体加上自己属性就可以， clash 客户端会根据 type 不同而来读数据\nproxy-groups 可以把 proxy-groups 理解为一道又道的过滤网，当你发出一个请求时，这个请求将会被在哪一层的过滤网给拦截下来，取决于你的 rules 与 请求匹配。我们来解析一下 proxy-groups 里面的参数。\nname\n代表组的名称，组的名称可以随意命名，但建议取有意义的名称，组的名称可以被其它的组引用，也可以放在规则里面\ntype\ntype 代表这个组的类型，有下面四种情况\n  select 手动选择，该组在节点列表上，手动选择列表或者 proxy-group\n  url-test 延迟最低节点，测试该组所有节点的延迟\n  fallback 回落，连接该组第一个节点，不可用时切换到下一个节点\n  load-balance 负载均衡，由该组2个以上的节点提供链接\n  proxies\n这里可以是组名称或者节点名称，依次从上到下进行选择，比如看下面这个\n- name: 🔰 节点选择 type: select proxies: - ♻️ 自动选择 - 🎯 全球直连 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 26-2 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 28-3 - cfmem.com - 🇭🇰 香港-4 - cfmem.com - 🇭🇰 香港 2-5 - cfmem.com - 🇭🇰 香港 3-6 - cfmem.com - 🇭🇰 香港 4-7 - cfmem.com - 🇭🇰 香港 10-8 - cfmem.com - 🇭🇰 香港 11-9 - name: ♻️ 自动选择 type: url-test url: http://www.gstatic.com/generate_204 interval: 300 proxies: - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 26-2 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 28-3 - cfmem.com - 🇭🇰 香港-4 - cfmem.com - 🇭🇰 香港 2-5 - cfmem.com - 🇭🇰 香港 3-6 - cfmem.com - 🇭🇰 香港 4-7 - cfmem.com - 🇭🇰 香港 10-8 - cfmem.com - 🇭🇰 香港 11-9 - cfmem.com - 🇭🇰 香港 12-10 - name: 🌍 国外媒体 type: select proxies: - 🔰 节点选择 - ♻️ 自动选择 - 🎯 全球直连 - cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1 名称为自动选择的组会每间隔 300 毫秒去 ping 节点数据，测试的地址是：http://www.gstatic.com/generate_204\n而 国外媒体这一项是手动选择默认选择第一个 节点选择，节点选择的第一个是自动选择，所以默认是根据 ping 值来选择节点的\nrules rules 也就是具体的分发规则了，规则一般由 [规则前缀],[域名或地址],[组名] 组成。我们来看下，其中 no-resolve 表示不要解析这条规则，只处理直接 ip 访问请求\nrules: - DOMAIN-SUFFIX,local,🎯 全球直连 - IP-CIDR,192.168.0.0/16,🎯 全球直连,no-resolve - IP-CIDR,10.0.0.0/8,🎯 全球直连,no-resolve - IP-CIDR,172.16.0.0/12,🎯 全球直连,no-resolve - IP-CIDR,127.0.0.0/8,🎯 全球直连,no-resolve - IP-CIDR,100.64.0.0/10,🎯 全球直连,no-resolve - IP-CIDR6,::1/128,🎯 全球直连,no-resolve - IP-CIDR6,fc00::/7,🎯 全球直连,no-resolve - IP-CIDR6,fe80::/10,🎯 全球直连,no-resolve - IP-CIDR6,fd00::/8,🎯 全球直连,no-resolve - DOMAIN-KEYWORD,1drv,Ⓜ️ 微软服务 规则前缀有这些内容\n  DOMAIN-SUFFIX 表示包含什么后缀的域名\n  IP-CIDR IPV4匹配\n  IP-CIDR6 IPV6匹配\n  DOMAIN-KEYWORD,xxx 表示包含 xxx域名关键字的链接\n  DOMAIN abc.hello.com 表示包含完整的域名\n  PROCESS-NAME 表示进程名称\n  GEOIP 数据库（国家代码）匹配\n  MATCH 全匹配（一般放在最后）\n  DNS污染 DNS服务器即是将用户请求的域名(网站URL)转换为IP地址的服务器。当年中国长城防火墙开始部署时就是通过DNS污染来屏蔽网站的。这项名为DNS污染的技术，就是对用户请求的域名回应一个错误的IP地址，使用户无法访问某个网站。至此，国内几乎所有的公共DNS服务器都被污染，用户无法请求到被屏蔽网站的正确IP地址。但是目前，防火墙的屏蔽功能早已不止DNS污染那么简单了，可以针对IP/域名直接阻断连接，甚至屏蔽了国外未受污染的DNS服务器，因此仅靠国内的DNS是不够翻墙的。\n对抗DNS劫持 早期的DNS服务器（我们日常使用的基本也是）都是明文传输数据的，这就意味着防火墙可以探测出你访问的网站，并且直接篡改DNS服务器回应的IP地址。这不仅仅存在于长城防火墙，还存在于某些无良网络运营商，把用户的请求的网站劫持到某个假的网站上。\n于是目前出现了DoH与DoT，可使用https/tls 加密传输DNS请求，这使得DNS不再容易被劫持了。国内的许多公共DNS也都提供了这项服务。以下是我所推荐的国内DNS。\n https://223.5.5.5/dns-query https://223.6.6.6/dns-query https://doh.pub/dns-query  或许可以参考 如何选择适合的公共 DNS？\n何时使用 Clash只会在域名匹配为直连时使用配置文件的DNS，其余时刻均交给节点进行远程解析。当然，节点域名也会使用配置文件的DNS。\n举个例子，访问 google.com 时，匹配到代理规则，那么这个流量将直接被发送至节点服务器，交给节点处理（通常是节点服务器的DNS解析，这个不用管了）。访问 microsoft.com 时，匹配到直连规则，Clash将使用配置文件的DNS设定进行解析。\nDNS配置 首先，打开你的 Clash 配置文件（如果你使用 Clash for Windows 或 Clash for Android, 可以使用软件自带的“覆写/Mixin”功能），添加以下段落：\ndns: enable: true listen: 0.0.0.0:53Copy 这一段的意思是启用 Clash 的 DNS 服务并让其在 53 端口（这是绝大多数操作系统将 DNS 解析报文发送到的端口）监听来自任意网络界面的 DNS 请求。如果你的设备并不需要向其他设备提供解析服务，或你的设备常常需要接入不安全的网络（如手机，笔记本电脑），应当将第三行的 0.0.0.0:53 改为 127.0.0.1:53 让 Clash 仅监听本机的 DNS 解析报文。\n（Clash 默认会同时监听 IPv4 和 IPv6 界面，如果你不需要后者，可以添加一行 ipv6: false）\n由于连接到加密 DNS 服务时，需要解析服务器本身的域名，因此需要指定一些相对干净的国内 明文 DNS 服务器地址。继续添加以下部分（注意缩进）：\n#--omitted-- default-nameserver: - 119.29.29.29 - 223.5.5.5Copy 当收到 DNS 解析请求时，Clash 会使用以上 DNS 服务器解析加密 DNS 服务器地址并建立连接。\n接下来，指定解析国内域名时使用的加密 DNS 服务器地址：\n#--omitted-- nameserver: - https://doh.pub/dns-query - https://dns.alidns.com/dns-queryCopy Clash 支持 DoH（https://domain.tld/dns-query 形式） 和 DoT（tls://domain.tld 形式）两种加密 DNS 协议，不支持 DoQ.（当然也支持在此指定备用的明文 DNS）\n然后，指定解析国外域名时使用的加密 DNS 服务器地址，并设置分流规则：\n#--omitted-- fallback: - https://1.1.1.1/dns-query - https://dns.google/dns-query fallback-filter: geoip: true geoip-code: CN ipcidr: - 240.0.0.0/4Copy “fallback” 字段指定的 DNS 服务器将被用于解析非国外域名，而 “fallback-filter” 字段则实现我们想要的分流规则——当请求解析的域名在 GeoIP 数据库内的国家代码不是 CN 时，或是域名在前文设置的 DNS 服务器内的解析结果位于 240.0.0.0/4 这一 IP 段内时（被屏蔽的域名解析常常会被污染到这一段），使用 “fallback” 字段指定的 DNS 服务器解析域名。\n最后，修改系统 DNS 服务器为 127.0.0.1 即可。\n代理环境中的 DNS 解析行为 虽然 Fake IP 这个概念早在 2001 年就被提出来了，但是到 Clash 提供 fake-ip 增强模式以后，依然有很多人对 Fake IP 这个概念以及其作用知之甚少。本文就简单谈谈在代理环境中，TCP 连接建立之前发生的事。由于移动设备操作系统中网络栈相对复杂，本文的例子也并不一定适用于移动端环境。文章中也许会存在很多错误，也希望各路大佬的勘误和斧正。\n不使用代理 如果在不使用任何代理的情况下，打开一个没有命中 DNS 缓存的网站（比如 blog.skk.moe）的时候，浏览器和操作系统大概会执行这么一些操作：\n 浏览器自己都有 DNS 缓存机制，因此浏览器会先开始寻找自己的缓存，不过没有找到 blog.skk.moe 的解析结果 浏览器通过调用操作系统的 getaddrinfo 方法，向操作系统寻求解析结果 操作系统自己也有一层 DNS 缓存，但是现在操作系统从自己的缓存中依然找不到这一结果 在系统的网络设置之中有设置上游 DNS 地址，假设操作系统中设置的是 119.29.29.29，那么操作系统会向 119.29.29.29 发起解析请求（UDP 流量）拿到 blog.skk.moe 的 IP 当然如果 119.29.29.29 自己没有 blog.skk.moe 的解析结果会找它的上游去要。不过我们不关心这一点，反正最后 119.29.29.29 会把 blog.skk.moe 的解析结果返回给设备的操作系统 现在，浏览器已经可以开始向 blog.skk.moe 的 IP 发起 HTTPS 连接了  以上是打开一个网页常见的 DNS 解析流程，对于其它非 HTTP 的 TCP 连接（比如 SMTP）也都差不多是这个流程——由于 TCP/IP 的协议特性，在应用发起 TCP 连接时，会先发出一个 DNS question（发一个 IP Packet），获取要连接的服务器的 IP 地址，然后直接向这个 IP 地址发起连接。\n设置代理并使用直连 现在，我们在应用程序（比如我们的浏览器、或者其它应用）中设置了代理，但是这个代理不涉及到任何远端服务器（直连模式）。接下来以设置了 SOCKS5 代理的浏览器为例。\n 浏览器不再需要从自己的 DNS 缓存中寻找 blog.skk.moe，因为已经有了 SOCKS5 代理，浏览器可以直接将域名封装在 SOCKS5 流量之中发往代理客户端 代理客户端从 SOCKS5 流量中抽出 blog.skk.moe 这个域名并设法获得解析结果 代理客户端将你的 SOCKS5 流量还原成标准的 TCP 请求 代理客户端将这个 TCP 连接建立起来，在这个例子之中 TCP 连接承载的是 HTTPS  之前由于获取解析结果是浏览器在操作，而大部分浏览器都会选择调用系统的 getaddrinfo 方法，因此如果你想要在 DNS 上做一些黑魔法就只能在操作系统层面实现，比如在本机或者别处架设一个带黑魔法的 DNS 服务器，然后你系统中设置使用这个 DNS 服务器。现在 DNS 解析是由代理客户端执行，因此在代理客户端上就可以实现一些黑魔法。比如 Surge 自己实现了一个 DNS Server 可以并发向多个上游同时发起查询、比如 V2Ray 可以实现不同域名的查询分流，等等。当然代理客户端也可以使用操作系统的 getaddrinfo 方法。\n设置代理并将流量转发到远端服务器 现在在上一步的基础之上，我们为代理服务器设置了一个远端服务器，这个代理会使用 某种协议 和远端服务器通信，并且这种协议和 SOCKS5 一样支持将域名封装在传输中。浏览器和代理客户端之间依然使用 SOCKS5 通信。\n 因为已经有了 SOCKS5 代理，浏览器可以直接将域名 blog.skk.moe 和整个请求封装在 SOCKS5 流量之中发往代理客户端 代理客户端从 SOCKS5 流量中抽出 blog.skk.moe 这个域名以及其它数据 代理客户端使用 某种协议 将浏览器发出的 SOCKS5 的流量重组并发给远端服务器 远端服务器使用相同的 某种协议 从流量中获得其中的域名 blog.skk.moe 远端服务器的代理服务端发起了一次 DNS 解析请求试图解析 blog.skk.moe。绝大部分情况下，代理的服务端都会直接使用操作系统的 getaddrinfo 方法、也就是由远端服务器的操作系统负责 DNS  这一次，不论是代理客户端还是你的浏览器都没有进行 DNS 解析，DNS 解析是在远端服务器上进行的。因为 某种协议 支持封装域名，然后这一次和 blog.skk.moe 连接的是远端服务器，考虑到针对 CDN 优化，DNS 解析自然需要在远端服务器上执行。\n现在我已经介绍了通过代理直连和通过代理发送给远端服务器了。但是毫无疑问，我相信本文所有的读者自己使用的上网方式都不会是全面直连或者全面代理。这就是接下来要讲的：\n设置代理并使用 IP 规则和域名规则进行分流 分流是一个麻烦事。一般情况下，你可能会需要使用域名进行分流（不论是白名单还是黑名单）。不过更多情况下你会使用到基于 IP 的规则来进行分流。\n先来看第一个例子：使用域名规则进行分流。\n 浏览器将带有域名 blog.skk.moe 的 HTTPS 请求封装在 SOCKS5 流量之中发往代理客户端 代理客户端从 SOCKS5 流量中抽取出域名 blog.skk.moe 代理客户端开始将blog.skk.moe 和域名规则列表开始比较。这个列表可以是白名单或黑名单，域名可能也没有匹配上。反正最终比较得出的结果就是 blog.skk.moe 是否需要走代理。 如果不需要走代理，代理客户端剩下会做的事情和本文第二部分「设置代理并使用直连」就完全一样了；同理，需要走代理的话就需要进行本文第三部分的那个流程  使用域名规则分流很简单，除非 blog.skk.moe 最终是直连，否则代理客户端不需要进行 DNS 解析。\n现在来看第二个例子：使用 IP 规则分流。\n 浏览器将带有域名 blog.skk.moe 的 HTTPS 请求封装在 SOCKS5 流量之中发往代理客户端 代理客户端从 SOCKS5 流量中抽取出域名 blog.skk.moe 代理客户端得到 blog.skk.moe 的解析结果 代理客户端开始将blog.skk.moe 的解析结果和 IP 规则列表开始比较。这个列表可以是 cnlist 或者 MaxMind IP 数据库。反正最终得出的结果就是 blog.skk.moe 解析结果的 IP 是否需要走代理。 如果不需要走代理，代理客户端剩下会做的事情和本文第二部分「设置代理并使用直连」就完全一样了；同理，需要走代理的话就需要进行本文第三部分的那个流程。  使用 IP 规则分流，前提首先你得有一个 IP 拿来比较。所以代理客户端必须先进行一次 DNS 解析。使用什么方法进行 DNS 解析并不重要，之前已经说过代理客户端甚至可以使用自己的黑魔法，而我们只需要关心最终代理客户端拿到了一个 IP 并且可以用于规则判定。\n此时需要注意的是，虽然代理客户端获得了一个 IP，但是你只有在直连的时候，代理客户端可能（并且基本上都会）复用这个 IP；如果是将流量交给远程服务器，由于 某种协议 支持封装域名，因此远程服务器拿到的还是域名不是 IP、还需要进行一次解析。也就是说，远端服务器连接的 IP 与 代理客户端解析得到的 IP 毫无关系。\n使用 redir / tun2socks 实现全局流量经过代理 在开始之前，我们先复习一下 TCP/IP 协议怎么说的——「在应用发起 TCP 连接时，会先发出一个 DNS question（发一个 IP Packet），获取要连接的服务器的 IP 地址，然后直接向这个 IP 地址发起连接」\n全局流量代理可能会出现在路由器上或者 TUN/TAP 型的支持全局代理客户端上。用户不再主动为每个应用程序设置代理。此时应用程序是不会感知到代理客户端的存在，它们会正常的发起 TCP 连接，并且由于 TCP/IP 协议，在拿到 DNS 解析结果之前，连接是不能建立的。\n 浏览器自己都有 DNS 缓存机制，因此浏览器会先开始寻找自己的缓存，不过没有找到 blog.skk.moe 的解析结果 浏览器通过调用操作系统的 getaddrinfo 方法，向操作系统寻求解析结果 操作系统自己也有一层 DNS 缓存，但是现在操作系统从自己的缓存中依然找不到这一结果 在系统的网络设置之中有设置上游 DNS 地址。代理客户端可能会修改系统设置中的 DNS 到 127.0.0.1 或者别的 IP、也可能保留用户之前的设置，这无所谓，因为… 操作系统发出的 DNS 解析请求会经过代理客户端并最终被截获 代理客户端可以将这个解析请求原样发出去、或者用自己的黑魔法，总之代理客户端都会拿到一个解析结果 代理客户端将这个解析结果返回回去，操作系统拿到了这个解析结果并返回给浏览器 浏览器对这个解析结果的 IP 建立一个 TCP 连接并发送出去 这个 TCP 连接被代理客户端截获。由于之前代理客户端进行的 DNS 解析请求这一动作，代理客户端可以找到这个只包含目标 IP 的 TCP 连接原来的目标域名 如果是支持 redir 的代理客户端，那么代理客户端就会直接将域名和 TCP 连接中的其它数据封装成 某种协议 发给远端服务器；或者封装成 SOCKS5 后交给支持 SOCKS5 的代理客户端  如果代理客户端需要按照域名进行分流，一般会在第 6 步代理客户端解析出一个 IP 或者第 9 步代理客户端拿到域名以后。FancySS、KoolSS、SSTap 的流程大抵都是如此。\n和应用程序直接将流量封装成 SOCKS5 大有不同，在类似于透明代理的环境下浏览器和其它应用程序是正常地发起 TCP 连接。因此除非得到一个 DNS 解析结果，否则 TCP 连接不会建立；代理客户端也会需要通过这个 DNS 查询动作，才能找到之后的 TCP 连接的域名。 你大概能够发现，浏览器、应用程序直接设置 SOCKS5 代理的话，可以不在代理客户端发起 DNS 解析请求就能将流量发送给远端服务器；而在透明代理模式下，不论是否需要 IP 规则分流都需要先进行一次 DNS 解析才能建立连接。\n有没有办法能像直接设置 SOCKS5 代理一样省掉一次 DNS 解析呢？有，就是代理客户端自己不先执行查询动作，丢一个 Fake IP 回去让浏览器、应用程序立刻建立 TCP 连接：\n在 redir / tun2socks 中使用 Fake IP Fake IP 的定义出自 RFC3089。这个 RFC 定义了一种新的将 TCP 连接封装成 SOCKS 协议的方法。\n 浏览器自己都有 DNS 缓存机制，因此浏览器会先开始寻找自己的缓存，不过并没有找到 blog.skk.moe 的解析结果 浏览器通过调用操作系统的 getaddrinfo 方法，向操作系统寻求解析结果 操作系统自己也有一层 DNS 缓存，但是现在操作系统从自己的缓存中依然找不到这一结果 在系统的网络设置之中设置了一个专门的上游 DNS 地址，可能是用户手动设置的也可能是代理客户端设置的。不论如何，这个设置最终会使操作系统向代理客户端发起 DNS 请求 操作系统发出的 DNS 解析请求会经过代理客户端并最终被截获 代理客户端从解析请求中获得域名，从 Fake IP 池中选取一个 IP 建立映射 代理客户端将这个 Fake IP 返回回去，操作系统拿到了这个 Fake IP 并返回给浏览器 浏览器对 Fake IP 建立一个 TCP 连接并发送出去 这个 TCP 连接被代理客户端截获。代理客户端抽取出 Fake IP 并反查出这个 TCP 连接中对应的域名 有了 TCP 连接和域名，代理客户端可以轻易地将其使用 SOSCKS5 或者 某种协议 进行封装  有了 Fake IP，代理客户端无需进行 DNS 解析。最后不论是浏览器、代理客户端还是远端服务器都不会去和 Fake IP 进行连接，因为在代理客户端这里就已经完成了截获、重新封装。\n即使按照域名规则分流，代理客户端都没有进行 DNS 解析的需要。只有在遇到了按照 IP 进行分流的规则时，代理客户端才需要进行一次解析拿到一个 IP 用于判断。即便如此，这个 IP 只用于分流规则的匹配，不会被用于实际的连接。\nFancySS 和 Surge / Clash 的区别 FancySS 是使用的 redir，Surge 的增强模式使用的是 Fake IP，Clash 的增强模式既有 redir-host 也有 Fake IP。首先把 FancySS 等路由器上常见的代理客户端和 Clash 的 redir-host 分为一类，Surge 的增强模式和 Clash 的 fake-ip 模式分为另一类。\n路由器上常见的代理客户端一般内置了 dns2socks、dnscryp-proxy、PCap_DNSProxy 等等 DNS 方案、也支持按照一定的规则进行分流，但是都是用于答复应用程序的 DNS question 使其建立 TCP 连接的，除非直连，否则通过这些 DNS 方案拿到的解析结果的 IP 并不会被用上。 大部分路由器上的代理客户端，DNS 解析请求都是通过路由器本机发出（或转发到单一远端服务器进行解析），因此解析结果只能说「至少能用」（不一定是有 CDN 优化的，甚至有可能会有 DNS 污染），如果流量不经过代理客户端直接发往这些 IP 地址，一般也不会影响浏览器、应用程序的正常使用。因此路由器上的代理客户端可以实现通过 iptables 控制让某些端口、某些设备的流量不经过代理客户端。 而在 Fake IP 模式下，浏览器、应用程序都是对 Fake IP 发起连接，如果没有代理客户端对连接进行重新封转，那么这部分流量就不能被发往真实的目的 IP，因此所有流量都必须经过代理客户端，而根据端口、设备的分流就需要由代理客户端自己实现。\n如果操作系统或者浏览器缓存了 DNS 解析结果 之前的透明代理的两个例子中，我们都假定浏览器和操作系统都没有缓存 DNS 解析结果。但是，如果操作系统或者应用程序缓存了 DNS 解析结果会发生什么？\n如果是不使用 Fake IP 的 redir / tun2socks 情况下，由于操作系统、浏览器或者应用程序中的任何一个缓存了 DNS 解析结果，因此 TCP 连接可以直接根据缓存的解析结果的 IP 建立，代理客户端并没有预先收到对应的 DNS question。在这种情况下，代理客户端有可能直接将这个连接视为和 IP 连接而不是和域名连接，根据域名规则的分流可能就会因此失效，不过根据 IP 分流的规则没有失效。 如果为了避免域名分流规则失效，你可以设法阻止操作系统或者浏览器缓存 DNS 解析结果，这样每次建立 TCP 连接之前都会发送 DNS question 使代理客户端探测到域名。但是这意味着每次 TCP 连接建立都需要代理客户端进行一次 DNS 解析请求（当然代理客户端可以对 DNS 解析进行缓存避免出现延时激增）。\n而对于 Fake IP 模式来说，由于代理客户端内存储有 Fake IP 和真实域名之间的映射表，因此即使操作系统或应用程序缓存了 Fake IP，在之后的 TCP 连接中，代理客户端收到流量后依然可以抽取出 Fake IP 反查出域名，因此不受 DNS 缓存的影响。\n我在这里留几个问题给大家思考一下：\n 如果使用了 Fake IP，代理客户端不论域名是否真实存在都会返回一个 Fake IP 给浏览器，那么浏览器在试图访问一个不存在的域名时，错误信息应该是什么样的？会不会出现 DNS 解析失败的错误信息？ 如果操作系统或者浏览器缓存了 Fake IP，但是代理客户端中 Fake IP 和域名的映射表丢失以后，会出现什么状况？可能会出现什么错误信息？  第二个问题很有趣。因为如果你找到了第二个问题的答案，你就会意识到 Clash 在 Fake IP 模式下偶发的无法上网的原因了。\n参考资料  HTTP 代理原理及实现（一） - 我的文章中举得都是 SOCKS5 的例子，如果想了解一下在 HTTP 代理中流量是如何被封装的，可以看看屈屈的这篇博客 Surge 原理与实现 - Surge 开发者写的 Surge 早期版本的工作原理，可以了解一下 Surge 是怎么处理各种协议的流量的 漫谈各种黑科技式 DNS 技术在代理环境中的应用 - Kitsunebi 开发者写的文章，详细地介绍了在不同的 V2Ray 配置下的 DNS 行为，同时还有对移动端网络栈的一些介绍  WireGuard 官方文档：https://github.com/pirate/wireguard-docs\nWireGuard 是由 Jason Donenfeld 等人用 C 语言编写的一个开源 VPN 协议，被视为下一代 VPN 协议，旨在解决许多困扰 IPSec/IKEv2、OpenVPN 或 L2TP 等其他 VPN 协议的问题。它与 Tinc 和 MeshBird 等现代 VPN 产品有一些相似之处，即加密技术先进、配置简单。从 2020 年 1 月开始，它已经并入了 Linux 内核的 5.6 版本，这意味着大多数 Linux 发行版的用户将拥有一个开箱即用的 WireGuard。\n术语 Peer/Node/Device\n连接到 VPN 并为自己注册一个 VPN 子网地址（如 192.0.2.3）的主机。还可以通过使用逗号分隔的 CIDR 指定子网范围，为其自身地址以外的 IP 地址选择路由。\n中继服务器（Bounce Server）\n一个公网可达的对等节点，可以将流量中继到 NAT 后面的其他对等节点。Bounce Server 并不是特殊的节点，它和其他对等节点一样，唯一的区别是它有公网 IP，并且开启了内核级别的 IP 转发，可以将 VPN 的流量转发到其他客户端。\n子网（Subnet）\n一组私有 IP，例如 192.0.2.1-255 或 192.168.1.1/24，一般在 NAT 后面，例如办公室局域网或家庭网络。\nCIDR 表示法\nCIDR中文全称是无分类域间路由选择，英文全称是Classless Inter-Domain Routing，在平常，大家多称之为无分类编址，它也是构成超网的一种技术实现。CIDR在一定程度上解决了路由表项目过多过大的问题。CIDR之所以称为无分类编址，就是因为CIDR完全放弃了之前的分类IP地址表示法，它真正消除了传统的A类、B类、C类地址以及划分子网的概念，它使用如下的IP地址表示法：\nIP地址 ::= {， } / 网络前缀所占位数 CIDR仅将IP地址划分为网络前缀和主机号两个部分，可以说又回到了二级IP地址的表示，不过大家要注意，最后面用“/”斜线分隔，在其后写上了网络前缀所占的位数，这样就不需要告知路由器地址掩码，仅需要通过网络前缀所占的位数就可以得到地址掩码，为了统一，CIDR中的地址掩码依然称为子网掩码。\nNAT\n子网的私有 IP 地址由路由器提供，通过公网无法直接访问私有子网设备，需要通过 NAT 做网络地址转换。路由器会跟踪发出的连接，并将响应转发到正确的内部 IP。\n公开端点（Public Endpoint）\n节点的公网 IP 地址:端口，例如 123.124.125.126:1234，或者直接使用域名 some.domain.tld:1234。如果对等节点不在同一子网中，那么节点的公开端点必须使用公网 IP 地址。\n私钥（Private key）\n单个节点的 WireGuard 私钥，生成方法是：wg genkey  example.key。\n公钥（Public key）\n单个节点的 WireGuard 公钥，生成方式为：wg pubkey example.key.pub。\nDNS\n域名服务器，用于将域名解析为 VPN 客户端的 IP，不让 DNS请求泄漏到 VPN 之外。\n工作原理 中继服务器工作原理\n中继服务器（Bounce Server）和普通的对等节点一样，它能够在 NAT 后面的 VPN 客户端之间充当中继服务器，可以将收到的任何 VPN 子网流量转发到正确的对等节点。事实上 WireGuard 并不关心流量是如何转发的，这个由系统内核和 iptables 规则处理。\n如果所有的对等节点都是公网可达的，则不需要考虑中继服务器，只有当有对等节点位于 NAT 后面时才需要考虑。\n*在 WireGuard 里，客户端和服务端基本是平等的，差别只是谁主动连接谁而已。*双方都会监听一个 UDP 端口，谁主动连接，谁就是客户端。主动连接的客户端需要指定对端的公网地址和端口，被动连接的服务端不需要指定其他对等节点的地址和端口。如果客户端和服务端都位于 NAT 后面，需要加一个中继服务器，客户端和服务端都指定中继服务器作为对等节点，它们的通信流量会先进入中继服务器，然后再转发到对端。\nWireGuard 是支持漫游的，也就是说，双方不管谁的地址变动了，WireGuard 在看到对方从新地址说话的时候，就会记住它的新地址（跟 mosh 一样，不过是双向的）。所以双方要是一直保持在线，并且通信足够频繁的话（比如配置 persistent-keepalive），两边的 IP 都不固定也不影响的。\n流量路由\n利用 WireGuard 可以组建非常复杂的网络拓扑，这里主要介绍几个典型的拓扑：\n 端到端直接连接  这是最简单的拓扑，所有的节点要么在同一个局域网，要么直接通过公网访问，这样 WireGuard 可以直接连接到对端，不需要中继跳转。\n一端位于 NAT 后面，另一端直接通过公网暴露  这种情况下，最简单的方案是：通过公网暴露的一端作为服务端，另一端指定服务端的公网地址和端口，然后通过 persistent-keepalive 选项维持长连接，让 NAT 记得对应的映射关系。\n两端都位于 NAT 后面，通过中继服务器连接  大多数情况下，当通信双方都在 NAT 后面的时候，NAT 会做源端口随机化处理，直接连接可能比较困难。可以加一个中继服务器，通信双方都将中继服务器作为对端，然后维持长连接，流量就会通过中继服务器进行转发。\n两端都位于 NAT 后面，通过 UDP NAT 打洞  上面也提到了，当通信双方都在 NAT 后面的时候，直接连接不太现实，因为大多数 NAT 路由器对源端口的随机化相当严格，不可能提前为双方协调一个固定开放的端口。必须使用一个信令服务器（STUN），它会在中间沟通分配给对方哪些随机源端口。通信双方都会和公共信令服务器进行初始连接，然后它记录下随机的源端口，并将其返回给客户端。这其实就是现代 P2P 网络中 WebRTC 的工作原理。有时候，即使有了信令服务器和两端已知的源端口，也无法直接连接，因为 NAT 路由器严格规定只接受来自原始目的地址（信令服务器）的流量，会要求新开一个随机源端口来接受来自其他 IP 的流量（比如其他客户端试图使用原来的通信源端口）。运营商级别的 NAT 就是这么干的，比如蜂窝网络和一些企业网络，它们专门用这种方法来防止打洞连接。更多细节请参考下一部分的 NAT 到 NAT 连接实践的章节。\n如果某一端同时连接了多个对端，当它想访问某个 IP 时，如果有具体的路由可用，则优先使用具体的路由，否则就会将流量转发到中继服务器，然后中继服务器再根据系统路由表进行转发。你可以通过测量 ping 的时间来计算每一跳的长度，并通过检查对端的输出（wg show wg0）来找到 WireGuard 对一个给定地址的路由方式。\n报文格式\nWireGuard 使用加密的 UDP 报文来封装所有的数据，UDP 不保证数据包一定能送达，也不保证按顺序到达，但隧道内的 TCP 连接可以保证数据有效交付。WireGuard 的报文格式如下图所示：\n性能\nWireGuard 声称其性能比大多数 VPN 协议更好，但这个事情有很多争议，比如某些加密方式支持硬件层面的加速。\nWireGuard 直接在内核层面处理路由，直接使用系统内核的加密模块来加密数据，和 Linux 原本内置的密码子系统共存，原有的子系统能通过 API 使用 WireGuard 的 Zinc 密码库。WireGuard 使用 UDP 协议传输数据，在不使用的情况下默认不会传输任何 UDP 数据包，所以比常规 VPN 省电很多，可以像 55 一样一直挂着使用，速度相比其他 VPN 也是压倒性优势。\n安全模型\nWireGuard 使用以下加密技术来保障数据的安全：\n 使用 ChaCha20 进行对称加密，使用 Poly1305 进行数据验证。 利用 Curve25519 进行密钥交换。 使用 BLAKE2 作为哈希函数。 使用 HKDF 进行解密。  WireGuard 的加密技术本质上是 Trevor Perrin 的 Noise 框架的实例化，它简单高效，其他的 VPN 都是通过一系列协商、握手和复杂的状态机来保障安全性。WireGuard 就相当于 VPN 协议中的 qmail，代码量比其他 VPN 协议少了好几个数量级。\n密钥管理\nWireGuard 通过为每个对等节点提供简单的公钥和私钥来实现双向认证，每个对等节点在设置阶段生成密钥，且只在对等节点之间共享密钥。每个节点除了公钥和私钥，不再需要其他证书或预共享密钥。\n在更大规模的部署中，可以使用 Ansible 或 Kubernetes Secrets 等单独的服务来处理密钥的生成、分发和销毁。\n如果你不想在 wg0.conf 配置文件中直接硬编码，可以从文件或命令中读取密钥，这使得通过第三方服务管理密钥变得更加容易：\n[Interface] ... PostUp = wg set %i private-key /etc/wireguard/wg0.key (cat /some/path/%i/privkey) 从技术上讲，多个服务端之间可以共享相同的私钥，只要客户端不使用相同的密钥同时连接到两个服务器。但有时客户端会需要同时连接多台服务器，例如，你可以使用 DNS 轮询来均衡两台服务器之间的连接，这两台服务器配置相同。大多数情况下，每个对等节点都应该使用独立的的公钥和私钥，这样每个对等节点都不能读取到对方的流量，保障了安全性。\n搭建使用与配置详解 快速开始 安装\n# Ubuntu ≥ 18.04 $ apt install wireguard 在中继服务器上开启 IP 地址转发：\n$ echo \"net.ipv4.ip_forward = 1\"  /etc/sysctl.conf $ echo \"net.ipv4.conf.all.proxy_arp = 1\"  /etc/sysctl.conf $ sysctl -p /etc/sysctl.conf 添加 iptables 规则，允许本机的 NAT 转换：\n$ iptables -A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT $ iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT $ iptables -A FORWARD -i wg0 -o wg0 -m conntrack --ctstate NEW -j ACCEPT $ iptables -t nat -A POSTROUTING -s 192.0.2.0/24 -o eth0 -j MASQUERADE 需要把 eth0 改成你实际使用的网卡接口名称。\n配置文件\n配置文件可以放在任何路径下，但必须通过绝对路径引用。默认路径是 /etc/wireguard/wg0.conf。\n生成密钥\n#生成私钥 $ wg genkey  example.key # 生成公钥 $ wg pubkey example.key.pub 启动与停止\n$ wg-quick up /full/path/to/wg0.conf $ wg-quick down /full/path/to/wg0.conf # 启动/停止 VPN 网络接口 $ ip link set wg0 up $ ip link set wg0 down # 注册/注销 VPN 网络接口 $ ip link add dev wg0 type wireguard $ ip link delete dev wg0 # 注册/注销 本地 VPN 地址 $ ip address add dev wg0 192.0.2.3/32 $ ip address delete dev wg0 192.0.2.3/32 # 添加/删除 VPN 路由 $ ip route add 192.0.2.3/32 dev wg0 $ ip route delete 192.0.2.3/32 dev wg0 查看信息\n# 查看系统 VPN 接口信息 $ ip link show wg0 # 查看 VPN 接口详细信息 $ wg show all $ wg show wg0 # 查看 VPN 接口地址 $ ip address show wg0 路由\n# 查看系统路由表 $ ip route show table main $ ip route show table local # 获取到特定 IP 的路由 $ ip route get 192.0.2.3 一键安装\n一键安装请参考这个项目：WireGuard installer\n配置详解 WireGuard 使用 INI 语法作为其配置文件格式。配置文件可以放在任何路径下，但必须通过绝对路径引用。默认路径是 /etc/wireguard/wg0.conf。\n配置文件的命名形式必须为 ${WireGuard 接口的名称}.conf。通常情况下 WireGuard 接口名称以 wg 为前缀，并从 0 开始编号，但你也可以使用其他名称，只要符合正则表达式 ^[a-zA-Z0-9_=+.-]{1,15}$ 就行。\n你可以选择使用 wg 命令来手动配置 VPN，但一般建议使用 wg-quick，它提供了更强大和用户友好的配置体验，可以通过配置文件来管理配置。\n下面是一个配置文件示例：\n[Interface] # Name = node1.example.tld Address = 192.0.2.3/32 ListenPort = 51820 PrivateKey = localPrivateKeyAbcAbcAbc= DNS = 1.1.1.1,8.8.8.8 Table = 12345 MTU = 1500 PreUp = /bin/example arg1 arg2 %i PostUp = /bin/example arg1 arg2 %i PreDown = /bin/example arg1 arg2 %i PostDown = /bin/example arg1 arg2 %i [Peer] # Name = node2-node.example.tld AllowedIPs = 192.0.2.1/24 Endpoint = node1.example.tld:51820 PublicKey = remotePublicKeyAbcAbcAbc= PersistentKeepalive = 25 [Interface]\n这一节定义本地 VPN 配置。例如：\n本地节点是客户端，只路由自身的流量，只暴露一个 IP。\n[Interface] # Name = phone.example-vpn.dev Address = 192.0.2.5/32 PrivateKey =  本地节点是中继服务器，它可以将流量转发到其他对等节点（peer），并公开整个 VPN 子网的路由。\n[Interface] # Name = public-server1.example-vpn.tld Address = 192.0.2.1/24 ListenPort = 51820 PrivateKey =  DNS = 1.1.1.1  Name  这是 INI 语法中的标准注释，用于展示该配置部分属于哪个节点。这部分配置会被 WireGuard 完全忽略，对 VPN 的行为没有任何影响。\nAddress  定义本地节点应该对哪个地址范围进行路由。如果是常规的客户端，则将其设置为节点本身的单个 IP（使用 CIDR 指定，例如 192.0.2.3/32）；如果是中继服务器，则将其设置为可路由的子网范围。\n例如：\n  常规客户端，只路由自身的流量：Address = 192.0.2.3/32\n  中继服务器，可以将流量转发到其他对等节点（peer）：Address = 192.0.2.1/24\n  也可以指定多个子网或 IPv6 子网：Address = 192.0.2.1/24,2001:DB8::/64\n  ListenPort  当本地节点是中继服务器时，需要通过该参数指定端口来监听传入 VPN 连接，默认端口号是 51820。常规客户端不需要此选项。\nPrivateKey  本地节点的私钥，所有节点（包括中继服务器）都必须设置。不可与其他服务器共用。\n私钥可通过命令 wg genkey  example.key 来生成。\nDNS  通过 DHCP 向客户端宣告 DNS 服务器。客户端将会使用这里指定的 DNS 服务器来处理 VPN 子网中的 DNS 请求，但也可以在系统中覆盖此选项。例如：\n  如果不配置则使用系统默认 DNS\n  可以指定单个 DNS：DNS = 1.1.1.1\n  也可以指定多个 DNS：DNS = 1.1.1.1,8.8.8.8\n  Table  定义 VPN 子网使用的路由表，默认不需要设置。该参数有两个特殊的值需要注意：\n Table = off : 禁止创建路由 Table = auto（默认值） : 将路由添加到系统默认的 table 中，并启用对默认路由的特殊处理。  例如：Table = 1234\nMTU  定义连接到对等节点（peer）的 MTU（Maximum Transmission Unit，最大传输单元），默认不需要设置，一般由系统自动确定。\nPreUp  启动 VPN 接口之前运行的命令。这个选项可以指定多次，按顺序执行。\n例如添加路由：PreUp = ip rule add ipproto tcp dport 22 table 1234\nPostUp  启动 VPN 接口之后运行的命令。这个选项可以指定多次，按顺序执行。\n例如：\n  从文件或某个命令的输出中读取配置值：\nPostUp = wg set %i private-key /etc/wireguard/wg0.key   添加一行日志到文件中：\nPostUp = echo \"$(date +%s) WireGuard Started\"  /var/log/wireguard.log   调用 WebHook：\nPostUp = curl https://events.example.dev/wireguard/started/?key=abcdefg   添加路由：\nPostUp = ip rule add ipproto tcp dport 22 table 1234   添加 iptables 规则，启用数据包转发：\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE   强制 WireGuard 重新解析对端域名的 IP 地址：\nPostUp = resolvectl domain %i \"~.\"; resolvectl dns %i 192.0.2.1; resolvectl dnssec %i yes   PreDown  停止 VPN 接口之前运行的命令。这个选项可以指定多次，按顺序执行。\n例如：\n  添加一行日志到文件中：\nPreDown = echo \"$(date +%s) WireGuard Going Down\"  /var/log/wireguard.log   调用 WebHook：\nPreDown = curl https://events.example.dev/wireguard/stopping/?key=abcdefg   PostDown  停止 VPN 接口之后运行的命令。这个选项可以指定多次，按顺序执行。\n例如：\n  添加一行日志到文件中：\nPostDown = echo \"$(date +%s) WireGuard Going Down\"  /var/log/wireguard.log   调用 WebHook：\nPostDown = curl https://events.example.dev/wireguard/stopping/?key=abcdefg   删除 iptables 规则，关闭数据包转发：\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE   [Peer]\n定义能够为一个或多个地址路由流量的对等节点（peer）的 VPN 设置。对等节点（peer）可以是将流量转发到其他对等节点（peer）的中继服务器，也可以是通过公网或内网直连的客户端。\n中继服务器必须将所有的客户端定义为对等节点（peer），除了中继服务器之外，其他客户端都不能将位于 NAT 后面的节点定义为对等节点（peer），因为路由不可达。对于那些只为自己路由流量的客户端，只需将中继服务器作为对等节点（peer），以及其他需要直接访问的节点。\n举个例子，在下面的配置中，public-server1 作为中继服务器，其他的客户端有的是直连，有的位于 NAT 后面：\n  public-server1（中继服务器）\n[peer] : public-server2, home-server, laptop, phone\n  public-server2（直连客户端）\n[peer] : public-server1\n  home-server（客户端位于 NAT 后面）\n[peer] : public-server1, public-server2\n  laptop（客户端位于 NAT 后面）\n[peer] : public-server1, public-server2\n  phone（客户端位于 NAT 后面）\n[peer] : public-server1, public-server2\n  配置示例：\n  对等节点（peer）是路由可达的客户端，只为自己路由流量\n[Peer] # Name = public-server2.example-vpn.dev Endpoint = public-server2.example-vpn.dev:51820 PublicKey =  AllowedIPs = 192.0.2.2/32   对等节点（peer）是位于 NAT 后面的客户端，只为自己路由流量\n[Peer] # Name = home-server.example-vpn.dev Endpoint = home-server.example-vpn.dev:51820 PublicKey =  AllowedIPs = 192.0.2.3/32   对等节点（peer）是中继服务器，用来将流量转发到其他对等节点（peer）\n[Peer] # Name = public-server1.example-vpn.tld Endpoint = public-server1.example-vpn.tld:51820 PublicKey =  # 路由整个 VPN 子网的流量 AllowedIPs = 192.0.2.1/24 PersistentKeepalive = 25    Endpoint  指定远端对等节点（peer）的公网地址。如果对等节点（peer）位于 NAT 后面或者没有稳定的公网访问地址，就忽略这个字段。通常只需要指定中继服务器的 Endpoint，当然有稳定公网 IP 的节点也可以指定。例如：\n  通过 IP 指定：\nEndpoint = 123.124.125.126:51820   通过域名指定：\nEndpoint = public-server1.example-vpn.tld:51820   AllowedIPs  允许该对等节点（peer）发送过来的 VPN 流量中的源地址范围。同时这个字段也会作为本机路由表中 wg0 绑定的 IP 地址范围。如果对等节点（peer）是常规的客户端，则将其设置为节点本身的单个 IP；如果对等节点（peer）是中继服务器，则将其设置为可路由的子网范围。可以使用 , 来指定多个 IP 或子网范围。该字段也可以指定多次。\n当决定如何对一个数据包进行路由时，系统首先会选择最具体的路由，如果不匹配再选择更宽泛的路由。例如，对于一个发往 192.0.2.3 的数据包，系统首先会寻找地址为 192.0.2.3/32 的对等节点（peer），如果没有再寻找地址为 192.0.2.1/24 的对等节点（peer），以此类推。\n例如：\n  对等节点（peer）是常规客户端，只路由自身的流量：\nAllowedIPs = 192.0.2.3/32   对等节点（peer）是中继服务器，可以将流量转发到其他对等节点（peer）：\nAllowedIPs = 192.0.2.1/24   对等节点（peer）是中继服务器，可以转发所有的流量，包括外网流量和 VPN 流量，可以用来干嘛你懂得：\nAllowedIPs = 0.0.0.0/0,::/0   对等节点（peer）是中继服务器，可以路由其自身和其他对等节点（peer）的流量：\nAllowedIPs = 192.0.2.3/32,192.0.2.4/32   对等节点（peer）是中继服务器，可以路由其自身的流量和它所在的内网的流量：\nAllowedIPs = 192.0.2.3/32,192.168.1.1/24   PublicKey  对等节点（peer）的公钥，所有节点（包括中继服务器）都必须设置。可与其他对等节点（peer）共用同一个公钥。\n公钥可通过命令 wg pubkey example.key.pub 来生成，其中 example.key 是上面生成的私钥。\n例如：PublicKey = somePublicKeyAbcdAbcdAbcdAbcd=\nPersistentKeepalive  如果连接是从一个位于 NAT 后面的对等节点（peer）到一个公网可达的对等节点（peer），那么 NAT 后面的对等节点（peer）必须定期发送一个出站 ping 包来检查连通性，如果 IP 有变化，就会自动更新Endpoint。\n例如：\n 本地节点与对等节点（peer）可直连：该字段不需要指定，因为不需要连接检查。 对等节点（peer）位于 NAT 后面：该字段不需要指定，因为维持连接是客户端（连接的发起方）的责任。 本地节点位于 NAT 后面，对等节点（peer）公网可达：需要指定该字段 PersistentKeepalive = 25，表示每隔 25 秒发送一次 ping 来检查连接。  GUI Utilities Gnome GNOME 系统设置面板（gnome-control-center）和 GNOME 应用使用 dconf 配置系统存储设置。您可以使用 gsettings 或 dconf 命令行工具直接访问 dconf 数据库。这也可以让你修改用户界面不公开的设置。\nGNOME 桌面拥有强大的搜索功能，按 Super 键并搜索一些东西，可以进入“Settings-Search”中来设置可以搜索的内容和顺序。\nDo Not Disturb 使通知只在消息栏中，不会在桌面上弹出。\nGnome 3 自动切换的壁纸会有一个有时钟小图标。\n浏览 GNOME Shell cheat sheet 中解释了如何高效地使用 GNOME shell，它展示了 GNOME shell 的特色和快捷键，包括切换任务，使用键盘，窗口控制，面板，概览模式等等。以下是部分常用的快捷键：\n Super + m：显示消息托盘 Super + a：显示应用程序菜单 Alt- + Tab：切换当前使用的应用 Alt- + ` (美式键盘 Tab 上面的按键)：切换前台应用程序的窗口 Alt + F2，然后输入 r 或 restart：在图形界面出问题时重启界面（仅用于 X/传统 模式，不适用于 Wayland 模式）。也可通过此运行后台应用，如 cfw。  遗留名称 注意： 一些 GNOME 程序在文档和对话框中的名称已经更改，但执行文件名称却没有。下面表格列出了一些这样的应用程序。\n提示： 在搜索栏中搜索应用的遗留名称将成功找到对应的应用，例如搜索 nautilus 将返还 文件。\n   当前 遗留     文件 Nautilus   Web Epiphany   视频 Totem   主菜单 Alacarte   文档查看器 Evince   磁盘使用情况分析器 Baobab   图像查看器 EoG (Eye of GNOME)   密码和密钥 Seahorse    修改文件默认关联的应用程序   mime类型文件存在于以下的两个路径：\n /usr/share/mime ~/.local/share/mime  例如：/usr/share/mime/text/makrdown.xml\n  应用程序的desktop文件，存在于以下的两个路径：\n /usr/share/applications ~/.local/share/applications  例如 typora.desktop 文件：\n[Desktop Entry] # 应用名称，即开始菜单中的名称 Type=ApplicationName=name # 应用执行文件位置 Exec=appPath # 应用图标位置 Icon=typora # 是否显示终端 Terminal=false # 所属分类 StartupNotify=trueCategories=Office # MIME 类型 MimeType=text/x-markdown  应用图标默认位置为 ~/.local/share/icons，一个直接放入，如 ~/.local/share/icons/typora.png，一个根据分辨率放入，如 ~/.local/share/icons/hicolor/256x256/typora.png    应用程序默认关联文件，存在于以下的两个路径：\n /usr/share/applications/mimeapps.list ~/.local/share/applications/mimeapps.list    Gedi 编码 直接打开gedit（非通过文件打开），点击左上角 Open，点击左下角 Automatically Detected，下拉选择 Add or Remove…，将简体中文编码都选上。\n或者：\n$ gsettings list-keys org.gnome.gedit.preferences.encodings candidate-encodings $ gsettings set org.gnome.gedit.preferences.encodings candidate-encodings \"['UTF-8', 'ISO-8859-15', 'UTF-16', 'GBK', 'GB18030', 'GB2312']\" 配置 在 Perferences = Editor = Tap Stops，把 Tab width 设置为 2，勾选 Insert spaces instead of tabs。\nNVIDIA Optimus NVIDIA Optimus 是一项允许英特尔（Intel）集成图形处理器（GPU）和英伟达（NVIDIA）独立图形处理器置入并通过一台笔记本电脑访问的技术。\n桌面卡死 总的来说，就是杀死相关进程，或者避免使用造成卡死相关软件。\n  选择其他 tty：\n$ pkill Xorg pkill 用于杀死一个进程，与 kill 不同的是它会杀死指定名字的所有进程。kill 命令杀死指定进程 PID，需要配合 ps 使用。\n  安全重启：同时按住 Ctrl 和 Alt 键，按住不要放，按一下 SysRq 键（有的键盘是PrtSc），按一下 R 键，按一下 E 键，依次按下 I , S , U , B 键。\n  解决 Ubuntu 经常卡死：ubuntu 的卡死可能与显卡驱动不兼容有关。用 nvidia 代替 nouveau显卡驱动。其中 nvidia-driver-470-server 是 server 版，最好用 nvidia-driver-470\n  PRIME synchronization You can enable PRIME synchronization to prevent screen tearing. It requires:\n Linux kernel 4.5 or higher; X server 1.19 or higher; NVIDIA driver 370.23 or higher.  PRIME synchronization will be enabled automatically after you enable KMS for nvidia-drm module.\n  Add this line to the end of /etc/modprobe.d/nvidia.conf:\noptions nvidia-drm modeset=1   Regenerate your initramfs image by running:\n# update-initramfs -u   Reboot.\n  要检查重新启动后以前的更改是否有效，请运行命令：\n$ sudo cat /sys/module/nvidia_drm/parameters/modeset Y see more about nvidia on uat BinaryDriverHowto/Nvidia\nPermanently Set NVIDIA PowerMizer Settings $ nvidia-settings -q GpuPowerMizerMode Attribute 'GPUPowerMizerMode' (rastating-PC:1[gpu:0]): 0. Valid values for 'GPUPowerMizerMode' are: 0, 1 and 2. 'GPUPowerMizerMode' can use the following target types: GPU. $ nvidia-settings -a \"[gpu:0]/GpuPowerMizerMode=1\" Attribute 'GPUPowerMizerMode' (rastating-PC:1[gpu:0]) assigned value 1. $ nvidia-settings -q GpuPowerMizerMode Attribute 'GPUPowerMizerMode' (rastating-PC:1[gpu:0]): 1. Valid values for 'GPUPowerMizerMode' are: 0, 1 and 2. 'GPUPowerMizerMode' can use the following target types: GPU. 添加到开机启动\n Name：NVIDIA X Server Performance Settings Command：/usr/bin/nvidia-settings -a \"[gpu:0]/GpuPowerMizerMode=1\"  密钥环 如果你用过 Ubuntu 或者其他的 Linux 发行版里的自动登录功能, 你可能遇到过这种弹出消息：\n 请输入密码以解锁你的登录密钥环\n登录密钥环在你登录系统时未解锁。\n 如果你一直点击取消，它会不断弹出几次才会消失。你可能想知道，为什么你会一直看到这个密钥环信息呢？\n让我来告诉你吧。它其实不是错误，而是一个安全特性。\n奇怪吗？下面就让我来解释下 Linux 里的密钥环概念。\n密钥环是什么，为什么需要它？ 在现实生活中你为什么要用钥匙环（也叫钥匙链）？你用它把一把或多把钥匙串到一起, 以便于携带和查找。\nLinux 里也是类似的。密钥环特性使你的系统可以将各种密码放在一起，并将其保存在一个地方。\n大多数 Linux 桌面环境，如 GNOME、KDE、Xfce 等采用 GNOME 密钥环来提供这个功能。\n该密钥环保存了 ssh 密钥、GPG 密钥以及使用此功能的应用程序（例如 Chromium 浏览器）的密钥。默认情况下，“密钥环”通过主密码来保护，该密码通常是帐户的登录密码。\n系统上的每个用户都有自己的密钥环，（通常）密码与用户帐户本身的密码相同。当你使用密码登录系统时，你的密匙环将使用你帐户的密码自动解锁。\n当你启用 Ubuntu 中的自动登录功能时时，就有问题了。这意味着你无需输入密码即可登录系统。在这种情况下，你的密钥环不会自动解锁。\n密钥环是一个安全特性\n记得我说过密钥环是一个安全特性吗？现在想象一下你在 Linux 电脑上开启了自动登录功能。有权访问你电脑的任何人无需密码就能进入你的系统。但是你可能不会在意，因为你只是用它来访问互联网。\n但是，如果你在 Ubuntu 中使用 Chromium 或 Google Chrome 之类的浏览器，并使用它来保存各种网站的登录密码，那么你将遇到麻烦。任何人都可以使用浏览器并利用你在浏览器中保存的密码登录网站。这不很危险吗？\n这就是为什么当你使用 Chrome 时，它将反复地提示你先解锁密钥环。这确保了只有知道密钥环密码（即账户密码）的人才能使用在浏览器中保存的密码来登录它们相关的网站。\n如果你反复取消解锁密钥环的提示，它最终将消失，并允许你使用浏览器。但是，保存的密码将不会被解锁，你在 Chromium/Chome 浏览器上将会看到“同步暂停”的提示。\n如果密钥环一直存在，为什么你从来没有见过它呢?\n如果你在你的 Linux 系统上从没见过它的话，这个问题就很有道理。\n如果你从没有用过自动登录功能（或者修改你的账户密码），你可能都没有意识到这个特性的存在。\n这是因为当你通过你的密码登录系统时，你的密钥环被你的账户密码自动解锁了。\nUbuntu（和其他发行版）在执行普通的管理任务如修改用户、安装新软件等需要输入密码，无论你是否是自动登录的。但是对于日常任务像使用浏览器，它不需要输入密码因为密钥环已经被解锁了。\n当你切换到自动登录时，你不再需要输入登录密码。这意味着密钥环没有被自动解锁，因此当你使用利用了密钥环特性的浏览器时，它将提示你来解锁密钥环。\n你可以轻松地管理密钥环和密码\n这个密钥环放在哪里？它的核心是一个守护任务（一个后台自动运行的程序）。\n别担心。你不必通过终端来操作守护任务。大多数桌面环境都自带一个可以和这个守护进程进行交互的图形化应用程序。KDE 上有 KDE 钱包，GNOME 和其他桌面上叫做“密码和密钥”（Password And Keys）。\n你可以用这个 GUI 程序来查看哪些应用程序在用密钥环来管理/保护密码。\n你可以看到，我的系统有自动创建的登录密钥环。也有一个存储 GPG 和 SSH 密钥的密钥环。那个证书用来保存证书机构颁发的证书（如 HTTPS 证书）。\n你也可以使用这个应用程序来手动保存网站的密码。\n这里有一个潜在的问题，如果你格式化你的系统，手动保存的密码必然会丢失。通常，你会备份你的个人文件，但并不是所有的用户特定数据，如密钥环文件。\n有一种办法能解决它。密钥环数据通常保存在 ~/.local/share/keyrings 目录。在这里你可以看到所有的密钥环，但是你不能直接看到它们的内容。如果你移除密钥环的密码（我会在这篇文章的后面描述操作步骤），你可以像一个普通的文本文件一样读取密钥环的内容。你可以将这个解锁后的密钥环文件完整地复制下来，并在其他的 Linux 机器上运行“密码和密钥”应用程序导入到其中。\n总结一下目前为止所学的内容：\n 大多数 Linux 系统缺省已经安装并激活了密钥环特性 系统上的每个用户都拥有他自己的密钥环 密钥环通常是用账户密码锁定的（保护） 当你通过密码登录时密钥环会被自动解锁 对于自动登录，密钥环不会自动解锁，因此当你试图使用依赖密钥环的应用程序时会被提示先解锁它 并不是所有的浏览器或应用程序利用了密钥环特性 （Linux 上）安装一个 GUI 程序可以和密钥环交互 你可以用密钥环来手动存储加密格式的密码 你可以自己修改密钥环密码 你可以通过导出（需要先解锁密钥环）并导入到其他计算机上的方式来获取手工保存的密码。  修改密钥环密码 假设你修改了你的账户密码。当你登录时，你的系统试图通过新的登录密码来自动解锁密钥环。但是密钥环还在使用老的登录密码。\n这种情况下，你可以修改密钥环密码为新的登录密码，这样密码环才能在你登录系统时自动解锁。\n 从菜单中打开“密码和密钥”应用程序 在“Login”密钥环上右击并点击“修改密码”：  如果你不记得老的登录密码怎么办？\n你可能知道在 Ubuntu 上重置忘记的密码很容易。但是密钥环在这种场景下还是有问题。你修改了账户密码，但是你不记得仍然被密钥环使用的老的账户密码。\n你不能修改它因为你不知道老的密码。怎么办？\n这种情况下，你将不得不移除整个密钥环。你可以通过“密码和密钥”应用程序来操作。\n另外，你也可以手动删除 ~/.local/share/keyrings 目录下的密钥环文件。\n老的密钥环文件被移除后，你再打开 Chrome/Chromium 时，它会提示你创建一个新的密钥环。\n你可以用新的登录密码，密钥环就会被自动解锁了。\n禁用密钥环密码 在你想用自动登录但又不想手动解锁密钥环时，你可以把禁用密钥环密码作为一个规避方法。记住你正在禁用一个安全特性，因此请三思。\n操作步骤和修改密钥环相似。打开“密码和密钥”应用程序，然后修改密钥环密码。\n技巧在于当它提示修改密码时，不要输入新密码，而是点击“继续”按钮。这将移除密钥环的密码。\n这种方法，密钥环没有密码保护，并将一直处于解锁状态。\nGnome Tweaks GNOME 桌面有称为“扩展”的小插件或附加组件，学会使用 GNOME 扩展来扩展系统的可用性。\n$ sudo apt install gnome-tweaks gnome-shell-extensions chrome-gnome-shell -y  gnome-shell-extensions：可以禁用桌面图标、Ubuntu Dock。 chrome-gnome-shell：GNOME Shell integration for Chrome，可从浏览器安装 GNOME Shell extensions。  如 OpenWeather，需设置 Location，Units 为公制单位，Layout为Right\ntheme design: Skeuomorphism vs Flat Design vs Material Design\n 主题目录： /usr/share/themes 或 ~/.themes 图标鼠标目录： /usr/share/icons 或 ~/.icons 壁纸： /usr/share/background , /usr/share/wallpapers  Ubuntu Dock Ubuntu Dock 就是 Dash to Dock。安装：\n$ sudo apt-get install gnome-shell-extension-dashtodock 重启，在 Extension 中设置 Dash to Dock，Dash to Dock 与 Ubuntu Dock 只能开启一个，否则有两个 Dock，但是就算关闭 Dash to Dock，Dash to Dock 设置依旧起作用到 Ubuntu Dock。\n重新登录。\nGSConnect Files and links. Shared between devices.\nFirewall Blocking Port\n使用 ufw：\n$ sudo ufw allow proto tcp from 192.168.0.0/24 to any port 1714:1764 $ sudo ufw allow proto udp from 192.168.0.0/24 to any port 1714:1764 $ sudo ufw reload 有时候正确设置了防火墙，还是会发送文件失败，可以考虑重启应用。\nmounting does not work\n$ sftp -P 1740 kdeconnect@192.168.0.105 Unable to negotiate with 192.168.88.245 port 1740: no matching host key type found. Their offer: ssh-rsa Connection closed. Connection closed $ vim ~/.ssh/config Host 192.168.0.* HostkeyAlgorithms +ssh-rsa PubkeyAcceptedAlgorithms +ssh-rsa $ ssh kdeconnect@192.168.0.105 -p 1740 After that the mounting works again.\nGSConnect cannot send multiple files at once\nGSConnect cannot send multiple files at once. If I try sending multiple files to my phone, only one file is received by my phone.\nGSConnect shows “Transfer Successful” notification only for the first file, and “Transferring File” notifications for the other files remain.\nFiles Integration\n$ sudo apt install python3-nautilus gir1.2-nautilus-3.0 $ nautilus -q \u0026\u0026 nautilus KDE Connect\n$ sudo apt install kdeconnect nautilus-kdeconnect NetSpeed Displays Internet Speed\nClipboard Indicator Clipboard Manager extension for Gnome-Shell - Adds a clipboard indicator to the top panel, and caches clipboard history.\nCoverflow Alt-Tab Replacement of Alt-Tab, iterates through windows in a cover-flow manner.\nBluetooth Quick Connect Allow to connect to paired devices from gnome control panel.\nDesktop Icons NG (DING) with these advantages:\n Drag’n’Drop, both inside the desktop, between desktop and applications, and nautilus windows Allows to use “Open with…” option with several files When hovering or clicking on an icon with a name too large to fit, it shows the full name Doesn’t hang the compositor when there is too much activity in the desktop folder  Frippery Move Clock Move clock to left of status menu button\nInput Method Panel Input Method Panel using KDE’s kimpanel protocol for Gnome-Shell\nLock Keys Numlock \u0026 Capslock status on the panel\nOpenWeather Weather extension to display weather information from https://openweathermap.org/ or https://darksky.net for almost all locations in the world.\nPanel Date Format Allows to customize the date format on the panel.\nRefresh Wifi Connections This extension adds a refresh button to the Wi-Fi connection selection dialog to manually request for a network scan.\nScreenshot Tool Conveniently create, copy, store and upload screenshots. Please log out and log in again after updating.\nSound Input \u0026 Output Device ChooserLivepatch Shows a list of sound output and input devices (similar to gnome sound settings) in the status menu below the volume slider.\nStatus Area Horizontal Spacing Reduce the horizontal spacing between icons in the top-right status area\nUnite Unite is a GNOME Shell extension which makes a few layout tweaks to the top panel and removes window decorations to make it look like Ubuntu Unity Shell.\nUser Themes Load shell themes from user directory.\nVitals A glimpse into your computer’s temperature, voltage, fan speed, memory usage, processor load, system resources, network speed and storage stats. This is a one stop shop to monitor all of your vital sensors. Uses asynchronous polling to provide a smooth user experience.\nRemovable Drive Menu A status menu for accessing and unmounting removable devices.\nPlaces Status Indicator Add a menu for quickly navigating places in the system. This extension is part of Classic Mode and is officially supported by GNOME. Please do not report bugs using the form below, use GNOME’s GitLab instance instead.\nRecent Items gTile Tile windows on a grid.\nTop Panel Workspace Scroll Change workspaces by scrolling over the top panel\nWorkspace Indicator Put an indicator on the panel signaling in which workspace you are, and give you the possibility of switching to another one.\nAuto Move Windows Move applications to specific workspaces when they create windows.\nApplications Menu Add a category-based menu for applications. This extension is part of Classic Mode and is officially supported by GNOME. Please do not report bugs using the form below, use GNOME’s GitLab instance instead.\nFly-Pie A marking menu which can be used to launch applications, simulate hotkeys, open URLs and much more.\nAppIndicator and KStatusNotifierItem Support Adds AppIndicator, KStatusNotifierItem and legacy Tray icons support to the Shell\nPapirus Icon Theme $ sudo add-apt-repository ppa:papirus/papirus $ sudo apt-get update $ sudo apt-get install papirus-icon-theme Materia Theme $ sudo apt install materia-gtk-theme Time ++ A todo.txt manager, time tracker, timer, stopwatch, pomodoro, and alarm clock\n番茄钟\nNautilus Files 是 GNOME 桌面环境的默认文件管理器。文件试图提供一种简化的方法来管理文件和应用程序。Files 在 3.6 版之前被称为 Nautilus。该应用程序被赋予了新的描述性名称，每种受支持的语言都有一个名称。 Nautilus 这个名称仍然在许多地方使用，例如可执行文件名称，某些程序包名称，某些桌面条目和某些 GSettings 模式。\n快捷键 有时候鼠标操作效率低，比如新建标签页（汉堡菜单  新建标签页），我们要移动两次光标点两下，如果使用快捷键 Ctrl+T，一次就能迅速完成操作。所以，使用快捷键能提高效率。另一个让你多使用键盘快捷键的理由可能是，预防鼠标手。如果您经常使用某个软件，那么有必要学习它的快捷键，如果偶尔使用就没必要浪费时间。\nCtrl+F1，查看 Files 快捷键。建议您参考列表多加练习。一些常用快捷键：\n   快捷键 功能     Ctrl T New tab   Ctrl N New window   Ctrl W Close window or tab       Ctrl F Search   ~ Location bar with home location   / Location bar with root location   Ctrl L Enter location       Backspace Go Back to a Previous Folder   Ctrl + Zoom in   Ctrl - Zoom out   Ctrl 0 Reset zoom   Ctrl H Show/hide hidden files       F2 Rename   Delete Move to trash   Shift Delete Delete permanently   Ctrl C Copy   Ctrl V Paste   Ctrl X Cut   Ctrl Z Undo   Shift Ctrl Z Redo       Ctrl A Select all   Shift Ctrl I Invert selection       Ctrl Q Quit    从右键菜单创建新文档 只需要将模板文件放到用户根目录下的 Templates / 模板 文件夹里面。比如：\ntouch ~/Templates/sh.sh touch ~/Templates/python.py touch ~/Templates/Markdown.md 当你右键时，就可以直接以该模板新建文件。\nTemplates 目录可以在 ~/.config/user-dirs.dirs 中配置。默认为：\nXDG_TEMPLATES_DIR=\"$HOME/Templates\" 你可以设置为其他目录。比如我的为：\nXDG_TEMPLATES_DIR=\"/DATA/Templates\" /DATA 不在系统分区，是一个单独的分区，我专门用来存放个人数据。\n直接搜索匹配 常用的目录可以添加为书签，但访问其他目录时，我们经常是按路径逐个点击文件夹。对于文件夹路径较深或者周围有其他文件夹干扰的情况，操作起来其实非常低效。不知你是否意识到、思考过。\n人们习惯鼠标操作后，往往不会再去思考如何提升效率，一直呆在舒适区域：这个我已经会用了。但是，有一些你不知道的技巧能够提高办事效率。\n实际上，只要你身处 Files 中，直接输入英文字符即可搜索匹配。Files 像浏览器一样合并了搜索栏和地址栏，你可以直接输入 关键词 或者 路径 。但是，中文关键词需要在搜索栏（Ctrl+F）中输入。\n一个实例：打开 GNOME 桌面系统图标所在文件夹 /usr/share/icons。\n方法一：鼠标点击 / usr share 直接输入 icons 然后 Enter 打开。\n 这是目标文件夹周围有其他文件夹干扰的情况。\n 方法二：Files 中直接输入 /usr/share/icons（操作时可利用 Tab 自动补全）。\n 这是路径较深的情况。\n BackSlide Automatic background-image (wallpaper) slideshow for Gnome Shell\nRemove Alt+Tab Delay v2 Another extension that removes the 0.15 second popup delay in switcher pop-ups. This extension is actively maintained.\nEasyScreenCast This extension simplifies the use of the video recording function integrated in gnome shell, allows quickly to change the various settings of the desktop recording.\nHide Top Bar Hides the top bar, except in overview. However, there is an option to show the panel whenever the mouse pointer approaches the edge of the screen. And if “intellihide” is enabled, the panel only hides when a window takes the space.\nBattery Time Show the remaining time until fully charged/discharged instead of the battery charge in percent in the panel.\nCaffeine Disable the screensaver and auto suspend\nTodo.txt A Gnome shell interface for todo.txt.\nInternet Radio Listen to an Internet Radio Stream\nibus font setting use ibus font setting of ibus setup dialog to enhance the user experience\nLunar Calendar 农历 $ sudo apt install gir1.2-lunar-date-2.0 $ sudo cp /usr/share/locale/zh_CN/LC_MESSAGES/lunar-date.mo /usr/share/locale/en/LC_MESSAGES/ Chrome Import Passwords\n Launch Chrome on your computer. Type the following in the address bar and pressEnter: chrome://flags On the flags screen, put your cursor in the search box and type Password import. You should see the Password import flag in the search results. To enable this flag, click the dropdown menu next to the flag and select Enabled. Click Relaunch at the bottom to relaunch Chrome. This will restore all of your open tabs. When Chrome opens, click the three dots in the top-right corner, and select Settings  Passwords on the following screen. Click the three dots next to Saved Passwords and select Import. Navigate to your CSV passwords file and select it to import it into Chrome.  用户脚本管理器 桌面端\n Chrome：Tampermonkey 或 Violentmonkey Firefox：Greasemonkey、Tampermonkey 或 Violentmonkey Safari：Tampermonkey 或 Userscripts Microsoft Edge：Tampermonkey Opera：Tampermonkey 或 Violentmonkey Maxthon：Violentmonkey AdGuard：（不需要其他软件）  脚本\n FastGithub 镜像加速访问、克隆和下载 秒传链接提取：用于提取和生成百度网盘秒传链接 知乎增强：移除登录弹窗 网页复制限制解除 解锁视频  Download All Images 下载网页所有图片\nuBlock Origin 禁广告\n沙拉查词 聚合词典专业划词翻译\nInfinity New Tab Chrome Extension，解决 Chrome new tab 加载后会清空搜索栏问题\nQuestions The repository ‘http://dl.google.com/linux/chrome/deb stable Release’ does not have a Release file\nThe “key” is “repository can’t be authenticated”\nIMHO… you don’t have the key of the repo\nTo solve that just use this command:\n$ wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add - Chromium Chromium 是一款来自 “The Chromium Project” 的开源图形网络浏览器，基于 Blink 渲染引擎。它也是商业软件 Google Chrome 浏览器得以组成的基础。\n在这里你可以看到 Google Chrome 与 Chromium 浏览器的区别。此外，还有一点重要的不同：2021年3月2日发布的 Chromium 89 及其以后版本不再支持 Google 账户同步功能。\n注意： 目前，可以通过 使用 Chrome 的OAuth2 凭证或者 申请一个属于自己的凭证来恢复同步功能, 但是请注意，这不一定是一个长期的解决方案。长期来讲，最好考虑使用 xbrowsersync 来同步书签数据。\nFirefox 设置\n Sign In = Sync Settings = Proxy = no proxy Settings = Search = Bing Settings = Home = Firefox Home Add-ons = Dark Reader  媒体解码器\n主要用于 Firefox，安装媒体解码器来播放 MP3、MPEG4 和其他格式媒体文件。由于各个国家的版权问题， Ubuntu 在默认情况下不会安装它。\n$ sudo apt-get install ubuntu-restricted-extras 这种方式会安装 .exe 程序，不如直接安装\n$ sudo apt-get install h264enc DeepL Translate DeepL翻译（英语：DeepL Translator）是2017年8月由总部位于德国科隆的DeepL GmbH（一家由Linguee支持的创业公司）推出的免费神经机器翻译服务[2][3][4]。评论家对于它的评价普遍正面，认为它的翻译比起Google翻译更为准确自然[5][6]。\nUser Data Directory  [user data dir] ~/.config/google-chrome [profile dir] ~/.config/google-chrome/Default [user cache dir] ~/.cache/google-chrome/Default  Dark Mode 注意：以下设置部分在 Android 端依然有效。\n设置：\n Appearance = Use GTK：在系统启用 Dark 模式下，会使窗口，标签页等浏览器上部分变黑暗 启用 chrome://flags/#enable-force-dark：会使设置页，网页黑暗；在Google 搜索页面，设置 = 外观 = 深色主题，可以使搜索结果词条访问过的与没有访问过的相区别（如果没有设置就会呈现一个颜色而无法区分）。有些网页也无效，并且完全看不清文字了，解决办法是启用 Enable with increased text contrast，例如依云的博客。  其他：\n Dark reader 插件：会使网页黑暗。有些页面不起作用，比如 chrome web store、chrome 的设置页、插件、一些网站（即使该网站有黑暗模式，并且跟随系统，依旧显示为 light 模式）。除了无效的，不会使网页变得更难看。 开发工具的暗黑设置：按F12 = 按F1 ，设置主题为 Dark。  断点续传 含义：\nPause it with the option built-in to Chrome, and hibernate the computer. If the SERVER that is providing the download supports resuming downloads, then after you resume from hibernation, you should have no issues resuming the download.\nAfter you pause the download, there is no need to touch Chrome. Just pause, and hibernate. By that I mean, don’t close Chrome. Don’t kill it or edit anything. Just pause the download, leave Chrome up and running, and hibernate.\n明确需求：我要的不是“断点续传”（即 Pause \u0026 Resume），而是类似aria2 的“始终断点续传”，前面一种在下载失败后会重新开始下载，而后面一种从失败的地方继续下载。\n方案如下：\n 旧版chrome://flags/#enable-download-resumption，新版内置 Chrono Download Manager 扩展 支持断点续传的下载器，如 wge -c link  Live Caption Chrome 浏览器内置了实时字幕功能，同步将语音转成文字，显示在网页上，对于看英文视频、听英文播客很有用。\nGoldenDict 人一生离不开词典。无论是生活、学习还是工作，当我们遇到不懂的词语时，大部分人的解决方法是使用搜索引擎或者查词软件。作为学习者，我认为查词软件更好用，而且一本或几本好词典能让我们学习事半功倍。而免费查词软件我推荐 GoldenDict。\nGoldenDict 的优点：\n 免费 纯净无广告 == 专注 跨平台：Windows / Mac / Linux 支持多种词典格式 支持查维基百科 / 支持在线查词 / 支持在线翻译（需配置） 支持屏幕取词 == 划词释义 支持听取 forvo.com 上的发音 详见 GoldenDict 官网 的权威说明。  GoldenDict 的缺点：\n 无 OCR 屏幕取词 / 无截屏翻译 无单词本。  知道 GoldenDict 的优缺点后，充分利用其优点的同时，我们想办法补齐短板。\nGoldenDict 擅长查词，不擅长文本翻译，可是查词和文本翻译是分不开的，都是我们学习第二语言时经常需要的功能。为此，我引入两个文本翻译程序：CopyTranslator / Saladict。\n无论你用什么电脑操作系统，都能利用它们进行高效率的查词和文本翻译。我认为这对用户很重要。只要我在系统里，我就能随时查词和文本翻译。\n GoldenDict 擅长查词：\n意味着你可以管理多个词典，并利用好的词典对单词进行深度学习。你把 GoldenDict 想成一个书架，上面放了多本纸质词典供你查阅。\nCopyTranslator / Saladict 擅长文本翻译：\n意味着能极大提高你在文本翻译时的效率。比如拥有多个翻译引擎（Google，Baidu，Youdao 等），方便复制翻译结果等。当然，职业译者肯定使用专业的 CAT 软件。\n 好，下面开始学习使用 GoldenDict。\n安装  **Windows：**下载安装最新版，当前为 [GoldenDict-1.5.0-RC2-372-*.exe（2019-04-27）](https://sourceforge.net/projects/goldendict/files/early access builds/)。 **macOS：**下载安装最新版，当前为 [GoldenDict-1.5.0-RC2-372-*.dmg（2019-04-27）](https://sourceforge.net/projects/goldendict/files/early access builds/MacOS/)。 Linux ：终端上执行安装命令  # Ubuntu / Debian sudo apt install goldendict -y 下面我在 Linux 上做演示操作。（Windows / macOS 大同小异）\n打开 GoldenDict 如果你一直用鼠标点击软件图标打开软件，我强烈建议你用更高效的方式——搜索打开应用。按 Super（Win） 键搜索 gold 再按 Enter 键打开程序：\n第一次使用，建议阅读两遍 欢迎说明。\n 为什么搜索打开应用更高效？这就考验你有没有「搜商」了。搜索只依赖键盘，不依赖鼠标，所以能盲开应用。\n 修改语言 菜单栏选择**【编辑】【首选项】**：根据需要修改界面语言和显示风格。\n管理词典 下载词典 我选了 4 部体积小的词典进行快速演练：\n词典来源：星际译王词库 词典下载\n Oxford Advanced Learner’s Dictionary oxford-gb dictionary (en - zh_CN) 牛津现代英汉双解词典 朗道汉英字典 新华字典  存放词典 根据个人情况选择存放位置。我这里放在 /DATA/Software/GoldenDict/dic/ 下。\n导入词典 菜单栏选择**【编辑】【词典】【词典来源】【文件】 添加** 选择上一步的词典位置打开，点击 重新扫描 完成后 Apply 应用，切换到**【群组】**选项卡接着完成下一步词典分组。\n词典分组 刚才下载了「四类」词典：英汉、英英、汉英、汉语，需要将它们按类分组。（这里的英汉包括英汉词典和英汉双解词典，同样，汉英包括汉英词典和汉英双解词典。）\n选择**【群组】 添加群组**，然后在左边 可用词典 中选中，点击中间  添加到分组，最后 OK 确认：\n 英汉（En - 中）（自定义快捷键：Ctrl-1）：牛津现代英汉双解词典 英英（En - En）（自定义快捷键：Ctrl-2）：Oxford Advanced Learner’s Dictionary 汉英（中 - En）（自定义快捷键：Ctrl-3）：朗道汉英字典 汉语（Chinese）（自定义快捷键：Ctrl-4）：新华字典\n  为什么需要分组？当词典很多时，提高检索速度和分类检索。所以，你也可以按使用频率进行分组，比如分一个 最常用 群组。你喜欢就好。\n 使用 复制查词 最笨最原始的方式，就是复制词语再跑到 GoldenDict 窗口粘贴查询。怎么样才叫不笨呢？\n菜单栏选择**【编辑】【首选项】【热键】**可以看到。\n热键 Ctrl+C+C 的意思是，选中需要翻译的词句，按住 Ctrl 再按两下 C 键 ，就能呼唤 GoldenDict 帮你翻译。\n所以正确的查词姿势是：选中词句，Ctrl+C+C。\n下面我列了两个场景现场操练一下（需要完成前面的步骤）：\n 英文场景： 此时你正趴在屏幕前哭逼地学习英文。\nQ：What do I need to plant a flower? A：I need fresh soil and a trowel to dig a hole.\n 我们可以猜出 Trowel 的意思，现在假设你不知道，赶紧选中 Trowel，Ctrl+C+C，在 牛津现代英汉双解词典 里查到是小铲子的意思。\n 中文场景： 此时你正趴在屏幕前读苏轼的《赤壁赋》。\n客有吹洞箫者，倚歌而和之。 其声呜呜然，如怨如慕，如泣如诉；余音袅袅，不绝如缕。 舞幽壑之潜蛟，泣孤舟之嫠妇。\n 假设你不知道 嫠 字怎么读，这时候赶紧选中 嫠，Ctrl+C+C，马上就查出来了读嫠（lí）专指寡妇。\n取词窗口 上有一些按钮，鼠标悬停在上面会弹出解释，常用的是导航栏中的 查询框 、**将词条发送到主窗口（alt-W）**以及 添加收藏（ctrl-E）。 默认在 全部 群组中查询，可以切换到特定群组进行查询。不要怕，不要懒，多点点看看，就能用好这款神器了。\n手动查词：模糊匹配 在查询框中，利用通配符进行词目（headwords）的模糊匹配，可以查询一个记忆模糊的单词。\n通配符：？ （匹配任意一个字符），*（匹配任意字符数字）。\n比如，我要查一下 philosophy 的用法，但是忘记了拼写，我可以搜 ph*phy。使用方法非常简单，不做过多介绍。\n如果实在想不起来英文单词，就查查汉英词典。\n前面四部词典是为了快速演练。下面我将使用我喜欢的词典进行展示，这些词典内容丰富（体积很大），会有更好的展示效果。这些词典在下文 英语词典推荐 部分有介绍。\n调整界面 我们要记住快捷键 Ctrl+M，显示 / 隐藏菜单栏（Menu）。程序窗口中 7 个面板都可以被隐藏，从上到下，从左到右依次为：\n 菜单栏 查询面板 导航栏 词典栏 查询结果导航面板 收藏面板 历史面板  在面板标题上右键，可以选择是否显示该面板。还可以左键拖拽面板调整其位置。我喜欢隐藏菜单栏显示查询面板：\n按住 Ctrl 后滑动鼠标滚轮，可以缩放显示界面。也可以使用导航栏上的放大镜按钮调节。\n我的这部词典有发音，所以可以点击喇叭图标听发音。如果点击喇叭图标没有声音，菜单栏选择**【编辑】【首选项】【音频】 播放  设置播放器**，我这里使用了内部播放器： Qt Multimedia 。当然也可以使用外部播放器：mplayer 。(前提是安装了 mplayer ：sudo apt -y install mplayer)\n排序词典 查找单词时，会按照词典栏的词典顺序进行检索，现在我想把 The little dict 放到第一的位置：菜单栏选择**【编辑】【词典】【词典】**，把 The little dict 拖到第一位。\n这里调整的是默认群组 全部 中的词典顺序，要调整自定义群组的词典顺序，切换到【群组】选项卡，拖拽群组中的条目进行排序。\n屏幕取词 / 划词释义 Ctrl+C+C 是大多数时候的正常查词姿势，不过在特定场景下，比如阅读生词较多的英文文章、英文书籍时， 打开屏幕取词会使效率提升。点击导航栏中魔法棒图标开启屏幕取词，或者右键托盘图标勾选「屏幕取词」。Windows 上是真的屏幕取词，即鼠标悬停取词；而 Linux 上为划词释义，需要手动选择。\n按 F4 打开【首选项】，在屏幕取词选项卡可以对「屏幕取词」进行设置。除非 Ctrl-C-C 快捷键冲突，否则，保持默认就行。\n LCinux 上，如果你觉得经常按 Ctrl+C+C 麻烦，更喜欢用C鼠标控制取词，你可以勾选「单词被选中时显示扫描旗标」，通过点击旗标进行查词。（Windows 版本没有此选项）\n 一起看看 GoldenDict 与浏览器翻译扩展程序之间的差别：\n 统一入口，使用同一个程序 / 使用自己喜欢的词典来学习； 利用英汉词典快速查看释义，同时可利用其他词典深入学习，边学边用学习效率高（前提是时间允许）； 有些人说扩展更快速，我没感觉出来； 可以跨浏览器、跨软件使用； 离线使用，你可以愉快地看电脑上的英文（DOC、PPT、TXT、PDF、EPUB、HTML 等任何电子文档格式）；  查词：在线词典 本地词典可以灵活选择适合自己的词典，非常惬意！但是本地词库收词有限，如果你遇到一个没有收录的单词，怎么办？\n只能查在线词典了！\n为 GoldenDict 添加在线词典非常简单。\n菜单栏选择**【编辑】【词典】【词典来源】【网站】 添加  启用** ：\n# 欧路 https://dict.eudic.net/dicts/en/%GDWORD% # 有道词典 / 翻译 http://dict.youdao.com/search?q=%GDWORD%\u0026ue=utf8 # Collins Online Dictionary https://www.collinsdictionary.com/dictionary/english/%GDWORD% 切换到【群组】选项卡，添加到名为 Online Dictionary 的群组（自定义快捷键：Ctrl-5）。\n其他在线词典，可通过浏览器访问使用：\n 牛津在线词典 朗文在线词典 剑桥在线词典 韦氏在线词典 Vocabulary.com Dictionary.com 沪江小D在线词典 漢典  查词：维基百科 维基百科绝对是个好东西！\n由于国内无法访问到 English Wikipedia，所以这里取消显示。（除非你在【首选项】【网络】中通过代理访问）\n菜单栏选择**【编辑】【词典】【词典来源】【维基百科】**，取消勾选。\n查词：搜索引擎 是的，聪明的你一定会想，我可以直接添加搜索引擎吗？可以的。下面是谷歌 / 搜狗 / 百度 / 必应的搜索串：\n# Bing 中国： http://cn.bing.com/search?q=%GDWORD% # Bing 美国： http://www.bing.com/search?q=%GDWORD% # 搜狗 http://www.sogou.com/web?query=%GDWORD% # 百度搜索 http://www.baidu.com/s?wd=%GDWORD% # Google https://google.com/search?q=%GDWORD% 菜单栏选择**【编辑】【词典】【词典来源】【网站】 添加  启用**。切换到【群组】选项卡，将其添加到 Online Dictionary 群组。\n这里我添加必应搜索并查询 蜗牛，然后双击结果 snails 进行英文搜索，可查看搜索引擎里的图片，帮助我们理解记忆单词。因为词典里面配图一般比较少，搜索引擎将使你获得更多相关信息，辅助学习（警惕浪费时间）。\n文本翻译：谷歌翻译 （Linux 上做演示）\ntranslate-shell 支持谷歌翻译或者必应翻译，我们可以在 GoldenDict 上利用其进行文本翻译。\n第一步：安装 translate-shell\nLinux\n# Ubuntu $ sudo apt install translate-shell -y macOS\n# Homebrew $ brew install translate-shell # MacPorts $ sudo port install translate-shell Windows\n 配置比较繁琐，推荐使用 xinebf/google-translate-for-goldendict（使用方法见后面）。或者使用 CopyTranslator。  第二步：菜单栏选择**【编辑】【词典】【词典来源】【程序】 添加**，进行如下配置（类型为纯文本）：\n# Google Translate - [Chinese] trans -e google -s auto -t zh-CN -show-original n -show-original-phonetics n -show-translation n -show-translation-phonetics n -show-prompt-message n -show-languages n -show-original-dictionary n -show-dictionary n -show-alternatives y -no-ansi \"%GDWORD%\" # Google Translate - [English] trans -e google -s auto -t en-US -show-original n -show-original-phonetics n -show-translation n -show-translation-phonetics n -show-prompt-message n -show-languages n -show-original-dictionary n -show-dictionary n -show-alternatives y -no-ansi \"%GDWORD%\"  -show-original Show original text or not. (default: yes) -show-original-phonetics Show phonetic notation of original text or not. (default: yes) -show-translation Show translation or not. (default: yes) -show-translation-phonetics Show phonetic notation of translation or not. (default: yes) -show-prompt-message Show prompt message or not. (default: yes) -show-languages Show source and target languages or not. (default: yes) -show-original-dictionary Show dictionary entry of original text or not. (default: no) This option is enabled in dictionary mode. -show-dictionary Show dictionary entry of translation or not. (default: yes) -show-alternatives Show alternative translations or not. (default: yes) -no-ansi Do not use ANSI escape codes.  第三步：切换到**【群组】 添加群组  Translate**，并添加 图标，设置群组快捷键为 Shift+T（可选）\n第四步：实践一下，在终端中 Ctrl+C+C，查询框处选择 Translate 群组，就看到翻译结果啦\n添加在线翻译后，GoldenDict 就能跨软件快速翻译。无论你是在浏览网页，还是在阅读英文书籍，或者看软件英文手册， Ctrl+C+C 快速查看翻译。你还可以收藏你翻译过的短语。\nWindows 上使用 google-translate-for-goldendict：\n到 Python 官网下载最新版安装包，当前为 python-3.8.2-amd64.exe，安装时勾选 Add Python 3.8 to PATH 就行。\n打开 CMD 运行：\n python -m pip install --upgrade pip  pip3 install google-translate-for-goldendict  先升级 pip 至最新版，然后再安装。\n 按 F3 打开 GoldenDict 词典配置界面， 进入【程序】选项卡：\n   key value     Enabled ✓   Type Html   Name Google Translate   Command Line python -m googletranslate.googletranslate zh-CN %GDWORD% -s “translate.google.cn”   Icon H:\\PathTo\\google_translate.png    切换到**【群组】 添加群组  Translate**，并添加 图标，设置群组快捷键为 Shift+T。\n文本翻译：有道翻译 在 Linux 上，利用 easeflyer 开发的 gd_plugin 添加有道翻译。\n将项目克隆下来：\n$ cd ~ $ git clone git@github.com:easeflyer/gd_plugin.git 按 F3 打开 GoldenDict 词典配置界面， 进入【程序】选项卡（路径替换为自己的绝对路径）：\n   key value     Enabled ✓   Type Html   Name Youdao Translate   Command Line /home/YOUR_USER_NAME/gd_plugin/youdao/youdao_get.py %GDWORD%   Icon /home/YOUR_USER_NAME/gd_plugin/youdao/youdao.svg    下载图标 Youdao icons。\n切换到【群组】选项卡，将其添加到 Translate 群组。\n文本翻译：CopyTranslator CopyTranslator 是复制即翻译的外文辅助阅读翻译解决方案，支持 Windows、Mac、Linux 三大平台，翻译引擎包括 Google，Baidu，Youdao，Sogou，Caiyun，Tencent。\n下载 CopyTranslator 安装包 进行安装后，使用方法请阅读 CopyTranslator 官方文档。\nCopyTranslator 擅长文本翻译，可是与 GoldenDict 交互使用时不够高效。所以，使用 GoldenDict 能满足需求时，就没必要打开 CopyTranslator。\n 有一款叫做 多译 的软件与 CopyTranslator 有相同功能，但是有字数限制，有兴趣可以了解一下。\n 文本翻译：Saladict Saladict 沙拉查词（Chrome / Firefox）插件天生适合浏览器，Saladict 插件可以在线翻译、在线查词、在线语音朗读、添加单词本、页面翻译等。\n使用方法参阅官方文档 沙拉查词使用方式。以及：\n 别找了，这才是你要的英文文献翻译神器！ 文献翻译利器：沙拉查词 + Quicker，这或许是 Windows 上最强的聚合翻译方案  OCR 屏幕取词 / 截屏翻译 GoldenDict 默认无 OCR 屏幕取词，无截屏翻译。先介绍一种三个平台都通用的方法，使用 Utools + 扩展：讯飞 OCR + 扩展：沙拉查词。步骤为，将要翻译的文本截图粘贴到 Utools 中，然后选择「讯飞 OCR」识别内容，最后点击翻译按钮调用「沙拉查词」进行翻译。操作起来还是比较快的。\n或者使用其他软件：\nWindows\n 使用 Quicker 效率神器。（与 Utools 相似） 使用 nonwill 发布的 GoldenDict OCR 划词版。  macOS\n 使用有道词典 Mac 版。打开取词（CTRL + 鼠标取词）。 欧路词典。  Linux\n 利用 words-picker 进行截屏翻译。在 GNOME 桌面环境中，打开 words-picker 程序，然后使用系统截图快捷键 shift-ctrl-Print 将区域复制到剪贴板，完成截屏翻译。 使用有道词典 Linux 版。打开取词（CTRL + 鼠标取词）。 使用 CuteTranslation 进行截屏翻译。  对于那些无法复制的单词，如果查词频率高，就使用具有 OCR 屏幕取词的软件；如果偶尔查询，手动输入也不是什么坏事。\n文本语音朗读 你可能会说：我不需要语音朗读。那是因为你没意识到它的用处或者说你忽略了它。你一定很喜欢词典中的例句发音，对听力和练习口语都有帮助。例句发音 = 句子 + 语音朗读，发散一下你的思维，当你翻译一个句子时，出于学习目的，你是不是同样希望能够听到它的语音朗读。而且学习英语不能太依赖眼睛，要多用耳朵听。\nWindows 上按 F3 打开词典配置， 在【语音合成】选项卡进行配置；Linux 版本暂时没有 text-to-speech (TTS) 功能。Saladict 够用，我就不折腾了。\n这里再推荐两款优秀的浏览器插件：\n Natural Reader Text to Speech Read Aloud: 文本语音朗读助理  还有一个 灵云语音云服务：\n 它可以 文字转音频 / 录音转文字。 它更加侧重于应用场景，不过现在已经收费了。  总之，根据自己的需求，去寻找好资源。\n背单词 GoldenDict 无单词本，意味着你不能像欧路词典那样，将单词添加到单词本中进行背诵。所以，只能「曲线救国」，将单词添加到收藏，隔一段时间（星期 / 月）就将收藏 导出至列表，然后放到 Anki 或 欧路词典中进行背诵复习。如有必要，付钱换取方便远离折腾。\n将收藏 导入欧路词典单词本：\n 菜单栏选择**【帮助】【配置文件夹】**，可以看到收藏文件：favorites。\nAnki 神器的使用，有兴趣可以深入了解。 干货 / 百科\n 备份配置文件 换机或者重装系统时，需要备份你的 GoldenDict 配置文件。否则，一切将从头再来，你会很痛苦。\n菜单栏选择**【帮助】【配置文件夹】**，直接将整个文件夹进行备份。\n新机或者新系统上，将整个文件夹拷贝到原来的位置，完成配置恢复。\n恭喜！你会使用 GoldenDict 了！ 前面主要介绍了 GoldenDict 的使用方法。为提高文本翻译效率，引入了 CopyTranslator / Saladict 两款程序。为补足 GoldenDict OCR 屏幕取词和截屏翻译的缺失，也引入了相应的软件。我们期望有那么一款软件能聚合这些功能，但这样的软件我还没发现，或者说还没有。\n现在的 GoldenDict 具备了离线查词、在线查词和在线翻译的能力，完全能满足我们的需求。而且 GoldenDict 的离线词库拥有最强的学习效果，所以你应该主要使用 GoldenDict 进行查词和文本翻译，而 CopyTranslator / Saladict 作为备用软件，主要用于增强文本翻译。同时也是为了统一入口，避免分散你的学习精力。具体怎么配合，多多使用，慢慢摸索。\n细心的你不难发现，查词和文本翻译里面最核心的是词典和翻译引擎。\n这里我们讨论一下词典。选用什么词典？我们需要做功课来回答。\n我不打算直接甩几本词典放这里，对于新手，看了一定是云里雾里。\n因为词典是每个人必须会用的东西，所以值得深入学习。\nEnglish Dictionary = 英语词典\n字典和词典是两个不同的概念，不要乱叫。中国正式使用“字典”一词始于《康熙字典》。根据《说文解字》，典是五帝的书本，神圣尊贵的大册。\n字典和词典的区别：\n 字典是为单字提供音韵、意思解释、例句、用法等等的工具书。使用字母文字作为文字的人群没有字典这个概念。字典收字为主，亦会收词。 词典（Dictionary），或称辞典，是为词语提供音韵、释义、例句用法等等的工具书。在东方社会中，词典收词为主，也会收字。为了配合社会发展需求，词典收词数量激增并发展出不同对象、不同行业及不同用途的词典。随着吸收百科全书的元素，更有百科辞典的出现。  如果你把 English Dictionary 翻译成「英语字典」，我只能安慰你：没文化不是你的错！\n掌握词典行情，便于做出选择\n通过了解词典的行情，了解词典应该为学习者提供哪些东西，我们就能选择适合自己的词典。如果同学 / 同事 / 朋友 / 小孩需要词典，也能轻松推荐。做「以其昏昏，使人昭昭」的事，心理没底不说还会被内行笑话。\n下面主要讨论一下英语词典，对于汉语词典或者其他外语词典（日语、法语、德语、俄语或西班牙语等），自行了解。\n提醒：后面的内容可能需要阅读多遍。\n浅谈英语词典版本 我们主要以 出身、体例、功用 以及 规模 四个方面对英语词典进行分类。\n一、出身 从出身上讲，英语词典大致可分为本土词典和引进词典两类。\n 本土词典主要是中国人编给中国人用的英汉词典，典型如译文社《英汉大词典》（陆谷孙主编）、《新英汉词典》（第4版）、商务《新时代英汉大词典》（张柏然主编）等。 引进词典又分为英系和美系两大类。目前英系词典占据中国市场的主导地位，著名的品牌如牛津、朗文、剑桥、麦克米伦、柯林斯，简称“牛朗剑麦柯”（谐音“牛郎见迈克”）合称“英国五虎”，除此还有一部词典叫做“钱伯斯”，对英国人意义非凡。美系词典主要有《美国传统词典》（The American Heritage Dictionary）和“韦氏词典”两大品牌。  二、体例 以体例划分，英语词典可分为英汉、英英、英汉双解、汉英、汉英双解以及其他类别等五种。\n 英汉词典 一般为（wéi）中国人所编写，如译文社《新英汉词典》； 英英词典 都是原版引进词典，如《牛津高阶英语词典》（OALD）、《朗文当代高级英语辞典》（Longman Dictionary of Contemporary English，简称 LDOCE）； 英汉双解词典 是目前英语学习词典的主流，最重要的即是牛朗两部词典，英汉双解词典都译自英语原版词典，但并非真正全文翻译，大多数词目的英语释义以对应的汉语词语。 汉英词典 大多是本土词典，如外研社《新世纪汉英词典》、商务《新时代汉英词典》； 汉英双解词典 比较特殊，它是以国内原版的汉语词典编译而成，据我所知，目前只有外研社《现代汉语词典（双语版）》以及商务印书馆国际有限公司《新华字典（双语版）》两种； 除此以外，其他类别指的是国内引进少量英语与其他语种词典，如译文社引进的兰登系列词典《德英—英德小词典》（Random House Webster’s Pocket German Dictionary）以及外教社引进的《柯林斯英德—德英词典》等。  注：所谓双解词典,是一个英文单词,用英文解释一遍意思,再用中文解释一遍意思;用英文来解释是最准确的,中文可以辅助你去理解。 如果想通过中文查英文,需要一本汉英词典。\n三、功用 首先从功用方面，将英语词典分为描述型、学习型和中和型三大类。\n 描述型  描述型英语词典又称为学术型英语词典，实际上描述型英语词典是最常见的英语词典，换作汉语工具书，诸如《新华字典》《现代汉语词典》都属于描述型词典，相反汉语工具书真正缺乏的学习型词典，除了一些给低幼学童使用的学习词典外，也就只有吕叔湘先生主编的《现代汉语八百词》等寥寥几部辞书。\n我们进一步将描述型英语词典分为一般性、百科性和专业性三种。一般性描述词典典型如《牛津简明英语词典》《英汉大词典》，这类词典收词详备并且释义简明；百科性描述词典则有《牛津当代百科大词典》《牛津英美文化词典》等，主要收录文化百科类词条；专业性描述词典则是局限于某一学科或行业的词典，如《牛津哲学词典》和《牛津商务英语词典》。\n学习型  学习型英语词典是专为英语学习者（多为非英语母语人士）设计的，注重英语实际应用时的用法说明，第一部学习型词典始于 1948 年由牛津大学出版社出版、霍恩比（A S Hornby）主编的《现代英语学习词典》（A Learner’s Dictionary of Current English），此即如今闻名于世的《牛津高阶英语词典》（OALD）的前身。\n我们进一步将学习型英语词典分为一般性、多功能和专门性三种。\n一般性英语学习型词典是我们最熟悉的品种，著名的“英国五虎”——“牛朗剑麦柯”都有自己品牌的学习型词典。（划重点）\n 最新版次，出版年份，出版社\n 《牛津高阶英汉双解词典》第 9 版，2018，商务 Oxford Advanced Learner’s Dictionary (OALD) 9th Edition , 2015 , Oxford 《朗文当代高级英语辞典》第 6 版，2019，外研社 Longman Dictionary of Contemporary English (LDOCE) 6th Edition , 2015 , Pearson 《剑桥高阶英汉双解词典》第 2? 版 ， 2008，外研社 Cambridge Advanced Learner’s Dictionary (CALD) 4th Edition , 2013 , Cambridge 《麦克米伦高阶英汉双解词典》第 1 版，2018，外研社 MacMillan English Dictionary for Advanced Learners (MED) 2nd Edition , 2012 , MacMillan 《柯林斯高阶英汉双解学习词典》第 8 版，2017，外研社 Collins COBUILD Advanced Learner’s Dictionary (CCALD) 9th Edition , 2018 , Collins   注： 关于书籍版次：第一次出版印刷的书写有“某年某月第一版，第一次印刷”，这叫初版，如内容不变动，第二次印就注明第一版第二次印刷，这种书叫重印书。如第三次印刷发行时内容经过重大修改，版次就要重新算，要称为：“第二版第三次印刷”。不过这个问题一般人不用想那么多，只需看自己是否喜欢这本词典，喜欢的话买国内最新版即可，毕竟每家词典各有特色。英语水平好的话，直接购买英文原版就行了。\n中和型  中和型词典兼具学习型词典和描述型词典的部分特点，是当前英语词典编纂的新趋势，典型代表为《朗文当代英语大辞典》，在 2000 词限定释词的基础上收录了 15,000 百科词条，是融合释义、用法说明、文化注释以及百科知识于一体的文化学习词典。与此相类的另有《美国传统词典》。\n四、规模 这是对英语词典最直观的分类，一般而言我们可以根据收词量和总字数将英语词典简单分为巨、大、中、小、微型五大类。\n 巨型词典  英语世界中的巨型词典主要有两部，一部即是由英国语言学家默里（James A.H.Murray）主编的久负盛名的《牛津英语词典》（The Oxford English Dictionary，简称 OED），另一部则是最初由美国词典编纂家韦伯斯特（Noah.Webster）主编的《韦氏新世界词典》（Webster Third New International Dictionary，简称 WTNID）。这两部词典是其他各类英语词典的母本，但却因其规模过大并不适合学习者案头使用。\n大型词典  因此 20 世纪下半叶英语国家出版了大量单卷本供高阶学习者案头使用的大型词典，典型的有《牛津简明英语词典》（Concise Oxford Dictionary，简称 COD）、《柯林斯COBUILD英语词典》（Collins COBUILD English Dictionary，简称 CCED）以及《朗文当代英语大辞典》（Longman Dictionary of English Language \u0026 Culture，简称 LDELC）；\n中型词典  后来又有供中阶学习者使用的中型词典，主要有《牛津袖珍英语词典》（Pocket Oxford Dictionary，简称 POD）、《朗文活用英语词典》（Longman Active Study Dictionary，简称 LASD）；\n小型词典  其实除了案头常备的大中型词典，人们更为喜爱和常用的或许是那些便携的小型词典，如《牛津英语小词典》（Little Oxford Dictionary，简称 LOD）；\n微型词典  除此以外，还有一种更其小巧的微型词典，释义极尽简洁，如《牛津英语微型词典》（The Oxford Minidictionary，简称 OMD），但这类词典一般用于速查，不适合英语学习者日常使用。\n词典应该为学习者提供哪些东西 用一本好词典你可以做到以下几点：\n 查找你看到或听到的英语单词的意思 找出如何说一个词 用你的语言找到一个单词的英文翻译 检查单词的拼写 检查动词的名词或过去时态的复数形式 找出一个单词的其他语法信息 找出一个词的同义词或反义词 查找单词的搭配 检查单词的词性 找出单词的语域 查找自然语言中单词的用法示例 听到例句的真人发音 查看配图学习单词 查看单词错误用法 观看单词在线教学视频（想象一下，当你查一个单词，一位美女 / 帅哥马上跳出来教你。恐怕你要天天抱着词典睡觉喽。）  所以，按照类型我们需要四种电子词典：英汉、英汉双解、英英、汉英。\n英汉词典：\n英汉词典主要是快速查看英语单词的中文释义。\n英汉双解词典：\n英汉双解词典对中级学习者当然非常友好，可以借助汉语翻译快速理解。如果查询一个单词需要耗费大量时间阅读英文解释，有时候是不明智的做法，并且，如果查一个单词里面又出现一大堆不认识的单词，太打击学习积极性了！另外，英汉双解词典是双向的，一般人是借助汉语理解英文，也有情况是借助英文查看对应的汉语翻译。所以，每个人必须有一本英汉双解词典。\n英英词典：\n当你英语到了一定水平（中高级水平）后，就应该主要使用英英词典。\n英英词典分两种：ESL 词典（ESL: English as a second language）以及 Non-ESL 词典（又称母语词典）。Non-ESL 词典是指英美国家人士使用的词典，特点是收词量大，释义用词精确，范围广，无上限，很多词典例句很少或没有，有点类似于我们用的《新华字典》和《汉语大词典》 。ESL 词典就是上小节提到的学习型英语词典，专为英语学习者（多为非英语母语人士）设计，其优点是简单易懂，但其缺点也比较明显，由于释义用词所限，部分单词的解释比较啰嗦或者不精确，理解起来也不顺畅。\n至于使用 ESL 词典还是 Non-ESL 词典，或者两者混合使用，就看你的需求了。\n汉英词典：\n使用汉语查找英文翻译或英文表达。\n 翻译软件的词库就来自于这些「英汉词典」和「汉英词典」。\n 有了上面的介绍，我可以推荐几本词典了。\n英语词典推荐 1 英汉词典：The Little Dict 用来提供快速翻译，还能聆听多个发音以及查看词频。「硬核之作，真香推荐，居家旅行沉迷学习必备，建议日常置顶食用。」下载\n2 英英·英汉双解词典（ESL）  朗文当代高级英语辞典（释义用词 2000 个） 柯林斯高阶英语学习词典（释义用词 2500 个） 牛津高阶英语词典（释义用词 3000 个）  2.1 朗文当代高级英语辞典\n英英原版\n Longman Dictionary of Contemporary English 6th Edition (En-En)，En-En_LDOCE6。 《朗文当代高级英语辞典（英英）（第六版）》，包含英式发音、美式发音、大部分例句朗读，带图片详解。这本词典收录单词量最大，例句最多，搭配和用法也最全。例句是真人原声，非常自然。 英语老师都会倡导学生尽量使用英英词典，营造英语环境，用英文解释英文，用英文理解英文，用英文对世界编码，有利于养成英语思维，对听说读写都有帮助。全英文解释，不会因为英汉差别而导致理解上的偏差。当然，英汉双解词典我们也是需要的。  英汉双解版\n En-Cn_LDOCE5++ V1.35 / V2.15。下载 《朗文当代高级英语辞典（英英·英汉双解）（第五版）》 这本词典默认是英英版，可以通过点击轻松查看汉语翻译。对于直接使用英英有些吃力的同学，可以设置默认展开汉语，立马就是一本英汉双解词典。释义用词仅 2000 个，让你轻松看懂。大量例句都有真人发音，让你爱上听例句。  PDF 版\n 《朗文当代高级英语辞典（英汉双解）（第五版）》。下载  朗文在线词典\n www.ldoceonline.com  2.2 柯林斯高阶英语学习词典\n英英原版\n Collins COBUILD Advanced Learner’s Dictionary 9th Edition (En-En)，En-En_CCALD9。  英汉双解版\n Collins COBUILD advanced learner’s English-Chinese dictionary 8th Edition。 《柯林斯COBUILD高阶英汉双解学习词典》（第8版）中的全部释义、例证及专栏均基于收词规模达 45 亿词的柯林斯英语语料库；所有单词及短语均采用整句释义，凸显词汇在典型语境中的典型用法。 强烈推荐！可以直接背诵单词及短语的整句释义，这就好比一个外国人在跟你交谈，对英语思维以及口语表达都有莫大的帮助。  柯林斯在线词典\n www.collinsdictionary.com  2.3 牛津高阶英语词典\n英英原版\n Oxford Advanced Learner’s Dictionary 9th edition (En-En)，En-En_OALD9。下载 包含英式发音、美式发音，例句发音，带图片详解等。  英汉双解版\n Oxford Advanced Learner’s English-Chinese Dictionary 9th Edition，En-zh_CN_OALD9。下载 《牛津高阶英语词典》为世所公认的权威英语学习词典，惠及世界各地一代又一代学子。到第九版编者将会话与写作功能融入学习型词典。 释义简明，义项划分清晰；提供系统的语法信息，如搭配模式、用法说明框等；提供插图及主题图片，直观释义。新加牛津口语指南，详解日常及应试等场景会话用语。 纸质版配套光盘中提供 iWriter + iSpeaker 互动式写作和口语指导学习程序。  牛津在线词典\n www.lexico.com www.oxfordlearnersdictionaries.com  3 汉英词典（任选一部）  汉英大词典（第3版） 新汉英大辞典  一般人上面几部词典基本够用。如果链接失效，可以试试 网盘搜索（超能搜 等）或者 逛论坛。\n英语构词法规则 GoldenDict 安装的时候没有附带 构词法规则，查找一些单词的复数等变位变格形式的单词有时会查不到（比如有些词典查不到 Books，不会自动跳转到 Book），为了让 GoldenDict 更好地工作，我们添加 英语构词法规则库。\n进入 SourceForge 上 GoldenDict 的项目地址，依次选择 Files  [better morphologies](https://sourceforge.net/projects/goldendict/files/better morphologies/)  [1.0](https://sourceforge.net/projects/goldendict/files/better morphologies/1.0/)  [en_US_1.0.zip](https://sourceforge.net/projects/goldendict/files/better morphologies/1.0/en_US_1.0.zip/download) 下载英语构词法规则库。\n菜单栏选择**【编辑】【词典】【词典来源】【构词法规则库】**，添加 英语构词法规则库。\n朗文5 ++：自动展开音节（Syllable）及汉语（Chinese） 我是 En-Cn_LDOCE5++ 和 En-En_LDOCE6 一起使用，所以把 LDOCE5++ 设置为自动展开音节及汉语。\n下面介绍一下设置方法，适用于 En-Cn_LDOCE5++（V1.35 / V2.00 / V2.15）。\n自动展开音节（Syllable）\n打开文件 LM5style.css 搜索 show/hide syllable 注释掉以下代码块：\n/* -------------- show/hide syllable ------------- .HWD .HYP { display: none; }*/ 调整手机中悬浮球高度\n手机欧路词典中 LDOCE5++ 的悬浮球会与控制按钮重叠，需要调整其高度。搜索 .mobile .lm5pp_popup 设置距离底部为 90px：\n.mobile .lm5pp_popup { bottom: 90px; right: 10px; } 自动展开汉语（Chinese）\n打开 LM5style_switch.css 注释掉以下代码块：\n/*.EXAMPLE .cn_txt, .Error .cn_txt,.cn_txt { display: none; }*/ 可以偷懒直接删除 LM5style_switch.css（或者重命名为 LM5style_switch.css.bak）。但是，你将不能在悬浮球上控制隐藏/显示汉语。\n 如果你直接修改手机中的 CSS 文件，需要清除软件缓存再重启 App 才能生效。 如果你在电脑上修改，Ctrl+F5 可以快速刷新词典查看效果。 更多调整参见 FF朗文5++重排 DIY / 改版 fearfare 大的朗文。\n GoldenDict 进阶技巧 效率提升：快捷键 除了全局热键外，GoldenDict 还支持许多程序快捷键。按 F1 快捷键打开 GoldenDict 帮助， 查看 13 Shortcuts。\n第一次使用，按照快捷键列表操作一遍。主要是感受一下快捷键的功能，不要求强行记忆它们，当你经常进行某项操作时，再翻阅一下 13 Shortcuts，用几次就记住了。\n常用快捷键：\n   Shortcut Action     Alt+Left (In main and popup windows) history navigation: show previous founded results   Alt+Right (In main and popup windows) history navigation: show next founded results   Alt+Down Jump to article from next dictionary   Alt+Up Jump to article from previous dictionary   Alt+S (In main and popup windows) playback pronunciation for current word   Alt+W (In popup window) transfer word from search line to main window   Alt+PgDown (In main and popup windows) switch to next dictionaries group   Alt+PgUp (In main and popup windows) switch to previous dictionaries group   Ctrl++ Increase articles font size   Ctrl+– Decrease articles font size   Ctrl+0 Set default articles font size   Ctrl+E Add current tab to Favorites   Ctrl+F (In main and popup windows) search in page / (In dictionaries dialog) go to filter line   Ctrl+M Show/hide main menu   Ctrl+Q (In main window) close GoldenDict   Ctrl+S Show/hide search pane   Ctrl+Shift+F Open/switch to full-text search dialog   Esc (In main window) go to search line (the action for Esc key can be changed in preferences) / (in popup window) close popup window   F1 GoldenDict reference   F3 Dictionaries dialog   F4 GoldenDict preferences    查句：全文搜索 按 F1 打开 GoldenDict 帮助， 查看 09 Full-text search。\n可以通过菜单“搜索”或按“Ctrl+Shift+F”键来调用全文搜索对话框。通过全文搜索，可以在当前词典组的词典文本中而不是在词典 headwords（词目）中搜索单词和表达式。\n **提醒：**如果 GoldenDict 占用 CPU (%) 超高，请关闭全文搜索索引。看一下文章 GoldenDict 全文搜索几例。\n 利用「全文搜索」查找英文表达，显然比直接将一句中文放到翻译软件中翻译更靠谱，比如下面这句摘自 牛津高阶英汉双解词典（第 9 版） 的例句：\n I’ll ask my boss if I can have the day off. 我要问一下老板我能不能请一天假。\n现在我复制中文到谷歌翻译中翻译，结果如下： I have to ask the boss if I can take a day off.\n 很显然翻译出来的英文枯燥无味。\n  下面举例简单介绍一下，使用「全文搜索」查找地道的英文表达。\n 例子：我想知道请假的的英文表达，包括日假周假年假。我该如何搜索？\n 快捷键 Ctrl+Shift+F 打开全文搜索，模式选择 正则表达式。\n如果直接检索 请假 这个关键词，会因范围太大，需要更多检索时间，最后还会出来很多无用结果，所以我们需要缩小检索范围。\n先检索日假。直接输入 请一天假，这个地球人都会，但「请两天假」的表达式就搜不到。现在，我们要一次检索出「请天假」的表达式，输入正则表达式：请.{1,3}天假（中间匹配 1-3 个字符）。\n理论上，我们可以匹配出：请一天假 请两天假 请几天假 请过一天假 请了十五天假 ...\n .：一个点，匹配任意单字符（不包括换行符） {n,m}：m 和 n 均为非负整数，其中 n 现在，我们要把请日假 / 周假 / 年假的表达式一次搜出来。 给搜索框写入正则表达式：请.{1,3}(天|周|年)假，就查出来了。\n ()：标记一个子表达式的开始和结束位置。()? 匹配前面的子表达式零次或一次，()+ 匹配前面的子表达式一次或多次。 |：代表 或\n 正则表达式学习资源：\n 正则表达式 – 语法 _ 菜鸟教程 油管最受欢迎的+正则表达式教程【11集】 练习正则表达式的网站：RegExr  多读几遍 GoldenDict 帮助，掌握更多使用技巧。\n其他  GoldenDict 界面显示风格、字体、背景等的修改 GoldenDict 专贴！  参考文章  GoldenDict 中文用户手册 新手上路：GoldenDict——英语爱好者必备词典 [使用教程] Linux 上最好用的词典 GoldenDict 在 GoldenDict 中添加谷歌翻译 Ubuntu 安装 GoldenDict 英语词典版本浅谈（讲稿版） Linux 下非常好用的字典 GoldenDict！ GoldenDict 添加构词法规则库 GoldenDict 词典的超级实用高级玩法——全文搜索功能   能力有限，本文可能有错误的地方，望留言斧正。\n GoldenDict Dark Theme Kvantum\nGoldenDict 是 Qt 应用程序，因此，在 Gnome 上的 Appearence 设置就对其无效。参考 Uniform look for Qt and GTK applications，如果直接通过 QT_STYLE_OVERRIDE=YurnDark goldendict ，会发现其只支持 Windows, Fusion 两个有限的主题，而且没有黑暗主题。因此参考 How to Change Look and Feel of Qt5 Apps in Ubuntu, Debian, Fedora Linux 使用 Kvantum 来设置 QT 程序的黑暗模式：\n$ sudo apt install qt5-style-kvantum qt5-style-kvantum-themes $ echo \"export QT_STYLE_OVERRIDE=kvantum\"  ~/.profile GoldenDict-Full-Dark-Theme\n这个主题有个全黑暗模式，即xian shi词典结果部分也会黑暗，但是效果不好，看不清。\nDownload GoldenDict-Full-Dark-Theme Move styles and fonts folders to the GD Configuration Folder. If GoldenDict is installed by default, the GD Configuration Folder is located at the ~/.goldendict Move the icons folder to the GoldenDict program folder /usr/share/goldendict Open GoldenDict menu “Preferences… → Interface”: set “Add-on style” to dark-theme; set “Display style” to Lingoes. set “Display style” to Default.  startup \u0026 silent start   startup：将 goldendict 添加到 gnome-session-properties，默认生成的是\n$ cat ~/.config/autostart/goldendict-owned-by-preferences.desktop [Desktop Entry] Type=Application Terminal=false Categories=Office;Dictionary; Name=GoldenDict GenericName=Multiformat Dictionary Comment=A feature-rich dictionary lookup program Icon=goldendict Exec=goldendict   silent start：Edit = Preferences = start to system tray 就是静默启动\n  crow-translate Flameshot Powerful, yet simple to use open-source screenshot software.\n   Keys Description     ←, ↓, ↑, → Move selection 1px   Shift + ←, ↓, ↑, → Resize selection 1px   Esc Quit capture   Ctrl + C Copy to clipboard   Ctrl + S Save selection as a file   Ctrl + Z Undo the last modification   Right Click Show color picker   Mouse Wheel Change the tool’s thickness    Add a new Shortcuts\n On ‘Name’, name it ‘Flameshot’ Define the command as ‘flameshot gui’. Select ‘Define shortcut…‘and click your keyboard win + shift + Prt Sc key.  PPSSPP A PSP emulator.\n$ sudo add-apt-repository ppa:ppsspp/stable $ sudo apt-get update $ sudo apt install ppsspp Graphics:\n Rendering Mode  set the Backend from OpenGL to Vulkan.   Framework Control  Frameskipping is Off Auto-Frameskip is Off set the Alternative Speed to Unlimited   Postprocessing effects  Postprocessing shader should be off.   Performance  If your Device is Powerful, high rendering resolution will work. Its recommended to first try with 2x Rendering resolution as It brings impressive graphics and supports stable gameplay too Hardware transform, Software skinning, Vertex cache and Lazy texture caching should be checked. Retain changed textures should be unchecked while keeping Disable slower effects and Hardware Installation checked.   Overlay Information  Select FPS in Show FPS counter.    System:\n Make sure Fast memory is checked Set I/O timing method, to Simulate UMD delays or Fast  yuzu yuzu 是 Citra的制作者写的一个开源NS模拟器，用C++编写，特点包括Vulkan API的支持、灵活的模拟器配置以及游戏配置等等。\n玩了 super mario odyssey，过场动画很卡顿，可以软配置的很少，主要看硬件配置，我的配置玩 BOTW 是不可能了。\n安装   选择 File - Open yuzu Folder\n  在打开的目录下，新建keys文件夹（如果没有），然后进入keys文件夹，放入key文件prod.keys，内容如下\naes_kek_generation_source = 4d870986c45d20722fba1053da92e8a9 aes_key_generation_source = 89615ee05c31b6805fe58f3da24f7aa8 bis_kek_source = 34c1a0c48258f8b4fa9e5e6adafc7e4f bis_key_00 = 374e0e2ab275141f811badcb0fefd881b71d6af540de58895901aa0c01663bc8 bis_key_01 = 0b08f19a42ac5ae590b3373ad9698344a571f35165663536dae0842b5221b31c bis_key_02 = 38f0936f33bacedc0c0a159ffbbeee0f40bb08386915bdd0c6730349b99081ec bis_key_03 = 38f0936f33bacedc0c0a159ffbbeee0f40bb08386915bdd0c6730349b99081ec bis_key_source_00 = f83f386e2cd2ca32a89ab9aa29bfc7487d92b03aa8bfdee1a74c3b6e35cb7106 bis_key_source_01 = 41003049ddccc065647a7eb41eed9c5f44424edab49dfcd98777249adc9f7ca4 bis_key_source_02 = 52c2e9eb09e3ee2932a10c1fb6a0926c4d12e14b2a474c1c09cb0359f015f4e4 device_key = bd16c45b2647d842c5ee3c869e3a9607 device_key_4x = 2078900c6bb36fff1fdad57a7dd1b66e eticket_rsa_kek = 19c8b441d318802bad63a5beda283a84 eticket_rsa_kek_source = dba451124ca0a9836814f5ed95e3125b eticket_rsa_kekek_source = 466e57b74a447f02f321cde58f2f5535 header_kek_source = 1f12913a4acbf00d4cde3af6d523882a header_key = aeaab1ca08adf9bef12991f369e3c567d6881e4e4a6a47a51f6e4877062d542d header_key_source = 5a3ed84fdec0d82631f7e25d197bf5d01c9b7bfaf628183d71f64d73f150b9d2 key_area_key_application_00 = ef979e289a132c23d39c4ec5a0bba969 key_area_key_application_01 = cdedbab97b69729073dfb2440bff2c13 key_area_key_application_02 = 75716ed3b524a01dfe21456ce26c7270 key_area_key_application_03 = f428306544cf5707c25eaa8bc0583fd1 key_area_key_application_04 = 798844ec099eb6a04b26c7c728a35a4d key_area_key_application_05 = a57c6eecc5410ada22712eb3ccbf45f1 key_area_key_application_06 = 2a60f6c4275df1770651d5891b8e73ec key_area_key_application_07 = 32221bd6ed19b938bec06b9d36ed9e51 key_area_key_application_08 = fb20aa9e3dbf67350e86479eb431a0b3 key_area_key_application_09 = ce8d5fa79e220d5f48470e9f21be018b key_area_key_application_0a = 38b865725adcf568a81d2db3ceaa5bcc key_area_key_application_0b = bbddfd40a59d0ff555c0954239972213 key_area_key_application_0c = 3fee7204e21c6b0ff1373226c0c3e055 key_area_key_application_source = 7f59971e629f36a13098066f2144c30d key_area_key_ocean_00 = b33813e4c9c4399c75fabc673ab4947b key_area_key_ocean_01 = c54166efa8c9c0f6511fa8b580191677 key_area_key_ocean_02 = 3061ce73461e0b0409d6a33da85843c8 key_area_key_ocean_03 = 06f170025a64921c849df168e74d37f2 key_area_key_ocean_04 = dc857fd6dc1c6213076ec7b902ec5bb6 key_area_key_ocean_05 = 131d76b70bd8a60036d8218c15cb610f key_area_key_ocean_06 = 17d565492ba819b0c19bed1b4297b659 key_area_key_ocean_07 = 37255186f7678324bf2b2d773ea2c412 key_area_key_ocean_08 = 4115c119b7bd8522ad63c831b6c816a6 key_area_key_ocean_09 = 792bfc652870cca7491d1685384be147 key_area_key_ocean_0a = dfcc9e87e61c9fba54a9b1c262d41e4d key_area_key_ocean_0b = 66fe3107f5a6a8d8eda2459d920b07a1 key_area_key_ocean_0c = b79b6bf3d6cdc5ec10277fc07a4fec93 key_area_key_ocean_source = 327d36085ad1758dab4e6fbaa555d882 key_area_key_system_00 = 6dd02aa15b440d6231236b6677de86bc key_area_key_system_01 = 4ab155e7f29a292037fd147592770b12 key_area_key_system_02 = b7a74adeaf89c2a198c327bdff322d7d key_area_key_system_03 = d5aab1acd23a8aec284a316df859d377 key_area_key_system_04 = 9b44b45b37de9d14754b1d22c2ca742c key_area_key_system_05 = 0012e957530d3dc7af34fbbe6fd44559 key_area_key_system_06 = 01744e3b0818445cd54ee9f89da43192 key_area_key_system_07 = d0d30e46f5695b875f11522c375c5a80 key_area_key_system_08 = bd06cb1b86bd5c433667470a09eb63de key_area_key_system_09 = e19f788f658eda8bbf34a1dd2a9503a9 key_area_key_system_0a = 7070e7ff5cfe448630143a9874903c38 key_area_key_system_0b = 3fa471d4483e58b8f7756fcb64f63890 key_area_key_system_0c = 7bfd381df3369407ab1c6bdd9fabf522 key_area_key_system_source = 8745f1bba6be79647d048ba67b5fda4a keyblob_00 = f759024f8199101dddc1ef91e6eecf37e24b95ac9272f7ae441d5d8060c843a48322d21cdd06d4fc958c68d3800eb4db939ffbec930177f77d136144ff615aa8835e811bb958deda218f8486b5a10f531b30cb9d269645ac9fc25c53fc80525e56bd3602988a9fcf06bbf99ca910ad6530791d512c9d57e17abf49220de6419bf4eca1685c1e4df77f19db7b44a985ca keyblob_01 = bd27264ae07e979756411d0c66e679e3c50851f3e902d9c2cd1a438b948159a517ec1566c10570326ea2697ee62da46f14bb5d581bfc06fd0c9387ea33d2d4dc63e7809ba90f03dd2c7112ffbfa548951b9b8c688b5e4f2951d24a73da29c668154a5d4838dba71ee068ace83fe720e8c2a495c596f73525dc3c05994b40ad27f8c60322f75cd548b821af9162e16f76 keyblob_02 = a3d4a8e153b8e6ae6e6aef3e8f219cb4b7790f47856accc76268f9afa99a1ff8b1a72f63d1f99f480a3c1532078bb59abdd25203cfb12a38b33e9ba6a09afb6f24283b3ba76a0161230a73669ddf5493c2b7919d094fd795b484794854f71e4f4c672245d7770e29397722444d111b4229cdbf35707b70634ea8f140766e884cc580cb1e2d9aa9866ffef920010fc409 keyblob_03 = 1558f525ae8c5be9243fb6d8a8b0a8ee0e886a59035668740a936619b7a5c83e821198b171d18e51445054df68688e45703b936818a827d8e540dd6bef2e11ec9ddc6cfe5fc736dd769b9f6e0a23a62e2e5f49e86143646a04ec3a23f828373a336a5c224a91f8a0c6c6a7b5844dd6415804209f83c943aeca9cfd856db6bd4ec32009c8cb268ed053052c9237dfd8bc keyblob_04 = 9fbeb1957fc1629e08b753a9086d6e01ffb4f11466b7417e3fa7f5f1efb754406704fd75afaf91a408a0b524c1fc80d36c2046fa4757412efe4c11e382f72e8a10d90ed580017d9deb87af2549b6b02661af48ff94f6072c0fef7fc2833b8bdae503898e2e927ac0663e8b6391dd4f1d685313935e2c48ece7d177c88bc9c883ede36c3677495784b838d7265c6ba7a1 keyblob_05 = 94a92da1d73c2b3e165c891ced5607fc6628ca2a0654f3fbc05711c063377c6e9c96a9d0192e530dd510e4fd41aa62ef4213c5f6e059e7e21db098a9b22d1e6c29bee148aaef15c52549d9165de96e85b0d029ecdc5843e2f32cb18be707eec61909cf3385d45bc2a4c8d76e9bfad5a40c4b92dcb982aa50d474897ac9ebb5351a7015dcc277a08f1214ad41384d7941 keyblob_key_00 = 839944c8a38df6791020b38147e906b0 keyblob_key_01 = b9e6fbde828b5f42c897ade8fd14c625 keyblob_key_02 = b6988a0795d294ef522908692d5db7ca keyblob_key_03 = 0e57d7777171d125d3fe3af5b397d009 keyblob_key_04 = b55a282d698fabeb4e03c67ff2026bc5 keyblob_key_05 = fdb542c1f1bdf134ec20b1fda02bc9e1 keyblob_key_source_00 = df206f594454efdc7074483b0ded9fd3 keyblob_key_source_01 = 0c25615d684ceb421c2379ea822512ac keyblob_key_source_02 = 337685ee884aae0ac28afd7d63c0433b keyblob_key_source_03 = 2d1f4880edeced3e3cf248b5657df7be keyblob_key_source_04 = bb5a01f988aff5fc6cff079e133c3980 keyblob_key_source_05 = d8cce1266a353fcc20f32d3b517de9c0 keyblob_mac_key_00 = 604422526723e541a849fa4c18660e0b keyblob_mac_key_01 = 279481456b1dc259d35599e6392e01e5 keyblob_mac_key_02 = dbbfb8096b676c2a54b5d9c61b423a94 keyblob_mac_key_03 = 48b7aef6d9b1edb132b8901a245a7750 keyblob_mac_key_04 = 544c082e9f8602c736dc0732d4319f88 keyblob_mac_key_05 = a540ec8ba84bd31eaaa9ce9f95226875 keyblob_mac_key_source = 59c7fb6fbe9bbe87656b15c0537336a5 mariko_master_kek_source_05 = 77605ad2ee6ef83c3f72e2599dac5e56 mariko_master_kek_source_06 = 1e80b8173ec060aa11be1a4aa66fe4ae mariko_master_kek_source_07 = 940867bd0a00388411d31adbdd8df18a mariko_master_kek_source_08 = 5c24e3b8b4f700c23cfd0ace13c3dc23 mariko_master_kek_source_09 = 8669f00987c805aeb57b4874de62a613 mariko_master_kek_source_0a = 0e440cedb436c03faa1daebf62b10982 mariko_master_kek_source_0b = e541acecd1a7d1abed0377f127caf8f1 mariko_master_kek_source_0c = 52719bdfa78b61d8d58511e48e4f74c6 master_kek_00 = f759024f8199101dddc1ef91e6eecf37 master_kek_01 = bd27264ae07e979756411d0c66e679e3 master_kek_02 = a3d4a8e153b8e6ae6e6aef3e8f219cb4 master_kek_03 = 1558f525ae8c5be9243fb6d8a8b0a8ee master_kek_04 = 9fbeb1957fc1629e08b753a9086d6e01 master_kek_05 = 94a92da1d73c2b3e165c891ced5607fc master_kek_08 = e42f1ec8002043d746575ae6dd9f283f master_kek_09 = cec2885fbeef5f6a989db84a4cc4b393 master_kek_0a = dd1a730232522b5cb4590cd43869ab6a master_kek_0b = fc6f0c891d42710180724ed9e112e72a master_kek_0c = 43f7fc20fcec22a5b2a744790371b094 master_kek_source_06 = 374b772959b4043081f6e58c6d36179a master_kek_source_07 = 9a3ea9abfd56461c9bf6487f5cfa095c master_kek_source_08 = dedce339308816f8ae97adec642d4141 master_kek_source_09 = 1aec11822b32387a2bedba01477e3b67 master_kek_source_0a = 303f027ed838ecd7932534b530ebca7a master_kek_source_0b = 8467b67f1311aee6589b19af136c807a master_kek_source_0c = 683bca54b86f9248c305768788707923 master_key_00 = c2caaff089b9aed55694876055271c7d master_key_01 = 54e1b8e999c2fd16cd07b66109acaaa6 master_key_02 = 4f6b10d33072af2f250562bff06b6da3 master_key_03 = 84e04ec20b9373818c540829cf147f3d master_key_04 = cfa2176790a53ff74974bff2af180921 master_key_05 = c1dbedcebf0dd6956079e506cfa1af6e master_key_06 = 0aa90e6330cdc12d819b3254d11a4e1e master_key_07 = 929f86fbfe4ef7732892bf3462511b0e master_key_08 = 23cfb792c3cb50cd715da0f84880c877 master_key_09 = 75c93b716255319b8e03e14c19dea64e master_key_0a = 73767484c73088f629b0eeb605f64aa6 master_key_0b = 8500b14bf4766b855a26ffc614097a8f master_key_0c = b3c503709135d4b35de31be4b0b9c0f7 master_key_source = d8a2410ac6c59001c61d6a267c513f3c package1_key_00 = f4eca1685c1e4df77f19db7b44a985ca package1_key_01 = f8c60322f75cd548b821af9162e16f76 package1_key_02 = c580cb1e2d9aa9866ffef920010fc409 package1_key_03 = c32009c8cb268ed053052c9237dfd8bc package1_key_04 = ede36c3677495784b838d7265c6ba7a1 package1_key_05 = 1a7015dcc277a08f1214ad41384d7941 package2_key_00 = a35a19cb14404b2f4460d343d178638d package2_key_01 = a0dd1eacd438610c85a191f02c1db8a8 package2_key_02 = 7e5ba2aafd57d47a85fd4a57f2076679 package2_key_03 = bf03e9889fa18f0d7a55e8e9f684323d package2_key_04 = 09df6e361e28eb9c96c9fa0bfc897179 package2_key_05 = 444b1a4f9035178b9b1fe262462acb8e package2_key_06 = 442cd9c21cfb8914587dc12e8e7ed608 package2_key_07 = 70c821e7d6716feb124acbac09f7b863 package2_key_08 = 8accebcc3d15a328a48365503f8369b6 package2_key_09 = f562a7c6c42e3d4d3d13ffd504d77346 package2_key_0a = 0803167ec7fc0bc753d8330e5592a289 package2_key_0b = 341db6796aa7bdb8092f7aae6554900a package2_key_0c = 4e97dc4225d00c6ae33d49bddd17637d package2_key_source = fb8b6a9c7900c849efd24d854d30a0c7 per_console_key_source = 4f025f0eb66d110edc327d4186c2f478 retail_specific_aes_key_source = e2d6b87a119cb880e822888a46fba195 rsa_oaep_kek_generation_source = a8ca938434127fda82cc1aa5e807b112 rsa_private_kek_generation_source = ef2cb61a56729b9157c38b9316784ddd save_mac_kek_source = d89c236ec9124e43c82b038743f9cf1b save_mac_key = 71a917f1bac8f4f04d732e734c90e2ec save_mac_key_source = e4cd3d4ad50f742845a487e5a063ea1f save_mac_sd_card_kek_source = 0489ef5d326e1a59c4b7ab8c367aab17 save_mac_sd_card_key_source = 6f645947c56146f9ffa045d595332918 sd_card_custom_storage_key_source = 370c345e12e4cefe21b58e64db52af354f2ca5a3fc999a47c03ee004485b2fd0 sd_card_kek_source = 88358d9c629ba1a00147dbe0621b5432 sd_card_nca_key_source = 5841a284935b56278b8e1fc518e99f2b67c793f0f24fded075495dca006d99c2 sd_card_save_key_source = 2449b722726703a81965e6e3ea582fdd9a951517b16e8f7f1f68263152ea296a sd_seed = fdb479221c43741a118fb5475374d2f7 secure_boot_key = 208de9b9de94ff698d00657a6a82a973 ssl_rsa_kek = b011100660d1dccbad1b1b733afa9f95 ssl_rsa_kek_source_x = 7f5bb0847b25aa67fac84be23d7b6903 ssl_rsa_kek_source_y = 9a383bf431d0bd8132534ba964397de3 titlekek_00 = 62a24d6e6d0d0e0abf3554d259be3dc9 titlekek_01 = 8821f642176969b1a18021d2665c0111 titlekek_02 = 5d15b9b95a5739a0ac9b20f600283962 titlekek_03 = 1b3f63bcb67d4b06da5badc7d89acce1 titlekek_04 = e45c1789a69c7afbbf1a1e61f2499459 titlekek_05 = ddc67f7189f4527a37b519cb051eee21 titlekek_06 = b1532b9d38ab036068f074c0d78706ac titlekek_07 = 81dc1b1783df268789a6a0edbf058343 titlekek_08 = 47dfe4bf0eeda88b17136b8005ab08ea titlekek_09 = adaa785d90e1a9c182ac07bc276bf600 titlekek_0a = 42daa957c128f75bb1fda56a8387e17b titlekek_0b = d08903363f2c8655d3de3ccf85d79406 titlekek_0c = be2682599db34caa9bc7ebb2cc7c654c titlekek_source = 1edc7b3b60e6b4d878b81715985e629b tsec_key = 53ec4ac7c6c32ff2abff3eeff4f84f36 tsec_root_key_02 = 4b4fbcf58e23cf4902d478b76c8048ec yuzu以及Ryujinx都需要prod.keys，里面包含了NS设备需要的key，需要通过 Hekate等一些列工具生成。yuzu不需要单独安装固件，只要把key文件放好就可以启动游戏了。\n  关闭模拟器，重新打开 yuzu ，若没有弹窗，则配置成功\n  设置 General\n确保勾选 Multicore CPU Emulation 和 Confirm exit while emulation is runing。\nLimit Speed percent：游戏运行速度，默认即可，可加快或限速\nPause emulation when inbackground：退到后台模拟器暂停运行\nHide mouse inactivity：运行时鼠标隐藏\nPrompt for user for game boot：游戏启动时选择哪个账户游玩\nWeb\nyuzu web service：填了用户名和令牌以后可以向官网报告游戏兼容性\nTelemetry：开了以后能让yuzu开发者查看你的使用情况，以便改善模拟器\nDiscord Presence：在discord中显示你的游戏状态\n系统\nSystem 页面，Language 选择 Simplified Chinese，Region 选择 China。这个设置的是系统语言，很多游戏会根据系统语言自动切换游戏内显示的语言。当然前提是游戏本身包含中文，如果游戏本身无中文只能通过打补丁的方式显示中文。\nCustom RTC：修改系统时间，可以触发某些游戏的特定彩蛋之类的功能。\nRNG seed：随机数种子，一般情况别改改。\nProfile Manager：这里可以改switch用户名称、头像。可以设置多个用户\nCPU\n图形\n API设置：支持OpenGL和Vulkan。 Use disk shader cache：磁盘着色器缓存，建议开启，这样就不用每次都重新编译，而是直接从磁盘加载到内存 Use asynchronous GPU emulation：GPU异步模拟，yuzu重写了GPU显存管理器，加速了缓存机制，使得帧数得到明显提示，同时性能提升40%-400%（来自BSoD Gaming的测试数据） Use NVDEC emulation：NVDEC是一项硬件转码技术，能减少转码期间计算密集型任务中CPU的负担，这是Nvidia的一个技术，有了它，过场动画的播放会畅顺很多  Advanced\n Accuracy Level：即模拟器左下角状态栏的 GPU NORMAL。是处理图形绘制精确度，开启High可能会修复一些图形错误，但是速度可能会变慢，一般选默认Normal即可 Use Vysnc (OpenGL Only)：开启垂直同步 Use Fast GPU time： 使用GPU加速渲染 Anisotropic Filtering：是各项异性过滤，是用来处理图形纹理错误的，可以选2x-16x  声音\n默认。\n控制\n连接手柄，选择该设备。\n管理 游戏格式分为两种，.xci 格式和 .nsp 格式。简单一点说，.xci 格式是卡带版，.nsp 格式是数字版。因此基本上所有的 DLC 基本都是 .nsp 格式，但也有 .xci 里集成了 DLC 的情况。\n添加游戏\n双击模拟器中间，添加游戏目录，游戏目录也不要有中文。添加完就可以看到游戏了。\n安装Update和DLC\n选择File -Install Files to NAND…，选中 Update和DLC文件，Update 安装最新就行，DLC 需要全部安装（可以不按顺序）。\n安装 Mod\nMod 用于修改游戏，如解决一些bug以及优化性能等。右键单击要为其添加模组的游戏。然后将整个mod文件夹粘贴到那里。你可以从 Switch Mods 获得一些基本的 yuzu 模组。\n注意：您可以通过右键单击游戏并单击属性来检查您拥有的游戏模组。\n放入着色器缓存\n放入着色器缓存（shader cache）可以明显提升游戏的流畅性，建议找找别人的着色器缓存。\n具体放入步骤：右键某个游戏，选择打开可转移着色器缓存，即可弹出缓存所在文件夹，然后放入你下载的别人的缓存就行了，比如 vulkan.bin 和 opengl.bin\nrubick 基于 electron 的开源工具箱，自由集成丰富插件。\nuTools uTools 是一个极简、插件化的现代桌面软件，通过自由选配丰富的插件，打造得心应手的工具集合。\nAlbert Linux 下的快捷启动工具。\n   应用 / 功能 查找应用 查找文件 查找网页 扩展程序     Albert ✓ ✓ ✓ -   Synapse ✓ ✓ - -   Utools ✓ ✗ ✓ ✓   Ulauncher ✓ ✓ ✓ ✓   FSearch ✗ ✓ ✗ ✗    简单说，Albert 最好用，Ulauncher 综合能力强，而 FSearch 严重偏科。\nCalibre calibre is a powerful and easy to use e-book manager. Users say it’s outstanding and a must-have. It’ll allow you to do nearly everything and it takes things a step beyond normal e-book software. It’s also completely free and open source and great for both casual users and computer experts.\nConvert Epub to PDF\nOpen terminal and run the following command to install Calibre.\n$ sudo apt update $ sudo apt install calibre Calibre software is referred to as ebook-convert command. Here is the command to convert epub file to pdf file.\nebook-convert .epub .pdf If your PDF doesn’t appear to be properly readable, try converting the epub file again using –enable-heuristics option.\n$ ebook-convert /home/ubuntu/test.epub /home/ubuntu/test.pdf --enable-heuristics gnome-books GNOME Books is a simple application to access and organize your ebooks. It is meant to be a simple and elegant replacement for using a file manager to deal with ebooks. The app supports comic books and ePub books.\n$ sudo apt install gnome-books e-book 需放在特定的目录，gnome-boos 自动扫描，在其他目录不扫描，而且也无法用 gnome-books file 方式打开，例如 ~/Public 目录。\nVentoy 简单来说，Ventoy是一个制作可启动U盘的开源工具。\n有了Ventoy你就无需反复地格式化U盘，你只需要把 ISO/WIM/IMG/VHD(x)/EFI 等类型的文件直接拷贝到U盘里面就可以启动了，无需其他操作。\nbalenaEtcher Supported Operating Systems\n Linux (most distros) macOS 10.10 (Yosemite) and later Microsoft Windows 7 and later  UNetbootin UNetbootin installs Linux/BSD distributions to a partition or USB drive\nWoeUSB-ng WoeUSB-ng is a simple tool that enable you to create your own usb stick windows installer from an iso image or a real DVD. This is a rewrite of original WoeUSB.\nTimeshift System restore tool for Linux.\nTodoist Plank Plank is meant to be the simplest dock on the planet.\nlatte-dock Steam $ sudo apt install steam YACReader Tachidesk 快速配置指南：\nTachidesk 是一个免费的开源漫画阅读器，可运行为 Tachiyomi 构建的扩展。Tachidesk 是独立的，但与 Tachiyomi 兼容的开源软件，它不是 Tachiyomi 的下游分支。你可以在任何支持 Java 的设备上运行这个软件。\n如果你熟悉 Tachiyomi，那你也会对 Tachidesk 的用户界面倍感熟悉。\nTachidesk 主要分为两部分：Tachidesk-server （后端）和 Tachidesk 图形化前端。Tachidesk 有多个图形化前端。直接从下文的 GitHub 链接下载的文件会自动集成一个 Tachidesk-WebUI。\nhakuneko work_crawler Download comics novels\ndingtalk 钉钉桌面版，基于electron和钉钉网页版开发\nhowdy Windows Hello™ style facial authentication for Linux\n向日葵 向日葵远程控制软件是一款免费的集远程控制电脑手机、远程桌面连接、远程开机、远程管理、支持内网穿透的一体化远程控制管理工具软件。\nKeePassXC words-picker 有OCR功能的开源取词软件\nCopyQ Clipboard manager with advanced features\nXnViewMP 图片浏览器。速度快，并且可以进行一些简单的图片操作，比如图片压缩、图片格式转换、图片剪裁等等。\nZeal 离线 API 文档查找阅读工具。\nXMind XMind 是一款全功能的思维导图和头脑风暴软件。像大脑的瑞士军刀一般，助你理清思路，捕捉创意。已成为上亿用户喜爱的全平台效率工具。\n完全免费的脑图软件推荐\n如果平时没有导出需求的话, 可以选用xmind和mindmaster, 如果突然需要导出pdf了, 可以将xmind和mindmaster的文件导出为mindmanager文件, 然后导入到freeplane中, 稍作调整与美化, 然后导出成pdf就可以了.\nCLI Utilities PostgreSQL 是 macOS Server 的默认数据库。\n安装 $ sudo apt install postgresql postgresql-contrib postgresql-contrib 或者说 contrib 包，包含一些不属于 PostgreSQL 核心包的实用工具和功能。\n通过 service 命令，你可以启动、关闭或重启 postgresql。输入 service postgresql 并按回车将列出所有选项\n默认情况下，PostgreSQL 会创建一个拥有所权限的特殊用户 postgres。要实际使用 PostgreSQL，你必须先登录该账户，使用 psql 来启动 PostgreSQL Shell：\n$ sudo -i -u postgres # sudo -login -user postgres $ psql 使用 \\l 用于查看已经存在的数据库\npostgres=# \\l 使用 \\c + 数据库名 来进入数据库\npostgres=# \\c shop \\d 查看表格信息\npostgres=# \\d [TableName] 查找配置文件 select name, setting from pg_settings where category='File Locations' ; Questions psql: error: FATAL: Peer authentication failed for user “postgres”\npsql的连接建立于Unix Socket上默认使用peer authentication（对等体认证；对等实体认证），所以必须要用和数据库用户相同的系统用户进行登录。\n# su - postgres  # psql 或者将peer authentiction 改为 md5，需先做上面步骤，更改密码：\npostgres=# ALTER USER db_user with password 'db_password'; $ find / -name 'pg_hba.conf' 2/dev/null $ sudo vi /etc/postgresql/12/main/postgresql.conf local all postgres md5 $ systemctl restart postgresql.service $ psql -U postgres -d shop Ansible 安装Ansible之后,不需要启动或运行一个后台进程,或是添加一个数据库.只要在一台电脑(可以是一台笔记本)上安装好,就可以通过这台电脑管理一组远程的机器.在远程被管理的机器上,不需要安装运行任何软件,因此升级Ansible版本不会有太多问题.\nfdupes You can call it like fdupes -r /dir/ect/ory and it will print out a list of dupes. fdupes has also a simple Homepage and a Wikipedia article, which lists some more programs.\ndigiKam 可用于查找重复相片，然后根据需要删除重复内容。\nbypy bypy info 认证特别慢，而授权码又只有10分钟，导致后面授权码过期 Heroku server 认证失败失败。\n如此，可以通过手动认证。\n  通过 bypy -dv 查看详细输出，得到 Full URL，如 https://bypyoauth.herokuapp.com/auth?code=...\u0026bypy_version=1.7.2\u0026redirect_uri=oob，在浏览器中打开，获得token。\n  将其放在 ~/.bypy/bypy.json 中。\n  源码仓库也有示例。\n我下载一个大文件，总共12G左右，已用了两个晚上，中途没关（由于不是立马就要的东西，就用时间换金钱了），一次看进度时，Terminal 就卡退了，重新运行后，bypy会继续上次下载，而不是重新开始（这样话太可怕了）。\nFRP frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。\n其他内网穿透工具\n ngrok ZeroTier N2N Dog Tunnel Tinc  Git sync-repos #!/usr/bin/bash TIME=\"$(date '+%Y%m%d%H%M%S')\" SAMATOMO_SOURCE=$HOME/Documents/SakamotoKuromeSource SAKAMOTO_PUBLIC=$SAMATOMO_SOURCE/public VNOTEBOOK=$HOME/Documents/vNotebook function Git_Sync() { cd $1 git pull echo '#Ignore files larger than 100MB' cat .gitignore_default  .gitignore find . -size +100M | sed 's|^./||g' | cat  .gitignore git add . git commit -m \"Update-${TIME}\" git push -v echo '' echo '' } function Sync_All() { echo '### PUSH SAMATOMO_SOURCE ###' Git_Sync $SAMATOMO_SOURCE echo '### PUSH SAKAMOTO_PUBLIC ###' rm -rf $SAKAMOTO_PUBLIC/* hugo Git_Sync $SAKAMOTO_PUBLIC echo '### PUSH vNotebook ###' Git_Sync $VNOTEBOOK } Sync_All exit 0  A collection of useful .gitignore templates Ignore files 100MB in your Git repos About large files on GitHub  GitHub Desktop Focus on what matters instead of fighting with Git. Whether you’re new to Git or a seasoned user, GitHub Desktop simplifies your development workflow.\nGitHub520 # GitHub520 Host Start 140.82.113.26 alive.github.com 140.82.113.26 live.github.com 185.199.108.154 github.githubassets.com 140.82.112.22 central.github.com 185.199.108.133 desktop.githubusercontent.com 185.199.108.153 assets-cdn.github.com 185.199.108.133 camo.githubusercontent.com 185.199.108.133 github.map.fastly.net 199.232.69.194 github.global.ssl.fastly.net 140.82.114.4 gist.github.com 185.199.108.153 github.io 140.82.113.4 github.com 192.0.66.2 github.blog 140.82.114.5 api.github.com 185.199.108.133 raw.githubusercontent.com 185.199.108.133 user-images.githubusercontent.com 185.199.108.133 favicons.githubusercontent.com 185.199.108.133 avatars5.githubusercontent.com 185.199.108.133 avatars4.githubusercontent.com 185.199.108.133 avatars3.githubusercontent.com 185.199.108.133 avatars2.githubusercontent.com 185.199.108.133 avatars1.githubusercontent.com 185.199.108.133 avatars0.githubusercontent.com 185.199.108.133 avatars.githubusercontent.com 140.82.114.10 codeload.github.com 52.217.201.185 github-cloud.s3.amazonaws.com 54.231.132.81 github-com.s3.amazonaws.com 52.217.225.9 github-production-release-asset-2e65be.s3.amazonaws.com 52.217.161.97 github-production-user-asset-6210df.s3.amazonaws.com 52.216.134.35 github-production-repository-file-5c1aeb.s3.amazonaws.com 185.199.108.153 githubstatus.com 64.71.144.202 github.community 23.100.27.125 github.dev 140.82.112.22 collector.github.com 13.107.42.16 pipelines.actions.githubusercontent.com 185.199.108.133 media.githubusercontent.com 185.199.108.133 cloud.githubusercontent.com 185.199.108.133 objects.githubusercontent.com # Update time: 2022-03-19T14:06:28+08:00 # Update url: https://raw.hellogithub.com/hosts # Star me: https://github.com/521xueweihan/GitHub520 # GitHub520 Host End libguestfs libguestfs 支持几乎所有类型的磁盘镜像。\n在基于 Debian 的系统上：\n$ apt-get install libguestfs-tools 我们可以像下面这样挂载一个 qcow2 格式的磁盘镜像：\n$ guestmount -a /path/to/qcow2/image -m  /path/to/mount/point 要卸载它，则执行：\n$ guestunmount qcow2_mount_poin Oracle JDK   解压缩到目录\n$ tar -zxv -f jdk-7u60-linux-x64.gz -C dir   修改环境变量\n$ vi ~/.bashrc export JAVA_HOME=/usr/lib/jvm/jdk1.7.0_60 # 这里换成自己解压的jdk 目录 export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATH   使环境变量生效\n$ source ~/.bashrc   Snapper Snapper 是一个由 openSUSE 的 Arvin Schnell 开发的工具，用于管理 Btrfs 子卷和 LVM 精简配置(thin-provisioned)卷。它可以创建和比较快照，在快照间回滚，并支持自动按时间序列创建快照。\n列出子卷列表\n$ sudo btrfs subvolume list -p / ID 256 gen 7746 parent 5 top level 5 path @ ID 258 gen 7746 parmount -n -o remount,rw /ent 5 top level 5 path @home 安装 snapper\n$ sudo apt install snapper snapper-gui 创建配置文件，启用自动快照\n$ sudo snapper -c root create-config / $ sudo snapper -c home create-config /home Snapshots on boot\n$ sudo systemctl status snapper-boot.timer 管理 snapshot\n$ sudo snapper-gui grub-btrfs Booting into snapshots.\nInclude btrfs snapshots at boot options. (Grub menu)\nFail2Ban Fail2Ban 是一款入侵防御软件，可以保护服务器免受暴力攻击。 它是用 Python 编程语言编写的。 Fail2Ban 基于auth 日志文件工作，默认情况下它会扫描所有 auth 日志文件，如 /var/log/auth.log、/var/log/apache/access.log 等，并禁止带有恶意标志的IP，比如密码失败太多，寻找漏洞等等标志。\n通常，Fail2Ban 用于更新防火墙规则，用于在指定的时间内拒绝 IP 地址。 它也会发送邮件通知。 Fail2Ban 为各种服务提供了许多过滤器，如 ssh、apache、nginx、squid、named、mysql、nagios 等。\nFail2Ban 能够降低错误认证尝试的速度，但是它不能消除弱认证带来的风险。 这只是服务器防止暴力攻击的安全手段之一。\nSyncthing Syncthing是一款开源免费跨平台的文件同步工具，是基于P2P技术实现设备间的文件同步，所以它的同步是去中心化的，即你并不需要一个服务器，故不需要担心这个中心的服务器给你带来的种种限制，而且类似于torrent协议，参与同步的设备越多，同步的速度越快。针对隐私问题，Syncthing软件只会将数据存储于个人信任的设备上，不会存储到服务器上。设备之间的通信均通过TLS进行，Syncthing还使用了完全正向保密技术来进一步保障你的数据安全。对于处于不同局域网之中的设备之间的文件同步，Syncthing也提供了支持。\nmasscan Masscan号称是最快的互联网端口扫描器，最快可以在六分钟内扫遍互联网。\nImageMagick Use ImageMagick to create, edit, compose, or convert digital images. It can read and write images in a variety of formats (over 200) including PNG, JPEG, GIF, WebP, HEIC, SVG, PDF, DPX, EXR and TIFF. ImageMagick can resize, flip, mirror, rotate, distort, shear and transform images, adjust image colors, apply various special effects, or draw text, lines, polygons, ellipses and Bézier curves.\nFred’s ImageMagick Scripts\np7zip 7-Zip is a file archiver with a high compression ratio.\np7zip 是 7-Zip 的 POSIX 系统移植，支持 Linux。\n警告： 不要将7z格式用于备份目的，因为它不会保存文件的所有者/组。有关更多详细信息，请参见7z(1)。\n添加文件或目录至已有的存档（或创建一个新的存档）：\n$ 7z a 也可以通过参数-p设置密码，并通过标志-mhe = on隐藏存档的结构：\n$ 7z a -p -mhe=on 更新存档内已有的文件或添加新文件：\n$ 7z u 列出存档内容：\n$ 7z l 从存档中解压文件至当前文件夹，不使用存档内的目录结构：\n$ 7z e 如果需要恢复存档内的目录结构，使用：\n$ 7z x 解压至新的目录：\n$ 7z x -o校验存档完整性：\n$ 7z t Differences between 7z, 7za and 7zr binaries The package includes three binaries, /usr/bin/7z, /usr/bin/7za, and /usr/bin/7zr. Their manual pages explain the differences:\n 7z(1) uses plugins to handle archives. 7za(1) is a stand-alone executable that handles fewer archive formats than 7z. 7zr(1) is a stand-alone executable. It is a “light-version” of 7za that only handles 7z archives. In contrast to 7za, it cannot handle encrypted archives.  分卷压缩与解压缩 rar # rar a -vSIZE 压缩后的文件名 被压缩的文件或者文件夹 # 最大限制为 12M $ rar a -m5 -v12m myarchive myfiles #解压 $ rar e myarchive.part1.rar zip How to unzip a multipart (spanned) ZIP on Linux?\nThe Linux unzip utility doesn’t really support multipart zips. From the manual:\n Multi-part archives are not yet supported, except in conjunction with zip. (All parts must be concatenated together in order, and then zip -F (for zip 2.x) or zip -FF (for zip 3.x) must be performed on the concatenated archive in order to “fix” it. Also, zip 3.0 and later can combine multi-part (split) archives into a combined single-file archive using zip -s- inarchive -O outarchive. See the zip 3 manual page for more information.)\n So you need to first concatenate the pieces, then repair the result. cat test.zip.* concatenates all the files called test.zip.* where the wildcard * stands for any sequence of characters; the files are enumerated in lexicographic order, which is the same as numerical order thanks to the leadings zeroes. test.zip directs the output into the file test.zip.\ncat test.zip.*  test.zip zip -FF test.zip --out test-full.zip unzip test-full.zip If you created the pieces by directly splitting the zip file, as opposed to creating a multi-part zip with the official Pkzip utility, all you need to do is join the parts.\ncat test.zip.*  test.zip unzip test.zip 总结：使用 zip -s- inarchive -O outarchive，例如：\n$ ls archive.zip archive.z01 archive.z02 archive.z03 $ zip -s- archive.zip -O archive-full.zip $ unzip archive-full.zip tar 要将目录logs打包压缩并分割成多个1M的文件，可以用下面的命令：\n$ tar cjf - logs/ | split -b 1m - logs.tar.bz2. 完成后会产生下列文件：\nlogs.tar.bz2.aa, logs.tar.bz2.ab, logs.tar.bz2.ac 要解压的时候只要执行下面的命令就可以了：\n$ cat logs.tar.bz2.a* | tar xj 7z 压缩：\n$ 7z a name.7z filename -v10m 这里a是添加文件到压缩卷，name.7z是压缩后文件,然后filename可以是文件夹或文件，-v10m是限制每个包大小不超过10m.\n解压到当前目录：\n$ 7z x film.7z.001 Wudao-dict 有道词典的命令行版本，支持英汉互查和在线查询。\nascii-image-converter ttyd Share your terminal over the web\nprogress Linux tool to show progress for cp, mv, dd, … (formerly known as cv)\nvosk-api Offline speech recognition API for Android, iOS, Raspberry Pi and servers with Python, Java, C# and Node\nconvert MP3 to text The software you can use is Vosk-api, a modern speech recognition toolkit based on neural networks. It supports 7+ languages and works on variety of platforms including RPi and mobile.\nFirst you convert the file to the required format and then you recognize it:\n$ ffmpeg -i file.mp3 -ar 16000 -ac 1 file.wav Then install vosk-api with pip:\n$ pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple vosk Then use these steps:\n$ git clone https://github.com/alphacep/vosk-api $ cd vosk-api/python/example $ curl -O http://alphacephei.com/vosk/models/vosk-model-small-en-us-0.15.zip $ unzip vosk-model-small-en-us-0.15.zip $ mv vosk-model-small-en-us-0.15 model $ python3 ./test_simple.py test.wav  result.json The result will be stored in json format.\nThe same directory also contains an srt subtitle output example, which is easier to evaluate and can be directly useful to some users:\n$ python3 -m pip install srt $ python3 ./test_srt.py test.wav The example given in the repository says in perfect American English accent and perfect sound quality three sentences which I transcribe as:\none zero zero zero one nine oh two one oh zero one eight zero three The “nine oh two one oh” is said very fast, but still clear. The “z” of the before last “zero” sounds a bit like an “s”.\nThe SRT generated above reads:\n1 00:00:00,870 -- 00:00:02,610 what zero zero zero one 2 00:00:03,930 -- 00:00:04,950 no no to uno 3 00:00:06,240 -- 00:00:08,010 cyril one eight zero three so we can see that several mistakes were made, presumably in part because we have the understanding that all words are numbers to help us.\nNext I also tried with the vosk-model-en-us-0.22.zip which was a 1.8G download compared to 40M of vosk-model-small-en-us-0.15 and is listed at https://alphacephei.com/vosk/models:\n$ mv model vosk-model-small-en-us-0.15 $ curl -O http://alphacephei.com/vosk/models/vosk-model-en-us-0.22.zip $ unzip vosk-model-en-us-0.22.zip $ mv vosk-model-en-us-0.22 model and the result was:\n1 00:00:00,840 -- 00:00:02,610 one zero zero zero one 2 00:00:04,026 -- 00:00:04,980 i know what you window 3 00:00:06,270 -- 00:00:07,980 serial one eight zero three which got one more word correct.\ninxi inix 是一个用于获取 Linux 系统信息的终端命令。能够获取软件和硬件的详细信息，比如计算机型号、内核版本、发行版号以及桌面环境等信息，甚至可以读取主存模块占用主板的哪块 RAM 卡槽等详细信息。\ninxi 还可以用于监控系统中正在消耗 CPU 或者内存资源的进程。\n在 Ubuntu/Debian 发行版系统中，安装命令：\nsudo apt install inxi 用 -F 参数可以获取详细的系统信息。几乎囊括了所有层次的系统信息。\ninxi -F BusyBox BusyBox 是一个开源（GPL）项目，提供了近 400 个常用命令的简单实现，包括 ls、mv、ln、mkdir、more、ps、gzip、bzip2、tar 和 grep。它还包含了编程语言 awk、流编辑器 sed、文件系统检查工具 fsck、软件包管理器rpm 和 dpkg ，当然还有一个可以方便的访问所有这些命令的 shell（sh）。简而言之，它包含了所有 POSIX 系统需要的基本命令，以执行常见的系统维护任务以及许多用户和管理任务。\n事实上，它甚至包含一个 init 命令，可以作为 PID 1 启动，以作为所有其它系统服务的父进程。换句话说，BusyBox 可以作为 systemd、OpenRC、sinit、init 和其他初始化系统的替代品。\nBusyBox 非常小。作为一个可执行文件，它不到 1MB，所以它在嵌入式、边缘计算 和物联网领域很受欢迎，因为这些场景的存储空间是很宝贵的。在容器和云计算的世界里，它作为精简的 Linux 容器镜像的基础镜像也很受欢迎。\n极简主义 BusyBox 的部分魅力在于它的极简主义。它的所有命令都被编译到一个二进制文件里（busybox），它的手册只有 81 页（根据我对 man 送到 pr 管道的计算），但它涵盖了近 400 条命令。\n作为一个例子的比较，这是 “原版” 的 useradd —help 的输出：\n-b, --base-dir BASE_DIR base directory for home -c, --comment COMMENT GECOS field of the new account -d, --home-dir HOME_DIR home directory of the new account -D, --defaults print or change the default config -e, --expiredate EXPIRE_DATE expiration date of the new account -f, --inactive INACTIVE password inactivity -g, --gid GROUP name or ID of the primary group -G, --groups GROUPS list of supplementary groups -h, --help display this help message and exit -k, --skel SKEL_DIR alternative skeleton dir -K, --key KEY=VALUE override /etc/login.defs -l, --no-log-init do not add the user to the lastlog -m, --create-home create the user's home directory -M, --no-create-home do not create the user's home directory -N, --no-user-group do not create a group with the user's name -o, --non-unique allow users with non-unique UIDs -p, --password PASSWORD encrypted password of the new account -r, --system create a system account -R, --root CHROOT_DIR directory to chroot into -s, --shell SHELL login shell of the new account -u, --uid UID user ID of the new account -U, --user-group create a group with the same name as a user 而这是是同一命令的 BusyBox 版本：\n-h DIR Home directory -g GECOS GECOS field -s SHELL Login shell -G GRP Group -S Create a system user -D Don't assign a password -H Don't create home directory -u UID User id -k SKEL Skeleton directory (/etc/skel) 这种差异是一种特性还是一种限制，取决于你是喜欢你的命令拥有 20 个选项还是 10 个选项。对于一些用户和某些用例来说，BusyBox 的极简主义刚刚满足所需。对于其他人来说，它是一个很好的最小化环境，可以作为一个后备工具，或者作为安装更强大的工具的基础，比如 Bash、Zsh、GNU Awk 等等。\nLynis  使用这个全面的开源安全审计工具检查你的 Linux 机器的安全性。\n 你有没有想过你的 Linux 机器到底安全不安全？Linux 发行版众多，每个发行版都有自己的默认设置，你在上面运行着几十个版本各异的软件包，还有众多的服务在后台运行，而我们几乎不知道或不关心这些。\n要想确定安全态势（指你的 Linux 机器上运行的软件、网络和服务的整体安全状态），你可以运行几个命令，得到一些零碎的相关信息，但你需要解析的数据量是巨大的。\n如果能运行一个工具，生成一份关于机器安全状况的报告，那就好得多了。而幸运的是，有一个这样的软件：Lynis。它是一个非常流行的开源安全审计工具，可以帮助强化基于 Linux 和 Unix 的系统。根据该项目的介绍：\n “它运行在系统本身，可以进行深入的安全扫描。主要目标是测试安全防御措施，并提供进一步强化系统的提示。它还将扫描一般系统信息、易受攻击的软件包和可能的配置问题。Lynis 常被系统管理员和审计人员用来评估其系统的安全防御。”\n 安装 Lynis 你的 Linux 软件仓库中可能有 Lynis。如果有的话，你可以用以下方法安装它：\n$ sudo apt install lynis 然而，如果你的仓库中的版本不是最新的，你最好从 GitHub 上安装它。事实上，Lynis 主要是用 shell 脚本来实现的。\n运行 Lynis 通过给 Lynis 一个 -h 选项来查看帮助部分，以便有个大概了解：\n$ sudo lynis -h 你会看到一个简短的信息屏幕，然后是 Lynis 支持的所有子命令。\n接下来，尝试一些测试命令以大致熟悉一下。要查看你正在使用的 Lynis 版本，请运行：\n$ sudo lynis show version 3.0.0 要查看 Lynis 中所有可用的命令：\n$ sudo lynis show commands Commands: lynis audit lynis configure lynis generate lynis show lynis update lynis upload-only 审计 Linux 系统 要审计你的系统的安全态势，运行以下命令：\n$ sudo lynis audit system 这个命令运行得很快，并会返回一份详细的报告，输出结果可能一开始看起来很吓人，但我将在下面引导你来阅读它。这个命令的输出也会被保存到一个日志文件中，所以你可以随时回过头来检查任何可能感兴趣的东西。\nLynis 将日志保存在这里：\nFiles: - Test and debug information : /var/log/lynis.log - Report data : /var/log/lynis-report.dat 你可以验证是否创建了日志文件。它确实创建了：\n$ ls -l /var/log/lynis.log -rw-r-----. 1 root root 341489 Apr 30 05:52 /var/log/lynis.log $ ls -l /var/log/lynis-report.dat -rw-r-----. 1 root root 638 Apr 30 05:55 /var/log/lynis-report.dat 探索报告 Lynis 提供了相当全面的报告，所以我将介绍一些重要的部分。作为初始化的一部分，Lynis 做的第一件事就是找出机器上运行的操作系统的完整信息。之后是检查是否安装了什么系统工具和插件：\n[+] Initializing program ------------------------------------ - Detecting OS... [ DONE ] - Checking profiles... [ DONE ] --------------------------------------------------- Program version: 3.0.0 Operating system: Linux Operating system name: Red Hat Enterprise Linux Server 7.8 (Maipo) Operating system version: 7.8 Kernel version: 3.10.0 Hardware platform: x86_64 Hostname: example ---------------------------------------------------  [+] System Tools ------------------------------------ - Scanning available tools... - Checking system binaries... [+] Plugins (phase 1) ------------------------------------ Note: plugins have more extensive tests and may take several minutes to complete - Plugin: pam [..] - Plugin: systemd [................] 接下来，该报告被分为不同的部分，每个部分都以 [+] 符号开头。下面可以看到部分章节。（哇，要审核的地方有这么多，Lynis 是最合适的工具！）\n[+] Boot and services [+] Kernel [+] Memory and Processes [+] Users, Groups and Authentication [+] Shells [+] File systems [+] USB Devices [+] Storage [+] NFS [+] Name services [+] Ports and packages [+] Networking [+] Printers and Spools [+] Software: e-mail and messaging [+] Software: firewalls [+] Software: webserver [+] SSH Support [+] SNMP Support [+] Databases [+] LDAP Services [+] PHP [+] Squid Support [+] Logging and files [+] Insecure services [+] Banners and identification [+] Scheduled tasks [+] Accounting [+] Time and Synchronization [+] Cryptography [+] Virtualization [+] Containers [+] Security frameworks [+] Software: file integrity [+] Software: System tooling [+] Software: Malware [+] File Permissions [+] Home directories [+] Kernel Hardening [+] Hardening [+] Custom tests Lynis 使用颜色编码使报告更容易解读。\n 绿色。一切正常 黄色。跳过、未找到，可能有个建议 红色。你可能需要仔细看看这个  在我的案例中，大部分的红色标记都是在 “Kernel Hardening” 部分找到的。内核有各种可调整的设置，它们定义了内核的功能，其中一些可调整的设置可能有其安全场景。发行版可能因为各种原因没有默认设置这些，但是你应该检查每一项，看看你是否需要根据你的安全态势来改变它的值：\n[+] Kernel Hardening ------------------------------------ - Comparing sysctl key pairs with scan profile - fs.protected_hardlinks (exp: 1) [ OK ] - fs.protected_symlinks (exp: 1) [ OK ] - fs.suid_dumpable (exp: 0) [ OK ] - kernel.core_uses_pid (exp: 1) [ OK ] - kernel.ctrl-alt-del (exp: 0) [ OK ] - kernel.dmesg_restrict (exp: 1) [ DIFFERENT ] - kernel.kptr_restrict (exp: 2) [ DIFFERENT ] - kernel.randomize_va_space (exp: 2) [ OK ] - kernel.sysrq (exp: 0) [ DIFFERENT ] - kernel.yama.ptrace_scope (exp: 1 2 3) [ DIFFERENT ] - net.ipv4.conf.all.accept_redirects (exp: 0) [ DIFFERENT ] - net.ipv4.conf.all.accept_source_route (exp: 0) [ OK ] - net.ipv4.conf.all.bootp_relay (exp: 0) [ OK ] - net.ipv4.conf.all.forwarding (exp: 0) [ OK ] - net.ipv4.conf.all.log_martians (exp: 1) [ DIFFERENT ] - net.ipv4.conf.all.mc_forwarding (exp: 0) [ OK ] - net.ipv4.conf.all.proxy_arp (exp: 0) [ OK ] - net.ipv4.conf.all.rp_filter (exp: 1) [ OK ] - net.ipv4.conf.all.send_redirects (exp: 0) [ DIFFERENT ] - net.ipv4.conf.default.accept_redirects (exp: 0) [ DIFFERENT ] - net.ipv4.conf.default.accept_source_route (exp: 0) [ OK ] - net.ipv4.conf.default.log_martians (exp: 1) [ DIFFERENT ] - net.ipv4.icmp_echo_ignore_broadcasts (exp: 1) [ OK ] - net.ipv4.icmp_ignore_bogus_error_responses (exp: 1) [ OK ] - net.ipv4.tcp_syncookies (exp: 1) [ OK ] - net.ipv4.tcp_timestamps (exp: 0 1) [ OK ] - net.ipv6.conf.all.accept_redirects (exp: 0) [ DIFFERENT ] - net.ipv6.conf.all.accept_source_route (exp: 0) [ OK ] - net.ipv6.conf.default.accept_redirects (exp: 0) [ DIFFERENT ] - net.ipv6.conf.default.accept_source_route (exp: 0) [ OK ] 看看 SSH 这个例子，因为它是一个需要保证安全的关键领域。这里没有什么红色的东西，但是 Lynis 对我的环境给出了很多强化 SSH 服务的建议：\n[+] SSH Support ------------------------------------ - Checking running SSH daemon [ FOUND ] - Searching SSH configuration [ FOUND ] - OpenSSH option: AllowTcpForwarding [ SUGGESTION ] - OpenSSH option: ClientAliveCountMax [ SUGGESTION ] - OpenSSH option: ClientAliveInterval [ OK ] - OpenSSH option: Compression [ SUGGESTION ] - OpenSSH option: FingerprintHash [ OK ] - OpenSSH option: GatewayPorts [ OK ] - OpenSSH option: IgnoreRhosts [ OK ] - OpenSSH option: LoginGraceTime [ OK ] - OpenSSH option: LogLevel [ SUGGESTION ] - OpenSSH option: MaxAuthTries [ SUGGESTION ] - OpenSSH option: MaxSessions [ SUGGESTION ] - OpenSSH option: PermitRootLogin [ SUGGESTION ] - OpenSSH option: PermitUserEnvironment [ OK ] - OpenSSH option: PermitTunnel [ OK ] - OpenSSH option: Port [ SUGGESTION ] - OpenSSH option: PrintLastLog [ OK ] - OpenSSH option: StrictModes [ OK ] - OpenSSH option: TCPKeepAlive [ SUGGESTION ] - OpenSSH option: UseDNS [ SUGGESTION ] - OpenSSH option: X11Forwarding [ SUGGESTION ] - OpenSSH option: AllowAgentForwarding [ SUGGESTION ] - OpenSSH option: UsePrivilegeSeparation [ OK ] - OpenSSH option: AllowUsers [ NOT FOUND ] - OpenSSH option: AllowGroups [ NOT FOUND ] 我的系统上没有运行虚拟机或容器，所以这些显示的结果是空的：\n[+] Virtualization ------------------------------------ [+] Containers ------------------------------------ Lynis 会检查一些从安全角度看很重要的文件的文件权限：\n[+] File Permissions ------------------------------------ - Starting file permissions check File: /boot/grub2/grub.cfg [ SUGGESTION ] File: /etc/cron.deny [ OK ] File: /etc/crontab [ SUGGESTION ] File: /etc/group [ OK ] File: /etc/group- [ OK ] File: /etc/hosts.allow [ OK ] File: /etc/hosts.deny [ OK ] File: /etc/issue [ OK ] File: /etc/issue.net [ OK ] File: /etc/motd [ OK ] File: /etc/passwd [ OK ] File: /etc/passwd- [ OK ] File: /etc/ssh/sshd_config [ OK ] Directory: /root/.ssh [ SUGGESTION ] Directory: /etc/cron.d [ SUGGESTION ] Directory: /etc/cron.daily [ SUGGESTION ] Directory: /etc/cron.hourly [ SUGGESTION ] Directory: /etc/cron.weekly [ SUGGESTION ] Directory: /etc/cron.monthly [ SUGGESTION ] 在报告的底部，Lynis 根据报告的发现提出了建议。每项建议后面都有一个 “TEST-ID”（为了下一部分方便，请将其保存起来）。\nSuggestions (47): ---------------------------- * If not required, consider explicit disabling of core dump in /etc/security/limits.conf file [KRNL-5820] https://cisofy.com/lynis/controls/KRNL-5820/ * Check PAM configuration, add rounds if applicable and expire passwords to encrypt with new values [AUTH-9229] https://cisofy.com/lynis/controls/AUTH-9229/ Lynis 提供了一个选项来查找关于每个建议的更多信息，你可以使用 show details 命令和 TEST-ID 号来访问：\n$ sudo lynis show details TEST-ID 这将显示该测试的其他信息。例如，我检查了 SSH-7408 的详细信息：\n$ sudo lynis show details SSH-7408 2020-04-30 05:52:23 Performing test ID SSH-7408 (Check SSH specific defined options) 2020-04-30 05:52:23 Test: Checking specific defined options in /tmp/lynis.k8JwazmKc6 2020-04-30 05:52:23 Result: added additional options for OpenSSH 试试吧 如果你想更多地了解你的 Linux 机器的安全性，请试试 Lynis。如果你想了解 Lynis 是如何工作的，可以研究一下它的 shell 脚本，看看它是如何收集这些信息的。\nHow can I protect against single user mode Potential Attacks\nSingle User Mode\nThis is the easiest way to gain unauthorised access to a Linux system is to boot the server into Single User Mode because it does not, by default, require a root password to gain root level access. Single User Mood can be accessed by power cycling the machine and interrupting the boot process. To boot into single user mode where the GRUB bootloader is used perform the following; interrupt the boot process, press e to edit the boot configuration file, append to the line starting Linux one of either s, S, 1 or systemd. unit=[rescue.target, emergency.target, rescue] to change the argument being passed to the kernel during boot to boot into Single User Mode, then press ctrl+x.\nProtecting Against Single User Mode\nFor a traditional init based system\nAs root edit the file /etc/sysconfig/init then on the line SINGLE=/sbin/sushell change sushell TO sulogin.\nFor a systemd based system\nThe target configuration need to be altered for the root password to be prompted for. The targets are located in /lib/systemd/system the files which need alteration are emergency.service and rescue.service. Alter the line starting ExecStart=-/bin/sh –c “/usr/sbin/sushell; ……” and change the /usr/sbin/sushell to/usr/sbin/sulogin in both emergency.service and rescue.service.\nTo check this has taken affect\nThen save changes and reboot to confirm the alteration has taken affect, if the alteration was success when booting into single user mode it shall ask for the root password.\nRoot Password\nBy default, some Linux distributions do not have root password sets, this can be checked by running the command head -1 /etc/shadow and if the second column, using a colon as a delimiter, is an exclamation mark then no password has been set. If no root password is set, then regardless of if the system is set to prompt for a password for Single User Mode or not it will just load root access.\nSecuring Bootloader\nInsecure bootloaders can result in the bootloader being bypassed completely and a shell being used to gain direct root level access to the system. This is done by interrupting the GRUB boot process and appending init=/bin/bas to the line beginning linux16. This will tell the kernel to use bash instead of init.\nProtecting against bootloader side loading\nThe GRUB bootloader can be password protected by placing the configuration in /etc/grub.d/40_custom file because this file will remain un touched by updates and upgrades to the boot loader. In /etc/grub.d/40_custom add set superusers=”admin” then password admin after that save and exit the file and run the following command grub2-mkpasswd-… (allow tab completion to finish this command so that the system compatible script is run) the output of this command from grub2. Onwards need to be added to the end of the line password admin in /etc/grub.d/40_custom. After that the grub file need to be recompiled by running the command grub2-mkconfig –o /boot/grub2/grub.cfg for centos or update-grub¬ on debian.\nTo check this has taken affect\nThen save changes and reboot to confirm the alteration has taken affect, if the alteration was success when booting and wanting to change the grub setting you will need to supply the username admin and the encrypted password.\nProtecting Against Recovery Attack\nThese measures can aid in protection however, if a disk is used the recover Linux feature on the disk can be used to mount the file system and alter the GRUB setting from the disk. To protect against make any removable media have a lower boot priority than the boot drive and password protect the BIOS and boot option menu to stop someone who hasn’t got access altering the boot order and booting into a disk to make changes to the system.\nCheckInstall 如果你已经从它的源码运行“make install”安装了linux程序。想完整移除它将变得真的很麻烦，除非程序的开发者在Makefile里提供了uninstall的目标设置。否则你必须在安装前后比较你系统里文件的完整列表，然后手工移除所有在安装过程中加入的文件。\n这时候Checkinstall就可以派上使用。Checkinstall会跟踪install命令行所创建或修改的所有文件的路径(例如：“make install”、“make install_modules”等)并建立一个标准的二进制包，让你能用你发行版的标准包管理系统安装或卸载它，请参考其官方文档。\n安装Checkinstall：\n# apt install checkinstall  一旦checkinstall安装好，你就可以用下列格式创建一个特定的软件包\n# checkinstall   如果没有参数，默认安装命令“make install”将被使用。\n在这个例子里，我们将创建一个htop包，这是一个linux交互式文本模式进程查看器（类似 top）。\n首先，让我们从项目的官方网站下载源代码，作为一个好的习惯，我们存储源码包到/usr/local/src下，并解压它。\n# cd /usr/local/src # wget http://hisham.hm/htop/releases/1.0.3/htop-1.0.3.tar.gz # tar xzf htop-1.0.3.tar.gz # cd htop-1.0.3  让我们看看htop的安装命令是什么，以便我们能用Checkinstall命令调用它，如下面所示，htop用“make install”命令安装。\n# ./configure # make install  因此，要创建一个htop安装包，我们可以不带任何参数的调用checkinstall，这将使用“make install”命令创建一个包。在这个过程中， checkinstall命令会问你几个问题。\n简而言之，如下命令会创建一个htop包：\n# ./configure # checkinstall  然后checkinstall将根据你的linux系统是什么，自动地创建一个.rpm或者.deb包。\ngksudo/kdesudo Taken from here:\n You should never use normal sudo to start graphical applications as root. You should use gksudo (kdesudo on Kubuntu) to run such programs. gksudo sets HOME=/root, and copies .Xauthority to a tmp directory. This prevents files in your home directory becoming owned by root.\n Please note that this is primarily about configuration files. If you run Nautilus as root, even with gksu/gksudo, and you create a file or folder anywhere with it (including in your home directory), that file or folder will be owned by root. But if you run Nautilus (or most other graphical applications) as root with sudo, they may save their configuration files in your home directory (rather than root’s home directory). Those configuration files may be owned by root and inaccessible when you’re not running as root, which can severely mess up your settings, and may even keep some applications from working altogether.\nThe solution, once you have made this mistake, is to find the configuration files and delete them or chown them back to belonging your non-root user. Many such files start with a . or are contained in a directory that starts with a .. Some are located inside the .config folder in your home directory. To see files and folders that start with a . in Nautilus, press Ctrl+H (this shows hidden files.) To see them with ls, use the -a (or -A) flag.\nTo find if there are files not owned by you in your home directory, you can use the following command in a terminal:\nfind $HOME -not -user $USER -exec ls -lad {} \\; which will list all files under the home directory not owned by the user.\nman 手册页（man pages），即参考手册页（reference manual pages）的简称，是你进入 Linux 的钥匙。你想知道的一切都在那里，包罗万象。这套文档永远不会赢得普利策奖，但这套文档是相当准确和完整的。手册页是主要信源，其权威性是众所周知的。\n虽然它们是源头，但阅读起来并不是最令人愉快的。有一次，在很久以前的哲学课上，有人告诉我，阅读 亚里士多德 是最无聊的阅读。我不同意：说到枯燥的阅读，亚里士多德远远地排在第二位，仅次于手册页。\n乍一看，这些页面可能看起来并不完整，但是，不管你信不信，手册页并不是为了隐藏信息 —— 只是因为信息量太大，这些页面必须要有结构，而且信息是以尽可能简短的形式给出的。这些解释相当简略，需要一些时间来适应，但一旦你掌握了使用它们的技巧，你就会发现它们实际上是多么有用。\n入门 这些页面是通过一个叫做 man 的工具查看的，使用它的命令相当简单。在最简单的情况下，要使用 man，你要在命令行上输入 man，后面加一个空格和你想查询的命令，比如 ls 或 cp，像这样：\nman ls man 会打开 ls 命令的手册页。\n你可以用方向键上下移动，按 q 退出查看手册页。通常情况下，手册页是用 less 打开的，所以 less 命令的键盘快捷键在 man 中也可以使用。\n例如，你可以用 /search_term 来搜索一个特定的文本，等等。\n有一个关于手册页的介绍，这是一篇值得阅读介绍。它非常详细地说明了手册页是如何布局和组织的。\n要看这个页面，请打开一个终端，然后输入：\nman man 节 在你开始更深入地研究手册页之前，知道手册页有一个固定的页面布局和一个归档方案会有帮助。这可能会让新手感到困惑，因为我可以说：“看手册页中关于 ls 的 NAME 节（section）”，我也可以说：“看第 5 节（section）中的 passwd 的手册页。”\n这个词，“节（section）” 被用于两种不同的方式，但并不总是向新人解释其中的区别。\n我不确定为什么会出现这种混淆，但我在培训新用户和初级系统管理员时看到过几次这种混淆。我认为这可能是隧道视野，专注于一件事会使一个人忘记另一件事。一叶障目，不见泰山。\n对于那些已经知道其中的区别的人，你可以跳过这一小节。这一部分是针对那些刚接触到手册页的人。\n这就是区别：\n对于手册页\n单独的手册页是用来显示信息块的。例如，每个手册页都有一个“NAME”节，显示命令的名称和简短的描述。还会有另一个信息块，称为“SYNOPSIS”，显示该命令是如何使用的，以此类推。\n每个手册页都会有这些，以及其他的标题。这些在各个手册页上的节，或者说标题，有助于保持事情的一致性和信息的分工。\n对于手册\n使用“节”，如 “查看第 5 节中的 passwd 的手册页”，是指整个手册的内容。当我们只看一页时，很容易忽略这一点，但是 passwd 手册页是同一本手册的一部分，该手册还有 ls、rm、date、cal 等的手册页。\n整个 Linux 手册是巨大的；它有成千上万的手册页。其中一些手册页有专门的信息。有些手册页有程序员需要的信息，有些手册页有网络方面的独特信息，还有一些是系统管理员会感兴趣的。\n这些手册页根据其独特的目的被分组。想想看，把整个手册分成几个章节 —— 每章有一个特定的主题。有 9 个左右的章节（非常大的章节）。碰巧的是，这些章节被称为“节”。\n总结一下：\n 手册中单页（我们称之为“手册页”）的节是由标题定义的信息块。 这个大的手册（所有页面的集合）中的章节，刚好被称为“节”。  现在你知道区别了，希望本文的其余部分会更容易理解。\n手册页的节 你将会看到不同的手册页，所以让我们先研究一下各个页面的布局。\n手册页被分成几个标题，它们可能因提供者不同而不同，但会有相似之处。一般的分类如下：\n NAME（名称） SYNOPSIS（概要） DESCRIPTION（描述） EXAMPLES（例子） DIAGNOSTICS（诊断） FILES（文件） LIMITS（限制） PORTABILITY（可移植性） SEE ALSO（另见） HISTORY（历史） WARNING（警告）或BUGS（错误） NOTES（注意事项）  NAME - 在这个标题下是命令的名称和命令的简要描述。\nSYNOPSIS - 显示该命令的使用方法。例如，这里是 cal 命令的概要：\ncal [Month] [Year] 概要以命令的名称开始，后面是选项列表。概要采用命令行的一般形式；它显示了你可以输入的内容和参数的顺序。方括号中的参数（[]）是可选的；你可以不输入这些参数，命令仍然可以正常工作。不在括号内的项目必须使用。\n请注意，方括号只是为了便于阅读。当你输入命令时，不应该输入它们。\nDESCRIPTION - 描述该命令或工具的作用以及如何使用它。这一节通常以对概要的解释开始，并说明如果你省略任何一个可选参数会发生什么。对于长的或复杂的命令，这一节可能会被细分。\nEXAMPLES - 一些手册页提供了如何使用命令或工具的例子。如果有这一节，手册页会尝试给出一些简单的使用例子，以及更复杂的例子来说明如何完成复杂的任务。\nDIAGNOSTICS - 本节列出了由命令或工具返回的状态或错误信息。通常不显示不言自明的错误和状态信息。通常会列出可能难以理解的信息。\nFILES - 本节包含了 UNIX 用来运行这个特定命令的补充文件的列表。这里，“补充文件”是指没有在命令行中指定的文件。例如，如果你在看 passwd 命令的手册，你可能会发现 /etc/passwd 列在这一节中，因为 UNIX 是在这里存储密码信息。\nLIMITS - 本节描述了一个工具的限制。操作系统和硬件的限制通常不会被列出，因为它们不在工具的控制范围内。\nPORTABILITY - 列出其他可以使用该工具的系统，以及该工具的其他版本可能有什么不同。\nSEE ALSO - 列出包含相关信息的相关手册页。\nHISTORY - 提供命令的简要历史，如它第一次出现的时间。\nWARNING - 如果有这个部分，它包含了对用户的重要建议。\nNOTES - 不像警告那样严重，但也是重要的信息。\n同样，并不是所有的手册都使用上面列出的确切标题，但它们足够接近，可以遵循。\n手册的节 整个 Linux 手册集合的手册页传统上被划分为有编号的节：\n第 1 节：Shell 命令和应用程序\n第 2 节：基本内核服务 - 系统调用和错误代码\n第 3 节：为程序员提供的库信息\n第 4 节：网络服务 - 如果安装了 TCP/IP 或 NFS 设备驱动和网络协议\n第 5 节：文件格式 - 例如：显示 tar 存档的样子\n第 6 节：游戏\n第 7 节：杂项文件和文档\n第 8 节：系统管理和维护命令\n第 9 节：不知名的内核规格和接口\n将手册页分成这些组，可以使搜索更有效率。在我工作的地方，我有时会做一些编程工作，所以我花了一点时间看第 3 节的手册页。我也做一些网络方面的工作，所以我也知道要涉足网络部分。作为几个实验性机器的系统管理员，我在第 8 节花了很多时间。\n将手册网归入特定的节（章节），使搜索信息更加容易 —— 无论是对需要搜索的人，还是对进行搜索的机器。\n你可以通过名称旁边的数字来判断哪个手册页属于哪个部分。例如，如果你正在看 ls 的手册页，而页面的最上面写着。 LS(1)，那么你正在浏览第 1 节中的 ls 页面，该节包含关于 shell 命令和应用程序的页面。\n下面是另一个例子。如果你在看 passwd 的手册页，页面的顶部显示: PASSWD(1)，说明你正在阅读第 1 节中描述 passwd 命令如何更改用户账户密码的手册页。如果你看到 PASSWD(5)，那么你正在阅读关于密码文件和它是如何组成的的手册页。\npasswd 恰好是两个不同的东西：一个是命令的名称，一个是文件的名称。同样，第 1 节描述了命令，而第 5 节涉及文件格式。\n括号中的数字是重要的线索 —— 这个数字告诉你正在阅读的页面来自哪一节。\n搜索一个特定的节 基本命令：\nman -a name 将在每一节中搜索由 name 标识的手册页，按数字顺序逐一显示。要把搜索限制在一个特定的部分，请在 man 命令中使用一个参数，像这样：\nman 1 name 这个命令将只在手册页的第 1 节中搜索 name。使用我们前面的 passwd 例子，这意味着我们可以保持搜索的针对性。如果我想阅读 passwd 命令的手册页，我可以在终端输入以下内容：\nman 1 passwd man 工具将只在第 1 节中搜索 passwd 并显示它。它不会在任何其他节中寻找 passwd。\n这个命令的另一种方法是输入: man passwd.1。\n搜索包含某个关键词的所有手册页 如果你想获得包含某个关键词的手册页的列表，man 命令中的 -k 选项（通常称为标志或开关）可以派上用场。例如，如果你想看一个关于 ftp 的手册列表，你可以通过输入以下内容得到这个列表：\nman -k ftp 在接下来的列表中，你可以选择一个特定的手册页来阅读。\n在某些系统上，在 man -k 工作之前，系统管理员需要运行一个叫做 catman 的工具。\n了解手册的各个节 有两个有趣的工具可以帮助你搜索信息：whatis和 whereis。\nwhatis\n有的时候，我们完全可以得到我们需要的信息。我们需要的信息有很大的机会是可以找到的 —— 找到它可能是一个小问题。\n例如，如果我想看关于 passwd 文件的手册页，我在终端上输入：\nman passwd 我就会看到关于 passwd 命令所有信息的手册页，但没有关于 passwd 文件的内容。我知道 passwd 是一个命令，也有一个 passwd 文件，但有时，我可能会忘记这一点。这时我才意识到，文件结构在手册页中的不同节，所以我输入了：\nman 4 passwd 我得到这样的答复：\nNo manual entry for passwd in section 4 See 'man 7 undocumented' for help when manual pages are not available. 又是一次健忘的失误。文件结构在 System V UNIX 页面的第 4 节中。几年前，当我建立文件时，我经常使用 man 4 ...；这仍然是我的一个习惯。那么它在 Linux 手册中的什么地方呢？\n现在是时候调用 whatis 来纠正我了。为了做到这一点，我在我的终端中输入以下内容：\nwhatis passwd 然后我看到以下内容：\npasswd (1) - change user password passwd (1ssl) - compute password hashes passwd (5) - the password file 啊！passwd 文件的页面在第 5 节。现在没问题了，可以访问我想要的信息了：\nman 5 passwd 然后我被带到了有我需要的信息的手册页。\nwhatis 是一个方便的工具，可以用简短的一句话告诉你一个命令的作用。想象一下，你想知道 cal 是做什么的，而不想查看手册页。只要在命令提示符下键入以下内容。\nwhatis cal 你会看到这样的回应：\ncal (1) - displays a calendar and the date of Easter 现在你知道了 whatis 命令，我可以告诉你一个秘密 —— 有一个 man 命令的等价物。为了得到这个，我们使用 -f 开关：man -f ...。\n试试吧。在终端提示下输入 whatis cal。执行后就输入：man -f cal。两个命令的输出将是相同的。\nwhereis\nwhereis 命令的名字就说明了这一点 —— 它告诉你一个程序在文件系统中的位置。它也会告诉你手册页的存放位置。再以 cal 为例，我在提示符下输入以下内容：\nwhereis cal 我将看到这个：\ncal: /usr/bin/cal /usr/share/man/man1/cal.1.gz 仔细看一下这个回答。答案只在一行里，但它告诉我两件事：\n /usr/bin/cal 是 cal 程序所在的地方，以及 /usr/share/man/man1/cal.1.gz 是手册页所在的地方（我也知道手册页是被压缩的，但不用担心 —— man 命令知道如何即时解压）。  whereis 依赖于 PATH 环境变量；它只能告诉你文件在哪里，如果它们在你的 PATH 环境变量中。\n你可能想知道是否有一个与 whereis 相当的 man 命令。没有一个命令可以告诉你可执行文件的位置，但有一个开关可以告诉你手册页的位置。在这个例子中使用 date 命令，如果我们输入：\nwhereis date 在终端提示符下，我们会看到：\ndate: /usr/bin/date /usr/share/man/man1/date.1.gz 我们看到 date 程序在 /usr/bin/ 目录下，其手册页的名称和位置是：/usr/share/man/man1/date.1.gz。\n我们可以让 man 像 whereis 一样行事，最接近的方法是使用 -w 开关。我们不会得到程序的位置，但我们至少可以得到手册页的位置，像这样：\nman -w date 我们将看到这样的返回：\n/usr/share/man/man1/date.1.gz 你知道了 whatis 和 whereis，以及让 man 命令做同样（或接近）事情的方法。我展示了这两种方法，有几个不同的原因。\n多年来，我使用 whatis 和 whereis，因为它们在我的培训手册中。直到最近我才了解到 man -f ... 和 man -w ...。我确信我看了几百次 man 的手册页，但我从未注意到 -f 和 -w 开关。我总是在看手册页的其他东西（例如：man -k ...）。我只专注于我需要找到的东西，而忽略了其他的东西。一旦我找到了我需要的信息，我就会离开这个页面，去完成工作，而不去注意这个命令所提供的其他一些宝贝。\n这没关系，因为这部分就是手册页的作用：帮助你完成工作。\n直到最近我向别人展示如何使用手册页时，我才花时间去阅读 —— “看看还有什么可能” —— 我们才真正注意到关于 man 命令的 -f 和 -w 标记可以做什么的信息。\n不管你使用 Linux 多久了，或者多么有经验，总有一些新东西需要学习。\n手册页会告诉你在完成某项任务时可能需要知道的东西 —— 但它们也有很多内容 —— 足以让你看起来像个魔术师，但前提是你要花时间去读。\n结论 如果你花一些时间和精力在手册页上，你将会取得胜利。你对手册页的熟练程度，将在你掌握 Linux 的过程中发挥巨大作用。\ntldr Collaborative cheatsheets for console commands\n“TLDR” 是流行的互联网行话，意思是“太长不读（to long didn’t read）”。这就是他们创建 tldr 的想法。如果你觉得手册页太长而不想阅读，tldr 通过提供命令的实际例子而将其简化了。\nls ls 命令可以列出一个 POSIX 系统上的文件。这是一个简单的命令，但它经常被低估，不是它能做什么（因为它确实只做了一件事），而是你该如何优化对它的使用。\nGNU 还是 BSD？ 在了解 ls 的隐藏能力之前，你必须确定你正在运行哪个 ls 命令。有两个最流行的版本：包含在 GNU coreutils 包中的 GNU 版本，以及 BSD 版本。如果你正在运行 Linux，那么你很可能已经安装了 GNU 版本的 ls。如果你正在运行 BSD 或 MacOS，那么你有的是 BSD 版本。本文会介绍它们的不同之处。\n你可以使用 --version 选项找出你计算机上的版本：\n$ ls --version 如果它返回有关 GNU coreutils 的信息，那么你拥有的是 GNU 版本。如果它返回一个错误，你可能正在运行的是 BSD 版本（运行 man ls | head 以确定）。\n你还应该调查你的发行版可能具有哪些预设选项。终端命令的自定义通常放在 $HOME/.bashrc 或 $HOME/.bash_aliases 或 $HOME/.profile 中，它们是通过将 ls 别名化为更复杂的 ls 命令来完成的。例如：\nalias ls='ls --color' 发行版提供的预设非常有用，但它们确实很难分辨出哪些是 ls 本身的特性，哪些是它的附加选项提供的。你要是想要运行 ls 命令本身而不是它的别名，你可以用反斜杠“转义”命令：\n$ \\ls 分类 单独运行 ls 会以适合你终端的列数列出文件：\n$ ls ~/example bunko jdk-10.0.2 chapterize otf2ttf.ff despacer overtar.sh estimate.sh pandoc-2.7.1 fop-2.3 safe_yaml games tt 这是有用的信息，但所有这些文件看起来基本相同，没有方便的图标来快速表示出哪个是目录、文本文件或图像等等。\n使用 -F（或 GNU 上的长选项 --classify）以在每个条目之后显示标识文件类型的指示符：\n$ ls ~/example bunko jdk-10.0.2/ chapterize* otf2ttf.ff* despacer* overtar.sh* estimate.sh pandoc@ fop-2.3/ pandoc-2.7.1/ games/ tt* 使用此选项，终端中列出的项目使用简写符号来按文件类型分类：\n 斜杠（/）表示目录（或“文件夹”）。 星号（*）表示可执行文件。这包括二进制文件（编译代码）以及脚本（具有可执行权限的文本文件）。 符号（@）表示符号链接（或“别名”）。 等号（=）表示套接字。 在 BSD 上，百分号（%）表示涂改whiteout（某些文件系统上的文件删除方法）。 在 GNU 上，尖括号（）表示门door（Illumos 和 Solaris上的进程间通信）。 竖线（|）表示 FIFO 管道。 这个选项的一个更简单的版本是 -p，它只区分文件和目录。  （LCTT 译注：在支持彩色的终端上，使用 --color 选项可以以不同的颜色来区分文件类型，但要注意如果将输出导入到管道中，则颜色消失。）\n长列表 从 ls 获取“长列表”的做法是如此常见，以至于许多发行版将 ll 别名为 ls -l。长列表提供了许多重要的文件属性，例如权限、拥有每个文件的用户、文件所属的组、文件大小（以字节为单位）以及文件上次更改的日期：\n$ ls -l -rwxrwx---. 1 seth users 455 Mar 2 2017 estimate.sh -rwxrwxr-x. 1 seth users 662 Apr 29 22:27 factorial -rwxrwx---. 1 seth users 20697793 Jun 29 2018 fop-2.3-bin.tar.gz -rwxrwxr-x. 1 seth users 6210 May 22 10:22 geteltorito -rwxrwx---. 1 seth users 177 Nov 12 2018 html4mutt.sh [...] 如果你不想以字节为单位，请添加 -h 标志（或 GNU 中的 --human）以将文件大小转换为更加人性化的表示方法：\n$ ls --human -rwxrwx---. 1 seth users 455 Mar 2 2017 estimate.sh -rwxrwxr-x. 1 seth seth 662 Apr 29 22:27 factorial -rwxrwx---. 1 seth users 20M Jun 29 2018 fop-2.3-bin.tar.gz -rwxrwxr-x. 1 seth seth 6.1K May 22 10:22 geteltorito -rwxrwx---. 1 seth users 177 Nov 12 2018 html4mutt.sh 要看到更少的信息，你可以带有 -o 选项只显示所有者的列，或带有 -g 选项只显示所属组的列：\n$ ls -o -rwxrwx---. 1 seth 455 Mar 2 2017 estimate.sh -rwxrwxr-x. 1 seth 662 Apr 29 22:27 factorial -rwxrwx---. 1 seth 20M Jun 29 2018 fop-2.3-bin.tar.gz -rwxrwxr-x. 1 seth 6.1K May 22 10:22 geteltorito -rwxrwx---. 1 seth 177 Nov 12 2018 html4mutt.sh 也可以将两个选项组合使用以显示两者。\n时间和日期格式 ls 的长列表格式通常如下所示：\n-rwxrwx---. 1 seth users 455 Mar 2 2017 estimate.sh -rwxrwxr-x. 1 seth users 662 Apr 29 22:27 factorial -rwxrwx---. 1 seth users 20697793 Jun 29 2018 fop-2.3-bin.tar.gz -rwxrwxr-x. 1 seth users 6210 May 22 10:22 geteltorito -rwxrwx---. 1 seth users 177 Nov 12 2018 html4mutt.sh 月份的名字不便于排序，无论是通过计算还是识别（取决于你的大脑是否倾向于喜欢字符串或整数）。你可以使用 --time-style 选项和格式名称更改时间戳的格式。可用格式为：\n full-iso：ISO 完整格式（1970-01-01 21:12:00） long-iso：ISO 长格式（1970-01-01 21:12） iso：iso 格式（01-01 21:12） locale：本地化格式（使用你的区域设置） posix-STYLE：POSIX 风格（用区域设置定义替换 STYLE）  你还可以使用 date 命令的正式表示法创建自定义样式。\n按时间排序 通常，ls 命令按字母顺序排序。你可以使用 -t 选项根据文件的最近更改的时间（最新的文件最先列出）进行排序。\n例如：\n$ touch foo bar baz $ ls bar baz foo $ touch foo $ ls -t foo bar baz 列出方式 ls 的标准输出平衡了可读性和空间效率，但有时你需要按照特定方式排列的文件列表。\n要以逗号分隔文件列表，请使用 -m：\nls -m ~/example bar, baz, foo 要强制每行一个文件，请使用 -1 选项（这是数字 1，而不是小写的 L）：\n$ ls -1 ~/bin/ bar baz foo 要按文件扩展名而不是文件名对条目进行排序，请使用 -X（这是大写 X）：\n$ ls bar.xfc baz.txt foo.asc $ ls -X foo.asc baz.txt bar.xfc 隐藏杂项 在某些 ls 列表中有一些你可能不关心的条目。例如，元字符 . 和 .. 分别代表“本目录”和“父目录”。如果你熟悉在终端中如何切换目录，你可能已经知道每个目录都将自己称为 .，并将其父目录称为 ..，因此当你使用 -a 选项显示隐藏文件时并不需要它经常提醒你。\n要显示几乎所有隐藏文件（. 和 .. 除外），请使用 -A 选项：\n$ ls -a . .. .android .atom .bash_aliases [...] $ ls -A .android .atom .bash_aliases [...] 有许多优秀的 Unix 工具有保存备份文件的传统，它们会在保存文件的名称后附加一些特殊字符作为备份文件。例如，在 Vim 中，备份会以在文件名后附加 ~ 字符的文件名保存。\n这些类型的备份文件已经多次使我免于愚蠢的错误，但是经过多年享受它们提供的安全感后，我觉得不需要用视觉证据来证明它们存在。我相信 Linux 应用程序可以生成备份文件（如果它们声称这样做的话），我很乐意相信它们存在 —— 而不用必须看到它们。\n要隐藏备份文件，请使用 -B 或 --ignore-backups 隐藏常用备份格式（此选项在 BSD 的 ls 中不可用）：\n$ ls bar.xfc baz.txt foo.asc~ foo.asc $ ls -B bar.xfc baz.txt foo.asc 当然，备份文件仍然存在；它只是过滤掉了，你不必看到它。\n除非另有配置，GNU Emacs 在文件名的开头和结尾添加哈希字符（＃）来保存备份文件（#file＃）。其他应用程序可能使用不同的样式。使用什么模式并不重要，因为你可以使用 --hide 选项创建自己的排除项：\n$ ls bar.xfc baz.txt #foo.asc# foo.asc $ ls --hide=\"#*#\" bar.xfc baz.txt foo.asc 递归地列出目录 除非你在指定目录上运行 ls，否则子目录的内容不会与 ls 命令一起列出：\n$ ls -F example/ quux* xyz.txt $ ls -R quux xyz.txt ./example: bar.xfc baz.txt #foo.asc# foo.asc 使用别名使其永久化 ls 命令可能是 shell 会话期间最常使用的命令。这是你的眼睛和耳朵，为你提供上下文信息和确认命令的结果。虽然有很多选项很有用，但 ls 之美的一部分就是简洁：两个字符和回车键，你就知道你到底在哪里以及附近有什么。如果你不得不停下思考（更不用说输入）几个不同的选项，它会变得不那么方便，所以通常情况下，即使最有用的选项也不会用了。\n解决方案是为你的 ls 命令添加别名，以便在使用它时，你可以获得最关心的信息。\n要在 Bash shell 中为命令创建别名，请在主目录中创建名为 .bash_aliases 的文件（必须在开头包含 .）。 在此文件中，列出要创建的别名，然后是要为其创建别名的命令。例如：\nalias ls='ls -A -F -B --human --color' 这一行导致你的 Bash shell 将 ls 命令解释为 ls -A -F -B --human --color。\n你不必仅限于重新定义现有命令，还可以创建自己的别名：\nalias ll='ls -l' alias la='ls -A' alias lh='ls -h' 要使别名起作用，shell 必须知道 .bash_aliases 配置文件存在。在编辑器中打开 .bashrc 文件（如果它不存在则创建它），并包含以下代码块：\nif [ -e $HOME/.bash_aliases ]; then source $HOME/.bash_aliases fi 每次加载 .bashrc（这是一个新的 Bash shell 启动的时候），Bash 会将 .bash_aliases 加载到你的环境中。你可以关闭并重新启动 Bash 会话，或者直接强制它执行此操作：\n$ source ~/.bashrc 如果你忘了你是否有别名命令，which 命令可以告诉你：\n$ which ls alias ls='ls -A -F -B --human --color' /usr/bin/ls 如果你将 ls 命令别名为带有选项的 ls 命令，则可以通过将反斜杠前缀到 ls 前来覆盖你的别名。例如，在示例别名中，使用 -B 选项隐藏备份文件，这意味着无法使用 ls 命令显示备份文件。 可以覆盖该别名以查看备份文件：\n$ ls bar baz foo $ \\ls bar baz baz~ foo 做一件事，把它做好 ls 命令有很多选项，其中许多是特定用途的或高度依赖于你所使用的终端。在 GNU 系统上查看 info ls，或在 GNU 或 BSD 系统上查看 man ls 以了解更多选项。\n你可能会觉得奇怪的是，一个以每个工具“做一件事，把它做好”的前提而闻名的系统会让其最常见的命令背负 50 个选项。但是 ls 只做一件事：它列出文件，而这 50 个选项允许你控制接收列表的方式，ls 的这项工作做得非常、非常好。\nexa A modern replacement for ‘ls’.\ndu (Disk Usage) 在 Linux 中使用 ls 命令 列出的目录内容中，目录的大小仅显示 4KB。这是一个默认的大小，是用来存储磁盘上存储目录的元数据的大小。\ndu 命令 表示 磁盘使用率。这是一个标准的 Unix 程序，用于估计当前工作目录中的文件空间使用情况。\n它使用递归方式总结磁盘使用情况，以获取目录及其子目录的大小。\n$ du -hs --max-depth=0 /path/dir  du – 这是一个命令 -h – 以易读的格式显示大小 (例如 1K 234M 2G) -s – 仅显示每个参数的总数 --max-depth=N – 目录的打印深度  NCurses Disk Usage Ncdu is a disk usage analyzer with an ncurses interface.\nncdu 命令旨在提供一份关于你在硬盘上使用的空间的交互式报告。\ngdu Fast disk usage analyzer with console interface written in Go\nDiff diff是Unix系统的一个很重要的工具程序。\n它用来比较两个文本文件的差异，是代码版本管理的基石之一。你在命令行下，输入：\n$ diff   diff就会告诉你，这两个文件有何差异。它的显示结果不太好懂，下面我就来说明，如何读懂diff。\n三种格式 由于历史原因，diff有三种格式：\n 正常格式（normal diff） 上下文格式（context diff） 合并格式（unified diff）  我们依次来看。\n示例文件 为了便于讲解，先新建两个示例文件。\n第一个文件叫做f1，内容是每行一个a，一共7行。\na a a a a a a 第二个文件叫做f2，修改f1而成，第4行变成b，其他不变。\na a a b a a a 正常格式 现在对f1和f2进行比较：\n$ diff f1 f2 这时，diff就会显示正常格式的结果：\n4c4 b 第一行是一个提示，用来说明变动位置。\n4c4 它分成三个部分：前面的\"4\"，表示f1的第4行有变化；中间的\"c\"表示变动的模式是内容改变（change），其他模式还有\"增加\"（a，代表addition）和\"删除\"（d，代表deletion）；后面的\"4\"，表示变动后变成f2的第4行。\n第二行分成两个部分。\n前面的小于号，表示要从f1当中去除该行（也就是第4行），后面的\"a\"表示该行的内容。\n第三行用来分割f1和f2。\n--- 第四行，类似于第二行。\n b 前面的大于号表示f2增加了该行，后面的\"b\"表示该行的内容。\n最早的Unix（即AT\u0026T版本的Unix），使用的就是这种格式的diff。\n上下文格式 上个世纪80年代初，加州大学伯克利分校推出BSD版本的Unix时，觉得diff的显示结果太简单，最好加入上下文，便于了解发生的变动。因此，推出了上下文格式的diff。\n它的使用方法是加入c参数（代表context）。\n$ diff -c f1 f2 显示结果如下：\n*** f1 2012-08-29 16:45:41.000000000 +0800 --- f2 2012-08-29 16:45:51.000000000 +0800 *************** *** 1,7 **** a a a !a a a a --- 1,7 ---- a a a !b a a a 这个结果分成四个部分。\n第一部分的两行，显示两个文件的基本情况：文件名和时间信息。\n*** f1 2012-08-29 16:45:41.000000000 +0800 --- f2 2012-08-29 16:45:51.000000000 +0800 ***表示变动前的文件，---表示变动后的文件。\n第二部分是15个星号，将文件的基本情况与变动内容分割开。\n*************** 第三部分显示变动前的文件，即f1。\n*** 1,7 **** a a a !a a a a 这时不仅显示发生变化的第4行，还显示第4行的前面三行和后面三行，因此一共显示7行。所以，前面的*** 1,7 ****就表示，从第1行开始连续7行。\n另外，文件内容的每一行最前面，还有一个标记位。如果为空，表示该行无变化；如果是感叹号（!），表示该行有改动；如果是减号（-），表示该行被删除；如果是加号（+），表示该行为新增。\n第四部分显示变动后的文件，即f2。\n--- 1,7 ---- a a a !b a a a 除了变动行（第4行）以外，也是上下文各显示三行，总共显示7行。\n合并格式 如果两个文件相似度很高，那么上下文格式的diff，将显示大量重复的内容，很浪费空间。1990年，GNU diff率先推出了\"合并格式\"的diff，将f1和f2的上下文合并在一起显示。\n它的使用方法是加入u参数（代表unified）。\n$ diff -u f1 f2 显示结果如下：\n--- f1 2012-08-29 16:45:41.000000000 +0800 +++ f2 2012-08-29 16:45:51.000000000 +0800 @@ -1,7 +1,7 @@ a a a -a +b a a a 它的第一部分，也是文件的基本信息。\n--- f1 2012-08-29 16:45:41.000000000 +0800 +++ f2 2012-08-29 16:45:51.000000000 +0800 ---表示变动前的文件，+++表示变动后的文件。\n第二部分，变动的位置用两个@作为起首和结束。\n@@ -1,7 +1,7 @@ 前面的\"-1,7\"分成三个部分：减号表示第一个文件（即f1），“1\"表示第1行，“7\"表示连续7行。合在一起，就表示下面是第一个文件从第1行开始的连续7行。同样的，\"+1,7\"表示变动后，成为第二个文件从第1行开始的连续7行。\n第三部分是变动的具体内容。\na a a -a +b a a a 除了有变动的那些行以外，也是上下文各显示3行。它将两个文件的上下文，合并显示在一起，所以叫做\"合并格式”。每一行最前面的标志位，空表示无变动，减号表示第一个文件删除的行，加号表示第二个文件新增的行。\ngit格式 版本管理系统git，使用的是合并格式diff的变体。\n$ git diff 显示结果如下：\ndiff --git a/f1 b/f1 index 6f8a38c..449b072 100644 --- a/f1 +++ b/f1 @@ -1,7 +1,7 @@ a a a -a +b a a a 第一行表示结果为git格式的diff。\ndiff --git a/f1 b/f1 进行比较的是，a版本的f1（即变动前）和b版本的f1（即变动后）。\n第二行表示两个版本的git哈希值（index区域的6f8a38c对象，与工作目录区域的449b072对象进行比较），最后的六位数字是对象的模式（普通文件，644权限）。　index 6f8a38c..449b072 100644 第三行表示进行比较的两个文件。\n--- a/f1 +++ b/f1 ---表示变动前的版本，+++表示变动后的版本。\n后面的行都与官方的合并格式diff相同。\n@@ -1,7 +1,7 @@ a a a -a +b a a a Crontab 使用 crontab 命令来执行定时任务。所谓定时任务，就是未来的某个或多个时点，预定要执行的任务，比如每五分钟收一次邮件、每天半夜两点分析一下日志等等。\nInstalling $ sudo apt install cronie Running $ systemctl enable crond.service $ systemctl start crond.service 命令详解 crontab 命令通过 /etc/cron.allow 和 /etc/cron.deny 文件来限制某些用户是否可以使用 crontab 命令：\n 当系统中有 /etc/cron.allow 文件时，只有写入此文件的用户可以使用 crontab 命令，没有写入的用户不能使用 crontab 命令。 当系统中只有 /etc/cron.deny 文件时，写入此文件的用户不能使用 crontab 命令，没有写入文件的用户可以使用 crontab 命令。 /etc/cron.allow 文件比 /etc/cron.deny 文件的优先级高，Linux 系统中默认只有 /etc/cron.deny 文件。  crontab 命令的基本格式如下：\ncrontab [选项] [file] 注意，这里的 file 指的是命令文件的名字，表示将 file 作为 crontab 的任务列表文件并载入 crontab，若在命令行中未指定文件名，则此命令将接受标准输入（键盘）上键入的命令，并将它们键入 crontab。\n常用选项    选项 功能     -u user 用来设定某个用户的 crontab 服务，例如 “-u demo” 表示设备 demo 用户的 crontab 服务，此选项一般有 root 用户来运行。   -e 编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。   -l 显示某用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。   -r 从 /var/spool/cron 删除某用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。   -i 在删除用户的 crontab 文件时，给确认提示。    crontab 文件格式 * * * * * 执行的任务 执行的任务字段既可以定时执行系统命令，也可以定时执行某个 Shell 脚本。\n执行时间\n   项目 含义 范围     第一个”*\" 一小时当中的第几分钟（minute） 0~59   第二个\"*\" 一天当中的第几小时（hour） 0~23   第三个\"*\" 一个月当中的第几天（day） 1~31   第四个\"*\" 一年当中的第几个月（month） 1~12   第五个\"*\" 一周当中的星期几（week） 0~7（0和7都代表星期日）    时间特殊符号\n   特殊符号 含义     *（星号） 代表任何时间。比如第一个\"*“就代表一小时种每分钟都执行一次的意思。   ,（逗号） 代表不连续的时间。比如\"0 8，12，16***命令\"就代表在每天的 8 点 0 分、12 点 0 分、16 点 0 分都执行一次命令。   -（中杠） 代表连续的时间范围。比如\"0 5 ** 1-6命令”，代表在周一到周六的凌晨 5 点 0 分执行命令。   /（正斜线） 代表每隔多久执行一次。比如\"*/10****命令\"，代表每隔 10 分钟就执行一次命令。    当“crontab -e”编辑完成之后，一旦保存退出，那么这个定时任务实际就会写入 /var/spool/cron/ 目录中，每个用户的定时任务用自己的用户名进行区分。而且 crontab 命令只要保存就会生效，只要 crond 服务是启动的。\ncrontab举例\n   时间 含义     45 22 ***命令 在每天 22 点 45 分执行命令   0 17 ** 1命令 在每周一的 17 点 0 分执行命令   0 5 1，15**命令 在每月 1 日和 15 日的凌晨 5 点 0 分执行命令   40 4 ** 1-5命令 在每周一到周五的凌晨 4 点 40 分执行命令   */10 4 ***命令 在每天的凌晨 4 点，每隔 10 分钟执行一次命令   0 0 1，15 * 1命令 在每月 1 日和 15 日，每周一 0 点 0 分都会执行命令    注意事项\n 6 个选项都不能为空，必须填写。如果不确定，则使用“*”代表任意时间。 crontab 定时任务的最小有效时间是分钟，最大有效时间是月。像 2018 年某时执行、3 点 30 分 30 秒这样的时间都不能被识别。 在定义时间时，日期和星期最好不要在一条定时任务中出现，因为它们都以天为单位，非常容易让管理员混淆。 在定时任务中，不管是直接写命令，还是在脚本中写命令，最好都使用绝对路径。有时使用相对路径的命令会报错。  run a script on startup Put the script in the appropriate user’s cron table (i. e. the crontab) with a schedule of @reboot.\nA user can edit its cron table with crontab -e.\nAn example which will run /path/to/script.sh at startup:\n@reboot /path/to/script.sh If you need to run it as root, don’t use @reboot sudo /path/to/script.sh; use sudo crontab -eu root to edit root’s crontab.\nps 简介 要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而 ps 命令（Process Status）就是最基本同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。总之大部分信息都是可以通过执行该命令得到的。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些进程，如果想要动态的显示进程信息，就可以使用top命令。\nlinux上进程有5种状态：\n  就绪状态和运行状态\n就绪状态的状态标志state的值为TASK_RUNNING。此时，程序已被挂入运行队列，处于准备运行状态。一旦获得处理器使用权，即可进入运行状态。\n当进程获得处理器而运行时 ，state的值仍然为TASK_RUNNING，并不发生改变；但Linux会把一个专门用来指向当前运行任务的指针current指向它，以表示它是一个正在运行的进程。\n  可中断等待状态\n状态标志state的值为TASK_INTERRUPTIBL。此时，由于进程未获得它所申请的资源而处在等待状态。一旦资源有效或者有唤醒信号，进程会立即结束等待而进入就绪状态。\n  不可中断等待状态\n状态标志state的值为TASK_UNINTERRUPTIBL。此时，进程也处于等待资源状态。一旦资源有效，进程会立即进入就绪状态。这个等待状态与可中断等待状态的区别在于：处于TASK_UNINTERRUPTIBL状态的进程不能被信号量或者中断所唤醒，只有当它申请的资源有效时才能被唤醒。\n这个状态被应用在内核中某些场景中，比如当进程需要对磁盘进行读写，而此刻正在DMA中进行着数据到内存的拷贝，如果这时进程休眠被打断（比如强制退出信号）那么很可能会出现问题，所以这时进程就会处于不可被打断的状态下。\n  停止状态\n状态标志state的值为TASK_STOPPED。当进程收到一个SIGSTOP信号后，就由运行状态进入停止状态，当受到一个SIGCONT信号时，又会恢复运行状态。这种状态主要用于程序的调试，又被叫做“暂停状态”、“挂起状态”。\n  中止状态\n状态标志state的值为TASK_DEAD。进程因某种原因而中止运行，进程占有的所有资源将被回收，除了task_struct结构（以及少数资源）以外，并且系统对它不再予以理睬，所以这种状态也叫做“僵死状态”，进程成为僵尸进程。\n  ps 标识进程状态对应的 5 种状态码：\n R：就绪状态和运行状态 runnable (on run queue) S：可中断等待状态 sleeping D：不可中断等待状态 uninterruptible sleep (usually IO) T：停止状态 traced or stopped Z：中止状态 a defunct (”zombie”) process  ps 标识进程的其他状态码：\n X：死掉的进程 Dead （应该不会出现） W：内存交互状态Paging （从 2.6 内核开始无效） N：高优先级 ：低优先级 s：包含子进程 L：被锁入内存 l：多线程状态 +：前台进程  命令参数 在不同的 Linux 发行版上，ps 命令的语法各不相同，为此，Linux 采取了一个折中的方法，即融合各种不同的风格，兼顾那些已经习惯了其它系统上使用 ps 命令的用户。ps命令支持三种使用的语法格式：\n UNIX 风格，选项可以组合在一起，并且选项前必须有“-”连字符； BSD 风格，选项可以组合在一起，但是选项前不能有“-”连字符； GNU 风格的选项，选项前有两个“-”连字符；  ps 命令常用的参数：\nps -a 显示所有终端下执行的进程，包含其他用户的进程 ps -A 显示所有进程 ps -e 和-A功能一样 ps -H 显示树状结构，表示程序间的相互关系 ps -f 全格式显示进程 ps a 显示当前终端下执行的进程 ps c 显示进程的真实名称 ps e 列出程序所使用的环境变量 ps f 用ASCII字符显示树状结构，表达程序间的相互关系 ps x 显示所有进程，无论是否运行在终端上 ps u 显示用户相关的进程或者与用户相关的属性 ps r 只显示正在运行的进程 使用实例 大家如果执行 man ps 命令，则会发现 ps 命令的帮助为了适应不同的类 UNIX 系统，可用格式非常多，不方便记忆。所以，我建议大家记忆几个固定选项即可。\nps aux 查看系统中所有的进程\n# ps aux USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.2 2872 1416 ? Ss Jun04 0:02 /sbin/init root 2 0.0 0.0 0 0 ? S Jun04 0:00 [kthreadd] root 3 0.0 0.0 0 0 ? S Jun04 0:00 [migration/0] root 4 0.0 0.0 0 0 ? S Jun04 0:00 [ksoftirqd/0] …省略部分输出… 输出信息中各列的具体含义：\n   表头 含义     USER 该进程是由哪个用户产生的。   PID 进程的 ID。   %CPU 该进程占用 CPU 资源的百分比，占用的百分比越高，进程越耗费资源。   %MEM 该进程占用物理内存的百分比，占用的百分比越高，进程越耗费资源。   VSZ 该进程占用虚拟内存的大小，单位为 KB。   RSS 该进程占用实际物理内存的大小，单位为 KB。   TTY 该进程是在哪个终端运行的。其中，tty1 ~ tty7 代表本地控制台终端（可以通过 Alt+F1 ~ F7 快捷键切换不同的终端），tty1~tty6 是本地的字符界面终端，tty7 是图形终端。pts/0 ~ 255 代表虚拟终端，一般是远程连接的终端，第一个远程连接占用 pts/0，第二个远程连接占用 pts/1，依次増长。   STAT 进程状态。   START 该进程的启动时间。   TIME 该进程占用 CPU 的运算时间，注意不是系统时间。   COMMAND 产生此进程的命令名。    ps -le 查看系统中所有的进程\nps aux 命令可以看到系统中所有的进程，ps -le 命令也能看到系统中所有的进程。由于 -l 选项的作用，所以 ps -le 命令能够看到更加详细的信息，比如父进程的 PID、优先级等。但是这两个命令的基本作用是一致的，掌握其中一个就足够了。\n# ps -le F S UID PID PPID C PRI Nl ADDR SZ WCHAN TTY TIME CMD 4 S 0 1 0 0 80 0 - 718 - ? 00:00:02 init 1 S 0 2 0 0 80 0 - 0 - ? 00:00:00 kthreadd 1 S 0 3 2 0 -40 - - 0 - ? 00:00:00 migration/0 1 S 0 4 2 0 80 0 - 0 - ? 00:00:00 ksoflirqd/0 1 S 0 5 2 0 -40 - - 0 - ? 00:00:00 migration/0 …省略部分输出… 输出信息中各列的含义：\n   表头 含义     F 进程标志，说明进程的权限，常见的标志有两个: 1：进程可以被复制，但是不能被执行；4：进程使用超级用户权限；   S 进程状态。具体的状态和\"psaux\"命令中的 STAT 状态一致；   UID 运行此进程的用户的 ID；   PID 进程的 ID；   PPID 父进程的 ID；   C 该进程的 CPU 使用率，单位是百分比；   PRI 进程的优先级，数值越小，该进程的优先级越高，越早被 CPU 执行；   NI 进程的优先级，数值越小，该进程越早被执行；   ADDR 该进程在内存的哪个位置；   SZ 该进程占用多大内存；   WCHAN 该进程是否运行。\"-“代表正在运行；   TTY 该进程由哪个终端产生；   TIME 该进程占用 CPU 的运算时间，注意不是系统时间；   CMD 产生此进程的命令名；    ps -l 查看当前 Shell 产生的进程\n# ps -l F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD 4 S 0 18618 18614 0 80 0 - 1681 - pts/1 00:00:00 bash 4 R 0 18683 18618 4 80 0 - 1619 - pts/1 00:00:00 ps top 简介 top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。\ntop显示系统当前的进程和其他状况，是一个动态显示过程，即可以通过用户按键来不断刷新当前状态。如果在前台执行该命令，它将独占前台，直到用户终止该程序为止。\n比较准确的说，top命令提供了实时的对系统处理器的状态监视。它将显示系统中CPU最“敏感”的任务列表。该命令可以按CPU使用、内存使用和执行时间对任务进行排序；而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定。\n命令参数 top 命令的基本格式如下：\n#top [选项] 选项：\n -d 秒数：指定 top 命令每隔几秒更新。默认是 3 秒； -b：使用批处理模式输出。一般和”-n\"选项合用，用于把 top 命令重定向到文件中； -n 次数：指定 top 命令执行的次数。一般和\"-b\"选项合用； -p 进程PID：仅查看指定 ID 的进程； -s：使 top 命令在安全模式中运行，避免在交互模式中出现错误； -u 用户名：只监听某个用户的进程；  交互操作指令 在 top 命令的显示窗口中，还可以使用如下按键，进行一下交互操作：\n ? 或 h：显示交互模式的帮助 P：按照 CPU 的使用率排序，默认就是此选项 M：按照内存的使用率排序 N：按照 PID 排序 T：按照 CPU 的累积运算时间排序，也就是按照 TIME+ 项排序 k：按照 PID 给予某个进程一个信号。一般用于中止某个进程，信号 9 是强制中止的信号 r：按照 PID 给某个进程重设优先级（Nice）值 ：立即刷新 s：设置刷新时间间隔 c：显示命令完全模式 t:：显示或隐藏进程和CPU状态信息 m：显示或隐藏内存状态信息 l：显示或隐藏uptime信息 f：增加或减少进程显示标志 S：累计模式，会把已完成或退出的子进程占用的CPU时间累计到父进程的TIME+ u：指定显示用户进程 i：只显示正在运行的进程 W：保存对top的设置到文件 ~/.toprc，下次启动将自动调用toprc文件的设置。 q：退出  使用实例 # top top - 12:26:46 up 1 day, 13:32, 2 users, load average: 0.00, 0.00, 0.00 Tasks: 95 total, 1 running, 94 sleeping, 0 stopped, 0 zombie Cpu(s): 0.1%us, 0.1%sy, 0.0%ni, 99.7%id, 0.1%wa, 0.0%hi, 0.1%si, 0.0%st Mem: 625344k total, 571504k used, 53840k free, 65800k buffers Swap: 524280k total, 0k used, 524280k free, 409280k cached PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 19002 root 20 0 2656 1068 856 R 0.3 0.2 0:01.87 top 1 root 20 0 2872 1416 1200 S 0.0 0.2 0:02.55 init 2 root 20 0 0 0 0 S 0.0 0.0 0:00.03 kthreadd 第一行为任务队列信息\n   内 容 说 明     12:26:46 系统当前时间   up 1 day, 13:32 系统的运行时间.本机己经运行 1 天 13 小时 32 分钟   2 users 当前登录了两个用户   load average: 0.00,0.00，0.00 系统在之前 1 分钟、5 分钟、15 分钟的平均负载。如果 CPU 是单核的，则这个数值超过 1 就是高负载：如果 CPU 是四核的，则这个数值超过 4 就是高负载 （这个平均负载完全是依据个人经验来进行判断的，一般认为不应该超过服务器 CPU 的核数）    第二行为进程信息\n   内 容 说 明     Tasks: 95 total 系统中的进程总数   1 running 正在运行的进程数   94 sleeping 睡眠的进程数   0 stopped 正在停止的进程数   0 zombie 僵尸进程数。如果不是 0，则需要手工检查僵尸进程    第三行为 CPU 信息\n   内 容 说 明     Cpu(s): 0.1 %us 用户模式占用的 CPU 百分比   0.1%sy 系统模式占用的 CPU 百分比   0.0%ni 改变过优先级的用户进程占用的 CPU 百分比   99.7%id 空闲 CPU 占用的 CPU 百分比   0.1%wa 等待输入/输出的进程占用的 CPU 百分比   0.0%hi 硬中断请求服务占用的 CPU 百分比   0.1%si 软中断请求服务占用的 CPU 百分比   0.0%st st（steal time）意为虚拟时间百分比，就是当有虚拟机时，虚拟 CPU 等待实际 CPU 的时间百分比    第四行为物理内存信息\n   内 容 说 明     Mem: 625344k total 物理内存的总量，单位为KB   571504k used 己经使用的物理内存数量   53840k free 空闲的物理内存数量。我们使用的是虚拟机，共分配了 628MB内存，所以只有53MB的空闲内存   65800k buffers/cache 作为缓冲的内存数量    缓冲（buffer）和缓存（cache）的区别：\n 缓存（cache）是在读取硬盘中的数据时，把最常用的数据保存在内存的缓存区中，再次读取该数据时，就不去硬盘中读取了，而在缓存中读取。 缓冲（buffer）是在向硬盘写入数据时，先把数据放入缓冲区,然后再一起向硬盘写入，把分散的写操作集中进行，减少磁盘碎片和硬盘的反复寻道，从而提高系统性能。  简单来说，缓存（cache）是用来加速数据从硬盘中\"读取\"的，而缓冲（buffer）是用来加速数据\"写入\"硬盘的。\n第五行为交换分区（swap）信息\n   内 容 说 明     Swap: 524280k total 交换分区（虚拟内存）的总大小   Ok used 已经使用的交换分区的大小   524280k free 空闲交换分区的大小   409280k cached 作为缓存的交换分区的大小    第六行为系统进程信息\n再来看 top 命令的第二部分输出，主要是系统进程信息，各个字段的含义如下：\n PID：进程的 ID。 USER：该进程所属的用户。 PR：优先级，数值越小优先级越高。 NI：优先级，数值越小、优先级越高。 VIRT：该进程使用的虚拟内存的大小，单位为 KB。 RES：该进程使用的物理内存的大小，单位为 KB。 SHR：共享内存大小，单位为 KB。 S：进程状态。 %CPU：该进程占用 CPU 的百分比。 %MEM：该进程占用内存的百分比。 TIME+：该进程共占用的 CPU 时间。 COMMAND：进程的命令名。  htop htop 是一个 Linux 下的交互式的进程浏览器，可以用来替换Linux下的top命令。\n与Linux传统的top相比，htop更加人性化。它可让用户交互式操作，支持颜色主题，可横向或纵向滚动浏览进程列表，并支持鼠标操作。\nbpytop Linux/OSX/FreeBSD resource monitor\nlsof 简介 lsof 命令，“list opened files”的缩写，直译过来，就是列举系统中已经被打开的文件。通过 lsof 命令，我们就可以根据文件找到对应的进程信息，也可以根据进程信息找到进程打开的文件。\n在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。如传输控制协议 (TCP) 和用户数据报协议 (UDP) 套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该文件描述符为应用程序与基础操作系统之间的交互提供了通用接口。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过lsof工具能够查看这个列表对系统监测以及排错将是很有帮助的。\n在终端下输入lsof即可显示系统打开的文件，因为 lsof 需要访问核心内存和各种文件，所以必须以 root 用户的身份运行它才能够充分地发挥其功能。\n$ sudo lsof | less COMMAND PID TID TASKCMD USER FD TYPE DEVICE SIZE/OFF NODE NAME systemd 1 root cwd DIR 8,2 4096 2 / systemd 1 root rtd DIR 8,2 4096 2 / systemd 1 root txt REG 8,2 1620224 2491035 /usr/lib/systemd/systemd systemd 1 root mem REG 8,2 1369352 2498532 /usr/lib/x86_64-linux-gnu/libm-2.31.so systemd 1 root mem REG 8,2 178528 2490726 /usr/lib/x86_64-linux-gnu/libudev.so.1.6.17 输出各列信息的意义如下：\n  COMMAND：进程的名称\n  PID：进程标识符\n  PPID：父进程标识符（需要指定-R参数）\n  USER：进程所有者\n  PGID：进程所属组\n  FD：文件描述符（filedescriptor，简称 fd），应用程序通过文件描述符识别该文件类型。\n例如 cwd 表示current work dirctory，即应用程序的当前工作目录，这是该应用程序启动的目录，除非它本身对这个目录进行更改。txt 表示该类型的文件是程序代码，如应用程序二进制文件本身或共享库，如上列表中显示的 /usr/lib/systemd/systemd 程序。\n  TYPE：文件类型，如DIR、REG等，常见的文件类型:\n DIR：目录 REG：普通文件 CHR：字符 BLK：块设备类型 UNIX： UNIX 域套接字 FIFO：先进先出 (FIFO) 队列 IPv4：网际协议 (IP) 套接字    DEVICE：指定磁盘的名称\n  SIZE：文件的大小\n  NODE：索引节点（文件在磁盘上的标识）\n  NAME：打开文件的确切名称\n  命令参数    参数 含义     -a 列出打开文件存在的进程   -c  列出指定进程名所打开的文件   -g 列出GID号进程详情   -d  列出占用该文件号的进程   +d  列出目录下被打开的文件   +D  递归列出目录下被打开的文件   -n  列出使用NFS的文件   -i  列出符合条件的进程   -p  列出指定进程号所打开的文件   -u 列出UID号进程详情   -h 显示帮助信息   -v 显示版本信息    使用实例 查询某个文件被哪个进程调用\n$ lsof /bin/bash 查询某个目录下所有的文件是被哪些进程调用的\n$ lsof +d /usr/lib 查看以httpd开头的进程调用了哪些文件\n$ lsof -c httpd 查询PID是1的进程调用的文件\n$ lsof -p 1 按照用户名查询某个用户的进程调用的文件\n$ lsof -u username 列出某个用户以及某个进程所打开的文件信息\n$ lsof -u test -c mysql 列出所有的网络连接\n$ lsof -i 列出所有tcp 网络连接信息\n$ lsof -i tcp 列出谁在使用某个端口\n$ lsof -i :3306 列出某个用户的所有活跃的网络端口\n$ lsof -a -u test -i 根据文件描述列出对应的文件信息\n$ lsof -d txt 列出被进程号为1234的进程所打开的所有 IPV4 network files\n$ lsof -i 4 -a -p 1234 列出目前连接主机nf5260i5-td上端口为：20，21，80相关的所有文件信息，且每隔3秒重复执行\n$ lsof -i @nf5260i5-td:20,21,80 -r 3 write 在服务器上，有时会有多个用户同时登录，一些必要的沟通就显得尤为重要。比如,我必须关闭某个服务，或者需要重启服务器，当然需要通知同时登录服务器的用户，这时就可以使用 write 命令。\nwrite 命令的信息如下：\n 命令名称：write。 英文原意：send a message to another user。 所在路径：/usr/bin/write。 执行权限：所有用户。 功能描述：向其他用户发送信息。  write 命令的基本格式如下:\n$ write 用户名 [终端号] write 命令没有多余的选项，我们要向在某个终端登录的用户发送信息，就可以这样来执行命令：\n# 向在pts/1 (远程终端1)登录的user1用户发送信息，使用\"Ctrl+D\"快捷键保存发送的数据 $ write user1 pts/1 hello I will be in 5 minutes to restart, please save your data 这时，user1 用户就可以收到你要在 5 分钟之后重启系统的信息了。\nxargs 标准输入与管道命令 Unix 命令都带有参数，有些命令可以接受\"标准输入\"（stdin）作为参数。\n$ cat /etc/passwd | grep root 上面的代码使用了管道命令（|）。管道命令的作用，是将左侧命令（cat /etc/passwd）的标准输出转换为标准输入，提供给右侧命令（grep root）作为参数。\n因为grep命令可以接受标准输入作为参数，所以上面的代码等同于下面的代码。\n$ grep root /etc/passwd 但是，大多数命令都不接受标准输入作为参数，只能直接在命令行输入参数，这导致无法用管道命令传递参数。举例来说，echo命令就不接受管道传参。\n$ echo \"hello world\" | echo 上面的代码不会有输出。因为管道右侧的echo不接受管道传来的标准输入作为参数。\nxargs 命令的作用 xargs命令的作用，是将标准输入转为命令行参数。\n$ echo \"hello world\" | xargs echo hello world 上面的代码将管道左侧的标准输入，转为命令行参数hello world，传给第二个echo命令。\nxargs命令的格式如下。\n$ xargs [-options] [command] 真正执行的命令，紧跟在xargs后面，接受xargs传来的参数。\nxargs的作用在于，大多数命令（比如rm、mkdir、ls）与管道一起使用时，都需要xargs将标准输入转为命令行参数。\n$ echo \"one two three\" | xargs mkdir 上面的代码等同于mkdir one two three。如果不加xargs就会报错，提示mkdir缺少操作参数。\nxargs 的单独使用 xargs后面的命令默认是echo。\n$ xargs # 等同于 $ xargs echo 大多数时候，xargs命令都是跟管道一起使用的。但是，它也可以单独使用。\n输入xargs按下回车以后，命令行就会等待用户输入，作为标准输入。你可以输入任意内容，然后按下Ctrl d，表示输入结束，这时echo命令就会把前面的输入打印出来。\n$ xargs hello (Ctrl + d) hello 再看一个例子。\n$ xargs find -name \"*.txt\" ./foo.txt ./hello.txt 上面的例子输入xargs find -name以后，命令行会等待用户输入所要搜索的文件。用户输入\"*.txt\"，表示搜索当前目录下的所有 TXT 文件，然后按下Ctrl d，表示输入结束。这时就相当执行find -name *.txt。\n-d 参数与分隔符 默认情况下，xargs将换行符和空格作为分隔符，把标准输入分解成一个个命令行参数。\n$ echo \"one two three\" | xargs mkdir 上面代码中，mkdir会新建三个子目录，因为xargs将one two three分解成三个命令行参数，执行mkdir one two three。\n-d参数可以更改分隔符。\n$ echo -e \"a\\tb\\tc\" | xargs -d \"\\t\" echo a b c 上面的命令指定制表符\\t作为分隔符，所以a\\tb\\tc就转换成了三个命令行参数。echo命令的-e参数表示解释转义字符。\n-p 参数，-t 参数 使用xargs命令以后，由于存在转换参数过程，有时需要确认一下到底执行的是什么命令。\n-p参数打印出要执行的命令，询问用户是否要执行。\n$ echo 'one two three' | xargs -p touch touch one two three ?... 上面的命令执行以后，会打印出最终要执行的命令，让用户确认。用户输入y以后（大小写皆可），才会真正执行。\n-t参数则是打印出最终要执行的命令，然后直接执行，不需要用户确认。\n$ echo 'one two three' | xargs -t rm rm one two three -0 参数与 find 命令 由于xargs默认将空格作为分隔符，所以不太适合处理文件名，因为文件名可能包含空格。\nfind命令有一个特别的参数-print0，指定输出的文件列表以null分隔。然后，xargs命令的-0参数表示用null当作分隔符。\n$ find /path -type f -print0 | xargs -0 rm 上面命令删除/path路径下的所有文件。由于分隔符是null，所以处理包含空格的文件名，也不会报错。\n还有一个原因，使得xargs特别适合find命令。有些命令（比如rm）一旦参数过多会报错\"参数列表过长\"，而无法执行，改用xargs就没有这个问题，因为它对每个参数执行一次命令。\n$ find . -name \"*.txt\" | xargs grep \"abc\" 上面命令找出所有 TXT 文件以后，对每个文件搜索一次是否包含字符串abc。\n-L 参数 如果标准输入包含多行，-L参数指定多少行作为一个命令行参数。\n$ xargs find -name \"*.txt\" \"*.md\" find: paths must precede expression: `*.md' 上面命令同时将\"*.txt\"和*.md两行作为命令行参数，传给find命令导致报错。\n使用-L参数，指定每行作为一个命令行参数，就不会报错。\n$ xargs -L 1 find -name \"*.txt\" ./foo.txt ./hello.txt \"*.md\" ./README.md 上面命令指定了每一行（-L 1）作为命令行参数，分别运行一次命令（find -name）。\n下面是另一个例子。\n$ echo -e \"a\\nb\\nc\" | xargs -L 1 echo a b c 上面代码指定每行运行一次echo命令，所以echo命令执行了三次，输出了三行。\n-n 参数 -L参数虽然解决了多行的问题，但是有时用户会在同一行输入多项。\n$ xargs find -name \"*.txt\" \"*.md\" find: paths must precede expression: `*.md' 上面的命令将同一行的两项作为命令行参数，导致报错。\n-n参数指定每次将多少项，作为命令行参数。\n$ xargs -n 1 find -name 上面命令指定将每一项（-n 1）标准输入作为命令行参数，分别执行一次命令（find -name）。\n下面是另一个例子。\n$ echo {0..9} | xargs -n 2 echo 0 12 34 56 78 9 上面命令指定，每两个参数运行一次echo命令。所以，10个阿拉伯数字运行了五次echo命令，输出了五行。\n-I 参数 如果xargs要将命令行参数传给多个命令，可以使用-I参数。\n-I指定每一项命令行参数的替代字符串。\n$ cat foo.txt one two three $ cat foo.txt | xargs -I file sh -c 'echo file; mkdir file' one two three $ ls one two three 上面代码中，foo.txt是一个三行的文本文件。我们希望对每一项命令行参数，执行两个命令（echo和mkdir），使用-I file表示file是命令行参数的替代字符串。执行命令时，具体的参数会替代掉echo file; mkdir file里面的两个file。\n–max-procs 参数 xargs默认只用一个进程执行命令。如果命令要执行多次，必须等上一次执行完，才能执行下一次。\n--max-procs参数指定同时用多少个进程并行执行命令。--max-procs 2表示同时最多使用两个进程，--max-procs 0表示不限制进程数。\n$ docker ps -q | xargs -n 1 --max-procs 0 docker kill 上面命令表示，同时关闭尽可能多的 Docker 容器，这样运行速度会快很多。\nawk awk是处理文本文件的一个应用程序，几乎所有 Linux 系统都自带这个程序。\n它依次处理文件的每一行，并读取里面的每一个字段。对于日志、CSV 那样的每行格式相同的文本文件，awk可能是最方便的工具。\nawk其实不仅仅是工具软件，还是一种编程语言。不过，本文只介绍它的命令行用法，对于大多数场合，应该足够用了。\n基本用法 awk的基本用法就是下面的形式。\n# 格式 $ awk 动作 文件名 # 示例 $ awk '{print $0}' demo.txt 上面示例中，demo.txt是awk所要处理的文本文件。前面单引号内部有一个大括号，里面就是每一行的处理动作print $0。其中，print是打印命令，$0代表当前行，因此上面命令的执行结果，就是把每一行原样打印出来。\n下面，我们先用标准输入（stdin）演示上面这个例子。\n$ echo 'this is a test' | awk '{print $0}' this is a test 上面代码中，print $0就是把标准输入this is a test，重新打印了一遍。\nawk会根据空格和制表符，将每一行分成若干字段，依次用$1、$2、$3代表第一个字段、第二个字段、第三个字段等等。\n$ echo 'this is a test' | awk '{print $3}' a 上面代码中，$3代表this is a test的第三个字段a。\n下面，为了便于举例，我们把/etc/passwd文件保存成demo.txt。\nroot❌0:0:root:/root:/usr/bin/zsh daemon❌1:1:daemon:/usr/sbin:/usr/sbin/nologin bin❌2:2:bin:/bin:/usr/sbin/nologin sys❌3:3:sys:/dev:/usr/sbin/nologin sync❌4:65534:sync:/bin:/bin/sync 这个文件的字段分隔符是冒号（:），所以要用-F参数指定分隔符为冒号。然后，才能提取到它的第一个字段。\n$ awk -F ':' '{ print $1 }' demo.txt root daemon bin sys sync 变量 除了$ + 数字表示某个字段，awk还提供其他一些变量。\n变量NF表示当前行有多少个字段，因此$NF就代表最后一个字段。\n$ echo 'this is a test' | awk '{print $NF}' test $(NF-1)代表倒数第二个字段。\n$ awk -F ':' '{print $1, $(NF-1)}' demo.txt root /root daemon /usr/sbin bin /bin sys /dev sync /bin 上面代码中，print命令里面的逗号，表示输出的时候，两个部分之间使用空格分隔。\n变量NR表示当前处理的是第几行。\n$ awk -F ':' '{print NR \") \" $1}' demo.txt 1) root 2) daemon 3) bin 4) sys 5) sync 上面代码中，print命令里面，如果原样输出字符，要放在双引号里面。\nawk的其他内置变量如下。\n FILENAME：当前文件名 FS：字段分隔符，默认是空格和制表符。 RS：行分隔符，用于分割每一行，默认是换行符。 OFS：输出字段的分隔符，用于打印时分隔字段，默认为空格。 ORS：输出记录的分隔符，用于打印时分隔记录，默认为换行符。 OFMT：数字输出的格式，默认为％.6g。  函数 awk还提供了一些内置函数，方便对原始数据的处理。\n函数toupper()用于将字符转为大写。\n$ awk -F ':' '{ print toupper($1) }' demo.txt ROOT DAEMON BIN SYS SYNC 上面代码中，第一个字段输出时都变成了大写。\n其他常用函数如下。\n tolower()：字符转为小写。 length()：返回字符串长度。 substr()：返回子字符串。 sin()：正弦。 cos()：余弦。 sqrt()：平方根。 rand()：随机数。  awk内置函数的完整列表，可以查看手册。\n条件 awk允许指定输出条件，只输出符合条件的行。\n输出条件要写在动作的前面。\n$ awk '条件 动作' 文件名 请看下面的例子。\n$ awk -F ':' '/usr/ {print $1}' demo.txt root daemon bin sys 上面代码中，print命令前面是一个正则表达式，只输出包含usr的行。\n下面的例子只输出奇数行，以及输出第三行以后的行。\n# 输出奇数行 $ awk -F ':' 'NR % 2 == 1 {print $1}' demo.txt root bin sync # 输出第三行以后的行 $ awk -F ':' 'NR 3 {print $1}' demo.txt sys sync 下面的例子输出第一个字段等于指定值的行。\n$ awk -F ':' '$1 == \"root\" {print $1}' demo.txt root $ awk -F ':' '$1 == \"root\" || $1 == \"bin\" {print $1}' demo.txt root bin if 语句 awk提供了if结构，用于编写复杂的条件。\n$ awk -F ':' '{if ($1  \"m\") print $1}' demo.txt root sys sync 上面代码输出第一个字段的第一个字符大于m的行。\nif结构还可以指定else部分。\n$ awk -F ':' '{if ($1  \"m\") print $1; else print \"---\"}' demo.txt root --- --- sys sync find find 命令由 POSIX 规范 定义，它创建了一个用于衡量 POSIX 系统的开放标准，这包括 Linux、BSD 和 macOS。简而言之，只要你运行的是 Linux、BSD 或 macOS，那么 find 已经安装了。\n但是，并非所有的 find 命令都完全相同。例如，GNU 的 find 命令有一些 BSD、Busybox 或 Solaris 上 find 命令可能没有或有但实现方式不同的功能。本文使用 findutils 包中的 GNU find，因为它很容易获得且非常流行。本文演示的大多数命令都适用于 find 的其他实现，但是如果你在 Linux 以外的平台上尝试命令并得到非预期结果，尝试下载并安装 GNU 版本。\nman文档中给出的find命令的一般形式为：\nfind [-H] [-L] [-P] [-D debugopts] [-Olevel] [path...] [expression] 其实[-H] [-L] [-P] [-D debugopts] [-Olevel]这几个选项并不常用（至少在我的日常工作中，没有用到过），上面的find命令的常用形式可以简化为：\nfind [path...] [expression]   path：find命令所查找的目录路径。例如用.来表示当前目录，用/来表示系统根目录\n  expression：expression可以分为——“-options [-print -exec -ok …]”\n   -options，指定find命令的常用选项 -print，find命令将匹配的文件输出到标准输出 -exec，find命令对匹配的文件执行该参数所给出的shell命令。相应命令的形式为'command' { } \\;，注意{ }和\\；之间的空格 find ./ -size 0 -exec rm {} \\; 删除文件大小为零的文件 （还可以以这样做：rm -i find ./ -size 0 或 find ./ -size 0 | xargs rm -f \u0026）  为了用ls -l命令列出所匹配到的文件，可以把ls -l命令放在find命令的-exec选项中：find . -type f -exec ls -l { } \\; 在/logs目录中查找更改时间在5日以前的文件并删除它们：find /logs -type f -mtime +5 -exec rm { } \\; -ok，和-exec的作用相同，只不过以一种更为安全的模式来执行该参数所给出的shell命令，在执行每一个命令之前，都会给出提示，让用户来确定是否执行。 find . -name \"*.conf\" -mtime +5 -ok rm { } \\; 在当前目录中查找所有文件名以.LOG结尾、更改时间在5日以上的文件，并删除它们，只不过在删除之前先给出提示    也有人这样总结find命令的结构：\nfind start_directory options criteria_to_match action_to_perform_on_results 常用选项  -name  按照文件名查找文件。 find /dir -name filename  在/dir目录及其子目录下面查找名字为filename的文件 find . -name \"*.c\" 在当前目录及其子目录（用“.”表示）中查找任何扩展名为“c”的文件 -perm 按照文件权限来查找文件。 find . -perm 755 –print 在当前目录下查找文件权限位为755的文件，即文件属主可以读、写、执行，其它用户可以读、执行的文件 -prune  使用这一选项可以使find命令不在当前指定的目录中查找，如果同时使用-depth选项，那么-prune将被find命令忽略。 find /apps -path \"/apps/bin\" -prune -o –print 在/apps目录下查找文件，但不希望在/apps/bin目录下查找 find /usr/sam -path \"/usr/sam/dir1\" -prune -o –print 在/usr/sam目录下查找不在dir1子目录之内的所有文件 -user  按照文件属主来查找文件。 find ~ -user sam –print 在$HOME目录中查找文件属主为sam的文件 -group  按照文件所属的组来查找文件。 find /apps -group gem –print 在/apps目录下查找属于gem用户组的文件 -mtime -n +n  按照文件的更改时间来查找文件， - n表示文件更改时间距现在n天以内，+ n表示文件更改时间距现在n天以前。 find / -mtime -5 –print 在系统根目录下查找更改时间在5日以内的文件 find /var/adm -mtime +3 –print 在/var/adm目录下查找更改时间在3日以前的文件 -nogroup  查找无有效所属组的文件，即该文件所属的组在/etc/groups中不存在。 find / –nogroup -print -nouser  查找无有效属主的文件，即该文件的属主在/etc/passwd中不存在。 find /home -nouser –print -newer file1 ! file2  查找更改时间比文件file1新但比文件file2旧的文件。 -type  查找某一类型的文件，诸如： b - 块设备文件。 d - 目录。 c - 字符设备文件。 p - 管道文件。 l - 符号链接文件。 f - 普通文件。 find /etc -type d –print 在/etc目录下查找所有的目录 find . ! -type d –print 在当前目录下查找除目录以外的所有类型的文件 find /etc -type l –print 在/etc目录下查找所有的符号链接文件 -size n：[c] 查找文件长度为n块的文件，带有c时表示文件长度以字节计。 find . -size +1000000c –print 在当前目录下查找文件长度大于1 M字节的文件 find /home/apache -size 100c –print 在/home/apache目录下查找文件长度恰好为100字节的文件 find . -size +10 –print 在当前目录下查找长度超过10块的文件（一块等于512字节） -depth：在查找文件时，首先查找当前目录中的文件，然后再在其子目录中查找。 find / -name \"CON.FILE\" -depth –print 它将首先匹配所有的文件然后再进入子目录中查找 -mount：在查找文件时不跨越文件系统mount点。 find . -name \"*.XC\" -mount –print 从当前目录开始查找位于本文件系统中文件名以XC结尾的文件（不进入其它文件系统） -follow：如果find命令遇到符号链接文件，就跟踪至链接所指向的文件。  按名称查找文件 你可以借助正则表达式使用完整或部分的文件名来定位文件。find 命令需要你给出想搜索的目录；指定搜索属性选项，例如，-name 用于指定区分大小写的文件名；然后是搜索字符串。默认情况下，搜索字符串按字面意思处理：除非你使用正则表达式语法，否则 find 命令搜索的文件名正是你在引号之间输入的字符串。\n假设你的 Documents 目录包含四个文件：Foo、foo、foobar.txt 和 foo.xml。以下是对 foo 的字面搜索：\n$ find ~ -name \"foo\" /home/tux/Documents/examples/foo 你可以使用 -iname 选项使其不区分大小写来扩大搜索范围：\n$ find ~ -iname \"foo\" /home/tux/Documents/examples/foo /home/tux/Documents/examples/Foo 通配符 你可以使用基本的 shell 通配符来扩展搜索。例如，* 表示任意数量的字符：\n$ find ~ -iname \"foo*\" /home/tux/Documents/examples/foo /home/tux/Documents/examples/Foo /home/tux/Documents/examples/foo.xml /home/tux/Documents/examples/foobar.txt ? 表示单个字符：\n$ find ~ -iname \"foo*.???\" /home/tux/Documents/examples/foo.xml /home/tux/Documents/examples/foobar.txt 这不是正则表达式语法，因此 . 在示例中只表示字母“点”。\n正则表达式 你还可以使用正则表达式。与 -iname 和 -name 一样，也有区分大小写和不区分大小写的选项。但不一样的是，-regex 和 -iregex 搜索应用于整个路径，而不仅仅是文件名。这意味着，如果你搜索 foo，你不会得到任何结果，因为 foo 与 /home/tux/Documents/foo 不匹配。相反，你必须要么搜索整个路径，要么在字符串的开头使用通配符：\n$ find ~ -iregex \".*foo\" /home/tux/Documents/examples/foo /home/tux/Documents/examples/Foo 查找近一周修改过的文件 要查找近一周修改的文件，使用 -mtime 选项以及过去的天数（负数）：\n$ find ~ -mtime -7 /home/tux/Documents/examples/foo /home/tux/Documents/examples/Foo /home/tux/Documents/examples/foo.xml /home/tux/Documents/examples/foobar.txt 查找近几天修改的文件 你可以结合使用 -mtime 选项来查找近几天范围内修改的文件。对于第一个 -mtime 参数，表示上一次修改文件的最近天数。第二个参数表示最大天数。例如，搜索修改时间超过 1 天但不超过 7 天的文件：\n$ find ~ -mtime +1 -mtime -7 按文件类型限制搜索 指定查找文件的类型来优化 find 的结果是很常见的。如果你不确定要查找的内容，则不应该使用此选项。但如果你知道要查找的是文件而不是目录，或者是目录而不是文件，那么这可能是一个很好的过滤器。选项是 -type，它的参数是代表不同类型数据的字母代码。最常见的是：\n d - 目录 f - 文件 l - 链接文件 s - 套接字 p - 命名管道（用于 FIFO） b - 块设备（通常是硬盘）  下面是一些例子：\n$ find ~ -type d -name \"Doc*\" /home/tux/Documents $ find ~ -type f -name \"Doc*\" /home/tux/Downloads/10th-Doctor.gif $ find /dev -type b -name \"sda*\" /dev/sda/dev/sda1 调整范围 find 命令默认是递归的，这意味着它会在指定的目录中层层搜索结果。这在大型文件系统中可能会变得不堪重负，但你可以使用 -maxdepth 选项来控制搜索深度：\n$ find /usr -iname \"*xml\" | wc -l 15588 $ find /usr -maxdepth 2 -iname \"*xml\" | wc -l 15 也可以使用 -mindepth 设置最小递归深度：\n$ find /usr -mindepth 8 -iname \"*xml\" | wc -l 9255 与 xargs 在使用find命令的-exec选项处理匹配到的文件时， find命令将所有匹配到的文件一起传递给exec执行。但有些系统对能够传递给exec的命令长度有限制，这样在find命令运行几分钟之后，就会出现溢出错误。错误信息通常是“参数列太长”或“参数列溢出”。这就是xargs命令的用处所在，特别是与find命令一起使用。\nfind命令把匹配到的文件传递给xargs命令，而xargs命令每次只获取一部分文件而不是全部，不像-exec选项那样。这样它可以先处理最先获取的一部分文件，然后是下一批，并如此继续下去。\n在有些系统中，使用-exec选项会为处理每一个匹配到的文件而发起一个相应的进程，并非将匹配到的文件全部作为参数一次执行；这样在有些情况下就会出现进程过多，系统性能下降的问题，因而效率不高；\n而使用xargs命令则只有一个进程。另外，在使用xargs命令时，究竟是一次获取所有的参数，还是分批取得参数，以及每一次获取参数的数目都会根据该命令的选项及系统内核中相应的可调参数来确定。\n来看看xargs命令是如何同find命令一起使用的，并给出一些例子。\nfind . -type f -print | xargs file 查找系统中的每一个普通文件，然后使用xargs命令来测试它们分别属于哪类文件\nfind / -name \"core\" -print | xargs echo \"\" /tmp/core.log 在整个系统中查找内存信息转储文件(core dump) ，然后把结果保存到/tmp/core.log 文件中：\nfind . -type f -print | xargs grep \"hostname\" 用grep命令在所有的普通文件中搜索hostname这个词\nfind ./ -mtime +3 -print|xargs rm -f –r 删除3天以前的所有东西 （find . -ctime +3 -exec rm -rf {} \\;）\nfind ./ -size 0 | xargs rm -f \u0026 删除文件大小为零的文件\nfind命令配合使用exec和xargs可以使用户对所匹配到的文件执行几乎所有的命令。\nfd fd 命令是一个流行的、用户友好的 find 命令的替代品。\ngrep grep (global search regular expression(RE) and print out the line，全面搜索正则表达式并把行打印出来)是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。\ngrep 这个名字，来源于一个 Unix/Linux 中的古老的行编辑器 ed 中执行相似操作的命令：\ng/re/p 语法如下所示:\ngrep [OPTIONS] PATTERN [FILE...] grep [OPTIONS] [-e PATTERN | -f FILE] [FILE...] grep命令用于搜索由Pattern参数指定的模式，并将每个匹配的行写入标准输出中。这些模式是具有限定的正则表达式，它们使用ed或egrep命令样式。\n如果在File参数中指定了多个名称，grep命令将显示包含匹配行的文件的名称。\n对 shell 有特殊含义的字符 ($, *, [, |, ^, (, ), \\ ) 出现在 Pattern参数中时必须带双引号。如果 Pattern参数不是简单字符串，通常必须用单引号将整个模式括起来。在诸如 [a-z], 之类的表达式中，-（减号）cml 可根据当前正在整理的序列来指定一个范围。整理序列可以定义等价的类以供在字符范围中使用。\n如果未指定任何文件，grep会假定为标准输入。\n基本集 grep正则表达式元字符集：\n ^ 锚定行的开始 如：'^grep'匹配所有以grep开头的行。 $ 锚定行的结束 如：'grep$'匹配所有以grep结尾的行。 . 匹配一个非换行符的字符 如：'gr.p'匹配gr后接一个任意字符，然后是p。 * 匹配零个或多个先前字符 如：' *grep'匹配所有一个或多个空格后紧跟grep的行。 .*一起用代表任意字符。 [] 匹配一个指定范围内的字符，如'[Gg]rep'匹配Grep和grep。 [^]  匹配一个不在指定范围内的字符，如：'[^A-FH-Z]rep'匹配不包含A-F和H-Z的一个字母开头，紧跟rep的行。 \\(..\\) 标记匹配字符，如：'\\(love\\)'，love被标记为1。 \\ 锚定单词的开始，如：'\\ \\ 锚定单词的结束，如grep\\'匹配包含以grep结尾的单词的行。 x\\{m\\} 连续重复字符x，m次，如：'o\\{5\\}'匹配包含连续5个o的行。 x\\{m,\\} 连续重复字符x,至少m次，如：'o\\{5,\\}'匹配至少连续有5个o的行。 x\\{m,n\\} 连续重复字符x，至少m次，不多于n次，如：'o\\{5,10\\}'匹配连续5–10个o的行。 \\w 匹配一个文字和数字字符，也就是[A-Za-z0-9]，如：'G\\w*p'匹配以G后跟零个或多个文字或数字字符，然后是p。 \\W  w的反置形式，匹配一个非单词字符，如点号句号等。\\W*则可匹配多个。 \\b 单词锁定符，如: '\\bgrep\\b'只匹配grep，即只能是grep这个单词，两边均为空格。  常用选项 -? 同时显示匹配行上下的？行，如：grep -2 pattern filename同时显示匹配行的上下2行。\n-b，--byte-offset 打印匹配行前面打印该行所在的块号码。\n-c,--count 只打印匹配的行数，不显示匹配的内容。\n-f File，--file=File 从文件中提取模板。空文件中包含0个模板，所以什么都不匹配。\n-h，--no-filename 当搜索多个文件时，不显示匹配文件名前缀。\n-i，--ignore-case 忽略大小写差别。\n-q，--quiet 取消显示，只返回退出状态。0则表示找到了匹配的行。\n-l，--files-with-matches 打印匹配模板的文件清单。\n-L，--files-without-match 打印不匹配模板的文件清单。\n-n，--line-number 在匹配的行前面打印行号。\n-s，--silent 不显示关于不存在或者无法读取文件的错误信息。\n-v，--revert-match 反检索，只显示不匹配的行。\n-w，--word-regexp 如果被\\引用，就把表达式做为一个单词搜索。\n-V，--version 显示软件版本信息。\n怎么样使用 grep 来搜索一个文件 搜索 /etc/passwd 文件下的 boo 用户,输入:\n$ grep boo /etc/passwd 输出内容:\nfoo❌1000:1000:foo,,,:/home/foo:/bin/ksh 可以使用 grep 去强制忽略大小写。例如，使用 -i 选项可以匹配 boo, Boo, BOO 和其他组合：\n$ grep -i \"boo\" /etc/passwd 递归使用 grep 你可以递归地使用 grep 进行搜索。例如，在文件目录下面搜索所有包含字符串“192.168.1.5”的文件\n$ grep -r \"192.168.1.5\" /etc/ 或者是：\n$ grep -R \"192.168.1.5\" /etc/ 示例输出:\n/etc/ppp/options:# ms-wins 192.168.1.50/etc/ppp/options:# ms-wins 192.168.1.51/etc/NetworkManager/system-connections/Wired connection 1:addresses1=192.168.1.5;24;192.168.1.2; 你会看到搜索到 192.168.1.5 的结果每一行都前缀以找到匹配的文件名（例如：/etc/ppp/options）。输出之中包含的文件名可以加 -h 选项来禁止输出：\n$ grep -h -R \"192.168.1.5\" /etc/ 或者\n$ grep -hR \"192.168.1.5\" /etc/ 示例输出:\n# ms-wins 192.168.1.50# ms-wins 192.168.1.51addresses1=192.168.1.5;24;192.168.1.2; 使用 grep 去搜索文本 当你搜索 boo 时，grep 命令将会匹配 fooboo，boo123, barfoo35 和其他所有包含 boo 的字符串，你可以使用 -w 选项去强制只输出那些仅仅包含那个整个单词的行（LCTT译注：即该字符串两侧是英文单词分隔符，如空格，标点符号，和末端等，因此对中文这种没有断字符号的语言并不适用。）。\n$ grep -w \"boo\" file 使用 grep 命令去搜索两个不同的单词 使用 egrep 命令如下:\n$ egrep -w 'word1|word2' /path/to/file （LCTT 译注：这里使用到了正则表达式，因此使用的是 egrep 命令，即扩展的 grep 命令。）\n统计文本匹配到的行数 grep 命令可以通过加 -c 参数显示每个文件中匹配到的次数：\n$ grep -c 'word' /path/to/file 传递 -n 选项可以输出的行前加入匹配到的行的行号：\n$ grep -n 'root' /etc/passwd 示例输出:\n1:root:x:0:0:root:/root:/bin/bash1042:rootdoor:x:0:0:rootdoor:/home/rootdoor:/bin/csh3319:initrootapp:x:0:0:initrootapp:/home/initroot:/bin/ksh 反转匹配（不匹配） 可以使用 -v 选项来输出不包含匹配项的内容，输出内容仅仅包含那些不含给定单词的行，例如输出所有不包含 bar 单词的行：\n$ grep -v bar /path/to/file UNIX/Linux 管道与 grep 命令 grep 常常与管道一起使用，在这个例子中，显示硬盘设备的名字：\n# dmesg | egrep '(s|h)d[a-z]' 显示 CPU 型号：\n# cat /proc/cpuinfo | grep -i 'Model' 然而，以上命令也可以按照以下方法使用，不使用管道:\n# grep -i 'Model' /proc/cpuinfo 示例输出:\nmodel : 30model name : Intel(R) Core(TM) i7 CPU Q 820 @ 1.73GHzmodel : 30model name : Intel(R) Core(TM) i7 CPU Q 820 @ 1.73GHz 如何仅仅显示匹配到内容的文件名字? 使用 -l 选项去显示那些文件内容中包含 main() 的文件名：\n$ grep -l 'main' *.c 最后，你可以强制 grep 以彩色输出：\n$ grep --color vivek /etc/passwd 查找文件内容 从根目录开始查找所有扩展名为 .log 的文本文件，并找出包含 “ERROR” 的行：\n$ find / -type f -name \"*.log\" | xargs grep \"ERROR\" 例子：从当前目录开始查找所有扩展名为 .in 的文本文件，并找出包含 “thermcontact” 的行：\n$ find . -name \"*.in\" | xargs grep \"thermcontact\" cat bat A cat(1) clone with wings.\n添加了语法高亮和 Git 集成等功能，并且还提供了分页选项。\nip linux的ip命令和ifconfig类似，但前者功能更强大，并旨在取代后者。使用ip命令，只需一个命令，你就能很轻松地执行一些网络管理任务。ifconfig是net-tools中已被废弃使用的一个命令，许多年前就已经没有维护了。iproute2套件里提供了许多增强功能的命令，ip命令即是其中之一。\n设置和删除Ip地址 要给你的机器设置一个IP地址，可以使用下列ip命令：\n$ sudo ip addr add 192.168.0.193/24 dev wlan0 请注意IP地址要有一个后缀，比如/24。这种用法用于在无类域内路由选择（CIDR）中来显示所用的子网掩码。在这个例子中，子网掩码是255.255.255.0。\n在你按照上述方式设置好IP地址后，需要查看是否已经生效。\n$ ip addr show wlan0 你也可以使用相同的方式来删除IP地址，只需用del代替add。\n$ sudo ip addr del 192.168.0.193/24 dev wlan0 列出路由表条目 ip命令的路由对象的参数还可以帮助你查看网络中的路由数据，并设置你的路由表。第一个条目是默认的路由条目，你可以随意改动它。\n在这个例子中，有几个路由条目。这个结果显示有几个设备通过不同的网络接口连接起来。它们包括WIFI、以太网和一个点对点连接。\n$ ip route show 假设现在你有一个IP地址，你需要知道路由包从哪里来。可以使用下面的路由选项（译注：列出了路由所使用的接口等）：\n$ ip route get 10.42.0.47 更改默认路由 要更改默认路由，使用下面ip命令：\n$ sudo ip route add default via 192.168.0.196 显示网络统计数据 使用ip命令还可以显示不同网络接口的统计数据。\n当你需要获取一个特定网络接口的信息时，在网络接口名字后面添加选项ls即可。使用多个选项**-s**会给你这个特定接口更详细的信息。特别是在排除网络连接故障时，这会非常有用。\n$ ip -s -s link ls p2p1 ARP条目 地址解析协议（ARP）用于将一个IP地址转换成它对应的物理地址，也就是通常所说的MAC地址。使用ip命令的neigh或者neighbour选项，你可以查看接入你所在的局域网的设备的MAC地址。\n$ ip neighbour 监控netlink消息 也可以使用ip命令查看netlink消息。monitor选项允许你查看网络设备的状态。比如，所在局域网的一台电脑根据它的状态可以被分类成REACHABLE或者STALE。使用下面的命令：\n$ ip monitor all 激活和停止网络接口 你可以使用ip命令的up和down选项来激某个特定的接口，就像ifconfig的用法一样。\n在这个例子中，当ppp0接口被激活和在它被停止和再次激活之后，你可以看到相应的路由表条目。这个接口可能是wlan0或者eth0。将ppp0更改为你可用的任意接口即可。\n$ sudo ip link set ppp0 down $ sudo ip link set ppp0 up 获取帮助 当你陷入困境，不知道某一个特定的选项怎么用的时候，你可以使用help选项。man页面并不会提供许多关于如何使用ip选项的信息，因此这里就是获取帮助的地方。\n比如，想知道关于route选项更多的信息：\n$ ip route help 小结 对于网络管理员们和所有的Linux使用者们，ip命令是必备工具。是时候抛弃ifconfig命令了，特别是当你写脚本时。\ndig 使用 dig 来进行 DNS 查询。\n参数类型：查询和格式化 有两种主要的参数可以传递给 dig：\n 告诉 dig 要进行什么 DNS 查询的参数。 告诉 dig 如何 格式化响应的参数。  首先，让我们看一下查询选项。\n主要的查询选项 你通常想控制 DNS 查询的 3 件事是：\n 名称（如 jvns.ca）。默认情况下，查询的是空名称（.）。 DNS 查询类型（如 A 或 CNAME）。默认是 A。 发送查询的 服务器（如 8.8.8.8）。默认是 /etc/resolv.conf 中的内容。  其格式是：\ndig @server name type 这里有几个例子：\n dig @8.8.8.8 jvns.ca 向谷歌的公共 DNS 服务器（8.8.8.8）查询 jvns.ca。 dig ns jvns.ca 对 jvns.ca 进行类型为 NS 的查询。  -x：进行反向 DNS 查询\n我偶尔使用的另一个查询选项是 -x，用于进行反向 DNS 查询。下面是输出结果的样子。\n$ dig -x 172.217.13.174 174.13.217.172.in-addr.arpa. 72888 IN PTR yul03s04-in-f14.1e100.net。 -x 不是魔术。dig -x 172.217.13.174 只是对 174.13.217.172.in-addr.arpa. 做了一个 PTR 查询。下面是如何在不使用 `-x’ 的情况下进行完全相同的反向 DNS 查询。\n$ dig ptr 174.13.217.172.in-addr.arpa. 174.13.217.172.in-addr.arpa. 72888 IN PTR yul03s04-in-f14.1e100.net。 我总是使用 -x，因为它可以减少输入。\nDNS反向查询大概的一个定义就是：\n从 IP 地址获取 PTR 记录。也就是说，通过使用一些网络工具可以将 IP 地址转换为主机名。 实际上，PRT 代表 POINTER，在 DNS 系统有唯一性，将 IP 地址与规范化的主机名联系起来。PTR 记录其实是 NDS 系统的一部分，但是由专门的区域文件组成的，使用的是传统的 in-addr.arpa 格式。\n格式化响应的选项 现在，让我们讨论一下你可以用来格式化响应的参数。\n我发现 dig 默认格式化 DNS 响应的方式对初学者来说是很难接受的。下面是输出结果的样子：\n;  DiG 9.16.20  -r jvns.ca ;; global options: +cmd ;; Got answer: ;; -HEADERde: QUERY, status: NOERROR, id: 28629 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 4096 ; COOKIE: d87fc3022c0604d60100000061ab74857110b908b274494d (good) ;; QUESTION SECTION: ;jvns.ca. IN A ;; ANSWER SECTION: jvns.ca. 276 IN A 172.64.80.1 ;; Query time: 9 msec ;; SERVER: 192.168.1.1#53(192.168.1.1) ;; WHEN: Sat Dec 04 09:00:37 EST 2021 ;; MSG SIZE rcvd: 80 如果你不习惯看这个，你可能需要花点时间来筛选，找到你要找的 IP 地址。而且大多数时候，你只对这个响应中的一行感兴趣（jvns.ca. 180 IN A 172.64.80.1）。\n下面是我最喜欢的两种方法，可以使 dig 的输出更容易管理：\n方式 1 : +noall +answer\n这告诉 dig 只打印 DNS 响应中的“答案”部分的内容。下面是一个查询 google.com 的 NS 记录的例子：\n$ dig +noall +answer ns google.com google.com. 158564 IN NS ns4.google.com. google.com. 158564 IN NS ns1.google.com. google.com. 158564 IN NS ns2.google.com. google.com. 158564 IN NS ns3.google.com. 这里的格式是：\nNAME TTL TYPE CONTENT google.com 158564 IN NS ns3.google.com. 顺便说一下：如果你曾经想知道 IN 是什么意思，它是指“查询类”，代表“互联网internet”。它基本上只是上世纪 80、90 年代的遗物，当时还有其他网络与互联网竞争，如“混沌网络chaosnet”。\n方式 2：+short\n这就像 dig +noall +answer，但更短：它只显示每条记录的内容。比如说：\n$ dig +short ns google.com ns2.google.com. ns1.google.com. ns4.google.com. ns3.google.com. digrc 如果你不喜欢 dig 的默认格式（我就不喜欢！），你可以在你的主目录下创建一个 .digrc 文件，告诉它默认使用不同的格式。\n我非常喜欢 +noall +answer 格式，所以我把 +noall +answer 放在我的 ~/.digrc 中。下面是我使用该配置文件运行 dig jvns.ca 时的情况。\n$ dig jvns.ca jvns.ca. 255在172.64.80.1中 这样读起来就容易多了！\n如果我想回到所有输出的长格式（我有时会这样做，通常是因为我想看响应的权威部分的记录），我可以通过运行再次得到一个长答案。\n$ dig +all jvns.ca dig +trace 我使用的最后一个 dig 选项是 +trace。dig +trace 模仿 DNS 解析器在查找域名时的做法 —— 它从根域名服务器开始，然后查询下一级域名服务器（如 .com），以此类推，直到到达该域名的权威域名服务器。因此，它将进行大约 30 次 DNS 查询。（我用 tcpdump 检查了一下，对于每个根域名服务器的 A / AAAA 记录它似乎要进行 2 次查询，所以这已经是 26 次查询了。我不太清楚它为什么这样做，因为它应该已经有了这些 IP 的硬编码，但它确实如此。）\n我发现这对了解 DNS 的工作原理很有用，但我不认为我用它解决过问题。\n为什么要用 dig 尽管有一些更简单的工具来进行 DNS 查询（如 dog 和 host），我发现自己还是坚持使用 dig。\n我喜欢 dig 的地方实际上也是我 不喜欢 dig 的地方 —— 它显示了大量的细节！\n我知道，如果我运行 dig +all，它将显示 DNS 响应的所有部分。例如，让我们查询 jvns.ca 的一个根名称服务器。响应有 3 个部分，我可能会关心：回答部分、权威部分和附加部分。\n$ dig @h.root-servers.net. jvns.ca +all ;; Got answer: ;; -HEADERde: QUERY, status: NOERROR, id: 18229 ;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 4, ADDITIONAL: 9 ;; WARNING: recursion requested but not available ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 1232 ;; QUESTION SECTION: ;jvns.ca. IN A ;; AUTHORITY SECTION: ca. 172800 IN NS c.ca-servers.ca. ca. 172800 IN NS j.ca-servers.ca. ca. 172800 IN NS x.ca-servers.ca. ca. 172800 IN NS any.ca-servers.ca. ;; ADDITIONAL SECTION: c.ca-servers.ca. 172800 IN A 185.159.196.2 j.ca-servers.ca. 172800 IN A 198.182.167.1 x.ca-servers.ca. 172800 IN A 199.253.250.68 any.ca-servers.ca. 172800 IN A 199.4.144.2 c.ca-servers.ca. 172800 IN AAAA 2620:10a:8053::2 j.ca-servers.ca. 172800 IN AAAA 2001:500:83::1 x.ca-servers.ca. 172800 IN AAAA 2620:10a:80ba::68 any.ca-servers.ca. 172800 IN AAAA 2001:500:a7::2 ;; Query time: 103 msec ;; SERVER: 198.97.190.53#53(198.97.190.53) ;; WHEN: Sat Dec 04 11:23:32 EST 2021 ;; MSG SIZE rcvd: 289 dog 也显示了 “附加” 部分的记录，但它没有明确指出哪个是哪个（我猜 + 意味着它在附加部分？） ，但它似乎没有显示“权威”部分的记录。\n$ dog @h.root-servers.net. jvns.ca NS ca. 2d0h00m00s A \"c.ca-servers.ca.\" NS ca. 2d0h00m00s A \"j.ca-servers.ca.\" NS ca. 2d0h00m00s A \"x.ca-servers.ca.\" NS ca. 2d0h00m00s A \"any.ca-servers.ca.\" A c.ca-servers.ca. 2d0h00m00s + 185.159.196.2 A j.ca-servers.ca. 2d0h00m00s + 198.182.167.1 A x.ca-servers.ca. 2d0h00m00s + 199.253.250.68 A any.ca-servers.ca. 2d0h00m00s + 199.4.144.2 AAAA c.ca-servers.ca. 2d0h00m00s + 2620:10a:8053::2 AAAA j.ca-servers.ca. 2d0h00m00s + 2001:500:83::1 AAAA x.ca-servers.ca. 2d0h00m00s + 2620:10a:80ba::68 AAAA any.ca-servers.ca. 2d0h00m00s + 2001:500:a7::2 而 host 似乎只显示“答案”部分的记录（在这种情况下没有得到记录）：\n$ host jvns.ca h.root-servers.net Using domain server: Name: h.root-servers.net Address: 198.97.190.53#53 Aliases: 总之，我认为这些更简单的 DNS 工具很好（我甚至自己做了一个 简单的网络 DNS 工具），如果你觉得它们更容易，你绝对应该使用它们，但这就是为什么我坚持使用 dig 的原因。drill 的输出格式似乎与 dig 的非常相似，也许 drill 更好！但我还没有真正试过它。\nSamba Samba 是 SMB/CIFS 网络协议的重新实现, 可以在 Linux 和 Windows 系统间进行文件、打印机共享，和 NFS 的功能类似。\n安装 $ sudo apt install samba $ sudo systemctl enable --now smbd.service Samba 服务的配置文件是 /etc/samba/smb.conf，smb.conf(5)提供了详细的文档。\n如果使用了 防火墙，请记得打开需要的端口(通常是 137-139 + 445)。完整列表请查看 Samba 端口使用。\n$ sudo ufw allow Samba $ sudo ufw reload 创建共享 创建的目录即之后能够在Windows主机上直接访问的目录。例如：在用户samba_user的主目录下新建share文件夹为共享目录，由于Windows下的文件夹需可读可写可执行，需更改权限为777\n$ mkdir /home/samba_user/smbshare $ sudo chmod 777 /home/samba_user/smbshare 修改 /etc/samba/smb.conf，在smb.conf文件最后加上以下内容\n$ sudo vim /etc/samba/smb.conf [share] path = /home/samba_user/smbshare public = yes writable = yes valid users = samba_user create mask = 0644 force create mode = 0644 directory mask = 0755 force directory mode = 0755 available = yes  [share]表示共享文件夹的别名，之后将直接使用这个别名 force create mode 与 force directory mode的设置是因为Windows下与Linux下文件和文件夹的默认权限不同造成的，Windows下新建的文件是可执行的，必须强制设定其文件权限。 valid users 设置为你当前的Linux用户名，例如我的是samba_user，因为第一次打开共享文件夹时，需要验证权限。  用户管理 Samba 需要 Linux 账户才能使用 - 可以使用已有账户或创建新用户。\n虽然用户名可以和 Linux 系统共享，Samba 使用单独的密码管理，将下面的 samba_user 替换为上面设置的 valid users:\n$ sudo smbpasswd -a samba_user 根据服务器角色的差异，可能需要修改已有的文件权限和属性。\nWhich is faster-Samba or scp? Depends on the machines. Machines with really fast CPU may do SCP or SFTP faster.\nOtherwise, Samba will probably be faster because it doesn’t have to encrypt.\nConnect to servers with nautilus Step 1: find the “Other Locations” button on the left-hand side of the Gnome file manager and click on the mouse.\nStep 2: make your way to the “Connect to Server” text box and tap on it with the mouse.\nStep 3: write out smb:// followed by the IP address of the Samba file server. Alternatively, write out the hostname of the file server, as that works as well. Confused? Copy the examples below.\n# ip address smb://ip.address.of.samba.file.server # hostname smb://MyExampleSambaShare ftp://ip.address.of.ftp.server nfs://ip.address.of.nfs.server Step 4: click on the “Connect” button to send out a new Samba connection. Assuming your file server has no user-name setup and is public, you’ll instantly see the files and be able to interact with the server.\nHowever, if your server requires a username/password, you must fill out the username/password before using Samba.\nMount Samba Share in Linux List available shares on server:\nInstall the samba client library:\n$ sudo apt install smbclient Then list the shares:\n$ smbclient -L // You will then be prompted to enter a password (assuming your share requires one) and then will output something like this:\nSharename Type Comment --------- ---- ------- folder-mount-1 Disk Description 1 folder-mount-2 Disk Description 2 folder-mount-3 Disk Description 3 IPC$ IPC IPC Service (Server Name) Note the share name that you want to mount for later.\n Temp mount the share to a folder:\nInstall the cifs-utils package:\n$ sudo apt install cifs-utils Create the mount-point (folder) and then mount the share:\n$ sudo mkdir /mnt/myFolder $ sudo mount -t cifs -o username=serverUserName //myServerIpAdress/sharename /mnt/myFolder/ (Note: this will unmount upon reboot.)\n Permanently mount the share to a folder:\nInstall the cifs-utils package:\n$ sudo apt install cifs-utils Create the mount-point (folder):\n$ sudo mkdir /mnt/myFolder Modify your fstab file:\n$ sudo vi /etc/fstab Place the following line at or near the bottom of the file:\n$ /// /mnt/myFolder/ cifs username=YOURUSERNAME,password=YOURPASSWORD,iocharset=utf8,file_mode=0777,dir_mode=0777 (be sure to swap in your info into the line above)\nReboot your server and you should be off to the races. To confirm that it is still mounted, type df -h and look found your mount in the list.\nsudo 简单的说，sudo 是一种权限管理机制，管理员可以授权于一些普通用户去执行一些 root 执行的操作，而不需要知道 root 的密码。\n严谨些说，sudo 允许一个已授权用户以超级用户或者其它用户的角色运行一个命令。当然，能做什么不能做什么都是通过安全策略来指定的。sudo 支持插件架构的安全策略，并能把输入输出写入日志。第三方可以开发并发布自己的安全策略和输入输出日志插件，并让它们无缝的和 sudo 一起工作。默认的安全策略记录在 /etc/sudoers 文件中。而安全策略可能需要用户通过密码来验证他们自己。也就是在用户执行 sudo 命令时要求用户输入自己账号的密码。如果验证失败，sudo 命令将会退出。\n命令语法 $ sudo [-bhHpV][-s ][-u ][指令] $ sudo [-klv] 参数：\n -b 在后台执行指令。 -h 显示帮助。 -H 将HOME环境变量设为新身份的HOME环境变量。 -k 结束密码的有效期限，也就是下次再执行sudo时便需要输入密码。 -l 列出目前用户可执行与无法执行的指令。 -p 改变询问密码的提示符号。 -s 执行指定的shell。 -u  以指定的用户作为新的身份。若不加上此参数，则预设以root作为新的身份。 -v 延长密码有效期限5分钟。 -V 显示版本信息。 -S 从标准输入流替代终端来获取密码  基本配置 系统默认创建了一个名为 sudo 的组。只要把用户加入这个组，用户就具有了 sudo 的权限。\n至于如何把用户加入 sudo 组，您可以直接编辑 /etc/group 文件，当然您得使用一个有 sudo 权限的用户来干这件，在 sudo 组中加入新的用户，要使用逗号分隔多个用户。\n或者您可以使用 usermod 命令把用户添加到一个组中：\n$ sudo usermod -a -G sudo jack 上面的设置中我们把用户 jack 添加到了 sudo 组中，所以当用户 jack 登录后就可以通过 sudo 命令以 root 权限执行命令了！\n详细配置 在前面的配置中我们只是把用户 jack 加入了 sudo 组，他就具有了通过 root 权限执行命令的能力。\n现在我们想问一下，这是怎么发生的？是时候介绍如何配置 sudo 命令了！\nsudo 命令的配置文件为 /etc/sudoers。\n编辑这个文件是有单独的命令的 visudo，这个文件我们最好不要使用 vim 命令来打开，是因为一旦你的语法写错会造成严重的后果，这个工具会替你检查你写的语法，这个文件的语法遵循以下格式：\nwho where whom command 说白了就是哪个用户在哪个主机以谁的身份执行那些命令，那么这个 where, 是指允许在那台主机 ssh 连接进来才能执行后面的命令，文件里面默认给 root 用户定义了一条规则：\nroot ALL=(ALL:ALL) ALL  root 表示 root 用户。 ALL 表示从任何的主机上都可以执行，也可以这样 192.168.100.0/24。 (ALL:ALL) 是以谁的身份来执行，ALL:ALL 就代表 root 可以任何人的身份来执行命令。 ALL 表示任何命令。  那么整条规则就是 root 用户可以在任何主机以任何人的身份来执行所有的命令。\n现在我们可以回答 jack 为什么具有通过 root 权限执行命令的能力了。打开 /etc/sudoers 文件：\n%sudo ALL=(ALL:ALL) ALL sudo 组中的所有用户都具有通过 root 权限执行命令的能力！\n再看个例子：\nnick 192.168.10.0/24=(root) /usr/sbin/useradd 上面的配置只允许 nick 在 192.168.10.0/24 网段上连接主机并且以 root 权限执行 useradd 命令。\n设置 sudo 时不需要输入密码\n只需要在配置行中添加 NOPASSWD: 就可以了：\n%sudo ALL=(ALL:ALL) NOPASSWD:ALL 日志 在 ubuntu 中，sudo 的日志默认被记录在 /var/log/auth.log 文件中。当我们执行 sudo 命令时，相关日志都是会被记录下来的。\n与输出重定向 如果当前用户没有某个文件的写权限，又要通过输出重定向往该文件中写入内容。结果只能是 “Permission denied”。\n比如当前用户为 nick，下面的命令试图查询 /root 目录下的文件并把结果写入到 /root/test.txt 文件中，注意用户 nick 没有对 /root/test.txt 文件的写权限：\n$ sudo ls -al /root/test.txt -rw-r--r-- 1 root root 0 Jan 10 05:19 /root/test.txt $ sudo ls -al /root  /root/test.txt -bash: /root/test.txt: Premission denied 不工作的原因是：虽然 ls 命令是以 sudo 方式执行的，但是输出重定向操作是由当前 shell 执行的，它(当前 shell)没有 /root/test.txt 文件的权限，所以最终失败。\n搞清楚了原因，就可以通过不同的方式来解决这个问题了，下面介绍四种方式。\n以 sudo 方式运行 shell\n既然是 shell 进程没有权限，那就用 sudo 的方式执行 shell：\n$ sudo bash -c 'ls -al /root  /root/test.txt' 把命令写入脚本，以 sudo 方式执行脚本\n把下面的代码保存到脚本文件 test.sh 中：\n#!/bin/bash ls -al /root  /root/test.txt 然后通过下面的方式执行：\n$ chmod +x test.sh $ sudo ./test.sh 如果觉着创建脚本麻烦的话还可以使用变通的方式：\n$ sudo bash  ls -al /root  /root/test.txt  EOF 或者是下面的写法：\n$ echo 'ls -al /root  /root/test.txt' | sudo bash 先通过 sudo -s 启动 shell，然后执行命令\n先通过 sudo -s 命令切换到 root 用户再执行命令，最后 ctrl + d 退出。\n通过 sudo tee 命令实现\nTee 命令用于将数据重定向到文件，另一方面还可以提供一份重定向数据的副本作为后续命令的 stdin。简单的说就是把数据重定向到给定文件和屏幕上：\n面的命令中通过 sudo tee 把 ls 命令的输出写入文件：\n$ sudo ls -al /root | sudo tee /root/test.txt  /dev/null 其中的  /dev/null 阻止 tee 把内容输出到终端。\nfdisk Linux 系统中所有的硬件设备都是通过文件的方式来表现和使用的，我们将这些文件称为设备文件，硬盘对应的设备文件一般被称为块设备文件。\n磁盘分类 比较常见的磁盘类型有消费类市场中的 SATA 硬盘和服务器中使用的 SCSI 硬盘、SAS 硬盘，当然还有当下大热的各种固态硬盘。\nSATA 硬盘\nSATA(Serial ATA)口的硬盘又叫串口硬盘，Serial ATA 采用串行连接方式，串行 ATA 总线使用嵌入式时钟信号，具备了更强的纠错能力，与以往相比其最大的区别在于能对传输指令(不仅仅是数据)进行检查，如果发现错误会自动矫正，这在很大程度上提高了数据传输的可靠性。串行接口还具有结构简单、支持热插拔的优点。SATA 硬盘主要用于消费类市场和一些低端服务器：\nSCSI 硬盘\nSCSI 硬盘即采用 SCSI 接口的硬盘。它由于性能好、稳定性高，因此在服务器上得到广泛应用。同时其价格也不菲，正因它的价格昂贵，所以在普通PC上很少见到它的踪迹。SCSI 硬盘使用 50 针接口，外观和普通硬盘接口有些相似(下图来自互联网)：\nSAS 硬盘\nSAS 是 Serial Attached SCSI 的缩写，即串行连接的 SCSI，其目标是定义一个新的串行点对点的企业级存储设备接口。串行接口减少了线缆的尺寸，允许更快的传输速度。SAS 硬盘与相同转速的 SCSI 硬盘相比有相同或者更好的性能。SAS 硬盘一般用于比较高端的服务器。\n固态硬盘\n固态硬盘(Solid State Disk)，一般称之为 SSD 硬盘，固态硬盘是用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单元(FLASH芯片、DRAM芯片)组成。其主要特点是没有传统硬盘的机械结构，读写速度非常快(下图来自互联网)：\n表示方法 在 Linux 系统中磁盘设备文件的命名规则为：\n主设备号 + 次设备号 + 磁盘分区号 对于目前常见的磁盘，一般表示为：\nsd[a-z]x  主设备号代表设备的类型，相同的主设备号表示同类型的设备。当前常见磁盘的主设备号为 sd。 次设备号代表同类设备中的序号，用 “a-z” 表示。比如 /dev/sda 表示第一块磁盘，/dev/sdb 表示第二块磁盘。 x 表示磁盘分区编号。在每块磁盘上可能会划分多个分区，针对每个分区，Linux 用 /dev/sdbx 表示，这里的 x 表示第二块磁盘的第 x 个分区。  磁盘分区 创建磁盘分区大概有下面几个目的：\n 提升数据的安全性(一个分区的数据损坏不会影响其他分区的数据) 支持安装多个操作系统 多个小分区对比一个大分区会有性能提升 更好的组织数据  本文以常见的 MBR 分区为例介绍磁盘分区中的一些常见概念。MBR 磁盘的分区由主分区、扩展分区和逻辑分区组成。在一块磁盘上，主分区的最大个数是 4，其中扩展分区也是一个主分区，并且最多只能有一个扩展分区，但可以在扩展分区上创建多个逻辑分区。因此主分区(包括扩展分区)的范围是 1-4，逻辑分区从 5 开始。对于逻辑分区，Linux 规定它们必须建立在扩展分区上，而不是建立在主分区上。\n主分区的作用是用来启动操作系统的，主要存放操作系统的启动或引导程序。\n扩展分区只不过是逻辑分区的 “容器”。实际上只有主分区和逻辑分区是用来进行数据存储的，因而可以将数据集中存放在磁盘的逻辑分区中。\n我们可以通过 fdisk 命令来查看磁盘分区的信息：\n$ sudo fdisk -l /dev/sda 分区信息：\n Device 显示了磁盘分区对应的设备文件名。 Boot 显示是否为引导分区，是引导分区就有一个 ‘*’ 号。 Start 表示磁盘分区的起始位置。 End 表示磁盘分区的结束位置。 Sectors 表示分区占用的扇区数目。 Size 显示分区的大小。 Id/Type 显示的内容相同，分别是数值 ID 及其文字描述。 Id 列显示了磁盘分区对应的 ID，根据分区的不同，分区对应的 ID 号也不相同。Linux 下用 83 表示主分区和逻辑分区，5 表示扩展分区，8e 表示 LVM 分区，82 表示交换分区，7 表示 NTFS 分区。  划分磁盘分区 fdisk 是 Linux 系统中一款功能强大的磁盘分区管理工具，可以观察硬盘的使用情况，也可以用来管理磁盘分区。\n假设我们的 Linux 系统中增加了一块新的磁盘，系统对应的设备名为 /dev/sdd，下面我们通过 fdisk 命令对这个磁盘进行分区：\n$ (echo n; echo p; echo 1; echo ; echo ; echo w) | sudo fdisk /dev/sdd  命令 n 来创建新分区 p 来创建主分区 主分区的编号为 1- 4，这里我们输入了 1。 分区的大小是通过设置分区开始处的扇区和结束处的扇区设置的。这里如果回车两次会把整个磁盘划分为一个分区，也就是整个磁盘的容器都分给了一个分区。 注意此时的分区信息还没有写入到磁盘中，在这里还可以反悔，如果确认执行上面的分区，执行 w 命令就行了。  这时分区操作已经完成了，我们可以通过下面的命令查看分区的结果：\n$ sudo fdisk -l /dev/sdd 分区是使用磁盘的基础，在分区完成后还需要对分区进行格式化，并把格式化后的文件系统挂载到 Linux 系统之后才能存储文件。\n更改分区的类型\n创建的分区类型默认为 83(Linux)，如果想要一个 8e(Linux LVM)类型的分区，在 fdisk 输入 t 命令来修改分区的类型。\nfuser 当使用umount命令卸载挂载点时，会遇到“device is busy”提示，这时fuser就能查出谁在使用这个资源。\n描述 fuser可以显示出当前哪个程序在使用磁盘上的某个文件、挂载点、甚至网络端口，并给出程序进程的详细信息。\n每个进程 ID 后面跟有一个字母代码。字母代码的解释如下所述。\n c：表示此进程正在使用该文件作为其当前目录。 e：将此文件作为程序的可执行对象使用 f：打开的文件。默认不显示。 F：打开的文件，用于写操作。默认不显示。 r：表示此进程正在将该文件用作其根目录。 m：指示进程使用该文件进行内存映射，抑或该文件为共享库文件，被进程映射进内存。 s：将此文件作为共享库（或其他可装载对象）使用  对于具有已挂载文件系统的块特殊设备，将列出使用该设备上的任何文件的所有进程。对于所有类型的文件（文本文件、可执行文件、目录、设备，等等），只会报告使用该文件的进程。\n对于所有类型的设备，fuser 还会显示打开设备的任何已知内核使用者。内核使用者显示为下列格式之一：\n[module_name] [module_name,dev_path=path] [module_name,dev=(major,minor)] [module_name,dev=(major,minor),dev_path=path] 如果指定了多组文件，可能需要为其他每个文件组重新指定选项。单个短划线可取消当前施行的选项。\n各个进程 ID 输出到标准输出中的单个行上，并以空格分隔。所有其他输出（包括单个终止换行符）均被写入到标准错误。\n任何用户都可以运行 fuser，但只有超级用户可以终止其他用户的进程。\n选项 支持以下选项：\n -a：显示所有命令行中指定的文件，默认情况下被访问的文件才会被显示。 -c：和-m一样，用于POSIX兼容。 -k：杀掉访问文件的进程。如果没有指定-signal就会发送SIGKILL信号。 -i：杀掉进程之前询问用户，如果没有-k这个选项会被忽略。 -l：列出所有已知的信号名称。 -m：name 指定一个挂载文件系统上的文件或者被挂载的块设备（名称name）。这样所有访问这个文件或者文件系统的进程都会被列出来。如果指定的是一个目录会自动转换成\"name/\",并使用所有挂载在那个目录下面的文件系统。 -n：space 指定一个不同的命名空间(space).这里支持不同的空间文件(文件名，此处默认)、tcp(本地tcp端口)、udp(本地udp端口)。对于端口， 可以指定端口号或者名称，如果不会引起歧义那么可以使用简单表示的形式，例如：name/space (即形如:80/tcp之类的表示)。 -s：静默模式，这时候-u,-v会被忽略。-a不能和-s一起使用。 -signal：使用指定的信号，而不是用SIGKILL来杀掉进程。可以通过名称或者号码来表示信号(例如-HUP,-1),这个选项要和-k一起使用，否则会被忽略。 -u：在每个PID后面添加进程拥有者的用户名称。 -v：详细模式。输出似ps命令的输出，包含PID,USER,COMMAND等许多域,如果是内核访问的那么PID为kernel. -V 输出版本号。 -4：使用IPV4套接字,不能和-6一起应用，只在-n的tcp和udp的命名存在时不被忽略。 -6：使用IPV6套接字,不能和-4一起应用，只在-n的tcp和udp的命名存在时不被忽略。 -：重置所有的选项，把信号设置为SIGKILL.  示例 示例 1 显示使用某个文件的进程信息\n这个命令在umount的时候很有用，可以找到还有哪些用到这个设备了。\n$ fuser -um /dev/sda2 /dev/sda2: 6378c(quietheart) 6534c(quietheart) 6628(quietheart) 6653c(quietheart) 7429c(quietheart) 7549c(quietheart) 7608c(quietheart) 示例 2 杀掉打开readme文件的程序\n这里，会在kill之前询问是否确定。最好加上-v以便知道将要杀那个进程。\n$ fuser -m -k -i readme 示例 3 查看那些程序使用tcp的80端口\n$ fuser -v -n tcp 80 # or $ fuser -v 80/tcp tcpdump tcpdump 是一款 Linux 平台的抓包工具。它可以抓取涵盖整个 TCP/IP 协议族的数据包，支持针对网络层、协议、主机、端口的过滤，并提供 and、or、not 等逻辑语句来过滤无用的信息。\ntcpdump 是一个非常复杂的工具，掌握它的方方面面实属不易，也不推荐，能够用它来解决日常工作问题才是关系。\n命令选项 tcpdump 有很多命令选项，想了解所有选项可以 Linux 命令行输入 tcpdump -h，man tcpdump 查看每个选项的意思。\n下面列举一些常用选项：\n -A 只使用 ASCII 打印报文的全部数据，不要和 -X 一起使用，获取 http 可以用 tcpdump -nSA port 80 -b 在数据链路层上选择协议，包括 ip, arp, rarp, ipx 等 -c 指定要抓取包的数量 -D 列出操作系统所有可以用于抓包的接口 -e 输出链路层报头 -i 指定监听的网卡，-i any 显示所有网卡 -n 表示不解析主机名，直接用 IP 显示，默认是用 hostname 显示 -nn 表示不解析主机名和端口，直接用端口号显示，默认显示是端口号对应的服务名 -p 关闭接口的混杂模式 -P 指定抓取的包是流入的包还是流出的，可以指定参数 in, out, inout 等，默认是 inout -q 快速打印输出，即只输出少量的协议相关信息 -s len 设置要抓取数据包长度为 len，默认只会截取前 96bytes 的内容，-s 0 的话，会截取全部内容。 -S 将 TCP 的序列号以绝对值形式输出，而不是相对值 -t 不要打印时间戳 -vv 输出详细信息（比如 tos、ttl、checksum等） -X 同时用 hex 和 ascii 显示报文内容 -XX 同 -X，但同时显示以太网头部  过滤器 网络报文是很多的，很多时候我们在主机上抓包，会抓到很多我们并不关心的无用包，然后要从这些包里面去找我们需要的信息，无疑是一件费时费力的事情，tcpdump 提供了灵活的语法可以精确获取我们关心的数据，这些语法说得专业点就是过滤器。\n过滤器简单可分为三类：协议（proto）、传输方向（dir）和类型（type）。\n一般的 表达式格式 为：\n 关于 proto：可选有 ip, arp, rarp, tcp, udp, icmp, ether 等，默认是所有协议的包 关于 dir：可选有 src, dst, src or dst, src and dst，默认为 src or dst 关于 type：可选有 host, net, port, portrange（端口范围，比如 21-42），默认为 host  常用操作 测试环境 IP：172.18.82.173\n抓取某主机的数据包 抓取主机 172.18.82.173 上所有收到（DST_IP）和发出（SRC_IP）的所有数据包\n$ tcpdump host 172.18.82.173 抓取经过指定网口 interface ，并且 DST_IP 或 SRC_IP 是 172.18.82.173 的数据包\n$ tcpdump -i eth0 host 172.18.82.173 筛选 SRC_IP，抓取经过 interface 且从 172.18.82.173 发出的包\n$ tcpdump -i eth0 src host 172.18.82.173 筛选 DST_IP，抓取经过 interface 且发送到 172.18.82.173 的包\n$ tcpdump -i eth0 dst host 172.18.82.173 抓取主机 200.200.200.1 和主机 200.200.200.2 或 200.200.200.3 通信的包\n$ tcpdump host 200.200.200.1 and \\(200.200.200.2 or 200.200.200.3\\) 抓取主机 200.200.200.1 和除了主机 200.200.200.2 之外所有主机通信的包\n$ tcpdump ip host 200.200.200.1 and ! 200.200.200.2 抓取某端口的数据包 抓取所有端口，显示 IP 地址\n$ tcpdump -nS 抓取某端口上的包\n$ tcpdump port 22 抓取经过指定 interface，并且 DST_PORT 或 SRC_PORT 是 22 的数据包\n$ tcpdump -i eth0 port 22 筛选 SRC_PORT\n$ tcpdump -i eth0 src port 22 筛选 DST_PORT\n$ tcpdump -i eth0 dst port 22 比如希望查看发送到 host 172.18.82.173 的网口 eth0 的 22 号端口的包\n$ tcpdump -i eth0 -nnt dst host 172.18.82.173 and port 22 -c 1 -vv 抓取某网络（网段）的数据包 抓取经过指定 interface，并且 DST_NET 或 SRC_NET 是 172.18.82 的包\n$ tcpdump -i eth0 net 172.18.82 筛选 SRC_NET\n$ tcpdump -i eth0 src net 172.18.82 筛选 DST_NET\n$ tcpdump -i eth0 dst net 172.18.82 抓取某协议的数据包 $ tcpdump -i eth0 icmp $ tcpdump -i eth0 ip $ tcpdump -i eth0 tcp $ tcpdump -i eth0 udp $ tcpdump -i eth0 arp 复杂的过滤条件 抓取经过 interface eth0 发送到 host 200.200.200.1 或 200.200.200.2 的 TCP 协议 22 号端口的数据包\n$ tcpdump -i eth0 -nntvv -c 10 '((tcp) and (port 22) and ((dst host 200.200.200.1) or (dst host 200.200.200.2)))' 对于复杂的过滤器表达式，为了逻辑清晰，可以使用 ()，不过默认情况下，tcpdump 会将 () 当做特殊字符，所以必须使用 '' 来消除歧义。\n抓取经过 interface eth0， DST_MAC 或 SRC_MAC 地址是 00:16:3e:12:16:e7 的 ICMP 数据包\n$ tcpdump -i eth0 '((icmp) and ((ether host 00:16:3e:12:16:e7)))' -nnvv 抓取经过 interface eth0，目标网络是 172.18 但目标主机又不是 172.18.82.173 的 TCP 且非 22 号端口号的数据包\n$ tcpdump -i eth0 -nntvv '((dst net 172.18) and (not dst host 172.18.82.173) and (tcp) and (not port 22))' 抓取流入 interface eth0，host 为 172.18.82.173 且协议为 ICMP 的数据包\n$ tcpdump -i eth0 -nntvv -P in host 172.18.82.173 and icmp 抓取流出 interface eth0，host 为 172.18.82.173 且协议为 ICMP 的数据包\n$ tcpdump -i eth0 -nntvv -P out host 172.18.82.173 and icmp 与其他工具的配合 tcpdump 抓包的时候，默认是打印到屏幕输出，如果是抓取包少还好，如果包很多，很多行数据，刷刷刷从眼前一闪而过，根本来不及看清内容。不过，tcpdump 提供了将抓取的数据保存到文件的功能，查看文件就方便分析多了，而且还能与其他图形工具一起配合分析，比如 wireshark、Snort 等。\n -w 选项表示把数据报文输出到文件  $ tcpdump -w capture_file.pcap port 80  -r 选项表示读取文件里的数据报文，显示到屏幕上  $ tcpdump -nXr capture_file.pcap host host1 .pcap 格式的文件需要用 wireshark、Snort 等工具查看，使用 vim 或 cat 会出现乱码。\ntcpdump 的输出格式 tcpdump 的输出格式总体上为：\n系统时间 源主机.端口  目标主机.端口 数据包参数 比如下面的例子，显示了 TCP 的三次握手过程：\n21:27:06.995846 IP (tos 0x0, ttl 64, id 45646, offset 0, flags [DF], proto TCP (6), length 64) 192.168.1.106.56166  124.192.132.54.80: Flags [S], cksum 0xa730 (correct), seq 992042666, win 65535, options [mss 1460,nop,wscale 4,nop,nop,TS val 663433143 ecr 0,sackOK,eol], length 0 21:27:07.030487 IP (tos 0x0, ttl 51, id 0, offset 0, flags [DF], proto TCP (6), length 44) 124.192.132.54.80  192.168.1.106.56166: Flags [S.], cksum 0xedc0 (correct), seq 2147006684, ack 992042667, win 14600, options [mss 1440], length 0 21:27:07.030527 IP (tos 0x0, ttl 64, id 59119, offset 0, flags [DF], proto TCP (6), length 40) 192.168.1.106.56166  124.192.132.54.80: Flags [.], cksum 0x3e72 (correct), ack 2147006685, win 65535, length 0 第一条是 SYN 报文，通过 Flags[S] 看出。第二条是 [S.]，表示 SYN-ACK 报文。常见的 TCP 报文的 Flags 如下：\n [S]： SYN（开始连接） [.]: 没有 Flag [P]: PSH（推送数据） [F]: FIN （结束连接） [R]: RST（重置连接）  GPG 前两篇文章，我介绍了RSA算法。\n今天，就接着来看，现实中怎么使用这个算法，对信息加密和解密。这要用到GnuPG软件（简称GPG），它是目前最流行、最好用的加密工具之一。\n什么是GPG 要了解什么是GPG，就要先了解PGP。\n1991年，程序员Phil Zimmermann为了避开政府监视，开发了加密软件PGP。这个软件非常好用，迅速流传开来，成了许多程序员的必备工具。但是，它是商业软件，不能自由使用。所以，自由软件基金会决定，开发一个PGP的替代品，取名为GnuPG。这就是GPG的由来。\nGnuPG 是完整实现了 RFC4880 （即PGP） 所定义的 OpenPGP 标准的自由软件。\nGnuPG 可以加密和签名你的数据和通讯信息，包含一个通用的密钥管理系统以及用于各种公钥目录的访问模块。\nGnuPG 是一个易于与其它程序整合的命令行工具，拥有很多前端程序和函数库。\nGnuPG 还支持 S/MIME 和 Secure Shell (ssh)。\nGPG有许多用途，本文主要介绍文件加密。至于邮件的加密，不同的邮件客户端有不同的设置，请参考Ubuntu网站的介绍。\n本文的使用环境为Linux命令行。如果掌握了命令行，Windows 或 Mac OS 客户端，就非常容易掌握。GPG并不难学，学会了它，从此就能轻松传递加密信息。建议读者一步步跟着教程做，对每条命令都自行测试。\n安装 GPG有两种安装方式。可以下载源码，自己编译安装。\n$ ./configure $ make $ make install 也可以安装编译好的二进制包。\n$ sudo apt-get install gnupg 安装完成后，键入下面的命令：\n$ gpg --help 如果屏幕显示GPG的帮助，就表示安装成功。\n配置 目录位置 GnuPG 用环境变量 $GNUPGHOME 定位配置文件的位置，默认情况下此变量并未被设置，会直接使用 $HOME，所以默认的配置目录是 ~/.gnupg。\n要改变默认位置，执行 $ gpg --homedir path/to/file 或在 startup files 中设置 GNUPGHOME。\n配置文件 默认的配置文件是 ~/.gnupg/gpg.conf 和 ~/.gnupg/dirmngr.conf.\ngnupg 目录的默认 权限 是 700，其中文件的权限是 600. 仅目录的所有者有权读写，访问这些文件。这是基于安全考虑，请不要变更。如果不使用这样的安全权限设置，会收到不安全文件的警告。\n在文件中附加需要的文件：/usr/share/gnupg 包含基本架构文件. gpg，第一次运行时，如果配置文件不存在，会自动复制文件到 ~/.gnupg。\n新用户的默认选项 要给新建用户设定一些默认选项，把配置文件放到 /etc/skel/.gnupg/。系统创建新用户时，就会把文件复制到 GnuPG 目录。还有一个 addgnupghome 命令可以为已有用户创建新 GnuPG 主目录：\n# addgnupghome user1 user2 此命令会将对检查 /home/user1/.gnupg 和 /home/user2/.gnupg，如果用户的 GnuPG 主目录不存在，就会从 skeleton 目录复制文件过去。\n生成密钥 安装成功后，使用 --full-generate-key 参数生成自己的密钥。\n$ gpg --full-generate-key 或用 gpg --gen-key 快速生成。以下使用 gpg2 --full-generate-key 演示。\n回车以后，会跳出一大段文字：\ngpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc. This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Please select what kind of key you want: (1) RSA and RSA (default) (2) DSA and Elgamal (3) DSA (sign only) (4) RSA (sign only) (14) Existing key from card Your selection? 第一段是版权声明，然后让用户自己选择加密算法。默认选择第一个选项，表示加密和签名都使用RSA算法。\n然后，系统就会问你密钥的长度。\nRSA keys may be between 1024 and 4096 bits long. What keysize do you want? (3072) 密钥越长越安全。\n接着，设定密钥的有效期。\nPlease specify how long the key should be valid. 0 = key does not expire  = key expires in n days w = key expires in n weeks m = key expires in n months y = key expires in n years Key is valid for? (0) 如果密钥只是个人使用，并且你很确定可以有效保管私钥，建议选择第一个选项，即永不过期。回答完上面三个问题以后，系统让你确认。\nIs this correct? (y/N) 输入y，系统就要求你提供个人信息。\nGnuPG needs to construct a user ID to identify your key. Real name: Email address Comment: “真实姓名\"填入你姓名的英文写法，“电子邮件地址\"填入你的邮件地址，“注释\"这一栏可以空着。\n然后，你的\"用户ID\"生成了。\nYou selected this USER-ID: \"Vane Hsiung \" 系统会让你最后确认一次。\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? 输入O表示\"确定”。\n接着，系统会要求你做一些随机的举动，以生成一个随机数。同时系统会让你设定一个私钥的密码。这是为了防止误操作，或者系统被侵入时有人擅自动用私钥。\nWe need to generate a lot of random bytes. It is a good idea to performsome other action (type on the keyboard, move the mouse, utilize thedisks) during the prime generation; this gives the random numbergenerator a better chance to gain enough entropy. 然后，系统就开始生成密钥了，\n几分钟以后，系统提示密钥已经生成了。\ngpg: key B893B73ABC92D2CA marked as ultimately trusted gpg: revocation certificate stored as ''public and secret key created and signed. 请注意上面的字符串\"B893B73ABC92D2CA”，这是\"用户ID\"的Hash字符串，可以用来替代\"用户ID”。\n这时，最好再生成一张\"撤销证书\"，以备以后密钥作废时，可以请求外部的公钥服务器撤销你的公钥。\n$ gpg --gen-revoke [用户ID] 上面的\"用户ID\"部分，可以填入你的邮件地址或者Hash字符串（以下同）。\n密钥管理 列出密钥\nlist-keys参数列出系统中已有的密钥．\n$ gpg --list-keys 显示结果如下：\ngpg: checking the trustdb gpg: marginals needed: 3 completes needed: 1 trust model: pgp gpg: depth: 0 valid: 1 signed: 0 trust: 0-, 0q, 0n, 0m, 0f, 1u /home/vane/.gnupg/pubring.kbx ----------------------------- pub rsa3072 2021-10-17 [SC] BC158F7500033355B5324CF14C701F8BF2E03463 uid [ultimate] Vane Hsiung  sub rsa3072 2021-10-17 [E] 第一行显示公钥文件名（pubring.gpg），第二行显示公钥特征（4096位，Hash字符串和生成时间），第三行显示\"用户ID\"，第四行显示私钥特征。\n如果你要从密钥列表中删除某个密钥，可以使用如下参数。\n$ gpg --delete-secret-keys [用户ID] $ gpg --delete-key [用户ID] 输出密钥\n公钥文件（.gnupg/pubring.gpg）以二进制形式储存，armor参数可以将其转换为ASCII码显示。\n$ gpg --armor --output public-key.txt --export [用户ID] “用户ID\"指定哪个用户的公钥，output参数指定输出文件名（public-key.txt）。\n类似地，export-secret-keys参数可以转换私钥。\n$ gpg --armor --output private-key.txt --export-secret-keys 上传公钥\n公钥服务器是网络上专门储存用户公钥的服务器。send-keys参数可以将公钥上传到服务器。\n$ gpg --send-keys [用户ID] --keyserver hkp://subkeys.pgp.net 使用上面的命令，你的公钥就被传到了服务器subkeys.pgp.net，然后通过交换机制，所有的公钥服务器最终都会包含你的公钥。\n由于公钥服务器没有检查机制，任何人都可以用你的名义上传公钥，所以没有办法保证服务器上的公钥的可靠性。通常，你可以在网站上公布一个公钥指纹，让其他人核对下载到的公钥是否为真。fingerprint参数生成公钥指纹。\n$ gpg --fingerprint [用户ID] 输入密钥\n除了生成自己的密钥，还需要将他人的公钥或者你的其他密钥输入系统。这时可以使用import参数。\n$ gpg --import [密钥文件] 为了获得他人的公钥，可以让对方直接发给你，或者到公钥服务器上寻找。\n$ gpg --keyserver hkp://subkeys.pgp.net --search-keys [用户ID] 正如前面提到的，我们无法保证服务器上的公钥是否可靠，下载后还需要用其他机制验证．\n加密和解密 加密\n假定有一个文本文件demo.txt，怎样对它加密呢？\nencrypt参数用于加密。\n$ gpg --recipient [用户ID] --output demo.en.txt --encrypt demo.txt recipient参数指定接收者的公钥，output参数指定加密后的文件名，encrypt参数指定源文件。运行上面的命令后，demo.en.txt就是已加密的文件，可以把它发给对方。\n解密\n对方收到加密文件以后，就用自己的私钥解密。\n$ gpg --output demo.de.txt --decrypt demo.en.txt output 指定解密后生成的文件，decrypt参数指定需要解密的文件。运行上面的命令，demo.de.txt就是解密后的文件。\nGPG允许省略decrypt参数。\n$ gpg demo.en.txt 签名 对文件签名\n有时，我们不需要加密文件，只需要对文件签名，表示这个文件确实是我本人发出的。sign参数用来签名。\n$ gpg --sign demo.txt 运行上面的命令后，当前目录下生成demo.txt.gpg文件，这就是签名后的文件。这个文件默认采用二进制储存，如果想生成ASCII码的签名文件，可以使用clearsign参数。\n$ gpg --clearsign demo.txt 运行上面的命令后 ，当前目录下生成demo.txt.asc文件，后缀名asc表示该文件是ASCII码形式的。\n如果想生成单独的签名文件，与文件内容分开存放，可以使用detach-sign参数。　$ gpg --detach-sign demo.txt 运行上面的命令后，当前目录下生成一个单独的签名文件demo.txt.sig。该文件是二进制形式的，如果想采用ASCII码形式，要加上armor参数。　$ gpg --armor --detach-sign demo.txt 签名+加密\n上一节的参数，都是只签名不加密。如果想同时签名和加密，可以使用下面的命令。\n$ gpg --local-user [发信者ID] --recipient [接收者ID] --armor --sign --encrypt demo.txt local-user参数指定用发信者的私钥签名，recipient参数指定用接收者的公钥加密，armor参数表示采用ASCII码形式显示，sign参数表示需要签名，encrypt参数表示指定源文件。\n验证签名\n我们收到别人签名后的文件，需要用对方的公钥验证签名是否为真。verify参数用来验证。\n$ gpg --verify demo.txt.asc demo.txt 举例来说，openvpn网站就提供每一个下载包的gpg签名文件。你可以根据它的说明，验证这些下载包是否为真。\nOthers Ubuntu Packages Search List of applications:Arch Recommended applications: Gentoo 常用软件:openSUSE Awesome-Linux-Software 应用下载-优麒麟 国内应用 wine 版 deb 包。\nAUR 抄安装脚本。\nGentoo Portage Overlays 抄安装脚本。\n铜豌豆软件生态  铜豌豆 Linux 收集整理制作了大量中国人常用的应用软件，丰富 Linux 桌面系统软件生态。 大家可以在添加铜豌豆软件源后，来安装使用这些软件包。 铜豌豆软件源不但支持 铜豌豆 Linux 系统，还支持 Debian 系的所有 Linux 发行版。Debian、Armbian、Ubuntu、深度、优麒麟、红旗等。  ",
  "wordCount" : "159032",
  "inLanguage": "en",
  "datePublished": "2022-03-08T15:32:08+08:00",
  "dateModified": "2022-03-08T15:32:08+08:00",
  "author":{
    "@type": "Person",
    "name": "Sakamoto Kurome"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sakamotokurome.github.io/posts/ubuntudesktop/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sakamoto Kurome",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sakamotokurome.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sakamotokurome.github.io/" accesskey="h" title="Sakamoto Kurome (Alt + H)">Sakamoto Kurome</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sakamotokurome.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://sakamotokurome.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Ubuntu Desktop
    </h1>
    <div class="post-meta"><span title='2022-03-08 15:32:08 +0800 CST'>March 8, 2022</span>&nbsp;·&nbsp;318 min&nbsp;·&nbsp;Sakamoto Kurome

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%ad%a6%e4%b9%a0-linux-%e5%87%a0%e7%82%b9%e5%bf%a0%e5%91%8ahttpswikiubuntuorgcne5ada6e4b9a0_linux_e587a0e782b9e5bfa0e5918a" aria-label="学习 Linux 几点忠告"><a href="https://wiki.ubuntu.org.cn/%E5%AD%A6%E4%B9%A0_Linux_%E5%87%A0%E7%82%B9%E5%BF%A0%E5%91%8A">学习 Linux 几点忠告</a></a></li>
                <li>
                    <a href="#settings" aria-label="Settings">Settings</a><ul>
                        
                <li>
                    <a href="#dns" aria-label="DNS">DNS</a></li>
                <li>
                    <a href="#others" aria-label="Others">Others</a></li></ul>
                </li>
                <li>
                    <a href="#softwareupdates" aria-label="SoftWare&amp;amp;Updates">SoftWare&amp;Updates</a></li>
                <li>
                    <a href="#input-method-editor" aria-label="Input Method Editor">Input Method Editor</a><ul>
                        
                <li>
                    <a href="#ibus" aria-label="IBus">IBus</a></li>
                <li>
                    <a href="#fcitx-4" aria-label="Fcitx 4">Fcitx 4</a></li>
                <li>
                    <a href="#fcitx-5httpsfcitx-imorgwikifcitx_5" aria-label="Fcitx 5"><a href="https://fcitx-im.org/wiki/Fcitx_5">Fcitx 5</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85httpsplumzmearchives11740" aria-label="安装"><a href="https://plumz.me/archives/11740/">安装</a></a></li>
                <li>
                    <a href="#%e8%82%a5%e7%8c%ab%e7%99%be%e4%b8%87%e5%a4%a7%e8%af%8d%e5%ba%93httpsgithubcomfelixonmarsfcitx5-pinyin-zhwiki" aria-label="肥猫百万大词库"><a href="https://github.com/felixonmars/fcitx5-pinyin-zhwiki">肥猫百万大词库</a></a></li>
                <li>
                    <a href="#fcitx5-%e7%9a%ae%e8%82%a4%e7%bb%98%e5%88%b6%e7%ae%80%e6%98%93%e6%95%99%e7%a8%8bhttpsforumsuseorgcnttopic14474" aria-label="fcitx5 皮肤绘制简易教程"><a href="https://forum.suse.org.cn/t/topic/14474">fcitx5 皮肤绘制简易教程</a></a></li>
                <li>
                    <a href="#tips" aria-label="Tips">Tips</a></li></ul>
                </li>
                <li>
                    <a href="#rimehttpswwwcnblogscomkeatonlaop12983158html" aria-label="RIME"><a href="https://www.cnblogs.com/keatonlao/p/12983158.html">RIME</a></a><ul>
                        
                <li>
                    <a href="#%e5%bf%85%e7%9f%a5%e5%bf%85%e4%bc%9a" aria-label="必知必会">必知必会</a></li>
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6" aria-label="定制">定制</a><ul>
                        
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e6%8c%87%e5%8d%97" aria-label="定制指南">定制指南</a></li>
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e6%af%8f%e9%a1%b5%e5%80%99%e9%80%89%e6%95%b0" aria-label="定制每页候选数">定制每页候选数</a></li>
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e6%96%b9%e6%a1%88%e9%80%89%e5%8d%95" aria-label="定制方案选单">定制方案选单</a></li>
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e5%ad%97%e4%bd%93%e5%ad%97%e5%8f%b7" aria-label="定制字体字号">定制字体字号</a></li>
                <li>
                    <a href="#%e6%a8%aa%e6%8e%92%e4%b8%8e%e7%ab%96%e6%8e%92%e5%80%99%e9%80%89%e7%a0%81httpsgithubcomrimehomewikicustomizationguidee5b08fe78bbce6afabe5a496e8a780e8a8ade5ae9a" aria-label="横排与竖排候选码"><a href="https://github.com/rime/home/wiki/CustomizationGuide#%E5%B0%8F%E7%8B%BC%E6%AF%AB%E5%A4%96%E8%A7%80%E8%A8%AD%E5%AE%9A">横排与竖排候选码</a></a></li>
                <li>
                    <a href="#%e5%ae%9a%e5%88%b6%e7%9a%ae%e8%82%a4httpsjdhaogithubio20190218rime_configuration_intro" aria-label="定制皮肤"><a href="https://jdhao.github.io/2019/02/18/rime_configuration_intro/">定制皮肤</a></a></li>
                <li>
                    <a href="#%e8%be%93%e5%85%a5%e7%ac%a6%e5%8f%b7" aria-label="输入符号">输入符号</a></li>
                <li>
                    <a href="#%e7%ac%a6%e5%8f%b7%e8%87%aa%e5%ae%9a%e4%b9%89" aria-label="符号自定义">符号自定义</a></li>
                <li>
                    <a href="#%e8%be%93%e5%85%a5%e7%9b%b4%e8%a7%92%e5%bc%95%e5%8f%b7" aria-label="输入直角引号">输入直角引号</a></li>
                <li>
                    <a href="#%e6%9c%99%e6%9c%88%e6%8b%bc%e9%9f%b3%e7%ae%80%e5%8c%96%e5%ad%97%e6%89%a9%e5%b1%95%e8%af%8d%e5%ba%93" aria-label="朙月拼音·简化字扩展词库">朙月拼音·简化字扩展词库</a></li>
                <li>
                    <a href="#%e5%a2%9e%e5%8a%a0%e8%87%aa%e5%b7%b1%e7%9a%84%e8%af%8d%e5%ba%93" aria-label="增加自己的词库">增加自己的词库</a></li>
                <li>
                    <a href="#%e5%af%bc%e5%85%a5%e5%85%b6%e4%bb%96%e8%af%8d%e5%ba%93httpswikiarchlinuxorgtitlefcitx5_e7ae80e4bd93e4b8ade69687e5afbce585a5e8af8de5ba93" aria-label="导入其他词库"><a href="https://wiki.archlinux.org/title/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AF%BC%E5%85%A5%E8%AF%8D%E5%BA%93">导入其他词库</a></a></li>
                <li>
                    <a href="#%e6%9c%99%e6%9c%88%e6%8b%bc%e9%9f%b3%e7%ae%80%e5%8c%96%e5%ad%97%e9%bb%98%e8%ae%a4%e8%8b%b1%e6%96%87" aria-label="朙月拼音·简化字默认英文">朙月拼音·简化字默认英文</a></li>
                <li>
                    <a href="#%e6%a8%a1%e7%b3%8a%e6%8b%bc%e9%9f%b3" aria-label="模糊拼音">模糊拼音</a></li>
                <li>
                    <a href="#%e5%90%8c%e6%ad%a5%e7%94%a8%e6%88%b7%e8%b5%84%e6%96%99" aria-label="同步用户资料">同步用户资料</a></li>
                <li>
                    <a href="#%e6%96%b0%e4%b8%96%e7%ba%aa%e4%ba%94%e7%ac%94" aria-label="新世纪五笔">新世纪五笔</a></li>
                <li>
                    <a href="#easy-english" aria-label="Easy english">Easy english</a></li>
                <li>
                    <a href="#%e8%be%93%e5%85%a5%e6%97%a5%e6%9c%9f" aria-label="输入日期">输入日期</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e8%a1%a8%e6%83%85-emoji" aria-label="安装表情 emoji">安装表情 emoji</a></li>
                <li>
                    <a href="#%e5%88%87%e6%8d%a2%e4%b8%ad%e8%8b%b1%e6%96%87httpszhuanlanzhihucomp91129641" aria-label="切换中英文"><a href="https://zhuanlan.zhihu.com/p/91129641">切换中英文</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e5%8f%b6%e8%8d%89%e6%8b%bc%e9%9f%b3%e8%be%93%e5%85%a5%e6%96%b9%e6%a1%88httpsgithubcomfkxxyzrime-cloverpinyinwikilinux" aria-label="四叶草拼音输入方案"><a href="https://github.com/fkxxyz/rime-cloverpinyin/wiki/linux">四叶草拼音输入方案</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#automatically-switch-wallpapers" aria-label="Automatically switch wallpapers">Automatically switch wallpapers</a><ul>
                        
                <li>
                    <a href="#apps" aria-label="Apps">Apps</a></li>
                <li>
                    <a href="#varietyhttpsgithubcomvarietywallsvariety" aria-label="Variety"><a href="https://github.com/varietywalls/variety">Variety</a></a></li>
                <li>
                    <a href="#unsplashshhttpsyounessnetlinuxset-random-wallpapers-unsplash-com-ubuntu" aria-label="unsplash.sh"><a href="https://youness.net/linux/set-random-wallpapers-unsplash-com-ubuntu">unsplash.sh</a></a></li>
                <li>
                    <a href="#wallhavensh" aria-label="wallhaven.sh">wallhaven.sh</a></li>
                <li>
                    <a href="#astronomyshhttpsapinasagov" aria-label="astronomy.sh"><a href="https://api.nasa.gov/">astronomy.sh</a></a></li></ul>
                </li>
                <li>
                    <a href="#social" aria-label="Social">Social</a><ul>
                        
                <li>
                    <a href="#telegramhttpswwwnotionsotelegram-95a6c23f0bb1466892b55f9ec8c755fd" aria-label="Telegram"><a href="https://www.notion.so/Telegram-95a6c23f0bb1466892b55f9ec8c755fd">Telegram</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8b" aria-label="简介">简介</a></li>
                <li>
                    <a href="#%e6%8e%a8%e8%8d%90%e8%ae%be%e7%bd%ae" aria-label="推荐设置">推荐设置</a></li>
                <li>
                    <a href="#%e9%9a%90%e7%a7%81%e4%bf%9d%e6%8a%a4%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" aria-label="隐私保护注意事项">隐私保护注意事项</a></li>
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%8f%8a%e8%a7%a3%e7%ad%94" aria-label="常见问题及解答">常见问题及解答</a></li>
                <li>
                    <a href="#%e8%bf%9b%e9%98%b6%e7%9f%a5%e8%af%86" aria-label="进阶知识">进阶知识</a></li>
                <li>
                    <a href="#%e4%b8%bb%e9%a2%98%e4%b8%8e%e7%be%8e%e5%8c%96" aria-label="主题与美化">主题与美化</a></li>
                <li>
                    <a href="#sticker-packhttpsblogphoenixlzxcom20150606make-telegram-sticker-the-lazy-way" aria-label="Sticker Pack"><a href="https://blog.phoenixlzx.com/2015/06/06/make-telegram-sticker-the-lazy-way/">Sticker Pack</a></a></li>
                <li>
                    <a href="#%e5%9c%a8telegram%e4%b8%8a%e4%bd%bf%e7%94%a8efb%e5%90%8c%e6%97%b6%e6%8e%a8%e9%80%81qq%e4%b8%8e%e5%be%ae%e4%bf%a1%e6%b6%88%e6%81%afhttpswwwshawnleettttxyzpostsf1bc687a" aria-label="在Telegram上使用EFB同时推送QQ与微信消息"><a href="https://www.shawnleetttt.xyz/posts/f1bc687a/">在Telegram上使用EFB同时推送QQ与微信消息</a></a><ul>
                        
                <li>
                    <a href="#%e4%ba%8b%e5%89%8d%e5%87%86%e5%a4%87" aria-label="事前准备">事前准备</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8efb%e8%bd%ac%e5%8f%91%e5%be%ae%e4%bf%a1%e6%b6%88%e6%81%af" aria-label="使用EFB转发微信消息">使用EFB转发微信消息</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8efb%e8%bd%ac%e5%8f%91qq%e6%b6%88%e6%81%af" aria-label="使用EFB转发QQ消息">使用EFB转发QQ消息</a></li>
                <li>
                    <a href="#%e9%97%ae%e9%a2%98%e5%8f%91%e7%8e%b0%e5%8f%8a%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88" aria-label="问题发现及解决方案">问题发现及解决方案</a></li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="参考链接">参考链接</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%af%bc%e5%87%ba-telegram-%e8%b4%b4%e5%9b%behttpsblogphoenixlzxcom20160823my-first-yet-useless-telegram-bot" aria-label="导出 Telegram 贴图"><a href="https://blog.phoenixlzx.com/2016/08/23/my-first-yet-useless-telegram-bot/">导出 Telegram 贴图</a></a></li>
                <li>
                    <a href="#%e9%bb%98%e8%ae%a4-desktop" aria-label="默认 Desktop">默认 Desktop</a></li>
                <li>
                    <a href="#xdg-openhttpsmanpagesubuntucommanpagesfocalenman1xdg-open1html" aria-label="xdg-open"><a href="https://manpages.ubuntu.com/manpages/focal/en/man1/xdg-open.1.html">xdg-open</a></a></li>
                <li>
                    <a href="#telegram-%e5%85%85%e7%95%b6%e9%9b%b2%e7%ab%af%e7%ad%86%e8%a8%98httpswwwplaypcesorcom201602telegramhtml" aria-label="Telegram 充當雲端筆記"><a href="https://www.playpcesor.com/2016/02/telegram.html">Telegram 充當雲端筆記</a></a></li>
                <li>
                    <a href="#%e4%b8%ad%e6%96%87%e6%90%9c%e7%b4%a2httpscongcong0806githubio20191104telegramsearch" aria-label="中文搜索"><a href="https://congcong0806.github.io/2019/11/04/TelegramSearch/">中文搜索</a></a><ul>
                        
                <li>
                    <a href="#%e9%97%ae%e9%a2%98%e5%9c%a8%e5%93%aa" aria-label="问题在哪">问题在哪</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e8%a7%a3%e5%86%b3" aria-label="如何解决">如何解决</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#mutthttpssegmentfaultcoma1190000018131615" aria-label="Mutt"><a href="https://segmentfault.com/a/1190000018131615">Mutt</a></a><ul>
                        
                <li>
                    <a href="#%e6%a8%a1%e5%9d%97%e6%90%ad%e9%85%8d%e6%96%b9%e6%a1%88" aria-label="模块搭配方案">模块搭配方案</a></li>
                <li>
                    <a href="#%e6%94%b6%e4%bb%b6%e9%85%8d%e7%bd%aefetchmailhttpswwwlinodecomdocsguidesusing-fetchmail-to-retrieve-email" aria-label="收件：配置Fetchmail"><a href="https://www.linode.com/docs/guides/using-fetchmail-to-retrieve-email/">收件：配置Fetchmail</a></a></li>
                <li>
                    <a href="#%e9%82%ae%e4%bb%b6%e8%bf%87%e6%bb%a4%e9%85%8d%e7%bd%aeprocmailhttpslifegoopluskidorgwikiprocmailhtml" aria-label="邮件过滤：配置Procmail"><a href="https://lifegoo.pluskid.org/wiki/Procmail.html">邮件过滤：配置Procmail</a></a></li>
                <li>
                    <a href="#%e5%8f%91%e4%bb%b6%e9%85%8d%e7%bd%aemsmtp" aria-label="发件：配置msmtp">发件：配置msmtp</a></li>
                <li>
                    <a href="#%e4%b8%bb%e7%95%8c%e9%9d%a2%e9%85%8d%e7%bd%aemutt" aria-label="主界面：配置Mutt">主界面：配置Mutt</a></li>
                <li>
                    <a href="#%e7%a1%ae%e8%ae%a4%e9%82%ae%e7%ae%b1%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="确认邮箱服务器">确认邮箱服务器</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9chttpslifehackercomhow-to-use-the-fast-and-powerful-mutt-email-client-with-5574557" aria-label="基本操作"><a href="https://lifehacker.com/how-to-use-the-fast-and-powerful-mutt-email-client-with-5574557">基本操作</a></a></li></ul>
                </li>
                <li>
                    <a href="#irchttpswwwcnblogscomsztomp11173404html" aria-label="IRC"><a href="https://www.cnblogs.com/sztom/p/11173404.html">IRC</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8bhttpsenwikipediaorgwikiinternet_relay_chat" aria-label="简介"><a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">简介</a></a></li>
                <li>
                    <a href="#%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="服务器">服务器</a></li>
                <li>
                    <a href="#%e5%ae%a2%e6%88%b7%e7%ab%af" aria-label="客户端">客户端</a></li>
                <li>
                    <a href="#irssihttpssegmentfaultcoma1190000018120591" aria-label="Irssi"><a href="https://segmentfault.com/a/1190000018120591">Irssi</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#multimedia" aria-label="Multimedia">Multimedia</a><ul>
                        
                <li>
                    <a href="#rhythmboxhttpsgitlabgnomeorggnomerhythmbox" aria-label="Rhythmbox"><a href="https://gitlab.gnome.org/GNOME/rhythmbox">Rhythmbox</a></a><ul>
                        
                <li>
                    <a href="#feeluownhttpsgithubcomfeeluownfeeluown" aria-label="FeelUOwn"><a href="https://github.com/feeluown/FeelUOwn">FeelUOwn</a></a></li>
                <li>
                    <a href="#clementinehttpsgithubcomclementine-playerclementine" aria-label="Clementine"><a href="https://github.com/clementine-player/Clementine">Clementine</a></a></li>
                <li>
                    <a href="#cmushttpscmusgithubio" aria-label="cmus"><a href="https://cmus.github.io/">cmus</a></a></li>
                <li>
                    <a href="#deadbeefhttpsdeadbeefsourceforgeio" aria-label="DeaDBeeF"><a href="https://deadbeef.sourceforge.io/">DeaDBeeF</a></a></li>
                <li>
                    <a href="#jellyfinhttpsgithubcomjellyfinjellyfin" aria-label="jellyfin"><a href="https://github.com/jellyfin/jellyfin">jellyfin</a></a></li>
                <li>
                    <a href="#audacioushttpsaudacious-media-playerorg" aria-label="Audacious"><a href="https://audacious-media-player.org/">Audacious</a></a></li>
                <li>
                    <a href="#kde-elisahttpsgithubcomkdeelisaamarokhttpsgithubcomkdeamarok" aria-label="KDE elisa/amarok">KDE <a href="https://github.com/KDE/elisa">elisa</a>/<a href="https://github.com/KDE/amarok">amarok</a></a></li>
                <li>
                    <a href="#osdlyricshttpsgithubcomosdlyricsosdlyrics" aria-label="osdlyrics"><a href="https://github.com/osdlyrics/osdlyrics">osdlyrics</a></a></li>
                <li>
                    <a href="#zonylrctoolsxhttpsgithubcomreal-zonyzonylrctoolsx" aria-label="ZonyLrcToolsX"><a href="https://github.com/real-zony/ZonyLrcToolsX">ZonyLrcToolsX</a></a></li></ul>
                </li>
                <li>
                    <a href="#neteasemusichttpsmusic163com" aria-label="NeteaseMusic"><a href="https://music.163.com/">NeteaseMusic</a></a><ul>
                        
                <li>
                    <a href="#yesplaymusichttpsgithubcomqier222yesplaymusic" aria-label="YesPlayMusic"><a href="https://github.com/qier222/YesPlayMusic">YesPlayMusic</a></a></li>
                <li>
                    <a href="#netease-musicboxhttpsgithubcomdarknessomimusicbox" aria-label="NetEase-MusicBox"><a href="https://github.com/darknessomi/musicbox">NetEase-MusicBox</a></a></li>
                <li>
                    <a href="#lx-music-desktophttpsgithubcomlyswhutlx-music-desktop" aria-label="lx-music-desktop"><a href="https://github.com/lyswhut/lx-music-desktop">lx-music-desktop</a></a></li>
                <li>
                    <a href="#listen1_desktophttpsgithubcomlisten1listen1_desktop" aria-label="listen1_desktop"><a href="https://github.com/listen1/listen1_desktop">listen1_desktop</a></a></li></ul>
                </li>
                <li>
                    <a href="#qqmusichttpsyqqcom" aria-label="QQMusic"><a href="https://y.qq.com/">QQMusic</a></a></li>
                <li>
                    <a href="#spotify" aria-label="Spotify">Spotify</a><ul>
                        
                <li>
                    <a href="#spotifydhttpsgithubcomspotifydspotifyd" aria-label="Spotifyd"><a href="https://github.com/Spotifyd/spotifyd">Spotifyd</a></a></li></ul>
                </li>
                <li>
                    <a href="#pulseaudiohttpswikiarchlinuxorgtitlepulseaudio_e7ae80e4bd93e4b8ade69687" aria-label="PulseAudio"><a href="https://wiki.archlinux.org/title/PulseAudio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">PulseAudio</a></a><ul>
                        
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae" aria-label="配置">配置</a></li>
                <li>
                    <a href="#%e5%90%af%e5%8a%a8" aria-label="启动">启动</a></li>
                <li>
                    <a href="#%e5%90%8e%e7%ab%af%e8%ae%be%e7%bd%ae" aria-label="后端设置">后端设置</a></li>
                <li>
                    <a href="#%e5%9d%87%e8%a1%a1%e5%99%a8" aria-label="均衡器">均衡器</a></li></ul>
                </li>
                <li>
                    <a href="#pipewirehttpspipewireorg" aria-label="Pipewire"><a href="https://pipewire.org/">Pipewire</a></a></li>
                <li>
                    <a href="#ffmpeghttpswwwruanyifengcomblog202001ffmpeghtml" aria-label="FFmpeg"><a href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html">FFmpeg</a></a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e5%8f%82%e6%95%b0" aria-label="常用参数">常用参数</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e8%a7%86%e9%a2%91%e6%96%87%e4%bb%b6%e7%9a%84%e5%85%83%e4%bf%a1%e6%81%af" aria-label="查看视频文件的元信息">查看视频文件的元信息</a></li>
                <li>
                    <a href="#%e8%bd%ac%e6%8d%a2%e7%bc%96%e7%a0%81%e6%a0%bc%e5%bc%8f" aria-label="转换编码格式">转换编码格式</a></li>
                <li>
                    <a href="#%e8%bd%ac%e6%8d%a2%e5%ae%b9%e5%99%a8%e6%a0%bc%e5%bc%8f" aria-label="转换容器格式">转换容器格式</a></li>
                <li>
                    <a href="#%e6%94%b9%e5%8f%98%e5%88%86%e8%be%a8%e7%8e%87" aria-label="改变分辨率">改变分辨率</a></li>
                <li>
                    <a href="#%e6%8f%90%e5%8f%96%e8%a7%86%e9%a2%91" aria-label="提取视频">提取视频</a></li>
                <li>
                    <a href="#%e6%8f%90%e5%8f%96%e9%9f%b3%e9%a2%91" aria-label="提取音频">提取音频</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e9%9f%b3%e8%bd%a8" aria-label="添加音轨">添加音轨</a></li>
                <li>
                    <a href="#%e9%9f%b3%e8%a7%86%e9%a2%91%e5%90%88%e6%88%90" aria-label="音视频合成">音视频合成</a></li>
                <li>
                    <a href="#%e6%88%aa%e5%9b%be" aria-label="截图">截图</a></li>
                <li>
                    <a href="#%e8%a3%81%e5%89%aa" aria-label="裁剪">裁剪</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e5%ad%97%e5%b9%95httpswwwjianshucompf33910818a1c" aria-label="添加字幕"><a href="https://www.jianshu.com/p/f33910818a1c">添加字幕</a></a></li>
                <li>
                    <a href="#%e4%b8%8b%e8%bd%bd-m3u8httpswww51ctocomarticle558658html" aria-label="下载 m3u8"><a href="https://www.51cto.com/article/558658.html">下载 m3u8</a></a></li></ul>
                </li>
                <li>
                    <a href="#shotcuthttpswwwshotcutorgdownload" aria-label="Shotcut"><a href="https://www.shotcut.org/download/">Shotcut</a></a></li>
                <li>
                    <a href="#davinci-resolvehttpwwwblackmagicdesigncomcnproductsdavinciresolve" aria-label="DaVinci Resolve"><a href="http://www.blackmagicdesign.com/cn/products/davinciresolve/">DaVinci Resolve</a></a></li>
                <li>
                    <a href="#mkvtoolnixhttpsmkvtoolnixdownloaddownloadshtml" aria-label="MKVToolNix"><a href="https://mkvtoolnix.download/downloads.html">MKVToolNix</a></a></li>
                <li>
                    <a href="#mpvhttpsmpviomanual" aria-label="MPV"><a href="https://mpv.io/manual/">MPV</a></a><ul>
                        
                <li>
                    <a href="#osc-%e7%95%8c%e9%9d%a2" aria-label="OSC 界面">OSC 界面</a></li>
                <li>
                    <a href="#%e5%bf%ab%e6%8d%b7%e9%94%aehttpswwwiplaysoftcommpvhtml" aria-label="快捷键"><a href="https://www.iplaysoft.com/mpv.html">快捷键</a></a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%aehttpshooke007githubiompv-lazympvhtml" aria-label="配置"><a href="https://hooke007.github.io/mpv-lazy/mpv.html">配置</a></a></li></ul>
                </li>
                <li>
                    <a href="#vlchttpswwwvideolanorg" aria-label="VLC"><a href="https://www.videolan.org/">VLC</a></a><ul>
                        
                <li>
                    <a href="#smplayerhttpswwwsmplayerinfo" aria-label="SMPlayer"><a href="https://www.smplayer.info/">SMPlayer</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#download" aria-label="Download">Download</a><ul>
                        
                <li>
                    <a href="#aria2httpsaria2githubio" aria-label="Aria2"><a href="https://aria2.github.io/">Aria2</a></a><ul>
                        
                <li>
                    <a href="#usage" aria-label="Usage">Usage</a></li>
                <li>
                    <a href="#configurationhttparia2ccomusagehtml" aria-label="Configuration"><a href="http://aria2c.com/usage.html">Configuration</a></a></li>
                <li>
                    <a href="#%e8%87%aa%e5%90%af%e5%8a%a8" aria-label="自启动">自启动</a></li>
                <li>
                    <a href="#others-1" aria-label="Others">Others</a><ul>
                        
                <li>
                    <a href="#bt-%e4%b8%8b%e8%bd%bd%e9%a2%84%e7%83%adhttpwwwsenramesolutions-to-aria2-bt-metalink-download-slowly" aria-label="BT 下载预热"><a href="http://www.senra.me/solutions-to-aria2-bt-metalink-download-slowly/">BT 下载预热</a></a></li>
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%af-pthttpswwwcnblogscomwpjamerp4417174html" aria-label="什么是 PT"><a href="https://www.cnblogs.com/wpjamer/p/4417174.html">什么是 PT</a></a></li>
                <li>
                    <a href="#rpchttpswwwzhihucomquestion25536695" aria-label="RPC"><a href="https://www.zhihu.com/question/25536695">RPC</a></a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96-bt-%e4%b8%8b%e8%bd%bd%e5%b7%a5%e5%85%b7httpwwwsenrametage4b88be8bdbde5b7a5e585b7" aria-label="其他 BT 下载工具"><a href="http://www.senra.me/tag/%e4%b8%8b%e8%bd%bd%e5%b7%a5%e5%85%b7/">其他 BT 下载工具</a></a></li>
                <li>
                    <a href="#%e6%9c%89%e6%94%af%e6%8c%81ed2k%e7%9a%84%e8%ae%a1%e5%88%92%e5%90%97httpsgithubcomaria2aria2issues986" aria-label="有支持ed2k的计划吗？"><a href="https://github.com/aria2/aria2/issues/986">有支持ed2k的计划吗？</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#youtube-dlhttpsgithubcomytdl-orgyoutube-dl" aria-label="youtube-dl"><a href="https://github.com/ytdl-org/youtube-dl">youtube-dl</a></a><ul>
                        
                <li>
                    <a href="#usagehttpszhuanlanzhihucomp105141332" aria-label="Usage"><a href="https://zhuanlan.zhihu.com/p/105141332">Usage</a></a></li>
                <li>
                    <a href="#configurationhttpswwwjianshucomp5143faa6056d" aria-label="Configuration"><a href="https://www.jianshu.com/p/5143faa6056d">Configuration</a></a></li></ul>
                </li>
                <li>
                    <a href="#curlhttpwwwruanyifengcomblog201909curl-referencehtml" aria-label="curl"><a href="http://www.ruanyifeng.com/blog/2019/09/curl-reference.html">curl</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8b-1" aria-label="简介">简介</a></li>
                <li>
                    <a href="#%e4%b8%bb%e8%a6%81%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%8f%82%e6%95%b0" aria-label="主要命令行参数">主要命令行参数</a></li>
                <li>
                    <a href="#httpiehttpsgithubcomhttpiehttpie" aria-label="HTTPie"><a href="https://github.com/httpie/httpie">HTTPie</a></a></li>
                <li>
                    <a href="#axelhttpsgithubcomaxel-download-acceleratoraxel" aria-label="axel"><a href="https://github.com/axel-download-accelerator/axel">axel</a></a></li></ul>
                </li>
                <li>
                    <a href="#usenethttpswwwruanyifengcomblogusenet" aria-label="USENET"><a href="https://www.ruanyifeng.com/blog/usenet/">USENET</a></a><ul>
                        
                <li>
                    <a href="#%e8%b5%b7%e6%ba%90" aria-label="起源">起源</a></li>
                <li>
                    <a href="#%e8%bf%90%e8%a1%8c%e6%9c%ba%e5%88%b6" aria-label="运行机制">运行机制</a></li>
                <li>
                    <a href="#%e5%86%85%e5%ae%b9%e7%bb%93%e6%9e%84" aria-label="内容结构">内容结构</a></li>
                <li>
                    <a href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%86%85%e5%ae%b9" aria-label="二进制内容">二进制内容</a></li>
                <li>
                    <a href="#%e6%94%b6%e8%b4%b9%e6%9c%8d%e5%8a%a1" aria-label="收费服务">收费服务</a></li>
                <li>
                    <a href="#google-groups" aria-label="Google Groups">Google Groups</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98httpspanbaiducomdownloadlinux" aria-label="百度网盘"><a href="https://pan.baidu.com/download#linux">百度网盘</a></a><ul>
                        
                <li>
                    <a href="#%e9%98%bf%e9%87%8c%e4%ba%91%e7%9b%98%e5%b0%8f%e7%99%bd%e7%be%8a%e7%89%88httpsgithubcomliupan1890aliyunpan" aria-label="阿里云盘小白羊版"><a href="https://github.com/liupan1890/aliyunpan">阿里云盘小白羊版</a></a></li>
                <li>
                    <a href="#baidupcs-gohttpsgithubcomqjfoidnhbaidupcs-go" aria-label="BaiduPCS-Go"><a href="https://github.com/qjfoidnh/BaiduPCS-Go">BaiduPCS-Go</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9d%9a%e6%9e%9c%e4%ba%91" aria-label="坚果云">坚果云</a></li>
                <li>
                    <a href="#xdmhttpsgithubcomsubhra74xdm" aria-label="xdm"><a href="https://github.com/subhra74/xdm">xdm</a></a></li>
                <li>
                    <a href="#motrixhttpsgithubcomagalwoodmotrix" aria-label="Motrix"><a href="https://github.com/agalwood/Motrix">Motrix</a></a></li>
                <li>
                    <a href="#thunderhttpsflathuborgappsdetailscomxunleithunder" aria-label="Thunder"><a href="https://flathub.org/apps/details/com.xunlei.Thunder">Thunder</a></a></li></ul>
                </li>
                <li>
                    <a href="#editor" aria-label="Editor">Editor</a><ul>
                        
                <li>
                    <a href="#vscode" aria-label="VSCode">VSCode</a></li>
                <li>
                    <a href="#google-keep" aria-label="Google Keep">Google Keep</a></li>
                <li>
                    <a href="#joplinhttpscomputetechnologydailycom20210212cf916cdb6cfb498aac38d4fa50d785a2" aria-label="Joplin"><a href="https://computetechnologydaily.com/2021/02/12/cf916cdb6cfb498aac38d4fa50d785a2/">Joplin</a></a><ul>
                        
                <li>
                    <a href="#%e4%b8%ba%e7%9f%a5%e7%ac%94%e8%ae%b0" aria-label="为知笔记">为知笔记</a></li>
                <li>
                    <a href="#notion" aria-label="notion">notion</a></li>
                <li>
                    <a href="#%e6%80%9d%e6%ba%90%e7%ac%94%e8%ae%b0httpsgithubcomsiyuan-notesiyuanblobmasterreadme_zh_cnmd" aria-label="思源笔记"><a href="https://github.com/siyuan-note/siyuan/blob/master/README_zh_CN.md">思源笔记</a></a></li>
                <li>
                    <a href="#%e5%a4%87%e4%bb%bd%e7%9b%98--%e5%90%8c%e6%ad%a5%e7%9b%98-httpswwwzhihucomquestion388093965answer1335747294" aria-label="备份盘 &amp;amp; 同步盘 "><a href="https://www.zhihu.com/question/388093965/answer/1335747294">备份盘 &amp; 同步盘 </a></a></li></ul>
                </li>
                <li>
                    <a href="#obsidianhttpsobsidianmd" aria-label="Obsidian"><a href="https://obsidian.md/">Obsidian</a></a><ul>
                        
                <li>
                    <a href="#%e6%9c%80%e9%80%82%e5%90%88%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e7%ac%94%e8%ae%b0%e8%bd%af%e4%bb%b6httpswwwruanyifengcomblog202108best-note-taking-software-for-programmershtml" aria-label="最适合程序员的笔记软件"><a href="https://www.ruanyifeng.com/blog/2021/08/best-note-taking-software-for-programmers.html">最适合程序员的笔记软件</a></a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%8a%a8%e5%90%8c%e6%ad%a5" aria-label="自动同步">自动同步</a></li></ul>
                </li>
                <li>
                    <a href="#typorahttpssupporttyporaioquick-start" aria-label="Typora"><a href="https://support.typora.io/Quick-Start/">Typora</a></a><ul>
                        
                <li>
                    <a href="#marktexthttpsgithubcommarktextmarktext" aria-label="MarkText"><a href="https://github.com/marktext/marktext">MarkText</a></a></li></ul>
                </li>
                <li>
                    <a href="#foxit-pdf-readerhttpswwwfoxitcompdf-reader" aria-label="Foxit PDF Reader"><a href="https://www.foxit.com/pdf-reader/">Foxit PDF Reader</a></a><ul>
                        
                <li>
                    <a href="#portable-pdf-unlockerhttpssourceforgenetprojectsportablepdfunlockerfileslatestdownloadpdfcrackhttppdfcracksourceforgenet" aria-label="Portable PDF Unlocker/PDFCrack"><a href="https://sourceforge.net/projects/portablepdfunlocker/files/latest/download">Portable PDF Unlocker</a>/<a href="http://pdfcrack.sourceforge.net/">PDFCrack</a></a></li>
                <li>
                    <a href="#pdftkhttpsaskubuntucomquestions828720how-to-remove-the-password-from-a-pdf" aria-label="pdftk"><a href="https://askubuntu.com/questions/828720/how-to-remove-the-password-from-a-pdf">pdftk</a></a></li></ul>
                </li>
                <li>
                    <a href="#tesseracthttpsgithubcomtesseract-ocrtesseract" aria-label="Tesseract"><a href="https://github.com/tesseract-ocr/tesseract">Tesseract</a></a><ul>
                        
                <li>
                    <a href="#ocrmypdfhttpsgithubcomocrmypdfocrmypdf" aria-label="OCRmyPDF"><a href="https://github.com/ocrmypdf/OCRmyPDF">OCRmyPDF</a></a></li>
                <li>
                    <a href="#pandaocrhttpsgithubcommiaomiaosoftpandaocr" aria-label="PandaOCR"><a href="https://github.com/miaomiaosoft/PandaOCR">PandaOCR</a></a></li>
                <li>
                    <a href="#gimagereaderhttpsgithubcommanisandrogimagereader" aria-label="gImageReader"><a href="https://github.com/manisandro/gImageReader">gImageReader</a></a></li>
                <li>
                    <a href="#ocrfeederhttpswikignomeorgactionshowappsocrfeederactionshowredirectocrfeeder" aria-label="OCRfeeder"><a href="https://wiki.gnome.org/action/show/Apps/OCRFeeder?action=show&amp;redirect=OCRFeeder">OCRfeeder</a></a></li>
                <li>
                    <a href="#tianruoocrhttpsgithubcomanylistentianruoocr" aria-label="tianruoocr"><a href="https://github.com/AnyListen/tianruoocr">tianruoocr</a></a></li>
                <li>
                    <a href="#marguerite-%e7%ad%94-orchttpsforumsuseorgcntocr-opensuse23799uhsiung" aria-label="marguerite 答 ORC"><a href="https://forum.suse.org.cn/t/ocr-opensuse/2379/9?u=hsiung">marguerite 答 ORC</a></a></li></ul>
                </li>
                <li>
                    <a href="#wpshttpswwwwpscomdownload" aria-label="WPS"><a href="https://www.wps.com/download/">WPS</a></a></li>
                <li>
                    <a href="#sublime-texthttpwwwsublimetextcom" aria-label="Sublime Text"><a href="http://www.sublimetext.com/">Sublime Text</a></a></li>
                <li>
                    <a href="#atomhttpsatomio" aria-label="Atom"><a href="https://atom.io/">Atom</a></a></li>
                <li>
                    <a href="#vim" aria-label="Vim">Vim</a><ul>
                        
                <li>
                    <a href="#vimtutor" aria-label="vimtutor">vimtutor</a></li>
                <li>
                    <a href="#vi-%e4%b8%8e-vimtiny" aria-label="vi 与 vim.tiny">vi 与 vim.tiny</a></li>
                <li>
                    <a href="#vim-clear-last-search-highlightinghttpsstackoverflowcomquestions657447vim-clear-last-search-highlighting" aria-label="Vim clear last search highlighting"><a href="https://stackoverflow.com/questions/657447/vim-clear-last-search-highlighting">Vim clear last search highlighting</a></a></li>
                <li>
                    <a href="#vimrchttpsgithubcomamixvimrc" aria-label="VIMRC"><a href="https://github.com/amix/vimrc">VIMRC</a></a></li>
                <li>
                    <a href="#copilotvimhttpsgithubcomgithubcopilotvim" aria-label="copilot.vim"><a href="https://github.com/github/copilot.vim">copilot.vim</a></a></li>
                <li>
                    <a href="#neovimhttpsneovimio" aria-label="Neovim"><a href="https://neovim.io/">Neovim</a></a></li>
                <li>
                    <a href="#vimplushttpsgithubcomchxuanvimplus" aria-label="vimplus"><a href="https://github.com/chxuan/vimplus">vimplus</a></a></li>
                <li>
                    <a href="#rangerhttpsgithubcomrangerranger" aria-label="ranger"><a href="https://github.com/ranger/ranger">ranger</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#shell" aria-label="Shell">Shell</a><ul>
                        
                <li>
                    <a href="#tmuxhttpswwwruanyifengcomblog201910tmuxhtml" aria-label="Tmux"><a href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">Tmux</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8b-2" aria-label="简介">简介</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95" aria-label="基本用法">基本用法</a></li>
                <li>
                    <a href="#%e4%bc%9a%e8%af%9d%e7%ae%a1%e7%90%86" aria-label="会话管理">会话管理</a></li>
                <li>
                    <a href="#%e6%9c%80%e7%ae%80%e6%93%8d%e4%bd%9c%e6%b5%81%e7%a8%8b" aria-label="最简操作流程">最简操作流程</a></li>
                <li>
                    <a href="#%e7%aa%97%e6%a0%bc%e6%93%8d%e4%bd%9c" aria-label="窗格操作">窗格操作</a></li>
                <li>
                    <a href="#%e7%aa%97%e5%8f%a3%e7%ae%a1%e7%90%86" aria-label="窗口管理">窗口管理</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e5%91%bd%e4%bb%a4" aria-label="其他命令">其他命令</a></li></ul>
                </li>
                <li>
                    <a href="#fishhttpswwwruanyifengcomblog201705fish_shellhtml" aria-label="Fish"><a href="https://www.ruanyifeng.com/blog/2017/05/fish_shell.html">Fish</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8b-3" aria-label="简介">简介</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-1" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e5%90%af%e5%8a%a8%e4%b8%8e%e5%b8%ae%e5%8a%a9" aria-label="启动与帮助">启动与帮助</a></li>
                <li>
                    <a href="#%e5%bd%a9%e8%89%b2%e6%98%be%e7%a4%ba" aria-label="彩色显示">彩色显示</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%8a%a8%e5%bb%ba%e8%ae%ae" aria-label="自动建议">自动建议</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%8a%a8%e8%a1%a5%e5%85%a8" aria-label="自动补全">自动补全</a></li>
                <li>
                    <a href="#%e6%98%93%e6%87%82%e7%9a%84%e8%af%ad%e6%b3%95" aria-label="易懂的语法">易懂的语法</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0" aria-label="函数">函数</a></li>
                <li>
                    <a href="#%e6%8f%90%e7%a4%ba%e7%ac%a6" aria-label="提示符">提示符</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-1" aria-label="配置">配置</a></li></ul>
                </li>
                <li>
                    <a href="#zsh" aria-label="Zsh">Zsh</a><ul>
                        
                <li>
                    <a href="#oh-my-zshhttpsgithubcomohmyzshohmyzsh" aria-label="Oh My Zsh"><a href="https://github.com/ohmyzsh/ohmyzsh">Oh My Zsh</a></a></li>
                <li>
                    <a href="#zsh4humanshttpsgithubcomromkatvzsh4humans" aria-label="zsh4humans"><a href="https://github.com/romkatv/zsh4humans">zsh4humans</a></a></li></ul>
                </li>
                <li>
                    <a href="#bash" aria-label="Bash">Bash</a><ul>
                        
                <li>
                    <a href="#bash-git-prompthttpsgithubcommagicmontybash-git-prompt" aria-label="bash-git-prompt"><a href="https://github.com/magicmonty/bash-git-prompt">bash-git-prompt</a></a></li>
                <li>
                    <a href="#bash-completionhttpsgithubcomscopbash-completion" aria-label="bash-completion"><a href="https://github.com/scop/bash-completion">bash-completion</a></a></li>
                <li>
                    <a href="#awesome-bashhttpsgithubcomawesome-listsawesome-bash" aria-label="awesome-bash"><a href="https://github.com/awesome-lists/awesome-bash">awesome-bash</a></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#proxy" aria-label="Proxy">Proxy</a><ul>
                        
                <li>
                    <a href="#v2rayhttpsarchlinuxstudiogithubioarchlinuxtutorialrookiefxckgfw" aria-label="v2ray"><a href="https://archlinuxstudio.github.io/ArchLinuxTutorial/#/rookie/fxckGFW">v2ray</a></a><ul>
                        
                <li>
                    <a href="#%e8%8a%82%e7%82%b9%e5%87%86%e5%a4%87" aria-label="节点准备">节点准备</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-2" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae" aria-label="代理配置">代理配置</a></li>
                <li>
                    <a href="#%e9%80%8f%e6%98%8e%e4%bb%a3%e7%90%86httpsarchicekylinonlinerookietransparenthtml" aria-label="透明代理"><a href="https://arch.icekylin.online/rookie/transparent.html">透明代理</a></a><ul>
                        
                <li>
                    <a href="#dns-1" aria-label="dns"><strong>dns</strong></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#clashhttpszhuanlanzhihucomp369344633" aria-label="Clash"><a href="https://zhuanlan.zhihu.com/p/369344633">Clash</a></a><ul>
                        
                <li>
                    <a href="#%e8%84%9a%e6%9c%ac%e4%b8%80" aria-label="脚本一">脚本一</a></li>
                <li>
                    <a href="#%e8%84%9a%e6%9c%ac%e4%ba%8c" aria-label="脚本二">脚本二</a></li>
                <li>
                    <a href="#%e8%84%9a%e6%9c%ac%e4%b8%89httpsakillcoolgithubiopostclash-with-auto-update-config" aria-label="脚本三"><a href="https://akillcool.github.io/post/clash-with-auto-update-config/">脚本三</a></a></li>
                <li>
                    <a href="#tun-%e6%a8%a1%e5%bc%8fhttpslancellcgitbookioclashstart-clashclash-tun-mode" aria-label="TUN 模式"><a href="https://lancellc.gitbook.io/clash/start-clash/clash-tun-mode">TUN 模式</a></a><ul>
                        
                <li>
                    <a href="#clash-for-windowshttpsgithubcomfndroidclash_for_windows_pkgreleases" aria-label="Clash for Windows"><a href="https://github.com/Fndroid/clash_for_windows_pkg/releases">Clash for Windows</a></a></li>
                <li>
                    <a href="#setup-system-stack-in-fake-ip-mode" aria-label="Setup System stack in Fake-IP mode">Setup System stack in Fake-IP mode</a></li></ul>
                </li>
                <li>
                    <a href="#tproxy-modehttpslancellcgitbookioclashstart-clashclash-udp-tproxy-support" aria-label="TProxy Mode"><a href="https://lancellc.gitbook.io/clash/start-clash/clash-udp-tproxy-support">TProxy Mode</a></a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6httpswwwcfmemcom202108clashhtml" aria-label="配置文件"><a href="https://www.cfmem.com/2021/08/clash.html">配置文件</a></a><ul>
                        
                <li>
                    <a href="#proxies" aria-label="proxies">proxies</a></li>
                <li>
                    <a href="#proxy-groups" aria-label="proxy-groups">proxy-groups</a></li>
                <li>
                    <a href="#rules" aria-label="rules">rules</a></li></ul>
                </li>
                <li>
                    <a href="#dns%e6%b1%a1%e6%9f%93httpsblogrssinsnetarchives1379" aria-label="DNS污染"><a href="https://blog.rssins.net/archives/1379">DNS污染</a></a><ul>
                        
                <li>
                    <a href="#%e5%af%b9%e6%8a%97dns%e5%8a%ab%e6%8c%81" aria-label="对抗DNS劫持">对抗DNS劫持</a></li>
                <li>
                    <a href="#%e4%bd%95%e6%97%b6%e4%bd%bf%e7%94%a8" aria-label="何时使用">何时使用</a></li>
                <li>
                    <a href="#dns%e9%85%8d%e7%bd%aehttpswwwxkww3ncyou20220208use-clash-dns-anti-dns-hijacking" aria-label="DNS配置"><a href="https://www.xkww3n.cyou/2022/02/08/use-clash-dns-anti-dns-hijacking/">DNS配置</a></a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bb%a3%e7%90%86%e7%8e%af%e5%a2%83%e4%b8%ad%e7%9a%84-dns-%e8%a7%a3%e6%9e%90%e8%a1%8c%e4%b8%bahttpsblogskkmoepostwhat-happend-to-dns-in-proxy" aria-label="代理环境中的 DNS 解析行为"><a href="https://blog.skk.moe/post/what-happend-to-dns-in-proxy">代理环境中的 DNS 解析行为</a></a><ul>
                        
                <li>
                    <a href="#%e4%b8%8d%e4%bd%bf%e7%94%a8%e4%bb%a3%e7%90%86" aria-label="不使用代理">不使用代理</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e4%bb%a3%e7%90%86%e5%b9%b6%e4%bd%bf%e7%94%a8%e7%9b%b4%e8%bf%9e" aria-label="设置代理并使用直连">设置代理并使用直连</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e4%bb%a3%e7%90%86%e5%b9%b6%e5%b0%86%e6%b5%81%e9%87%8f%e8%bd%ac%e5%8f%91%e5%88%b0%e8%bf%9c%e7%ab%af%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="设置代理并将流量转发到远端服务器">设置代理并将流量转发到远端服务器</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e4%bb%a3%e7%90%86%e5%b9%b6%e4%bd%bf%e7%94%a8-ip-%e8%a7%84%e5%88%99%e5%92%8c%e5%9f%9f%e5%90%8d%e8%a7%84%e5%88%99%e8%bf%9b%e8%a1%8c%e5%88%86%e6%b5%81" aria-label="设置代理并使用 IP 规则和域名规则进行分流">设置代理并使用 IP 规则和域名规则进行分流</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-redir--tun2socks-%e5%ae%9e%e7%8e%b0%e5%85%a8%e5%b1%80%e6%b5%81%e9%87%8f%e7%bb%8f%e8%bf%87%e4%bb%a3%e7%90%86" aria-label="使用 redir / tun2socks 实现全局流量经过代理">使用 redir / tun2socks 实现全局流量经过代理</a></li>
                <li>
                    <a href="#%e5%9c%a8-redir--tun2socks-%e4%b8%ad%e4%bd%bf%e7%94%a8-fake-ip" aria-label="在 redir / tun2socks 中使用 Fake IP">在 redir / tun2socks 中使用 Fake IP</a></li>
                <li>
                    <a href="#fancyss-%e5%92%8c-surge--clash-%e7%9a%84%e5%8c%ba%e5%88%ab" aria-label="FancySS 和 Surge / Clash 的区别">FancySS 和 Surge / Clash 的区别</a></li>
                <li>
                    <a href="#%e5%a6%82%e6%9e%9c%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e6%88%96%e8%80%85%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e4%ba%86-dns-%e8%a7%a3%e6%9e%90%e7%bb%93%e6%9e%9c" aria-label="如果操作系统或者浏览器缓存了 DNS 解析结果">如果操作系统或者浏览器缓存了 DNS 解析结果</a></li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" aria-label="参考资料">参考资料</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#wireguardhttpsfuckcloudnativeiopostswireguard-docs-practice" aria-label="WireGuard"><a href="https://fuckcloudnative.io/posts/wireguard-docs-practice/">WireGuard</a></a><ul>
                        
                <li>
                    <a href="#%e6%9c%af%e8%af%ad" aria-label="术语">术语</a></li>
                <li>
                    <a href="#%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86" aria-label="工作原理">工作原理</a></li>
                <li>
                    <a href="#%e6%90%ad%e5%bb%ba%e4%bd%bf%e7%94%a8%e4%b8%8e%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3" aria-label="搭建使用与配置详解">搭建使用与配置详解</a><ul>
                        
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b" aria-label="快速开始">快速开始</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3" aria-label="配置详解">配置详解</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#gui-utilities" aria-label="GUI Utilities">GUI Utilities</a><ul>
                        
                <li>
                    <a href="#gnome" aria-label="Gnome">Gnome</a><ul>
                        
                <li>
                    <a href="#%e6%b5%8f%e8%a7%88" aria-label="浏览">浏览</a></li>
                <li>
                    <a href="#%e9%81%97%e7%95%99%e5%90%8d%e7%a7%b0" aria-label="遗留名称">遗留名称</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e9%bb%98%e8%ae%a4%e5%85%b3%e8%81%94%e7%9a%84%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f" aria-label="修改文件默认关联的应用程序">修改文件默认关联的应用程序</a></li>
                <li>
                    <a href="#gedi" aria-label="Gedi">Gedi</a><ul>
                        
                <li>
                    <a href="#%e7%bc%96%e7%a0%81" aria-label="编码">编码</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-2" aria-label="配置">配置</a></li></ul>
                </li>
                <li>
                    <a href="#nvidia-optimushttpswikiarchlinuxorgtitlenvidia_optimus_e7ae80e4bd93e4b8ade69687" aria-label="NVIDIA Optimus"><a href="https://wiki.archlinux.org/title/NVIDIA_Optimus_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">NVIDIA Optimus</a></a></li>
                <li>
                    <a href="#%e6%a1%8c%e9%9d%a2%e5%8d%a1%e6%ad%bbhttpsblogcsdnnetsonggu1996articledetails87712546" aria-label="桌面卡死"><a href="https://blog.csdn.net/SongGu1996/article/details/87712546">桌面卡死</a></a></li>
                <li>
                    <a href="#prime-synchronizationhttpswikidebianorgnvidia20optimusprime_synchronization" aria-label="PRIME synchronization"><a href="https://wiki.debian.org/NVIDIA%20Optimus#PRIME_synchronization">PRIME synchronization</a></a></li>
                <li>
                    <a href="#permanently-set-nvidia-powermizer-settingshttpsrastatinggithubiohow-to-permanently-set-nvidia-powermizer-settings-in-ubuntu" aria-label="Permanently Set NVIDIA PowerMizer Settings"><a href="https://rastating.github.io/how-to-permanently-set-nvidia-powermizer-settings-in-ubuntu/">Permanently Set NVIDIA PowerMizer Settings</a></a></li>
                <li>
                    <a href="#%e5%af%86%e9%92%a5%e7%8e%afhttpslinuxcnarticle-12093-1html" aria-label="密钥环"><a href="https://linux.cn/article-12093-1.html">密钥环</a></a><ul>
                        
                <li>
                    <a href="#%e5%af%86%e9%92%a5%e7%8e%af%e6%98%af%e4%bb%80%e4%b9%88%e4%b8%ba%e4%bb%80%e4%b9%88%e9%9c%80%e8%a6%81%e5%ae%83" aria-label="密钥环是什么，为什么需要它？">密钥环是什么，为什么需要它？</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e5%af%86%e9%92%a5%e7%8e%af%e5%af%86%e7%a0%81" aria-label="修改密钥环密码">修改密钥环密码</a></li>
                <li>
                    <a href="#%e7%a6%81%e7%94%a8%e5%af%86%e9%92%a5%e7%8e%af%e5%af%86%e7%a0%81" aria-label="禁用密钥环密码">禁用密钥环密码</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#gnome-tweaks" aria-label="Gnome Tweaks">Gnome Tweaks</a><ul>
                        
                <li>
                    <a href="#ubuntu-dockhttpsblogcsdnneta6864657articledetails103606669" aria-label="Ubuntu Dock"><a href="https://blog.csdn.net/a6864657/article/details/103606669/">Ubuntu Dock</a></a></li>
                <li>
                    <a href="#gsconnecthttpsgithubcomgsconnectgnome-shell-extension-gsconnectwikiinstallation" aria-label="GSConnect"><a href="https://github.com/GSConnect/gnome-shell-extension-gsconnect/wiki/Installation">GSConnect</a></a></li>
                <li>
                    <a href="#netspeedhttpsextensionsgnomeorgextension104netspeed" aria-label="NetSpeed"><a href="https://extensions.gnome.org/extension/104/netspeed/">NetSpeed</a></a></li>
                <li>
                    <a href="#clipboard-indicatorhttpsextensionsgnomeorgextension779clipboard-indicator" aria-label="Clipboard Indicator"><a href="https://extensions.gnome.org/extension/779/clipboard-indicator/">Clipboard Indicator</a></a></li>
                <li>
                    <a href="#coverflow-alt-tabhttpsextensionsgnomeorgextension97coverflow-alt-tab" aria-label="Coverflow Alt-Tab"><a href="https://extensions.gnome.org/extension/97/coverflow-alt-tab/">Coverflow Alt-Tab</a></a></li>
                <li>
                    <a href="#bluetooth-quick-connecthttpsextensionsgnomeorgextension1401bluetooth-quick-connect" aria-label="Bluetooth Quick Connect"><a href="https://extensions.gnome.org/extension/1401/bluetooth-quick-connect/">Bluetooth Quick Connect</a></a></li>
                <li>
                    <a href="#desktop-icons-ng-dinghttpsextensionsgnomeorgextension2087desktop-icons-ng-ding" aria-label="Desktop Icons NG (DING)"><a href="https://extensions.gnome.org/extension/2087/desktop-icons-ng-ding/">Desktop Icons NG (DING)</a></a></li>
                <li>
                    <a href="#frippery-move-clockhttpsextensionsgnomeorgextension2move-clock" aria-label="Frippery Move Clock"><a href="https://extensions.gnome.org/extension/2/move-clock/">Frippery Move Clock</a></a></li>
                <li>
                    <a href="#input-method-panelhttpsextensionsgnomeorgextension261kimpanel" aria-label="Input Method Panel"><a href="https://extensions.gnome.org/extension/261/kimpanel/">Input Method Panel</a></a></li>
                <li>
                    <a href="#lock-keyshttpsextensionsgnomeorgextension36lock-keys" aria-label="Lock Keys"><a href="https://extensions.gnome.org/extension/36/lock-keys/">Lock Keys</a></a></li>
                <li>
                    <a href="#openweatherhttpsextensionsgnomeorgextension750openweather" aria-label="OpenWeather"><a href="https://extensions.gnome.org/extension/750/openweather/">OpenWeather</a></a></li>
                <li>
                    <a href="#panel-date-formathttpsextensionsgnomeorgextension1462panel-date-format" aria-label="Panel Date Format"><a href="https://extensions.gnome.org/extension/1462/panel-date-format/">Panel Date Format</a></a></li>
                <li>
                    <a href="#refresh-wifi-connectionshttpsextensionsgnomeorgextension905refresh-wifi-connections" aria-label="Refresh Wifi Connections"><a href="https://extensions.gnome.org/extension/905/refresh-wifi-connections/">Refresh Wifi Connections</a></a></li>
                <li>
                    <a href="#screenshot-toolhttpsextensionsgnomeorgextension1112screenshot-tool" aria-label="Screenshot Tool"><a href="https://extensions.gnome.org/extension/1112/screenshot-tool/">Screenshot Tool</a></a></li>
                <li>
                    <a href="#sound-input--output-device-chooserlivepatchhttpsextensionsgnomeorgextension906sound-output-device-chooser" aria-label="Sound Input &amp;amp; Output Device ChooserLivepatch"><a href="https://extensions.gnome.org/extension/906/sound-output-device-chooser/">Sound Input &amp; Output Device ChooserLivepatch</a></a></li>
                <li>
                    <a href="#status-area-horizontal-spacinghttpsextensionsgnomeorgextension355status-area-horizontal-spacing" aria-label="Status Area Horizontal Spacing"><a href="https://extensions.gnome.org/extension/355/status-area-horizontal-spacing/">Status Area Horizontal Spacing</a></a></li>
                <li>
                    <a href="#unitehttpsextensionsgnomeorgextension1287unite" aria-label="Unite"><a href="https://extensions.gnome.org/extension/1287/unite/">Unite</a></a></li>
                <li>
                    <a href="#user-themeshttpsextensionsgnomeorgextension19user-themes" aria-label="User Themes"><a href="https://extensions.gnome.org/extension/19/user-themes/">User Themes</a></a></li>
                <li>
                    <a href="#vitalshttpsextensionsgnomeorgextension1460vitals" aria-label="Vitals"><a href="https://extensions.gnome.org/extension/1460/vitals/">Vitals</a></a></li>
                <li>
                    <a href="#removable-drive-menuhttpsextensionsgnomeorgextension7removable-drive-menu" aria-label="Removable Drive Menu"><a href="https://extensions.gnome.org/extension/7/removable-drive-menu/">Removable Drive Menu</a></a></li>
                <li>
                    <a href="#places-status-indicatorhttpsextensionsgnomeorgextension8places-status-indicator" aria-label="Places Status Indicator"><a href="https://extensions.gnome.org/extension/8/places-status-indicator/">Places Status Indicator</a></a></li>
                <li>
                    <a href="#recent-itemshttpsextensionsgnomeorgextension72recent-items" aria-label="Recent Items"><a href="https://extensions.gnome.org/extension/72/recent-items/">Recent Items</a></a></li>
                <li>
                    <a href="#gtilehttpsextensionsgnomeorgextension28gtile" aria-label="gTile"><a href="https://extensions.gnome.org/extension/28/gtile/">gTile</a></a></li>
                <li>
                    <a href="#top-panel-workspace-scrollhttpsextensionsgnomeorgextension701top-panel-workspace-scroll" aria-label="Top Panel Workspace Scroll"><a href="https://extensions.gnome.org/extension/701/top-panel-workspace-scroll/">Top Panel Workspace Scroll</a></a></li>
                <li>
                    <a href="#workspace-indicatorhttpsextensionsgnomeorgextension21workspace-indicator" aria-label="Workspace Indicator"><a href="https://extensions.gnome.org/extension/21/workspace-indicator/">Workspace Indicator</a></a></li>
                <li>
                    <a href="#auto-move-windowshttpsextensionsgnomeorgextension16auto-move-windows" aria-label="Auto Move Windows"><a href="https://extensions.gnome.org/extension/16/auto-move-windows/">Auto Move Windows</a></a></li>
                <li>
                    <a href="#applications-menuhttpsextensionsgnomeorgextension6applications-menu" aria-label="Applications Menu"><a href="https://extensions.gnome.org/extension/6/applications-menu/">Applications Menu</a></a></li>
                <li>
                    <a href="#fly-piehttpsextensionsgnomeorgextension3433fly-pie" aria-label="Fly-Pie"><a href="https://extensions.gnome.org/extension/3433/fly-pie/">Fly-Pie</a></a></li>
                <li>
                    <a href="#appindicator-and-kstatusnotifieritem-supporthttpsextensionsgnomeorgextension615appindicator-support" aria-label="AppIndicator and KStatusNotifierItem Support"><a href="https://extensions.gnome.org/extension/615/appindicator-support/">AppIndicator and KStatusNotifierItem Support</a></a></li>
                <li>
                    <a href="#papirus-icon-themehttpsgithubcompapirusdevelopmentteampapirus-icon-theme" aria-label="Papirus Icon Theme"><a href="https://github.com/PapirusDevelopmentTeam/papirus-icon-theme">Papirus Icon Theme</a></a></li>
                <li>
                    <a href="#materia-themehttpsgithubcomnana-4materia-theme" aria-label="Materia Theme"><a href="https://github.com/nana-4/materia-theme">Materia Theme</a></a></li>
                <li>
                    <a href="#time-httpsextensionsgnomeorgextension1238time" aria-label="Time &#43;&#43;"><a href="https://extensions.gnome.org/extension/1238/time/">Time ++</a></a></li>
                <li>
                    <a href="#nautilushttpswwwcnblogscomkeatonlaop12717071htmltop" aria-label="Nautilus"><a href="https://www.cnblogs.com/keatonlao/p/12717071.html#top">Nautilus</a></a><ul>
                        
                <li>
                    <a href="#%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="快捷键">快捷键</a></li>
                <li>
                    <a href="#%e4%bb%8e%e5%8f%b3%e9%94%ae%e8%8f%9c%e5%8d%95%e5%88%9b%e5%bb%ba%e6%96%b0%e6%96%87%e6%a1%a3" aria-label="从右键菜单创建新文档">从右键菜单创建新文档</a></li>
                <li>
                    <a href="#%e7%9b%b4%e6%8e%a5%e6%90%9c%e7%b4%a2%e5%8c%b9%e9%85%8d" aria-label="直接搜索匹配">直接搜索匹配</a></li></ul>
                </li>
                <li>
                    <a href="#backslidehttpsextensionsgnomeorgextension543backslide" aria-label="BackSlide"><a href="https://extensions.gnome.org/extension/543/backslide/">BackSlide</a></a></li>
                <li>
                    <a href="#remove-alttab-delay-v2httpsextensionsgnomeorgextension2741remove-alttab-delay-v2" aria-label="Remove Alt&#43;Tab Delay v2"><a href="https://extensions.gnome.org/extension/2741/remove-alttab-delay-v2/">Remove Alt+Tab Delay v2</a></a></li>
                <li>
                    <a href="#easyscreencasthttpsextensionsgnomeorgextension690easyscreencast" aria-label="EasyScreenCast"><a href="https://extensions.gnome.org/extension/690/easyscreencast/">EasyScreenCast</a></a></li>
                <li>
                    <a href="#hide-top-barhttpsextensionsgnomeorgextension545hide-top-bar" aria-label="Hide Top Bar"><a href="https://extensions.gnome.org/extension/545/hide-top-bar/">Hide Top Bar</a></a></li>
                <li>
                    <a href="#battery-timehttpsextensionsgnomeorgextension1475battery-time" aria-label="Battery Time"><a href="https://extensions.gnome.org/extension/1475/battery-time/">Battery Time</a></a></li>
                <li>
                    <a href="#caffeinehttpsextensionsgnomeorgextension517caffeine" aria-label="Caffeine"><a href="https://extensions.gnome.org/extension/517/caffeine/">Caffeine</a></a></li>
                <li>
                    <a href="#todotxthttpsextensionsgnomeorgextension570todotxt" aria-label="Todo.txt"><a href="https://extensions.gnome.org/extension/570/todotxt/">Todo.txt</a></a></li>
                <li>
                    <a href="#internet-radiohttpsextensionsgnomeorgextension836internet-radio" aria-label="Internet Radio"><a href="https://extensions.gnome.org/extension/836/internet-radio/">Internet Radio</a></a></li>
                <li>
                    <a href="#ibus-font-settinghttpsextensionsgnomeorgextension1121ibus-font-setting" aria-label="ibus font setting"><a href="https://extensions.gnome.org/extension/1121/ibus-font-setting/">ibus font setting</a></a></li>
                <li>
                    <a href="#lunar-calendar-%e5%86%9c%e5%8e%86httpsextensionsgnomeorgextension675lunar-calendar" aria-label="Lunar Calendar 农历"><a href="https://extensions.gnome.org/extension/675/lunar-calendar/">Lunar Calendar 农历</a></a></li></ul>
                </li>
                <li>
                    <a href="#chromehttpswwwgooglecomlinuxrepositories" aria-label="Chrome"><a href="https://www.google.com/linuxrepositories/">Chrome</a></a><ul>
                        
                <li>
                    <a href="#%e7%94%a8%e6%88%b7%e8%84%9a%e6%9c%ac%e7%ae%a1%e7%90%86%e5%99%a8httpsgreasyforkorgzh-cn" aria-label="用户脚本管理器"><a href="https://greasyfork.org/zh-CN">用户脚本管理器</a></a></li>
                <li>
                    <a href="#download-all-imageshttpsdownload-all-imagesmobilefirstme" aria-label="Download All Images"><a href="https://download-all-images.mobilefirst.me/">Download All Images</a></a></li>
                <li>
                    <a href="#ublock-originhttpsgithubcomgorhillublock" aria-label="uBlock Origin"><a href="https://github.com/gorhill/uBlock">uBlock Origin</a></a></li>
                <li>
                    <a href="#%e6%b2%99%e6%8b%89%e6%9f%a5%e8%af%8dhttpssaladictcrimxcom" aria-label="沙拉查词"><a href="https://saladict.crimx.com/">沙拉查词</a></a></li>
                <li>
                    <a href="#infinity-new-tabhttpschromegooglecomwebstoredetailinfinity-new-tabdbfmnekepjoapopniengjbcpnbljalfghlen-us" aria-label="Infinity New Tab"><a href="https://chrome.google.com/webstore/detail/infinity-new-tab/dbfmnekepjoapopniengjbcpnbljalfg?hl=en-US">Infinity New Tab</a></a></li>
                <li>
                    <a href="#questions" aria-label="Questions">Questions</a></li>
                <li>
                    <a href="#chromium" aria-label="Chromium">Chromium</a></li>
                <li>
                    <a href="#firefox" aria-label="Firefox">Firefox</a></li>
                <li>
                    <a href="#deepl-translatehttpschromegooglecomwebstoredetaildeepl-translate-beta-verscofdbpoegempjloogbagkncekinflcnjutm_sourcechrome-ntp-icon" aria-label="DeepL Translate"><a href="https://chrome.google.com/webstore/detail/deepl-translate-beta-vers/cofdbpoegempjloogbagkncekinflcnj?utm_source=chrome-ntp-icon">DeepL Translate</a></a></li>
                <li>
                    <a href="#user-data-directoryhttpschromiumgooglesourcecomchromiumsrcmasterdocsuser_data_dirmdlinux" aria-label="User Data Directory"><a href="https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md#Linux">User Data Directory</a></a></li>
                <li>
                    <a href="#dark-mode" aria-label="Dark Mode">Dark Mode</a></li>
                <li>
                    <a href="#%e6%96%ad%e7%82%b9%e7%bb%ad%e4%bc%a0" aria-label="断点续传">断点续传</a></li>
                <li>
                    <a href="#live-captionhttpssupportgooglecomchromeanswer10538231hlen" aria-label="Live Caption"><a href="https://support.google.com/chrome/answer/10538231?hl=en">Live Caption</a></a></li></ul>
                </li>
                <li>
                    <a href="#goldendicthttpswwwcnblogscomkeatonlaop12702571html" aria-label="GoldenDict"><a href="https://www.cnblogs.com/keatonlao/p/12702571.html">GoldenDict</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-3" aria-label="安装">安装</a><ul>
                        
                <li>
                    <a href="#%e6%89%93%e5%bc%80-goldendict" aria-label="打开 GoldenDict">打开 GoldenDict</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e8%af%ad%e8%a8%80" aria-label="修改语言">修改语言</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%ae%a1%e7%90%86%e8%af%8d%e5%85%b8" aria-label="管理词典">管理词典</a><ul>
                        
                <li>
                    <a href="#%e4%b8%8b%e8%bd%bd%e8%af%8d%e5%85%b8" aria-label="下载词典">下载词典</a></li>
                <li>
                    <a href="#%e5%ad%98%e6%94%be%e8%af%8d%e5%85%b8" aria-label="存放词典">存放词典</a></li>
                <li>
                    <a href="#%e5%af%bc%e5%85%a5%e8%af%8d%e5%85%b8" aria-label="导入词典">导入词典</a></li>
                <li>
                    <a href="#%e8%af%8d%e5%85%b8%e5%88%86%e7%bb%84" aria-label="词典分组">词典分组</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8" aria-label="使用">使用</a><ul>
                        
                <li>
                    <a href="#%e5%a4%8d%e5%88%b6%e6%9f%a5%e8%af%8d" aria-label="复制查词">复制查词</a></li>
                <li>
                    <a href="#%e6%89%8b%e5%8a%a8%e6%9f%a5%e8%af%8d%e6%a8%a1%e7%b3%8a%e5%8c%b9%e9%85%8d" aria-label="手动查词：模糊匹配">手动查词：模糊匹配</a></li>
                <li>
                    <a href="#%e8%b0%83%e6%95%b4%e7%95%8c%e9%9d%a2" aria-label="调整界面">调整界面</a></li>
                <li>
                    <a href="#%e6%8e%92%e5%ba%8f%e8%af%8d%e5%85%b8" aria-label="排序词典">排序词典</a></li>
                <li>
                    <a href="#%e5%b1%8f%e5%b9%95%e5%8f%96%e8%af%8d--%e5%88%92%e8%af%8d%e9%87%8a%e4%b9%89" aria-label="屏幕取词 / 划词释义">屏幕取词 / 划词释义</a></li>
                <li>
                    <a href="#%e6%9f%a5%e8%af%8d%e5%9c%a8%e7%ba%bf%e8%af%8d%e5%85%b8" aria-label="查词：在线词典">查词：在线词典</a></li>
                <li>
                    <a href="#%e6%9f%a5%e8%af%8d%e7%bb%b4%e5%9f%ba%e7%99%be%e7%a7%91" aria-label="查词：维基百科">查词：维基百科</a></li>
                <li>
                    <a href="#%e6%9f%a5%e8%af%8d%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e" aria-label="查词：搜索引擎">查词：搜索引擎</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e7%bf%bb%e8%af%91%e8%b0%b7%e6%ad%8c%e7%bf%bb%e8%af%91" aria-label="文本翻译：谷歌翻译">文本翻译：谷歌翻译</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e7%bf%bb%e8%af%91%e6%9c%89%e9%81%93%e7%bf%bb%e8%af%91" aria-label="文本翻译：有道翻译">文本翻译：有道翻译</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e7%bf%bb%e8%af%91copytranslator" aria-label="文本翻译：CopyTranslator">文本翻译：CopyTranslator</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e7%bf%bb%e8%af%91saladict" aria-label="文本翻译：Saladict">文本翻译：Saladict</a></li>
                <li>
                    <a href="#ocr-%e5%b1%8f%e5%b9%95%e5%8f%96%e8%af%8d--%e6%88%aa%e5%b1%8f%e7%bf%bb%e8%af%91" aria-label="OCR 屏幕取词 / 截屏翻译">OCR 屏幕取词 / 截屏翻译</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e8%af%ad%e9%9f%b3%e6%9c%97%e8%af%bb" aria-label="文本语音朗读">文本语音朗读</a></li>
                <li>
                    <a href="#%e8%83%8c%e5%8d%95%e8%af%8d" aria-label="背单词">背单词</a></li>
                <li>
                    <a href="#%e5%a4%87%e4%bb%bd%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="备份配置文件">备份配置文件</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%81%ad%e5%96%9c%e4%bd%a0%e4%bc%9a%e4%bd%bf%e7%94%a8-goldendict-%e4%ba%86" aria-label="恭喜！你会使用 GoldenDict 了！">恭喜！你会使用 GoldenDict 了！</a></li>
                <li>
                    <a href="#%e6%b5%85%e8%b0%88%e8%8b%b1%e8%af%ad%e8%af%8d%e5%85%b8%e7%89%88%e6%9c%ac" aria-label="浅谈英语词典版本">浅谈英语词典版本</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e5%87%ba%e8%ba%ab" aria-label="一、出身">一、出身</a></li>
                <li>
                    <a href="#%e4%ba%8c%e4%bd%93%e4%be%8b" aria-label="二、体例">二、体例</a></li>
                <li>
                    <a href="#%e4%b8%89%e5%8a%9f%e7%94%a8" aria-label="三、功用">三、功用</a></li>
                <li>
                    <a href="#%e5%9b%9b%e8%a7%84%e6%a8%a1" aria-label="四、规模">四、规模</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%af%8d%e5%85%b8%e5%ba%94%e8%af%a5%e4%b8%ba%e5%ad%a6%e4%b9%a0%e8%80%85%e6%8f%90%e4%be%9b%e5%93%aa%e4%ba%9b%e4%b8%9c%e8%a5%bf" aria-label="词典应该为学习者提供哪些东西">词典应该为学习者提供哪些东西</a></li>
                <li>
                    <a href="#%e8%8b%b1%e8%af%ad%e8%af%8d%e5%85%b8%e6%8e%a8%e8%8d%90" aria-label="英语词典推荐">英语词典推荐</a><ul>
                        
                <li>
                    <a href="#1-%e8%8b%b1%e6%b1%89%e8%af%8d%e5%85%b8the-little-dict" aria-label="1 英汉词典：The Little Dict">1 英汉词典：<em>The Little Dict</em></a></li>
                <li>
                    <a href="#2-%e8%8b%b1%e8%8b%b1%e8%8b%b1%e6%b1%89%e5%8f%8c%e8%a7%a3%e8%af%8d%e5%85%b8esl" aria-label="2 英英·英汉双解词典（ESL）">2 英英·英汉双解词典（ESL）</a></li>
                <li>
                    <a href="#3-%e6%b1%89%e8%8b%b1%e8%af%8d%e5%85%b8%e4%bb%bb%e9%80%89%e4%b8%80%e9%83%a8" aria-label="3 汉英词典（任选一部）">3 汉英词典（任选一部）</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%8b%b1%e8%af%ad%e6%9e%84%e8%af%8d%e6%b3%95%e8%a7%84%e5%88%99" aria-label="英语构词法规则">英语构词法规则</a></li>
                <li>
                    <a href="#%e6%9c%97%e6%96%875-%e8%87%aa%e5%8a%a8%e5%b1%95%e5%bc%80%e9%9f%b3%e8%8a%82syllable%e5%8f%8a%e6%b1%89%e8%af%adchinese" aria-label="朗文5 &#43;&#43;：自动展开音节（Syllable）及汉语（Chinese）">朗文5 ++：自动展开音节（Syllable）及汉语（Chinese）</a></li>
                <li>
                    <a href="#goldendict-%e8%bf%9b%e9%98%b6%e6%8a%80%e5%b7%a7" aria-label="GoldenDict 进阶技巧">GoldenDict 进阶技巧</a><ul>
                        
                <li>
                    <a href="#%e6%95%88%e7%8e%87%e6%8f%90%e5%8d%87%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="效率提升：快捷键">效率提升：快捷键</a></li>
                <li>
                    <a href="#%e6%9f%a5%e5%8f%a5%e5%85%a8%e6%96%87%e6%90%9c%e7%b4%a2" aria-label="查句：全文搜索">查句：全文搜索</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96" aria-label="其他">其他</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e6%96%87%e7%ab%a0" aria-label="参考文章">参考文章</a></li>
                <li>
                    <a href="#goldendict-dark-themehttpsgithubcomgoldendictgoldendictwikigoldendict-dark-theme" aria-label="GoldenDict Dark Theme"><a href="https://github.com/goldendict/goldendict/wiki/GoldenDict-Dark-Theme">GoldenDict Dark Theme</a></a></li>
                <li>
                    <a href="#startup--silent-start" aria-label="startup &amp;amp; silent start">startup &amp; silent start</a></li>
                <li>
                    <a href="#crow-translatehttpsgithubcomcrow-translatecrow-translate" aria-label="crow-translate"><a href="https://github.com/crow-translate/crow-translate">crow-translate</a></a></li></ul>
                </li>
                <li>
                    <a href="#flameshothttpsflameshotorg" aria-label="Flameshot"><a href="https://flameshot.org/">Flameshot</a></a></li>
                <li>
                    <a href="#ppsspphttpsapkcabalcomngbest-ppsspp-settings" aria-label="PPSSPP"><a href="https://apkcabal.com.ng/best-ppsspp-settings/">PPSSPP</a></a></li>
                <li>
                    <a href="#yuzuhttpswwwbilibilicomreadcv4973631" aria-label="yuzu"><a href="https://www.bilibili.com/read/cv4973631">yuzu</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-4" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%aehttpswwwjianshucompd55e015fbcb6" aria-label="设置"><a href="https://www.jianshu.com/p/d55e015fbcb6">设置</a></a></li>
                <li>
                    <a href="#%e7%ae%a1%e7%90%86" aria-label="管理">管理</a></li></ul>
                </li>
                <li>
                    <a href="#rubickhttpsgithubcomrubickcenterrubick" aria-label="rubick"><a href="https://github.com/rubickCenter/rubick">rubick</a></a><ul>
                        
                <li>
                    <a href="#utoolshttpsutools" aria-label="uTools"><a href="https://u.tools/">uTools</a></a></li>
                <li>
                    <a href="#alberthttpswwwcnblogscomkeatonlaop13252483html" aria-label="Albert"><a href="https://www.cnblogs.com/keatonlao/p/13252483.html">Albert</a></a></li></ul>
                </li>
                <li>
                    <a href="#calibrehttpscalibre-ebookcom" aria-label="Calibre"><a href="https://calibre-ebook.com/">Calibre</a></a><ul>
                        
                <li>
                    <a href="#gnome-bookshttpswikignomeorgappsbooks" aria-label="gnome-books"><a href="https://wiki.gnome.org/Apps/Books">gnome-books</a></a></li></ul>
                </li>
                <li>
                    <a href="#ventoyhttpswwwventoynetcnindexhtml" aria-label="Ventoy"><a href="https://www.ventoy.net/cn/index.html">Ventoy</a></a><ul>
                        
                <li>
                    <a href="#balenaetcherhttpsgithubcombalena-ioetcher" aria-label="balenaEtcher"><a href="https://github.com/balena-io/etcher">balenaEtcher</a></a></li>
                <li>
                    <a href="#unetbootinhttpsgithubcomunetbootinunetbootin" aria-label="UNetbootin"><a href="https://github.com/unetbootin/unetbootin">UNetbootin</a></a></li>
                <li>
                    <a href="#woeusb-nghttpsgithubcomwoeusbwoeusb-ng" aria-label="WoeUSB-ng"><a href="https://github.com/WoeUSB/WoeUSB-ng">WoeUSB-ng</a></a></li></ul>
                </li>
                <li>
                    <a href="#timeshifthttpsgithubcomteejee2008timeshift" aria-label="Timeshift"><a href="https://github.com/teejee2008/timeshift">Timeshift</a></a></li>
                <li>
                    <a href="#todoisthttpssnapcraftioinstalltodoistubuntuinstall" aria-label="Todoist"><a href="https://snapcraft.io/install/todoist/ubuntu#install">Todoist</a></a></li>
                <li>
                    <a href="#plankhttpslaunchpadnetplank" aria-label="Plank"><a href="https://launchpad.net/plank">Plank</a></a><ul>
                        
                <li>
                    <a href="#latte-dock" aria-label="latte-dock">latte-dock</a></li></ul>
                </li>
                <li>
                    <a href="#steamhttpsstoresteampoweredcom" aria-label="Steam"><a href="https://store.steampowered.com/">Steam</a></a></li>
                <li>
                    <a href="#yacreaderhttpsyacreadercom" aria-label="YACReader"><a href="https://yacreader.com/">YACReader</a></a><ul>
                        
                <li>
                    <a href="#tachideskhttpsgithubcomsuwayomitachidesk-server" aria-label="Tachidesk"><a href="https://github.com/Suwayomi/Tachidesk-Server">Tachidesk</a></a></li></ul>
                </li>
                <li>
                    <a href="#hakunekohttpsgithubcommanga-downloadhakuneko" aria-label="hakuneko"><a href="https://github.com/manga-download/hakuneko">hakuneko</a></a><ul>
                        
                <li>
                    <a href="#work_crawlerhttpsgithubcomkanasimiwork_crawler" aria-label="work_crawler"><a href="https://github.com/kanasimi/work_crawler">work_crawler</a></a></li></ul>
                </li>
                <li>
                    <a href="#dingtalkhttpsgithubcomnashaofudingtalk" aria-label="dingtalk"><a href="https://github.com/nashaofu/dingtalk">dingtalk</a></a></li>
                <li>
                    <a href="#howdyhttpsgithubcomboltgolthowdy" aria-label="howdy"><a href="https://github.com/boltgolt/howdy">howdy</a></a></li>
                <li>
                    <a href="#%e5%90%91%e6%97%a5%e8%91%b5httpssunloginoraycom" aria-label="向日葵"><a href="https://sunlogin.oray.com/">向日葵</a></a></li>
                <li>
                    <a href="#keepassxchttpskeepassxcorg" aria-label="KeePassXC"><a href="https://keepassxc.org/">KeePassXC</a></a></li>
                <li>
                    <a href="#words-pickerhttpsgithubcomziqiangxuwords-picker" aria-label="words-picker"><a href="https://github.com/ziqiangxu/words-picker">words-picker</a></a></li>
                <li>
                    <a href="#copyqhttpsgithubcomhlukcopyq" aria-label="CopyQ"><a href="https://github.com/hluk/CopyQ">CopyQ</a></a></li>
                <li>
                    <a href="#xnviewmphttpswwwxnviewcomenxnviewmp" aria-label="XnViewMP"><a href="https://www.xnview.com/en/xnviewmp/">XnViewMP</a></a></li>
                <li>
                    <a href="#zealhttpszealdocsorg" aria-label="Zeal"><a href="https://zealdocs.org/">Zeal</a></a></li>
                <li>
                    <a href="#xmindhttpswwwxmindnet" aria-label="XMind"><a href="https://www.xmind.net/">XMind</a></a></li></ul>
                </li>
                <li>
                    <a href="#cli-utilities" aria-label="CLI Utilities">CLI Utilities</a><ul>
                        
                <li>
                    <a href="#postgresql" aria-label="PostgreSQL">PostgreSQL</a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-5" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e6%9f%a5%e6%89%be%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="查找配置文件">查找配置文件</a></li>
                <li>
                    <a href="#questions-1" aria-label="Questions">Questions</a></li></ul>
                </li>
                <li>
                    <a href="#ansiblehttpsansible-tranreadthedocsioenlatestindexhtml" aria-label="Ansible"><a href="https://ansible-tran.readthedocs.io/en/latest/index.html">Ansible</a></a></li>
                <li>
                    <a href="#fdupeshttpsaskubuntucomquestions3865how-to-find-and-delete-duplicate-files" aria-label="fdupes"><a href="https://askubuntu.com/questions/3865/how-to-find-and-delete-duplicate-files">fdupes</a></a><ul>
                        
                <li>
                    <a href="#digikamhttpswwwdigikamorg" aria-label="digiKam"><a href="https://www.digikam.org/">digiKam</a></a></li></ul>
                </li>
                <li>
                    <a href="#bypyhttpscdnjsdelivrnetghhoutianzebypymaster" aria-label="bypy"><a href="https://cdn.jsdelivr.net/gh/houtianze/bypy@master/">bypy</a></a></li>
                <li>
                    <a href="#frphttpsgofrporg" aria-label="FRP"><a href="https://gofrp.org/">FRP</a></a></li>
                <li>
                    <a href="#git" aria-label="Git">Git</a><ul>
                        
                <li>
                    <a href="#sync-repos" aria-label="sync-repos">sync-repos</a></li>
                <li>
                    <a href="#github-desktophttpsdesktopgithubcom" aria-label="GitHub Desktop"><a href="https://desktop.github.com/">GitHub Desktop</a></a></li>
                <li>
                    <a href="#github520httpsgithubcom521xueweihangithub520" aria-label="GitHub520"><a href="https://github.com/521xueweihan/GitHub520">GitHub520</a></a></li></ul>
                </li>
                <li>
                    <a href="#libguestfs" aria-label="libguestfs">libguestfs</a></li>
                <li>
                    <a href="#oracle-jdk" aria-label="Oracle JDK">Oracle JDK</a></li>
                <li>
                    <a href="#snapper" aria-label="Snapper">Snapper</a><ul>
                        
                <li>
                    <a href="#grub-btrfshttpsgithubcomantyneagrub-btrfs" aria-label="grub-btrfs"><a href="https://github.com/Antynea/grub-btrfs">grub-btrfs</a></a></li></ul>
                </li>
                <li>
                    <a href="#fail2banhttpszhuanlanzhihucomp33546122" aria-label="Fail2Ban"><a href="https://zhuanlan.zhihu.com/p/33546122">Fail2Ban</a></a></li>
                <li>
                    <a href="#syncthinghttpszhuanlanzhihucomp69267020" aria-label="Syncthing"><a href="https://zhuanlan.zhihu.com/p/69267020">Syncthing</a></a></li>
                <li>
                    <a href="#masscanhttpscloudtencentcomdeveloperarticle1707983" aria-label="masscan"><a href="https://cloud.tencent.com/developer/article/1707983">masscan</a></a></li>
                <li>
                    <a href="#imagemagickhttpswwwimagemagickorgscriptindexphp" aria-label="ImageMagick"><a href="https://www.imagemagick.org/script/index.php">ImageMagick</a></a></li>
                <li>
                    <a href="#p7ziphttpswww7-ziporg" aria-label="p7zip"><a href="https://www.7-zip.org/">p7zip</a></a><ul>
                        
                <li>
                    <a href="#differences-between-7z-7za-and-7zr-binarieshttpswikiarchlinuxorgtitlep7zip" aria-label="Differences between 7z, 7za and 7zr binaries"><a href="https://wiki.archlinux.org/title/p7zip">Differences between 7z, 7za and 7zr binaries</a></a></li>
                <li>
                    <a href="#%e5%88%86%e5%8d%b7%e5%8e%8b%e7%bc%a9%e4%b8%8e%e8%a7%a3%e5%8e%8b%e7%bc%a9httpsdeveloperaliyuncomarticle506654" aria-label="分卷压缩与解压缩"><a href="https://developer.aliyun.com/article/506654">分卷压缩与解压缩</a></a><ul>
                        
                <li>
                    <a href="#rar" aria-label="rar">rar</a></li>
                <li>
                    <a href="#ziphttpsunixstackexchangecoma40565" aria-label="zip"><a href="https://unix.stackexchange.com/a/40565">zip</a></a></li>
                <li>
                    <a href="#tar" aria-label="tar">tar</a></li>
                <li>
                    <a href="#7z" aria-label="7z">7z</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#wudao-dicthttpsgithubcomchestnuthengwudao-dict" aria-label="Wudao-dict"><a href="https://github.com/ChestnutHeng/Wudao-dict">Wudao-dict</a></a></li>
                <li>
                    <a href="#-ascii-image-converterhttpsgithubcomthezoraizascii-image-converter" aria-label="ascii-image-converter"><a href="https://github.com/TheZoraiz/ascii-image-converter"> ascii-image-converter</a></a></li>
                <li>
                    <a href="#ttydhttpsgithubcomtsl0922ttyd" aria-label="ttyd"><a href="https://github.com/tsl0922/ttyd">ttyd</a></a></li>
                <li>
                    <a href="#progresshttpsgithubcomxfennecprogress" aria-label="progress"><a href="https://github.com/Xfennec/progress">progress</a></a></li>
                <li>
                    <a href="#vosk-apihttpsgithubcomalphacepvosk-api" aria-label="vosk-api"><a href="https://github.com/alphacep/vosk-api">vosk-api</a></a><ul>
                        
                <li>
                    <a href="#convert-mp3-to-texthttpsaskubuntucomquestions161515speech-recognition-app-to-convert-mp3-to-text" aria-label="convert MP3 to text"><a href="https://askubuntu.com/questions/161515/speech-recognition-app-to-convert-mp3-to-text">convert MP3 to text</a></a></li></ul>
                </li>
                <li>
                    <a href="#inxihttpslinuxcnarticle-14089-1html" aria-label="inxi"><a href="https://linux.cn/article-14089-1.html">inxi</a></a></li>
                <li>
                    <a href="#busyboxhttpslinuxcnarticle-13840-1html" aria-label="BusyBox"><a href="https://linux.cn/article-13840-1.html">BusyBox</a></a><ul>
                        
                <li>
                    <a href="#%e6%9e%81%e7%ae%80%e4%b8%bb%e4%b9%89" aria-label="极简主义">极简主义</a></li></ul>
                </li>
                <li>
                    <a href="#lynishttpslinuxcnarticle-12696-1html" aria-label="Lynis"><a href="https://linux.cn/article-12696-1.html">Lynis</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-lynis" aria-label="安装 Lynis">安装 Lynis</a></li>
                <li>
                    <a href="#%e8%bf%90%e8%a1%8c-lynis" aria-label="运行 Lynis">运行 Lynis</a></li>
                <li>
                    <a href="#%e5%ae%a1%e8%ae%a1-linux-%e7%b3%bb%e7%bb%9f" aria-label="审计 Linux 系统">审计 Linux 系统</a></li>
                <li>
                    <a href="#%e6%8e%a2%e7%b4%a2%e6%8a%a5%e5%91%8a" aria-label="探索报告">探索报告</a></li>
                <li>
                    <a href="#%e8%af%95%e8%af%95%e5%90%a7" aria-label="试试吧">试试吧</a></li>
                <li>
                    <a href="#how-can-i-protect-against-single-user-modehttpsaskubuntucomquestions1011368how-can-i-protect-against-single-user-mode" aria-label="How can I protect against single user mode"><a href="https://askubuntu.com/questions/1011368/how-can-i-protect-against-single-user-mode">How can I protect against single user mode</a></a></li></ul>
                </li>
                <li>
                    <a href="#checkinstallhttpslinuxcnarticle-4090-1html" aria-label="CheckInstall"><a href="https://linux.cn/article-4090-1.html">CheckInstall</a></a></li>
                <li>
                    <a href="#gksudokdesudohttpsaskubuntucomquestions11760what-is-the-difference-between-gksudo-nautilus-and-sudo-nautilus" aria-label="gksudo/kdesudo"><a href="https://askubuntu.com/questions/11760/what-is-the-difference-between-gksudo-nautilus-and-sudo-nautilus">gksudo/kdesudo</a></a></li>
                <li>
                    <a href="#manhttpslinuxcnarticle-13478-1html" aria-label="man"><a href="https://linux.cn/article-13478-1.html">man</a></a><ul>
                        
                <li>
                    <a href="#%e5%85%a5%e9%97%a8" aria-label="入门">入门</a></li>
                <li>
                    <a href="#%e8%8a%82" aria-label="节">节</a></li>
                <li>
                    <a href="#%e6%89%8b%e5%86%8c%e9%a1%b5%e7%9a%84%e8%8a%82" aria-label="手册页的节">手册页的节</a></li>
                <li>
                    <a href="#%e6%89%8b%e5%86%8c%e7%9a%84%e8%8a%82" aria-label="手册的节">手册的节</a></li>
                <li>
                    <a href="#%e6%90%9c%e7%b4%a2%e4%b8%80%e4%b8%aa%e7%89%b9%e5%ae%9a%e7%9a%84%e8%8a%82" aria-label="搜索一个特定的节">搜索一个特定的节</a></li>
                <li>
                    <a href="#%e6%90%9c%e7%b4%a2%e5%8c%85%e5%90%ab%e6%9f%90%e4%b8%aa%e5%85%b3%e9%94%ae%e8%af%8d%e7%9a%84%e6%89%80%e6%9c%89%e6%89%8b%e5%86%8c%e9%a1%b5" aria-label="搜索包含某个关键词的所有手册页">搜索包含某个关键词的所有手册页</a></li>
                <li>
                    <a href="#%e4%ba%86%e8%a7%a3%e6%89%8b%e5%86%8c%e7%9a%84%e5%90%84%e4%b8%aa%e8%8a%82" aria-label="了解手册的各个节">了解手册的各个节</a></li>
                <li>
                    <a href="#%e7%bb%93%e8%ae%ba" aria-label="结论">结论</a></li>
                <li>
                    <a href="#tldrhttpsgithubcomtldr-pagestldr" aria-label="tldr"><a href="https://github.com/tldr-pages/tldr">tldr</a></a></li></ul>
                </li>
                <li>
                    <a href="#lshttpslinuxcnarticle-11159-1html" aria-label="ls"><a href="https://linux.cn/article-11159-1.html">ls</a></a><ul>
                        
                <li>
                    <a href="#gnu-%e8%bf%98%e6%98%af-bsd" aria-label="GNU 还是 BSD？">GNU 还是 BSD？</a></li>
                <li>
                    <a href="#%e5%88%86%e7%b1%bb" aria-label="分类">分类</a></li>
                <li>
                    <a href="#%e9%95%bf%e5%88%97%e8%a1%a8" aria-label="长列表">长列表</a></li>
                <li>
                    <a href="#%e6%97%b6%e9%97%b4%e5%92%8c%e6%97%a5%e6%9c%9f%e6%a0%bc%e5%bc%8f" aria-label="时间和日期格式">时间和日期格式</a></li>
                <li>
                    <a href="#%e6%8c%89%e6%97%b6%e9%97%b4%e6%8e%92%e5%ba%8f" aria-label="按时间排序">按时间排序</a></li>
                <li>
                    <a href="#%e5%88%97%e5%87%ba%e6%96%b9%e5%bc%8f" aria-label="列出方式">列出方式</a></li>
                <li>
                    <a href="#%e9%9a%90%e8%97%8f%e6%9d%82%e9%a1%b9" aria-label="隐藏杂项">隐藏杂项</a></li>
                <li>
                    <a href="#%e9%80%92%e5%bd%92%e5%9c%b0%e5%88%97%e5%87%ba%e7%9b%ae%e5%bd%95" aria-label="递归地列出目录">递归地列出目录</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e5%88%ab%e5%90%8d%e4%bd%bf%e5%85%b6%e6%b0%b8%e4%b9%85%e5%8c%96" aria-label="使用别名使其永久化">使用别名使其永久化</a></li>
                <li>
                    <a href="#%e5%81%9a%e4%b8%80%e4%bb%b6%e4%ba%8b%e6%8a%8a%e5%ae%83%e5%81%9a%e5%a5%bd" aria-label="做一件事，把它做好">做一件事，把它做好</a></li>
                <li>
                    <a href="#exahttpsgithubcomoghamexa" aria-label="exa"><a href="https://github.com/ogham/exa">exa</a></a></li></ul>
                </li>
                <li>
                    <a href="#du-disk-usagehttpslinuxcnarticle-11503-1html" aria-label="du (Disk Usage)"><a href="https://linux.cn/article-11503-1.html">du (Disk Usage)</a></a><ul>
                        
                <li>
                    <a href="#ncurses-disk-usagehttpsdevyorhelnlncdu" aria-label="NCurses Disk Usage"><a href="https://dev.yorhel.nl/ncdu">NCurses Disk Usage</a></a></li>
                <li>
                    <a href="#gduhttpsgithubcomdundeegdu" aria-label="gdu"><a href="https://github.com/dundee/gdu">gdu</a></a></li></ul>
                </li>
                <li>
                    <a href="#diffhttpswwwruanyifengcomblog201208how_to_read_diffhtml" aria-label="Diff"><a href="https://www.ruanyifeng.com/blog/2012/08/how_to_read_diff.html">Diff</a></a><ul>
                        
                <li>
                    <a href="#%e4%b8%89%e7%a7%8d%e6%a0%bc%e5%bc%8f" aria-label="三种格式">三种格式</a></li>
                <li>
                    <a href="#%e7%a4%ba%e4%be%8b%e6%96%87%e4%bb%b6" aria-label="示例文件">示例文件</a></li>
                <li>
                    <a href="#%e6%ad%a3%e5%b8%b8%e6%a0%bc%e5%bc%8f" aria-label="正常格式">正常格式</a></li>
                <li>
                    <a href="#%e4%b8%8a%e4%b8%8b%e6%96%87%e6%a0%bc%e5%bc%8f" aria-label="上下文格式">上下文格式</a></li>
                <li>
                    <a href="#%e5%90%88%e5%b9%b6%e6%a0%bc%e5%bc%8f" aria-label="合并格式">合并格式</a></li>
                <li>
                    <a href="#git%e6%a0%bc%e5%bc%8f" aria-label="git格式">git格式</a></li></ul>
                </li>
                <li>
                    <a href="#crontabhttpcbianchengnetview1092html" aria-label="Crontab"><a href="http://c.biancheng.net/view/1092.html">Crontab</a></a><ul>
                        
                <li>
                    <a href="#installing" aria-label="Installing">Installing</a></li>
                <li>
                    <a href="#running" aria-label="Running">Running</a></li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e8%af%a6%e8%a7%a3" aria-label="命令详解">命令详解</a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e9%80%89%e9%a1%b9" aria-label="常用选项">常用选项</a></li>
                <li>
                    <a href="#crontab-%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f" aria-label="crontab 文件格式">crontab 文件格式</a></li></ul>
                </li>
                <li>
                    <a href="#run-a-script-on-startuphttpsunixstackexchangecomquestions416137how-can-i-run-a-script-on-startup-on-ubuntu-server-17-10" aria-label="run a script on startup"><a href="https://unix.stackexchange.com/questions/416137/how-can-i-run-a-script-on-startup-on-ubuntu-server-17-10">run a script on startup</a></a></li></ul>
                </li>
                <li>
                    <a href="#pshttpslinuxtools-rstreadthedocsiozh_cnlatesttoolpshtml" aria-label="ps"><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/ps.html">ps</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8b-4" aria-label="简介">简介</a></li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e5%8f%82%e6%95%b0httpswwwjianshucomp943b90150c10" aria-label="命令参数"><a href="https://www.jianshu.com/p/943b90150c10">命令参数</a></a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e5%ae%9e%e4%be%8bhttpcbianchengnetview1062html" aria-label="使用实例"><a href="http://c.biancheng.net/view/1062.html">使用实例</a></a></li></ul>
                </li>
                <li>
                    <a href="#tophttpcbianchengnetview1065html" aria-label="top"><a href="http://c.biancheng.net/view/1065.html">top</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8bhttpslinuxtools-rstreadthedocsiozh_cnlatesttooltophtml" aria-label="简介"><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/top.html">简介</a></a></li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e5%8f%82%e6%95%b0" aria-label="命令参数">命令参数</a></li>
                <li>
                    <a href="#%e4%ba%a4%e4%ba%92%e6%93%8d%e4%bd%9c%e6%8c%87%e4%bb%a4" aria-label="交互操作指令">交互操作指令</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e5%ae%9e%e4%be%8b" aria-label="使用实例">使用实例</a></li>
                <li>
                    <a href="#htophttpsgithubcomhtop-devhtop" aria-label="htop"><a href="https://github.com/htop-dev/htop/">htop</a></a></li>
                <li>
                    <a href="#bpytophttpsgithubcomaristocratosbpytop" aria-label="bpytop"><a href="https://github.com/aristocratos/bpytop">bpytop</a></a></li></ul>
                </li>
                <li>
                    <a href="#lsofhttpslinuxtools-rstreadthedocsiozh_cnlatesttoollsofhtml" aria-label="lsof"><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/lsof.html">lsof</a></a><ul>
                        
                <li>
                    <a href="#%e7%ae%80%e4%bb%8bhttpcbianchengnetview1088html" aria-label="简介"><a href="http://c.biancheng.net/view/1088.html">简介</a></a></li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e5%8f%82%e6%95%b0-1" aria-label="命令参数">命令参数</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e5%ae%9e%e4%be%8b-1" aria-label="使用实例">使用实例</a></li></ul>
                </li>
                <li>
                    <a href="#write" aria-label="write">write</a></li>
                <li>
                    <a href="#xargs" aria-label="xargs">xargs</a><ul>
                        
                <li>
                    <a href="#%e6%a0%87%e5%87%86%e8%be%93%e5%85%a5%e4%b8%8e%e7%ae%a1%e9%81%93%e5%91%bd%e4%bb%a4" aria-label="标准输入与管道命令">标准输入与管道命令</a></li>
                <li>
                    <a href="#xargs-%e5%91%bd%e4%bb%a4%e7%9a%84%e4%bd%9c%e7%94%a8" aria-label="xargs 命令的作用">xargs 命令的作用</a></li>
                <li>
                    <a href="#xargs-%e7%9a%84%e5%8d%95%e7%8b%ac%e4%bd%bf%e7%94%a8" aria-label="xargs 的单独使用">xargs 的单独使用</a></li>
                <li>
                    <a href="#-d-%e5%8f%82%e6%95%b0%e4%b8%8e%e5%88%86%e9%9a%94%e7%ac%a6" aria-label="-d 参数与分隔符">-d 参数与分隔符</a></li>
                <li>
                    <a href="#-p-%e5%8f%82%e6%95%b0-t-%e5%8f%82%e6%95%b0" aria-label="-p 参数，-t 参数">-p 参数，-t 参数</a></li>
                <li>
                    <a href="#-0-%e5%8f%82%e6%95%b0%e4%b8%8e-find-%e5%91%bd%e4%bb%a4" aria-label="-0 参数与 find 命令">-0 参数与 find 命令</a></li>
                <li>
                    <a href="#-l-%e5%8f%82%e6%95%b0" aria-label="-L 参数">-L 参数</a></li>
                <li>
                    <a href="#-n-%e5%8f%82%e6%95%b0" aria-label="-n 参数">-n 参数</a></li>
                <li>
                    <a href="#-i-%e5%8f%82%e6%95%b0" aria-label="-I 参数">-I 参数</a></li>
                <li>
                    <a href="#--max-procs-%e5%8f%82%e6%95%b0" aria-label="&amp;ndash;max-procs 参数">&ndash;max-procs 参数</a></li></ul>
                </li>
                <li>
                    <a href="#awkhttpswwwruanyifengcomblog201811awkhtml" aria-label="awk"><a href="https://www.ruanyifeng.com/blog/2018/11/awk.html">awk</a></a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95-1" aria-label="基本用法">基本用法</a></li>
                <li>
                    <a href="#%e5%8f%98%e9%87%8f" aria-label="变量">变量</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0-1" aria-label="函数">函数</a></li>
                <li>
                    <a href="#%e6%9d%a1%e4%bb%b6" aria-label="条件">条件</a></li>
                <li>
                    <a href="#if-%e8%af%ad%e5%8f%a5" aria-label="if 语句">if 语句</a></li></ul>
                </li>
                <li>
                    <a href="#findhttpslinuxcnarticle-14071-1html" aria-label="find"><a href="https://linux.cn/article-14071-1.html">find</a></a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e9%80%89%e9%a1%b9httpslinuxcnarticle-1672-1html" aria-label="常用选项"><a href="https://linux.cn/article-1672-1.html">常用选项</a></a></li>
                <li>
                    <a href="#%e6%8c%89%e5%90%8d%e7%a7%b0%e6%9f%a5%e6%89%be%e6%96%87%e4%bb%b6" aria-label="按名称查找文件">按名称查找文件</a></li>
                <li>
                    <a href="#%e9%80%9a%e9%85%8d%e7%ac%a6" aria-label="通配符">通配符</a></li>
                <li>
                    <a href="#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f" aria-label="正则表达式">正则表达式</a></li>
                <li>
                    <a href="#%e6%9f%a5%e6%89%be%e8%bf%91%e4%b8%80%e5%91%a8%e4%bf%ae%e6%94%b9%e8%bf%87%e7%9a%84%e6%96%87%e4%bb%b6" aria-label="查找近一周修改过的文件">查找近一周修改过的文件</a></li>
                <li>
                    <a href="#%e6%9f%a5%e6%89%be%e8%bf%91%e5%87%a0%e5%a4%a9%e4%bf%ae%e6%94%b9%e7%9a%84%e6%96%87%e4%bb%b6" aria-label="查找近几天修改的文件">查找近几天修改的文件</a></li>
                <li>
                    <a href="#%e6%8c%89%e6%96%87%e4%bb%b6%e7%b1%bb%e5%9e%8b%e9%99%90%e5%88%b6%e6%90%9c%e7%b4%a2" aria-label="按文件类型限制搜索">按文件类型限制搜索</a></li>
                <li>
                    <a href="#%e8%b0%83%e6%95%b4%e8%8c%83%e5%9b%b4" aria-label="调整范围">调整范围</a></li>
                <li>
                    <a href="#%e4%b8%8e-xargs" aria-label="与 xargs">与 xargs</a></li>
                <li>
                    <a href="#fdhttpsgithubcomsharkdpfd" aria-label="fd"><a href="https://github.com/sharkdp/fd">fd</a></a></li></ul>
                </li>
                <li>
                    <a href="#grephttpslinuxcnarticle-6927-1html" aria-label="grep"><a href="https://linux.cn/article-6927-1.html">grep</a></a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e9%9b%86httpslinuxcnarticle-1672-1html" aria-label="基本集"><a href="https://linux.cn/article-1672-1.html">基本集</a></a></li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e9%80%89%e9%a1%b9-1" aria-label="常用选项">常用选项</a></li>
                <li>
                    <a href="#%e6%80%8e%e4%b9%88%e6%a0%b7%e4%bd%bf%e7%94%a8-grep-%e6%9d%a5%e6%90%9c%e7%b4%a2%e4%b8%80%e4%b8%aa%e6%96%87%e4%bb%b6" aria-label="怎么样使用 grep 来搜索一个文件">怎么样使用 grep 来搜索一个文件</a></li>
                <li>
                    <a href="#%e9%80%92%e5%bd%92%e4%bd%bf%e7%94%a8-grep" aria-label="递归使用 grep">递归使用 grep</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-grep-%e5%8e%bb%e6%90%9c%e7%b4%a2%e6%96%87%e6%9c%ac" aria-label="使用 grep 去搜索文本">使用 grep 去搜索文本</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-grep-%e5%91%bd%e4%bb%a4%e5%8e%bb%e6%90%9c%e7%b4%a2%e4%b8%a4%e4%b8%aa%e4%b8%8d%e5%90%8c%e7%9a%84%e5%8d%95%e8%af%8d" aria-label="使用 grep 命令去搜索两个不同的单词">使用 grep 命令去搜索两个不同的单词</a></li>
                <li>
                    <a href="#%e7%bb%9f%e8%ae%a1%e6%96%87%e6%9c%ac%e5%8c%b9%e9%85%8d%e5%88%b0%e7%9a%84%e8%a1%8c%e6%95%b0" aria-label="统计文本匹配到的行数">统计文本匹配到的行数</a></li>
                <li>
                    <a href="#%e5%8f%8d%e8%bd%ac%e5%8c%b9%e9%85%8d%e4%b8%8d%e5%8c%b9%e9%85%8d" aria-label="反转匹配（不匹配）">反转匹配（不匹配）</a></li>
                <li>
                    <a href="#unixlinux-%e7%ae%a1%e9%81%93%e4%b8%8e-grep-%e5%91%bd%e4%bb%a4" aria-label="UNIX/Linux 管道与 grep 命令">UNIX/Linux 管道与 grep 命令</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e4%bb%85%e4%bb%85%e6%98%be%e7%a4%ba%e5%8c%b9%e9%85%8d%e5%88%b0%e5%86%85%e5%ae%b9%e7%9a%84%e6%96%87%e4%bb%b6%e5%90%8d%e5%ad%97" aria-label="如何仅仅显示匹配到内容的文件名字?">如何仅仅显示匹配到内容的文件名字?</a></li>
                <li>
                    <a href="#%e6%9f%a5%e6%89%be%e6%96%87%e4%bb%b6%e5%86%85%e5%ae%b9httpswwwrunoobcomnote48437" aria-label="查找文件内容"><a href="https://www.runoob.com/note/48437">查找文件内容</a></a></li></ul>
                </li>
                <li>
                    <a href="#cat" aria-label="cat">cat</a><ul>
                        
                <li>
                    <a href="#bathttpsgithubcomsharkdpbat" aria-label="bat"><a href="https://github.com/sharkdp/bat">bat</a></a></li></ul>
                </li>
                <li>
                    <a href="#iphttpslinuxcnarticle-3144-1html" aria-label="ip"><a href="https://linux.cn/article-3144-1.html">ip</a></a><ul>
                        
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e5%92%8c%e5%88%a0%e9%99%a4ip%e5%9c%b0%e5%9d%80" aria-label="设置和删除Ip地址">设置和删除Ip地址</a></li>
                <li>
                    <a href="#%e5%88%97%e5%87%ba%e8%b7%af%e7%94%b1%e8%a1%a8%e6%9d%a1%e7%9b%ae" aria-label="列出路由表条目">列出路由表条目</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%94%b9%e9%bb%98%e8%ae%a4%e8%b7%af%e7%94%b1" aria-label="更改默认路由">更改默认路由</a></li>
                <li>
                    <a href="#%e6%98%be%e7%a4%ba%e7%bd%91%e7%bb%9c%e7%bb%9f%e8%ae%a1%e6%95%b0%e6%8d%ae" aria-label="显示网络统计数据">显示网络统计数据</a></li>
                <li>
                    <a href="#arp%e6%9d%a1%e7%9b%ae" aria-label="ARP条目">ARP条目</a></li>
                <li>
                    <a href="#%e7%9b%91%e6%8e%a7netlink%e6%b6%88%e6%81%af" aria-label="监控netlink消息">监控netlink消息</a></li>
                <li>
                    <a href="#%e6%bf%80%e6%b4%bb%e5%92%8c%e5%81%9c%e6%ad%a2%e7%bd%91%e7%bb%9c%e6%8e%a5%e5%8f%a3" aria-label="激活和停止网络接口">激活和停止网络接口</a></li>
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96%e5%b8%ae%e5%8a%a9" aria-label="获取帮助">获取帮助</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93" aria-label="小结">小结</a></li></ul>
                </li>
                <li>
                    <a href="#dighttpslinuxcnarticle-14051-1html" aria-label="dig"><a href="https://linux.cn/article-14051-1.html">dig</a></a><ul>
                        
                <li>
                    <a href="#%e5%8f%82%e6%95%b0%e7%b1%bb%e5%9e%8b%e6%9f%a5%e8%af%a2%e5%92%8c%e6%a0%bc%e5%bc%8f%e5%8c%96" aria-label="参数类型：查询和格式化">参数类型：查询和格式化</a></li>
                <li>
                    <a href="#%e4%b8%bb%e8%a6%81%e7%9a%84%e6%9f%a5%e8%af%a2%e9%80%89%e9%a1%b9" aria-label="主要的查询选项">主要的查询选项</a></li>
                <li>
                    <a href="#%e6%a0%bc%e5%bc%8f%e5%8c%96%e5%93%8d%e5%ba%94%e7%9a%84%e9%80%89%e9%a1%b9" aria-label="格式化响应的选项">格式化响应的选项</a></li>
                <li>
                    <a href="#digrc" aria-label="digrc"><code>digrc</code></a></li>
                <li>
                    <a href="#dig-trace" aria-label="dig &#43;trace">dig +trace</a></li>
                <li>
                    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e7%94%a8-dig" aria-label="为什么要用 dig">为什么要用 dig</a></li></ul>
                </li>
                <li>
                    <a href="#sambahttpswwwcnblogscomgzdaijiep5194033html" aria-label="Samba"><a href="https://www.cnblogs.com/gzdaijie/p/5194033.html">Samba</a></a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-6" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e5%85%b1%e4%ba%ab" aria-label="创建共享">创建共享</a></li>
                <li>
                    <a href="#%e7%94%a8%e6%88%b7%e7%ae%a1%e7%90%86" aria-label="用户管理">用户管理</a></li>
                <li>
                    <a href="#which-is-faster-samba-or-scphttpsarstechnicacomcivisviewtopicphpf16t365900" aria-label="Which is faster-Samba or scp?"><a href="https://arstechnica.com/civis/viewtopic.php?f=16&amp;t=365900">Which is faster-Samba or scp?</a></a></li>
                <li>
                    <a href="#connect-to-servers-with-nautilushttpswwwaddictivetipscomubuntu-linux-tipsconnect-to-servers-with-gnome-file-manager" aria-label="Connect to servers with nautilus"><a href="https://www.addictivetips.com/ubuntu-linux-tips/connect-to-servers-with-gnome-file-manager/">Connect to servers with nautilus</a></a></li>
                <li>
                    <a href="#mount-samba-share-in-linux" aria-label="Mount Samba Share in Linux">Mount Samba Share in Linux</a></li></ul>
                </li>
                <li>
                    <a href="#sudohttpswwwcnblogscomsparkdevp6189196html" aria-label="sudo"><a href="https://www.cnblogs.com/sparkdev/p/6189196.html">sudo</a></a><ul>
                        
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e8%af%ad%e6%b3%95" aria-label="命令语法">命令语法</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae" aria-label="基本配置">基本配置</a></li>
                <li>
                    <a href="#%e8%af%a6%e7%bb%86%e9%85%8d%e7%bd%ae" aria-label="详细配置">详细配置</a></li>
                <li>
                    <a href="#%e6%97%a5%e5%bf%97" aria-label="日志">日志</a></li>
                <li>
                    <a href="#%e4%b8%8e%e8%be%93%e5%87%ba%e9%87%8d%e5%ae%9a%e5%90%91httpswwwcnblogscomsparkdevp10287164html" aria-label="与输出重定向"><a href="https://www.cnblogs.com/sparkdev/p/10287164.html">与输出重定向</a></a></li></ul>
                </li>
                <li>
                    <a href="#fdiskhttpswwwcnblogscomsparkdevp10095916html" aria-label="fdisk"><a href="https://www.cnblogs.com/sparkdev/p/10095916.html">fdisk</a></a><ul>
                        
                <li>
                    <a href="#%e7%a3%81%e7%9b%98%e5%88%86%e7%b1%bb" aria-label="磁盘分类">磁盘分类</a></li>
                <li>
                    <a href="#%e8%a1%a8%e7%a4%ba%e6%96%b9%e6%b3%95" aria-label="表示方法">表示方法</a></li>
                <li>
                    <a href="#%e7%a3%81%e7%9b%98%e5%88%86%e5%8c%ba" aria-label="磁盘分区">磁盘分区</a></li>
                <li>
                    <a href="#%e5%88%92%e5%88%86%e7%a3%81%e7%9b%98%e5%88%86%e5%8c%ba" aria-label="划分磁盘分区">划分磁盘分区</a></li></ul>
                </li>
                <li>
                    <a href="#fuserhttpswwwcnblogscomsungeekp11857549html" aria-label="fuser"><a href="https://www.cnblogs.com/Sungeek/p/11857549.html">fuser</a></a><ul>
                        
                <li>
                    <a href="#%e6%8f%8f%e8%bf%b0" aria-label="描述">描述</a></li>
                <li>
                    <a href="#%e9%80%89%e9%a1%b9" aria-label="选项">选项</a></li>
                <li>
                    <a href="#%e7%a4%ba%e4%be%8b" aria-label="示例">示例</a></li></ul>
                </li>
                <li>
                    <a href="#tcpdumphttpssegmentfaultcoma1190000018944427" aria-label="tcpdump"><a href="https://segmentfault.com/a/1190000018944427">tcpdump</a></a><ul>
                        
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e9%80%89%e9%a1%b9" aria-label="命令选项">命令选项</a></li>
                <li>
                    <a href="#%e8%bf%87%e6%bb%a4%e5%99%a8" aria-label="过滤器">过滤器</a></li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e6%93%8d%e4%bd%9c" aria-label="常用操作">常用操作</a><ul>
                        
                <li>
                    <a href="#%e6%8a%93%e5%8f%96%e6%9f%90%e4%b8%bb%e6%9c%ba%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8c%85" aria-label="抓取某主机的数据包">抓取某主机的数据包</a></li>
                <li>
                    <a href="#%e6%8a%93%e5%8f%96%e6%9f%90%e7%ab%af%e5%8f%a3%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8c%85" aria-label="抓取某端口的数据包">抓取某端口的数据包</a></li>
                <li>
                    <a href="#%e6%8a%93%e5%8f%96%e6%9f%90%e7%bd%91%e7%bb%9c%e7%bd%91%e6%ae%b5%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8c%85" aria-label="抓取某网络（网段）的数据包">抓取某网络（网段）的数据包</a></li>
                <li>
                    <a href="#%e6%8a%93%e5%8f%96%e6%9f%90%e5%8d%8f%e8%ae%ae%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8c%85" aria-label="抓取某协议的数据包">抓取某协议的数据包</a></li>
                <li>
                    <a href="#%e5%a4%8d%e6%9d%82%e7%9a%84%e8%bf%87%e6%bb%a4%e6%9d%a1%e4%bb%b6" aria-label="复杂的过滤条件">复杂的过滤条件</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%8e%e5%85%b6%e4%bb%96%e5%b7%a5%e5%85%b7%e7%9a%84%e9%85%8d%e5%90%88" aria-label="与其他工具的配合">与其他工具的配合</a></li>
                <li>
                    <a href="#tcpdump-%e7%9a%84%e8%be%93%e5%87%ba%e6%a0%bc%e5%bc%8f" aria-label="tcpdump 的输出格式">tcpdump 的输出格式</a></li></ul>
                </li>
                <li>
                    <a href="#gpghttpsruanyifengcomblog201307gpghtml" aria-label="GPG"><a href="https://ruanyifeng.com/blog/2013/07/gpg.html">GPG</a></a><ul>
                        
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%afgpg" aria-label="什么是GPG">什么是GPG</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-7" aria-label="安装">安装</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-3" aria-label="配置">配置</a><ul>
                        
                <li>
                    <a href="#%e7%9b%ae%e5%bd%95%e4%bd%8d%e7%bd%ae" aria-label="目录位置">目录位置</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="配置文件">配置文件</a></li>
                <li>
                    <a href="#%e6%96%b0%e7%94%a8%e6%88%b7%e7%9a%84%e9%bb%98%e8%ae%a4%e9%80%89%e9%a1%b9" aria-label="新用户的默认选项">新用户的默认选项</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%94%9f%e6%88%90%e5%af%86%e9%92%a5" aria-label="生成密钥">生成密钥</a></li>
                <li>
                    <a href="#%e5%af%86%e9%92%a5%e7%ae%a1%e7%90%86" aria-label="密钥管理">密钥管理</a></li>
                <li>
                    <a href="#%e5%8a%a0%e5%af%86%e5%92%8c%e8%a7%a3%e5%af%86" aria-label="加密和解密">加密和解密</a></li>
                <li>
                    <a href="#%e7%ad%be%e5%90%8d" aria-label="签名">签名</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#others-2" aria-label="Others">Others</a><ul>
                        
                <li>
                    <a href="#ubuntu-packages-searchhttpspackagesubuntucom" aria-label="Ubuntu Packages Search"><a href="https://packages.ubuntu.com/">Ubuntu Packages Search</a></a></li>
                <li>
                    <a href="#list-of-applicationshttpswikiarchlinuxorgtitlelist_of_applicationsarch" aria-label="List of applications:Arch"><a href="https://wiki.archlinux.org/title/List_of_applications">List of applications</a>:Arch</a></li>
                <li>
                    <a href="#recommended-applicationshttpswikigentooorgwikirecommended_applications-gentoo" aria-label="Recommended applications: Gentoo"><a href="https://wiki.gentoo.org/wiki/Recommended_applications">Recommended applications</a>: Gentoo</a></li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e8%bd%af%e4%bb%b6httpszhopensuseorge5b8b8e794a8e8bdafe4bbb6opensuse" aria-label="常用软件:openSUSE"><a href="https://zh.opensuse.org/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6">常用软件</a>:openSUSE</a></li>
                <li>
                    <a href="#awesome-linux-softwarehttpsgithubcomlewisvoawesome-linux-software" aria-label="Awesome-Linux-Software"><a href="https://github.com/LewisVo/Awesome-Linux-Software">Awesome-Linux-Software</a></a></li>
                <li>
                    <a href="#%e5%ba%94%e7%94%a8%e4%b8%8b%e8%bd%bd-%e4%bc%98%e9%ba%92%e9%ba%9fhttpswwwubuntukylincomapplications" aria-label="应用下载-优麒麟"><a href="https://www.ubuntukylin.com/applications/">应用下载-优麒麟</a></a></li>
                <li>
                    <a href="#aurhttpsaurarchlinuxorg" aria-label="AUR"><a href="https://aur.archlinux.org/">AUR</a></a></li>
                <li>
                    <a href="#gentoo-portage-overlayshttpgpozugainaorg" aria-label="Gentoo Portage Overlays"><a href="http://gpo.zugaina.org/">Gentoo Portage Overlays</a></a></li>
                <li>
                    <a href="#%e9%93%9c%e8%b1%8c%e8%b1%86%e8%bd%af%e4%bb%b6%e7%94%9f%e6%80%81httpswwwatzlinuxcomallpackageshtm" aria-label="铜豌豆软件生态"><a href="https://www.atzlinux.com/allpackages.htm">铜豌豆软件生态</a></a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><code>友邦拓</code> <code>乌班图</code></p>
<blockquote>
<p>During the first ten years of this HOWTO&rsquo;s life, I reported that from a new user&rsquo;s point of view, all Linux distributions are almost equivalent. But in 2006-2007, an actual best choice emerged: <a href="http://www.ubuntu.com/">Ubuntu</a>. While other distros have their own areas of strength, Ubuntu is far and away the most accessible to Linux newbies. Beware, though, of the hideous and nigh-unusable &ldquo;Unity&rdquo; desktop interface that Ubuntu introduced as a default a few years later; the Xubuntu or Kubuntu variants are better.</p>
<p>Eric Steven Raymond - How To Become A Hacker</p>
</blockquote>
<h2 id="学习-linux-几点忠告httpswikiubuntuorgcne5ada6e4b9a0_linux_e587a0e782b9e5bfa0e5918a"><a href="https://wiki.ubuntu.org.cn/%E5%AD%A6%E4%B9%A0_Linux_%E5%87%A0%E7%82%B9%E5%BF%A0%E5%91%8A">学习 Linux 几点忠告</a><a hidden class="anchor" aria-hidden="true" href="#学习-linux-几点忠告httpswikiubuntuorgcne5ada6e4b9a0_linux_e587a0e782b9e5bfa0e5918a">#</a></h2>
<p><strong>不要當“傳教士”</strong></p>
<p><em>(這點有一個重大弊端：開放軟體沒有商業軟件那樣的宣傳，如果使用者都如此低調，用戶群不會大幅擴展。)</em></p>
<p>很多人在討論區不斷的引起的Linux對比Windows之類的討論，甚至爭的面紅耳赤，這是沒有必要的</p>
<p>這種爭論是浪費時間而沒有任何用處的。對，你花了一下午，用許多事實“捍衛”了Linux比Windows好這個說法。但是Windows的支持者並不會喜歡上Linux的，他們只是稍微退縮一下，然後找一些新的證據來跟你辯論。</p>
<p>世界上的人們都在利用Linux的研究最前沿的科學，我們還在這裡討論“要不要用Linux的這種無聊的問題，什麼時候才能趕上時代前進的步伐？</p>
<p>什麼叫做Window支持者，什麼叫做Linux的支持者？我們為什麼要支持某一個而反對另外一個？你不需要為 Linux的護法，不需要成為 Linux的支持者“或者”GNU的傳教士“ GNU / Linux的已經用事實向世界證明了它們的威力，已經被大多數人接受。你只需要安安靜靜享受的GNU / Linux的給你的樂趣和自由。</p>
<p>你需要關心的不是你的工具是什麼，而是你用它做了什麼。精通的Linux並不說明任何問題，因為它只是一個工具而已。如果你用的Windows能很好的完成你的任務，那你就沒有必要費時間去熟悉Linux操作系統。直到有一天你發現一項任務只有Linux操作系統才能完成的時候再換也不遲，因為你身邊的的Linux的愛好者一定會很樂意的幫助你。</p>
<p>如果你在使用Linux操作系統的過程中對它產生了感情，那麼你應該明白那些習慣於使用Windows的人也會對Windows產生依賴。類似的爭論還有很多：微軟 Office Word和TeX，Emacs和Vim，Wolfram Mathematica和Maple，侏儒，fvwm的和KDE的時候，狗派&hellip; &hellip;和冷靜地對自己說：“我不站在它們任何一邊。”儘管這有些不容易辦到。</p>
<p>各人的需要不同，生活的環境不同。對你來說好的東西，對別人來說不一定好，我們需要尊重別人的選擇。如果你當面說別人正在用的程序不好，沒有必要。</p>
<p><strong>不要強迫自己”</strong></p>
<p>喜歡電腦的人總是有某些心理強迫傾向。有的人說：“鍵盤比滑鼠快。我不要用滑鼠。這樣才有高效率。”所以他在編輯器裡無論什麼時候總是用20W的，大於 10J這樣的命令到達目的點。他甚至覺得圖形界面是多餘的，乾脆都不裝 Xwindow。</p>
<p>全部用鍵盤看起來的確比讓手離開鍵盤去拿鼠標，再回來“快”多了，但是快的擊鍵頻率不等於工作的高效率，對你的健康更沒有什麼好處。這只能把你變成打鍵盤的機器。</p>
<p>當你正在檢查你的文章或者程序，思維正在隨著字符的含義流動，突然為 20W，大於 10J這樣的東西出現在你的腦子裡，是不是會打斷思路？不？那說明你當時思考的問題比較簡單，這些干擾還不會起到副作用。</p>
<p>其實很多人用電腦的時候，思想都受到某種教學的束縛，上面這個只是教多數種類中的一種。某些人創造了很多這種數學，用他的工作方式來要求別人，嘲笑方式跟他不一樣的人。比如有的人嘲笑其它人寫程序不按ç 8字符縮進，嘲笑別人在六裡用方向鍵，嘲笑別人不知道是什麼增值稅，嘲笑其它人用在Java，C＃這種由地方選區回收內存語言 &hellip; &hellip;</p>
<p>你不用管各種各樣的教學，電腦只是你的工具，你想怎麼用就怎麼用。沒有人能夠約束你，沒有人可以嘲笑你的工作方式。電腦明天就不再是這個樣子，所以今天你不用完全了解它。你沒有必要知道別人創造的一切，因為你需要留點時間自己創造些東西。只要有樂趣！</p>
<p>當你下次修改文章的時候，不妨試試悠閒的用滑鼠在你眼睛看到的地方輕輕點一下。</p>
<blockquote>
<p>如果你發現自己有類似的強迫症，建議去諮詢一下心理醫生。</p>
</blockquote>
<p><strong>不要“玩”Linux</strong></p>
<p>Linux的很多人用的時候會感覺很迷茫，該用哪個發行版本呢？是不是我少裝了什麼？怎麼升級這麼快啊！怎麼這麼不穩定！每當遇到新的軟件他就想試用，每當新的版本出現，他就更新，然後用鼠標在新的菜單裡選擇從來沒見過的程序來用用。</p>
<p>其實你是為了玩Linux而使用Linux操作系統的，而沒有找到正確的理由來利用Linux操作系統。你首先要明確用電腦的目的，你用它是為了解決你的實際問題，而不是為了學習安裝操作系統，不是為了測試哪個版本好用，不是為了“趕上潮流，更不是因為你硬盤太大了，你想多佔點空間。</p>
<p>如果你啟動了電腦之後不知道應該幹什麼，那麼最好先不要用電腦，因為你可能有更重要的事情需要做。這沒什麼說的。</p>
<p><strong>不用挑剔發行版本</strong></p>
<p>很多人剛開始用linux的時候，總是在懷疑別的發行版本是否比自己正在用的這個好，總是懷疑自己以後什麼時候會失去支持，不得不換用別的發行。所以很多人今天是紅帽，明天又換成了Debian的，一會兒又是巴布亞&hellip; &hellip;甚至有的人在一台機器上裝了兩個版本的Linux操作系統，然後比較哪一個好。</p>
<p>其實你完全沒有必要這樣做，任何發行，只要你熟悉了，你在上面的工作方式幾乎不會受到任何影響。我以前一直用的紅帽，當我有一天在我的一台新機器上安裝Debian時，我發現使用紅帽的經驗完全沒有浪費。我用了一個下午就配置好了Debian，使它服服貼貼的聽我的話，就跟沒有換發行版本一樣。</p>
<p>Debian，拓林思，SuSE，紅帽，Gentoo&hellip; &hellip;任何一個版本都是不錯的。很多人認為自己攢一個 LFS的是高水平黑客的象徵，但是不是每個人都有精力去了解所有細節。</p>
<p><strong>不要盲目升級</strong></p>
<p>不知道這是心理作用還是什麼，有的人看到比較大的版本號，就會很想換成那個。很多人的Redhat的本來配置的很舒服了，可是一旦Redhat的發行新的版本，他們就會盡快下載過來，然後選擇升級安裝。結果很多時候把自己原來修改得很好的配置文件給沖掉了。新的軟件又帶來了新的問題，比如有一次我的rxvt的就升級到2.7.8跟miniChinput衝突了，升級到Redhat的8.0，xmms的發現居然缺省不能放了MP3播放，XFree86的是i810的模塊在啟動上有新的漏洞，Mozilla中，會導致突然退出。</p>
<p>如果你已經配置好了一切，千萬別再整體升級了，這會浪費你很多很多時間的，不值得。有句話說得好：“如果沒有打破，不解決它。”如果你的程序能夠完成你需要做的事情，你何必升級呢？？？？</p>
<blockquote>
<p>是的，不論是從論壇還是其他的地方反映出來的大部分都是這個問題，要么比较SUSE和Ubuntu的好，要么比Ubuntu或者Mandriva的好等等的言論。很多人還是把Linux操作系統看成了一個表面的東西。並沒有塌下心來學習 Linux系統。</p>
</blockquote>
<p><strong>不要配置你不需要的東西</strong></p>
<p>如果你只想做一個像我這樣的普通用戶，主要目的是用的Linux來完成自己的科研任務和日常工作，那就可以不用系統管理員或者網絡管理員的標準來要求自己，因為當一個系統和網絡管理員確實很辛苦。普通用戶學習那些不經常用到的複雜的維護系統的工具，其實是浪費時間，學了不用是會很快忘記的！</p>
<p>我不是一個合格的網絡管理員，我的服務器都只設置了我自己需要的功能，設置好ssh連接的ftp已經足夠了，那樣可以省去我很多麻煩。我從來不過度考慮“安全，因為 Linux操作系統缺省已經很安全了。我沒有磁帶機，就不用管tar的那些稀奇古怪的參數了，czf，xzf，ztf已經可以滿足我所有的需要。桑達，awk的，&hellip;我也只會幾種常用的命令行。</p>
<p><strong>不要習慣的使用根帳號。在需要的時候才用！</strong></p>
<p>這是很多剛接觸的UNIX類操作系統的人常見的現象，他們不喜歡在管理系統的時候才用，而是一直用根帳號幹所有事情，配置系統，安裝程序，瀏覽網頁，玩遊戲，編程 &hellip; &hellip;</p>
<p>結果有一天，他不小心在某個系統目錄使用了del * &hellip;後果不堪設想 &hellip; &hellip;</p>
<p><strong>不要用商業的眼光來看待Linux</strong></p>
<p>Linux不是商業軟件，所以不要用要求Solaris操作系統，視窗那樣的眼光來看 Linux操作系統。自由軟件的作者們從來不拉攏用戶，他們對用戶不負有任何責任。實際上在自由軟件的世界裡，開發者“和”用戶“並沒有明確的界限，大家是朋友。</p>
<p>自由軟件很可能只是滿足作者和他的朋友的需要，甚至是為了好玩而創造的。自由軟件不是完美的，自由軟件承認自己有缺點，它不會自吹自擂，蒙蔽“用戶”的耳目。這種對作者責任的解脫激發了作者的創造力，他們不用過分考慮“向上兼容，他們往往比背上重重包袱的商業軟件結構更合理，技術更先進。</p>
<p>所以當你用某個自由軟件遇到困難的時候，不應該埋怨軟件的作者，因為他們對你並沒有義務。你不應該把自己當成一個挑剔的顧客，而要把自己作為這個軟件的顧問和一個和藹的建議者，這樣你才能理解作者寫這個程序時的快樂，在遇到問題時向作者反映，幫助他完善這個軟件，成為一個快樂的參與者。就像你的哥哥送你一個他用舊了的自行車，你應該珍惜這份友情，而不要在車壞了，或者騎車摔了一跤的時候大罵你的哥哥。如果你真的不能使用這種合作的心態，那麼最好不要使用這個軟件。</p>
<p>這是一種先進的文化，它包含了互相合作，科學創新的精神。理解這一點不是很容易，很多人往往是因為不能理解這種文化而離開自由軟件。這對於作者來說並沒有什麼損失。</p>
<p><strong>幹你的正事去</strong></p>
<p>很多人跟我說，你的網頁浪費我好多時間來配置這配置那，一會兒是fvwm的，一會兒是Mutt中&hellip; &hellip;</p>
<p>嗯&hellip; &hellip;那些東西都是我有空的時候一點一點積累的，如果你想一次性搞定所有那些東西，恐怕得花你幾個星期甚至幾個月的時間！並不是一定要搞定所有這些東西你才能正常工作的。除非你真的非得利用某個程序，或者你閒著沒事，否則你可以不管這些東西。</p>
<p><strong>上面幾條僅供參考</strong></p>
<p>以上只是個人意見，不一定適合所有人。取捨由你了！</p>
<h2 id="settings">Settings<a hidden class="anchor" aria-hidden="true" href="#settings">#</a></h2>
<h3 id="dns">DNS<a hidden class="anchor" aria-hidden="true" href="#dns">#</a></h3>
<p><strong><a href="https://cloud.tencent.com/developer/article/1626778#:~:text=%E4%B8%80%E3%80%81%E5%9C%A8%20Ubuntu%20%E6%A1%8C%E9%9D%A2%E7%89%88%E8%AE%BE%E7%BD%AE%20DNS%20%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E6%9C%8D%E5%8A%A1%E5%99%A8.%20%E5%9C%A8%20Ubuntu%20%E6%A1%8C%E9%9D%A2%E7%89%88%E8%AE%BE%E7%BD%AE,DNS%20%E7%9A%84%20IP%20%E5%9C%B0%E5%9D%80%EF%BC%8C%E7%94%A8%E9%80%97%E5%8F%B7%E9%9A%94%E5%BC%80%E3%80%82.%20%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8%20Google%20DNS%20%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%82.">GUI</a></strong></p>
<ol>
<li>打开设置窗口</li>
<li>如果你连接到了 WiFi 网络，点击“Wi-FI”标签栏。否则，如果你有一个有线连接，点击『Network』标签栏。</li>
<li>选择你要设置 DNS 的网络连接，并且点击齿轮状的按钮，打开网络管理器。</li>
<li>选择 IPv4 设置标签栏。</li>
<li>禁用自动开关，并且输入 DNS 的 IP 地址，用逗号隔开。我们使用 Google DNS 域名解析服务器。</li>
<li>点击“Apply”按钮，保存修改。</li>
</ol>
<p>这个修改应该会立即有效，除非那些已经缓存了的 DNS 条目。如果你想切换回旧的设置，打开网络管理器，IPv4 设置，并且启用自动开关。</p>
<p><strong><a href="https://www.cnblogs.com/baihuitestsoftware/articles/9519724.html">CLI</a></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示当前网络连接</span>
$ nmcli connection show
<span style="color:#75715e"># 修改当前网络连接对应的DNS服务器，这里的网络连接可以用名称或者UUID来标识</span>
$ nmcli con mod ens160 ipv4.dns <span style="color:#e6db74">&#34;114.114.114.114 8.8.4.4&#34;</span>
<span style="color:#75715e"># 配置生效</span>
$ nmcli con up ens160
</code></pre></div><p><a href="https://phoenixnap.com/kb/ubuntu-dns-nameservers">或者</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Config File</span>
$ vi /etc/netplan/01-network-manager-all.yaml
network:
  version: <span style="color:#ae81ff">2</span>
  renderer: NetworkManager
  ethernets:
    ens3:
      dhcp4: no
      addresses:
        - 192.168.100.199/24
      gateway4: 192.168.100.1
      nameservers:
        address: <span style="color:#f92672">[</span>114.114.114.114, 8.8.4.4<span style="color:#f92672">]</span>
  wifis:
    ...
<span style="color:#75715e"># Apply the changes you made in the config file</span>
$ sudo netplan apply
<span style="color:#75715e"># To check if the system successfully applied the changes</span>
$ systemd-resolve --status | grep <span style="color:#e6db74">&#39;DNS Servers&#39;</span> -A2
         DNS Servers: 114.114.114.114
                      8.8.8.8        
                      8.8.4.4   
</code></pre></div><p>注意：您系统上的文件可能缺少整个以太网或 wifi 部分。 在这种情况下，添加缺少的行，确保遵守示例中提供的缩进。</p>
<p><strong><a href="https://www.fosslinux.com/45397/opendns-vs-google-dns.htm">Testing the Domain Name Resolution Speed</a></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ time dig @114.114.114.114
</code></pre></div><h3 id="others">Others<a hidden class="anchor" aria-hidden="true" href="#others">#</a></h3>
<ul>
<li>Bluetooth: OFF</li>
<li>Formats: United States</li>
<li>Blank screen: 10</li>
<li>Night Light: On</li>
<li>Touchpad: OFF</li>
<li><a href="https://linuxhint.com/enable-fractional-scaling-on-ubuntu/">Fractional Scaling</a></li>
</ul>
<h2 id="softwareupdates">SoftWare&amp;Updates<a hidden class="anchor" aria-hidden="true" href="#softwareupdates">#</a></h2>
<p><code>software-properties-gtk</code>  or <code>software-properties-kde</code> (Kubuntu) and <code>update-manager</code> (Software Updator)</p>
<ul>
<li>
<p>Ubuntu Software 栏 Download from 选择 <a href="https://mirrors.ustc.edu.cn/">USTC MIRRORS</a>。</p>
</li>
<li>
<p>Other Software 栏下开启 Canonical Partner Repositories (The partner repositories offer access to proprietary and closed-source software)。</p>
</li>
<li>
<p>Ubuntu 自动下载并安装对你的系统至关重要的安全更新。而这个自动更新经常导致你<a href="https://itsfoss.com/could-not-get-lock-error/">“无法锁定管理目录”</a>错误。在 Updates 栏下选择</p>
<ul>
<li>For other packages, subscribe to: All updates</li>
<li>Automatically check for updates: Every two weeks</li>
<li>When there are security updates: Download and Install automatically</li>
<li>When there are other updates: Display immediately</li>
<li>Notify me of a new Ubuntu version: For long-term support versions</li>
</ul>
</li>
<li>
<p>更新系统:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt update
$ sudo apt upgrade
$ sudo apt autoremove
</code></pre></div></li>
<li>
<p><a href="https://ubuntu.com/livepatch">Livepatch</a>: 更新内核不需要 Reboot required 了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo ua attach &lt;subscription&gt;
</code></pre></div></li>
</ul>
<p><strong>Ubuntu Software &amp; Update 卡在 cache refresh</strong></p>
<p>通过 <code>apt update</code> 可以看见是 Connecting to security.ubuntu.com Failed，解决办法是更改 /etc/hosts 文件添加其 IP，可通过 <a href="https://www.easycounter.com/">EASYCOUNTER</a> 查找：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## security.ubuntu.com</span>
91.189.88.142 security.ubuntu.com
91.189.88.152 security.ubuntu.com
91.189.91.38 security.ubuntu.com
91.189.91.39 security.ubuntu.com
<span style="color:#75715e">## archive.canonical.com</span>
91.189.92.150 archive.canonical.com
91.189.92.191 archive.canonical.com
91.189.91.15 archive.canonical.com
<span style="color:#75715e">## downloads.sourceforge.net</span>
216.105.38.13 downloads.sourceforge.net
</code></pre></div><p><strong>ubuntu下如何获取源码包和源码</strong></p>
<ul>
<li>
<p>在 Software &amp; Updates 中选中 Source code，不要 Reload，因为很慢，在命令行中 update。或者在软件源配置文件 /etc/apt/sources.list 中添加 deb-src 项。</p>
</li>
<li>
<p>获取 xxx 源码包的详细信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-cache showsrc xxx
</code></pre></div></li>
<li>
<p>获取源码包，并将源码包解压到同名目录</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get source  xxx 
</code></pre></div></li>
</ul>
<p><strong><a href="https://vitux.com/how-to-upgrade-ubuntu-20-04-to-21-04/">Upgrade Ubuntu version</a></strong></p>
<ul>
<li>打开 Software Updater 更新软件</li>
<li>打开 Software &amp; Updates 选择 Updates 栏，在 Notify me of a new Ubuntu Version 中选择 For any new version 。</li>
<li>打开 Software Updater 更新到新 Ubuntu 版本。</li>
<li>使用 <code>lsb_release -a</code> 确认 Ubuntu 版本。</li>
</ul>
<h2 id="input-method-editor">Input Method Editor<a hidden class="anchor" aria-hidden="true" href="#input-method-editor">#</a></h2>
<p>首先在 Language Support (<code>gnome-language-selector</code>，注意不要在终端中运行这个命令，因为环境不一样) 中下载语言包</p>
<h3 id="ibus">IBus<a hidden class="anchor" aria-hidden="true" href="#ibus">#</a></h3>
<p>ubuntu libpinyin 输入法支持云拼音，只需要开启就可以了。</p>
<p><a href="https://forum.ubuntu.com.cn/viewtopic.php?t=252407">搜狗细胞词库</a></p>
<p>到<a href="https://code.google.com/archive/p/hslinuxextra/downloads">hslinuxextra</a>下载<a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/hslinuxextra/sougou-phrases-full.7z">sougou-phrases-full.7z</a>。</p>
<p>经过与ibus开发者协商，ibus-pinyin的词库查找规则做了一些更改，只要在词库目录（就是有一个.db文件的那个目录，一般是<code>/usr/share/ibus-libpinyin/db/</code>目录）把新词库复制过来并改名为local.db就可以使用了，如果感觉词库不好，直接删除掉local.db，就可以让ibus使用原来的词库。</p>
<p>覆盖以后，你把ibus重启一下<code>ibus-daemon -d -x -r</code>，如果你能打出下面的这个词组，说明生效了：</p>
<pre tabindex="0"><code class="language-把" data-lang="把">弗雷德霍姆行列式
</code></pre><p>这个词库，基于ibus原有的android词库文件，另外增加了搜狗的细胞词库。</p>
<h3 id="fcitx-4">Fcitx 4<a hidden class="anchor" aria-hidden="true" href="#fcitx-4">#</a></h3>
<p><a href="https://www.sinocalife.com/ubuntu-20-04-chinese-ime-selection">在Ubuntu Wayland 桌面中使用fictx管理中文输入法</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install fcitx -y
</code></pre></div><p>设置 fcitx：</p>
<ul>
<li>
<p>在 Language Support 中选择 fcitx，全局应用，并恢复 ibus 自定义切换语言快捷键设置。</p>
</li>
<li>
<p>(可选）<strong>wayland</strong>桌面默认不读取/etc/profile中的环境变量，而是从/etc/environment文件中读取，这是导致fcitx不能正常工作的原因。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vim /etc/environment
INPUT_METHOD<span style="color:#f92672">=</span>fcitx
GTK_IM_MODULE<span style="color:#f92672">=</span>fcitx
QT_IM_MODULE<span style="color:#f92672">=</span>fcitx
XMODIFIERS<span style="color:#f92672">=</span>@im<span style="color:#f92672">=</span>fcitx
</code></pre></div></li>
</ul>
<p>输入法框架：</p>
<ul>
<li><a href="https://pinyin.sogou.com/linux/?r=pinyin">搜狗输入法 for Linux</a></li>
<li><a href="https://srf.baidu.com/site/guanwang_linux/index.html">百度输入法Linux版</a></li>
<li><a href="https://www.ubuntuupdates.org/package/core/focal/universe/base/fcitx-googlepinyin">Google拼音</a></li>
</ul>
<p>其他：</p>
<ul>
<li>百度输入法不能安装用于更换皮肤的 fcitx-ui-qimpanel，否则乱码。需要手动安装 fcitx-libs，否则开机不自动启动。</li>
<li>在 fcitx 与 sogoupinyin 安装完之后，需要重启才能使用。</li>
</ul>
<p>皮肤：</p>
<ul>
<li><a href="https://forum.ubuntu.com.cn/viewtopic.php?t=391755">fcitx 皮肤</a>：/usr/share/fcitx/skin</li>
<li><a href="https://www.cnblogs.com/chilono/p/9203041.html">sogoupinyin 皮肤</a>：/usr/share/sogou-qimpanel/skin。
<ul>
<li><a href="https://pinyin.sogou.com/skins/skin_use.php">旧</a>：可以改名为 zip 解压</li>
<li><a href="https://linux.zone/5616">新</a>：受版权保护</li>
</ul>
</li>
</ul>
<h3 id="fcitx-5httpsfcitx-imorgwikifcitx_5"><a href="https://fcitx-im.org/wiki/Fcitx_5">Fcitx 5</a><a hidden class="anchor" aria-hidden="true" href="#fcitx-5httpsfcitx-imorgwikifcitx_5">#</a></h3>
<h4 id="安装httpsplumzmearchives11740"><a href="https://plumz.me/archives/11740/">安装</a><a hidden class="anchor" aria-hidden="true" href="#安装httpsplumzmearchives11740">#</a></h4>
<p>配置工具 KDE 下使用 <code>kde-config-fcitx5</code>， Gnome 下使用 <code>fcitx5-config-qt</code>。</p>
<p>20.04 (20220122) 官方仓库里没有 Gnome 的配置工具 kcm-fcitx5（内含 fcitx5-config-qt），因此通过 <strong><a href="https://launchpad.net/~zhsj/+archive/ubuntu/fcitx5">ppa:zhsj/fcitx5</a></strong> 来安装</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:zhsj/fcitx5
$ sudo apt-get update
$ sudo apt install fcitx5 fcitx5-chinese-addons
</code></pre></div><p>或者也可以通过**<a href="https://plumz.me/archives/12285/">通过 flatpak 安装</a>**。</p>
<p>安装后在 Ubuntu 在 Language Support 里修改输入法系统为 fcitx5，记得点击 Apply System-Wide。</p>
<p>安装报如下错</p>
<pre tabindex="0"><code>E: Failed to fetch http://103.95.217.6/ppa.launchpad.net/zhsj/fcitx5/ubuntu/pool/main/f/fcitx5-chinese-addons/fcitx5-module-cloudpinyin_5.0.4-1~ubuntu20.04.1~ppa1_amd64.deb  503  Service Unavailable [IP: 103.95.217.6 80]
E: Aborting install.
</code></pre><p>可以在浏览器中打开链接直接下载。</p>
<h4 id="肥猫百万大词库httpsgithubcomfelixonmarsfcitx5-pinyin-zhwiki"><a href="https://github.com/felixonmars/fcitx5-pinyin-zhwiki">肥猫百万大词库</a><a hidden class="anchor" aria-hidden="true" href="#肥猫百万大词库httpsgithubcomfelixonmarsfcitx5-pinyin-zhwiki">#</a></h4>
<p>Download latest version of &ldquo;<strong>zhwiki.dict</strong>&rdquo; from <a href="https://github.com/felixonmars/fcitx5-pinyin-zhwiki/releases">https://github.com/felixonmars/fcitx5-pinyin-zhwiki/releases</a></p>
<p>Copy into <code>~/.local/share/fcitx5/pinyin/dictionaries/</code> (create the folder if it does not exist)</p>
<p>可以在设置中看到是否启用，或者输入 “jinjinjin” 会出现 “鑫”。</p>
<h4 id="fcitx5-皮肤绘制简易教程httpsforumsuseorgcnttopic14474"><a href="https://forum.suse.org.cn/t/topic/14474">fcitx5 皮肤绘制简易教程</a><a hidden class="anchor" aria-hidden="true" href="#fcitx5-皮肤绘制简易教程httpsforumsuseorgcnttopic14474">#</a></h4>
<h4 id="tips">Tips<a hidden class="anchor" aria-hidden="true" href="#tips">#</a></h4>
<p><a href="https://wiki.archlinux.org/title/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E9%80%9A%E8%BF%87_Fcitx5_%E8%BE%93%E5%85%A5%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><strong>通过 Fcitx5 输入特殊字符</strong></a></p>
<p>将光标定位到任意一个输入框内，然后按下 <code>Ctrl + Alt + Shift + U</code>，然后输入 <code>circle one</code>，您将会看到多种形式的 <code>①</code>。alpha, beta, sigma 等同理。</p>
<p><a href="https://github.com/levinit/fcitx-emoji"><strong>emoji表情</strong></a></p>
<p>fcitx输入法自带的表情名都是英文的，而且以两个<code>:</code>包含住的，例如🌹（玫瑰rose），按下<code>;</code>后，输入<code>🌹</code>即可打出玫瑰的图标（更多内置图标名字见 Fcitx Configuration =&gt; Addons =&gt; Quick Phrase =&gt; Editor =&gt; emoji-eac)。</p>
<h3 id="rimehttpswwwcnblogscomkeatonlaop12983158html"><a href="https://www.cnblogs.com/keatonlao/p/12983158.html">RIME</a><a hidden class="anchor" aria-hidden="true" href="#rimehttpswwwcnblogscomkeatonlaop12983158html">#</a></h3>
<p>RIME/中州韵输入法引擎（Rime Input Method Engine），是一个跨平台的可高度定制的输入法算法框架。基于这个算法框架，Rime 開發者與其他開源社區的參與者在 Windows、macOS、Linux、Android 等平臺上創造了不同的輸入法前端實現。每个平台都有各自的名称：</p>
<ul>
<li>【中州韵】 ibus_rime → Linux</li>
<li>【小狼毫】 Weasel → Windows</li>
<li>【鼠须管】 Squirrel → Mac OS X</li>
</ul>
<p>在 Linux 下有两大主要的输入法支持框架：fcitx 和 IBus。</p>
<ul>
<li>fcitx 是 Free Chinese Input Toy for X 的简称。</li>
<li>IBus 是 Intelligent Input Bus 的简称。</li>
</ul>
<p>Rime 二者都支持，有 <a href="https://github.com/rime/home/wiki/RimeWithIBus">ibus_rime</a> 和 fcitx-rime 两个版本。值得注意的是，基于 Fcitx 输入法框架的 fcitx-rime 是第三方软件，由 Fcitx 团队开发和维护。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ibus</span>
$ sudo apt install ibus-rime
<span style="color:#75715e"># fcitx4</span>
$ sudo apt install fcitx-rime
<span style="color:#75715e"># fcitx5〔方案選單〕 </span>
$ sudo apt install fcitx5-rime
</code></pre></div><p>按组合键 <strong>Ctrl+`</strong> 或 <code>F4</code> 键唤出输入方案选单，由此调整 Rime 输入〔方案選單〕 法最常用的选项。您可通过方案选单切换已经安装的输入方案。</p>
<p>更多中州韵输入法配置，请阅读晦涩的官方文档：</p>
<ul>
<li><a href="https://github.com/rime/home/wiki/UserGuide">用户指南 · rime/home Wiki</a></li>
<li><a href="https://github.com/rime/home/wiki/CustomizationGuide">配置指南 · rime/home Wiki</a></li>
<li><a href="https://github.com/rime/home/wiki/RimeWithSchemata">方案設計書 · rime/home Wiki</a></li>
</ul>
<h4 id="必知必会">必知必会<a hidden class="anchor" aria-hidden="true" href="#必知必会">#</a></h4>
<ul>
<li>输入法代号：<code>ibus_rime</code></li>
<li>ibus 用户资料夹： <code>~/.config/ibus/rime/</code></li>
<li>fcitx 用户资料夹：<code>~/.config/fcitx/rime</code></li>
<li>fcitx5 用户资料夹：<code>~/.local/share/fcitx5/rime</code></li>
<li>共享资料夹： <code>/usr/share/rime-data/</code></li>
</ul>
<p>共享资料夹包含预设输入方案的源文件。 这些文件属于 Rime 所发行软件的一部份，在访问权限控制较严格的系统上对用户是只读的，因此谢绝软件版本更新以外的任何修改—— 一旦用户修改这里的文件，很可能影响后续的软件升级或在升级时丢失数据。</p>
<p>在「部署 Rime」操作时，将用到这里的输入方案源文件、并结合用户定制的内容来编译预设输入方案。</p>
<p><strong>「用户资料夹」数据说明</strong></p>
<p>用户资料夹则包含为用户准备的内容，如</p>
<ul>
<li>〔全局設定〕 <code>default.yaml</code></li>
<li>〔發行版設定〕 <code>ibus_rime.yaml</code>：定制外观一般情况下会在 <code>&lt;发行版&gt;.custom.yaml</code> 文件中进行配置，Linux 下就是 <code>ibus_rime.custom.yaml</code>，macOS 下是 <code>squirrel.custom.yaml</code>，windows 下就是 <code>weasel.custom.yaml</code></li>
<li>〔預設輸入方案副本〕 <code>&lt;方案标识&gt;.schema.yaml</code> <code>ibus_rime.schema.yaml</code></li>
<li>※〔安裝信息〕 <code>installation.yaml</code></li>
<li>※〔用戶狀態信息〕 <code>user.yaml</code></li>
</ul>
<p>编译输入方案所产出的二进制文件：</p>
<ul>
<li>〔Rime 棱鏡〕 <code>&lt;方案标识&gt;.prism.bin</code></li>
<li>〔Rime 固態詞典〕 <code>&lt;词典名&gt;.table.bin</code>：由系统文本词库（一般以xxx.dict.yaml结尾）通过「重新部署/deploy」生成的固态词典（一般以xxx.table.bin结尾），这部份词库因为在输入过程是固定不変的，所以存在用大量的词彚，也不允许用戸来直接删除。</li>
<li>〔Rime 反查詞典〕 <code>&lt;词典名&gt;.reverse.bin</code></li>
</ul>
<p>记录用户写作习惯的文件：</p>
<ul>
<li>※〔用戶詞典〕 <code>&lt;词典名&gt;.userdb.kct</code>：记录我们用戸输入习惯的用戸词典（一般以xxx.userdb.kct）结尾。这部份词库的词彚，正常情况下是由用戸输入的时候随时生成的；其词彚可以动态调整，数量理论上来说不会特别多，也允许用戸自行删除（shift+delete）。</li>
<li>※〔用戶詞典快照〕 <code>&lt;词典名&gt;.userdb.txt</code>、<code>&lt;词典名&gt;.userdb.kct.snapshot</code> 見於同步文件夾</li>
</ul>
<p>以及用户自己设定的：</p>
<ul>
<li>※〔用戶對全局設定的定製信息〕 <code>default.custom.yaml</code></li>
<li>※〔用戶對預設輸入方案的定製信息〕 <code>&lt;方案标识&gt;.custom.yaml</code></li>
<li>※〔用戶自製輸入方案〕及配套的詞典源文件</li>
</ul>
<p>注：以上标有 ※ 号的文件，包含用户资料，您在清理文件时要注意备份！</p>
<p><a href="https://github.com/rime/weasel/issues/6"><strong>关于配置的位置问题</strong></a></p>
<p>要更改輸入方案裏面的選項，給輸入方案打補靪；</p>
<p>要更改全局選項，給 default.yaml 打補靪；</p>
<p>要更改「小狼毫」專屬的選項，如界面樣式，給 weasel.yaml 打補靪。</p>
<p>總地來說規則是：要修改的配置項在 x(.schema).yaml 裏，就編輯 x.custom.yaml 打補靪。</p>
<h4 id="定制">定制<a hidden class="anchor" aria-hidden="true" href="#定制">#</a></h4>
<h5 id="定制指南">定制指南<a hidden class="anchor" aria-hidden="true" href="#定制指南">#</a></h5>
<p>当用户需要对 Rime 中的各种设定做小幅的调节，最直接、但不完全正确的做法是：编辑「共享资料夹」中那些 <code>.yaml</code> 文档（<code>/usr/share/rime-data/</code> ）。</p>
<p>这种方法有很大缺陷：</p>
<ul>
<li>当 Rime 软件升级时，也会升级各种设定档、预设输入方案。用户编辑过的文档会被覆盖为更高版本，所做调整也便丢失了。</li>
<li>软件升级后，你不能将备份文件直接覆盖升级后的文件。这将失去本次升级所新增和修复的功能。唯一的方法是，重新编辑升级后的文件。</li>
</ul>
<p>因此，对于随 Rime 发行的设定档及预设输入方案，推荐的定制方法是：</p>
<p>在「用户资料夹」下创建 <code>.yaml</code> 定制文档；比如</p>
<ul>
<li><code>default.yaml</code> 的定制文件名为 <code>default.custom.yaml</code></li>
<li><code>luna_pinyin</code> 的定制文件名为 <code>luna_pinyin.custom.yaml</code></li>
<li><code>luna_pinyin_simp</code> 的定制文件名为 <code>luna_pinyin_simp.custom.yaml</code></li>
<li><code>symbols.yaml</code> 的定制文件名为 <code>symbols.custom.yaml</code></li>
</ul>
<p>规范为在文件名主体（ID）和 <code>.yaml</code> 之间增加次级扩展名 <code>.custom</code>。定制文档的书写格式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">patch:
  <span style="color:#e6db74">&#34;一级设定项/二级设定项/三级设定项&#34;</span>: <span style="color:#960050;background-color:#1e0010">新的设定值</span>
  <span style="color:#e6db74">&#34;另一个设定项&#34;</span>: <span style="color:#960050;background-color:#1e0010">新的设定值</span>
  <span style="color:#e6db74">&#34;再一个设定项&#34;</span>: <span style="color:#960050;background-color:#1e0010">新的设定值</span>
  <span style="color:#e6db74">&#34;含列表的设定项/@n&#34;</span>: <span style="color:#960050;background-color:#1e0010">列表第</span>n个元素新的设定值<span style="color:#960050;background-color:#1e0010">，从</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">开始计数</span>
  <span style="color:#e6db74">&#34;含列表的设定项/@last&#34;</span>: <span style="color:#960050;background-color:#1e0010">列表最后一个元素新的设定值</span>
  <span style="color:#e6db74">&#34;含列表的设定项/@before 0&#34;</span>: <span style="color:#960050;background-color:#1e0010">在列表第一个元素之前插入新的设定值（不建议在补丁中使用）</span>
  <span style="color:#e6db74">&#34;含列表的设定项/@after last&#34;</span>: <span style="color:#960050;background-color:#1e0010">在列表</span>  <span style="color:#e6db74">&#34;一级设定项/二级设定项/三级设定项&#34;</span>: <span style="color:#960050;background-color:#1e0010">新的设定值最后一个元素之后插入新的设定值（不建议在补丁中使用）</span>
  <span style="color:#e6db74">&#34;含列表的设定项/@next&#34;</span>: <span style="color:#960050;background-color:#1e0010">在列表最后一个元素之后插入新的设定值（不建议在补丁中使用）</span>
</code></pre></div><p>就是这样：<code>patch</code> 定义了一组「补丁」，以源文件中的设定为基础，写入新的设定项、或以新的设定值取代现有设定项的值。</p>
<p>每次修改配置文件，你需要重新部署来生效。</p>
<p><strong>重新部署的操作方法</strong></p>
<ul>
<li>
<p>点击输入法的程序指示器，选择「部署」</p>
</li>
<li>
<p>点击输入法状态栏上的 ⟲ (Deploy) 按钮。如果找不到状态栏，在终端输入以下命令，可触发自动部署：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ibus</span>
$ rm ~/.config/ibus/rime/default.yaml; ibus-daemon -drx
</code></pre></div></li>
</ul>
<h5 id="定制每页候选数">定制每页候选数<a hidden class="anchor" aria-hidden="true" href="#定制每页候选数">#</a></h5>
<p>Rime 中，默认每页至多显示 5 个候选项，而允许的范围是 1〜9（个别 Rime 发行版可支持 10 个候选）。</p>
<p>设定每页候选个数的默认值为 9，在用户目录建立定制文档 ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.config/ibus/rime/default.custom.yaml
patch:
  <span style="color:#e6db74">&#34;menu/page_size&#34;</span>: <span style="color:#ae81ff">9</span>
</code></pre></div><p>重新部署即可生效。</p>
<p><strong>注意！</strong> 如果 default.custom.yaml 里面已经有其他设定内容，只要以相同的缩进方式添加 <code>patch:</code> 以下的部分，不可重复 <code>patch:</code> 这一行。</p>
<h5 id="定制方案选单">定制方案选单<a hidden class="anchor" aria-hidden="true" href="#定制方案选单">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.config/ibus/rime/default.custom.yaml
patch:
<span style="color:#75715e"># 對於列表類型，現在無有辦法指定如何添加、消除或單一修改某項，於是要在定製檔中將整個列表替換！</span>
  schema_list:  
    - schema: luna_pinyin
    - schema: cangjie5
    - schema: luna_pinyin_fluency
    - schema: luna_pinyin_simp
    <span style="color:#75715e"># 這樣就啓用了未曾有過的高級輸入方案！其實這麼好的方案應該排在最前面哈。</span>
    - schema: my_coolest_ever_schema  
</code></pre></div><p>调整方案候选顺序，增加输入法方案，或者通过 <code>#</code> 注释内容将不用的方案移除候选菜单。</p>
<p>重新部署生效。</p>
<h5 id="定制字体字号">定制字体字号<a hidden class="anchor" aria-hidden="true" href="#定制字体字号">#</a></h5>
<p>GNOME 桌面可以使用扩展 <strong><a href="https://extensions.gnome.org/extension/2820/ibus-tweaker/">IBus Tweaker</a></strong>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.config/fcitx/rime/default.custom.yaml
patch:
  <span style="color:#75715e"># 字體名稱，從記事本等處的系統字體對話框裏能看到</span>
  <span style="color:#e6db74">&#34;style/font_face&#34;</span>: <span style="color:#e6db74">&#34;明兰&#34;</span>  
  <span style="color:#75715e"># 字號，只認數字的，不認「五號」、「小五」這樣的</span>
  <span style="color:#e6db74">&#34;style/font_point&#34;</span>: <span style="color:#ae81ff">16</span>     
</code></pre></div><h5 id="横排与竖排候选码httpsgithubcomrimehomewikicustomizationguidee5b08fe78bbce6afabe5a496e8a780e8a8ade5ae9a"><a href="https://github.com/rime/home/wiki/CustomizationGuide#%E5%B0%8F%E7%8B%BC%E6%AF%AB%E5%A4%96%E8%A7%80%E8%A8%AD%E5%AE%9A">横排与竖排候选码</a><a hidden class="anchor" aria-hidden="true" href="#横排与竖排候选码httpsgithubcomrimehomewikicustomizationguidee5b08fe78bbce6afabe5a496e8a780e8a8ade5ae9a">#</a></h5>
<p>在<code>ibus_rime.custom.yaml</code>添加如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">patch</span>:
  <span style="color:#f92672">style/horizontal</span>: <span style="color:#66d9ef">true</span>
</code></pre></div><h5 id="定制皮肤httpsjdhaogithubio20190218rime_configuration_intro"><a href="https://jdhao.github.io/2019/02/18/rime_configuration_intro/">定制皮肤</a><a hidden class="anchor" aria-hidden="true" href="#定制皮肤httpsjdhaogithubio20190218rime_configuration_intro">#</a></h5>
<p>Rime 中，输入法的显示效果称为「颜色主题」(color scheme)。在网上看到一个有趣的主题，如何添加到 Rime 中使用呢？假如我们要加入<a href="https://zhuanlan.zhihu.com/p/28516904">这里</a>提供的「丹青」主题，在系统 custom 设置文件 (即 <code>ibus_rime.custom.yaml</code>) 中加入以下配置即可：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># 在配色方案列表裏加入標識爲 tantsing 的新方案</span>
  <span style="color:#f92672">&#34;preset_color_schemes/tantsing&#34;: </span> 
    <span style="color:#f92672">author</span>: <span style="color:#ae81ff">Mijiag</span>
    <span style="color:#f92672">back_color</span>: <span style="color:#ae81ff">0xE3E3E3</span>
    <span style="color:#f92672">border_color</span>: <span style="color:#ae81ff">0x000000</span>
    <span style="color:#f92672">candidate_text_color</span>: <span style="color:#ae81ff">0x000000</span>
    <span style="color:#f92672">comment_text_color</span>: <span style="color:#ae81ff">0x474747</span>
    <span style="color:#f92672">hilited_back_color</span>: <span style="color:#ae81ff">0x1A0791</span>
    <span style="color:#f92672">hilited_candidate_back_color</span>: <span style="color:#ae81ff">0x6F0B73</span>
    <span style="color:#f92672">hilited_candidate_text_color</span>: <span style="color:#ae81ff">0xE3E3E3</span>
    <span style="color:#f92672">hilited_text_color</span>: <span style="color:#ae81ff">0xE3E3E3</span>
    <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;丹青/Tantsing&#34;</span>
    <span style="color:#f92672">text_color</span>: <span style="color:#ae81ff">0x000000</span>
</code></pre></div><p>引用该主题的时候，使用名字 <code>tantsing</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># squirrel.custom.yaml</span>
<span style="color:#f92672">patch</span>:
  <span style="color:#f92672">style</span>:
    <span style="color:#f92672">color_scheme</span>: <span style="color:#ae81ff">tantsing</span>
    <span style="color:#f92672">horizontal</span>: <span style="color:#66d9ef">true</span>
    <span style="color:#f92672">inline_preedit</span>: <span style="color:#66d9ef">true</span>
    <span style="color:#f92672">font_point</span>: <span style="color:#ae81ff">16</span>
    <span style="color:#f92672">corner_radius</span>: <span style="color:#ae81ff">5</span>
    <span style="color:#f92672">candidate_format</span>: <span style="color:#e6db74">&#34;%c\u2005%@ \u2005&#34;</span>
</code></pre></div><p>如果要自己制作 Rime 主题，<a href="https://gjrobert.github.io/Rime-See-Me-squirrel/">「Rime 西米」</a>是一款网页端工具，可以辅助制作，实时渲染颜色，便于查看最终显示效果。<a href="https://github.com/rime-aca/color_schemes">这里</a>有一些预定义的主题可供使用。</p>
<h5 id="输入符号">输入符号<a hidden class="anchor" aria-hidden="true" href="#输入符号">#</a></h5>
<p>符号文件 <code>/usr/share/rime-data/symbols.yaml</code> 开头已经说明了使用方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># Usage: patch your Rime schema to enable /X symbols:</span>
<span style="color:#75715e"># patch:</span>
<span style="color:#75715e">#   punctuator/import_preset: symbols</span>
<span style="color:#75715e">#   recognizer/patterns/punct: &#39;^/([0-9]0?|[A-Za-z]+)$&#39;</span>
</code></pre></div><p>想在朙月拼音·简化字 <code>luna_pinyin_simp</code> 方案下输入符号，就新建 <code>luna_pinyin_simp.custom.yaml</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">patch</span>:
  <span style="color:#f92672">punctuator/import_preset</span>: <span style="color:#ae81ff">symbols</span>
  <span style="color:#f92672">recognizer/patterns/punct</span>: <span style="color:#e6db74">&#39;^/([0-9]0?|[A-Za-z]+)$&#39;</span>
</code></pre></div><p>重新部署生效。</p>
<p>输入符号请键入识别码：</p>
<ul>
<li>星号 <code>/xh</code></li>
<li>箭头 <code>/jt</code></li>
<li>數字 <code>/1</code></li>
<li>更多符号参阅文件 <code>symbols.yaml</code>。</li>
</ul>
<p>其他方案下输入符号，照葫芦画瓢。</p>
<h5 id="符号自定义">符号自定义<a hidden class="anchor" aria-hidden="true" href="#符号自定义">#</a></h5>
<p>拷贝 <code>/usr/share/rime-data/symbols.yaml</code> 为 <code>~/.config/ibus/rime/symbols.custom.yaml</code>。在末尾添加自定义符号：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># 个人常用信息</span>
    <span style="color:#e6db74">&#39;/yx&#39;</span>: [ xiaoming@gmail<span style="color:#f92672">.</span>com, xiaoming@163<span style="color:#f92672">.</span>com, <span style="color:#ae81ff">1234567910</span> ] 
<span style="color:#75715e"># 快速输入勾和叉 </span>
    <span style="color:#e6db74">&#39;/gc&#39;</span>: [ <span style="color:#960050;background-color:#1e0010">✓</span>, <span style="color:#960050;background-color:#1e0010">☑</span>, <span style="color:#960050;background-color:#1e0010">✗</span>, <span style="color:#960050;background-color:#1e0010">☒</span> ] 
</code></pre></div><p>想在朙月拼音·简化字 <code>luna_pinyin_simp</code> 方案下输入符号，就修改 <code>luna_pinyin_simp.custom.yaml</code> 文件内容为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">patch:
  punctuator/import_preset: symbols.custom
  recognizer/patterns/punct: <span style="color:#e6db74">&#39;^/([0-9]0?|[A-Za-z]+)$&#39;</span>
</code></pre></div><p>重新部署生效。</p>
<p>然后在中文模式下，输入 <code>/gc</code>，就会显示出自定义的符号，输入对应的数字，符号就会上屏。</p>
<h5 id="输入直角引号">输入直角引号<a hidden class="anchor" aria-hidden="true" href="#输入直角引号">#</a></h5>
<p>有的人喜欢在写作的时候使用直角引号：<code>「」</code>和<code>『』</code>，Rime 在 <code>symbols.yaml</code> 里面，已经提供了这个功能，不过是在 <code>[</code> 和 <code>]</code> 按键上提供的，中文输入法状态下，按下<code>[</code> (<code>]</code>)，返回的结果中包含 <code>「</code> (<code>」</code>)，如果按住 Shift 键，按下 <code>[</code> (<code>]</code>)，返回的结果中包含 <code>『</code> (<code>』</code>)。</p>
<p>但是因为这毕竟是引号，最好是按下引号的时候，能够输出直角引号，在<code>symbols.custom.yaml</code> 中，找到 <code>punctuator</code> 部分下的 <code>hafl_shape</code> (半角的意思)下面，把下面的映射</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">&#39;&#39;&#39;&#39;</span> : <span style="color:#f92672">{</span> pair: <span style="color:#f92672">[</span> <span style="color:#e6db74">&#39;‘&#39;</span>, <span style="color:#e6db74">&#39;’&#39;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">}</span>
<span style="color:#e6db74">&#39;&#34;&#39;</span> : <span style="color:#f92672">{</span> pair: <span style="color:#f92672">[</span> <span style="color:#e6db74">&#39;“&#39;</span>, <span style="color:#e6db74">&#39;”&#39;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">}</span>
</code></pre></div><p>改成</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">&#39;&#39;&#39;&#39;</span> : <span style="color:#f92672">{</span> pair: <span style="color:#f92672">[</span> <span style="color:#e6db74">&#39;『&#39;</span>, <span style="color:#e6db74">&#39;』&#39;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">}</span>
<span style="color:#e6db74">&#39;&#34;&#39;</span> : <span style="color:#f92672">{</span> pair: <span style="color:#f92672">[</span> <span style="color:#e6db74">&#39;「&#39;</span>, <span style="color:#e6db74">&#39;」&#39;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">}</span>
</code></pre></div><p>这样就可以直接输入直角引号了，另外一种方式就是在词典中添加直角引号映射，在<code>jdhao.dict.yaml</code> 中加入下面的映射即可：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">「」	syh	<span style="color:#ae81ff">1000</span>
『』	dyh	<span style="color:#ae81ff">1000</span>
</code></pre></div><h5 id="朙月拼音简化字扩展词库">朙月拼音·简化字扩展词库<a hidden class="anchor" aria-hidden="true" href="#朙月拼音简化字扩展词库">#</a></h5>
<blockquote>
<p>朙（míng）同“明”</p>
</blockquote>
<p><a href="https://github.com/rime-aca/dictionaries">下载词库</a>，将下面几个文件的 <code>luna_pinyin</code> 修改为朙月拼音·简化字 <code>luna_pinyin_simp</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">luna_pinyin<span style="color:#f92672">.</span>hanyu<span style="color:#f92672">.</span>dict<span style="color:#f92672">.</span>yaml
luna_pinyin<span style="color:#f92672">.</span>poetry<span style="color:#f92672">.</span>dict<span style="color:#f92672">.</span>yaml
luna_pinyin<span style="color:#f92672">.</span>cn_en<span style="color:#f92672">.</span>dict<span style="color:#f92672">.</span>yaml
luna_pinyin<span style="color:#f92672">.</span>extended<span style="color:#f92672">.</span>dict<span style="color:#f92672">.</span>yaml
</code></pre></div><p>文件名和文件内容都需要同步修改。比如 <code>luna_pinyin_simp.extended.dict.yaml</code>，并同步修改文件内的方案 ID。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">import_tables:
  <span style="color:#66d9ef">-</span> luna_pinyin
  <span style="color:#66d9ef">-</span> luna_pinyin_simp.hanyu
  <span style="color:#66d9ef">-</span> luna_pinyin_simp.poetry
  <span style="color:#66d9ef">-</span> luna_pinyin_simp.cn_en
</code></pre></div><p>接着将四个文件移动到用户资料夹 <code>~/.config/ibus/rime</code> 下。</p>
<p>其后，将 <code>luna_pinyin.custom.yaml</code> 中的内容添加到 <code>luna_pinyin_simp.custom.yaml</code> 中。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">patch:
  punctuator/import_preset: symbols
  recognizer/patterns/punct: <span style="color:#e6db74">&#39;^/([0-9]0?|[A-Za-z]+)$&#39;</span>
  <span style="color:#75715e"># 載入朙月拼音擴充詞庫</span>
  translator/dictionary: luna_pinyin_simp.extended
  <span style="color:#75715e"># 改寫拼寫運算，使得含西文的詞彙（位於 luna_pinyin.cn_en.dict.yaml 中）不影響簡拼功能（注意，此功能只適用於朙月拼音系列方案，不適用於各類雙拼方案）</span>
  <span style="color:#75715e"># 本條補靪只在「小狼毫 0.9.30」、「鼠鬚管 0.9.25 」、「Rime-1.2」及更高的版本中起作用。</span>
  speller/algebra/@before 0: xform/^<span style="color:#f92672">([</span>b-df-hj-np-tv-z<span style="color:#f92672">])</span>$/$1_/
</code></pre></div><p>重新部署生效。</p>
<p>其他扩展词库，<a href="https://github.com/xiaoTaoist">xiaoTaoist</a> 制作的词库扩展包，<a href="https://github.com/xiaoTaoist/rime-dict">GitHub 地址</a>。</p>
<h5 id="增加自己的词库">增加自己的词库<a hidden class="anchor" aria-hidden="true" href="#增加自己的词库">#</a></h5>
<p>我们可以仿照上一步的词典文件建立自己额外的词典，增加自己的词汇。例如，建立名为 <code>my.dict.yaml</code> 的文件，然后参照 <code>luna_pinyin_simp.cn_en.dict.yaml</code> 添加几个自己常用的词汇，文件内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># my.dict.yaml 文件内容</span>
<span style="color:#75715e"># Rime dictionary</span>
<span style="color:#75715e"># encoding: utf-8</span>
<span style="color:#75715e">#</span>

---
<span style="color:#f92672">name</span>: <span style="color:#ae81ff">my</span>
<span style="color:#f92672">version</span>: <span style="color:#e6db74">&#34;2020.05.28&#34;</span>
<span style="color:#f92672">sort</span>: <span style="color:#ae81ff">by_weight</span>
<span style="color:#f92672">use_preset_vocabulary</span>: <span style="color:#66d9ef">true</span>
...

<span style="color:#ae81ff">GitHub	github	100</span>
<span style="color:#ae81ff">Stack Overflow	so	1000</span>
</code></pre></div><p>词典的格式为: <code>词汇&lt;Tab&gt;编码&lt;Tab&gt;词频</code>，各个项目之间<strong>必须用 Tab（也就是制表符 ）分割</strong>。一个最保险的方法就是，复制粘贴。词频部分可以不要。</p>
<p>然后在 <code>luna_pinyin_simp.extended.dict.yaml</code> 的 <code>import_tables</code> 中加上自己建立的词汇。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">import_tables:
  <span style="color:#66d9ef">-</span> luna_pinyin
  <span style="color:#66d9ef">-</span> luna_pinyin_simp.hanyu
  <span style="color:#66d9ef">-</span> luna_pinyin_simp.poetry
  <span style="color:#66d9ef">-</span> luna_pinyin_simp.cn_en
  <span style="color:#66d9ef">-</span> my
</code></pre></div><p>一切添加妥当之后，重新部署生效。</p>
<h5 id="导入其他词库httpswikiarchlinuxorgtitlefcitx5_e7ae80e4bd93e4b8ade69687e5afbce585a5e8af8de5ba93"><a href="https://wiki.archlinux.org/title/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AF%BC%E5%85%A5%E8%AF%8D%E5%BA%93">导入其他词库</a><a hidden class="anchor" aria-hidden="true" href="#导入其他词库httpswikiarchlinuxorgtitlefcitx5_e7ae80e4bd93e4b8ade69687e5afbce585a5e8af8de5ba93">#</a></h5>
<p>以导入词库 <a href="https://aur.archlinux.org/packages/fcitx5-pinyin-zhwiki-rime/">fcitx5-pinyin-zhwiki-rime</a> 和 <a href="https://aur.archlinux.org/packages/fcitx5-pinyin-moegirl-rime/">fcitx5-pinyin-moegirl-rime</a> 为例.</p>
<p><strong>提示：</strong> 将自定义词库放入<code>~/.local/share/fcitx5/rime/</code>亦可,文件名(文件名.dict.yaml)应与词库名统一(<a href="https://github.com/rime/home/wiki/RimeWithSchemata#%E7%A2%BC%E8%A1%A8%E8%88%87%E8%A9%9E%E5%85%B8">词库格式</a>)</p>
<p>1.更改<code>~/.local/share/fcitx5/rime/luna_pinyin.custom.yaml</code>文件(以<code>luna_pinyin</code>为例,其余输入方案修改方案名即可)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.local/share/fcitx5/rime/luna_pinyin.custom.yaml
<span style="color:#75715e"># 文件中“patch:”应只存在一个,若已存在只需粘贴后面的代码</span>
<span style="color:#75715e"># 此文件用于修改特定输入方案,把上方的luna_pinyin改为其它输入方案名即可完成对其它输入方案的修改</span>
patch:
    <span style="color:#e6db74">&#34;translator/dictionary&#34;</span>: extended <span style="color:#75715e">#词典名字可自定义,与下方文件名保持一致即可</span>
</code></pre></div><p>2.新建<code>~/.local/share/fcitx5/rime/extended.dict.yaml</code>文件</p>
<p><strong>提示：</strong> 导入自定义词库只需将词库名添加到“import_tables:”之后</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.local/share/fcitx5/rime/extended.dict.yaml
<span style="color:#75715e"># 以下禁用了默认词库同时不启用默认的“八股文”词库及词频系统,如果您不希望候选词中的出现繁体字、方框字的话</span>
---
name: extended
version: <span style="color:#e6db74">&#34;2021.02.19&#34;</span>
sort: by_weight
use_preset_vocabulary: false <span style="color:#75715e">#是否启用默认的“八股文”词库及词频系统,如需启用请设为 true 。</span>
import_tables:
  <span style="color:#75715e"># - luna_pinyin #默认词库,如需启用请取消注释</span>
  - zhwiki
  - moegirl
  <span style="color:#75715e"># - 自定义词库名</span>
...
</code></pre></div><h5 id="朙月拼音简化字默认英文">朙月拼音·简化字默认英文<a hidden class="anchor" aria-hidden="true" href="#朙月拼音简化字默认英文">#</a></h5>
<p>如果经常和英语打交道，偶尔输入汉字，可以把朙月拼音初始状态设为英语，需要时再切回中文。参考 <a href="https://github.com/rime/home/wiki/CustomizationGuide#%E4%B8%80%E4%BE%8B%E9%BB%98%E8%AA%8D%E8%8B%B1%E6%96%87%E8%BC%B8%E5%87%BA">这里</a> 给出的说明，在 <code>luna_pinyin_simp.custom.yaml</code> 文件中加入下面的设置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-YAML" data-lang="YAML"><span style="color:#f92672">patch</span>:
  <span style="color:#f92672">&#34;switches/@0/reset&#34;: </span><span style="color:#ae81ff">1</span>  <span style="color:#75715e"># 初始的 ascii mode 设置为「西文」</span>
</code></pre></div><h5 id="模糊拼音">模糊拼音<a hidden class="anchor" aria-hidden="true" href="#模糊拼音">#</a></h5>
<p>这里是官方给的一个<a href="https://gist.github.com/lotem/2320943">模板</a> （朙月拼音）。将模板剪贴进 <code>~/.config/ibus/rime/luna_pinyin_simp.custom.yaml</code> 文件中，然后需要哪组就去掉那一行前面的 <code>#</code> 即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#75715e"># luna_pinyin.custom.yaml</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># 【朙月拼音】模糊音定製模板</span>
<span style="color:#75715e">#   佛振配製 :-)</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># 位置：</span>
<span style="color:#75715e"># ~/.config/ibus/rime  (Linux)</span>
<span style="color:#75715e"># ~/Library/Rime  (Mac OS)</span>
<span style="color:#75715e"># %APPDATA%\Rime  (Windows)</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># 於重新部署後生效</span>
<span style="color:#75715e">#</span>

patch<span style="color:#960050;background-color:#1e0010">:</span>
  <span style="color:#e6db74">&#39;speller/algebra&#39;</span><span style="color:#960050;background-color:#1e0010">:</span>
    - erase/^xx$/                      <span style="color:#75715e"># 第一行保留</span>

    <span style="color:#75715e"># 模糊音定義</span>
    <span style="color:#75715e"># 需要哪組就刪去行首的 # 號，單雙向任選</span>
    <span style="color:#75715e">#- derive/^([zcs])h/$1/             # zh, ch, sh =&gt; z, c, s</span>
    <span style="color:#75715e">#- derive/^([zcs])([^h])/$1h$2/     # z, c, s =&gt; zh, ch, sh</span>

    <span style="color:#75715e">#- derive/^n/l/                     # n =&gt; l</span>
    <span style="color:#75715e">#- derive/^l/n/                     # l =&gt; n</span>

    <span style="color:#75715e"># 這兩組一般是單向的</span>
    <span style="color:#75715e">#- derive/^r/l/                     # r =&gt; l</span>

    <span style="color:#75715e">#- derive/^ren/yin/                 # ren =&gt; yin, reng =&gt; ying</span>
    <span style="color:#75715e">#- derive/^r/y/                     # r =&gt; y</span>

    <span style="color:#75715e"># 下面 hu &lt;=&gt; f 這組寫法複雜一些，分情況討論</span>
    <span style="color:#75715e">#- derive/^hu$/fu/                  # hu =&gt; fu</span>
    <span style="color:#75715e">#- derive/^hong$/feng/              # hong =&gt; feng</span>
    <span style="color:#75715e">#- derive/^hu([in])$/fe$1/          # hui =&gt; fei, hun =&gt; fen</span>
    <span style="color:#75715e">#- derive/^hu([ao])/f$1/            # hua =&gt; fa, ...</span>

    <span style="color:#75715e">#- derive/^fu$/hu/                  # fu =&gt; hu</span>
    <span style="color:#75715e">#- derive/^feng$/hong/              # feng =&gt; hong</span>
    <span style="color:#75715e">#- derive/^fe([in])$/hu$1/          # fei =&gt; hui, fen =&gt; hun</span>
    <span style="color:#75715e">#- derive/^f([ao])/hu$1/            # fa =&gt; hua, ...</span>

    <span style="color:#75715e"># 韻母部份</span>
    <span style="color:#75715e">#- derive/^([bpmf])eng$/$1ong/      # meng = mong, ...</span>
    <span style="color:#75715e">#- derive/([ei])n$/$1ng/            # en =&gt; eng, in =&gt; ing</span>
    <span style="color:#75715e">#- derive/([ei])ng$/$1n/            # eng =&gt; en, ing =&gt; in</span>

    <span style="color:#75715e"># 樣例足夠了，其他請自己總結……</span>

    <span style="color:#75715e"># 反模糊音？</span>
    <span style="color:#75715e"># 誰說方言沒有普通話精確、有模糊音，就能有反模糊音。</span>
    <span style="color:#75715e"># 示例爲分尖團的中原官話：</span>
    <span style="color:#75715e">#- derive/^ji$/zii/   # 在設計者安排下鳩佔鵲巢，尖音i只好雙寫了</span>
    <span style="color:#75715e">#- derive/^qi$/cii/</span>
    <span style="color:#75715e">#- derive/^xi$/sii/</span>
    <span style="color:#75715e">#- derive/^ji/zi/</span>
    <span style="color:#75715e">#- derive/^qi/ci/</span>
    <span style="color:#75715e">#- derive/^xi/si/</span>
    <span style="color:#75715e">#- derive/^ju/zv/</span>
    <span style="color:#75715e">#- derive/^qu/cv/</span>
    <span style="color:#75715e">#- derive/^xu/sv/</span>
    <span style="color:#75715e"># 韻母部份，只能從大面上覆蓋</span>
    <span style="color:#75715e">#- derive/^([bpm])o$/$1eh/          # bo =&gt; beh, ...</span>
    <span style="color:#75715e">#- derive/(^|[dtnlgkhzcs]h?)e$/$1eh/  # ge =&gt; geh, se =&gt; sheh, ...</span>
    <span style="color:#75715e">#- derive/^([gkh])uo$/$1ue/         # guo =&gt; gue, ...</span>
    <span style="color:#75715e">#- derive/^([gkh])e$/$1uo/          # he =&gt; huo, ...</span>
    <span style="color:#75715e">#- derive/([uv])e$/$1o/             # jue =&gt; juo, lve =&gt; lvo, ...</span>
    <span style="color:#75715e">#- derive/^fei$/fi/                 # fei =&gt; fi</span>
    <span style="color:#75715e">#- derive/^wei$/vi/                 # wei =&gt; vi</span>
    <span style="color:#75715e">#- derive/^([nl])ei$/$1ui/          # nei =&gt; nui, lei =&gt; lui</span>
    <span style="color:#75715e">#- derive/^([nlzcs])un$/$1vn/       # lun =&gt; lvn, zun =&gt; zvn, ... </span>
    <span style="color:#75715e">#- derive/^([nlzcs])ong$/$1iong/    # long =&gt; liong, song =&gt; siong, ...</span>
    <span style="color:#75715e"># 這個辦法雖從拼寫上做出了區分，然而受詞典制約，候選字仍是混的。</span>
    <span style="color:#75715e"># 只有真正的方音輸入方案纔能做到！但「反模糊音」這個玩法快速而有效！</span>

    <span style="color:#75715e"># 模糊音定義先於簡拼定義，方可令簡拼支持以上模糊音</span>
    - abbrev/^([a-z]).+$/$1/           <span style="color:#75715e"># 簡拼（首字母）</span>
    - abbrev/^(<span style="color:#66d9ef">[zcs]</span>h).+$/$1/          <span style="color:#75715e"># 簡拼（zh, ch, sh）</span>

    <span style="color:#75715e"># 以下是一組容錯拼寫，《漢語拼音》方案以前者爲正</span>
    - derive/^(<span style="color:#66d9ef">[nl]</span>)ve$/$1ue/          <span style="color:#75715e"># nve = nue, lve = lue</span>
    - derive/^(<span style="color:#66d9ef">[jqxy]</span>)u/$1v/           <span style="color:#75715e"># ju = jv,</span>
    - derive/un$/uen/                  <span style="color:#75715e"># gun = guen,</span>
    - derive/ui$/uei/                  <span style="color:#75715e"># gui = guei,</span>
    - derive/iu$/iou/                  <span style="color:#75715e"># jiu = jiou,</span>

    <span style="color:#75715e"># 自動糾正一些常見的按鍵錯誤</span>
    - derive/(<span style="color:#66d9ef">[aeiou]</span>)ng$/$1gn/        <span style="color:#75715e"># dagn =&gt; dang </span>
    - derive/(<span style="color:#66d9ef">[dtngkhrzcs]</span>)o(u|ng)$/$1o/  <span style="color:#75715e"># zho =&gt; zhong|zhou</span>
    - derive/ong$/on/                  <span style="color:#75715e"># zhonguo =&gt; zhong guo</span>
    - derive/ao$/oa/                   <span style="color:#75715e"># hoa =&gt; hao</span>
    - derive/(<span style="color:#66d9ef">[iu]</span>)a(o|ng?)$/a$1$2/    <span style="color:#75715e"># tain =&gt; tian</span>

  <span style="color:#75715e"># 分尖團後 v =&gt; ü 的改寫條件也要相應地擴充：</span>
  <span style="color:#75715e">#&#39;translator/preedit_format&#39;:</span>
  <span style="color:#75715e">#  - &#34;xform/([nljqxyzcs])v/$1ü/&#34;</span>
</code></pre></div><h5 id="同步用户资料">同步用户资料<a hidden class="anchor" aria-hidden="true" href="#同步用户资料">#</a></h5>
<p>默认地，词典快照备份到 <code>~/.config/ibus/rime/sync/UUID</code> 这个地方。我们可以设定同步的目标文件夹，直接编辑 <code>~/.config/ibus/rime/installation.yaml</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vbnet" data-lang="vbnet">sync_dir: <span style="color:#75715e">&#39;/DATA/Backup/RimeSync&#39;
</span></code></pre></div><p>然后，点击输入法程序指示器选择「同步」。你的 <strong>用户配置</strong>、<strong>用户词库</strong> 等都会被放在目标文件夹。</p>
<blockquote>
<p><strong>注意</strong>！可能有些你自己添加的文件不会被备份，注意下就行。</p>
</blockquote>
<p>我们可以借助移动存储设备，或在线存储服务如百度网盘、坚果云等，在多台电脑及不同系统之间同步用户词典和用户设定。在新电脑上配置一下 <code>installation.yaml</code> 文件，执行 <strong>部署</strong> -&gt; <strong>同步</strong> -&gt; <strong>部署</strong> ，你的 <strong>用户配置</strong>、<strong>用户词库</strong> 都回来了。</p>
<h5 id="新世纪五笔">新世纪五笔<a hidden class="anchor" aria-hidden="true" href="#新世纪五笔">#</a></h5>
<p>参阅 <a href="https://github.com/GuoBinyong/wubixinshiji">https://github.com/GuoBinyong/wubixinshiji</a>。<a href="https://blog.csdn.net/fonaix/article/details/102405204">Rime输入法之五笔自动上屏</a>。</p>
<p>后续配置来自视频 <a href="https://www.bilibili.com/video/BV1jE411u7FE?from=search&amp;seid=12079970368693355374">rime 中的小狼毫输入法的安装和基础自定义</a> 所分享的文件： <a href="https://www.lanzous.com/ia2g86h">https://www.lanzous.com/ia2g86h</a>。</p>
<h5 id="easy-english">Easy english<a hidden class="anchor" aria-hidden="true" href="#easy-english">#</a></h5>
<p>用于输入英文。拷贝下面两个文件到「用户资料夹」：</p>
<ul>
<li>easy_en.schema.yaml</li>
<li>easy_en.dict.yaml</li>
</ul>
<p><code>vim default.custom.yaml</code> 添加输入方案：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">schema_list</span>:
    - <span style="color:#f92672">schema</span>: <span style="color:#ae81ff">wubixinshiji   </span> <span style="color:#75715e"># 新世纪五笔</span>
    - <span style="color:#f92672">schema</span>: <span style="color:#ae81ff">wubixinshiji_pinyin   </span> <span style="color:#75715e"># 新世纪五笔·拼音</span>
    - <span style="color:#f92672">schema</span>: <span style="color:#ae81ff">luna_pinyin_simp   </span> <span style="color:#75715e"># 朙月拼音·简化字</span>
    - <span style="color:#f92672">schema</span>: <span style="color:#ae81ff">easy_en</span>
    - <span style="color:#f92672">schema</span>: <span style="color:#ae81ff">pinyin_simp   </span> <span style="color:#75715e"># 袖珍简化字拼音</span>
</code></pre></div><h5 id="输入日期">输入日期<a hidden class="anchor" aria-hidden="true" href="#输入日期">#</a></h5>
<p>将文件 <code>rime.lua</code> 拷贝到 <code>~/.config/ibus/rime/</code> 下，在方案配置文件比如 <code>wubi86.schema.yaml</code> 的 <code>engine\translators:</code> 下面添加滤镜引用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  translators<span style="color:#f92672">:</span>
    <span style="color:#f92672">-</span> lua_translator<span style="color:#a6e22e">@date_translator</span>
    <span style="color:#f92672">-</span> lua_translator<span style="color:#a6e22e">@week_translator</span>
</code></pre></div><h5 id="安装表情-emoji">安装表情 emoji<a hidden class="anchor" aria-hidden="true" href="#安装表情-emoji">#</a></h5>
<p>Rime 提供了很多表情，地址在 <a href="https://github.com/rime/rime-emoji">这里</a></p>
<p>东风破是 Rime 的配置管理器和输入方案存储库。 仓库地址和介绍见： <a href="https://github.com/rime/plum">rime/plum: 東風破</a>，使用如下命令安装 emoji，</p>
<pre tabindex="0"><code class="language-fallback" data-lang="fallback">rime-install emoji
</code></pre><p>然后，使用下面的命令给输入方案打 patch，我使用的输入方案是 <code>luna_pinyin_simp</code>，所以参考 <a href="https://github.com/rime/rime-emoji">这里</a> 的命令：</p>
<pre tabindex="0"><code class="language-fallback" data-lang="fallback">bash rime-install emoji:customize:schema=luna_pinyin_simp
</code></pre><p>这样才会 patch 成功，这时，位于 <code>%appdata%/rime</code> 目录下的<code>luna_pinyin_simp.custom.yaml</code> 文件中会增加以下配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">__patch</span>:
<span style="color:#75715e"># Rx: emoji:customize:schema=luna_pinyin_simp {</span>
  - <span style="color:#f92672">patch/+</span>:
      <span style="color:#f92672">__include</span>: <span style="color:#ae81ff">emoji_suggestion:/patch</span>
<span style="color:#75715e"># }</span>
</code></pre></div><p>然后重新部署，emoji 添加成功了！</p>
<h5 id="切换中英文httpszhuanlanzhihucomp91129641"><a href="https://zhuanlan.zhihu.com/p/91129641">切换中英文</a><a hidden class="anchor" aria-hidden="true" href="#切换中英文httpszhuanlanzhihucomp91129641">#</a></h5>
<p>切换中英文，rime在默认情况下，输入中文时按shift键会切换为英文，但字符还在，需要按回车输出字符，有的用户可能不习惯shift这个键位，或者不习惯按shift不直接上屏，还要按一下回车，对此，我们可以做出修改 default.custom.yaml：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">patch</span>:
    <span style="color:#f92672">ascii_composer/good_old_caps_lock</span>: <span style="color:#66d9ef">true</span>
    <span style="color:#f92672">ascii_composer/switch_key</span>:
        <span style="color:#f92672">Caps_Lock</span>: <span style="color:#ae81ff">clear</span>
        <span style="color:#f92672">Shift_L</span>: <span style="color:#ae81ff">commit_code</span>
        <span style="color:#f92672">Shift_R</span>: <span style="color:#ae81ff">inline_ascii</span>
        <span style="color:#f92672">Control_L</span>: <span style="color:#ae81ff">noop</span>
        <span style="color:#f92672">Control_R</span>: <span style="color:#ae81ff">noop</span>
</code></pre></div><p><strong>注意换行前空格以及冒号后的空格，还有字母大小写</strong>，前两行代码先不看，下面五行分别代表：</p>
<ul>
<li>caps_lock即为大写键，shift_L即为左shift，R是右，control_L即为左ctrl键，R为右</li>
<li>冒号后的字符即为这个键位的操作
<ul>
<li>clear表示按下此键后已输入的字符清除，同时rime输入状态切换为英文，大写键一定不能改为noop，否则大写英文将会无法输出，很多教程里都改为了noop，这点值得注意</li>
<li>commit_code即为提交代码，就是将已输入的字符上屏，同时输入法切换为英文</li>
<li>inline_ascii即为插入字符，就是已输入的字符为上屏前，按此键后输入法转为英文，可以接着输入，回车键再上屏</li>
<li>noop就是这个键在输入法里不会有任何操作</li>
</ul>
</li>
</ul>
<p>各个键位和代码的意思已经介绍完了，可以按自己的喜好，自行修改。</p>
<p>不过仍有部分用户从win7开始是用的ctrl键+空格键切换中英文，且习惯输入法为默认英文。RIME的快捷键是在“default.yaml”文档中定义的，我们可以将“default.yaml”文档中相关代码直接复制过来，接上面代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">key_binder</span>:
  <span style="color:#f92672">bindings</span>:
    - {<span style="color:#f92672">accept</span>: <span style="color:#e6db74">&#34;Control+Shift+2&#34;</span><span style="color:#f92672">, toggle: ascii_mode, when</span>: <span style="color:#ae81ff">always}</span>
</code></pre></div><p>注意到“ascii_mode了”吗，“字符模式”即为我们需要的中英文切换快捷键，默认快捷键为ctrl+shift+2，我们可以将其代码修改为Control+space即为ctrl+空格，注意大小写，这样我们就能让输入法默认英文同时用回习惯的操作</p>
<p>至此，关于“default.yaml”的设置基本完成，样例如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">patch</span>:
  <span style="color:#f92672">ascii_composer/good_old_caps_lock</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">ascii_composer/switch_key</span>:
    <span style="color:#f92672">Caps_Lock</span>: <span style="color:#ae81ff">clear</span>
    <span style="color:#f92672">Shift_L</span>: <span style="color:#ae81ff">noop</span>
    <span style="color:#f92672">Shift_R</span>: <span style="color:#ae81ff">noop</span>
    <span style="color:#f92672">Control_L</span>: <span style="color:#ae81ff">noop</span>
    <span style="color:#f92672">Control_R</span>: <span style="color:#ae81ff">noop</span>
  <span style="color:#f92672">key_binder/bindings</span>:
    - { <span style="color:#f92672">when: always, accept: Control+space, toggle</span>: <span style="color:#ae81ff">ascii_mode }</span>
    - { <span style="color:#f92672">when: has_menu, accept: minus, send</span>: <span style="color:#ae81ff">Page_Up }</span>
    - { <span style="color:#f92672">when: has_menu, accept: equal, send</span>: <span style="color:#ae81ff">Page_Down }</span>
</code></pre></div><p>注意：如果没有Page_Up，Page_Down两行，就没办法用 + 与 - 进行翻页了。</p>
<p>下面我们开始对“luna_pinyin.custom.yaml”进行修改</p>
<p>rime默认先输入中文，但是有些用户可能习惯默认英文，在“luna_pinyin.custom.yaml”文档里，我们可以进行如下修改（<a href="https://github.com/rime/home/wiki/CustomizationGuide#%E4%B8%80%E4%BE%8B%E5%AE%9A%E8%A3%BD%E7%B0%A1%E5%8C%96%E5%AD%97%E8%BC%B8%E5%87%BA">定制简化字输出</a>）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">patch</span>:
    <span style="color:#f92672">&#34;switches/@0/reset&#34;: </span><span style="color:#ae81ff">1</span>
</code></pre></div><p>意思就是將 switcher 列表中的第一個元素（即 ascii_mode 開關）的初始值重設爲狀態1（即「英文」）。</p>
<h4 id="四叶草拼音输入方案httpsgithubcomfkxxyzrime-cloverpinyinwikilinux"><a href="https://github.com/fkxxyz/rime-cloverpinyin/wiki/linux">四叶草拼音输入方案</a><a hidden class="anchor" aria-hidden="true" href="#四叶草拼音输入方案httpsgithubcomfkxxyzrime-cloverpinyinwikilinux">#</a></h4>
<p>下载 <a href="https://github.com/fkxxyz/rime-cloverpinyin/releases">rime-cloverpinyin</a> 最新版本（如clover.schema-build-1.1.4.zip）输入方案（配置方案），解压到用户资料夹</p>
<p>在用户资料夹下创建 default.custom.yaml ，内容为</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">patch:
  <span style="color:#e6db74">&#34;menu/page_size&#34;</span>: <span style="color:#ae81ff">8</span>
  schema_list:
    - schema: clover
</code></pre></div><p>其中 8 表示打字的时候输入面板的每一页的候选词数目，可以设置成 1~9 任意数字。</p>
<p>写好该文件之后，点击右下角托盘图标右键菜单，点“重新部署”，然后再点右键，在方案列表里面应该就有“ 🍀️四叶草拼音输入法”的选项了。</p>
<h2 id="automatically-switch-wallpapers">Automatically switch wallpapers<a hidden class="anchor" aria-hidden="true" href="#automatically-switch-wallpapers">#</a></h2>
<h3 id="apps">Apps<a hidden class="anchor" aria-hidden="true" href="#apps">#</a></h3>
<ul>
<li>Shotwell：在侧边栏 Photos 中 Ctrl + A，在菜单栏 File 中选择 Set as Desktop SlideShow&hellip;；这会把图片复制到 <code>.local/share/shotwell/wallpaper</code>，并在该目录生成 wallpaper.xml，wallpaper.xml 定义自动切换壁纸动画。</li>
<li>替代软件：BingWall 等。</li>
<li>脚本分享：<a href="https://github.com/thevinter/styli.sh">styli.sh</a>、<a href="https://github.com/LittleSimpleWallpaperChanger/lswc">lswc</a></li>
<li>动态壁纸：<a href="https://github.com/cheesecakeufo/komorebi">komorebi</a>、<a href="https://launchpad.net/livewallpaper">LiveWallpaper</a></li>
</ul>
<h3 id="varietyhttpsgithubcomvarietywallsvariety"><a href="https://github.com/varietywalls/variety">Variety</a><a hidden class="anchor" aria-hidden="true" href="#varietyhttpsgithubcomvarietywallsvariety">#</a></h3>
<p>默认仓库版本可能较低，导致一些 Bug，因此最好用 PPA</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:variety/stable
$ sudo apt update
$ sudo apt install variety -y
</code></pre></div><p>支持 wallhaven，添加 keywords 就可以使用了，配置文件在 <code>~/.config/variety/variety.conf</code> ：</p>
<ul>
<li>Touhou</li>
<li>Azur Lane</li>
<li>Genshin Impact</li>
<li>anime girls</li>
<li>cosplay</li>
<li>GUWEIZ</li>
<li>WLOP</li>
</ul>
<h3 id="unsplashshhttpsyounessnetlinuxset-random-wallpapers-unsplash-com-ubuntu"><a href="https://youness.net/linux/set-random-wallpapers-unsplash-com-ubuntu">unsplash.sh</a><a hidden class="anchor" aria-hidden="true" href="#unsplashshhttpsyounessnetlinuxset-random-wallpapers-unsplash-com-ubuntu">#</a></h3>
<ul>
<li>
<p><code>gsettings set org.gnome.desktop.background picture-uri file://$HOME/Wallpaper</code></p>
</li>
<li>
<p>添加脚本</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi $HOME/.unsplash.sh
<span style="color:#75715e">#!/bin/bash</span>

SAVE_DIR<span style="color:#f92672">=</span>$HOME/DataOne/Unsplash
FILE_NAME<span style="color:#f92672">=</span>daily<span style="color:#66d9ef">$(</span>date <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span><span style="color:#66d9ef">)</span>.jpeg
wget -O $SAVE_DIR/$FILE_NAME https://source.unsplash.com/1920x1080/daily
cp $SAVE_DIR/$FILE_NAME $HOME/Wallpaper
</code></pre></div><p>在 <a href="https://source.unsplash.com/">Unsplash Source</a> 查看更多 API。</p>
</li>
<li>
<p><code>crontab -e</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">12</span> * * * /home/vane/.unsplash.sh
</code></pre></div></li>
<li>
<p>除了使用 crontab 外，还可以使用 Startup Applications Preferences 添加一个启动项。</p>
</li>
</ul>
<h3 id="wallhavensh">wallhaven.sh<a hidden class="anchor" aria-hidden="true" href="#wallhavensh">#</a></h3>
<p>wallhaven图片右键下载的是原图，不是缩略图。</p>
<ul>
<li>
<p><code>gsettings set org.gnome.desktop.background picture-uri $HOME/Wallpaper</code></p>
<p>一般文件内容开头都会有一个<a href="https://www.zhihu.com/question/28161418">文件类型的标记</a>，根据文件名后缀只是一个快捷的方法，不用读取文件内容就判断文件类型，但不是唯一的方法。</p>
</li>
<li>
<p><code>vi $HOME/.wallhaven/wallhaven.sh</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
WORK_DIR<span style="color:#f92672">=</span>$HOME/.wallhaven
SAVE_DIR<span style="color:#f92672">=</span>$HOME/Pictures/wallhaven
IMG_URL<span style="color:#f92672">=</span>https://w.wallhaven.cc/full

<span style="color:#66d9ef">function</span> GetListing<span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
  echo <span style="color:#e6db74">&#39;get listing&#39;</span>
  listing<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl https://wallhaven.cc/api/v1/search?apikey<span style="color:#f92672">=</span>&lt;API KEY&gt;&amp;categories<span style="color:#f92672">=</span>010&amp;purity<span style="color:#f92672">=</span>111&amp;atleast<span style="color:#f92672">=</span>1920x1080&amp;ratios<span style="color:#f92672">=</span>16x9&amp;sorting<span style="color:#f92672">=</span>random&amp;order<span style="color:#f92672">=</span>desc&amp;page<span style="color:#f92672">=</span>1<span style="color:#66d9ef">)</span>
  echo <span style="color:#e6db74">&#39;save listing&#39;</span>
  echo $listing | jq -r <span style="color:#e6db74">&#39;.data[].path&#39;</span> | awk -F <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#e6db74">&#39;{print $NF}&#39;</span> &gt; $WORK_DIR/listing
  echo <span style="color:#e6db74">&#39;save res&#39;</span>
  cat $WORK_DIR/listing | wc -l &gt; $WORK_DIR/res
  SetWallpaper
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">function</span> SetWallpaper<span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
  <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -a $WORK_DIR/res <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#39;read res&#39;</span>
    read res  &lt; $WORK_DIR/res
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $res -ne <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span> 
      echo <span style="color:#e6db74">&#39;get img&#39;</span>
      img<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>cat $WORK_DIR/listing | tail -<span style="color:#e6db74">${</span>res<span style="color:#e6db74">}</span> | head -1<span style="color:#66d9ef">)</span>
      echo <span style="color:#e6db74">&#34;down </span>$img<span style="color:#e6db74"> from </span>$IMG_URL<span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>img:10:2<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span>$img<span style="color:#e6db74">&#34;</span>
      curl -o $SAVE_DIR/$img $IMG_URL/<span style="color:#e6db74">${</span>img:10:2<span style="color:#e6db74">}</span>/$img
      <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $? -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        echo <span style="color:#e6db74">&#39;set wallpaper&#39;</span>
        cp $SAVE_DIR/$img $HOME/Wallpaper
        echo <span style="color:#e6db74">&#39;res-1&#39;</span>
        echo <span style="color:#66d9ef">$((</span>$res <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">))</span> &gt; $WORK_DIR/res
        echo <span style="color:#e6db74">&#39;exit&#39;</span>
        exit <span style="color:#ae81ff">0</span>
      <span style="color:#66d9ef">else</span>
        echo <span style="color:#e6db74">&#39;download error&#39;</span>
        SetWallpaper
      <span style="color:#66d9ef">fi</span>
    <span style="color:#66d9ef">else</span>
      echo <span style="color:#e6db74">&#39;res=0&#39;</span>
      GetListing
    <span style="color:#66d9ef">fi</span>
  <span style="color:#66d9ef">else</span>
    echo <span style="color:#e6db74">&#39;no res&#39;</span>
    GetListing
  <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>

SetWallpaper
</code></pre></div><p><a href="https://www.tomczhen.com/2017/10/15/parsing-json-with-shell-script/">使用 Shell 脚本来处理 JSON</a>，<a href="https://stedolan.github.io/jq/manual/">jq Manual</a>，<a href="https://wallhaven.cc/help/api">wallhaven API v1 Documentation</a></p>
</li>
<li>
<p><code>crontab -e</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">12</span> * * * /home/vane/.wallhaven/wallhaven.sh
</code></pre></div><p><a href="https://stackoverflow.com/questions/10374520/gsettings-with-cron">Gsettings 无法在 Cron 中使用</a>：出现此问题是因为 cron 仅使用一组非常有限的环境变量。 唯一一个负责在将其设置为 cron 作业时以正确方式运行问题脚本的环境变量是 DBUS_SESSION_BUS_ADDRESS。</p>
</li>
</ul>
<h3 id="astronomyshhttpsapinasagov"><a href="https://api.nasa.gov/">astronomy.sh</a><a hidden class="anchor" aria-hidden="true" href="#astronomyshhttpsapinasagov">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>API_KEY<span style="color:#f92672">=</span>zTL5rJmctXwHcsjfCSalfDRNFTeaVYa9FxgINVVU
HTTP_REQUEST<span style="color:#f92672">=</span>https://api.nasa.gov/planetary/apod?api_key<span style="color:#f92672">=</span>$API_KEY
HTTP_RESPONSE<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl $HTTP_REQUEST<span style="color:#66d9ef">)</span>
IMG_HDURL<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo $HTTP_RESPONSE | jq -r <span style="color:#e6db74">&#39;.hdurl&#39;</span><span style="color:#66d9ef">)</span>
IMG_FILENAME<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">${</span>IMG_HDURL##*/<span style="color:#e6db74">}</span><span style="color:#66d9ef">)</span>
curl -o $HOME/DataOne/Images/Astronomy/$IMG_FILENAME $IMG_HDURL
cp -av $HOME/DataOne/Images/Astronomy/$IMG_FILENAME $HOME/Wallpaper
</code></pre></div><h2 id="social">Social<a hidden class="anchor" aria-hidden="true" href="#social">#</a></h2>
<h3 id="telegramhttpswwwnotionsotelegram-95a6c23f0bb1466892b55f9ec8c755fd"><a href="https://www.notion.so/Telegram-95a6c23f0bb1466892b55f9ec8c755fd">Telegram</a><a hidden class="anchor" aria-hidden="true" href="#telegramhttpswwwnotionsotelegram-95a6c23f0bb1466892b55f9ec8c755fd">#</a></h3>
<p>先通过手机登录，再在电脑端登录。电脑先登录，手机老是收不到验证码。</p>
<h4 id="简介">简介<a hidden class="anchor" aria-hidden="true" href="#简介">#</a></h4>
<ul>
<li>
<p>Telegram —— 中文名又称&quot;电报&quot;，或简称&quot;TG&quot;。</p>
</li>
<li>
<p>Telegram 是跨平台的即时通信软件，其客户端是自由及开放源代码软件，但服务器是专有软件。</p>
</li>
<li>
<p>Telegram 在中国大陆境内无法直接连接，注册和使用都需要科学上网，请自备节点和工具。</p>
</li>
<li>
<p>下载：Telegram 有官方版和第三方版本，但出于安全和隐私的考虑，推荐大家使用 Telegram 官方版客户端</p>
</li>
</ul>
<h4 id="推荐设置">推荐设置<a hidden class="anchor" aria-hidden="true" href="#推荐设置">#</a></h4>
<ul>
<li>Privacy and Security
<ul>
<li>Phone Number
<ul>
<li>谁能看见我的手机号码：Nobody</li>
<li>谁能通过手机号码找到我：My Contacts</li>
</ul>
</li>
<li>Forwarded Messages：Nobody</li>
<li>Calls：Nobody</li>
<li>Groups：My Contacts</li>
</ul>
</li>
<li>Local Passcode：本地密码只是本设备打开 Telegram 的应用密码</li>
<li>Two-Step Verification：为了账号安全，强烈推荐您设置两步验证密码。</li>
<li>Delete my account：推荐您设置为一年</li>
</ul>
<h4 id="隐私保护注意事项">隐私保护注意事项<a hidden class="anchor" aria-hidden="true" href="#隐私保护注意事项">#</a></h4>
<ul>
<li>资料设置
<ul>
<li>昵称及用户名：避免使用与其他社交平台相同或相似的昵称及用户名</li>
<li>手机号码：在&quot;设置——隐私——电话号码&quot;中设置&quot;不允许任何人查看我的手机号码&quot;和&quot;仅允许联系人通过手机号码找到我&quot;。</li>
</ul>
</li>
<li>群组聊天：Telegram 的群聊是&quot;不安全&quot;的。  公开群组的所有聊天内容都可被其他人查看，即使他人并未注册 Telegram； 对于群组内的机器人，它们可以收集群组内的绝大部分消息。</li>
<li>媒体文件：在分享照片时，请注意使用专业修图软件打码处理关键信息，并清除照片包含的地理位置信息</li>
<li>分享链接：从其他平台分享内容至 Telegram 时，请注意清除分享链接中的用户 UserID 识别信息，他人完全有可能从您的分享链接中获取您的用户信息。</li>
<li>第三方客户端：如无特殊需要，请使用官方 Telegram 客户端。第三方客户端有能力获取和控制您的账户，读取您全部的聊天记录，收集您设备的可识别信息，包括但不限于：手机号、设备型号、IMEI码、MAC码等。</li>
</ul>
<h4 id="常见问题及解答">常见问题及解答<a hidden class="anchor" aria-hidden="true" href="#常见问题及解答">#</a></h4>
<ul>
<li>无法给他人发送私聊：“Sorry, you can only send messages to mutual contacts at the momet.”
<ul>
<li>@SpamBot</li>
<li>But I can&rsquo;t message non-contacts！</li>
<li>No，I&rsquo;ll never do any of this</li>
</ul>
</li>
<li>群组和频道有什么类型？有什么特点？
<ul>
<li>群组(Group)或者频道(Channel)有两种类型。
<ul>
<li>一种是公开群组(Public Group/Channel)</li>
<li>一种是私有群组(Private Group/Channel)</li>
</ul>
</li>
<li>公开群组(Public Group/Channel) 有自定义设置的ID，所有人可以通过搜索功能，输入id查询到相应的群组。公开群组的历史消息对所有人可见，即使没加入公开群组，也可以查看群组历史消息。</li>
<li>私有群组(Private Group/Channel) 没有自定义的ID，要加入只能通过点击邀请链接或者被邀请入群，
在私有群组，群主可以设定历史消息的可见性。而对于没有加入群组的人，则不可以查看群组的消息。</li>
</ul>
</li>
<li>Telegram 用户名是什么？
<ul>
<li>其他用户可以通过用户名找到您，您将出现在“全局结果”下的联系人搜索中。这样人们就可以在不知道您的电话号码的情况下通过 Telegram 与您联系。</li>
<li>由于用户名的唯一性，可以防止他人盗用你的头像和昵称冒充你。</li>
</ul>
</li>
<li>如何添加联系人？：添加和删除联系人都是单向操作，对方设备并不会同步。</li>
<li>添加非手机号码联系人后，对方能知道自己的手机号码吗？：如果想取消分享你的手机号，请到隐私设置(Privacy and Security)中找到手机号码(Phone Number)的设置，在里面移除对方即可。</li>
<li>不登陆 Telegram 如何查看频道消息？：Telegram 公开频道可以直接通过浏览器输入 <code>https://t.me/s/频道id</code> 访问，不需要拥有TG账号。</li>
</ul>
<h4 id="进阶知识">进阶知识<a hidden class="anchor" aria-hidden="true" href="#进阶知识">#</a></h4>
<p>什么是 MTProxy 代理？</p>
<ul>
<li><a href="https://github.com/TelegramMessenger/MTProxy">MTProxy</a> 是 Telegram 的官方项目，仅能用于代理 Telegram 软件</li>
<li>MTP 代理是在 Telegram 中内置的代理程序，可以直接在软件内配置，而不需要下载任何其他 App 来配置代理</li>
</ul>
<h4 id="主题与美化">主题与美化<a hidden class="anchor" aria-hidden="true" href="#主题与美化">#</a></h4>
<p>美化主题频道</p>
<ul>
<li>官方 Desktop 桌面版主题频道 @themes</li>
<li>官方 Android 安卓主题频道 @Androidthemes</li>
</ul>
<h4 id="sticker-packhttpsblogphoenixlzxcom20150606make-telegram-sticker-the-lazy-way"><a href="https://blog.phoenixlzx.com/2015/06/06/make-telegram-sticker-the-lazy-way/">Sticker Pack</a><a hidden class="anchor" aria-hidden="true" href="#sticker-packhttpsblogphoenixlzxcom20150606make-telegram-sticker-the-lazy-way">#</a></h4>
<p>用现成的图片集来制作 stickers pack。Linux 可以方便地使用 ImageMagick 来操作。</p>
<p>Telegram 要求 Sticker 图片为 PNG 格式，并且要有透明层，至少一边为 512 像素，另一边则不超过 512 像素。最大文件大小为 350KB。透明层就算了，我不会玩 PS。那么直接偷懒(死)来批量把当前目录下 JPG 和 PNG 混杂的图片们统一转换为 PNG 好了。</p>
<p>几条命令发给 <a href="https://telegram.me/stickers">stickers bot</a>：</p>
<ol>
<li><code>/newstickerpack</code></li>
<li>发送表情包的名字…</li>
<li>在内置的 emoji 中发送一个最符合你要发送图片的表情…</li>
<li>然后把对应的图片<strong>作为文件</strong>发送</li>
<li>如果还有其他图片的话重复 3-4</li>
<li>全部表情图片设置完毕，发送 <code>/publish</code> 命令</li>
<li>为你的 stickers pack 取一个短名字 (用于 URL)</li>
</ol>
<h4 id="在telegram上使用efb同时推送qq与微信消息httpswwwshawnleettttxyzpostsf1bc687a"><a href="https://www.shawnleetttt.xyz/posts/f1bc687a/">在Telegram上使用EFB同时推送QQ与微信消息</a><a hidden class="anchor" aria-hidden="true" href="#在telegram上使用efb同时推送qq与微信消息httpswwwshawnleettttxyzpostsf1bc687a">#</a></h4>
<p>众所周知,待机耗电两巨头皆出自TX,但其对于工作人群和大学生而言又是不可或缺的通讯手段.Telegram作为一款合格的IM支持Android众多特性(TX出来挨打),通知栏回复、消息再提醒、自定义震动以及最关键的FCM推送(FCM的特性和优势可以在Google上查询).使用插件利用Telegram来完成QQ微信的消息代收是目前Android系统较优秀的解决方案</p>
<h5 id="事前准备">事前准备<a hidden class="anchor" aria-hidden="true" href="#事前准备">#</a></h5>
<p><strong>物品准备</strong></p>
<ul>
<li>墙外VPS一枚</li>
<li>Telegram账号一枚</li>
<li>稳定的飞机</li>
<li>Xshell(注意不要下载成<strong>苏杰马克丁</strong>版)/PUTTY</li>
<li>可联网设备一枚,推荐电脑</li>
<li>基本的Linux和vim知识</li>
</ul>
<p>本教程基于EFB v2.0.0, efb-qq-slave v2.0.0b2, efb-wechat-slave v2.0.0制作,方案为MASTER SLAVE处于同一系统且QQ微信各使用一个 Bot ,使用 Debian 10</p>
<p><strong>获取 Telegram ID</strong></p>
<p>向 <strong>@get_id_bot</strong> 发起会话,击 <strong>/start</strong> 即可获得你的 Telegram ID</p>
<h5 id="使用efb转发微信消息">使用EFB转发微信消息<a hidden class="anchor" aria-hidden="true" href="#使用efb转发微信消息">#</a></h5>
<p><strong>申请 Telegram Bot</strong></p>
<p>向 <strong>@BotFather</strong> 发起会话，发送命令 <code>/newbot</code> 以创建Bot（用户名须以Bot为结尾）</p>
<p>设置好后还须对bot进行权限设置</p>
<p>发送 <code>/setprivacy</code> 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Disable”.</p>
<p>发送 <code>/setjoingroups</code> 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Enable”.</p>
<p>发送 <code>/setcommands</code> 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后发送如下内容：</p>
<pre tabindex="0"><code class="language-none" data-lang="none">help - 显示命令列表.
link - 将聊天链接到群组.
unlink_all - 取消所有聊天与群组的链接.
info - 显示当前Telegram聊天的信息.
chat - 生成聊天对话框.
update_info - 更新组名称和资料图片.
</code></pre><p><strong>安装 EFB 及其从端</strong></p>
<p>安装相关依赖:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt install python3 python3-pip python3-pil python3-setuptools python3-numpy python3-yaml python3-requests ffmpeg libmagic-dev libwebp-dev vim -y
</code></pre></div><p>安装 EFB :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip3 install ehforwarderbot efb-telegram-master efb-wechat-slave
</code></pre></div><p><strong>创建配置文件</strong></p>
<p>创建 EFB 配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.ehforwarderbot/profiles/wx/
$ vim ~/.ehforwarderbot/profiles/wx/config.yaml
master_channel: blueset.telegram
slave_channels:
- blueset.wechat
</code></pre></div><p>创建 ETM 配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.ehforwarderbot/profiles/wx/blueset.telegram
$ vim ~/.ehforwarderbot/profiles/wx/blueset.telegram/config.yaml 
token: <span style="color:#e6db74">&#34;123456&#34;</span> <span style="color:#75715e">#值为你在 @BotFather 处获得的 bot token</span>
admins:
- <span style="color:#ae81ff">123456</span> <span style="color:#75715e">#值为你在 @get_id_bot 处获得的 chat id</span>
</code></pre></div><p>创建 EWS 配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.ehforwarderbot/profiles/wx/blueset.wechat
$ vim ~/.ehforwarderbot/profiles/wx/blueset.wechat/config.yaml
</code></pre></div><p>其内容参见<a href="https://github.com/blueset/efb-wechat-slave#%E5%8F%AF%E9%80%89%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">可选的配置文件</a>，根据文档配置即可。</p>
<p>输入<code>ehforwarderbot --profile wx</code>,扫码登录即可收发消息,使用<code>screen</code>命令保存后台</p>
<h5 id="使用efb转发qq消息">使用EFB转发QQ消息<a hidden class="anchor" aria-hidden="true" href="#使用efb转发qq消息">#</a></h5>
<p><strong>申请 Telegram Bot</strong></p>
<p>向 <strong>@BotFather</strong> 发起会话，发送命令 <code>/newbot</code> 以创建Bot（用户名须以Bot为结尾）</p>
<p>设置好后还须对bot进行权限设置</p>
<p>发送 <code>/setprivacy</code> 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Disable”.</p>
<p>发送 <code>/setjoingroups</code> 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Enable”.</p>
<p>发送 <code>/setcommands</code> 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后发送如下内容：</p>
<pre tabindex="0"><code class="language-none" data-lang="none">link - 将会话绑定到 Telegram 群组.
chat - 生成会话头.
recog - 回复语音消息以进行识别.
extra - 获取更多功能.
</code></pre><p><strong>安装 EFB 及其从端</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt-get install libopus0 ffmpeg libmagic1 python3-pip git nano docker.io libssl-dev python3-dev build-essential <span style="color:#75715e">#安装相关依赖</span>
$ pip3 install efb-telegram-master   <span style="color:#75715e">#安装 EFB</span>
$ pip3 install -U git+https://github.com/milkice233/efb-qq-slave
$ pip3 install git+https://github.com/milkice233/efb-qq-plugin-iot
</code></pre></div><p><strong>创建配置文件</strong></p>
<p>创建 EFB 配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.ehforwarderbot/profiles/qq/
$ vim ~/.ehforwarderbot/profiles/qq/config.yaml
master_channel: blueset.telegram
slave_channels:
- milkice.qq
</code></pre></div><p>创建 ETM 配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.ehforwarderbot/profiles/qq/blueset.telegram
$ vim ~/.ehforwarderbot/profiles/qq/blueset.telegram/config.yaml
token: <span style="color:#e6db74">&#34;123456&#34;</span> <span style="color:#75715e">#值为你在 @BotFather 处获得的 bot token</span>
admins:
- <span style="color:#ae81ff">123456</span> <span style="color:#75715e">#值为你在 @get_id_bot 处获得的 chat id</span>
</code></pre></div><p>IOT 部分:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget https://github.com/opq-osc/OPQ/releases/download/v6.0.20/OPQBot_6.0.20_darwin_amd64.tar.gz  <span style="color:#75715e">#根据需要版本自行更改链</span>
</code></pre></div><p>启动需要到<a href="https://developer.gitter.im/apps">Gitter</a>获取token并填入<code>CoreConf.conf</code>文件</p>
<p>如果需要更改API的端口请更改Port (例如更改成2333端口,就改成Port = “0.0.0.0:2333”)</p>
<p>进入到文件目录 执行命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">screen -S iot
./OPQBot  <span style="color:#75715e">#输入完毕后 Ctrl+A+D </span>
</code></pre></div><p>登录请 等待控制台输出<code>Everything is ok!</code>后 再用浏览器访问 http://IP:PORT/v1/Login/GetQRcode
(IP为你机子的内网ip或者公网ip,PORT为你上一步更改的端口,默认8888</p>
<p>然后用手机扫码登录,不支持帐号密码登陆</p>
<p>创建 EQS 配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p ~/.ehforwarderbot/profiles/qq/milkice.qq
$ vim ~/.ehforwarderbot/profiles/qq/milkice.qq/config.yaml
Client: iot
iot:
  qq: <span style="color:#ae81ff">1234567890</span>              <span style="color:#75715e"># 此处填写登录的QQ号</span>
  host: <span style="color:#e6db74">&#34;http://127.0.0.1&#34;</span>    <span style="color:#75715e"># 默认IP为本地</span>
  port: <span style="color:#ae81ff">8888</span>                  <span style="color:#75715e"># 默认端口为 8888</span>
  receive_self_msg: False     <span style="color:#75715e"># 不接收自己发出的消息</span>
</code></pre></div><p>输入<code>ehforwarderbot --profile qq</code> 即可,同样可以使用<code>screen</code>命令保存后台</p>
<h5 id="问题发现及解决方案">问题发现及解决方案<a hidden class="anchor" aria-hidden="true" href="#问题发现及解决方案">#</a></h5>
<ul>
<li>
<p>提示错误: <code>efb-wechat-slave 2.0.0 has requirement requests&gt;=2.22.0, but you'll have requests 2.21.0 which is incompatible.</code></p>
<p>输入 <code>pip3 install requests==2.22.0</code> 解决</p>
</li>
<li>
<p>升级相关组件输入 <code>pip3 install --upgrade efb-qq-slave efb-wechat-slave efb-telegram-master</code></p>
</li>
</ul>
<h5 id="参考链接">参考链接<a hidden class="anchor" aria-hidden="true" href="#参考链接">#</a></h5>
<p><a href="https://milkice.me/2018/09/17/efb-how-to-send-and-receive-messages-from-qq-on-telegram/">安装并使用 EFB：在 Telegram 收发 QQ 消息 - Milkice’s IceBox</a></p>
<p><a href="https://test482.github.io/install-efb-v2-on-VPS/">在 Telegram 上实现微信收发，EHForwarderBot 搭建记录 - Eliot’s Blog</a></p>
<p><a href="https://github.com/blueset/efb-wechat-slave#efb-wechat-slave-channelefb-%E5%BE%AE%E4%BF%A1%E4%BB%8E%E7%AB%AF-ews">EFB WeChat Slave Channel：EFB 微信从端 (EWS) - blueset</a><a href="https://linux.cn/article-12826-1.html">https://linux.cn/article-12826-1.html</a></p>
<h4 id="导出-telegram-贴图httpsblogphoenixlzxcom20160823my-first-yet-useless-telegram-bot"><a href="https://blog.phoenixlzx.com/2016/08/23/my-first-yet-useless-telegram-bot/">导出 Telegram 贴图</a><a hidden class="anchor" aria-hidden="true" href="#导出-telegram-贴图httpsblogphoenixlzxcom20160823my-first-yet-useless-telegram-bot">#</a></h4>
<p><a href="https://www.bilibili.com/read/cv10487627">教程</a>：不能导出动态sticker。</p>
<p>这只 bot 在<a href="https://t.me/stickerset2packbot">这里</a>（新的@ygmxstickersetbot），源码在<a href="https://github.com/phoenixlzx/telegram-stickerimage-bot">这里</a>。</p>
<h4 id="默认-desktop">默认 Desktop<a hidden class="anchor" aria-hidden="true" href="#默认-desktop">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
Version<span style="color:#f92672">=</span>1.5
Name<span style="color:#f92672">=</span>Telegram Desktop
Comment<span style="color:#f92672">=</span>Official desktop version of Telegram messaging app
TryExec<span style="color:#f92672">=</span>/home/kurome/.telegram/Telegram
Exec<span style="color:#f92672">=</span>/home/kurome/.telegram/Telegram -workdir /home/kurome/.local/share/TelegramDesktop/ -- %u
Icon<span style="color:#f92672">=</span>telegram
Terminal<span style="color:#f92672">=</span>false
StartupWMClass<span style="color:#f92672">=</span>TelegramDesktop
Type<span style="color:#f92672">=</span>Application
Categories<span style="color:#f92672">=</span>Chat;Network;InstantMessaging;Qt;
MimeType<span style="color:#f92672">=</span>x-scheme-handler/tg;
Keywords<span style="color:#f92672">=</span>tg;chat;im;messaging;messenger;sms;tdesktop;
Actions<span style="color:#f92672">=</span>Quit;
SingleMainWindow<span style="color:#f92672">=</span>true
X-GNOME-UsesNotifications<span style="color:#f92672">=</span>true
X-GNOME-SingleWindow<span style="color:#f92672">=</span>true

<span style="color:#f92672">[</span>Desktop Action Quit<span style="color:#f92672">]</span>
Exec<span style="color:#f92672">=</span>/home/kurome/.telegram/Telegram -workdir /home/kurome/.local/share/TelegramDesktop/ -quit
Name<span style="color:#f92672">=</span>Quit Telegram
Icon<span style="color:#f92672">=</span>application-exit
</code></pre></div><h4 id="xdg-openhttpsmanpagesubuntucommanpagesfocalenman1xdg-open1html"><a href="https://manpages.ubuntu.com/manpages/focal/en/man1/xdg-open.1.html">xdg-open</a><a hidden class="anchor" aria-hidden="true" href="#xdg-openhttpsmanpagesubuntucommanpagesfocalenman1xdg-open1html">#</a></h4>
<pre tabindex="0"><code>xdg-open opens a file or URL in the user's preferred application. If a URL is provided the URL will be opened in the user's preferred web browser. If a file is provided the file will be opened in the preferred application for files of that type. xdg-open supports file, ftp, http and https URLs.
</code></pre><p>在设置了默认 desktop 文件后，在浏览器中点击 JOIN GROUP 依旧打不开 Telegram，有如下报错：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xdg-open tg://join?invite<span style="color:#f92672">=</span>xxxx
gio: tg://join?invite<span style="color:#f92672">=</span>xxxx: The specified location is not supported
</code></pre></div><p>参考<a href="https://www.linuxquestions.org/questions/linux-desktop-74/xdg-open-doesn%27t-recognize-custom-protocol-4175433062/"><strong>xdg-open doesn&rsquo;t recognize custom protocol</strong></a>解决：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xdg-mime default telegram.desktop x-scheme-handler/tg
</code></pre></div><h4 id="telegram-充當雲端筆記httpswwwplaypcesorcom201602telegramhtml"><a href="https://www.playpcesor.com/2016/02/telegram.html">Telegram 充當雲端筆記</a><a hidden class="anchor" aria-hidden="true" href="#telegram-充當雲端筆記httpswwwplaypcesorcom201602telegramhtml">#</a></h4>
<p>Telegram本身有非常多的新闻、咨询以及网友们非常有深度的讨论，因此可以通过Saved Message或者建立群组频道来转存感兴趣的信息。<a href="http://farseerfc.me/">farseerfc 的小窝</a> 就有一个。</p>
<h4 id="中文搜索httpscongcong0806githubio20191104telegramsearch"><a href="https://congcong0806.github.io/2019/11/04/TelegramSearch/">中文搜索</a><a hidden class="anchor" aria-hidden="true" href="#中文搜索httpscongcong0806githubio20191104telegramsearch">#</a></h4>
<h5 id="问题在哪">问题在哪<a hidden class="anchor" aria-hidden="true" href="#问题在哪">#</a></h5>
<p>Telegram 群组和频道越来越多，消息也越来越多，但是搜索中文的消息却是一个很大的问题。</p>
<p><strong>主要原因</strong></p>
<p>Telegram 的搜索是以”词”为基础单位的，是以<code>英文标点符号</code>或<code>空格</code>作为”词”的间隔。</p>
<p>这是以英文为基础的搜索方式，这样的方式对于英文的搜索就很方便，比如”hello”，用”he”就搜索不到，必须用”hello”，这就符合英文的语境，当我想要找”he”消息时并不想看到有”hello”的消息。</p>
<p>但是这种方式对于中文等语言来说就很不方便，中文是以字为单位的，按照上面的方式，比如消息内容”动态贴纸不能用这个bot导出”用”贴纸”或”导出”就不能搜索到此消息。</p>
<h5 id="如何解决">如何解决<a hidden class="anchor" aria-hidden="true" href="#如何解决">#</a></h5>
<p>知道问题出在哪儿？那又如何解决呢？ 解决方案：</p>
<ul>
<li>发消息时以<code>英文标点符号</code>或<code>空格</code>作为间隔，比如消息”动态贴纸不能用这个bot导出”，可以用”动态 贴纸 不能 用这个 bot 导出”方法发出，这样就可以用”动态”“贴纸”“不能”“导出”关键词搜索到此消息。</li>
<li>发消息时可以加’tag’，比如想发送消息”ABCDEFG”，可以发送”#tag ABCDEFG”，下次可以用”#tag”关键词搜索找到都有这个标签的消息。</li>
<li>已发的消息，以<code>标点符号</code>或<code>空格</code>作为间隔单位搜索，比如”好像国区是没有，点链接提示转到国区，关掉就好了，账号可以在不同地区购买”，可以用”好像国区是没有”“点链接提示转到国区”“关掉就好了”“账号可以在不同地区购买”关键词搜索到此消息。</li>
</ul>
<h3 id="mutthttpssegmentfaultcoma1190000018131615"><a href="https://segmentfault.com/a/1190000018131615">Mutt</a><a hidden class="anchor" aria-hidden="true" href="#mutthttpssegmentfaultcoma1190000018131615">#</a></h3>
<p><a href="https://wiki.archlinux.org/title/Mutt">Mutt</a> 是一个基于文本的邮件客户端，因其强大的功能而闻名。 Mutt虽然已诞生二十多年了，但仍然是大量用户的首选邮件客户端。</p>
<p>Mutt主要侧重于作为邮件用户代理（MUA），最初是为了查看邮件而编写的。 与其他邮件应用程序相比，稍后实现的功能（检索，发送和过滤邮件）比较简单，因此用户可能希望使用外部应用程序来扩展Mutt的功能。</p>
<h4 id="模块搭配方案">模块搭配方案<a hidden class="anchor" aria-hidden="true" href="#模块搭配方案">#</a></h4>
<p>就像穿衣搭配一样，收件发件过滤邮件转发邮件各种功能都有很多种程序可以用，mutt怎么搭配呢？</p>
<p>常用选项有这些(User/Transport/Delivery)：</p>
<ul>
<li>MUA 收件：<code>fetchmail</code>或<code>getmail</code>或<code>OfflineIMAP</code></li>
<li>MTA 发件：<code>sendmail</code>或<code>msmtp</code>或<code>postfix</code>。其中<code>msmtp</code>兼容强，<code>postfix</code>对国内不友好</li>
<li>MDA 分类: <code>procmail</code>或<code>maildrop</code></li>
<li>邮件编辑：VIM。</li>
</ul>
<p>一般搭配是：</p>
<ul>
<li>老式搭配：mutt + getmail + sendmail + procmail</li>
<li>新式搭配：mutt + fetchmail + msmtp + maildrop</li>
</ul>
<p>这里我们用：<code>mutt + fetchmail + msmtp + procmail</code></p>
<p>安装：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install mutt fetchmail msmtp procmail -y
</code></pre></div><p>Mutt或各个写协作程序在配置前都是不能使用的，学习曲线还是比较陡峭的，所以要做好准备去花好一段去了解和学习各个部件。</p>
<p>大概的配置流程是：</p>
<ul>
<li>配置收件：<code>~/.fetchmailrc</code></li>
<li>配置过滤：<code>~/.procmailrc</code></li>
<li>配置发件：<code>~/.msmtprc</code></li>
<li>配置mutt框架本身：<code>~/.muttrc</code></li>
</ul>
<p>注意：初学过程中，不要一上来就配置mutt。最好是先从各个部件开始：<code>收件-&gt;过滤邮件-&gt;阅读邮件-&gt;发件-&gt;mutt界面</code>，按照这种顺序。</p>
<h4 id="收件配置fetchmailhttpswwwlinodecomdocsguidesusing-fetchmail-to-retrieve-email"><a href="https://www.linode.com/docs/guides/using-fetchmail-to-retrieve-email/">收件：配置Fetchmail</a><a hidden class="anchor" aria-hidden="true" href="#收件配置fetchmailhttpswwwlinodecomdocsguidesusing-fetchmail-to-retrieve-email">#</a></h4>
<blockquote>
<p>Fetchmail是由著名的《大教堂与集市》作者 Eric Steven Raymond 编写的。</p>
</blockquote>
<p>Fetchmail是一个非常简单的收件程序，而且是<code>前台运行</code>、<code>一次性运行</code>的，意思是：你每次手动执行<code>fetchmail</code>命令，都是在前台一次收取完，程序就自动退出了，不是像一般邮件客户端一直在后台运行。</p>
<p>注意：fetchmail只负责收件，而不负责存储！所以它是要调用另一个程序如<code>procmail</code>来进行存储的。</p>
<p>fetchmail的配置文件为<code>~/.fetchmailrc</code>。然后文件权限最少要设置<code>chmod 600 ~/.fetchmailrc</code></p>
<p>比如我们要设置多个邮箱账户同时收取，那么配置如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">poll pop.AAA.com protocol POP3 user <span style="color:#e6db74">&#34;me@AAA.com&#34;</span> password <span style="color:#e6db74">&#34;123&#34;</span>

poll pop.BBB.com protocol POP3 user <span style="color:#e6db74">&#34;me&#34;</span> there with password <span style="color:#e6db74">&#34;123&#34;</span> is falko here fetchall

poll pop.CCC.com protocol POP3 user <span style="color:#e6db74">&#34;me&#34;</span> there with password <span style="color:#e6db74">&#34;123&#34;</span> is till here keep

poll pop.DDD.com
  protocol POP3
  user <span style="color:#e6db74">&#34;me&#34;</span>
  password <span style="color:#e6db74">&#34;123&#34;</span>

<span style="color:#75715e">## QQ 邮箱</span>
poll pop.qq.com
  port <span style="color:#ae81ff">995</span> 
  protocol POP3
  user <span style="color:#e6db74">&#34;1664548605@qq.com&#34;</span>
  password <span style="color:#f92672">[</span>授权码<span style="color:#f92672">]</span>
  ssl
  keep

<span style="color:#75715e"># 全局选项</span>
mimedecode
<span style="color:#75715e"># 不加 -d %T 就会报 ~/Mail/inbox is not a mailbox. 错误</span>
mda <span style="color:#e6db74">&#34;/usr/bin/procmail -d %T&#34;</span>
</code></pre></div><p>其中：</p>
<ul>
<li>各种参数可以不按顺序，也可以不在一行。 <code>空格</code>隔开每个参数，<code>poll</code>隔开每个账户。</li>
<li><code>here</code>, <code>there</code>, <code>with</code>, <code>is</code>等等，都不是关键词，随便写不影响参数。</li>
<li>以下是必填
<ul>
<li><code>poll</code>后面是邮件服务器的地址，一般是<code>pop.xxx.com</code></li>
<li><code>protocol</code>后面是收件协议，一般是<code>pop</code>或<code>pop3</code></li>
<li><code>user</code>后面是用户名，可以是username，也可以是邮箱地址</li>
<li><code>password</code>后面是密码</li>
</ul>
</li>
<li><a href="https://zhuanlan.zhihu.com/p/376290375"><code>sslproto</code></a>：可能会报错 <code>fetchmail: pop.qq.com: upgrade to TLS failed.</code>，故可以禁掉SSL，同 man 手册查到
<ul>
<li>加上option <code>--nosslcertck</code>，虽然有报错，但至少可以收邮件了。</li>
<li>加<code>--sslprotocl ''</code>, 注意要用空字符串</li>
</ul>
</li>
<li>四选一：
<ul>
<li><code>nofetchall</code> ：仅检索新消息（默认）。</li>
<li><code>fetchall</code> ：获取所有消息，无论是否看到。</li>
<li><code>keep</code> ：不要从服务器上删除看到的消息。</li>
<li><code>nokeep</code> ：从服务器中删除看到的消息。</li>
</ul>
</li>
<li><code>mimedecode</code>用来自动解码MIME</li>
<li><code>mda</code>后面指定本机安装的邮件过滤分类程序。如果不填，则收取的邮件在本地不会保存。注意用<code>which procmail</code>查一下路径。</li>
<li><a href="https://service.mail.qq.com/cgi-bin/help?id=28">QQ 邮箱客户端设置</a></li>
<li><a href="https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-for-outlook-com-d088b986-291d-42b8-9564-9c414e2aa040?ui=en-us&amp;rs=en-us&amp;ad=us#:~:text=If%20you%20want%20to%20add%20your%20Outlook.com%20account%2c587%209%20SMTP%20encryption%20method%20STARTTLS%20See%20More">Outlook 设置</a>：失败了</li>
</ul>
<p>配置完成后，可以运行<code>fetcmail -v</code>来看看是否有错误信息，如果能够正常显示很多行的收取信息，那么就能正确登录邮箱收取了。</p>
<p>一般收取的命令如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 只收取未读邮件</span>
$ fetchmai

<span style="color:#75715e"># 收取所有邮件</span>
$ fetchmail -a

<span style="color:#75715e"># （重要）收取新邮件，但不在服务器端删除已经收取的邮件</span>
$ fetchmail -k
</code></pre></div><p>但是fetchmail只负责收取，不负责“下载”部分，你找不到邮件存在哪了。
所以还需要配置MDA分类器，如<code>procmail</code>，才能看到下载后的邮件。</p>
<p>注意：Fetch其实不是在Mutt“里”使用的，而是脱离mutt之外的！也就是说，Mutt只负责读取本地存储邮件的文件夹更新，而不会自动帮你去执行<code>fetchmail</code>命令。</p>
<p>你必须自己手动执行，或者用Crontab定期收取，或者设为Daemon守护进程，还可以在Mutt中设置快捷键执行Shell命令：</p>
<ul>
<li>
<p><a href="https://www.howtoing.com/debian_etch_fetchmail/">要使fetchmail作为守护进程运行</a>，我们必须编辑<code>/etc/default/fetchmail</code>并将START_DAEMON设置为yes</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi /etc/default/fetchmail
START_DAEMON<span style="color:#f92672">=</span>yes
</code></pre></div><p>xxxxxxxxxx yum -y install tigervnc-servershell</p>
</li>
<li>
<p>设置Mutt快捷键收取邮件的方法是在<code>~/.muttrc</code>中加入macro：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-crystal" data-lang="crystal"><span style="color:#66d9ef">macro</span> <span style="color:#a6e22e">index</span>,pager I <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">&lt;</span>shell<span style="color:#f92672">-</span>escape<span style="color:#f92672">&gt;</span> fetchmail <span style="color:#f92672">-</span>vk<span style="color:#f92672">&lt;</span>enter<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p>这样的话，你就可以在index邮件列表中按<code>I</code>执行外部shell命令收取邮件了。</p>
</li>
</ul>
<h4 id="邮件过滤配置procmailhttpslifegoopluskidorgwikiprocmailhtml"><a href="https://lifegoo.pluskid.org/wiki/Procmail.html">邮件过滤：配置Procmail</a><a hidden class="anchor" aria-hidden="true" href="#邮件过滤配置procmailhttpslifegoopluskidorgwikiprocmailhtml">#</a></h4>
<p>Procmail是单纯负责邮件的存储、过滤和分类的，一般配合<code>fetchmail</code>收件使用。</p>
<p>在Pipline中，fetchmail把收到的邮件全部传送到Procmail进行过滤筛选处理，然后Procmail就会把邮件存到本地形成文件，然后给邮件分类为工作、生活、重要、垃圾等。</p>
<p>当然，分类规则是自己可以指定的。可以根据发信人、主题、长度以及关键字 等对邮件进行排序、分类、整理。</p>
<p>Procmail 的配置文件是 <code>~/.procmailrc</code> ，记得改权限：<code>chmod 600 ~/.procmailrc</code>。</p>
<p>内容也非常简单，前面是邮件位置、日志等默认选项，后面则是一块一块的过滤规则。</p>
<p>基本配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 邮件存储地址</span>
MAILDIR<span style="color:#f92672">=</span>$HOME/Mail   
<span style="color:#75715e"># 默认：收件箱</span>
DEFAULT<span style="color:#f92672">=</span>$MAILDIR/inbox   
VERBOSE<span style="color:#f92672">=</span>off
LOGFILE<span style="color:#f92672">=</span>/tmp/procmaillog

<span style="color:#75715e"># 某个垃圾邮件规则</span>
:0
* ^From: webmaster@st<span style="color:#ae81ff">\.</span>zju<span style="color:#ae81ff">\.</span>edu<span style="color:#ae81ff">\.</span>cn
<span style="color:#75715e"># 垃圾文件的存储位置</span>
/dev/null    

<span style="color:#75715e"># 其它所有都存到收件箱中</span>
:0:
inbox/
</code></pre></div><p>其中，<code>$HOME/Mail</code>是设定的邮件存储位置。</p>
<p>我们需要手动创建<code>mkdir ~/Mail</code>，否则程序会报错。</p>
<p>配置好后，我们再测试一下就会看到：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ fetchmail -a
<span style="color:#ae81ff">78</span> messages <span style="color:#66d9ef">for</span> 1664548605@qq.com at pop.qq.com <span style="color:#f92672">(</span><span style="color:#ae81ff">2843793</span> octets<span style="color:#f92672">)</span>.
reading message 1664548605@qq.com@pop.qq.com:1 of <span style="color:#ae81ff">78</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">36692</span> octets<span style="color:#f92672">)</span> not flushed
...

$ tree ~/Mail
/home/vane/Mail
└── inbox

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">1</span> file

$ du -h Mail/inbox 
2.1M    Mail/inbox
</code></pre></div><p>可以看到，所有邮件都保存在了inbox这个单一文件中。这个文件可以打开看到MIME格式(协议)的邮件源码。就像HTML一样，展示给我们的和背后的源码不一样。</p>
<p>那么怎么把这个类似HTML的MIME格式邮件解析为我们人能读懂的内容呢？——这个我们就要靠<code>mutt</code>自己了，mutt自身具备基本的MIME邮件解析功能（不包括HTML格式邮件读取）。</p>
<h4 id="发件配置msmtp">发件：配置msmtp<a hidden class="anchor" aria-hidden="true" href="#发件配置msmtp">#</a></h4>
<p><code>msmtp</code>是作为<code>sendmail</code>发邮件程序更好的替代品。</p>
<p>msmtp的配置文件为<code>~/.msmtprc</code>，记得改权限：<code>chmod 600 ~/.msmtprc</code></p>
<p>配置内容比收件还简单，因为发件永远比收件简单。</p>
<p>基本配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">account default
  auth login
  host smtp.XXX.com
  port <span style="color:#ae81ff">587</span>
  from ME@XXX.com
  user ME
  password passwd
  <span style="color:#75715e"># 关于tls，如果是阿里云则不用写，如果是Outlook的话，必须写</span>
  tls on
  tls_starttls off
  tls_certcheck off

<span style="color:#75715e"># QQ 邮箱例子</span>
account default
  <span style="color:#75715e"># QQ邮箱这里必须是 on，否则会 535 Login Fail</span>
  auth on
  host smtp.qq.com
  port <span style="color:#ae81ff">587</span>
  from 1664548605@qq.com
  <span style="color:#75715e"># user 必须是 @ 之前的部分，不能自定义，否则会 535 Login Fail</span>
  user <span style="color:#ae81ff">1664548605</span>
  password <span style="color:#f92672">[</span>授权码<span style="color:#f92672">]</span>
  tls on
  tls_starttls off
  tls_certcheck off

logfile /tmp/msmtp.log
</code></pre></div><p>QQ 邮箱例子：<a href="https://www.cnblogs.com/IvanChen/p/5987928.html">使用mutt+msmtp在Linux命令行界面下发邮件</a>。</p>
<p>总之，哪怕QQ 邮箱设置对了，也要多试几次才能发送成功。</p>
<h4 id="主界面配置mutt">主界面：配置Mutt<a hidden class="anchor" aria-hidden="true" href="#主界面配置mutt">#</a></h4>
<p>Mutt的配置文件为<code>~/.muttrc</code>，记得改权限：<code>chmod 600 ~/.muttrc</code></p>
<p>另外：mutt的配置文件还可以放在<code>~/.mutt/muttrc</code>。这种方法有一个好处，即<code>~/.mutt/</code>目录下可以放很多主题、插件等文件。</p>
<p>基本配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 通用设定</span>
set use_from<span style="color:#f92672">=</span>yes
set envelope_from<span style="color:#f92672">=</span>yes
<span style="color:#75715e">#移动已读邮件</span>
set move<span style="color:#f92672">=</span>yes    
<span style="color:#75715e">#回复的时候调用原文</span>
set include 
set charset<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>
<span style="color:#75715e">#自动显示HTML</span>
auto_view text/html   

<span style="color:#75715e"># 发送者账号</span>
set realname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Vane Hsiung&#34;</span>
set from<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1664548605@qq.com&#34;</span>

<span style="color:#75715e"># 分类邮箱</span>
<span style="color:#75715e">#Mail box type</span>
set mbox_type <span style="color:#f92672">=</span> Maildir 
set folder <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/Mail&#34;</span>
<span style="color:#75715e">#INBOX</span>
set spoolfile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/Mail/inbox&#34;</span> 
<span style="color:#75715e">#Seen box</span>
set mbox<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/Mail/seen&#34;</span> 
<span style="color:#75715e">#Sent box</span>
set record<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/Mail/sent&#34;</span>  
<span style="color:#75715e">#Draft box</span>
set postponed<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/Mail/draft&#34;</span>  

<span style="color:#75715e"># 关联程序（需要自己用which命令确定一下）</span>
<span style="color:#75715e"># 默认使用 nano</span>
set editor<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;vim&#34;</span>
set sendmail<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/usr/bin/msmtp&#34;</span>
</code></pre></div><p>以上如果有什么问题，可参考<a href="https://gist.github.com/iharsuvorau/45a078ecb597eb916fdf">etchmail + proc + msmtp + mutt configuration samples</a>。</p>
<h4 id="确认邮箱服务器">确认邮箱服务器<a hidden class="anchor" aria-hidden="true" href="#确认邮箱服务器">#</a></h4>
<p>即使上面配置一切OK，也不一定能正常收发邮件。因为你用的Gmail、QQ、网易、阿里云等等，后台都有一系列的第三方收取设置。这是各不相同的。</p>
<p>除了第三方客户端的允许，我们还要设置POP。最好放开全部邮件或者最近30天，然后禁止客户端删信。这是什么意思呢？POP默认客户端在收件后，服务器上的邮件就自动删除了！这个不太合适，所以必须要禁止。</p>
<h4 id="基本操作httpslifehackercomhow-to-use-the-fast-and-powerful-mutt-email-client-with-5574557"><a href="https://lifehacker.com/how-to-use-the-fast-and-powerful-mutt-email-client-with-5574557">基本操作</a><a hidden class="anchor" aria-hidden="true" href="#基本操作httpslifehackercomhow-to-use-the-fast-and-powerful-mutt-email-client-with-5574557">#</a></h4>
<p>邮件列表操作：</p>
<ul>
<li>基本：<code>q</code>:Quit, <code>d</code>:删除当前邮件, <code>s</code>:将邮件移动至指定文件夹, <code>m</code>:创建新邮件, <code>r</code>:回复当前邮件, <code>?</code>:帮助</li>
<li>移动：<code>j/k</code> 上下移动邮件, <code>z/Z</code>上下翻页, <code>&lt;Number&gt;</code> 跳至序号处（不进入邮件）</li>
<li><code>&lt;Enter&gt;</code> 打开选中的邮件</li>
<li><code>/</code>在当前文件夹搜索</li>
<li><code>d</code> 将选中邮件标记为删除, <code>N</code> 将选中邮件标记为未读, <code>$</code> 让标记的东西生效，如删除、未读等。</li>
<li><code>f</code> 转发选中邮件, <code>e</code> 编辑选中邮件</li>
<li><code>c</code>切换文件夹(inbox/seen/draft等), 需要输入文件夹名称，或按<code>?</code>在列表里选择，<code>j/k</code>上下移动。</li>
</ul>
<p>在邮件中的操作：</p>
<ul>
<li><code>j/k</code> 上一封／下一封邮件, <code>&lt;Space&gt;</code>: 向下翻页, <code>&lt;Enter&gt;</code>: 向下滚动</li>
<li><code>e</code> 编辑当前邮件, <code>t</code>编辑TO，<code>c</code>编辑CC，<code>b</code>编辑BCC，<code>y</code>发送邮件，<code>a</code>添加附件，<code>Return</code>查看附件，<code>E</code>编辑附件，<code>D</code>删除附件</li>
</ul>
<p><a href="https://gitlab.com/muttmua/mutt/-/wikis/MuttFaq/Action">使用命令操作</a>：</p>
<p>Mutt如同Vim一样，不光可以把命令绑定为快捷键，还能直接输入<code>:</code>直接输入命令。
但是稍有不同的是，Mutt称之为<code>Action</code>，而且需要用<code>:exec &lt;命令&gt;</code>这样格式执行。</p>
<p>比如sidebar侧边栏的移动，命令是：<code>sidebar-next</code>, <code>sidebar-prev</code>。
那么我们可以直接输入<code>:exec sidebar-next</code>，按下回车执行。</p>
<h3 id="irchttpswwwcnblogscomsztomp11173404html"><a href="https://www.cnblogs.com/sztom/p/11173404.html">IRC</a><a hidden class="anchor" aria-hidden="true" href="#irchttpswwwcnblogscomsztomp11173404html">#</a></h3>
<h4 id="简介httpsenwikipediaorgwikiinternet_relay_chat"><a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">简介</a><a hidden class="anchor" aria-hidden="true" href="#简介httpsenwikipediaorgwikiinternet_relay_chat">#</a></h4>
<p>芬兰人雅尔可·欧伊卡利宁（Jarkko Oikarinen）于1988年8月创造了IRC来取代一个叫做MUT的程序。</p>
<ul>
<li>IRC（Internet Relay Chat的缩写，“因特网中继聊天”）是一个位于应用层的协议。</li>
<li>其主要用于群体聊天，但同样也可以用于个人对个人的聊天。</li>
<li>一个IRC服务器可以连接其他的IRC服务器以扩展为一个IRC网络。</li>
<li>IRC 不强制注册；但如果你注册了，就可以强制把占用自己唯一 ID 的人踢下线。</li>
<li>IRC 协议简单，开源实现多，其第三方机器人程序非常众多，几乎每种语言都有一个实现。</li>
<li>IRC 是开源社区会议标准；因此，许多开源世界的技术大牛混在那里。</li>
</ul>
<p><a href="https://www.irchelp.org/">irchelp</a>：一个致力于帮助用户了解IRC的网站。</p>
<p><a href="http://tldp.org/HOWTO/IRC/index.html">IRC</a>：Linux文档项目的IRC HOWTO</p>
<h4 id="服务器">服务器<a hidden class="anchor" aria-hidden="true" href="#服务器">#</a></h4>
<p>首先要区分一些概念：</p>
<ul>
<li>Networks：是指的互相隔离的网络，如Freenode和DALnet这些是世界知名的网络，但互相隔离，频道不共享。</li>
<li>Servers：Network网络中的某一台电脑服务器，你加入世界上任何一个server都能加入这个Network。IRC是一个分布式的客户端/服务器结构。通过连接到一个IRC服务器，我们可以访问这个服务器以及它所连接的其他服务器上的频道（即这个 Network 中所有频道）。</li>
</ul>
<p>频道存在于一个IRC服务器上。一个频道类似于一个聊天室，频道名称必须以<code>#</code>符号开始，例如<code>#irchelp</code>。</p>
<p>要使用IRC，必须先登录到一个IRC服务器上，最常见的为<a href="https://freenode.net/">irc.freenode.net</a>——最大的IRC网络，为免费和开源软件社区，非营利组织和相关社区提供讨论设施。</p>
<p>Freenode <a href="https://freenode.net/kb/answer/usermodes">用户模式</a>。</p>
<p>IRC使用的服务器端口有:</p>
<ul>
<li>6667（明文传输，如irc://irc.freenode.net）</li>
<li>6697（SSL加密传输，如ircs://irc.freenode.net:6697）。</li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/IRCd">IRCD</a>: 简称互联网中继聊天守护，是服务器软件实现了IRC 协议，使人们通过上网彼此交谈（交换文本即时消息）。</p>
<h4 id="客户端">客户端<a hidden class="anchor" aria-hidden="true" href="#客户端">#</a></h4>
<p>IRC用户透过客户端软件和服务器相连。</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Comparison_of_Internet_Relay_Chat_clients">Internet Relay Chat客户端的比较</a></li>
<li><a href="https://ircv3.net/software/clients">IRCv3 Client Support</a></li>
</ul>
<p>常用客户端：</p>
<table>
<thead>
<tr>
<th>Client</th>
<th>Homepage</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>HexChat</td>
<td><a href="https://hexchat.github.io/">https://hexchat.github.io/</a></td>
<td>基于XChat的图形化IRC客户端。</td>
</tr>
<tr>
<td>Irssi</td>
<td><a href="https://irssi.org/">https://irssi.org/</a></td>
<td>支持IPv6的模块化文本UI IRC客户端。</td>
</tr>
<tr>
<td>Pidgin</td>
<td><a href="https://pidgin.im/">https://pidgin.im/</a></td>
<td>具有GTK +界面的流行即时消息客户端。</td>
</tr>
<tr>
<td>WeeChat</td>
<td><a href="https://weechat.org/">https://weechat.org/</a></td>
<td>便携式和多接口（文本，Web和GUI）IRC客户端。</td>
</tr>
<tr>
<td>Konversation</td>
<td><a href="https://konversation.kde.org/">https://konversation.kde.org/</a></td>
<td>基于KDE框架的用户友好型IRC客户端。</td>
</tr>
<tr>
<td>Polari</td>
<td><a href="https://wiki.gnome.org/Apps/Polari">https://wiki.gnome.org/Apps/Polari</a></td>
<td>GNOME的IRC客户端</td>
</tr>
<tr>
<td>ircii</td>
<td><a href="http://eterna.com.au/ircii/">http://eterna.com.au/ircii/</a></td>
<td>在大多数UNIX平台下运行的IRC和ICB客户端。</td>
</tr>
<tr>
<td>kvirc</td>
<td><a href="http://www.kvirc.net/">http://www.kvirc.net/</a></td>
<td>使用Qt GUI工具包的便携式IRC客户端。</td>
</tr>
<tr>
<td>Quassel</td>
<td><a href="https://quassel-irc.org/">https://quassel-irc.org/</a></td>
<td>Qt5 IRC客户端支持远程守护进程以实现全天候连接</td>
</tr>
</tbody>
</table>
<h4 id="irssihttpssegmentfaultcoma1190000018120591"><a href="https://segmentfault.com/a/1190000018120591">Irssi</a><a hidden class="anchor" aria-hidden="true" href="#irssihttpssegmentfaultcoma1190000018120591">#</a></h4>
<p><strong>安装</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt install irssi
</code></pre></div><p>命令行输入<code>irssi</code>即进入了聊天室。</p>
<p>和一般Linux程序的一般命令、格式都不同，IRC客户端一般有自己的命令。窗口右下方<code>[(status)]</code>是输入命令的地方。</p>
<p>一般命令(不区分大小写)：</p>
<ul>
<li><code>/quit</code>，退出程序。一般的ctrl-c, ctrl-d, esc, q之类的都不管用</li>
<li><code>/help</code>，帮助</li>
<li><code>/network list</code> 查看已保存的服务器列表</li>
<li><code>/connect xxx.xxx.xxx</code> 连接某服务器。连接 freenode，需要到 <a href="https://irc.com/login/sso">https://irc.com/login/sso</a> 注册，然后按照 <a href="https://freenode.net/kb/answer/sasl">https://freenode.net/kb/answer/sasl</a> 进行设置。</li>
<li><code>/join xxx</code> 加入某channel</li>
<li><code>/leave</code>或<code>/part</code> 离开当前channel</li>
<li><code>/normal</code>或<code>/n</code> 查看当前channel的人数</li>
<li><code>/list -YES</code> 查看当前服务器的所有chennels (慎用)</li>
<li><code>/nick NewNickName</code> 更改当前昵称</li>
<li><code>/msg NickName Content</code> 给某人发送消息，一般都是给<code>/msg nickserv</code>管理人NPC发送消息</li>
</ul>
<p>常用快捷键：</p>
<ul>
<li><code>Alt + 1/2/3/4...</code>，切换window窗口，一般一个channel一个窗口</li>
<li><code>Alt + n/p</code>，上下滚动屏幕</li>
</ul>
<p><a href="http://www.ircbeginner.com/ircinfo/abbreviations.html">IRC 常用缩写词</a></p>
<p><strong>配置</strong></p>
<p>如果想长期保存、备份一个固定的程序配置，那么就需要修改配置文件。</p>
<p><code>irssi</code>默认的配置文件为<code>~/.irssi/config</code>。</p>
<p>配置中，会在第一次运行时就自动设置了一些，包括根据当前电脑账户的用户名设置<code>nickname</code>等。整个配置，是一直“类似”JSON的格式。</p>
<p><code>settings</code> ：记录自己的名字：nick, real_name, user_name</p>
<p><code>servers</code> ：这是指的Network而不是具体某台server，如Freenode、Dal、ESPer、EFnet等大型网络。服务器配置案例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">servers <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>
  <span style="color:#f92672">{</span> address <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;irc.dal.net&#34;</span>; chatnet <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DALnet&#34;</span>; port <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;6667&#34;</span>; <span style="color:#f92672">}</span>,
  <span style="color:#f92672">{</span>
      address <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;路径&#34;</span>;
      chatnet <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;下面chatnet对应的名称&#34;</span>;
      port <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;端口&#34;</span>;
      autoconnect <span style="color:#f92672">=</span> true;
      use_ssl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;yes&#34;</span>;
      password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户名:密码&#34;</span>;
  <span style="color:#f92672">}</span>
<span style="color:#f92672">)</span>;
</code></pre></div><p><code>chatnets</code>：记录各个网络的登录信息，也可以作为“别名”，这样每次<code>/connect</code>不用输入全路径了。配置完每个服务器后，还要配置相应的<code>chatnets</code>，每一条的名称都要与<code>servers</code>中的对应。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chatnets <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    DALnet <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;IRC&#34;</span>;
        max_kicks <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;4&#34;</span>; max_msgs <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;20&#34;</span>;max_whois <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;30&#34;</span>;
    <span style="color:#f92672">}</span>;
    Freenode <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;IRC&#34;</span>;
        max_kicks <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;4&#34;</span>; max_msgs <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;20&#34;</span>;max_whois <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;30&#34;</span>;
        autosendcmd <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/msg nickserv identify MyName MyPassword&#34;</span>;
    <span style="color:#f92672">}</span>;
<span style="color:#f92672">}</span>;
</code></pre></div><p><code>channels</code> ：记录自己收藏的频道名。RC的频道不是用URL之类很复杂的东西，全都是用<code>#tag</code>这种简单一个标签来区分的，非常好记。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">channels <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>
  <span style="color:#f92672">{</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#lobby&#34;</span>; chatnet <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EsperNet&#34;</span>; autojoin <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;No&#34;</span>; <span style="color:#f92672">}</span>,
  <span style="color:#f92672">{</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#freenode&#34;</span>; chatnet <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Freenode&#34;</span>; autojoin <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;No&#34;</span>; <span style="color:#f92672">}</span>,
<span style="color:#f92672">)</span>;
</code></pre></div><p><code>statusbar</code>：界面美化的设置。目前IRSSI的世界里，唯一知名的主题只有<a href="https://github.com/ronilaukkarinen/weed">weed</a>。</p>
<h2 id="multimedia">Multimedia<a hidden class="anchor" aria-hidden="true" href="#multimedia">#</a></h2>
<h3 id="rhythmboxhttpsgitlabgnomeorggnomerhythmbox"><a href="https://gitlab.gnome.org/GNOME/rhythmbox">Rhythmbox</a><a hidden class="anchor" aria-hidden="true" href="#rhythmboxhttpsgitlabgnomeorggnomerhythmbox">#</a></h3>
<p><strong>Music</strong></p>
<p>搜 &ldquo;无损音乐&rdquo; &ldquo;车载音乐&rdquo; 打包下载。</p>
<p><strong>电台</strong></p>
<p>很多电台是基于mms协议的，如果rhythmbox无法播放mms协议的电台，则需要安装支持mms协议的gstreamer插件——因为rhymbox使用gstreamer做后台解码。支持mms协议的插件为gstreamer bad插件，所以执行命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install gstreamer0.10-plugins-bad
</code></pre></div><p>同样的，如果需要播放mp3文件则安装ugly插件，需要播放wma文件则安装ffmpeg插件。</p>
<p><a href="https://forum.ubuntu.org.cn/viewtopic.php?t=219155">电视台和电台MMS地址</a></p>
<p><a href="https://forum.ubuntu.org.cn/viewtopic.php?t=183787">分享Rhythmbox电台列表</a></p>
<p>最终还是没什么无法播放mms，因为 Rhythmbox 报错了。</p>
<h4 id="feeluownhttpsgithubcomfeeluownfeeluown"><a href="https://github.com/feeluown/FeelUOwn">FeelUOwn</a><a hidden class="anchor" aria-hidden="true" href="#feeluownhttpsgithubcomfeeluownfeeluown">#</a></h4>
<p>FeelUOwn 是一个稳定、用户友好以及高度可定制的音乐播放器。支持全平台。</p>
<h4 id="clementinehttpsgithubcomclementine-playerclementine"><a href="https://github.com/clementine-player/Clementine">Clementine</a><a hidden class="anchor" aria-hidden="true" href="#clementinehttpsgithubcomclementine-playerclementine">#</a></h4>
<p>Clementine is a modern music player and library organizer for Windows, Linux and macOS.</p>
<p><img loading="lazy" src="/Distributions/image-20220719203631775.png" alt="image-20220719203631775"  />
</p>
<h4 id="cmushttpscmusgithubio"><a href="https://cmus.github.io/">cmus</a><a hidden class="anchor" aria-hidden="true" href="#cmushttpscmusgithubio">#</a></h4>
<p>Small, fast and powerful console music player for Unix-like operating systems.</p>
<p><a href="https://forum.suse.org.cn/t/topic/14143">官方教程翻译版</a></p>
<h4 id="deadbeefhttpsdeadbeefsourceforgeio"><a href="https://deadbeef.sourceforge.io/">DeaDBeeF</a><a hidden class="anchor" aria-hidden="true" href="#deadbeefhttpsdeadbeefsourceforgeio">#</a></h4>
<p>DeaDBeeF (as in <a href="http://en.wikipedia.org/wiki/Hexspeak">0xDEADBEEF</a>) is a modular cross-platform audio player which runs on GNU/Linux distributions, macOS, Windows, *BSD, OpenSolaris, and other UNIX-like systems.</p>
<h4 id="jellyfinhttpsgithubcomjellyfinjellyfin"><a href="https://github.com/jellyfin/jellyfin">jellyfin</a><a hidden class="anchor" aria-hidden="true" href="#jellyfinhttpsgithubcomjellyfinjellyfin">#</a></h4>
<p>The Free Software Media System</p>
<h4 id="audacioushttpsaudacious-media-playerorg"><a href="https://audacious-media-player.org/">Audacious</a><a hidden class="anchor" aria-hidden="true" href="#audacioushttpsaudacious-media-playerorg">#</a></h4>
<p>Audacious is an open source audio player.</p>
<h4 id="kde-elisahttpsgithubcomkdeelisaamarokhttpsgithubcomkdeamarok">KDE <a href="https://github.com/KDE/elisa">elisa</a>/<a href="https://github.com/KDE/amarok">amarok</a><a hidden class="anchor" aria-hidden="true" href="#kde-elisahttpsgithubcomkdeelisaamarokhttpsgithubcomkdeamarok">#</a></h4>
<p>elisa: Simple music player aiming to provide a nice experience for its users</p>
<p>amarok: Powerful music player that lets you rediscover your music</p>
<p>Elisa 在播放文件不可用的时候会迅速的删光所有歌曲，它的播放列表经常被破坏</p>
<h4 id="osdlyricshttpsgithubcomosdlyricsosdlyrics"><a href="https://github.com/osdlyrics/osdlyrics">osdlyrics</a><a hidden class="anchor" aria-hidden="true" href="#osdlyricshttpsgithubcomosdlyricsosdlyrics">#</a></h4>
<p>Standalone lyrics fetcher/displayer (windowed and OSD mode).</p>
<h4 id="zonylrctoolsxhttpsgithubcomreal-zonyzonylrctoolsx"><a href="https://github.com/real-zony/ZonyLrcToolsX">ZonyLrcToolsX</a><a hidden class="anchor" aria-hidden="true" href="#zonylrctoolsxhttpsgithubcomreal-zonyzonylrctoolsx">#</a></h4>
<p>ZonyLrcToolsX 是一个能够方便地下载歌词的小软件。（ps：一点也不见得方便）</p>
<h3 id="neteasemusichttpsmusic163com"><a href="https://music.163.com/">NeteaseMusic</a><a hidden class="anchor" aria-hidden="true" href="#neteasemusichttpsmusic163com">#</a></h3>
<p>Linux 下官方只发布了 deb 包，flatpak 直接安装</p>
<h4 id="yesplaymusichttpsgithubcomqier222yesplaymusic"><a href="https://github.com/qier222/YesPlayMusic">YesPlayMusic</a><a hidden class="anchor" aria-hidden="true" href="#yesplaymusichttpsgithubcomqier222yesplaymusic">#</a></h4>
<p>高颜值的第三方网易云播放器</p>
<h4 id="netease-musicboxhttpsgithubcomdarknessomimusicbox"><a href="https://github.com/darknessomi/musicbox">NetEase-MusicBox</a><a hidden class="anchor" aria-hidden="true" href="#netease-musicboxhttpsgithubcomdarknessomimusicbox">#</a></h4>
<p>网易云音乐命令行版</p>
<h4 id="lx-music-desktophttpsgithubcomlyswhutlx-music-desktop"><a href="https://github.com/lyswhut/lx-music-desktop">lx-music-desktop</a><a hidden class="anchor" aria-hidden="true" href="#lx-music-desktophttpsgithubcomlyswhutlx-music-desktop">#</a></h4>
<p>一个基于 electron 的音乐软件</p>
<h4 id="listen1_desktophttpsgithubcomlisten1listen1_desktop"><a href="https://github.com/listen1/listen1_desktop">listen1_desktop</a><a hidden class="anchor" aria-hidden="true" href="#listen1_desktophttpsgithubcomlisten1listen1_desktop">#</a></h4>
<p>one for all free music in china</p>
<h3 id="qqmusichttpsyqqcom"><a href="https://y.qq.com/">QQMusic</a><a hidden class="anchor" aria-hidden="true" href="#qqmusichttpsyqqcom">#</a></h3>
<h3 id="spotify">Spotify<a hidden class="anchor" aria-hidden="true" href="#spotify">#</a></h3>
<p>作为世界上最大的音乐流媒体服务商，Spotify 因优秀的设计和精准的音乐推荐算法让不少人为之倾心。</p>
<p>在正式注册 Spotify 之前，我们先来看一看曲库的问题。由于不同地区的歌曲版权差异，Spotify 在不同地区提供服务时，其相应的曲库也有所不同。例如港区的曲库中，粤语歌就要比美区多，相反美区的英文歌就要比港区多。同理，若你喜欢听其他语种的歌，注册当地的 Spotify 则是最好的选择。</p>
<p>注册后要是发现当前的地区选择并不是很理想，想要换区也是可行的。首先要挂上自己想要换到地区的代理，然后进入自己的「Profile/资料」界面，点击「Edit Profile/修改资料」，「Country/国家」这个选项就会出现你当前所挂代理地区，保存更改即可换区成功。</p>
<p>登录的话，需要先在登录界面设置Proxy重启。登录后在设置里改回来，不再需要Proxy了。</p>
<h4 id="spotifydhttpsgithubcomspotifydspotifyd"><a href="https://github.com/Spotifyd/spotifyd">Spotifyd</a><a hidden class="anchor" aria-hidden="true" href="#spotifydhttpsgithubcomspotifydspotifyd">#</a></h4>
<p>An open source Spotify client running as a UNIX daemon.</p>
<h3 id="pulseaudiohttpswikiarchlinuxorgtitlepulseaudio_e7ae80e4bd93e4b8ade69687"><a href="https://wiki.archlinux.org/title/PulseAudio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">PulseAudio</a><a hidden class="anchor" aria-hidden="true" href="#pulseaudiohttpswikiarchlinuxorgtitlepulseaudio_e7ae80e4bd93e4b8ade69687">#</a></h3>
<p><a href="https://en.wikipedia.org/wiki/PulseAudio">PulseAudio</a> 是在<a href="https://wiki.archlinux.org/title/GNOME">GNOME</a> 或 <a href="https://wiki.archlinux.org/title/KDE">KDE</a>等桌面环境中广泛使用的音频服务。它在内核音频组件（比如<a href="https://wiki.archlinux.org/title/ALSA">ALSA</a> 和 <a href="https://wiki.archlinux.org/title/OSS">OSS</a>）和应用程序之间充当代理的角色。</p>
<h4 id="配置">配置<a hidden class="anchor" aria-hidden="true" href="#配置">#</a></h4>
<p>Pulseaudio 支持通过多种模块扩展其功能。在这里可以找到PulseAudio可用的模块的详细信息： <a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/">Pulseaudio Loadable Modules</a>。增加 <code>load-module &lt;module-name-from-list&gt;</code> 到文件 <code>/etc/pulse/default.pa</code>就可以启用对应的模块。</p>
<h4 id="启动">启动<a hidden class="anchor" aria-hidden="true" href="#启动">#</a></h4>
<p><strong>警告：</strong> 如果你给每个用户拷贝了配置文件（例如<code>client.conf</code>, <code>daemon.conf</code> 或者 <code>default.pa</code>）到<code>~/.config/pulse/</code> 或者 <code>~/.pulse/</code>目录下，确定这些文件的修改与<code>/etc/pulse/</code>下的文件修改同步，否则PulseAudio可能由于配置文件错误而拒绝启动。</p>
<p><strong>注意：</strong> 大多数X11环境会在启动X11会话时自动启动PulseAudio。</p>
<p>少数情况下PulseAudio在启动X11时没有自动启动，可运行下面的命令启动：</p>
<pre tabindex="0"><code>$ pulseaudio --start
</code></pre><p>运行下面的命令可以终止PulseAudio：</p>
<pre tabindex="0"><code>$ pulseaudio --kill
</code></pre><p><strong>在不支持的桌面环境中自动启动</strong></p>
<p><strong>注意：</strong> 正如之前所说, 如果用户安装了桌面环境，PulseAudio很可能通过 <code>/etc/X11/xinit/xinitrc.d/pulseaudio</code>文件或者 <code>/etc/xdg/autostart/</code>目录下的文件自动启动</p>
<p>查看PulseAudio是否正在运行：</p>
<pre tabindex="0"><code>$ pgrep -af pulseaudio
369 /usr/bin/pulseaudio
</code></pre><p>如果PulseAudio未运行而且用户正在使用X11，运行下面的命令可以在启动PulseAudio的同时加载需要的X11插件：</p>
<pre tabindex="0"><code>$ start-pulseaudio-x11
</code></pre><p>如果你没有运行GNOME, KDE或者Xfce，并且你的<code>~/.xinitrc</code>文件并未引用<code>/etc/X11/xinit/xinitrc.d</code>目录下的文件内容，为了让PulseAudio自动启动，你可以这样做：</p>
<pre tabindex="0"><code>~/.xinitrc
/usr/bin/start-pulseaudio-x11
</code></pre><h4 id="后端设置">后端设置<a hidden class="anchor" aria-hidden="true" href="#后端设置">#</a></h4>
<p><strong>ALSA</strong></p>
<p>配置ALSA与PulseAudio共同工作必须的文件<code>/etc/asound.conf</code>。</p>
<p>为了防止应用程序使用ALSA的OSS模拟功能而忽略PulseAudio（从而导致其他应用程序无法播放声音），确定<code>snd_pcm_oss</code>模块没有在系统启动时自动加载。如果该模块已经被加载(<code>lsmod | grep oss</code>)，运行下面命令以卸载该模块：</p>
<pre tabindex="0"><code># rmmod snd_pcm_oss
</code></pre><h4 id="均衡器">均衡器<a hidden class="anchor" aria-hidden="true" href="#均衡器">#</a></h4>
<p>PulseAudio内置了10段均衡器系统，按下列步骤操作以启用均衡器：</p>
<p><strong>加载均衡器通道和dbus协议模块</strong></p>
<pre tabindex="0"><code>$ pactl load-module module-equalizer-sink
$ pactl load-module module-dbus-protocol
</code></pre><p><strong>安装并运行图形前端</strong></p>
<pre tabindex="0"><code>$ sudo apt install pulseaudio-equalizer
$ qpaeq
</code></pre><p><strong>每次启动时加载均衡器和dbus模块</strong></p>
<p>编辑 <code>/etc/pulse/default.pa</code> 并加入下面几行：</p>
<pre tabindex="0"><code>### Load the integrated PulseAudio equalizer and D-Bus module
load-module module-equalizer-sink
load-module module-dbus-protocol
</code></pre><h3 id="pipewirehttpspipewireorg"><a href="https://pipewire.org/">Pipewire</a><a hidden class="anchor" aria-hidden="true" href="#pipewirehttpspipewireorg">#</a></h3>
<p>从 Pulseaudio 切换到 Pipewire 的理由是对于蓝牙的“LDAC”“APTX”之类编码格式的支持</p>
<h3 id="ffmpeghttpswwwruanyifengcomblog202001ffmpeghtml"><a href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html">FFmpeg</a><a hidden class="anchor" aria-hidden="true" href="#ffmpeghttpswwwruanyifengcomblog202001ffmpeghtml">#</a></h3>
<ul>
<li>powershell 执行与在 cmd 执行不一样，poweshell 某些 <code>-c:v</code> 会报错</li>
<li>ffmpeg 输出参数含义
<ul>
<li>frame: 编码的帧数量</li>
<li>fps：每秒编码的帧数</li>
<li>q：质量因子</li>
<li>size/ Lsize：视频和音频编码后的大小，即基本等于视频和音频 之和</li>
<li>time：输出帧的显示时间</li>
<li>bitrate：输出视频的比特率</li>
<li>dup：输入帧重复（duplicate）的数量</li>
<li>drop：输入帧丢弃（drop）的个数</li>
<li>speed：编码速度</li>
</ul>
</li>
</ul>
<p>视频文件本身其实是一个容器（container），里面包括了视频和音频，也可能有字幕等其他内容。</p>
<p>视频和音频都需要经过编码，才能保存成文件。不同的编码格式（CODEC），有不同的压缩率，会导致文件大小和清晰度的差异。</p>
<p>编码器（encoders）是实现某种编码格式的库文件。只有安装了某种格式的编码器，才能实现该格式视频/音频的编码和解码。</p>
<p>FFmpeg 的命令行参数非常多，可以分成五个部分：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg <span style="color:#f92672">[</span>全局参数<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>输入文件参数<span style="color:#f92672">]</span> -i 输入文件 <span style="color:#f92672">[</span>输出文件参数<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>输出文件<span style="color:#f92672">]</span>
</code></pre></div><h4 id="常用参数">常用参数<a hidden class="anchor" aria-hidden="true" href="#常用参数">#</a></h4>
<ul>
<li><code>-c</code>：指定编码器</li>
<li><code>-c copy</code>：直接复制，不经过重新编码（这样比较快）</li>
<li><code>-c:v</code>：指定视频编码器</li>
<li><code>-c:a</code>：指定音频编码器</li>
<li><code>-i</code>：指定输入文件</li>
<li><code>-an</code>：去除音频流</li>
<li><code>-vn</code>： 去除视频流</li>
<li><code>-preset</code>：指定输出的视频质量，会影响文件的生成速度，有以下几个可用的值 ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow。</li>
<li><code>-y</code>：不经过确认，输出时直接覆盖同名文件。</li>
</ul>
<h4 id="查看视频文件的元信息">查看视频文件的元信息<a hidden class="anchor" aria-hidden="true" href="#查看视频文件的元信息">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i input.mp4 -hide_banner
</code></pre></div><h4 id="转换编码格式">转换编码格式<a hidden class="anchor" aria-hidden="true" href="#转换编码格式">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i <span style="color:#f92672">[</span>input.file<span style="color:#f92672">]</span> -c:v libx264 output.mp4
</code></pre></div><p>转成 H.264 编码，一般使用编码器 libx264</p>
<h4 id="转换容器格式">转换容器格式<a hidden class="anchor" aria-hidden="true" href="#转换容器格式">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i input.mp4 -c copy output.mkv
</code></pre></div><h4 id="改变分辨率">改变分辨率<a hidden class="anchor" aria-hidden="true" href="#改变分辨率">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i input.mp4 -vf scale<span style="color:#f92672">=</span>720:-1 output.mp4
</code></pre></div><h4 id="提取视频">提取视频<a hidden class="anchor" aria-hidden="true" href="#提取视频">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i input.mp4 -an -c:v copy ouput.mp4
</code></pre></div><p><code>-vcodec codec</code> 强制使用codec编解码方式。如果用copy表示原始编解码数据必须被拷贝。</p>
<h4 id="提取音频">提取音频<a hidden class="anchor" aria-hidden="true" href="#提取音频">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i input.mp4 -vn -c:a copy output.aac
</code></pre></div><p><code>-c:a copy</code>表示不改变音频编码，直接拷贝。</p>
<h4 id="添加音轨">添加音轨<a hidden class="anchor" aria-hidden="true" href="#添加音轨">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i input.aac -i input.mp4 output.mp4
</code></pre></div><h4 id="音视频合成">音视频合成<a hidden class="anchor" aria-hidden="true" href="#音视频合成">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i video.mp4 -i audio.aac -c:v copy -c:a copy output.mp4
</code></pre></div><h4 id="截图">截图<a hidden class="anchor" aria-hidden="true" href="#截图">#</a></h4>
<p>从指定时间开始，连续对1秒钟的视频进行截图</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -y -i input.mp4 -ss 00:01:24 -t 00:00:01 output_%3d.jpg
</code></pre></div><p>指定只截取一帧</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -ss 01:23:45 -i input.mp4 -vframes <span style="color:#ae81ff">1</span> -q:v <span style="color:#ae81ff">2</span> output.jpg
</code></pre></div><p><code>-vframes 1</code>指定只截取一帧，<code>-q:v 2</code>表示输出的图片质量，一般是1到5之间（1 为质量最高）。</p>
<h4 id="裁剪">裁剪<a hidden class="anchor" aria-hidden="true" href="#裁剪">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -ss <span style="color:#f92672">[</span>start<span style="color:#f92672">]</span> -i <span style="color:#f92672">[</span>input<span style="color:#f92672">]</span> -t <span style="color:#f92672">[</span>duration<span style="color:#f92672">]</span> -c copy <span style="color:#f92672">[</span>output<span style="color:#f92672">]</span>
$ ffmpeg -ss <span style="color:#f92672">[</span>start<span style="color:#f92672">]</span> -i <span style="color:#f92672">[</span>input<span style="color:#f92672">]</span> -to <span style="color:#f92672">[</span>end<span style="color:#f92672">]</span> -c copy <span style="color:#f92672">[</span>output<span style="color:#f92672">]</span>
</code></pre></div><p>裁剪（cutting）指的是，截取原始视频里面的一个片段，输出为一个新视频。可以指定开始时间（start）和持续时间（duration），也可以指定结束时间（end）。</p>
<h4 id="添加字幕httpswwwjianshucompf33910818a1c"><a href="https://www.jianshu.com/p/f33910818a1c">添加字幕</a><a hidden class="anchor" aria-hidden="true" href="#添加字幕httpswwwjianshucompf33910818a1c">#</a></h4>
<ul>
<li>外挂字幕：一个单独的外部字幕文件，格式类型一般有srt、vtt、ass等等。播放视频时，需要把外挂字幕和视频放在同一目录下，并在播放器中选择字幕文件才可以在视频中看到字幕。</li>
<li>软字幕：也叫内挂字幕、封装字幕、内封字幕，字幕流等，就是把前面的外挂字幕的字幕文件嵌入到视频中作为流的一部分，如果一个视频有多个字幕流那么播放视频是还得选择对应的字幕流</li>
<li>硬字幕：是嵌入到视频帧里面的字幕，它就像视频水印一样作为视频帧的一分部分了，不管再任何平台字幕看起来都是一样的，而且也不再要求播放器单独对字母进行渲染</li>
</ul>
<p>常见的字幕格式有：</p>
<ul>
<li>SRT（标准外挂字幕格式）：只包含文字和时间码，没有样式，显示效果由播放器决定，不同的播放器显示出的效果可能差别很大。</li>
<li>ASS（高级外挂字幕格式）：支持样式、字体、字幕定位、淡入淡出、简单的特效。如果不缺字体，不同的播放器显示效果基本一致。</li>
</ul>
<p>ffmpeg字幕处理流程(容器是否支持字幕流指的是输出容器)</p>
<p><img loading="lazy" src="/Distributions/ffmpeg.webp" alt=""  />
</p>
<p>添加软字幕：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i video.mp4 -i subtitle.srt -c copy output.mkv
</code></pre></div><p>软字幕只有部分容器格式比如(mkv)才支持，MP4/MOV等不支持，而且也只有部分播放器支持软字幕或者外挂字幕(如VLC播放器)。</p>
<p>添加多个字幕：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ffmpeg -i input.mp4 -i zh_CN.srt -i en_US.srt -map 0:v -map 0:a -map <span style="color:#ae81ff">1</span> -map <span style="color:#ae81ff">2</span>  -c:v copy -c:a copy -metadata:s:s:0 language<span style="color:#f92672">=</span>chn -metadata:s:s:1 language<span style="color:#f92672">=</span>eng <span style="color:#e6db74">&#34;output.mp4&#34;</span>
</code></pre></div><ul>
<li><code>-map</code> 是轨道参数，如果只有一个字幕，就不需要这个参数。<code>-map 0:v</code> 表示第一个文件输入视频轨道，<code>-map 0:a</code> 表示第二个轨道是第一个文件输入的音频轨道，<code>-map 1</code> 建立第三个轨道，<code>-map 2</code> 建立第四个轨道。如果没添加 map 参数，默认就只有一个字幕轨道，第二个英文字幕会覆盖第一个中文字幕轨道。</li>
<li><code>-metadata:s:s:0 language=chn</code> 第一条字幕的语言设置为中文，<code>-metadata:s:s:1 language=eng</code> 第二条字幕的语言设置为英文。 <code>language</code> 不能自定义，只能设置成固定的缩写。</li>
</ul>
<p>添加硬字幕：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i video.mkv -vf subtitles<span style="color:#f92672">=</span>subtitle.srt out.mp4
</code></pre></div><h4 id="下载-m3u8httpswww51ctocomarticle558658html"><a href="https://www.51cto.com/article/558658.html">下载 m3u8</a><a hidden class="anchor" aria-hidden="true" href="#下载-m3u8httpswww51ctocomarticle558658html">#</a></h4>
<p>现在比较常见的视频流媒体，大部分都是 m3u8 格式的，而对于 m3u8 格式的视频而言，如果你下载过，你会发现它就是一个文本文件，大概也就只有几十 kb，从磁盘大小来看，应该也知道它并不是一个直接的视频文件。</p>
<p><strong>什么是 m3u8</strong></p>
<p>说到 m3u8 就要先说说 HLS（HTTP Live Streaming）。HLS 是 Apple 公司针对 iPhone、iPod、iTouch 等移动设备，而研发的基于 HTTP 协议的流媒体解决方案。在 HLS 技术中，Web 服务器可以向客户端提供接近实时的音视频流，但是它又是使用的标准的 HTTP 协议。所以基本上，比较大型的点播直播类服务，都是基于 HLS 的。</p>
<p>而该技术的原理，就是将视频文件或者视频流，进行切片（ts文件），并建立索引文件（m3u8），它支持的视频流编码为 H.264，音频流编码为 AAC。</p>
<p>简单来说，基于 HLS 的视频流，会将完整的视频，切割成一个个比较小的视频片段（ts 文件），然后根据协议组合成一个 m3u8 文件。这些比较小的 ts 文件，是可以单独播放的。而视频播放器，拿到 m3u8 文件之后，根据对其内 ts 片段的索引，连续播放不同的视频片段，来达到流畅的播放效果。</p>
<p><strong>下载的 m3u8 文件</strong></p>
<p>说这些概念都没用，我们来看两个真实的被下载的 m3u8 文件。</p>
<p><img loading="lazy" src="/Distributions/4dda38f226d35487c838575d86125b9b.jpg" alt="img"  />
</p>
<p>这种 m3u8 文件就还是比较清晰的，能看到它一个个的片段。但是需要注意的是，这里的片段，全部是基于域名的相对地址，也就是说，这样一个 m3u8 文件，你丢到播放器里，是无法播放的，但是如果你记录了原始下载这个 m3u8 的链接，它在播放器里是可以正常播放的。</p>
<p>当然，如果你修改这个 m3u8 文件，将它相对路径拼接上域名地址，也是可以达到播放的效果的。</p>
<p>再来看看另外一种 m3u8 文件，它其内的 ts 片段，都是完整地址。</p>
<p><img loading="lazy" src="/Distributions/231561a1c6ac4f063f05c72257701e35.jpg" alt="img"  />
</p>
<p>像这种具有完整地址的 ts 片段，哪怕你将它保存成一个本地的文件，播放器依然是可以直接播放的，不过这里本质上依然是在在线播放。</p>
<p>这两中 m3u8 文件，虽然有细微的差别，但是它们都是基于标准的协议。</p>
<p>简单总结一下：</p>
<ol>
<li>m3u8 不是视频内容的文件，它占用的磁盘空间非常的小。</li>
<li>m3u8 文件，如果其内的 ts 片段，是完整地址，则可以保存后播放，否者只能在线播放。</li>
<li>播放器播放 m3u8 文件的时候，实际上，还是在线从线上获取的视频流进行播放，所以是存在失效的情况的。</li>
</ol>
<p>暂时知道这三点就可以了，接下来我们再看如何将一个 m3u8 文件，下载成一个 mp4 视频文件。</p>
<p><strong>使用 fmpeg 下载 m3u8</strong></p>
<p>ffmpeg 是一套可以用来记录、转换音视频，并将其转化为流的开源程序，采用 LGPL 或 GPL 协议许可证书，很多大型的音视频软件，内部都是基于 ffmpeg 的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i <span style="color:#e6db74">&#34;m3u8_file_uri&#34;</span> <span style="color:#e6db74">&#34;save_video.mp4&#34;</span> 
</code></pre></div><p>到此，如果 m3u8 的链接正确可播放，就会开始下载，等待下载完成就可以了，最终会在指定目录下，保存 save_video.mp4 文件，它就是最终我们下载的离线视频文件。</p>
<h3 id="shotcuthttpswwwshotcutorgdownload"><a href="https://www.shotcut.org/download/">Shotcut</a><a hidden class="anchor" aria-hidden="true" href="#shotcuthttpswwwshotcutorgdownload">#</a></h3>
<p>Shotcut is a free, open source, cross-platform video editor.</p>
<h3 id="davinci-resolvehttpwwwblackmagicdesigncomcnproductsdavinciresolve"><a href="http://www.blackmagicdesign.com/cn/products/davinciresolve/">DaVinci Resolve</a><a hidden class="anchor" aria-hidden="true" href="#davinci-resolvehttpwwwblackmagicdesigncomcnproductsdavinciresolve">#</a></h3>
<p>专业的剪辑、调色、特效和音频后期制作！</p>
<h3 id="mkvtoolnixhttpsmkvtoolnixdownloaddownloadshtml"><a href="https://mkvtoolnix.download/downloads.html">MKVToolNix</a><a hidden class="anchor" aria-hidden="true" href="#mkvtoolnixhttpsmkvtoolnixdownloaddownloadshtml">#</a></h3>
<p><em>MKVToolNix</em> is a set of tools to create, alter and inspect <a href="http://www.matroska.org/">Matroska</a>(mkv) files under Linux, other Unices and Windows.</p>
<p>轨道提取模式：</p>
<pre tabindex="0"><code>mkvextract 输入文件名 tracks [选项] TID1:目标文件名1 [TID2:目标文件名2 ...]
</code></pre><p>TID:输出文件名    如果输入文件中存在 ID 为 TID 的轨道，则将其提取为文件 输出文件名。轨道 ID 与 <code>mkvmerge --identify 文件</code> 选项所输出的相同。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkvextract <span style="color:#e6db74">&#34;Another Movie.mkv&#34;</span> tracks 0:video.h265 <span style="color:#e6db74">&#34;1:main audio.aac&#34;</span>
</code></pre></div><h3 id="mpvhttpsmpviomanual"><a href="https://mpv.io/manual/">MPV</a><a hidden class="anchor" aria-hidden="true" href="#mpvhttpsmpviomanual">#</a></h3>
<p>MPV 是一个基于 <a href="http://www.mplayerhq.hu/DOCS/man/zh_CN/mplayer.1.html">MPlayer</a> 和 mplayer2 的开源极简全能播放器。支持各种视频格式、音频解码、支持特效字幕（电影动漫的ass特效字幕都没啥问题），不仅支持本地播放，同样支持网络播放（mpv 集成了 <code>youtube-dl</code>）。重点是 MPV 具有多系统平台支持、命令行、自定义、GPU 解码、脚本支持等特点……</p>
<h4 id="osc-界面">OSC 界面<a hidden class="anchor" aria-hidden="true" href="#osc-界面">#</a></h4>
<p>由于默认情况下，MPV 播放器简约到连 GUI 界面都没有提供，因此需要通过命令行或配置文件设置。</p>
<p>虽然 MPV 并没有提供官方的 GUI 界面，没有菜单，但它提供 OSC 操作界面和快捷键用于操作，只要关联好文件格式，使用 mpv 打开视频后，使用上其实也非常的简单方便。</p>
<p><img loading="lazy" src="Distributions/mpv-control.webp" alt="mpv 界面说明"  />
</p>
<h4 id="快捷键httpswwwiplaysoftcommpvhtml"><a href="https://www.iplaysoft.com/mpv.html">快捷键</a><a hidden class="anchor" aria-hidden="true" href="#快捷键httpswwwiplaysoftcommpvhtml">#</a></h4>
<p>操作主要通过键盘快捷键（区分大小写）调整。下面介绍一些常用的 mpv 快捷键（更多的快捷键请阅读官方参考手册）。</p>
<p><strong>鼠标操作</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>鼠标左键双击</td>
<td>进入/退出全屏</td>
</tr>
<tr>
<td>鼠标右键单击</td>
<td>暂停/继续播放</td>
</tr>
<tr>
<td>鼠标滚轮</td>
<td>快进/快退</td>
</tr>
</tbody>
</table>
<p><strong>播放控制</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th></th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>p</td>
<td>Space</td>
<td>暂停、继续播放</td>
</tr>
<tr>
<td>/</td>
<td>*</td>
<td>减少/增加音量</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>减少/增加音量（数字键盘区的9、0不可用）</td>
</tr>
<tr>
<td>m</td>
<td></td>
<td>静音</td>
</tr>
<tr>
<td>←</td>
<td>→</td>
<td>快退/快进5秒</td>
</tr>
<tr>
<td>↑</td>
<td>↓</td>
<td>快进/快退1分钟</td>
</tr>
<tr>
<td>&lt;</td>
<td>&gt;</td>
<td>上一个/下一个（播放列表中）</td>
</tr>
<tr>
<td>Enter</td>
<td></td>
<td>下一个（播放列表中）</td>
</tr>
<tr>
<td>l</td>
<td></td>
<td>设定/清除 A-B循环点</td>
</tr>
<tr>
<td>L</td>
<td></td>
<td>循环播放</td>
</tr>
<tr>
<td>s</td>
<td></td>
<td>截屏</td>
</tr>
<tr>
<td>q</td>
<td></td>
<td>停止播放并退出</td>
</tr>
<tr>
<td>Q</td>
<td></td>
<td>保存当前播放进度并退出，播放同样文件从上次保存进度继续播放。</td>
</tr>
</tbody>
</table>
<p><strong>视频控制</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>_(下划线)</td>
<td>循环切换可用视频轨</td>
</tr>
<tr>
<td>A</td>
<td>循环切换视频画面比例</td>
</tr>
<tr>
<td>Alt+0</td>
<td>0.5倍源视频画面大小</td>
</tr>
<tr>
<td>Alt+1</td>
<td>1倍源视频画面大小</td>
</tr>
<tr>
<td>Alt+2</td>
<td>2倍源视频画面大小</td>
</tr>
</tbody>
</table>
<p><strong>音频控制</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th></th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>#</td>
<td></td>
<td>循环切换可用音频轨</td>
</tr>
<tr>
<td>Ctrl +</td>
<td>Ctrl -</td>
<td>音轨延迟+/- 0.1秒</td>
</tr>
</tbody>
</table>
<p><strong>字幕控制</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th></th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>V</td>
<td></td>
<td>关闭/开启字幕</td>
</tr>
<tr>
<td>j</td>
<td>J</td>
<td>循环切换可用字幕轨</td>
</tr>
<tr>
<td>x</td>
<td>z</td>
<td>字幕延迟 +/- 0.1秒</td>
</tr>
<tr>
<td>r</td>
<td>t</td>
<td>上移/下移字幕位置</td>
</tr>
</tbody>
</table>
<p><strong>窗口控制</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>T</td>
<td>窗口始终置顶</td>
</tr>
<tr>
<td>f</td>
<td>进入/退出全屏</td>
</tr>
<tr>
<td>ESC</td>
<td>退出全屏</td>
</tr>
</tbody>
</table>
<h4 id="配置httpshooke007githubiompv-lazympvhtml"><a href="https://hooke007.github.io/mpv-lazy/mpv.html">配置</a><a hidden class="anchor" aria-hidden="true" href="#配置httpshooke007githubiompv-lazympvhtml">#</a></h4>
<p>因为mpv本身不具有图形化前端，绝大多数的设置选项都是靠在主设置文件 <code>~/.config/mpv/mpv.conf</code> 中输入参数实现的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## 部分选项之间有关联作用，MPV读取参数时由上往下读，所以注意书写通用参数的顺序，可查看手册[02]的顺序逻辑部分的错误示范</span>

<span style="color:#75715e">## 基础 ##</span>

<span style="color:#75715e"># 视频硬件解码API选择</span>
<span style="color:#75715e"># 因系统环境、显卡、驱动等差异硬件解码API方式（阅读官方参考手册查询）各有不同，建议实际测试验证后再填入可用API。</span>
<span style="color:#75715e"># 默认值为 no（使用软件解码），auto 为自动。</span>
hwdec<span style="color:#f92672">=</span>auto                       

<span style="color:#75715e"># 尽可能所有格式先尝试上面指定视频硬件解码API</span>
<span style="color:#75715e">#hwdec-codecs=all </span>

<span style="color:#75715e"># 输出log，</span>
<span style="color:#75715e"># ~~/ 意思是 mpv config dir(for example ~/.config/mpv/)</span>
log-file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~~/mpv.log&#34;</span>                             

<span style="color:#75715e">## 功能 ##</span>

<span style="color:#75715e"># --fs 等效 --fullscreen。运行MPV自动进入全屏</span>
<span style="color:#75715e">#fs=yes    </span>

<span style="color:#75715e"># 默认为系统原生窗口界面，启用此项使用无边框界面</span>
<span style="color:#75715e">#border=no</span>

<span style="color:#75715e"># 窗口置顶</span>
<span style="color:#75715e">#ontop=yes         </span>

<span style="color:#75715e"># 窗口模式下最大占屏幕的百分比</span>
<span style="color:#75715e"># 例如在FHD屏上打开4k视频初始窗口过大</span>
<span style="color:#75715e">#autofit-larger=80%x80%  </span>

<span style="color:#75715e"># 窗口模式下最小占屏幕的百分比</span>
<span style="color:#75715e"># 例如在4k屏上打开720p视频初始窗口过小</span>
<span style="color:#75715e">#autofit-smaller=50%x50%     </span>

<span style="color:#75715e"># 默认yes，默认情况下MPV的窗口比例锁定为视频比例。启用此项以实现窗口自由拉伸行为</span>
<span style="color:#75715e"># 当 keepaspect=yes 时四周填充黑边</span>
<span style="color:#75715e"># keepaspect-window=no          </span>

<span style="color:#75715e"># 以暂停状态启动播放器</span>
<span style="color:#75715e">#pause=yes      </span>

<span style="color:#75715e"># 始终循环播放当前文件&lt;N|inf|no&gt;</span>
<span style="color:#75715e">#loop=inf    </span>

<span style="color:#75715e"># 播放列表循环&lt;N|inf|force|no&gt;</span>
<span style="color:#75715e">#loop-playlist=no  </span>

<span style="color:#75715e"># 默认情况下播完列表所有文件MPV自动关闭，设置为 yes 所有播放完毕不退出，设置为 always 可以实现类似“每个文件播完都暂停”的效果&lt;yes|默认no|always&gt; </span>
keep-open<span style="color:#f92672">=</span>yes         

<span style="color:#75715e"># 退出时记住播放状态。缓存目录默认在设置文件夹中的 &#34;watch_later&#34;</span>
save-position-on-quit<span style="color:#f92672">=</span>yes

<span style="color:#75715e"># 播放网络视频时的向后缓存大小（KiB或MiB）</span>
demuxer-max-bytes<span style="color:#f92672">=</span>20MiB      

<span style="color:#75715e">## OSD ##</span>
<span style="color:#75715e">## OSD 即 On-Screen-Display ，通常为屏幕上弹出显示的信息。 </span>
<span style="color:#75715e">## OSC 即 on-screen-controller ，MPV中指的是简易操控界面</span>

<span style="color:#75715e"># &lt;no,bar,msg,msg-bar&gt; 在跳转时间轴时显示的信息类型</span>
osd-on-seek<span style="color:#f92672">=</span>msg-bar     

<span style="color:#75715e"># 更改OSD字体大小（全局，影响多个功能显示的文本）（默认值：55）</span>
<span style="color:#75715e">#osd-font-size=40  </span>

<span style="color:#75715e"># 以秒为单位显示OSD时间（毫秒精度），有助于查看视频帧的确切时间戳</span>
osd-fractions<span style="color:#f92672">=</span>yes  

 <span style="color:#75715e"># 开始播放时短暂显示的信息：文件名</span>
osd-playing-msg<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>filename<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>

<span style="color:#75715e"># 设置OSD文本信息的持续时间（毫秒）（默认值：1000）</span>
osd-duration<span style="color:#f92672">=</span><span style="color:#ae81ff">2000</span> 

<span style="color:#75715e">## 音频 ##</span>

<span style="color:#75715e"># 最大音量。默认值130（130的响度约为100的两倍）&lt;100.0-1000.0&gt;</span>
volume-max<span style="color:#f92672">=</span><span style="color:#ae81ff">120</span>  

<span style="color:#75715e"># 播放器启动音量。0为静音，默认100</span>
<span style="color:#75715e">#volume=100 </span>

<span style="color:#75715e"># 自动加载同名外挂音轨（fuzzy为模糊名，exact为精确名）&lt;默认no|exact|fuzzy|all&gt; </span>
audio-file-auto<span style="color:#f92672">=</span>fuzzy  

<span style="color:#75715e">## 视频 ##</span>

<span style="color:#75715e"># 如果做过专业校色应开启（系统目录存在对应的icm校色文档）。未做校色的广色域屏应手动指定 --target-prim=&lt;value&gt;</span>
<span style="color:#75715e">#icc-profile-auto=yes </span>

<span style="color:#75715e">## 脚本 滤镜 着色器 ##</span>
<span style="color:#75715e">## 内置脚本开关（如果没有必要的目的，那就不要屏蔽mpv内建的功能</span>

<span style="color:#75715e"># 控制台</span>
<span style="color:#75715e">#load-osd-console=no</span>

<span style="color:#75715e"># 统计信息</span>
<span style="color:#75715e">#load-stats-overlay=no  </span>

<span style="color:#75715e">## 字幕 ##</span>

<span style="color:#75715e"># 自动加载当前播放文件的同名外挂字幕</span>
sub-auto<span style="color:#f92672">=</span>fuzzy 

<span style="color:#75715e"># 在指定的额外目录中寻找匹配的字幕，支持相对和绝对路径。</span>
<span style="color:#75715e"># 示例即自动搜索当前文件路径下名为&#34;sub&#34;,&#34;subtitles&#34;,&#34;字幕&#34;和C盘的&#34;字幕库&#34;文件夹内</span>
<span style="color:#75715e">#sub-file-paths=sub;subtitles;字幕;C:/字幕库</span>

<span style="color:#75715e"># 字幕首选语言为中文，但MPV优先加载外挂轨道，此项参数可能实际用处不大</span>
slang<span style="color:#f92672">=</span>chs,sc,zh,chi,zho

<span style="color:#75715e"># 在插值和颜色管理之前，将字幕混合到视频帧上&lt;yes|video|默认no&gt;。值video类似于yes，但是以视频的原始分辨率绘制字幕，并与视频一起缩放</span>
<span style="color:#75715e"># 启用此功能会将字幕限制在视频的可见部分（不能出现在视频下方的黑色空白处）</span>
<span style="color:#75715e"># 还会让字幕受 --icc-profile --target-prim --target-trc --interpolation --gamma-factor --glsl-shaders 的影响   # 与 --interpolation 一起使用时，可提高字幕渲染性能  </span>
<span style="color:#75715e">#blend-subtitles=video </span>

<span style="color:#75715e"># [当 --blend-subtitles=yes/video 时无效] 使ASS字幕尽可能输出在黑边上</span>
sub-ass-force-margins<span style="color:#f92672">=</span>yes  

<span style="color:#75715e">## 截图 ##</span>
<span style="color:#75715e">## 以下预设参数只是为了截取最高质量的图片（高质量截图处理效率较低）</span>

<span style="color:#75715e"># &lt;默认 jpg|png|webp&gt;</span>
screenshot-format<span style="color:#f92672">=</span>png  

<span style="color:#75715e"># JPEG的最高质量，默认为90&lt;0-100&gt; </span>
<span style="color:#75715e">#screenshot-jpeg-quality=100 </span>

<span style="color:#75715e"># 用与源视频相同的色度半采样写入JPEG，默认yes</span>
<span style="color:#75715e">#screenshot-jpeg-source-chroma=yes  </span>

<span style="color:#75715e"># PNG压缩等级，过高的等级影响性能，默认为7&lt;0-9&gt; </span>
<span style="color:#75715e">#screenshot-png-compression=5  </span>

<span style="color:#75715e"># PNG的压缩过滤器。默认5即可实现最佳压缩率&lt;0-5&gt; </span>
<span style="color:#75715e">#screenshot-png-filter=5   </span>

<span style="color:#75715e"># 使用适当的色彩空间标记屏幕截图（并非所有格式受支持）默认no</span>
<span style="color:#75715e">#screenshot-tag-colorspace=yes  </span>

<span style="color:#75715e"># 主要影响PNG，尽可能使用和视频输出时相同的位深，默认yes</span>
<span style="color:#75715e">#screenshot-high-bit-depth=yes</span>

<span style="color:#75715e"># 若直接在模板中设置路径，此时无需 --screenshot-directory</span>
screenshot-template<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MPV-%P-N%n&#34;</span>

<span style="color:#75715e"># 截屏文件保存路径</span>
<span style="color:#75715e"># ~/ 意思是 user home directory root (similar to shell, $HOME)</span>
screenshot-directory<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/Pictures&#34;</span>
</code></pre></div><h3 id="vlchttpswwwvideolanorg"><a href="https://www.videolan.org/">VLC</a><a hidden class="anchor" aria-hidden="true" href="#vlchttpswwwvideolanorg">#</a></h3>
<p>VLC is a free and open source cross-platform multimedia player and framework that plays most multimedia files, and various streaming protocols.</p>
<p><a href="https://www.videolan.org/vlc/skins.html?sort=date_added"><strong>Skins</strong></a></p>
<ul>
<li>Put the downloaded VLT files in the following folder: <code>~/.local/share/vlc/skins2</code></li>
<li>Then open your VLC settings and change your interface from native to skins ( Tools =&gt; Performances =&gt; Interface =&gt; Use custom skin =&gt; Skin resource file =&gt; Save ). You can choose your desired skin already there or change it when you are in the skins mode by rightclicking somewhere on the skin and going to <em>Interface&gt;Choose Skin</em>.</li>
<li>VLC needs to be restarted to change to skins mode.</li>
</ul>
<p>这些主题好像只支持英文。</p>
<h4 id="smplayerhttpswwwsmplayerinfo"><a href="https://www.smplayer.info/">SMPlayer</a><a hidden class="anchor" aria-hidden="true" href="#smplayerhttpswwwsmplayerinfo">#</a></h4>
<p>多媒体播放器</p>
<h2 id="download">Download<a hidden class="anchor" aria-hidden="true" href="#download">#</a></h2>
<h3 id="aria2httpsaria2githubio"><a href="https://aria2.github.io/">Aria2</a><a hidden class="anchor" aria-hidden="true" href="#aria2httpsaria2githubio">#</a></h3>
<p>Aria2是一款开源下载工具，可帮助简化不同设备和服务器之间的下载过程。它支持磁力链接、BT种子、http等类型的文件下载，与迅雷相比，Aria2有着优秀的性能及较低的资源占用，架构本身非常轻巧，通常只需要4兆字节（HTTP下载）到9兆字节（用于BitTorrent交互）之间。最重要的一点是Aria2完全免费！</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install aria2
</code></pre></div><p>下载安装完成之后，可以通过输入 <code>aria2c -v</code> 来验证是否安装成功。</p>
<h4 id="usage">Usage<a hidden class="anchor" aria-hidden="true" href="#usage">#</a></h4>
<p><strong>命令行使用</strong></p>
<p>使用Aria2下载文件，只需在命令后附加地址即可：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c URL
</code></pre></div><p>下载后以其他名称保存文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c -o fileName URL
</code></pre></div><p>下载多个文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c -Z URL URL
</code></pre></div><p>从列表下载文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c -i URLs.txt
</code></pre></div><p>限制下载速度：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 单个文件</span>
aria2c –max-download-limit<span style="color:#f92672">=</span>500k URL
<span style="color:#75715e"># 全局</span>
aria2c –max-overall-download-limit<span style="color:#f92672">=</span>500k URL 
</code></pre></div><p>断点续传：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c -c URL
</code></pre></div><p>下载磁力链接文件：要下载磁力链接文件，如果下载没有速度，可以添加<code>--bt-tracker=</code>选项，tracker 中用 <code>,</code> 隔开：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c --bt-tracker<span style="color:#f92672">=</span>tracker,tracker torrent
</code></pre></div><p>tracker 服务器：</p>
<ul>
<li>
<p><a href="https://github.com/ngosang/trackerslist">trackerslist</a>：trackers_best (20 trackers) =&gt; <a href="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best.txt">link</a> / <a href="https://ngosang.github.io/trackerslist/trackers_best.txt">mirror</a> / <a href="https://cdn.jsdelivr.net/gh/ngosang/trackerslist@master/trackers_best.txt">mirror 2</a></p>
</li>
<li>
<p><a href="https://github.com/XIU2/TrackersListCollection">TrackersListCollection</a>：BEST Tracker list (78 trackers)=&gt; <a href="https://trackerslist.com/best.txt">link</a> / <a href="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/best.txt">mirror</a></p>
</li>
<li>
<p><a href="https://gitee.com/harvey520/www.yaozuopan.top/raw/master/blacklist.txt">中国可用的 BT Tracker 服务器列表</a></p>
</li>
<li>
<p>将多行文本转换成一行并用逗号隔开</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat tracker | xargs | tr <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#e6db74">&#39;,&#39;</span>
</code></pre></div></li>
</ul>
<p>分段下载：可以加快文件的下载速度，对于下载大文件时特别有用，<code>-s</code> 后面的参数值介于1~5之间，你可以根据实际情况选择。下面命令将使用2连接来下载该文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c -s <span style="color:#ae81ff">2</span> URL
</code></pre></div><p>后台下载：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c -D url
$ aria2c –deamon<span style="color:#f92672">=</span>true url
</code></pre></div><p>验证文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c –checksum<span style="color:#f92672">=</span>md5<span style="color:#f92672">=</span>提供的md5
</code></pre></div><p>设置dht端口：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c –dht-listen-port<span style="color:#f92672">=</span><span style="color:#ae81ff">1234</span> torrent
</code></pre></div><p>下载需要引用页的文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c –referer<span style="color:#f92672">=</span>referurl URL
</code></pre></div><p>下载需要Cookie验证的文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c –essay-header<span style="color:#f92672">=</span>’Cookie:key<span style="color:#f92672">=</span>value’ URL
$ aria2c –load-cookies<span style="color:#f92672">=</span>cookie文件 URL
</code></pre></div><p>从密码保护的网站下载一个文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c --http-user<span style="color:#f92672">=</span>xxx --http-password<span style="color:#f92672">=</span>xxx URL
$ aria2c --ftp-user<span style="color:#f92672">=</span>xxx --ftp-password<span style="color:#f92672">=</span>xxx URL
</code></pre></div><p>注意：当源地址存在诸如&amp;,*等shell的特殊字符，请使用单引号或双引号把URI包含起来。</p>
<p><strong>代理</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/usr/bin/aria2c --conf-path<span style="color:#f92672">=</span>/path/of/aria2.conf --<span style="color:#f92672">{</span>http,https,ftp,all<span style="color:#f92672">}</span>-proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[http://][USER:PASSWORD@]HOST[:PORT]&#34;</span>
</code></pre></div><p>例如</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ /usr/bin/aria2c --conf-path<span style="color:#f92672">=</span>/home/kurome/.aria2/aria2.conf --http-proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://127.0.0.1:7890&#34;</span>
</code></pre></div><p>覆盖先前定义的代理, 使用 <code>&quot;&quot;</code>，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/usr/bin/aria2c --conf-path<span style="color:#f92672">=</span>/path/of/aria2.conf --all-proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</code></pre></div><p><strong>RPC Server 模式</strong></p>
<p>该模式可以配合 Web UI 进行图形管理。默认启动是 6800 端口，怕别人盗用，可以设置用户名和密码(1.18.4以上版本支持密钥)。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aria2c --enable-rpc --rpc-listen-all --rpc-allow-origin-all -c  --dir ~/Download
</code></pre></div><h4 id="configurationhttparia2ccomusagehtml"><a href="http://aria2c.com/usage.html">Configuration</a><a hidden class="anchor" aria-hidden="true" href="#configurationhttparia2ccomusagehtml">#</a></h4>
<p>默认情况下，aria2 检查旧路径 <code>$HOME/.aria2/aria2.conf</code> 是否存在，否则它会将 <code>$XDG_CONFIG_HOME/aria2/aria2.conf</code> 解析为它的配置文件。 您可以使用 <code>--conf-path</code> 选项指定配置文件的路径。 如果您不想使用配置文件，请使用 <code>--no-conf</code> 选项。</p>
<p><a href="http://www.senra.me/aria2-conf-file-parameters-translation-and-explanation/">配置详解</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Description: Awesome Aria2 configuration file</span>
<span style="color:#75715e"># Version: 2021.09.15</span>

<span style="color:#75715e">## &#39;#&#39;开头为注释内容, 选项都有相应的注释说明, 根据需要修改 ##</span>
<span style="color:#75715e">## 被注释的选项填写的是默认值, 如为空则无默认设置，请自行选取需要更改的添加到你的配置文件中 ##</span>

<span style="color:#75715e">## 文件保存设置 ##</span>

<span style="color:#75715e"># 下载路径(可使用绝对路径或相对路径), 默认: 当前启动位置</span>
<span style="color:#75715e">#dir=</span>
dir<span style="color:#f92672">=</span>/home/kurome/Downloads

<span style="color:#75715e"># 磁盘缓存</span>
<span style="color:#75715e"># 启用磁盘缓存. 如果设置为 0, 将禁用磁盘缓存. 此功能将下载的数据缓存在内存中, 最多占用此选项设置的字节数. 缓存存储由 aria2 实例创建并对所有下载共享. 由于数据以较大的单位写入并按文件的偏移重新排序, 所以磁盘缓存的一个优点是减少磁盘的 I/O. 如果调用哈希检查时并且数据缓存在内存中时, 将不需要从磁盘中读取. 大小可以包含 K 或 M (1K = 1024, 1M = 1024K).</span>
disk-cache<span style="color:#f92672">=</span>64M

<span style="color:#75715e"># 文件预分配方式, 可选：none, prealloc, trunc, falloc, 默认:prealloc</span>
<span style="color:#75715e"># 预分配对于机械硬盘可有效降低磁盘碎片、提升磁盘读写性能、延长磁盘寿命。</span>
<span style="color:#75715e"># 机械硬盘使用 ext4（具有扩展支持），btrfs，xfs 或 NTFS（仅 MinGW 编译版本）等文件系统建议设置为 falloc</span>
<span style="color:#75715e"># 若无法下载，提示 fallocate failed.cause：Operation not supported 则说明不支持，请设置为 none</span>
<span style="color:#75715e"># prealloc 分配速度慢, trunc 无实际作用，不推荐使用。</span>
<span style="color:#75715e"># 固态硬盘不需要预分配，只建议设置为 none ，否则可能会导致双倍文件大小的数据写入，从而影响寿命。</span>
file-allocation<span style="color:#f92672">=</span>none

<span style="color:#75715e"># 文件分配限制</span>
<span style="color:#75715e"># 不对比此参数设置大小小的分配文件. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K).</span>
no-file-allocation-limit<span style="color:#f92672">=</span>64M

<span style="color:#75715e"># 断点续传</span>
<span style="color:#75715e"># 继续下载部分完成的文件. 启用此选项可以继续下载从浏览器或其他程序按顺序下载的文件. 此选项目前只支持 HTTP(S)/FTP 下载的文件.</span>
<span style="color:#66d9ef">continue</span><span style="color:#f92672">=</span>true

<span style="color:#75715e"># 始终断点续传</span>
<span style="color:#75715e"># 始终断点续传. 如果设置为&#34;是&#34;, aria2 始终尝试断点续传, 如果无法恢复, 则中止下载. 如果设置为&#34;否&#34;, 对于不支持断点续传的 URI 或 aria2 遇到 N 个不支持断点续传的 URI (N 为 --max-resume-failure-tries 选项设置的值), aria2 会从头下载文件. 参见 --max-resume-failure-tries 参数.</span>
always-resume<span style="color:#f92672">=</span>false

<span style="color:#75715e"># 最大断点续传尝试次数</span>
<span style="color:#75715e"># 当 --always-resume 选项设置为&#34;否&#34;时, 如果 aria2 检测到有 N 个 URI 不支持断点续传时, 将从头开始下载文件. 如果 N 设置为 0, 当所有 URI 都不支持断点续传时才会从头下载文件. 参见 --always-resume 选项.</span>
max-resume-failure-tries<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e"># 获取服务器文件时间</span>
<span style="color:#75715e"># 从 HTTP/FTP 服务获取远程文件的时间戳, 如果可用将设置到本地文件</span>
remote-time<span style="color:#f92672">=</span>true

<span style="color:#75715e">## 进度保存设置 ##</span>

<span style="color:#75715e"># 从会话文件中读取下载任务</span>
input-file<span style="color:#f92672">=</span>/home/kurome/.aria2/aria2.session

<span style="color:#75715e"># 会话文件保存路径</span>
<span style="color:#75715e"># 当退出时保存错误及未完成的任务到指定的文件中. 必须用绝对路径</span>
<span style="color:#75715e"># 您可以在重启 aria2 时使用 --input-file 选项重新加载. 如果您希望输出的内容使用 GZip 压缩, 您可以在文件名后增加 .gz 扩展名. 请注意, 通过 aria2.addTorrent() 和 aria2.addMetalink() RPC 方法添加的下载, 其元数据没有保存到文件的将不会保存. 通过 aria2.remove() 和 aria2.forceRemove() 删除的下载将不会保存.</span>
<span style="color:#75715e">#save-session=</span>
save-session<span style="color:#f92672">=</span>/home/kurome/.aria2/aria2.session

<span style="color:#75715e"># 任务状态改变后保存会话的间隔时间（秒）, 0 为仅在进程正常退出时保存, 默认:0</span>
<span style="color:#75715e"># 为了及时保存任务状态、防止任务丢失，此项值只建议设置为 1</span>
save-session-interval<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>

<span style="color:#75715e"># 自动保存任务进度到控制文件(*.aria2)的间隔时间（秒），0 为仅在进程正常退出时保存，默认：60</span>
<span style="color:#75715e"># 不论设置的值为多少, aria2 会在任务结束时保存控制文件. 可以设置的值为 0 到 600.</span>
<span style="color:#75715e"># 此项值也会间接影响从内存中把缓存的数据写入磁盘的频率</span>
<span style="color:#75715e"># 想降低磁盘 IOPS (每秒读写次数)则提高间隔时间</span>
<span style="color:#75715e"># 想在意外非正常退出时尽量保存更多的下载进度则降低间隔时间</span>
<span style="color:#75715e"># 非正常退出：进程崩溃、系统崩溃、SIGKILL 信号、设备断电等</span>
auto-save-interval<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>

<span style="color:#75715e"># 强制保存，即使任务已完成也保存信息到会话文件, 默认:false</span>
<span style="color:#75715e"># 即使任务完成或删除时使用 --save-session 选项时也保存该任务. 此选项在这种情况下还会保存控制文件. 此选项可以保存被认为已经完成但正在做种的 BT 任务.</span>
<span style="color:#75715e"># 开启后会在任务完成后保留 .aria2 文件，文件被移除且任务存在的情况下重启后会重新下载。</span>
<span style="color:#75715e"># 关闭后已完成的任务列表会在重启后清空。</span>
force-save<span style="color:#f92672">=</span>false


<span style="color:#75715e">## 下载连接设置 ##</span>

<span style="color:#75715e"># 文件未找到重试次数</span>
<span style="color:#75715e"># 如果 aria2 从远程 HTTP/FTP 服务器收到 &#34;文件未找到&#34; 的状态超过此选项设置的次数后下载将会失败. 设置为 0 将会禁用此选项. 此选项仅影响 HTTP/FTP 服务器. 重试时同时会记录重试次数, 所以也需要设置 --max-tries 这个选项.</span>
max-file-not-found<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>

<span style="color:#75715e"># 最大尝试次数</span>
<span style="color:#75715e"># 设置最大尝试次数. 0 表示不限制，默认:5</span>
max-tries<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e"># 重试等待时间, 默认:0 (禁用)</span>
<span style="color:#75715e"># 设置重试间隔时间(秒). 当此选项的值大于 0 时, aria2 在 HTTP 服务器返回 503 响应时将会重试.</span>
retry-wait<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>

<span style="color:#75715e"># 连接超时时间</span>
<span style="color:#75715e"># 设置建立 HTTP/FTP/代理服务器 连接的超时时间(秒). 当连接建立后, 此选项不再生效, 请使用 --timeout 选项.</span>
connect-timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>

<span style="color:#75715e"># 超时时间。默认：60</span>
timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>

<span style="color:#75715e"># 最大同时下载任务数, 运行时可修改, 默认:5</span>
max-concurrent-downloads<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>

<span style="color:#75715e"># 单服务器最大连接线程数, 任务添加时可指定, 默认:1</span>
<span style="color:#75715e"># 最大值为 16 (增强版无限制), 且受限于单任务最大连接线程数(split)所设定的值。</span>
max-connection-per-server<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>

<span style="color:#75715e"># 单任务最大连接线程数, 任务添加时可指定, 默认:5</span>
<span style="color:#75715e"># 下载时使用 N 个连接. 如果提供超过 N 个 URI 地址, 则使用前 N 个地址, 剩余的地址将作为备用. 如果提供的 URI 地址不足 N 个, 这些地址多次使用以保证同时建立 N 个连接. 同一服务器的连接数会被 --max-connection-per-server 选项限制.</span>
split<span style="color:#f92672">=</span><span style="color:#ae81ff">64</span>

<span style="color:#75715e"># 文件最小分段大小, 添加时可指定, 默认:20M</span>
<span style="color:#75715e"># aria2 不会分割小于 2*SIZE 字节的文件. 例如, 文件大小为 20MB, 如果 SIZE 为 10M, aria2 会把文件分成 2 段 [0-10MB) 和 [10MB-20MB), 并且使用 2 个源进行下载 (如果 --split &gt;= 2). 如果 SIZE 为 15M, 由于 2*15M &gt; 20MB, 因此 aria2 不会分割文件并使用 1 个源进行下载. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). 可以设置的值为: 1M-1024M.</span>
<span style="color:#75715e"># 理论上值越小使用下载分段就越多，所能获得的实际线程数就越大，下载速度就越快，但受限于所下载文件服务器的策略。</span>
min-split-size<span style="color:#f92672">=</span>4M

<span style="color:#75715e"># 文件分片大小，最小值为 1M，默认：1M</span>
<span style="color:#75715e"># 设置 HTTP/FTP 下载的分配大小. aria2 根据这个边界分割文件. 所有的分割都是这个长度的倍数. 此选项不适用于 BitTorrent 下载. 如果 Metalink 文件中包含分片哈希的结果此选项也不适用.</span>
piece-length<span style="color:#f92672">=</span>1M

<span style="color:#75715e"># 允许分片大小变化。默认：false</span>
<span style="color:#75715e"># 如果设置为&#34;否&#34;, 当分片长度与控制文件中的不同时, aria2 将会中止下载. 如果设置为&#34;是&#34;, 您可以继续, 但部分下载进度将会丢失.</span>
allow-piece-length-change<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 分片选择算法</span>
<span style="color:#75715e"># 指定 HTTP/FTP 下载使用的分片选择算法. 分片表示的是并行下载时固定长度的分隔段. 如果设置为&#34;默认&#34;, aria2 将会按减少建立连接数选择分片. 由于建立连接操作的成本较高, 因此这是合理的默认行为. 如果设置为&#34;顺序&#34;, aria2 将选择索引最小的分片. 索引为 0 时表示为文件的第一个分片. 这将有助于视频的边下边播. --enable-http-pipelining 选项有助于减少重连接的开销. 请注意, aria2 依赖于 --min-split-size 选项, 所以有必要对 --min-split-size 选项设置一个合理的值. 如果设置为&#34;随机&#34;, aria2 将随机选择一个分片. 就像&#34;顺序&#34;一样, 依赖于 --min-split-size 选项. 如果设置为&#34;几何&#34;, aria2 会先选择索引最小的分片, 然后会为之前选择的分片保留指数增长的空间. 这将减少建立连接的次数, 同时文件开始部分将会先行下载. 这也有助于视频的边下边播.</span>
<span style="color:#75715e">#stream-piece-selector=default</span>

<span style="color:#75715e"># 最小速度限制</span>
<span style="color:#75715e"># 当下载速度低于此选项设置的值(B/s) 时将会关闭连接. 0 表示不设置最小速度限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K). 此选项不会影响 BT 下载.</span>
lowest-speed-limit<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e"># 全局最大下载速度</span>
<span style="color:#75715e"># 设置全局最大下载速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K).</span>
max-overall-download-limit<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e"># 最大下载速度</span>
<span style="color:#75715e"># 设置每个任务的最大下载速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K).</span>
max-download-limit<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e"># 禁用 IPv6, 默认:false</span>
disable-ipv6<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 支持 GZip</span>
<span style="color:#75715e"># 如果远程服务器的响应头中包含 Content-Encoding: gzip 或 Content-Encoding: deflate , 将发送包含 Accept: deflate, gzip 的请求头并解压缩响应.</span>
http-accept-gzip<span style="color:#f92672">=</span>true

<span style="color:#75715e"># URI 复用</span>
<span style="color:#75715e"># 当所有给定的 URI 地址都已使用, 继续使用已经使用过的 URI 地址.</span>
reuse-uri<span style="color:#f92672">=</span>false

<span style="color:#75715e"># URI 选择算法</span>
<span style="color:#75715e"># 指定 URI 选择的算法. 可选的值包括 &#34;按顺序&#34;, &#34;反馈&#34; 和 &#34;自适应&#34;. 如果设置为&#34;按顺序&#34;, URI 将按列表中出现的顺序使用. 如果设置为&#34;反馈&#34;, aria2 将根据之前的下载速度选择 URI 列表中下载速度最快的服务器. 同时也将有效跳过无效镜像. 之前统计的下载速度将作为服务器状态文件的一部分, 参见 --server-stat-of 和 --server-stat-if 选项. 如果设置为&#34;自适应&#34;, 将从最好的镜像和保留的连接里选择一项. 补充说明, 其返回的镜像没有被测试过, 同时如果每个镜像都已经被测试过时, 返回的镜像还会被重新测试. 否则, 其将不会选择其他镜像. 例如&#34;反馈&#34;, 其使用服务器状态文件.</span>
<span style="color:#75715e">#uri-selector=feedback</span>

<span style="color:#75715e"># 禁用 netrc，默认:false</span>
no-netrc<span style="color:#f92672">=</span>true

<span style="color:#75715e"># .netrc 文件路径</span>
<span style="color:#75715e">#netrc-path=$(HOME)/.netrc</span>

<span style="color:#75715e"># 允许覆盖</span>
<span style="color:#75715e"># 如果相应的控制文件不存在时从头重新下载文件. 参见 --auto-file-renaming 选项.</span>
allow-overwrite<span style="color:#f92672">=</span>false

<span style="color:#75715e"># 文件自动重命名。默认:true</span>
<span style="color:#75715e"># 重新命名已经存在的文件. 此选项仅对 HTTP(S)/FTP 下载有效. 新的文件名后会在文件名后、扩展名 (如果有) 前追加句点和数字(1..9999).</span>
auto-file-renaming<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 使用 UTF-8 处理 Content-Disposition，默认:false</span>
<span style="color:#75715e"># 处理 &#34;Content-Disposition&#34; 头中的字符串时使用 UTF-8 字符集来代替 ISO-8859-1, 例如, 文件名参数, 但不是扩展版本的文件名.</span>
content-disposition-default-utf8<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 最低 TLS 版本，可选：TLSv1.1、TLSv1.2、TLSv1.3 默认:TLSv1.2</span>
<span style="color:#75715e">#min-tls-version=TLSv1.2</span>


<span style="color:#75715e">## BT/PT 下载设置 ##</span>

<span style="color:#75715e"># BT 监听端口(TCP), 默认:6881-6999</span>
<span style="color:#75715e"># 设置 BT 下载的 TCP 端口. 多个端口可以使用逗号 &#34;,&#34; 分隔, 例如: 6881,6885. 您还可以使用短横线 &#34;-&#34; 表示范围: 6881-6999, 或可以一起使用: 6881-6889, 6999.</span>
<span style="color:#75715e"># 直通外网的设备，比如 VPS ，务必配置防火墙和安全组策略允许此端口入站</span>
<span style="color:#75715e"># 内网环境的设备，比如 NAS ，除了防火墙设置，还需在路由器设置外网端口转发到此端口</span>
listen-port<span style="color:#f92672">=</span><span style="color:#ae81ff">51413</span>

<span style="color:#75715e"># DHT 网络与 UDP tracker 监听端口(UDP), 默认:6881-6999</span>
<span style="color:#75715e"># 设置 DHT (IPv4, IPv6) 和 UDP 服务器使用的 UCP 端口. 多个端口可以使用逗号 &#34;,&#34; 分隔, 例如: 6881,6885. 您还可以使用短横线 &#34;-&#34; 表示范围: 6881-6999, 或可以一起使用: 6881-6889, 6999.</span>
<span style="color:#75715e"># 因协议不同，可以与 BT 监听端口使用相同的端口，方便配置防火墙和端口转发策略。</span>
dht-listen-port<span style="color:#f92672">=</span><span style="color:#ae81ff">51413</span>

<span style="color:#75715e"># 启用 DHT (IPv4), 默认:true</span>
<span style="color:#75715e"># 启用 IPv4 DHT 功能. 此选项同时会启用 UDP 服务器支持. PT 下载(私有种子)会自动禁用</span>
enable-dht<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 启用 DHT (IPv6)，默认:false</span>
<span style="color:#75715e"># 启用 IPv6 DHT 功能. 如果种子设置为私有, 即使此选项设置为&#34;是&#34;, aria2 也不会启用 DHT. 使用 --dht-listen-port 选项设置监听的端口.</span>
<span style="color:#75715e"># 在没有 IPv6 支持的环境开启可能会导致 DHT 功能异常</span>
enable-dht6<span style="color:#f92672">=</span>false

<span style="color:#75715e"># 外部 IP 地址</span>
<span style="color:#75715e"># 指定用在 BitTorrent 下载和 DHT 中的外部 IP 地址. 它可能被发送到 BitTorrent 服务器. 对于 DHT, 此选项将会报告本地节点正在下载特定的种子. 这对于在私有网络中使用 DHT 非常关键. 虽然这个方法叫外部, 但其可以接受各种类型的 IP 地址.</span>
<span style="color:#75715e"># 使用场景：在家庭宽带没有公网 IP 的情况下可以把 BT 和 DHT 监听端口转发至具有公网 IP 的服务器，在此填写服务器的 IP ，可以提升 BT 下载速率。</span>
<span style="color:#75715e">#bt-external-ip=</span>

<span style="color:#75715e"># DHT (IPv4) 文件，默认：$HOME/.aria2/dht.dat</span>
<span style="color:#75715e"># 修改 IPv4 DHT 路由表文件路径.</span>
dht-file-path<span style="color:#f92672">=</span>/home/kurome/.aria2/dht.dat

<span style="color:#75715e"># DHT (IPv6) 文件，默认：$HOME/.aria2/dht6.dat</span>
<span style="color:#75715e"># 修改 IPv6 DHT 路由表文件路径.</span>
dht-file-path6<span style="color:#f92672">=</span>/home/kurome/.aria2/dht6.dat

<span style="color:#75715e"># IPv4 DHT 网络引导节点</span>
dht-entry-point<span style="color:#f92672">=</span>dht.transmissionbt.com:6881

<span style="color:#75715e"># IPv6 DHT 网络引导节点</span>
dht-entry-point6<span style="color:#f92672">=</span>dht.transmissionbt.com:6881

<span style="color:#75715e"># 启用本地节点发现(LPD),PT 下载(私有种子)会自动禁用,默认:false</span>
bt-enable-lpd<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 指定用于本地节点发现的接口，可能的值：接口，IP地址</span>
<span style="color:#75715e"># 如果未指定此选项，则选择默认接口。</span>
<span style="color:#75715e">#bt-lpd-interface=</span>

<span style="color:#75715e"># 启用节点交换, 默认:true</span>
<span style="color:#75715e"># 启用节点交换扩展. 如果种子设置为私有, 即使此选项设置为&#34;是&#34;, aria2 也不会启用此功能.</span>
enable-peer-exchange<span style="color:#f92672">=</span>true

<span style="color:#75715e"># BT 下载最大连接数（单任务），运行时可修改。0 为不限制，默认:55</span>
<span style="color:#75715e"># 理想情况下连接数越多下载越快，但在实际情况是只有少部分连接到的做种者上传速度快，其余的上传慢或者不上传。</span>
<span style="color:#75715e"># 如果不限制，当下载非常热门的种子或任务数非常多时可能会因连接数过多导致进程崩溃或网络阻塞。</span>
<span style="color:#75715e"># 进程崩溃：如果设备 CPU 性能一般，连接数过多导致 CPU 占用过高，因资源不足 Aria2 进程会强制被终结。</span>
<span style="color:#75715e"># 网络阻塞：在内网环境下，即使下载没有占满带宽也会导致其它设备无法正常上网。因远古低性能路由器的转发性能瓶颈导致。</span>
bt-max-peers<span style="color:#f92672">=</span><span style="color:#ae81ff">128</span>

<span style="color:#75715e"># BT 下载期望速度值（单任务），运行时可修改。单位 K 或 M 。默认:50K</span>
<span style="color:#75715e"># BT 下载速度低于此选项值时会临时提高连接数来获得更快的下载速度，不过前提是有更多的做种者可供连接。</span>
<span style="color:#75715e"># 实测临时提高连接数没有上限，但不会像不做限制一样无限增加，会根据算法进行合理的动态调节。</span>
bt-request-peer-speed-limit<span style="color:#f92672">=</span>10M

<span style="color:#75715e"># 全局最大上传速度, 运行时可修改, 默认:0 (无限制)</span>
<span style="color:#75715e"># 设置全局最大上传速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K).</span>
<span style="color:#75715e"># 设置过低可能影响 BT 下载速度</span>
max-overall-upload-limit<span style="color:#f92672">=</span>2M

<span style="color:#75715e"># 单任务上传速度限制, 默认:0 (无限制)</span>
<span style="color:#75715e"># 设置每个任务的最大上传速度 (字节/秒). 0 表示不限制. 您可以增加数值的单位 K 或 M (1K = 1024, 1M = 1024K).</span>
max-upload-limit<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e"># 最小分享率, 0 为一直做种, 默认:1.0</span>
<span style="color:#75715e"># 指定分享率. 当分享率达到此选项设置的值时会完成做种. 强烈建议您将此选项设置为大于等于 1.0. 如果您想不限制分享比率, 可以设置为 0.0. 如果同时设置了 --seed-time 选项, 当任意一个条件满足时将停止做种.</span>
seed-ratio<span style="color:#f92672">=</span>1.0

<span style="color:#75715e"># 最小做种时间（分钟）</span>
<span style="color:#75715e"># 此选项设置为 0 时, 将在 BT 任务下载完成后不进行做种.</span>
seed-time<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>

<span style="color:#75715e"># 做种前检查文件哈希, 默认:true</span>
<span style="color:#75715e"># 如果设置为&#34;是&#34;, 当使用 --check-integrity 选项完成哈希检查及文件完成后才继续做种. 如果您希望仅当文件损坏或未完成时检查文件, 请设置为&#34;否&#34;. 此选项仅对 BT 下载有效</span>
bt-hash-check-seed<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 继续之前的BT任务时, 无需再次校验, 默认:false</span>
<span style="color:#75715e"># 不检查之前下载文件中每个分片的哈希值.</span>
bt-seed-unverified<span style="color:#f92672">=</span>false

<span style="color:#75715e"># BT tracker 服务器连接超时时间（秒）。默认：60</span>
<span style="color:#75715e"># 建立连接后，此选项无效，将使用 bt-tracker-timeout 选项的值</span>
bt-tracker-connect-timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>

<span style="color:#75715e"># BT tracker 服务器超时时间（秒）。默认：60</span>
bt-tracker-timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>

<span style="color:#75715e"># BT 服务器连接间隔时间。默认：0 (自动)</span>
<span style="color:#75715e"># 设置请求 BT 服务器的间隔时间 (秒). 此选项将完全覆盖服务器返回的最小间隔时间和间隔时间, aria2 仅使用此选项的值.如果设置为 0, aria2 将根据服务器的响应情况和下载进程决定时间间隔.</span>
<span style="color:#75715e">#bt-tracker-interval=0</span>

<span style="color:#75715e"># BT 下载优先下载文件开头或结尾</span>
<span style="color:#75715e"># 尝试先下载每个文件开头或结尾的分片. 此选项有助于预览文件. 参数可以包括两个关键词: head 和 tail. 如果包含两个关键词, 需要使用逗号分隔. 每个关键词可以包含一个参数, SIZE. 例如, 如果指定 head=SIZE, 每个文件的最前 SIZE 数据将会获得更高的优先级. tail=SIZE 表示每个文件的最后 SIZE 数据. SIZE 可以包含 K 或 M (1K = 1024, 1M = 1024K).</span>
bt-prioritize-piece<span style="color:#f92672">=</span>head<span style="color:#f92672">=</span>32M,tail<span style="color:#f92672">=</span>32M

<span style="color:#75715e"># 保存通过 WebUI(RPC) 上传的种子文件(.torrent)，默认:true</span>
<span style="color:#75715e"># 在 dir 选项设置的目录中保存上传的种子文件或 Metalink 文件. 文件名包括 SHA-1 哈希后的元数据和扩展名两部分. 对于种子文件, 扩展名为 &#39;.torrent&#39;. 对于 Metalink 为 &#39;.meta4&#39;. 如果此选项设置为&#34;否&#34;, 通过 aria2.addTorrent() 或 aria2.addMetalink() 方法添加的下载将无法通过 --save-session 选项保存.</span>
<span style="color:#75715e"># 所有涉及种子文件保存的选项都建议开启，不保存种子文件有任务丢失的风险。</span>
<span style="color:#75715e"># 通过 RPC 自定义临时下载目录可能不会保存种子文件。</span>
rpc-save-upload-metadata<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 下载种子文件(.torrent)自动开始下载, 默认:true，可选：false|mem</span>
<span style="color:#75715e"># true：保存种子文件</span>
<span style="color:#75715e"># false：仅下载种子文件</span>
<span style="color:#75715e"># mem：将种子保存在内存中</span>
<span style="color:#75715e"># 如果设置为&#34;是&#34;或&#34;仅内存&#34;, 当后缀为 .torrent 或内容类型为 application/x-bittorrent 的文件下载完成时, aria2 将按种子文件读取并下载该文件中提到的文件. 如果设置为&#34;仅内存&#34;, 该种子文件将不会写入到磁盘中, 而仅会存储在内存中. 如果设置为&#34;否&#34;, 则 .torrent 文件会下载到磁盘中, 但不会按种子文件读取并且其中的文件不会进行下载.</span>
follow-torrent<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 种子文件下载完后暂停任务，默认：false</span>
<span style="color:#75715e"># 在开启 follow-torrent 选项后下载种子文件或磁力会自动开始下载任务进行下载，而同时开启当此选项后会建立相关任务并暂停。</span>
pause-metadata<span style="color:#f92672">=</span>false

<span style="color:#75715e"># 保存磁力链接元数据为种子文件(.torrent), 默认:false</span>
<span style="color:#75715e"># 保存种子文件为 &#34;.torrent&#34; 文件. 此选项仅对磁链生效. 文件名为十六进制编码后的哈希值及 &#34;.torrent&#34;后缀. 保存的目录与下载文件的目录相同. 如果相同的文件已存在, 种子文件将不会保存.</span>
bt-save-metadata<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 加载已保存的元数据文件(.torrent)，默认:false</span>
<span style="color:#75715e"># 当使用磁链下载时, 在从 DHT 获取种子元数据之前, 首先尝试加载使用 --bt-save-metadata 选项保存的文件. 如果文件加载成功, 则不会从 DHT 下载元数据.</span>
bt-load-saved-metadata<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 删除 BT 下载任务中未选择文件，默认:false</span>
<span style="color:#75715e"># 当 BT 任务完成后删除未选择的文件. 要选择需要下载的文件, 请使用 --select-file 选项. 如果没有选择, 则所有文件都默认为需要下载. 此选项会从磁盘上直接删除文件, 请谨慎使用此选项.</span>
bt-remove-unselected-file<span style="color:#f92672">=</span>true

<span style="color:#75715e"># BT强制加密, 默认: false</span>
<span style="color:#75715e"># 启用后将拒绝旧的 BT 握手协议并仅使用混淆握手及加密。可以解决部分运营商对 BT 下载的封锁，且有一定的防版权投诉与迅雷吸血效果。</span>
<span style="color:#75715e"># 此选项相当于后面两个选项(bt-require-crypto=true, bt-min-crypto-level=arc4)的快捷开启方式，但不会修改这两个选项的值。</span>
bt-force-encryption<span style="color:#f92672">=</span>true

<span style="color:#75715e"># BT加密需求，默认：false</span>
<span style="color:#75715e"># 启用后拒绝与旧的 BitTorrent 握手协议(\19BitTorrent protocol)建立连接，始终使用混淆处理握手。</span>
<span style="color:#75715e">#bt-require-crypto=true</span>

<span style="color:#75715e"># BT最低加密等级，可选：plain（明文），arc4（加密），默认：plain</span>
<span style="color:#75715e"># 设置加密方法的最小级别. 如果节点提供多种加密方法, aria2 将选择满足给定级别的最低级别.</span>
<span style="color:#75715e">#bt-min-crypto-level=arc4</span>

<span style="color:#75715e"># 分离仅做种任务，默认：false</span>
<span style="color:#75715e"># 从正在下载的任务中排除已经下载完成且正在做种的任务，并开始等待列表中的下一个任务。</span>
<span style="color:#75715e"># 统计当前活动下载任务(参见 -j 选项) 时排除仅做种的任务. 这意味着, 如果参数设置为 -j3, 此选项打开并且当前有 3 个正在活动的任务, 并且其中有 1 个进入做种模式, 那么其会从正在下载的数量中排除(即数量会变为 2), 在队列中等待的下一个任务将会开始执行. 但要知道, 在 RPC 方法中, 做种的任务仍然被认为是活动的下载任务.</span>
bt-detach-seed-only<span style="color:#f92672">=</span>true

<span style="color:#75715e">## 客户端伪装 ##</span>

<span style="color:#75715e"># 自定义 User Agent</span>
user-agent<span style="color:#f92672">=</span>Mozilla/5.0 <span style="color:#f92672">(</span>Windows NT 10.0; Win64; x64<span style="color:#f92672">)</span> AppleWebKit/537.36 <span style="color:#f92672">(</span>KHTML, like Gecko<span style="color:#f92672">)</span> Chrome/93.0.4577.63 Safari/537.36 Edg/93.0.961.47

<span style="color:#75715e"># BT 客户端伪装</span>
<span style="color:#75715e"># PT 下载需要保持 user-agent 和 peer-agent 两个参数一致</span>
<span style="color:#75715e"># 部分 PT 站对 Aria2 有特殊封禁机制，客户端伪装不一定有效，且有封禁账号的风险。</span>
<span style="color:#75715e"># 自定义 User Agent，默认：aria2/$VERSION</span>
<span style="color:#75715e">#user-agent=Deluge 1.3.15</span>
<span style="color:#75715e"># Peer Agent</span>
<span style="color:#75715e"># 指定 BT 扩展握手期间用于节点客户端版本的字符串.</span>
peer-agent<span style="color:#f92672">=</span>Deluge 1.3.15
<span style="color:#75715e"># 节点 ID 前缀</span>
<span style="color:#75715e"># 指定节点 ID 的前缀. BT 中节点 ID 长度为 20 字节. 如果超过 20 字节, 将仅使用前 20 字节. 如果少于 20 字节, 将在其后不足随机的数据保证为 20 字节.</span>
peer-id-prefix<span style="color:#f92672">=</span>-DE13F0-

<span style="color:#75715e">## 执行额外命令 ##</span>

<span style="color:#75715e"># 下载停止后执行的命令</span>
<span style="color:#75715e"># 从 正在下载 到 删除、错误、完成 时触发。暂停被标记为未开始下载，故与此项无关。</span>
<span style="color:#75715e">#on-download-stop=/home/kurome/.aria2/delete.sh</span>

<span style="color:#75715e"># 下载完成后执行的命令</span>
<span style="color:#75715e"># 此项未定义则执行 下载停止后执行的命令 (on-download-stop)</span>
<span style="color:#75715e">#on-download-complete=/home/kurome/.aria2/clean.sh</span>

<span style="color:#75715e"># 下载错误后执行的命令</span>
<span style="color:#75715e"># 此项未定义则执行 下载停止后执行的命令 (on-download-stop)</span>
<span style="color:#75715e">#on-download-error=</span>

<span style="color:#75715e"># 下载暂停后执行的命令</span>
<span style="color:#75715e">#on-download-pause=</span>

<span style="color:#75715e"># 下载开始后执行的命令</span>
<span style="color:#75715e">#on-download-start=</span>

<span style="color:#75715e"># BT 下载完成后执行的命令</span>
<span style="color:#75715e">#on-bt-download-complete=</span>


<span style="color:#75715e">## RPC 设置 ##</span>

<span style="color:#75715e"># 启用 JSON-RPC/XML-RPC 服务器, 默认:false</span>
enable-rpc<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 接受所有远程请求, 默认:false</span>
<span style="color:#75715e"># 在 RPC 响应头增加 Access-Control-Allow-Origin 字段, 值为 * .web界面跨域权限需要</span>
rpc-allow-origin-all<span style="color:#f92672">=</span>true

<span style="color:#75715e"># 允许外部访问, 默认:false</span>
rpc-listen-all<span style="color:#f92672">=</span>true

<span style="color:#75715e"># RPC 监听端口, 默认:6800</span>
rpc-listen-port<span style="color:#f92672">=</span><span style="color:#ae81ff">6800</span>

<span style="color:#75715e"># RPC 密钥, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span>
rpc-secret<span style="color:#f92672">=</span>SetForYourself

<span style="color:#75715e"># RPC 最大请求大小</span>
<span style="color:#75715e"># 设置 JSON-RPC/XML-RPC 最大的请求大小. 如果 aria2 检测到请求超过设定的字节数, 会直接取消连接.</span>
rpc-max-request-size<span style="color:#f92672">=</span>10M

<span style="color:#75715e"># RPC 服务 SSL/TLS 加密, 默认：false</span>
<span style="color:#75715e"># RPC 将通过 SSL/TLS 加密传输. RPC 客户端需要使用 https 协议连接服务器. 对于 WebSocket 客户端, 使用 wss 协议. 使用 --rpc-certificate 和 --rpc-private-key 选项设置服务器的证书和私钥.</span>
<span style="color:#75715e"># 不推荐开启，建议使用 web server 反向代理，比如 Nginx、Caddy ，灵活性更强。</span>
<span style="color:#75715e">#rpc-secure=</span>

<span style="color:#75715e"># 在 RPC 服务中启用 SSL/TLS 加密时的证书文件,</span>
<span style="color:#75715e"># 使用 PEM 格式时，您必须通过 --rpc-private-key 指定私钥</span>
<span style="color:#75715e">#rpc-certificate=/path/to/certificate.pem</span>

<span style="color:#75715e"># 在 RPC 服务中启用 SSL/TLS 加密时的私钥文件</span>
<span style="color:#75715e">#rpc-private-key=/path/to/certificate.key</span>

<span style="color:#75715e"># 事件轮询方式, 可选：epoll, kqueue, port, poll, select, 不同系统默认值不同</span>
<span style="color:#75715e"># 设置事件轮训的方法. 对于 epoll, kqueue, port 和 poll, 只有系统支持时才可用. 最新的 Linux 支持 epoll. 各种 *BSD 系统包括 Mac OS X 支持 kqueue. Open Solaris 支持 port. 默认值根据您使用的操作系统不同而不同.</span>
<span style="color:#75715e">#event-poll=select</span>

<span style="color:#75715e">## 高级选项 ##</span>

<span style="color:#75715e"># 启用异步 DNS 功能。默认：true</span>
<span style="color:#75715e">#async-dns=true</span>

<span style="color:#75715e"># 指定异步 DNS 服务器列表，未指定则从 /etc/resolv.conf 中读取。</span>
<span style="color:#75715e">#async-dns-server=119.29.29.29,223.5.5.5,8.8.8.8,1.1.1.1</span>

<span style="color:#75715e"># 指定单个网络接口，可能的值：接口，IP地址，主机名</span>
<span style="color:#75715e"># 如果接口具有多个 IP 地址，则建议指定 IP 地址。</span>
<span style="color:#75715e"># 已知指定网络接口会影响依赖本地 RPC 的连接的功能场景，即通过 localhost 和 127.0.0.1 无法与 Aria2 服务端进行讯通。</span>
<span style="color:#75715e">#interface=</span>

<span style="color:#75715e"># 指定多个网络接口，多个值之间使用逗号(,)分隔。</span>
<span style="color:#75715e"># 使用 interface 选项时会忽略此项。</span>
<span style="color:#75715e">#multiple-interface=</span>

<span style="color:#75715e">## 日志设置 ##</span>

<span style="color:#75715e"># 日志文件保存路径，默认：不保存</span>
<span style="color:#75715e"># 如果设置为 &#34;-&#34;, 日志则写入到 stdout. 如果忽略或设置为空字符串(&#34;&#34;), 日志将不会记录到磁盘上.</span>
<span style="color:#75715e">#log=</span>

<span style="color:#75715e"># 日志级别，可选 debug, info, notice, warn, error 。默认：debug</span>
<span style="color:#75715e">#log-level=warn</span>

<span style="color:#75715e"># 控制台日志级别，可选 debug, info, notice, warn, error ，默认：notice</span>
console-log-level<span style="color:#f92672">=</span>notice

<span style="color:#75715e"># 安静模式，禁止在控制台输出日志，默认：false</span>
quiet<span style="color:#f92672">=</span>false

<span style="color:#75715e"># 下载进度摘要输出间隔时间（秒），0 为禁止输出。默认：60</span>
summary-interval<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>

<span style="color:#75715e">## BitTorrent trackers ##</span>

<span style="color:#75715e"># BT 服务器地址 2022/02/26</span>
<span style="color:#75715e"># 逗号分隔的 BT 服务器地址. 如果服务器地址在 --bt-exclude-tracker 选项中, 其将不会生效.</span>
bt-tracker<span style="color:#f92672">=</span>udp://open.tracker.cl:1337/announce,udp://tracker.opentrackr.org:1337/announce,udp://9.rarbg.com:2810/announce,udp://www.torrent.eu.org:451/announce,udp://tracker2.dler.org:80/announce,udp://tracker.torrent.eu.org:451/announce,udp://tracker.moeking.me:6969/announce,udp://tracker.bitsearch.to:1337/announce,udp://tracker.0x.tf:6969/announce,udp://tracker-udp.gbitt.info:80/announce,udp://tr.cili001.com:8070/announce,udp://retracker.lanta-net.ru:2710/announce,udp://open.stealth.si:80/announce,udp://ipv4.tracker.harry.lu:80/announce,udp://explodie.org:6969/announce,udp://exodus.desync.com:6969/announce,udp://bt2.archive.org:6969/announce,udp://bt1.archive.org:6969/announce,https://tracker.nanoha.org:443/announce,https://tracker.lilithraws.org:443/announce
</code></pre></div><p>更多：<a href="https://github.com/P3TERX/aria2.conf">Aria2 完美配置</a></p>
<p><strong>Aria2 Web 控制台</strong></p>
<p>Aira2 没有软件界面，程序员可以用代码执行任务，但普通用户怎样添加下载任务呢？——打开浏览器，输入网址<code>aria2c.com</code>（<a href="https://github.com/binux/yaaw">YAAW</a> 的中文版）就可以打开 Aria2 Web 控制台。</p>
<p><code>JSON-RPC Path</code> 默认为: <code>http://localhost:6800/jsonrpc</code>，如果提示 “Aria2 RPC 服务器错误”，按照以下方法修改：</p>
<ul>
<li>普通情况设置为: <code>http://host:port/jsonrpc</code>
<ul>
<li><code>host</code>: 指运行 Aria2 所在机器的 IP 或者名字</li>
<li><code>port</code>: 使用 <code>--rpc-listen-port</code> 选项设置的端口, 未设置则是 <code>6800</code>；可通过 <code>lsof -i:6800</code> 查看端口是否被占用</li>
</ul>
</li>
<li>使用 <code>--rpc-secret=xxxxxx</code> 选项设置为: <code>http://token:xxxxxx@host:port/jsonrpc</code></li>
<li>使用 <code>--rpc-user=user --rpc-passwd=pwd </code>选项设置为: <code>http://user:pwd@host:port/jsonrpc</code></li>
<li>以上<code>JSON-RPC Path</code> 中的 <code>http</code> 可以用 <code>ws</code> 替代, 代表使用 <code>WebSocket 协议</code>。换用  <code>ws</code>  也可能解决 “Aria2 RPC 服务器错误”。</li>
<li>当使用 <a href="https://aria2c.com/">https://aria2c.com</a> 访问时, 可能需要使用 <code>https</code> 或 <code>wss</code> 协议。</li>
</ul>
<p>在 Web UI  中对 Aria2 的设置会在 Aria2 重启后丢失,，必要的设置请写入配置文件。</p>
<p>已经下载完成的任务会在 Aria2 重启后消失, 除非启用了 <code>--force-save</code> 选项。</p>
<h4 id="自启动">自启动<a hidden class="anchor" aria-hidden="true" href="#自启动">#</a></h4>
<p>两个方案：</p>
<ol>
<li>
<p>建立 desktop 文件放入 <code>~/.config/autostart</code> 中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim ~/.config/autostart/aria2.desktop
<span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>Application
Exec<span style="color:#f92672">=</span>/usr/bin/aria2c --conf-path<span style="color:#f92672">=</span>/home/kurome/.aria2/aria2.conf -D --all-proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
Hidden<span style="color:#f92672">=</span>false
NoDisplay<span style="color:#f92672">=</span>false
X-GNOME-Autostart-enabled<span style="color:#f92672">=</span>true
Name<span style="color:#f92672">[</span>en_US<span style="color:#f92672">]=</span>Aria2 Daemon
Name<span style="color:#f92672">=</span>Aria2 Daemon
Comment<span style="color:#f92672">[</span>en_US<span style="color:#f92672">]=</span>
Comment<span style="color:#f92672">=</span>
</code></pre></div><p>但这个就看桌面环境怎么操作了，比如我在 openSUSE KDE上的问题：开机登陆后，aria2 启动，但是 logout 后，aria2 就不启动了。</p>
</li>
<li>
<p>建议换 systemd，手写个 <a href="https://gist.github.com/h0tw1r3/ccf7668552fae5d14148">service</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vim /usr/lib/systemd/system/aria2.service 
<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Aria2c download manager
After<span style="color:#f92672">=</span>network.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>simple
User<span style="color:#f92672">=</span>kurome
ExecStart<span style="color:#f92672">=</span>/usr/bin/aria2c --conf-path<span style="color:#f92672">=</span>/home/kurome/.aria2/aria2.conf --all-proxy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target
$ sudo systemctl enable --now aria2.service
</code></pre></div><p><a href="https://superuser.com/questions/1156676/what-causes-systemd-failed-at-step-user-spawning-usr-sbin-opendkim-no-such-p">“systemd: Failed at step USER spawning /usr/sbin/opendkim: No such process”</a>：注意 User 部分，首先必须按照如下写，其次必须是存在的用户</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">User<span style="color:#f92672">=</span>tadeusz
</code></pre></div></li>
</ol>
<h4 id="others-1">Others<a hidden class="anchor" aria-hidden="true" href="#others-1">#</a></h4>
<p><strong><a href="https://github.com/mayswind/AriaNg">AriaNg</a></strong></p>
<p>AriaNg 是一个让 aria2 更容易使用的现代 Web 前端</p>
<ul>
<li>使用很简单，将文件下载解压即可，可以本地打开 <code>index.html</code> 文件，也可上传到服务器。</li>
<li>如果您懒得部署 AriaNg ，可以直接访问现成的 <a href="http://a2.ssss.fun/">http://a2.ssss.fun</a> 。</li>
<li>打开后需要配置 AriaNg，打开 <code>AriaNg 设置</code> - <code>RPC</code>，修改 <code>Aria2 RPC 地址</code> 和 <code>Aria2 RPC 密钥</code> ，点击 <code>重新加载 AriaNg</code> 即可。</li>
</ul>
<p><strong><a href="https://github.com/ziahamza/webui-aria2">WebUI-Aria2</a></strong></p>
<p>这个项目的目标是创建世界上最好和最热门的界面来与 aria2 交互。</p>
<p>使用非常简单，只需在任何网络浏览器中下载并打开 index.html。</p>
<p><a href="http://www.senra.me/awesome-downloader-series-aria2-almost-the-best-all-platform-downloader/"><strong>Aria2 for &hellip;.</strong></a></p>
<p>比如 <a href="https://github.com/acgotaku/YAAW-for-Chrome">YAAW for Chrome</a>、<a href="https://github.com/alexhua/Aria2-for-chrome">Aria2 for Chrome</a> 、Aria2 for Edge 之类的。</p>
<p>在浏览器中直接内置一个 AriaNg，用于直接管理 Aria2。</p>
<p><strong><a href="https://wiki.archlinux.org/title/Aria2#Using_Aria2_as_a_Daemon">Using Aria2 as a Daemon</a></strong></p>
<p>运行 <code>gnome-session-properties</code>打开应用程序首选项管理（即 Ubuntu 中的 Startup Applications），添加：</p>
<ul>
<li>Name: Aria2 Daemon</li>
<li>Command: <code>/usr/bin/aria2c --conf-path=/home/kurome/.aria2/aria2.conf -D</code></li>
</ul>
<p>会建立 <code>.config/autostart/aria2c.desktop</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>Application
Exec<span style="color:#f92672">=</span>/usr/bin/aria2c --conf-path<span style="color:#f92672">=</span>/home/vane/.aria2/aria2.conf -D
Hidden<span style="color:#f92672">=</span>false
NoDisplay<span style="color:#f92672">=</span>false
X-GNOME-Autostart-enabled<span style="color:#f92672">=</span>true
Name<span style="color:#f92672">[</span>en_US<span style="color:#f92672">]=</span>Aria2 Daemon
Name<span style="color:#f92672">=</span>Aria2 Daemon
Comment<span style="color:#f92672">[</span>en_US<span style="color:#f92672">]=</span>
Comment<span style="color:#f92672">=</span>
</code></pre></div><h5 id="bt-下载预热httpwwwsenramesolutions-to-aria2-bt-metalink-download-slowly"><a href="http://www.senra.me/solutions-to-aria2-bt-metalink-download-slowly/">BT 下载预热</a><a hidden class="anchor" aria-hidden="true" href="#bt-下载预热httpwwwsenramesolutions-to-aria2-bt-metalink-download-slowly">#</a></h5>
<p>是这样滴，和很多BT客户端一样，Aria2有个dht.dat文件(开启ipv6还有个dht6.dat)，这玩意用于存储一种叫做DHT Routing Table的东西，DHT网络由无数节点组成，你接触到一个后能通过它接触到更多的节点，Aria2我记得是有内置的节点，但是！如果你在Aria2第一次运行的时候直接下载磁力链接或者冷门种子，你很可能遇到连MetaData都无法获取的情况，这就是因为第一次只是初始化dht.dat文件，你本地不存在DHT Routing Table的缓存，所以你无法从DHT网络中获取足够的数据。</p>
<p>那么怎么办？我的建议是，找个热门种子(千万建议是种子，而不是磁力链接)，然后下一波，挂着做种，过几个小时后退出Aria2，或者等Aria2会话自动保存，你会发现dht.dat从空文件变成有数据了，这时候你下载就会正常很多。</p>
<h5 id="什么是-pthttpswwwcnblogscomwpjamerp4417174html"><a href="https://www.cnblogs.com/wpjamer/p/4417174.html">什么是 PT</a><a hidden class="anchor" aria-hidden="true" href="#什么是-pthttpswwwcnblogscomwpjamerp4417174html">#</a></h5>
<p>答：PT（Private Tracker）下载其实也是Bt下载的一种，但有两个明显的改进：一是私密的小范围下载，二是进行流量统计，根据上载量决定你的权限。</p>
<p>BT下载时，软件会分析.torrent种子文件得到Tracker地址，然后连接Tracker服务器，服务器返回其他下载者的IP，下载者再与这些IP联系进行下载，从而减轻了服务器的负担，BT下载的Tracker是公开的，而Private Tracker 下载(PT下载)的Tracker则是私有的，每个人的Tracker是不同的，即passkey不同，passkey对PT下载者很重要，所以不要轻易泄露出去。</p>
<p>其实和通常BT相比，PT就是多了一个passkey验证，这样就能保证未注册的用户不能下载。所以passkey很重要，一旦发现有问题，就要到站点上去重置passkey。Tracker Server根据passkey把BT客户端上传量和下载量进行计算，从而算出分享率(上传量/下载量)。如果分享率太小，将会被删除帐号，从而不能下载。</p>
<p>这样Private Tracker 下载(PT下载)是一种小范围的BT下载，通过禁用DHT有要求地选择并控制用户数量，这样，在有限的范围内，下载的用户基本上都可以达到自己的宽带上限，Private Tracker 下载(PT下载)下载还通过论坛等方式的约束机制将BT下载的理念现实化，真正让用户做到下载的过程中努力上传。因此，Private Tracker 下载(PT下载)的速度很快，能够让用户款待得到最大程度的使用。</p>
<p>PT通过对做种时间和流量的要求在一定程度上避免了BT中存在的下完不做种的现象，因此在网络上，尤其是需要大文件（如高清）资源交换的时候广受欢迎，在PT站里，“水管”代表上传带宽的大小，大水管可以通过快速的上传获得积分，PT站点也会采取措施（比如做种时间，优惠等）使上传较慢的小水管能够参与贡献和共享资源。</p>
<h5 id="rpchttpswwwzhihucomquestion25536695"><a href="https://www.zhihu.com/question/25536695">RPC</a><a hidden class="anchor" aria-hidden="true" href="#rpchttpswwwzhihucomquestion25536695">#</a></h5>
<p>首先了解什么叫RPC，为什么要RPC，RPC是指远程过程调用，也就是说两台服务器A，B，一个应用部署在A服务器上，想要调用B服务器上应用提供的函数/方法，由于不在一个内存空间，不能直接调用，需要通过网络来表达调用的语义和传达调用的数据。</p>
<p>比如说，一个方法可能是这样定义的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Employee <span style="color:#a6e22e">getEmployeeByName</span><span style="color:#f92672">(</span>String fullName<span style="color:#f92672">)</span>
</code></pre></div><p>那么：</p>
<ul>
<li>首先，要解决通讯的问题，主要是通过在客户端和服务器之间建立TCP连接，远程过程调用的所有交换的数据都在这个连接里传输。连接可以是按需连接，调用结束后就断掉，也可以是长连接，多个远程过程调用共享同一个连接。</li>
<li>第二，要解决寻址的问题，也就是说，A服务器上的应用怎么告诉底层的RPC框架，如何连接到B服务器（如主机或IP地址）以及特定的端口，方法的名称名称是什么，这样才能完成调用。比如基于Web服务协议栈的RPC，就要提供一个endpoint URI，或者是从UDDI服务上查找。如果是RMI调用的话，还需要一个RMI Registry来注册服务的地址。</li>
<li>第三，当A服务器上的应用发起远程过程调用时，方法的参数需要通过底层的网络协议如TCP传递到B服务器，由于网络协议是基于二进制的，内存中的参数的值要序列化成二进制的形式，也就是序列化（Serialize）或编组（marshal），通过寻址和传输将序列化的二进制发送给B服务器。</li>
<li>第四，B服务器收到请求后，需要对参数进行反序列化（序列化的逆操作），恢复为内存中的表达方式，然后找到对应的方法（寻址的一部分）进行本地调用，然后得到返回值。</li>
<li>第五，返回值还要发送回服务器A上的应用，也要经过序列化的方式发送，服务器A接到后，再反序列化，恢复为内存中的表达方式，交给A服务器上的应用</li>
</ul>
<p><img loading="lazy" src="/Distributions/rpc.jpg" alt="img"  />
</p>
<p>为什么RPC呢？就是无法在一个进程内，甚至一个计算机内通过本地调用的方式完成的需求，比如比如不同的系统间的通讯，甚至不同的组织间的通讯。由于计算能力需要横向扩展，需要在多台机器组成的集群上部署应用，</p>
<p>RPC的协议有很多，比如最早的CORBA，Java RMI，Web Service的RPC风格，Hessian，Thrift，甚至Rest API。</p>
<h5 id="其他-bt-下载工具httpwwwsenrametage4b88be8bdbde5b7a5e585b7"><a href="http://www.senra.me/tag/%e4%b8%8b%e8%bd%bd%e5%b7%a5%e5%85%b7/">其他 BT 下载工具</a><a hidden class="anchor" aria-hidden="true" href="#其他-bt-下载工具httpwwwsenrametage4b88be8bdbde5b7a5e585b7">#</a></h5>
<ul>
<li><a href="https://github.com/qbittorrent/qBittorrent">qBittorrent</a></li>
<li><a href="https://github.com/transmission/transmission">Transmission</a></li>
<li><a href="https://github.com/rakshasa/rtorrent">rTorrent</a></li>
<li><a href="https://github.com/deluge-torrent/deluge">Deluge</a></li>
</ul>
<h5 id="有支持ed2k的计划吗httpsgithubcomaria2aria2issues986"><a href="https://github.com/aria2/aria2/issues/986">有支持ed2k的计划吗？</a><a hidden class="anchor" aria-hidden="true" href="#有支持ed2k的计划吗httpsgithubcomaria2aria2issues986">#</a></h5>
<p>真是笑死我了，你们难道真的认为那所谓迅雷等国产BT下载软件会使用真正的<a href="https://zh.wikipedia.org/wiki/EDonkey%E7%BD%91%E7%BB%9C">eDonkey网络</a>？</p>
<p>非也！它们只不过通过ed2k链接所列出的哈希值 <strong>直接链接到它们服务器自身（如迅雷、百度）所存储的文件</strong> 或链接到BitTorrent协议的种子和磁力链接上。你们用的软件不是P2P（Peer to Peer），而是<a href="https://zh.wikipedia.org/wiki/P2SP">P2SP</a>（Peer to <strong>Server</strong> and to Peer）！</p>
<p>如果你们用过<strong>真正</strong>的ed2k下载器（如<a href="https://zh.wikipedia.org/wiki/EMule">eMule</a>、<a href="https://zh.wikipedia.org/wiki/AMule">aMule</a>）的话，你们会发现，真正的eDonkey网络早已消亡，截至目前全球用户也就50-60万的样子。</p>
<p>最后，作为曾经的eMule老用户，我可以说明<strong>真正</strong>的eDonkey网络不仅有繁琐的排队机制，还有文件优先级网络优先级等复杂的设定，远比你们想像中难用的多。</p>
<hr>
<p><a href="https://zhuanlan.zhihu.com/p/28405896"><strong>warez groups</strong></a></p>
<ul>
<li>
<p>RELOADED</p>
<p>RELOADED成立于2004年，前身是传奇破解组DEVIANCE，曾经在2次重大的政府扫荡中生存下来，由于竞争对手HOODLUM和VENGEANCE被端掉，RELOADED从此称霸PC游戏破解圈，在新游的首发破解上，RELOADED能占据80%。</p>
<p>RELOADED也是国内最常见的PC游戏破解组，你在各个资源站看到标题写着某某游戏“R组”破解，就是他们的“杰作”。</p>
<p>高光时刻：</p>
<p>1、各大破解组都在追求游戏发售前破解游戏，而RELOADED最著名的应该就是2008年对《刺客信条》的破解了，R组在游戏发售1个月之前就放出破解版。</p>
<p>2、修复了《彩虹六号：维加斯2》数字版的BUG，育碧当年对《彩虹六号：维加斯2》数字版无法运行的BUG毫无办法，最终只能给玩家发放RELOADED的游戏破解补丁&hellip;这次事件让育碧颜面扫地，却成就了RELOADED。</p>
<p>3、打破《分裂细胞：混沌理论》424天不被破解的记录。</p>
</li>
<li>
<p>SKIDROW</p>
<p>SKIDROW 是来自美国的游戏破解组，成立时间大概是上个世纪90年代，主要作品有《猎杀潜艇5》、《刺客信条2》等，之后由于人员解散，直到2007年 SKIDROW 才重新开始活跃。</p>
<p>SKIDROW 在同行中的口碑一般，被RELOADED等破解组爆出过盗用其他破解组代码的料。</p>
<p>1、 Skidrow成名于DRM事件，DRM是育碧的反破解系统，Skidrow破解组成功破解了育碧两袋DRM系统，最著名的作品是对《刺客信条2》的破解。</p>
<p>2、2017年，继CPY之后，成功破解了最新的Denuvo64加密技术。并批评CPY只会用Emulation(仿真器)而不是真正的破解。</p>
</li>
<li>
<p>Razor1911</p>
<p>Razor1911 是来自挪威的破解组，成立于1985年，最初由3个年轻的计算机爱好者组成，主要是破解Commodore64和amiga机种的游戏软件，名称中的1911是因为1991在16进制里写作777，代表不朽。</p>
<p>作为老牌破解组之一， Razor1911在2001年和2004年的FBI两次反盗版行动中幸存下来，不知道是不是因为名字带来的好运。在业内，如果说RELOADED是以高产著称，那么Razor1911就是以技术见长。</p>
<p>Razor1911破解组最著名的作品应该是《星际争霸：母巢之战》的硬盘版，间接导致了星际争霸在全世界的流行。</p>
<p>1、制作《星际争霸：母巢之战》硬盘版，在这一版的星际争霸中，所有文件的体积加起来只有100m多一点，而最为经典的地方就在于他们把光盘版中两个600m左右的install.exe文件压缩到了只有22m的大小。</p>
<p>2、破解《GTA4》和该游戏价值20万美元的SecuRom反破解系统。</p>
<p>3、破解EA origin平台的加密技术。</p>
<p>4、破解《孤岛危机》和《上古卷轴5：天际》。</p>
</li>
<li>
<p>CPY</p>
<p>CPY全名 CONSPiR4CY，是来自于意大利的破解组，成立于1999年，相比上面的三大破解组成立较晚。但是最近几年，CPY在破解了Denuvo加密技术（D加密）后名声大噪，俨然已超越了上面三大破解组。</p>
<p>在国内有CPY掌握核心技术的说法，Steam、EA origin、Denuvo等加密技术先后被CPY破解。</p>
<p>高光时刻：</p>
<p>1、2015年，继Steam平台后，EA origin平台加密技术被破解，宣布了这套加密系统彻底完蛋。</p>
<p>2、破解D加密技术，随后一系列热门游戏遭到破解，包括：《合金装备5 幻痛》《古墓丽影 崛起》《毁灭战士4》《看门狗2》等等。</p>
</li>
<li>
<p><a href="https://zh.moegirl.org.cn/index.php?title=%E7%A0%B4%E8%A7%A3%E7%BB%84">CODEX</a></p>
<p>会破解D加密，如今几乎已经垄断破解业。并在.nfo文件招聘栏中提到CODEX什么都不要，只要竞争!</p>
<p>2022年2月，CODEX宣告退休。</p>
<ul>
<li>PLAZA</li>
<li>EMPRESS</li>
</ul>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/List_of_warez_groups">STEAMPUNKS</a></p>
</li>
</ul>
<h3 id="youtube-dlhttpsgithubcomytdl-orgyoutube-dl"><a href="https://github.com/ytdl-org/youtube-dl">youtube-dl</a><a hidden class="anchor" aria-hidden="true" href="#youtube-dlhttpsgithubcomytdl-orgyoutube-dl">#</a></h3>
<p>youtube-dl 是一个命令行程序，用于从 YouTube.com 和<a href="https://ytdl-org.github.io/youtube-dl/supportedsites.html">更多其他网站</a>下载视频。 基于 Python 实现，不限于特定平台。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 安装</span>
$ pip install -i https://pypi.tuna.tsinghua.edu.cn/simple youtube-dl
<span style="color:#75715e"># 使用</span>
$ youtube-dl <span style="color:#f92672">[</span>OPTIONS<span style="color:#f92672">]</span> URL <span style="color:#f92672">[</span>URL...<span style="color:#f92672">]</span>
</code></pre></div><p>当前版本（2021.06.06）<a href="https://stackoverflow.com/questions/60506532/why-can-only-download-the-first-episode-video-on-bilibili-with-youtube-dl">不能下载哔哩哔哩播放列表</a>，可以用类似软件如 <a href="https://github.com/soimort/you-get">you-get</a>， <a href="https://github.com/iawia002/annie">annie</a> 代替。</p>
<h4 id="usagehttpszhuanlanzhihucomp105141332"><a href="https://zhuanlan.zhihu.com/p/105141332">Usage</a><a hidden class="anchor" aria-hidden="true" href="#usagehttpszhuanlanzhihucomp105141332">#</a></h4>
<p><strong>下载视频或整个视频播放列表</strong></p>
<ul>
<li>要从 Youtube 下载视频或整个视频播放列表，只需直接使用 URL 即可：<code>youtube-dl [url]</code>。程序自动选择一个最清晰的格式下载。</li>
<li>如果要指定视频下载之后的名称，可以使用如下方式：<code>youtube-dl -o '名称' [url]</code>。</li>
<li>还可以在下载视频时附加更多详细信息，可用的参数有标题、上传者名称（频道名称）和视频上传日期等：<code>youtube-dl -o '%(title)s by %(uploader)s on %(upload_date)s in %(playlist)s.%(ext)s' [ul]</code>。</li>
</ul>
<p><strong>查看视频的所有类型，只看不下载</strong></p>
<p>命令：<code>youtube-dl -F [url]</code>或者<code>youtube-dl --list-formats [url]</code>。
这是一个列清单参数，执行后并不会下载视频，但能知道这个目标视频都有哪些格式存在，以便有选择的下载。</p>
<p><strong>下载指定质量的视频和音频并自动合并</strong></p>
<p>下载最佳/最差质量的音/视频文件：</p>
<p>默认情况下，youtube-dl将自主选择最佳质量的视频下载。 但是，也可以以特定的质量或格式来下载视频或播放列表</p>
<p>Youtube-dl 支持以下品质：</p>
<ul>
<li><code>best</code>选择最佳质量的音/视频文件</li>
<li><code>worst</code>选择质量最差的格式（视频和音频）</li>
<li><code>bestvideo</code>选择最佳质量的仅视频格式（例如DASH视频），可能无法使用。</li>
<li><code>worstvideo</code>选择质量最差的纯视频格式，可能无法使用。</li>
<li><code>bestaudio</code>选择最优质的音频格式，可能无法使用。</li>
<li><code>worstaudio</code>选择质量最差的音频格式，可能无法使用。</li>
</ul>
<p>例如，如果要自动选择并下载最佳质量格式（音频和视频），只需使用以下命令：<code>youtube-dl -f best [url]</code>。</p>
<p>您还可以组合使用以下不同的格式选项：<code>youtube-dl -f bestvideo+bestaudio [ul]</code>。该命令将分别下载最高质量的仅视频和最高质量的纯音频格式，再用ffmpeg或avconv合并成一个最佳质量的mkv文件；如果您不想合并，请将<code>+</code>（加号）替换为<code>,</code>（逗号）即可分别得到最高质量的音频和视频（两个文件）：<code>youtube-dl -f 'bestvideo,bestaudio' [url]</code>。</p>
<hr>
<p><strong>下载指定质量的音/视频文件</strong>：</p>
<p>-F 获取的所有视频格式的清单，最左边一列就是编号对应着不同的格式。由于YouTube的1080p及以上的分辨率都是音视频分离的，所以我们需要分别下载视频和音频，可以使用137+140这样的组合。如果系统中安装了ffmpeg的话，youtube-dl 会自动合并下好的视频和音频，然后自动删除单独的音视频文件：<code>youtube-dl -f [format code] [url]</code>。</p>
<p>从播放列表下载视频时，某些视频可能没有相同的格式。 在这种情况下，可以按首选顺序指定多个格式代码，例如：命令<code>youtube-dl -f 22/17/18 &lt;playlist_url&gt;</code>将以格式 22 下载视频（如果可用）；如果格式 22不可用，则它将下载格式 17（如果可用）；如果格式 22 和 17 都不可用，最后尝试下载格式 18。如果所有格式代码都不匹配，Youtube-dl 会报出提示。还需要注意的是，斜杠是左关联的，即最左侧的格式代码是首选。</p>
<p><strong>下载字幕</strong></p>
<ul>
<li><code>youtube-dl --write-sub [url]</code>这样会下载一个vtt格式的英文字幕和mkv格式的1080p视频下来</li>
<li><code>youtube-dl --write-sub --skip-download [url]</code>下载单独的vtt字幕文件,而不会下载视频</li>
<li><code>youtube-dl --write-sub --all-subs [url]</code>下载所有语言的字幕(如果有的话)</li>
<li><code>youtube-dl --write-auto-sub [url]</code>下载自动生成的字幕(YouTube only)</li>
</ul>
<p><strong>下载多个视频</strong></p>
<ul>
<li><code>youtube-dl &lt;url1&gt; &lt;url2&gt;</code>有时我们需要一次下载多个不同的视频，此时我们只需用空格将多个URL分隔开即可。</li>
<li><code>youtube-dl -a url.txt</code>也可以将要下载视频的URL全部放在文本文件中，并将其作为参数传递给youtube-dl。此命令将下载url.txt文件中所有URL指向的视频。</li>
</ul>
<p><strong>只下载（视频中的）音频</strong></p>
<ul>
<li><code>youtube-dl -x [url]</code>仅从视频网站下载其音频。</li>
<li><code>youtube-dl -x --audio-format mp3 [ul]</code>默认情况下，youtube-dl 将以Ogg （opus）格式保存音频。此命令将从给定的视频/播放列表下载音频，将其转换为 MP3 并将其保存在当前目录中。应注意：您应该安装 ffmpeg 或 avconv 将文件转换为 mp3 格式。</li>
</ul>
<p><strong>下载带有描述、元数据、注释、字幕和缩略图的视频</strong></p>
<p>要下载视频及其他详细信息，如：说明、元数据、注释、字幕和缩略图等，请使用以下命令：
<code>youtube-dl --write-description --write-info-json --write-annotations --write-sub --write-thumbnail [url]</code></p>
<p><strong>通过文件扩展名下载音/视频</strong></p>
<ul>
<li>
<p>以您的首选格式下载视频，例如 MP4，只需执行：<code>youtube-dl --format mp4 [url]</code>或者<code>youtube-dl -f mp4 [url]</code>。</p>
</li>
<li>
<p>某些视频可能无法以您的首选格式提供。 在这种情况下，youtube-dl 将下载其他最佳可用格式。例如：
<code>youtube-dl -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best' [ul]</code>
此命令将下载最佳质量的MP4格式文件。如果 MP4 格式不可用，则它将下载其他最佳可用格式。</p>
<p><strong>限制下载视频的大小</strong></p>
</li>
</ul>
<p>从YouTube播放列表下载多个视频时，您可能只想下载特定大小的视频。例如：</p>
<ul>
<li>此命令不会下载任何小于指定大小（例如100MB）的视频：<code>youtube-dl --min-filesize 100M &lt;playlist_url&gt;</code>。</li>
<li>如果您不想下载大于给定大小的视频，可以这样：<code>youtube-dl --max-filesize 100M &lt;playlist_url&gt;</code>。</li>
</ul>
<p>我们还可以用组合格式，选择运算符来下载特定大小的视频。例如：</p>
<ul>
<li>以下命令将下载最佳视频格式但不大于 100MB 的视频：<code>youtube-dl -f 'best[filesize&lt;100M]' [url]</code>。</li>
</ul>
<p><strong>按日期下载视频</strong></p>
<p>Youtube-dl 允许我们按照上传日期来筛选和下载视频或播放列表，例如：</p>
<ul>
<li>要下载 2019 年 8 月 1 日上传的视频，可以使用：<code>youtube-dl --date 20190801 [URL]</code>；</li>
<li>下载在特定日期或之前上传的视频：<code>youtube-dl --datebefore 20190801 [URL]</code>；</li>
<li>下载在特定日期或之后上传的视频：<code>youtube-dl --dateafter 20190101 [URL]</code>；</li>
<li>仅下载过去 6 个月内上传的视频：<code>youtube-dl --dateafter now-6months [URL]</code>；</li>
<li>下载特定时间段内（例如 2018 年 1 月 1 日至 2019 年 1 月 1 日）上传的视频：<code>youtube-dl --dateafter 20180101 --datebefore 20190101 [URL]</code>。</li>
</ul>
<p><strong>从播放列表下载特定的视频</strong></p>
<p>从播放列表下载特定的视频，是youtube-dl 的另一个非常有用的功能。例如：</p>
<ul>
<li>要从播放列表下载第 10 个文件，可使用：<code>youtube-dl --playlist-items 10 [playlist_url]</code>；</li>
<li>要下载多个指定的文件，只需用逗号分隔：<code>youtube-dl --playlist-items 2,3,7,10 [playlist_url]</code>；</li>
</ul>
<p>也可以按序号来指定要下载范围，例如：</p>
<ul>
<li>从第 10 个开始，直接下载完整个列表：<code>youtube-dl --playlist-start 10 [playlist_url]</code>；</li>
<li>在播放列表中仅下载从第 2 到第 5 的文件：<code>youtube-dl --playlist-start 2 --playlist-end 5 [playlist_url]</code>。</li>
</ul>
<h4 id="configurationhttpswwwjianshucomp5143faa6056d"><a href="https://www.jianshu.com/p/5143faa6056d">Configuration</a><a hidden class="anchor" aria-hidden="true" href="#configurationhttpswwwjianshucomp5143faa6056d">#</a></h4>
<p>在 Linux 和 macOS 上，系统配置文件位于 /<code>etc/youtube-dl.conf</code>，用户配置文件位于 <code>~/.config/youtube-dl/config</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Continue on download errors, for example to skip unavailable videos in a playlist</span>
--ignore-errors

<span style="color:#75715e"># Time to wait before giving up, in seconds</span>
--socket-timeout <span style="color:#ae81ff">10</span>

<span style="color:#75715e"># Download only videos not listed in the archive file. Record the IDs of all downloaded videos in it.</span>
<span style="color:#75715e">#--download-archive   /path/archive.txt</span>

<span style="color:#75715e"># Number of retries (default is 10), or &#34;infinite&#34;.</span>
--retries infinite

<span style="color:#75715e"># Give these arguments to the external downloader</span>
--external-downloader aria2c  --external-downloader-args <span style="color:#e6db74">&#34;--no-conf -c&#34;</span>

<span style="color:#75715e"># Output filename template, see the &#34;OUTPUT TEMPLATE&#34; for all the info</span>
-o <span style="color:#e6db74">&#39;~/Videos/%(id)s.%(ext)s&#39;</span>

<span style="color:#75715e"># Write thumbnail image to disk</span>
<span style="color:#75715e">#--write-thumbnail</span>

<span style="color:#75715e"># download best 30hz mp4 file , h264+aac ,use http or https protocol,because we can use aria2c downloader to have a faster speed</span>
--format <span style="color:#e6db74">&#39;(bestvideo[ext=mp4][fps&lt;31]+bestaudio[ext=m4a]/best[ext=mp4]/bestvideo+bestaudio/best)[protocol^=http]&#39;</span>

<span style="color:#75715e"># Embed thumbnail in the audio as cover art</span>
<span style="color:#75715e">#--embed-thumbnail</span>

<span style="color:#75715e"># Write metadata to the video file</span>
--add-metadata
</code></pre></div><h3 id="curlhttpwwwruanyifengcomblog201909curl-referencehtml"><a href="http://www.ruanyifeng.com/blog/2019/09/curl-reference.html">curl</a><a hidden class="anchor" aria-hidden="true" href="#curlhttpwwwruanyifengcomblog201909curl-referencehtml">#</a></h3>
<h4 id="简介-1">简介<a hidden class="anchor" aria-hidden="true" href="#简介-1">#</a></h4>
<p>curl 是常用的命令行工具，用来请求 Web 服务器。它的名字就是客户端（client）的 URL 工具的意思。</p>
<p>它的功能非常强大，命令行参数多达几十种。如果熟练的话，完全可以取代 Postman 这一类的图形界面工具。</p>
<p>本文介绍它的主要命令行参数，作为日常的参考，方便查阅。</p>
<p>不带有任何参数时，curl 就是发出 GET 请求。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl https://www.example.com
</code></pre></div><p>上面命令向<code>www.example.com</code>发出 GET 请求，服务器返回的内容会在命令行输出。</p>
<h4 id="主要命令行参数">主要命令行参数<a hidden class="anchor" aria-hidden="true" href="#主要命令行参数">#</a></h4>
<p><strong>-A</strong></p>
<p><code>-A</code>参数指定客户端的用户代理标头，即<code>User-Agent</code>。curl 的默认用户代理字符串是<code>curl/[version]</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -A <span style="color:#e6db74">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36&#39;</span> https://google.com
</code></pre></div><p>上面命令将<code>User-Agent</code>改成 Chrome 浏览器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -A <span style="color:#e6db74">&#39;&#39;</span> https://google.com
</code></pre></div><p>上面命令会移除<code>User-Agent</code>标头。</p>
<p>也可以通过<code>-H</code>参数直接指定标头，更改<code>User-Agent</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -H <span style="color:#e6db74">&#39;User-Agent: php/1.0&#39;</span> https://google.com
</code></pre></div><p><strong>-b</strong></p>
<p><code>-b</code>参数用来向服务器发送 Cookie。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -b <span style="color:#e6db74">&#39;foo=bar&#39;</span> https://google.com
</code></pre></div><p>上面命令会生成一个标头<code>Cookie: foo=bar</code>，向服务器发送一个名为<code>foo</code>、值为<code>bar</code>的 Cookie。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -b <span style="color:#e6db74">&#39;foo1=bar;foo2=bar2&#39;</span> https://google.com
</code></pre></div><p>上面命令发送两个 Cookie。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -b cookies.txt https://www.google.com
</code></pre></div><p>上面命令读取本地文件<code>cookies.txt</code>，里面是服务器设置的 Cookie（参见<code>-c</code>参数），将其发送到服务器。</p>
<p><strong>-c</strong></p>
<p><code>-c</code>参数将服务器设置的 Cookie 写入一个文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -c cookies.txt https://www.google.com
</code></pre></div><p>上面命令将服务器的 HTTP 回应所设置 Cookie 写入文本文件<code>cookies.txt</code>。</p>
<p><strong>-d</strong></p>
<p><code>-d</code>参数用于发送 POST 请求的数据体。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -d <span style="color:#e6db74">&#39;login=emma＆password=123&#39;</span>-X POST https://google.com/login
<span style="color:#75715e"># 或者</span>
$ curl -d <span style="color:#e6db74">&#39;login=emma&#39;</span> -d <span style="color:#e6db74">&#39;password=123&#39;</span> -X POST  https://google.com/login
</code></pre></div><p>使用<code>-d</code>参数以后，HTTP 请求会自动加上标头<code>Content-Type : application/x-www-form-urlencoded</code>。并且会自动将请求转为 POST 方法，因此可以省略<code>-X POST</code>。</p>
<p><code>-d</code>参数可以读取本地文本文件的数据，向服务器发送。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -d <span style="color:#e6db74">&#39;@data.txt&#39;</span> https://google.com/login
</code></pre></div><p>上面命令读取<code>data.txt</code>文件的内容，作为数据体向服务器发送。</p>
<p><strong>&ndash;data-urlencode</strong></p>
<p><code>--data-urlencode</code>参数等同于<code>-d</code>，发送 POST 请求的数据体，区别在于会自动将发送的数据进行 URL 编码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl --data-urlencode <span style="color:#e6db74">&#39;comment=hello world&#39;</span> https://google.com/login
</code></pre></div><p>上面代码中，发送的数据<code>hello world</code>之间有一个空格，需要进行 URL 编码。</p>
<p><strong>-e</strong></p>
<p><code>-e</code>参数用来设置 HTTP 的标头<code>Referer</code>，表示请求的来源。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -e <span style="color:#e6db74">&#39;https://google.com?q=example&#39;</span> https://www.example.com
</code></pre></div><p>上面命令将<code>Referer</code>标头设为<code>https://google.com?q=example</code>。</p>
<p><code>-H</code>参数可以通过直接添加标头<code>Referer</code>，达到同样效果。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -H <span style="color:#e6db74">&#39;Referer: https://google.com?q=example&#39;</span> https://www.example.com
</code></pre></div><p><strong>-F</strong></p>
<p><code>-F</code>参数用来向服务器上传二进制文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -F <span style="color:#e6db74">&#39;file=@photo.png&#39;</span> https://google.com/profile
</code></pre></div><p>上面命令会给 HTTP 请求加上标头<code>Content-Type: multipart/form-data</code>，然后将文件<code>photo.png</code>作为<code>file</code>字段上传。</p>
<p><code>-F</code>参数可以指定 MIME 类型。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -F <span style="color:#e6db74">&#39;file=@photo.png;type=image/png&#39;</span> https://google.com/profile
</code></pre></div><p>上面命令指定 MIME 类型为<code>image/png</code>，否则 curl 会把 MIME 类型设为<code>application/octet-stream</code>。</p>
<p><code>-F</code>参数也可以指定文件名。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -F <span style="color:#e6db74">&#39;file=@photo.png;filename=me.png&#39;</span> https://google.com/profile
</code></pre></div><p>上面命令中，原始文件名为<code>photo.png</code>，但是服务器接收到的文件名为<code>me.png</code>。</p>
<p><strong>-G</strong></p>
<p><code>-G</code>参数用来构造 URL 的查询字符串。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -G -d <span style="color:#e6db74">&#39;q=kitties&#39;</span> -d <span style="color:#e6db74">&#39;count=20&#39;</span> https://google.com/search
</code></pre></div><p>上面命令会发出一个 GET 请求，实际请求的 URL 为<code>https://google.com/search?q=kitties&amp;count=20</code>。如果省略<code>--G</code>，会发出一个 POST 请求。</p>
<p>如果数据需要 URL 编码，可以结合<code>--data--urlencode</code>参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -G --data-urlencode <span style="color:#e6db74">&#39;comment=hello world&#39;</span> https://www.example.com
</code></pre></div><p><strong>-H</strong></p>
<p><code>-H</code>参数添加 HTTP 请求的标头。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -H <span style="color:#e6db74">&#39;Accept-Language: en-US&#39;</span> https://google.com
</code></pre></div><p>上面命令添加 HTTP 标头<code>Accept-Language: en-US</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -H <span style="color:#e6db74">&#39;Accept-Language: en-US&#39;</span> -H <span style="color:#e6db74">&#39;Secret-Message: xyzzy&#39;</span> https://google.com
</code></pre></div><p>上面命令添加两个 HTTP 标头。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -d <span style="color:#e6db74">&#39;{&#34;login&#34;: &#34;emma&#34;, &#34;pass&#34;: &#34;123&#34;}&#39;</span> -H <span style="color:#e6db74">&#39;Content-Type: application/json&#39;</span> https://google.com/login
</code></pre></div><p>上面命令添加 HTTP 请求的标头是<code>Content-Type: application/json</code>，然后用<code>-d</code>参数发送 JSON 数据。</p>
<p><strong>-i</strong></p>
<p><code>-i</code>参数打印出服务器回应的 HTTP 标头。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -i https://www.example.com
</code></pre></div><p>上面命令收到服务器回应后，先输出服务器回应的标头，然后空一行，再输出网页的源码。</p>
<p><strong>-I</strong></p>
<p><code>-I</code>参数向服务器发出 HEAD 请求，然会将服务器返回的 HTTP 标头打印出来。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -I https://www.example.com
</code></pre></div><p>上面命令输出服务器对 HEAD 请求的回应。</p>
<p><code>--head</code>参数等同于<code>-I</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl --head https://www.example.com
</code></pre></div><p><strong>-k</strong></p>
<p><code>-k</code>参数指定跳过 SSL 检测。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -k https://www.example.com
</code></pre></div><p>上面命令不会检查服务器的 SSL 证书是否正确。</p>
<p><strong>-L</strong></p>
<p><code>-L</code>参数会让 HTTP 请求跟随服务器的重定向。curl 默认不跟随重定向。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -L -d <span style="color:#e6db74">&#39;tweet=hi&#39;</span> https://api.twitter.com/tweet
</code></pre></div><p><strong>&ndash;limit-rate4</strong></p>
<p><code>--limit-rate</code>用来限制 HTTP 请求和回应的带宽，模拟慢网速的环境。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl --limit-rate 200k https://google.com
</code></pre></div><p>上面命令将带宽限制在每秒 200K 字节。</p>
<p><strong>-o</strong></p>
<p><code>-o</code>参数将服务器的回应保存成文件，等同于<code>wget</code>命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -o example.html https://www.example.com
</code></pre></div><p>上面命令将<code>www.example.com</code>保存成<code>example.html</code>。</p>
<p><strong>-O</strong></p>
<p><code>-O</code>参数将服务器回应保存成文件，并将 URL 的最后部分当作文件名。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -O https://www.example.com/foo/bar.html
</code></pre></div><p>上面命令将服务器回应保存成文件，文件名为<code>bar.html</code>。</p>
<p><strong>-s</strong></p>
<p><code>-s</code>参数将不输出错误和进度信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -s https://www.example.com
</code></pre></div><p>上面命令一旦发生错误，不会显示错误信息。不发生错误的话，会正常显示运行结果。</p>
<p>如果想让 curl 不产生任何输出，可以使用下面的命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -s -o /dev/null https://google.com
</code></pre></div><p><strong>-S</strong></p>
<p><code>-S</code>参数指定只输出错误信息，通常与<code>-s</code>一起使用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -s -o /dev/null https://google.com
</code></pre></div><p>上面命令没有任何输出，除非发生错误。</p>
<p><strong>-u</strong></p>
<p><code>-u</code>参数用来设置服务器认证的用户名和密码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -u <span style="color:#e6db74">&#39;bob:12345&#39;</span> https://google.com/login
</code></pre></div><p>上面命令设置用户名为<code>bob</code>，密码为<code>12345</code>，然后将其转为 HTTP 标头<code>Authorization: Basic Ym9iOjEyMzQ1</code>。</p>
<p>curl 能够识别 URL 里面的用户名和密码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl https://bob:12345@google.com/login
</code></pre></div><p>上面命令能够识别 URL 里面的用户名和密码，将其转为上个例子里面的 HTTP 标头。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -u <span style="color:#e6db74">&#39;bob&#39;</span> https://google.com/login
</code></pre></div><p>上面命令只设置了用户名，执行后，curl 会提示用户输入密码。</p>
<p><strong>-v</strong></p>
<p><code>-v</code>参数输出通信的整个过程，用于调试。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -v https://www.example.com
</code></pre></div><p><code>--trace</code>参数也可以用于调试，还会输出原始的二进制数据。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl --trace - https://www.example.com
</code></pre></div><p><strong>-x</strong></p>
<p><code>-x</code>参数指定 HTTP 请求的代理。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -x socks5://james:cats@myproxy.com:8080 https://www.example.com
</code></pre></div><p>上面命令指定 HTTP 请求通过<code>myproxy.com:8080</code>的 socks5 代理发出。</p>
<p>如果没有指定代理协议，默认为 HTTP。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -x james:cats@myproxy.com:8080 https://www.example.com
</code></pre></div><p>上面命令中，请求的代理使用 HTTP 协议。</p>
<p><strong>-X</strong></p>
<p><code>-X</code>参数指定 HTTP 请求的方法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -X POST https://www.example.com
</code></pre></div><p>上面命令对<code>https://www.example.com</code>发出 POST 请求。</p>
<h4 id="httpiehttpsgithubcomhttpiehttpie"><a href="https://github.com/httpie/httpie">HTTPie</a><a hidden class="anchor" aria-hidden="true" href="#httpiehttpsgithubcomhttpiehttpie">#</a></h4>
<p>HTTPie（<code>http</code>）以一种更人性化的方式做同样的工作。你会看到彩色的、格式化的输出，这使得它更容易理解和调试。</p>
<h4 id="axelhttpsgithubcomaxel-download-acceleratoraxel"><a href="https://github.com/axel-download-accelerator/axel">axel</a><a hidden class="anchor" aria-hidden="true" href="#axelhttpsgithubcomaxel-download-acceleratoraxel">#</a></h4>
<p>Lightweight CLI download accelerator</p>
<h3 id="usenethttpswwwruanyifengcomblogusenet"><a href="https://www.ruanyifeng.com/blog/usenet/">USENET</a><a hidden class="anchor" aria-hidden="true" href="#usenethttpswwwruanyifengcomblogusenet">#</a></h3>
<h4 id="起源">起源<a hidden class="anchor" aria-hidden="true" href="#起源">#</a></h4>
<p>简单地说，USENET是一个巨大无比的网上讨论组，一般也称为&quot;新闻组&quot;（newsgroups）。你可以将它想象成一个包罗万象、无所不有的网上论坛，但是它又不同于我们通常看到的普通论坛。这要从它的起源说起。</p>
<p>上个世纪70年代末，当时还没有互联网和浏览器，它们都要在十多年后才会出现。那时所谓&quot;上网&quot;，就是用modem（调制解调器），拨一个电话号码，将自己的电脑连到另一台电脑（也称&quot;主机&quot;），收收邮件，看看上面系统管理员发的通告。如果想换一台主机看看，那就必须先挂断，再拨另外一个电话号码。</p>
<p>这样的上网方式，很不利于开展多人的讨论。由于是拨号上网，只有地理位置相近的用户，才会登录同一台主机。很难想象，同一台机器的登录用户，既有东岸的纽约人，也有西岸的洛杉矶人。即使长途电话费不是问题，当时的主机也没有能力同时负担太多的远程终端。因此，迫切需要一种大规模的、分布式的、多中心的远程信息交换手段。</p>
<p>1979年，Duke大学的两个研究生Tom Truscott和Jim Ellis，提出一种分布式的网上讨论组的构想。这种讨论组创建之初，主要是供UNIX爱好者协会（USENIX）的成员使用，因此就被定名为USENET。当然，后来全世界的用户都在使用它。</p>
<h4 id="运行机制">运行机制<a hidden class="anchor" aria-hidden="true" href="#运行机制">#</a></h4>
<p>USENET的运行机制其实非常简单。对于用户来说，只有三步。</p>
<p>1）网络服务提供商（ISP）在一个网络中，设定一台服务器作为USENET专用服务器，再将它的网址告诉用户。</p>
<p>2）用户想要发言的时候，就向这个网址发送帖子（post），这与发送Email很相似，但是两者格式不一样，在USENET上发言必须使用专用的客户端。不过，现在大多数的Email客户端都带有新闻组功能，最常见的Outlook Express的设置可以参考网上的说明。</p>
<p>3）查看其他人的发言时，就必须从服务器上下载其他人的帖子。下载完成后，如果想回复某人的帖子，就再重复第二步。</p>
<p>可以看到，这个过程同邮件列表的运行几乎一模一样，不同之处在于，USENET服务器每天会同其他USENET服务器交换帖子。这就是说，全世界所有的USENET服务器最终都可以互相交换帖子，保持内容的同步。所以理论上，不管你的帖子是发到哪一台服务器上，最终全世界的人们都会看到，并且会从世界各地给你回复。</p>
<p>因此，USENET就有一个其他交流机制所没有的优点，即这是一个真正的全世界参与的讨论组。</p>
<h4 id="内容结构">内容结构<a hidden class="anchor" aria-hidden="true" href="#内容结构">#</a></h4>
<p>由于USENET中的讨论内容无所不包，所以必须根据主题分类。每一个主题就是一个&quot;频道&quot;，对这个主题感兴趣的用户就订阅这个频道。</p>
<p>USENET中的主题分类采用等级制（hierarchies），在形式上同域名很相似，即&quot;一级主题.二级主题.三级主题&hellip;.&quot;，中间以小数点分隔。</p>
<p>一级主题有9个。</p>
<blockquote>
<p>* comp.*: 与计算机相关的讨论。（computer-related discussions，比如comp.software, comp.sys.amiga）</p>
<p>* misc.*: 各种不属于其他分类的主题。（Miscellaneous topics，比如misc.education, misc.forsale, misc.kids）</p>
<p>* news.*: 对USENET本身的讨论（比如news.groups, news.admin）</p>
<p>* rec.*: 休闲和娱乐（Recreation and entertainment，比如rec.music, rec.arts.movies）</p>
<p>* sci.*: 与科学相关的讨论。（Science related discussions，比如sci.psychology, sci.research）</p>
<p>* soc.*: 与社会相关的讨论。（Social discussions，比如soc.college.org, soc.culture.african）</p>
<p>* talk.*: 各种争议性话题的讨论。（Talk about various controversial topics，比如talk.religion, talk.politics, talk.origins）</p>
<p>* humanities.*: 艺术、文学、哲学方面的讨论。（Fine arts, literature, and philosophy，比如humanities.classics, humanities.design.misc）</p>
<p>* alt.*: 自由讨论区。（alternative）</p>
</blockquote>
<p>这9个一级主题中，除了alt.*以外，都不能自行设立讨论区。只有在alt主题区中，可以自己发起主题&quot;频道&quot;。</p>
<h4 id="二进制内容">二进制内容<a hidden class="anchor" aria-hidden="true" href="#二进制内容">#</a></h4>
<p>USENET最初设计的时候，只打算用来传递文本信息，没有考虑传递二进制数据（也就是&quot;文件&quot;）。但是，随着互联网的发展，不传递二进制数据看上去是不可能的。</p>
<p>于是，专门的编码方式被设计了出来，使得二进制文件可以转换成文本文件，在USENET上传递，用户下载以后再传换成原来的格式。这时，USENET就不仅是一个讨论组了，而成了传递文件的一种手段，图片、音频和视频都可以通过USENET传播。</p>
<p>事实上，如今USENET上的流量，99%都已经是二进制文件了。它们大部分都在alt.binaries这个主题中传播。由于不受监管，所以各种各样的文件都有。</p>
<h4 id="收费服务">收费服务<a hidden class="anchor" aria-hidden="true" href="#收费服务">#</a></h4>
<p>根据一项统计，2007年4月USENET上一天的流量为3.12TB，且还在快速增加中。这么大的流量，使得世界上提供USENET的服务商肯定不会很多。大家可以查看这个<a href="http://www.exit109.com/~jeremy/news/providers/providers.html">网页</a>，上面有USENET提供商的不完全列表。</p>
<p>这些服务商，又分为免费和收费两种。免费的USENET绝大多数都不提供二进制文件下载，查看<a href="https://groups.google.com/group/alt.free.newsservers">alt.free.newsservers</a>主题可以获得最新的免费USENET服务器的信息。</p>
<p>在收费服务商中，名气比较大的是<a href="https://www.giganews.com/?a=ruanyf">GIGANEWS</a>，它提供多种收费账户供用户选择。其中白金用户每月费用为19.99美元，可以无限量下载，14天内不满意可以退款。如果你是一个狂热的下载爱好者，我强烈推荐去购买一个账户。</p>
<h4 id="google-groups">Google Groups<a hidden class="anchor" aria-hidden="true" href="#google-groups">#</a></h4>
<p><a href="https://groups.google.com/">Google Groups</a>也提供免费USENET服务。（当然，没有二进制文件下载。）我会另写文章专门介绍，这里就省略了。</p>
<h3 id="百度网盘httpspanbaiducomdownloadlinux"><a href="https://pan.baidu.com/download#linux">百度网盘</a><a hidden class="anchor" aria-hidden="true" href="#百度网盘httpspanbaiducomdownloadlinux">#</a></h3>
<h4 id="阿里云盘小白羊版httpsgithubcomliupan1890aliyunpan"><a href="https://github.com/liupan1890/aliyunpan">阿里云盘小白羊版</a><a hidden class="anchor" aria-hidden="true" href="#阿里云盘小白羊版httpsgithubcomliupan1890aliyunpan">#</a></h4>
<h4 id="baidupcs-gohttpsgithubcomqjfoidnhbaidupcs-go"><a href="https://github.com/qjfoidnh/BaiduPCS-Go">BaiduPCS-Go</a><a hidden class="anchor" aria-hidden="true" href="#baidupcs-gohttpsgithubcomqjfoidnhbaidupcs-go">#</a></h4>
<h3 id="坚果云">坚果云<a hidden class="anchor" aria-hidden="true" href="#坚果云">#</a></h3>
<h3 id="xdmhttpsgithubcomsubhra74xdm"><a href="https://github.com/subhra74/xdm">xdm</a><a hidden class="anchor" aria-hidden="true" href="#xdmhttpsgithubcomsubhra74xdm">#</a></h3>
<p>Powerfull download accelerator and video downloader</p>
<h3 id="motrixhttpsgithubcomagalwoodmotrix"><a href="https://github.com/agalwood/Motrix">Motrix</a><a hidden class="anchor" aria-hidden="true" href="#motrixhttpsgithubcomagalwoodmotrix">#</a></h3>
<p>A full-featured download manager.</p>
<h3 id="thunderhttpsflathuborgappsdetailscomxunleithunder"><a href="https://flathub.org/apps/details/com.xunlei.Thunder">Thunder</a><a hidden class="anchor" aria-hidden="true" href="#thunderhttpsflathuborgappsdetailscomxunleithunder">#</a></h3>
<p>flatpak 版迅雷下载，用于下载 ed2k 链接。</p>
<h2 id="editor">Editor<a hidden class="anchor" aria-hidden="true" href="#editor">#</a></h2>
<h3 id="vscode">VSCode<a hidden class="anchor" aria-hidden="true" href="#vscode">#</a></h3>
<p><a href="https://cyhour.com/1638/#:~:text=%E4%B8%8D%E8%BF%87%E8%BA%AB%E5%A4%84%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%EF%BC%8C%E4%B8%AD%E5%9B%BD%E5%9B%BD%E5%86%85%E4%B8%8B%E8%BD%BD%20VSCode%20%E9%80%9F%E5%BA%A6%E6%AD%A3%E5%B8%B8%E6%83%85%E5%86%B5%E4%B8%8B%E6%AF%94%E8%BE%83%E6%85%A2%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%9C%89%E4%B8%A4%E4%B8%AA%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%EF%BC%9A%E4%B8%80%E6%98%AF%E8%B5%B0%20%E5%A4%96%E8%B4%B8%E5%B7%A5%E4%BD%9C%20%E4%B8%96%E7%95%8C%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%9C%EF%BC%9B%E4%BA%8C%E6%98%AF%E4%BD%BF%E7%94%A8%E4%B8%AD%E5%9B%BD%20cdn%20%E9%95%9C%E5%83%8F%E5%9C%B0%E5%9D%80%E4%B8%8B%E8%BD%BD%E3%80%82.%20%E6%96%B9%E6%B3%95%E4%BA%8C%E4%BD%BF%E7%94%A8,%E9%95%9C%E5%83%8F%E5%9C%B0%E5%9D%80%E4%B8%8B%E8%BD%BD%E6%AF%94%E8%BE%83%E7%AE%80%E5%8D%95%EF%BC%9A.%20%E6%AF%94%E5%A6%82%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E8%BD%BD%20VSCodeUserSetup-x64-1.52.1.exe%EF%BC%8C%E4%BC%9A%E5%BE%97%E5%88%B0%E8%BF%99%E4%B8%AA%E5%9C%B0%E5%9D%80%EF%BC%9A.%20https%3A%2F%2Faz764295.vo.msecnd.net%2Fstable%2Fea3859d4ba2f3e577a159bc91e3074c5d85c0523%2FVSCodeUserSetup-x64-1.52.1.exe.%20%E6%8A%8A%20stable%20%E5%89%8D%E5%9C%B0%E5%9D%80%E6%9B%BF%E6%8D%A2%E6%88%90%20vscode.cdn.azure.cn%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E6%9B%BF%E6%8D%A2%E5%90%8E%E5%9C%B0%E5%9D%80%EF%BC%9A.">中国国内下载 VSCode 速度慢问题解决</a>：使用 azure 中国 cdn 镜像地址加速下载 VSCode</p>
<p>将默认下载地址</p>
<pre tabindex="0"><code class="language-url" data-lang="url">https://az764295.vo.msecnd.net/stable/
</code></pre><p>替换为 <code>vscode.cdn.azure.cn</code></p>
<pre tabindex="0"><code class="language-url" data-lang="url">https://vscode.cdn.azure.cn/stable/
</code></pre><p><strong>自动换行</strong></p>
<p>将word wrap的off改成on</p>
<p><strong><a href="https://www.ruanyifeng.com/blog/2021/08/best-note-taking-software-for-programmers.html">最适合程序员的笔记软件</a></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">https://github.dev/<span style="color:#f92672">[</span>用户名<span style="color:#f92672">]</span>/<span style="color:#f92672">[</span>仓库名<span style="color:#f92672">]</span>
</code></pre></div><p><strong>大小写转换快捷键</strong></p>
<ul>
<li><strong>File</strong>-&gt;<strong>Preference</strong>-&gt;<strong>Keybord Shortcuts</strong> 或直接按<code>ctrl+k</code>+<code>ctrl+s</code></li>
<li>在上面的搜索栏中，输入 <strong>Transform</strong> 就可以看到有<strong>Transform to Uppercase</strong>和<strong>Trasnfrom to Lowercase</strong>的命令</li>
<li>设置快捷键</li>
</ul>
<h3 id="google-keep">Google Keep<a hidden class="anchor" aria-hidden="true" href="#google-keep">#</a></h3>
<p>Now I am using Google Keep.</p>
<p><a href="https://www.makeuseof.com/google-keep-keyboard-shortcuts/"><strong>Google Keep键盘快捷键</strong></a></p>
<table>
<thead>
<tr>
<th style="text-align:left">hortcut</th>
<th style="text-align:left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">J/K</td>
<td style="text-align:left">Next/previous note</td>
</tr>
<tr>
<td style="text-align:left">Shift + J/K</td>
<td style="text-align:left">Move note to next/previous position</td>
</tr>
<tr>
<td style="text-align:left">N/P</td>
<td style="text-align:left">Next/previous list item</td>
</tr>
<tr>
<td style="text-align:left">Shift + N/P</td>
<td style="text-align:left">Move list item to next/previous position</td>
</tr>
<tr>
<td style="text-align:left">C</td>
<td style="text-align:left">New note</td>
</tr>
<tr>
<td style="text-align:left">L</td>
<td style="text-align:left">New list</td>
</tr>
<tr>
<td style="text-align:left">/</td>
<td style="text-align:left">Search</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + A</td>
<td style="text-align:left">Select all</td>
</tr>
<tr>
<td style="text-align:left">E</td>
<td style="text-align:left">Archive</td>
</tr>
<tr>
<td style="text-align:left">#</td>
<td style="text-align:left">Delete</td>
</tr>
<tr>
<td style="text-align:left">F</td>
<td style="text-align:left">Pin/unpin</td>
</tr>
<tr>
<td style="text-align:left">X</td>
<td style="text-align:left">Select</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + G</td>
<td style="text-align:left">Toggle list and grid view</td>
</tr>
<tr>
<td style="text-align:left">Esc</td>
<td style="text-align:left">Close editor</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + 8</td>
<td style="text-align:left">Toggle checkboxes</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + ] / [</td>
<td style="text-align:left">Indent/dedent list item</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">Open shortcut list</td>
</tr>
<tr>
<td style="text-align:left">@</td>
<td style="text-align:left">Send feedback</td>
</tr>
</tbody>
</table>
<h3 id="joplinhttpscomputetechnologydailycom20210212cf916cdb6cfb498aac38d4fa50d785a2"><a href="https://computetechnologydaily.com/2021/02/12/cf916cdb6cfb498aac38d4fa50d785a2/">Joplin</a><a hidden class="anchor" aria-hidden="true" href="#joplinhttpscomputetechnologydailycom20210212cf916cdb6cfb498aac38d4fa50d785a2">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget -O - https://raw.githubusercontent.com/laurent22/joplin/dev/Joplin_install_and_update.sh | bash
</code></pre></div><p>joplin.desktop</p>
<pre tabindex="0"><code>[Desktop Entry]
Encoding=UTF-8
Name=Joplin
Comment=Joplin for Desktop
Exec=${HOME}/.joplin/Joplin.AppImage ${SANDBOXPARAM} %u
Icon=joplin
StartupWMClass=Joplin
Type=Application
Categories=Office;
MimeType=x-scheme-handler/joplin;
X-GNOME-SingleWindow=true // should be removed eventually as it was upstream to be an XDG specification
SingleMainWindow=true
</code></pre><h4 id="为知笔记">为知笔记<a hidden class="anchor" aria-hidden="true" href="#为知笔记">#</a></h4>
<h4 id="notion">notion<a hidden class="anchor" aria-hidden="true" href="#notion">#</a></h4>
<h4 id="思源笔记httpsgithubcomsiyuan-notesiyuanblobmasterreadme_zh_cnmd"><a href="https://github.com/siyuan-note/siyuan/blob/master/README_zh_CN.md">思源笔记</a><a hidden class="anchor" aria-hidden="true" href="#思源笔记httpsgithubcomsiyuan-notesiyuanblobmasterreadme_zh_cnmd">#</a></h4>
<h4 id="备份盘--同步盘-httpswwwzhihucomquestion388093965answer1335747294"><a href="https://www.zhihu.com/question/388093965/answer/1335747294">备份盘 &amp; 同步盘 </a><a hidden class="anchor" aria-hidden="true" href="#备份盘--同步盘-httpswwwzhihucomquestion388093965answer1335747294">#</a></h4>
<p>备份盘：</p>
<p><img loading="lazy" src="/Distributions/v2-f4cf6709c1022af4889fc1046fe575ea_720w.jpg" alt=""  />
</p>
<p>同步盘：</p>
<p><img loading="lazy" src="/Distributions/v2-3062823464aa9148b95eca6f5107d763_720w.jpg" alt=""  />
</p>
<h3 id="obsidianhttpsobsidianmd"><a href="https://obsidian.md/">Obsidian</a><a hidden class="anchor" aria-hidden="true" href="#obsidianhttpsobsidianmd">#</a></h3>
<p>闭源软件</p>
<h4 id="最适合程序员的笔记软件httpswwwruanyifengcomblog202108best-note-taking-software-for-programmershtml"><a href="https://www.ruanyifeng.com/blog/2021/08/best-note-taking-software-for-programmers.html">最适合程序员的笔记软件</a><a hidden class="anchor" aria-hidden="true" href="#最适合程序员的笔记软件httpswwwruanyifengcomblog202108best-note-taking-software-for-programmershtml">#</a></h4>
<p>程序员的笔记软件，应该满足下面几个条件。</p>
<ul>
<li>跨平台，同时支持桌面电脑（Windows，Mac，Linux）和手机（Android，iOS）。</li>
<li>随时同步，打开任何一台机器，都能接着上一次的工作继续写。</li>
<li>实时存储，如果软件突然关闭，也不会丢失内容。</li>
<li>支持 Markdown 格式，便于后期直接发布。</li>
<li>支持推送到远程 Git 仓库，产生历史版本，同时作为远程备份。</li>
</ul>
<p><a href="https://stackedit.io/">Stackedit.io</a> 和 <a href="https://hackmd.io/">HackMD.io</a>，都不是很理想。</p>
<p>GitHub 官方推出的 <a href="https://docs.github.com/en/codespaces/developing-in-codespaces/web-based-editor">github.dev</a>。只要访问 <code>https://github.dev/[用户名]/[仓库名]</code>，你就能在浏览器里面，使用 VS Code 编辑指定仓库。它实际上就是 VS Code 编辑器的 Web 版，并且与 Git 高度集成。GitHub 提供了一个快捷入口。 打开 GitHub 仓库主页，按一下小数点（<code>.</code>）这个键， 页面就会自动跳转到 VS Code 编辑环境。</p>
<p>如果你更希望使用手机原生 App，我推荐 <a href="https://obsidian.md/">Obsidian</a>。它有全平台的客户端，并且可以参考<a href="https://forum.obsidian.md/t/mobile-setting-up-ios-git-based-syncing-with-mobile-app-using-working-copy/16499">这篇文章</a>设置 Git 集成。</p>
<p>评论里还有很多推荐，选择一个合适的就行。</p>
<h4 id="安装">安装<a hidden class="anchor" aria-hidden="true" href="#安装">#</a></h4>
<p>使用 AppImage 报 <code>dlopen(): error loading libfuse.so.2</code> 错误：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install libfuse2
</code></pre></div><h4 id="自动同步">自动同步<a hidden class="anchor" aria-hidden="true" href="#自动同步">#</a></h4>
<p>全平台同步使用 <a href="https://github.com/remotely-save/remotely-save">remotely-save</a>，同时将文档备份到 Git。</p>
<p>我希望在每次关闭 Obsidian 窗口（即编辑完毕后）自动同步内容到 Git 仓库</p>
<ul>
<li>
<p>obsidian.desktop</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
Name<span style="color:#f92672">=</span>Obsidian
GenericName<span style="color:#f92672">=</span>Markdown Editor
Exec<span style="color:#f92672">=</span>/home/kurome/.obsidian/obsidian
Icon<span style="color:#f92672">=</span>obsidian
Type<span style="color:#f92672">=</span>Application
StartupNotify<span style="color:#f92672">=</span>true
Categories<span style="color:#f92672">=</span>Office;WordProcessor;
MimeType<span style="color:#f92672">=</span>x-scheme-handler/obsidian;text/html;text/markdown;text/x-markdown;
</code></pre></div></li>
<li>
<p>obsidian</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/bash
</span><span style="color:#75715e"></span>TIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>date <span style="color:#e6db74">&#39;+%Y%m%d%H%M%S&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
NOTEON<span style="color:#f92672">=</span>$HOME/Documents/Note_ON

<span style="color:#66d9ef">function</span> Git_Sync<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  cd $NOTEON
  git pull
  echo <span style="color:#e6db74">&#39;#Ignore files larger than 100MB&#39;</span>
  cat .gitignore_default &gt; .gitignore
  find . -size +100M | sed <span style="color:#e6db74">&#39;s|^./||g&#39;</span> | cat &gt;&gt; .gitignore
  git add .
  git commit -m <span style="color:#e6db74">&#34;Update-</span><span style="color:#e6db74">${</span>TIME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
  git push -v
<span style="color:#f92672">}</span>

/home/kurome/.obsidian/Obsidian-0.15.6.AppImage

trap Git_Sync EXIT

</code></pre></div></li>
</ul>
<h3 id="typorahttpssupporttyporaioquick-start"><a href="https://support.typora.io/Quick-Start/">Typora</a><a hidden class="anchor" aria-hidden="true" href="#typorahttpssupporttyporaioquick-start">#</a></h3>
<p>安装：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE</span>
$ wget -qO - https://typora.io/linux/public-key.asc | $ sudo apt-key add -
<span style="color:#75715e"># add Typora&#39;s repository</span>
$ sudo add-apt-repository <span style="color:#e6db74">&#39;deb https://typora.io/linux ./&#39;</span>
$ sudo apt-get update
<span style="color:#75715e"># install typora</span>
$ sudo apt-get install typora
</code></pre></div><p>如果安装的时二进制包，则建立 <code>typora.desktop</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gedit ~/.local/share/applications/typora.desktop
<span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
Name<span style="color:#f92672">=</span>Typora
Comment<span style="color:#f92672">=</span>a minimal Markdown reading &amp; writing app. Change Log: <span style="color:#f92672">(</span>https://typora.io/windows/dev_release.html<span style="color:#f92672">)</span>
GenericName<span style="color:#f92672">=</span>Markdown Editor
Exec<span style="color:#f92672">=</span>/home/kurome/.typora/Typora %U
Icon<span style="color:#f92672">=</span>typora
Type<span style="color:#f92672">=</span>Application
StartupNotify<span style="color:#f92672">=</span>true
Categories<span style="color:#f92672">=</span>Office;WordProcessor;
MimeType<span style="color:#f92672">=</span>text/markdown;text/x-markdown;
</code></pre></div><p>typora 有时会出现丢数据的现象，很困扰；特别是围栏代码块，失去了缩进，成了一行，完全不可阅读了。但是其他的 Markdown Editor 用的不习惯，例如 VSCode、Sublime、ghostwriter、marktext。因此最好通过 ppa 安装，获取 Typora 最新的版本。</p>
<p>在Joplin下，菜单Tools-&gt;Options-&gt;General&gt;Text editor command可以设置第三方编辑软件。</p>
<p>配置 <code>File</code> &gt; <code>Preferences</code>：</p>
<ul>
<li><code>General</code> &gt; <code>Auto Save</code>: on</li>
<li><code>Editor</code> &gt; <code>Spell Check</code>: Disable</li>
<li><code>Image</code> &gt; <code>Use relative path if possible</code>: on</li>
<li><code>Markdown</code> &gt; <code>Syntax Support</code> &gt; <code>Inline Math</code>: on</li>
</ul>
<p>有时候标点符号没有与文字对齐，比如句号在右中，而不是右下，可以将语言设置为中文（it works for me）。</p>
<p><a href="https://support.typora.io/purchase/#can-i-use-typora-for-free-"><strong>Can I use Typora for free ?</strong></a></p>
<p>You will have a 15-day free trial before the purchase. If you use the dev version or the Linux version, you will have much longer trial time if you keep Typora updated. However, we may show a “trial button”, disable certain features or shorten trial time in the future, but most functions will be kept.</p>
<p><a href="https://support.typora.io/purchase/#basic"><strong>Typora’s pricing plan</strong></a></p>
<p>It is one-time payment, not subscription.</p>
<p>A Typora license is granted to the “user”, which can be activated on up to 3 devices from one person for one license with no expiration time.</p>
<p>You will have 15 days to evaluate Typora for free before purchasing a license code. If you’re not satisfied with Typora for any reason, you will be able to get a full refund within 30 days from the license purchase.</p>
<p><strong>Crack Typora 1.1.5 (<a href="https://www.suyin-blog.club/2021/3RVTXAY/">一</a> / <a href="https://www.cnblogs.com/LiuDanK/articles/15638323.html">二</a>)</strong></p>
<ol>
<li>
<p>安装依赖环境：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install python3-pip nodejs
</code></pre></div></li>
<li>
<p>新建将要使用的目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd ~/Downloads
$ mkdir workstation/outfile
$ mkdir workstation/outappasar
</code></pre></div></li>
<li>
<p>克隆脚本文件，下载安装包：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/Mas0nShi/typoraCracker.git
$ wget https://typora.io/linux/Typora-linux-x64.tar.gz
$ tar xvzf Typora-linux-x64.tar.gz
</code></pre></div><p><a href="https://github.com/Mas0nShi/typoraCracker.git">原始仓库地址</a>、<a href="https://gitee.com/suyin-long/typora-cracker">Gitee 备份地址</a></p>
</li>
<li>
<p>安装依赖:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r typoraCracker/requirements.txt
</code></pre></div><p><a href="http://huanyouchen.github.io/2018/04/27/pip-install-Missing-dependencies-for-SOCKS-support/">Missing dependencies for SOCKS support</a>：</p>
<p>关闭代理，安装 <code>pysocks</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Unset socks proxy</span>
$ unset all_proxy    
$ unset ALL_PROXY
<span style="color:#75715e"># Install missing dependencies:</span>
$ pip install pysocks
<span style="color:#75715e"># Reset proxy</span>
$ source ~/.bashrc
</code></pre></div></li>
<li>
<p>执行解包命名：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir -p workstation/outfile/
$ python3 typoraCracker/typora.py bin/Typora-linux-x64/resources/app.asar workstation/outfile/
</code></pre></div></li>
<li>
<p>替换掉<code>License.js</code>文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cp typoraCracker/example/patch/License.js workstation/outfile/dec_app/
</code></pre></div></li>
<li>
<p>打包<code>app.asar</code>文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python3 typoraCracker/typora.py -u workstation/outfile/dec_app workstation/outappasar
</code></pre></div></li>
<li>
<p>将打包回来的<code>app.asar</code>文件重新丢到<code>Typora</code>的<code>resources</code>目录下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cp workstation/outappasar/app.asar bin/Typora-linux-x64/resources/
</code></pre></div></li>
<li>
<p>授权码生成</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ node typoraCracker/example/keygen.js
CAJ8Q4-ETFCZ4-RH3X85-GMKD68
</code></pre></div></li>
<li>
<p>激活：授权码输入生成的码，邮箱输入<code>crack@example.com</code>，完事。</p>
</li>
</ol>
<p>综上，破解 Typora 其实就是破解 app.asar 文件，破解一次 Typora 后，保留<a href="https://gitee.com/suyin-long/typora-cracker">破解的 app.asar</a>，不论在哪个平台，用破解后的 app.asar 覆盖原本的 resources/app.asar，就能实现破解 Typora（要求版本一致）。</p>
<p>更多：</p>
<ul>
<li><a href="https://www.52pojie.cn/thread-1553967-1-1.html">Typora 授权解密与剖析</a></li>
<li><a href="https://github.com/Mas0nShi/typoraCracker">typoraCracker</a></li>
<li><a href="https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=1561020">【Mac】记一次对付费 Markdown 软件 Typora 1.0 的逆向</a></li>
</ul>
<p><strong>Recover Unsaved Drafts</strong></p>
<p>Preferences =&gt; General =&gt; Save &amp; Recover =&gt; Recover Unsaved Drafts =&gt; 选择要恢复的文档，打开后另存为到之前保存的地址覆盖它即可</p>
<p><a href="https://support.typora.io/Shortcut-Keys/"><strong>Ctrl 5 of typora does not work</strong></a></p>
<p>不知道哪里覆盖了。重新定义一个快捷键。</p>
<p>Open <code>Menu</code> → <code>Preference</code> in Typora, then click “Open Advanced Settings”.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#e6db74">&#34;keyBinding&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
    <span style="color:#f92672">&#34;Heading 5&#34;</span>: <span style="color:#e6db74">&#34;Alt+5&#34;</span>,
}<span style="color:#960050;background-color:#1e0010">,</span>
</code></pre></div><p><strong>主题推荐</strong></p>
<p>GitHub 主题，很习惯了：</p>
<ul>
<li><a href="https://theme.typora.io/theme/D42ker/">D42ker GitHub</a></li>
<li><a href="https://theme.typora.io/theme/Github/">Github</a></li>
</ul>
<h4 id="marktexthttpsgithubcommarktextmarktext"><a href="https://github.com/marktext/marktext">MarkText</a><a hidden class="anchor" aria-hidden="true" href="#marktexthttpsgithubcommarktextmarktext">#</a></h4>
<h3 id="foxit-pdf-readerhttpswwwfoxitcompdf-reader"><a href="https://www.foxit.com/pdf-reader/">Foxit PDF Reader</a><a hidden class="anchor" aria-hidden="true" href="#foxit-pdf-readerhttpswwwfoxitcompdf-reader">#</a></h3>
<p>Industry’s most powerful PDF reader.</p>
<h4 id="portable-pdf-unlockerhttpssourceforgenetprojectsportablepdfunlockerfileslatestdownloadpdfcrackhttppdfcracksourceforgenet"><a href="https://sourceforge.net/projects/portablepdfunlocker/files/latest/download">Portable PDF Unlocker</a>/<a href="http://pdfcrack.sourceforge.net/">PDFCrack</a><a hidden class="anchor" aria-hidden="true" href="#portable-pdf-unlockerhttpssourceforgenetprojectsportablepdfunlockerfileslatestdownloadpdfcrackhttppdfcracksourceforgenet">#</a></h4>
<p><a href="https://zhuanlan.zhihu.com/p/32261755"><strong>Print the Secured PDF in Google Chrome</strong></a></p>
<p>有的用户虽然记得PDF文档的密码，但由于经常使用这个PDF文档，为了方便使用也想将这个密码去除。而去除的方法也非常简单，用最常见的谷歌浏览器就可以做到。首先运行谷歌浏览器，将需要去除密码的PDF文档拖曳进浏览器窗口。这时会弹出一个对话框，输入相应的密码就可以看到内容。接着在文档内容中点击鼠标右键，选择菜单里面的“打印”命令。</p>
<p>在弹出的打印窗口点击左侧“目标”中的“更改”按钮，在弹出的对话框中选择“本地目标”中的“另存为PDF”命令。返回到打印窗口后直接点击“保存”按钮，在弹出的对话框里面设置文档的保存位置，再点击“保存”按钮就会将当前的PDF文档另外存储一份，这样也就相当于去除了PDF文档的密码了。</p>
<p><strong>Online PDF Password Remover</strong></p>
<ul>
<li><a href="https://smallpdf.com/unlock-pdf">https://smallpdf.com/unlock-pdf</a></li>
<li><a href="https://www.ilovepdf.com/unlock_pdf">https://www.ilovepdf.com/unlock_pdf</a></li>
</ul>
<p><a href="https://www.freeviewer.org/blog/how-to-unlock-a-pdf-for-editing-without-password/">**How to Unlock A PDF for Editing Without Password? [Five Methods]**</a></p>
<h4 id="pdftkhttpsaskubuntucomquestions828720how-to-remove-the-password-from-a-pdf"><a href="https://askubuntu.com/questions/828720/how-to-remove-the-password-from-a-pdf">pdftk</a><a hidden class="anchor" aria-hidden="true" href="#pdftkhttpsaskubuntucomquestions828720how-to-remove-the-password-from-a-pdf">#</a></h4>
<p><a href="https://forum.suse.org.cn/t/topic/14862"><strong>给 pdf 电子书加目录</strong></a></p>
<p>对许多人来说 pdf 格式的电子书最头疼的两件事： → 1) 每页都是没经过 OCR 处理过的图片 2) 没有目录。</p>
<p>以下这个批量加目录的方法我用好久了，见过我这么操作过的都想学一下，这里详细地记录以下，也方便以后有人再问的时候 <code>:)</code></p>
<p>用到的软件是 pdftk <a href="https://gitlab.com/pdftk-java/pdftk">pdftk-java</a> 。linux 发行版一般都有这个这个软件可以直接安装。</p>
<p>pdftk 的用法就是：输出 (dump_data) pdf 的元信息 (data.txt)，编辑以后，重新倒入 (update_info) 到 pdf 文件里面</p>
<p>主要是这两条命令:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pdftk <span style="color:#f92672">[</span>my.pdf<span style="color:#f92672">]</span> dump_data &gt; <span style="color:#f92672">[</span>data.txt<span style="color:#f92672">]</span>
pdftk <span style="color:#f92672">[</span>my.pdf<span style="color:#f92672">]</span> update_info <span style="color:#f92672">[</span>data.txt<span style="color:#f92672">]</span> output my2.pdf
</code></pre></div><p>在第一条命令输出的 <code>data.txt</code> 里面加入如下的内容，然后通过第二条命令就可以创建新的目录条目</p>
<pre tabindex="0"><code>BookmarkBegin
BookmarkTitle: name
BookmarkLevel: level
BookmarkPageNumber: page number
</code></pre><p>另外电子书的第一页通常是封面，紧接着的是其它的东西。但是书里面标注的页码的第一页往往后面的某页。</p>
<p>PDF 支持把页码标注成其它的格式 (page_labels)，第一页标注成 cover，第二到第十页标注成罗马数字，然后从第十一页标注成 1,2,3,4,5,6…</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75715e"># 把第一页标注成名字为 cover 的非数字 (NoNumber)</span>
<span style="color:#a6e22e">PageLabelBegin</span>
<span style="color:#a6e22e">PageLabelNewIndex: 1</span>
<span style="color:#a6e22e">PageLabelStart: 1</span>
<span style="color:#a6e22e">PageLabelPrefix: cover</span>
<span style="color:#a6e22e">PageLabelNumStyle: NoNumber</span>

<span style="color:#75715e"># 从第二页 (PageLabelNewIndex) 开始标注成小写罗马数字 (LowercaseRomanNumerals)</span>
<span style="color:#a6e22e">PageLabelBegin</span>
<span style="color:#a6e22e">PageLabelNewIndex: 2</span>
<span style="color:#a6e22e">PageLabelStart: 1 # 从数字 1 开始数，如果这里变成 3</span>  <span style="color:#f92672">=</span><span style="color:#e6db74">&gt; 起始的罗马数字会是 iii</span>
<span style="color:#a6e22e">PageLabelNumStyle: LowercaseRomanNumerals</span>

<span style="color:#75715e"># 从 {true start page} 开始用普通的数字标注</span>
<span style="color:#a6e22e">PageLabelBegin</span>
<span style="color:#a6e22e">PageLabelNewIndex: {true start page}</span>
<span style="color:#a6e22e">PageLabelStart: 1</span>
<span style="color:#a6e22e">PageLabelNumStyle: DecimalArabicNumerals</span>
</code></pre></div><p>对于一本书，这种手动添加的方法会很慢，下面是一个小脚本来半自动化。</p>
<hr>
<p>由于电子书 100% 可以搜索到目录 <code>编号 标题 页码</code>。如果搜索不到，也可以直接从书里面复制。</p>
<p>复制粘贴一下，调整成这种格式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">14
I: Reduction Semantics	1
	1 Semantics via Syntax	5
	2 Analyzing Syntactic Semantics	13
	3 The λ-Calculus	23
	4 ISWIM	45
II: PLT Redex	201
	11 The Basics	205
	12 Variables and Meta-functions	217
	13 Layered Development	227
	14 Testing	237
......
</code></pre></div><p>第一行是对于人类，而非 pdf 格式来说真正的第一页</p>
<p>后面根据行首 tab 的数量来决定目录的层级</p>
<p>每行后面的数字是页码</p>
<p>然后用这个小脚本 <code>toc-gen.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#!/usr/bin/env python3</span>

<span style="color:#75715e">#</span>
<span style="color:#75715e"># Usage</span>
<span style="color:#75715e"># toc-gen.py  &lt; edited-toc.txt</span>
<span style="color:#75715e">#</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">make_offset</span>(off: int):
    <span style="color:#66d9ef">if</span> off <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
        print(<span style="color:#e6db74">&#34;&#34;&#34;PageLabelBegin
</span><span style="color:#e6db74">PageLabelNewIndex: 1
</span><span style="color:#e6db74">PageLabelStart: 1
</span><span style="color:#e6db74">PageLabelPrefix: cover
</span><span style="color:#e6db74">PageLabelNumStyle: NoNumber&#34;&#34;&#34;</span>)

    <span style="color:#66d9ef">if</span> off <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span>:
        print(<span style="color:#e6db74">&#34;&#34;&#34;PageLabelBegin
</span><span style="color:#e6db74">PageLabelNewIndex: 2
</span><span style="color:#e6db74">PageLabelStart: 1
</span><span style="color:#e6db74">PageLabelNumStyle: LowercaseRomanNumerals&#34;&#34;&#34;</span>)

    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;&#34;&#34;PageLabelBegin
</span><span style="color:#e6db74">PageLabelNewIndex: </span><span style="color:#e6db74">{</span>off<span style="color:#e6db74">}</span><span style="color:#e6db74">
</span><span style="color:#e6db74">PageLabelStart: 1
</span><span style="color:#e6db74">PageLabelNumStyle: DecimalArabicNumerals&#34;&#34;&#34;</span>)


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">make_bookmark</span>(t: str, l: int, p: int):
    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;&#34;&#34;BookmarkBegin
</span><span style="color:#e6db74">BookmarkTitle: </span><span style="color:#e6db74">{</span>t<span style="color:#e6db74">}</span><span style="color:#e6db74">
</span><span style="color:#e6db74">BookmarkLevel: </span><span style="color:#e6db74">{</span>l<span style="color:#e6db74">}</span><span style="color:#e6db74">
</span><span style="color:#e6db74">BookmarkPageNumber: </span><span style="color:#e6db74">{</span>p<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;&#34;&#34;</span>)


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    offset <span style="color:#f92672">=</span> int(input())
    make_offset(offset)
    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
        <span style="color:#66d9ef">try</span>:
            line <span style="color:#f92672">=</span> input()
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> line<span style="color:#f92672">.</span>strip():
                <span style="color:#66d9ef">break</span>
        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">EOFError</span>:
            <span style="color:#66d9ef">break</span>

        title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">.</span>join(line<span style="color:#f92672">.</span>split()[<span style="color:#ae81ff">0</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
        n_of_tabs <span style="color:#f92672">=</span> len(line) <span style="color:#f92672">-</span> len(line<span style="color:#f92672">.</span>lstrip())
        page <span style="color:#f92672">=</span> int(line<span style="color:#f92672">.</span>split()[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])

        make_bookmark(t<span style="color:#f92672">=</span>title,
                      l<span style="color:#f92672">=</span>n_of_tabs <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>,
                      p<span style="color:#f92672">=</span>page <span style="color:#f92672">+</span> offset)
</code></pre></div><p>来获取这些内容，把这些内容粘贴到 <code>[data.txt]</code> 后面，然后再用 pdftk 的第二条命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">PageLabelBegin
PageLabelNewIndex: 1
PageLabelStart: 1
PageLabelPrefix: cover
PageLabelNumStyle: NoNumber
PageLabelBegin
PageLabelNewIndex: 2
PageLabelStart: 1
PageLabelNumStyle: LowercaseRomanNumerals
PageLabelBegin
PageLabelNewIndex: 14
PageLabelStart: 1
PageLabelNumStyle: DecimalArabicNumerals
BookmarkBegin
BookmarkTitle: Reduction Semantics
BookmarkLevel: 1
BookmarkPageNumber: 15
BookmarkBegin
BookmarkTitle: Semantics via Syntax
BookmarkLevel: 2
BookmarkPageNumber: 19
BookmarkBegin
BookmarkTitle: Analyzing Syntactic Semantics
BookmarkLevel: 2
BookmarkPageNumber: 27
BookmarkBegin
BookmarkTitle: The λ-Calculus
BookmarkLevel: 2
BookmarkPageNumber: 37
BookmarkBegin
BookmarkTitle: ISWIM
BookmarkLevel: 2
BookmarkPageNumber: 59
BookmarkBegin
BookmarkTitle: An Abstract Syntax Machine
BookmarkLevel: 2
BookmarkPageNumber: 79
BookmarkBegin
BookmarkTitle: Abstract Register Machines
BookmarkLevel: 2
BookmarkPageNumber: 103
BookmarkBegin
BookmarkTitle: Tail Calls and More Space Savings
BookmarkLevel: 2
BookmarkPageNumber: 121
BookmarkBegin
BookmarkTitle: Control: Errors, Exceptions, and Continuations
BookmarkLevel: 2
BookmarkPageNumber: 129
BookmarkBegin
BookmarkTitle: State: Imperative Assignment
..............
</code></pre></div><p><strong>Bingo!</strong> 这下舒服了 <code>:)</code></p>
<h3 id="tesseracthttpsgithubcomtesseract-ocrtesseract"><a href="https://github.com/tesseract-ocr/tesseract">Tesseract</a><a hidden class="anchor" aria-hidden="true" href="#tesseracthttpsgithubcomtesseract-ocrtesseract">#</a></h3>
<p>Tesseract Open Source OCR Engine</p>
<p>更多 OCR 软件请看：<a href="https://en.wikipedia.org/wiki/Comparison_of_optical_character_recognition_software">Comparison of optical character recognition software</a></p>
<p>Evaluation：An analysis of the accuracy and reliability of the OCR packages Google Docs OCR, Tesseract, ABBYY FineReader, and Transym, employing a dataset including 1227 images from 15 different categories concluded Google Docs OCR and ABBYY to be performing better than others.</p>
<h4 id="ocrmypdfhttpsgithubcomocrmypdfocrmypdf"><a href="https://github.com/ocrmypdf/OCRmyPDF">OCRmyPDF</a><a hidden class="anchor" aria-hidden="true" href="#ocrmypdfhttpsgithubcomocrmypdfocrmypdf">#</a></h4>
<p>OCRmyPDF adds an OCR text layer to scanned PDF files, allowing them to be searched</p>
<h4 id="pandaocrhttpsgithubcommiaomiaosoftpandaocr"><a href="https://github.com/miaomiaosoft/PandaOCR">PandaOCR</a><a hidden class="anchor" aria-hidden="true" href="#pandaocrhttpsgithubcommiaomiaosoftpandaocr">#</a></h4>
<p>PandaOC/R - 多功能OCR图文识别+翻译+朗读+弹窗+公式+表格+图床+搜图+二维码</p>
<h4 id="gimagereaderhttpsgithubcommanisandrogimagereader"><a href="https://github.com/manisandro/gImageReader">gImageReader</a><a hidden class="anchor" aria-hidden="true" href="#gimagereaderhttpsgithubcommanisandrogimagereader">#</a></h4>
<p>A Gtk/Qt front-end to tesseract-ocr.</p>
<h4 id="ocrfeederhttpswikignomeorgactionshowappsocrfeederactionshowredirectocrfeeder"><a href="https://wiki.gnome.org/action/show/Apps/OCRFeeder?action=show&amp;redirect=OCRFeeder">OCRfeeder</a><a hidden class="anchor" aria-hidden="true" href="#ocrfeederhttpswikignomeorgactionshowappsocrfeederactionshowredirectocrfeeder">#</a></h4>
<p>支持多个 OCR 后端，例如<a href="http://en.wikipedia.org/wiki/Tesseract_(software)">Tesseract</a>、<a href="http://en.wikipedia.org/wiki/CuneiForm_(software)">CuneiForm</a>、<a href="http://en.wikipedia.org/wiki/GOCR">GOCR</a>、<a href="http://en.wikipedia.org/wiki/Ocrad">Ocrad</a></p>
<h4 id="tianruoocrhttpsgithubcomanylistentianruoocr"><a href="https://github.com/AnyListen/tianruoocr">tianruoocr</a><a hidden class="anchor" aria-hidden="true" href="#tianruoocrhttpsgithubcomanylistentianruoocr">#</a></h4>
<p>简介：基于天若幽心开源的代码进行完善制作而成，进行了简单重构，移除了更新的弹窗。</p>
<p>已停止维护，欢迎使用新版跨平台 OCR 工具（<a href="https://github.com/AnyListen/tools-ocr">树洞 OCR 文字识别</a>），跟之前天若OCR使用习惯出入较大，且不支持翻译。</p>
<h4 id="marguerite-答-orchttpsforumsuseorgcntocr-opensuse23799uhsiung"><a href="https://forum.suse.org.cn/t/ocr-opensuse/2379/9?u=hsiung">marguerite 答 ORC</a><a hidden class="anchor" aria-hidden="true" href="#marguerite-答-orchttpsforumsuseorgcntocr-opensuse23799uhsiung">#</a></h4>
<p>我来告诉你什么是 OCR：</p>
<p>OCR 说白了就是，把一个特定字体的某个字变成计算机可匹配的位置数据，比如在 50x50 像素的格子里，「儿」这个字的撇的黑色像素点落在大概 (30~45, 0~100) 这个范围内，然后把图片进行切割细分，得到许多个 50x50 的格子，在这个格子里 (30~45, 0~100) 它有黑色像素点，那么就非常可能是「儿」字。当然也可能是别的字，究竟是什么字，常用汉字就那么多个，这是概率问题。</p>
<p>而 OCR 的重点是：</p>
<ol>
<li>字体。你针对宋体的 OCR 训练数据拿到黑体上识别率不见得高。</li>
<li>训练。所谓的训练就是让计算机匹配时所遵守的概率无限趋近于现实。你可能需要拿出比如 3 万个字（一篇文章），先用默认的识别一遍（这涉及到了「如何根据某个特定字体制作出默认的数据」），然后逐字逐句去挑错，再改进默认数据（这涉及到了「你需要会编程，能够写出一个根据 tesseract 库改数据的软件」），最后越改这个数据越接近现实。</li>
</ol>
<p>最后才是拿你训练过的数据去进行我上面做过的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tesseract ./test.png result -l chi_sim
</code></pre></div><p>参考、归纳、脑补自：http://miphol.com/muse/2013/05/tesseract-ocr.html</p>
<p>这是 OCR 工作的基本原理和流程，这完全不可能是一个非程序员做的事情，程序员也懒得做这种事情，这是一种苦逼的体力劳动。</p>
<p>Windows 下的 OCR 软件比如微软 word 自带的那个，ABBYY FineReader（这个最好，而且可以 wine）、以及汉王的软件，都是多少苦逼程序员一起，经历了这种枯燥乏味的流程后的结果。</p>
<p>Linux 下的 OCR 软件都是开源的「框架」，比如 tesseract 和你之前问过的 ocropus，它们只是为在 Linux 下进行这种苦逼工作提供了一个基础，提供了可能性，并不是像你要求的那样拿来就能用的东西。因为没有训练过的数据，你安装的中文数据包只是可供你拿来训练的数据。</p>
<p>何况在 Linux 下训练了也没用，OCR 最大的需求是 word 文档转出来的 PDF 和起点网站吧，那些用的字体可不是文泉驿。你现在能够得到的可供训练的数据估计就是 Google 根据 Droid Sans 弄出来的，训练 1 万年也只能识别 Droid Sans，问题是你能把纸面上的字体改了么。想要微软字体的数据？抱歉，微软是商业字体啊。</p>
<p>所以我觉得现在是你对你需求的描述和理解就不对。钻进死胡同了。</p>
<h3 id="wpshttpswwwwpscomdownload"><a href="https://www.wps.com/download/">WPS</a><a hidden class="anchor" aria-hidden="true" href="#wpshttpswwwwpscomdownload">#</a></h3>
<p>WPS Office is a lightweight, feature-rich comprehensive office suite with high compatibility.</p>
<p><a href="https://linuxhint.com/ttf-mscorefonts-installer/"><strong>ttf-mscorefonts-installer</strong></a></p>
<p>ttf-mscorefonts-installer is a Debian package that includes the following set of fonts, and with the help of this installer, you can easily download and use Microsoft’s True core fonts.</p>
<ul>
<li>Andale Mono</li>
<li>Arial Black</li>
<li>Arial (Bold, Italic, Bold Italic)</li>
<li>Comic Sans MS (Bold)</li>
<li>Courier New (Bold, Italic, Bold Italic)</li>
<li>Georgia (Bold, Italic, Bold Italic)</li>
<li>Impact</li>
<li>Times New Roman (Bold, Italic, Bold Italic)</li>
<li>Trebuchet (Bold, Italic, Bold Italic)</li>
<li>Verdana (Bold, Italic, Bold Italic)</li>
<li>Webdings</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo proxychains apt install --reinstall ttf-mscorefonts-installer
$ sudo fc-cache -vr
</code></pre></div><p><a href="https://github.com/BannedPatriot/ttf-wps-fonts"><strong>ttf-wps-fonts</strong></a></p>
<p>These are the symbol fonts required by wps-office. They are used to display math formulas. We have collected the fonts here to make things easier.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /tmp
$ git clone https://github.com/iamdh4/ttf-wps-fonts.git
$ mkdir -p ~/.local/share/fonts/wps-fonts
$ mv ttf-wps-fonts/* ~/.local/share/fonts/wps-fonts
$ chmod <span style="color:#ae81ff">644</span> ~/.local/share/fonts/wps-fonts/*
$ fc-cache -vfs
$ rm -rf ttf-wps-fonts
</code></pre></div><p><a href="https://hanjingxue-boling.github.io/Whiteboard/essay/main/2022-05-03/#wps"><strong>WPS 缺少中文</strong></a></p>
<p>最近发现了 flatpak 版 wps 没有中文的解决方案：</p>
<blockquote>
<p>下载中文版 wps 的包，解压缩后找到里面的 mui 目录，复制到国际版 wps flatpak 的对应目录下，修改一下配置文件，你就得到了中文版 wps</p>
</blockquote>
<h3 id="sublime-texthttpwwwsublimetextcom"><a href="http://www.sublimetext.com/">Sublime Text</a><a hidden class="anchor" aria-hidden="true" href="#sublime-texthttpwwwsublimetextcom">#</a></h3>
<h3 id="atomhttpsatomio"><a href="https://atom.io/">Atom</a><a hidden class="anchor" aria-hidden="true" href="#atomhttpsatomio">#</a></h3>
<h3 id="vim">Vim<a hidden class="anchor" aria-hidden="true" href="#vim">#</a></h3>
<p>安装 vim ycm 全能补全</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install -y vim-gtk3 vim-addon-manager vim-youcompleteme vim-python-jedi
$ vam install youcompleteme python-jedi
</code></pre></div><p>然后用 gvim 就有 ycm 智能补全和提示了</p>
<h4 id="vimtutor">vimtutor<a hidden class="anchor" aria-hidden="true" href="#vimtutor">#</a></h4>
<p>Start Vim on a copy of the tutor file.</p>
<h4 id="vi-与-vimtiny">vi 与 vim.tiny<a hidden class="anchor" aria-hidden="true" href="#vi-与-vimtiny">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ whereis vi
vi: /usr/bin/vi /usr/share/man/man1/vi.1.gz
$ ls -al /usr/bin/vi
lrwxrwxrwx <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">20</span> Oct <span style="color:#ae81ff">26</span> 20:31 /usr/bin/vi -&gt; /etc/alternatives/vi
$ ls -al /etc/alternatives/vi
lrwxrwxrwx <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">17</span> Oct <span style="color:#ae81ff">26</span> 20:31 /etc/alternatives/vi -&gt; /usr/bin/vim.tiny
</code></pre></div><p>可见，在Ubuntu上，vi是vim.tiny的软连接，但是执行命令vi与vim.tiny后是不一样，比如vi是：在编辑模式下使用方向键的时候，并不会使光标移动，而是在命令行中出现[A [B [C [D之类的字母；并且编辑错误的话，退格键(Backspace键)是使用不了的。</p>
<p><a href="https://unix.stackexchange.com/questions/150217/methods-to-find-out-which-configuration-files-are-read-by-executable-when-star">Methods to find out which (configuration) files are read by executable when started</a>-&gt;<a href="https://stackoverflow.com/questions/60404347/strace-vim-nano-ubuntu">&lsquo;strace vim/nano&rsquo; (Ubuntu)</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strace -o $HOME/tracefile vi
$ cat tracefile | grep vimrc
stat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/usr/share/vim/vimrc.tiny&#34;</span>, <span style="color:#f92672">{</span>st_mode<span style="color:#f92672">=</span>S_IFREG|0644, st_size<span style="color:#f92672">=</span>662, ...<span style="color:#f92672">})</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/usr/share/vim/vimrc.tiny&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
stat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/home/vane/.vimrc&#34;</span>, 0x7fff3e755550<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/home/vane/.vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/home/vane/_vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
stat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/home/vane/.vim/vimrc&#34;</span>, 0x7fff3e755550<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/home/vane/.vim/vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
</code></pre></div><p>可以看到 vi，加载的是 <code>/usr/share/vim/vimrc.tiny</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ strace -o $HOME/tracefile vim.tiny
$ cat tracefile | grep vimrc
stat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/usr/share/vim/vimrc&#34;</span>, <span style="color:#f92672">{</span>st_mode<span style="color:#f92672">=</span>S_IFREG|0644, st_size<span style="color:#f92672">=</span>2266, ...<span style="color:#f92672">})</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/usr/share/vim/vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
stat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/home/vane/.vimrc&#34;</span>, 0x7fff7c99cc30<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/home/vane/.vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/home/vane/_vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
stat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/home/vane/.vim/vimrc&#34;</span>, 0x7fff7c99cc30<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
openat<span style="color:#f92672">(</span>AT_FDCWD, <span style="color:#e6db74">&#34;/home/vane/.vim/vimrc&#34;</span>, O_RDONLY<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> -1 ENOENT <span style="color:#f92672">(</span>No such file or directory<span style="color:#f92672">)</span>
</code></pre></div><p>可以看到 vim.tiny，加载的是 <code>/usr/share/vim/vimrc</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff -u /etc/vim/vimrc /etc/vim/vimrc.tiny
--- /etc/vim/vimrc    2020-01-30 19:11:47.000000000 +0800
+++ /etc/vim/vimrc.tiny    2020-04-15 14:40:31.000000000 +0800
@@ -1,55 +1,13 @@
...
+<span style="color:#e6db74">&#34; Vim configuration file, in effect when invoked as &#34;</span>vi<span style="color:#e6db74">&#34;. The aim of this
</span><span style="color:#e6db74">+&#34;</span> configuration file is to provide a Vim environment as compatible with the
+<span style="color:#e6db74">&#34; original vi as possible. Note that ~/.vimrc configuration files as other
</span><span style="color:#e6db74">+&#34;</span> configuration files in the runtimepath are still sourced.
+<span style="color:#e6db74">&#34; When Vim is invoked differently (&#34;</span>vim<span style="color:#e6db74">&#34;, &#34;</span>view<span style="color:#e6db74">&#34;, &#34;</span>evim<span style="color:#e6db74">&#34;, ...) this file is
</span><span style="color:#e6db74">+&#34;</span> _not_ sourced; /etc/vim/vimrc and/or /etc/vim/gvimrc are.
...
</code></pre></div><p>可以看到，上面什么说明白了。</p>
<h4 id="vim-clear-last-search-highlightinghttpsstackoverflowcomquestions657447vim-clear-last-search-highlighting"><a href="https://stackoverflow.com/questions/657447/vim-clear-last-search-highlighting">Vim clear last search highlighting</a><a hidden class="anchor" aria-hidden="true" href="#vim-clear-last-search-highlightinghttpsstackoverflowcomquestions657447vim-clear-last-search-highlighting">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">:noh
</code></pre></div><h4 id="vimrchttpsgithubcomamixvimrc"><a href="https://github.com/amix/vimrc">VIMRC</a><a hidden class="anchor" aria-hidden="true" href="#vimrchttpsgithubcomamixvimrc">#</a></h4>
<p>The ultimate Vim configuration (vimrc)</p>
<h4 id="copilotvimhttpsgithubcomgithubcopilotvim"><a href="https://github.com/github/copilot.vim">copilot.vim</a><a hidden class="anchor" aria-hidden="true" href="#copilotvimhttpsgithubcomgithubcopilotvim">#</a></h4>
<p>Neovim plugin for GitHub Copilot</p>
<h4 id="neovimhttpsneovimio"><a href="https://neovim.io/">Neovim</a><a hidden class="anchor" aria-hidden="true" href="#neovimhttpsneovimio">#</a></h4>
<p>Neovim 提出了将 Vim 扩展为一个 IDE 的想法。</p>
<p>它增加了现代终端的功能，如光标样式、焦点事件、括号内粘贴等，并内置了一个终端模拟器。最重要的是，你不需要忘却 Vim 的习惯就可以开始使用 Neovim。</p>
<p><a href="https://zhuanlan.zhihu.com/p/382092667"><strong>现代化Neovim配置</strong></a></p>
<p><a href="https://github.com/ayamir/nvimdots">git仓库</a>。</p>
<p>除此之外，目前一个比较好的配置是：https://github.com/LunarVim/LunarVim。</p>
<h4 id="vimplushttpsgithubcomchxuanvimplus"><a href="https://github.com/chxuan/vimplus">vimplus</a><a hidden class="anchor" aria-hidden="true" href="#vimplushttpsgithubcomchxuanvimplus">#</a></h4>
<p>现代化的vim插件管理工具，开箱即用</p>
<h4 id="rangerhttpsgithubcomrangerranger"><a href="https://github.com/ranger/ranger">ranger</a><a hidden class="anchor" aria-hidden="true" href="#rangerhttpsgithubcomrangerranger">#</a></h4>
<p>A VIM-inspired filemanager for the console</p>
<h2 id="shell">Shell<a hidden class="anchor" aria-hidden="true" href="#shell">#</a></h2>
<h3 id="tmuxhttpswwwruanyifengcomblog201910tmuxhtml"><a href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">Tmux</a><a hidden class="anchor" aria-hidden="true" href="#tmuxhttpswwwruanyifengcomblog201910tmuxhtml">#</a></h3>
<p>Tmux 是一个终端复用器（terminal multiplexer），非常有用，属于常用的开发工具。</p>
<h4 id="简介-2">简介<a hidden class="anchor" aria-hidden="true" href="#简介-2">#</a></h4>
<p><strong>会话与进程</strong></p>
<p>命令行的典型使用方式是，打开一个终端窗口（terminal window，以下简称&quot;窗口&quot;），在里面输入命令。用户与计算机的这种临时的交互，称为一次&quot;会话&quot;（session） 。</p>
<p>会话的一个重要特点是，窗口与其中启动的进程是连在一起的。打开窗口，会话开始；关闭窗口，会话结束，会话内部的进程也会随之终止，不管有没有运行完。</p>
<p>一个典型的例子就是，SSH 登录远程计算机，打开一个远程窗口执行命令。这时，网络突然断线，再次登录的时候，是找不回上一次执行的命令的。因为上一次 SSH 会话已经终止了，里面的进程也随之消失了。</p>
<p>为了解决这个问题，会话与窗口可以&quot;解绑&quot;：窗口关闭时，会话并不终止，而是继续运行，等到以后需要的时候，再让会话&quot;绑定&quot;其他窗口。</p>
<p><strong>Tmux 的作用</strong></p>
<p>Tmux 就是会话与窗口的&quot;解绑&quot;工具，将它们彻底分离。</p>
<ol>
<li>它允许在单个窗口中，同时访问多个会话。这对于同时运行多个命令行程序很有用。</li>
<li>它可以让新窗口&quot;接入&quot;已经存在的会话。</li>
<li>它允许每个会话有多个连接窗口，因此可以多人实时共享会话。</li>
<li>它还支持窗口任意的垂直和水平拆分。</li>
</ol>
<p>类似的终端复用器还有 GNU Screen。Tmux 与它功能相似，但是更易用，也更强大。</p>
<h4 id="基本用法">基本用法<a hidden class="anchor" aria-hidden="true" href="#基本用法">#</a></h4>
<p><strong>安装</strong></p>
<p>Tmux 一般需要自己安装。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install tmux
</code></pre></div><p><strong>启动与退出</strong></p>
<p>安装完成后，键入<code>tmux</code>命令，就进入了 Tmux 窗口。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux
</code></pre></div><p>Tmux 窗口，底部有一个状态栏。状态栏的左侧是窗口信息（编号和名称），右侧是系统信息。</p>
<p>按下<code>Ctrl+d</code>或者显式输入<code>exit</code>命令，就可以退出 Tmux 窗口。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ exit
</code></pre></div><p><strong>前缀键</strong></p>
<p>Tmux 窗口有大量的快捷键。所有快捷键都要通过前缀键唤起。默认的前缀键是<code>Ctrl+b</code>，即先按下<code>Ctrl+b</code>，快捷键才会生效。</p>
<p>举例来说，帮助命令的快捷键是<code>Ctrl+b ?</code>。它的用法是，在 Tmux 窗口中，先按下<code>Ctrl+b</code>，再按下<code>?</code>，就会显示帮助信息。</p>
<p>然后，按下 ESC 键或<code>q</code>键，就可以退出帮助。</p>
<h4 id="会话管理">会话管理<a hidden class="anchor" aria-hidden="true" href="#会话管理">#</a></h4>
<p><strong>新建会话</strong></p>
<p>第一个启动的 Tmux 窗口，编号是<code>0</code>，第二个窗口的编号是<code>1</code>，以此类推。这些窗口对应的会话，就是 0 号会话、1 号会话。</p>
<p>使用编号区分会话，不太直观，更好的方法是为会话起名。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux new -s &lt;session-name&gt;
</code></pre></div><p>上面命令新建一个指定名称的会话。</p>
<p><strong>分离会话</strong></p>
<p>在 Tmux 窗口中，按下<code>Ctrl+b d</code>或者输入<code>tmux detach</code>命令，就会将当前会话与窗口分离。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux detach
</code></pre></div><p>上面命令执行后，就会退出当前 Tmux 窗口，但是会话和里面的进程仍然在后台运行。</p>
<p><code>tmux ls</code>命令或<code>Ctrl+b s</code>可以查看当前所有的 Tmux 会话。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux ls
<span style="color:#75715e"># or</span>
$ tmux list-session
</code></pre></div><p><strong>接入会话</strong></p>
<p><code>tmux attach</code>命令用于重新接入某个已存在的会话。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 使用会话编号</span>
$ tmux attach -t <span style="color:#ae81ff">0</span>
<span style="color:#75715e"># 使用会话名称</span>
$ tmux attach -t &lt;session-name&gt;
</code></pre></div><p><strong>杀死会话</strong></p>
<p><code>tmux kill-session</code>命令用于杀死某个会话。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 使用会话编号</span>
$ tmux kill-session -t <span style="color:#ae81ff">0</span>
<span style="color:#75715e"># 使用会话名称</span>
$ tmux kill-session -t &lt;session-name&gt;
</code></pre></div><p><strong>切换会话</strong></p>
<p><code>tmux switch</code>命令用于切换会话。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 使用会话编号</span>
$ tmux switch -t <span style="color:#ae81ff">0</span>
<span style="color:#75715e"># 使用会话名称</span>
$ tmux switch -t &lt;session-name&gt;
</code></pre></div><p><strong>重命名会话</strong></p>
<p><code>tmux rename-session</code>命令或<code>Ctrl+b $</code>用于重命名会话。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux rename-session -t <span style="color:#ae81ff">0</span> &lt;new-name&gt;
</code></pre></div><p>上面命令将0号会话重命名。</p>
<h4 id="最简操作流程">最简操作流程<a hidden class="anchor" aria-hidden="true" href="#最简操作流程">#</a></h4>
<p>综上所述，以下是 Tmux 的最简操作流程。</p>
<ol>
<li>在服务器端新建会话<code>tmux new -s my_session</code>。</li>
<li>在 Tmux 窗口运行所需的程序。</li>
<li>按下快捷键<code>Ctrl+b d</code>将会话分离。</li>
<li>下次使用时，重新连接到会话<code>tmux attach-session -t my_session</code>。</li>
</ol>
<h4 id="窗格操作">窗格操作<a hidden class="anchor" aria-hidden="true" href="#窗格操作">#</a></h4>
<p>Tmux 可以将窗口分成多个窗格（pane），每个窗格运行不同的命令。以下命令都是在 Tmux 窗口中执行。</p>
<p><strong>划分窗格</strong></p>
<p><code>tmux split-window</code>命令用来划分窗格。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 划分上下两个窗格，或 Ctrl+b &#34;</span>
$ tmux split-window
<span style="color:#75715e"># 划分左右两个窗格，或 Ctrl+b %</span>
$ tmux split-window -h
</code></pre></div><p><strong>移动光标</strong></p>
<p><code>tmux select-pane</code>命令或<code>Ctrl+b &lt;arrow key&gt;</code>用来移动光标位置。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 光标切换到上方窗格，或 Ctrl+b ;</span>
$ tmux <span style="color:#66d9ef">select</span>-pane -U
<span style="color:#75715e"># 光标切换到下方窗格，或 Ctrl+b o</span>
$ tmux <span style="color:#66d9ef">select</span>-pane -D
<span style="color:#75715e"># 光标切换到左边窗格</span>
$ tmux <span style="color:#66d9ef">select</span>-pane -L
<span style="color:#75715e"># 光标切换到右边窗格</span>
$ tmux <span style="color:#66d9ef">select</span>-pane -R
</code></pre></div><ul>
<li><code>Ctrl+b x</code>：关闭当前窗格。</li>
<li><code>Ctrl+b !</code>：将当前窗格拆分为一个独立窗口。</li>
<li><code>Ctrl+b z</code>：当前窗格全屏显示，再使用一次会变回原来大小。</li>
<li><code>Ctrl+b Ctrl+&lt;arrow key&gt;</code>：按箭头方向调整窗格大小。</li>
<li><code>Ctrl+b q</code>：显示窗格编号。</li>
</ul>
<p><strong>交换窗格位置</strong></p>
<p><code>tmux swap-pane</code>命令用来交换窗格位置。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 当前窗格上移，或 Ctrl+b {</span>
$ tmux swap-pane -U
<span style="color:#75715e"># 当前窗格下移，或 Ctrl+b }</span>
$ tmux swap-pane -D
</code></pre></div><ul>
<li><code>Ctrl+b Ctrl+o</code>：所有窗格向前移动一个位置，第一个窗格变成最后一个窗格。</li>
<li><code>Ctrl+b Alt+o</code>：所有窗格向后移动一个位置，最后一个窗格变成第一个窗格。</li>
</ul>
<h4 id="窗口管理">窗口管理<a hidden class="anchor" aria-hidden="true" href="#窗口管理">#</a></h4>
<p>除了将一个窗口划分成多个窗格，Tmux 也允许新建多个窗口。</p>
<p><strong>新建窗口</strong></p>
<p><code>tmux new-window</code>命令用来创建新窗口。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux new-window
<span style="color:#75715e"># 新建一个指定名称的窗口</span>
$ tmux new-window -n &lt;window-name&gt;
</code></pre></div><p><code>Ctrl+b c</code>：创建一个新窗口，状态栏会显示多个窗口的信息。</p>
<p><strong>切换窗口</strong></p>
<p><code>tmux select-window</code>命令用来切换窗口。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 切换到指定编号的窗口</span>
$ tmux <span style="color:#66d9ef">select</span>-window -t &lt;window-number&gt;
<span style="color:#75715e"># 切换到指定名称的窗口</span>
$ tmux <span style="color:#66d9ef">select</span>-window -t &lt;window-name&gt;
</code></pre></div><ul>
<li><code>Ctrl+b p</code>：切换到上一个窗口（按照状态栏上的顺序）。</li>
<li><code>Ctrl+b n</code>：切换到下一个窗口。</li>
<li><code>Ctrl+b &lt;number&gt;</code>：切换到指定编号的窗口，其中的<code>&lt;number&gt;</code>是状态栏上的窗口编号。</li>
<li><code>Ctrl+b w</code>：从列表中选择窗口。</li>
</ul>
<p><strong>重命名窗口</strong></p>
<p><code>tmux rename-window</code>命令或<code>Ctrl+b ,</code>用于为当前窗口起名（或重命名）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tmux rename-window &lt;new-name&gt;
</code></pre></div><h4 id="其他命令">其他命令<a hidden class="anchor" aria-hidden="true" href="#其他命令">#</a></h4>
<p>下面是一些其他命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出所有快捷键，及其对应的 Tmux 命令</span>
$ tmux list-keys
<span style="color:#75715e"># 列出所有 Tmux 命令及其参数</span>
$ tmux list-commands
<span style="color:#75715e"># 列出当前所有 Tmux 会话的信息</span>
$ tmux info
<span style="color:#75715e"># 重新加载当前的 Tmux 配置</span>
$ tmux source-file ~/.tmux.conf
</code></pre></div><h3 id="fishhttpswwwruanyifengcomblog201705fish_shellhtml"><a href="https://www.ruanyifeng.com/blog/2017/05/fish_shell.html">Fish</a><a hidden class="anchor" aria-hidden="true" href="#fishhttpswwwruanyifengcomblog201705fish_shellhtml">#</a></h3>
<p><a href="https://zh.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%95%8C%E9%9D%A2">命令行</a>是程序员的必备技能。图形界面虽然好看，解决问题还是要靠命令行。</p>
<p>命令行由 Shell 提供。各种命令通过 Shell，传递给操作系统的内核。学习命令行就是在学习 Shell。</p>
<p>Shell 有好几种，目前最常用是 <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash</a> 和 <a href="https://en.wikipedia.org/wiki/Z_shell">zsh</a>。但是，在我看来，它们都不如 <a href="https://fishshell.com/">Fish Shell</a> 好用。</p>
<p>五年前，我第一次尝试 Fish，感到很惊艳，一直用到现在。本文介绍 Fish 的主要特点，希望你也来尝试它。</p>
<h4 id="简介-3">简介<a hidden class="anchor" aria-hidden="true" href="#简介-3">#</a></h4>
<p>Fish 是&quot;the <strong>f</strong>riendly <strong>i</strong>nteractive <strong>sh</strong>ell&quot;的简称，最大特点就是方便易用。很多其他 Shell 需要配置才有的功能，Fish 默认提供，不需要任何配置。</p>
<p>如果你想拥有一个方便好用的 Shell，又不想学习一大堆语法，或者花费很多时间配置，那么你一定要尝试一下 Fish。</p>
<h4 id="安装-1">安装<a hidden class="anchor" aria-hidden="true" href="#安装-1">#</a></h4>
<p>Ubuntu 的安装方法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install fish
</code></pre></div><p>其他系统的安装请参考<a href="https://fishshell.com/#platform_tabs">官方网站</a>。</p>
<h4 id="启动与帮助">启动与帮助<a hidden class="anchor" aria-hidden="true" href="#启动与帮助">#</a></h4>
<p>安装完成后，就可以启动 Fish。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ fish
</code></pre></div><p>由于 Fish 的语法与 Bash 有很大差异，Bash 脚本一般不兼容。因此，我建议不要将 Fish 设为默认 Shell，而是每次手动启动它。</p>
<p>使用过程中，如果需要帮助，可以输入<code>help</code>命令。浏览器就会自动打开，显示在线文档。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ help
</code></pre></div><h4 id="彩色显示">彩色显示<a hidden class="anchor" aria-hidden="true" href="#彩色显示">#</a></h4>
<p>进入 Fish 以后，你注意到的第一件事，可能就是它默认彩色显示。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 无效命令为红色</span>
$ mkd

<span style="color:#75715e"># 有效命令为蓝色</span>
$ mkdir
</code></pre></div><p>有效路径会有下划线。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat ~/somefi 
</code></pre></div><p>上面代码表示，存在以<code>~/somefi</code>开头的路径。如果没有下划线，你就知道这个路径不存在。</p>
<h4 id="自动建议">自动建议<a hidden class="anchor" aria-hidden="true" href="#自动建议">#</a></h4>
<p>Fish 会自动在光标后面给出建议，表示可能的选项，颜色为灰色。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 命令建议</span>
$ /bin/hostname

<span style="color:#75715e"># 参数建议</span>
$ grep --ignore-case

<span style="color:#75715e"># 路径建议</span>
$ ls node_modules
</code></pre></div><p>如果采纳建议，可以按下<code>→</code>或<code>Control + F</code>。如果只采纳一部分，可以按下<code>Alt + →</code>。</p>
<h4 id="自动补全">自动补全<a hidden class="anchor" aria-hidden="true" href="#自动补全">#</a></h4>
<p>输入命令时，Fish 会自动显示匹配的上一条历史记录。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git commit -m <span style="color:#e6db74">&#34;feat: first commit&#34;</span>
</code></pre></div><p>如果没有匹配的历史记录，Fish 会猜测可能的结果，自动补全各种输入。比如，输入<code>pyt</code>再按下<code>Tab</code>，就会自动补全为<code>python</code>命令。</p>
<p>如果有多个可能的结果，Fish 会把它们都列出，还带有简要介绍。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi<span style="color:#f92672">[</span>按下 Tab 键<span style="color:#f92672">]</span>

vi <span style="color:#f92672">(</span>Executable link, 2.7MB<span style="color:#f92672">)</span>
view <span style="color:#f92672">(</span>Vi IMproved, 一个程序员的文本编辑器<span style="color:#f92672">)</span>
viewer.py <span style="color:#f92672">(</span>Executable, 967B<span style="color:#f92672">)</span>
viewres  <span style="color:#f92672">(</span>Graphical class browser <span style="color:#66d9ef">for</span> Xt<span style="color:#f92672">)</span>
...and <span style="color:#ae81ff">12</span> more rows
</code></pre></div><p>这时，再按一次<code>tab</code>，就可以在这些命令之中选择。</p>
<p>除了补全命令，Fish 还可以补全参数。比如，<code>ls</code>命令的<code>-l</code>参数后面按下<code>Tab</code>键，就会显示可以连用的其他参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -l<span style="color:#f92672">[</span>按下 Tab 键<span style="color:#f92672">]</span>

-l1  <span style="color:#f92672">(</span>List one file per line<span style="color:#f92672">)</span>
-lA  <span style="color:#f92672">(</span>Show hidden except . and ..<span style="color:#f92672">)</span>  
-la  <span style="color:#f92672">(</span>Show hidden<span style="color:#f92672">)</span>
-lB  <span style="color:#f92672">(</span>Ignore files ending with ~<span style="color:#f92672">)</span>
...and <span style="color:#ae81ff">16</span> more rows<span style="color:#e6db74">```</span>
</code></pre></div><p>Fish 还可以自动补全 Git 分支。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git checkout master
</code></pre></div><h4 id="易懂的语法">易懂的语法<a hidden class="anchor" aria-hidden="true" href="#易懂的语法">#</a></h4>
<p>Fish 的语法非常自然，一眼就能看懂。</p>
<p><code>if</code>语句：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">if</span> grep fish /etc/shells
    echo Found fish
<span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> grep bash /etc/shells
    echo Found bash
<span style="color:#66d9ef">else</span>
    echo Got nothing
end
</code></pre></div><p><code>switch</code>语句：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">switch <span style="color:#f92672">(</span>uname<span style="color:#f92672">)</span>
<span style="color:#66d9ef">case</span> Linux
    echo Hi Tux!
<span style="color:#66d9ef">case</span> Darwin
    echo Hi Hexley!
<span style="color:#66d9ef">case</span> FreeBSD NetBSD DragonFly
    echo Hi Beastie!
<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span>
    echo Hi, stranger!
end
</code></pre></div><p><code>while</code>循环：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">while</span> true
    echo <span style="color:#e6db74">&#34;Loop forever&#34;</span>
end
</code></pre></div><p><code>for</code>循环：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">for</span> file in *.txt
    cp $file $file.bak
end
</code></pre></div><h4 id="函数">函数<a hidden class="anchor" aria-hidden="true" href="#函数">#</a></h4>
<p>Fish 的函数用来封装命令，或者为现有的命令起别名。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">function</span> ll
    ls -lhG $argv
end
</code></pre></div><p>上面代码定义了一个<code>ll</code>函数。命令行执行这个函数以后，就可以用<code>ll</code>命令替代<code>ls -lhG</code>。其中，变量<code>$argv</code>表示函数的参数。</p>
<p>下面是另一个例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">function</span> ls
    command ls -hG $argv
end
</code></pre></div><p>上面的代码重新定义<code>ls</code>命令。注意，函数体内的<code>ls</code>之前，要加上<code>command</code>，否则会因为无限循环而报错。</p>
<h4 id="提示符">提示符<a hidden class="anchor" aria-hidden="true" href="#提示符">#</a></h4>
<p><code>fish_prompt</code>函数用于定义命令行提示符（prompt）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">function</span> fish_prompt
    set_color purple
    date <span style="color:#e6db74">&#34;+%m/%d/%y&#34;</span>
    set_color FF0
    echo <span style="color:#f92672">(</span>pwd<span style="color:#f92672">)</span> <span style="color:#e6db74">&#39;&gt;&#39;</span>
    set_color normal
end
</code></pre></div><p>执行上面的函数以后，你的命令行提示符就会变成下面这样。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">02/06/13
/home/tutorial &gt; 
</code></pre></div><h4 id="配置-1">配置<a hidden class="anchor" aria-hidden="true" href="#配置-1">#</a></h4>
<p>Fish 的配置文件是<code>~/.config/fish/config.fish</code>，每次 Fish 启动，就会自动加载这个文件。</p>
<p>我们可以在这个文件里面写入各种自定义函数，它们会被自动加载。比如，上面的<code>fish_prompt</code>函数就可以写在这个文件里面，这样每次启动 Fish，就会出现自定义的提示符。</p>
<p>Fish 还提供 Web 界面配置该文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ fish_config
</code></pre></div><p>输入上面的命令以后，浏览器就会自动打开本机的 8000 端口，用户可以在网页上对 Fish 进行配置，比如选择提示符和配色主题。</p>
<h3 id="zsh">Zsh<a hidden class="anchor" aria-hidden="true" href="#zsh">#</a></h3>
<h4 id="oh-my-zshhttpsgithubcomohmyzshohmyzsh"><a href="https://github.com/ohmyzsh/ohmyzsh">Oh My Zsh</a><a hidden class="anchor" aria-hidden="true" href="#oh-my-zshhttpsgithubcomohmyzshohmyzsh">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sh -c <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>oh-my-zsh应该对通配符作了限制，需要用跳脱字符</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt remove fcitx<span style="color:#ae81ff">\*</span>
</code></pre></div><p>Zsh theme：<a href="https://www.slant.co/topics/7553/~theme-for-oh-my-zsh">What&rsquo;s the best theme for Oh My Zsh?</a></p>
<h4 id="zsh4humanshttpsgithubcomromkatvzsh4humans"><a href="https://github.com/romkatv/zsh4humans">zsh4humans</a><a hidden class="anchor" aria-hidden="true" href="#zsh4humanshttpsgithubcomromkatvzsh4humans">#</a></h4>
<h3 id="bash">Bash<a hidden class="anchor" aria-hidden="true" href="#bash">#</a></h3>
<p><strong>include local bin</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vim .bashrc
export PATH<span style="color:#f92672">=</span>/home/kurome/.local/bin:$PATH
</code></pre></div><h4 id="bash-git-prompthttpsgithubcommagicmontybash-git-prompt"><a href="https://github.com/magicmonty/bash-git-prompt">bash-git-prompt</a><a hidden class="anchor" aria-hidden="true" href="#bash-git-prompthttpsgithubcommagicmontybash-git-prompt">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/magicmonty/bash-git-prompt.git ~/.bash-git-prompt --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
$ vim ~/.bashrc
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.bash-git-prompt/gitprompt.sh&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    GIT_PROMPT_ONLY_IN_REPO<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
    source $HOME/.bash-git-prompt/gitprompt.sh
<span style="color:#66d9ef">fi</span>
</code></pre></div><h4 id="bash-completionhttpsgithubcomscopbash-completion"><a href="https://github.com/scop/bash-completion">bash-completion</a><a hidden class="anchor" aria-hidden="true" href="#bash-completionhttpsgithubcomscopbash-completion">#</a></h4>
<p>一般已经安装配置好了。</p>
<h4 id="awesome-bashhttpsgithubcomawesome-listsawesome-bash"><a href="https://github.com/awesome-lists/awesome-bash">awesome-bash</a><a hidden class="anchor" aria-hidden="true" href="#awesome-bashhttpsgithubcomawesome-listsawesome-bash">#</a></h4>
<h2 id="proxy">Proxy<a hidden class="anchor" aria-hidden="true" href="#proxy">#</a></h2>
<h3 id="v2rayhttpsarchlinuxstudiogithubioarchlinuxtutorialrookiefxckgfw"><a href="https://archlinuxstudio.github.io/ArchLinuxTutorial/#/rookie/fxckGFW">v2ray</a><a hidden class="anchor" aria-hidden="true" href="#v2rayhttpsarchlinuxstudiogithubioarchlinuxtutorialrookiefxckgfw">#</a></h3>
<h4 id="节点准备">节点准备<a hidden class="anchor" aria-hidden="true" href="#节点准备">#</a></h4>
<p>简单来讲节点是形如如下的神秘链接：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">ss://xxxxxxxxxxxxxxxxxxxxxxxxxxxx
vmess://xxxxxxxxxxxxxxxxxxxxxxxxxxxx
</code></pre></div><p>如果你没有这些连接：</p>
<ul>
<li>自行部署，你则需要自行购买处于自由互联网的服务器并进行节点搭建，这不在本文讨论范围内。如果你需要购买服务器，推荐一个 VPS 提供商：<a href="https://justhost.ru/">justhost.ru</a>。</li>
<li>购买机场的订阅服务，可以参考它们的订阅流程以获取节点。需要提醒的是，机场服务属于灰色产业，随时有停止服务的可能，购买建议以月付进行购买以避免过大损失。关于机场审计规则，我们的观点是&quot;我可以不看，但是你不可以封禁&quot;。对于机场审计程度，读者可根据自身实际情况自行评估。</li>
<li>如果你不想花任何费用，可安装<a href="https://psiphon3.com/zh/index.html">赛风</a>这类软件。它是自由软件。如果你使用赛风，可以非常方便的发送空邮件到<a href="mailto:get@psiphon3.com">get@psiphon3.com</a>以获取赛风下载链接。赛风应用目前只支持 Windows\Android\IOS\MacOS 平台。当你在这些平台上能够访问自由互联网时，可以去各个渠道搜索可用的节点和代理资源。注意，使用公共节点需要自行承担可能的风险。</li>
</ul>
<h4 id="安装-2">安装<a hidden class="anchor" aria-hidden="true" href="#安装-2">#</a></h4>
<p><a href="https://github.com/v2fly/v2ray-core">v2ray</a>/<a href="https://github.com/XTLS/Xray-core"> Xray-core</a> 是使用 <a href="https://github.com/Qv2ray/Qv2ray/">Qv2ray</a>（原项目已停止开发） 以及 <a href="https://github.com/v2rayA/v2rayA">V2rayA</a> 的前提，需要先进行安装。</p>
<p>Qv2ray 和 V2rayA 是两款非常优秀的在 Linux 上可用的科学上网通用客户端：</p>
<ul>
<li>Qv2ray：安装后在 Plugins 中，选择 V2ray Core Plugin，并进行 V2ray 的设置。现在你已经可以使用，你需要按照<a href="https://qv2ray.net/">官方文档</a>导入已有的链接或订阅。</li>
<li>V2rayA：2rayA 是一个浏览器客户端，使用非常方便。更多使用方法请看<a href="https://v2raya.org/">官方文档</a></li>
</ul>
<h4 id="代理配置">代理配置<a hidden class="anchor" aria-hidden="true" href="#代理配置">#</a></h4>
<p>在经过上述步骤后，你应该已经有了 SOCKS5 代理以及 HTTP 代理的地址和端口。接下来进行设置：</p>
<ul>
<li>
<p>系统代理：在节点链接后，你可在<code>系统设置</code> -&gt; <code>网络设置</code> -&gt; <code>代理</code>中设置代理。注意，<strong><code>系统设置</code>中的代理配置在 KDE 桌面环境中并不是所有应用都会遵守</strong>。没有遵循系统设置代理的应用还需要单独进行代理配置。</p>
</li>
<li>
<p>终端</p>
<p>可以通过 export 命令设置当前终端的代理方式。比如使用 tldr 或 github raw 等资源需要设置 https 代理。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export https_proxy<span style="color:#f92672">=</span>http://127.0.0.1:8889
export http_proxy<span style="color:#f92672">=</span>http://127.0.0.1:8889
export all_proxy<span style="color:#f92672">=</span>http://127.0.0.1:8889
</code></pre></div><p>不同终端命令所识别的环境变量名不同，如 all_proxy 对 curl 生效，而对 wget 则不生效，具体可查看各个命令的 man page。</p>
</li>
<li>
<p><a href="https://github.com/haad/proxychains">proxychains</a>/<a href="https://github.com/rofl0r/proxychains-ng">proxychains-ng</a></p>
<p>如果对于一个应用，KDE 的系统代理不生效，在终端 export 了 ALL_PROXY 变量再用终端启动此应用代理也不生效，并且这个应用自身也没有配置代理的选项（即应用不支持代理）。此时可以使用 proxychains，它可以为单行命令配置代理，它是一个预加载的 hook，允许通过一个或多个 SOCKS 或 HTTP 代理重定向现有动态链接程序的 TCP 流量（即强制应用走代理）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install proxychains
$ sudo vim /etc/proxychains.conf
socks5 127.0.0.1 <span style="color:#ae81ff">1089</span>
</code></pre></div></li>
</ul>
<h4 id="透明代理httpsarchicekylinonlinerookietransparenthtml"><a href="https://arch.icekylin.online/rookie/transparent.html">透明代理</a><a hidden class="anchor" aria-hidden="true" href="#透明代理httpsarchicekylinonlinerookietransparenthtml">#</a></h4>
<p>全局代理，也即透明代理。之所以叫做透明代理，是因为这代理对于操作系统中的各个应用相当于是透明的，应用们感知不到代理的存在。之所以叫做全局代理，很明显意为全局所有流量都走代理。</p>
<ul>
<li>
<p>在 Qv2ray 的“首选项-入站设置”的下方启用任意门设置选项。</p>
<ul>
<li>监听 ipv4 地址可填<code>127.0.0.1</code> 或 <code>0.0.0.0</code>，建议前者。若需双栈代理，则在监听 ipv6 地址填上<code>::1</code>（如果监听 ipv4 填了 0.0.0.0 则可不填）。</li>
<li>嗅探选择 Full，Destination Override 的三项均勾选。</li>
<li>模式选择“tproxy”。</li>
</ul>
</li>
<li>
<p>安装<a href="https://github.com/springzfx/cgproxy#introduction">cgproxy</a>软件，编辑<code>/etc/cgproxy/config.json</code>：</p>
<ul>
<li>在<code>cgroup_proxy</code>中括号里加上<code>&quot;/&quot;</code>，<code>port</code>改为 Qv2ray 首选项里的透明代理的端口。</li>
<li>cgproxy默认配置是代理所有 tcp 和 udp，ipv4 和 ipv6 的流量，如果不希望代理其中的某种（些）流量，则将对应的<code>enable_xxx</code>改为 <code>false</code>。注意这里的配置要和 Qv2ray 选项里的配置一致，如 Qv2ray 选项里没有勾选 udp，则这里务必把<code>enable_udp</code>改为 false。</li>
<li>如果希望当本机作为网关设备时为连接到本机的其他设备（如连接到本机开设的 wifi 热点的设备）也提供透明代理，则把<code>enable_gateway</code>改为 <code>true</code></li>
</ul>
</li>
<li>
<p>透明代理的基本原理是拦截系统发出的所有流量，并将这些流量转到代理工具里，从而实现让系统所有流量都走代理的目的。此时，为了避免流量出现死循环（即代理工具发出的流量又转回到代理工具里），需要将代理工具排除在透明代理环境外面。有两种方式可以实现这一点：</p>
<ul>
<li>
<p>通过execsnoop监控代理工具的启动，并自动将其移至透明代理环境外面：</p>
<ul>
<li>cgproxy软件自带execsnoop支持，以上cgproxy测试过的发行版均可支持。</li>
<li>编辑<code>/etc/cgproxy/config.json</code>，在<code>program_noproxy</code>中括号里加上<code>&quot;v2ray&quot;</code>、<code>&quot;qv2ray&quot;</code>，以使qv2ray和v2ray发出的流量不经过透明代理。如果你的v2ray或qv2ray不在PATH里，则需要填写它们的绝对路径。</li>
</ul>
</li>
<li>
<p>在每次连接代理节点时，让qv2ray自己把自己移到透明代理环境外面：</p>
<p>安装 Qvplugin-Command 插件，在插件设置里的“pre-connection”栏里加上一句</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sh -c <span style="color:#e6db74">&#34;cgnoproxy --pid </span><span style="color:#66d9ef">$(</span>pgrep -x qv2ray<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</code></pre></div></li>
</ul>
</li>
<li>
<p>如果启用了 udp 的透明代理（dns 也是 udp），则给 v2ray 二进制文件加上相应的特权：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo setcap <span style="color:#e6db74">&#34;cap_net_admin,cap_net_bind_service=ep&#34;</span> /usr/bin/v2ray
</code></pre></div><p>否则 udp 的透明代理可能会出问题。如果每次更新了 v2ray 二进制文件，都需要重新执行此命令。</p>
</li>
<li>
<p>启动透明代理服务：<code>systemctl start cgproxy.service</code>或<code>systemctl enable --now cgproxy.service</code>。</p>
</li>
</ul>
<p>以上步骤完成后，透明代理应该能正常使用了。</p>
<h5 id="dns-1"><strong>dns</strong><a hidden class="anchor" aria-hidden="true" href="#dns-1">#</a></h5>
<p>如果勾选了“dns 拦截”，且启用了 dns 和 udp 的透明代理，则 v2ray 会拦截对系统 dns 的请求，并将其转发到 v2ray 的内置 dns 里，即让 v2ray 内置 dns 接管系统 dns。但 v2ray 内置 dns 是会遵循路由规则的。</p>
<p>如果没勾选“dns 拦截”，则 v2ray 虽然不会让内置 dns 接管系统 dns，但如果启用了 dns 和 udp 的透明代理，则系统 dns 也会走透明代理进 v2ray，并遵循 v2ray 的路由规则。</p>
<p>因此，在启用了 dns 和 udp 的透明代理时，若系统 dns 或 v2ray 的内置 dns 配置不当，可能导致 dns 请求发不出去，从而影响正常上网。</p>
<p>由于 qv2ray 常见的路由规则是绕过国内 ip，国外 ip 均走代理。在这个情形中，以下两个配置是典型的有问题的 dns 配置方式：</p>
<ul>
<li>配置了国外普通 dns 作为首选，但代理本身不支持 udp（此时 dns 查询的 udp 流量出不去，dns 无法查询）</li>
<li>配置了使用域名的 doh 作为首选。此时 doh 的域名无法被解析，从而 doh 也无法使用。</li>
</ul>
<p>一般而言，如果并不在意将 dns 查询发给谁，那么，在绕过国内 ip 的情况下，只需要配置一个国内普通 dns 作为首选即可保证不会出问题。若代理本身不支持 udp，又希望使用国外 dns，则可以考虑使用使用 ip 的 doh（如<code>https://1.1.1.1/dns-query</code>等）。</p>
<p>如果需要更复杂的 dns 配置，建议参考<a href="https://www.v2ray.com/chapter_02/04_dns.html">上游文档</a>，并选择合适的不会影响正常上网的 dns 配置。</p>
<h3 id="clashhttpszhuanlanzhihucomp369344633"><a href="https://zhuanlan.zhihu.com/p/369344633">Clash</a><a hidden class="anchor" aria-hidden="true" href="#clashhttpszhuanlanzhihucomp369344633">#</a></h3>
<p><a href="https://github.com/Dreamacro/clash">下载 clash</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gzip -d clash-v1.6.5.gz
$ mkdir ~/.clash <span style="color:#f92672">&amp;&amp;</span> mv clash-v1.6.5 ~/.clash/clash
</code></pre></div><p>下载配置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget -O config.yaml <span style="color:#f92672">[</span>订阅链接<span style="color:#f92672">]</span>
</code></pre></div><p>运行 clash</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chmod <span style="color:#ae81ff">770</span> clash./clash -d .
</code></pre></div><p>使用 <a href="http://clash.razord.top">clash dashboard</a> 选择节点</p>
<p>设置系统代理：</p>
<ul>
<li>
<p>GUI：打开系统设置，点击网络代理右边的 ⚙ 按钮，选择手动</p>
<ul>
<li>HTTP 和 HTTPS 代理为 127.0.0.1:7890</li>
<li>Socks 主机为 127.0.0.1:7891</li>
</ul>
</li>
<li>
<p>CLI：<a href="https://www.xmodulo.com/change-system-proxy-settings-command-line-ubuntu-desktop.html">change system proxy settings from the command line</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># To modify a DConf setting:</span>
$ gsettings set &lt;schema&gt; &lt;key&gt; &lt;value&gt;

<span style="color:#75715e"># To read a DConf setting:</span>
$ gsettings get &lt;schema&gt; &lt;key&gt;
</code></pre></div></li>
</ul>
<p>相关软件：</p>
<ul>
<li><a href="https://github.com/nadoo/glider">glider</a></li>
<li><a href="https://github.com/getlantern/lantern">Lantern</a></li>
<li><a href="https://www.privoxy.org/">Privoxy</a></li>
<li><a href="https://github.com/OpenVPN/openvpn">openvpn</a></li>
<li><a href="https://shadowsocks.org/en/index.html">Shadowsocks</a></li>
<li><a href="https://www.torproject.org/download/download.html.en">Tor</a></li>
<li><a href="https://github.com/trojan-gfw/trojan">trojan</a>：<a href="https://tlanyan.pp.ua/trojan-tutorial/">trojan教程</a></li>
</ul>
<h4 id="脚本一">脚本一<a hidden class="anchor" aria-hidden="true" href="#脚本一">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.clash/run-clash.sh
<span style="color:#75715e">#!/bin/bash</span>
CLASH_HOME<span style="color:#f92672">=</span>/home/vane/.clash
subscription<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;订阅连接&#34;</span>

<span style="color:#75715e"># 设置系统代理</span>
<span style="color:#66d9ef">function</span> setting
<span style="color:#f92672">{</span>
  gsettings set org.gnome.system.proxy.http host <span style="color:#e6db74">&#39;127.0.0.1&#39;</span>
  gsettings set org.gnome.system.proxy.http port <span style="color:#e6db74">&#39;7890&#39;</span>
  gsettings set org.gnome.system.proxy.https host <span style="color:#e6db74">&#39;127.0.0.1&#39;</span>
  gsettings set org.gnome.system.proxy.https port <span style="color:#e6db74">&#39;7890&#39;</span>
  gsettings set org.gnome.system.proxy.socks host <span style="color:#e6db74">&#39;127.0.0.1&#39;</span>
  gsettings set org.gnome.system.proxy.socks port <span style="color:#e6db74">&#39;7891&#39;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e"># 更新订阅</span>
<span style="color:#66d9ef">function</span> update
<span style="color:#f92672">{</span>
  wget -O $CLASH_HOME/config.yaml $subscription
<span style="color:#f92672">}</span>

<span style="color:#75715e"># 运行 clash</span>
<span style="color:#66d9ef">function</span> run
<span style="color:#f92672">{</span>  
  <span style="color:#75715e"># 打开系统代理（之前已经设置了）</span>
  gsettings set org.gnome.system.proxy mode <span style="color:#e6db74">&#39;manual&#39;</span> 
  $CLASH_HOME/clash -d $CLASH_HOME/
<span style="color:#f92672">}</span>

<span style="color:#75715e"># 停止运行 clash</span>
<span style="color:#66d9ef">function</span> stop
<span style="color:#f92672">{</span> 
  <span style="color:#75715e"># 关闭系统代理  </span>
  gsettings set org.gnome.system.proxy mode <span style="color:#e6db74">&#39;none&#39;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-u&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>  
  update
<span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-r&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span> 
  run
<span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-s&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
  setting
<span style="color:#66d9ef">else</span>  
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span> 
      $CLASH_HOME/clash $1 
    <span style="color:#66d9ef">else</span>  
      echo Plese run clash -r  
    <span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">fi</span>

trap stop EXIT
</code></pre></div><p><a href="https://www.xmodulo.com/change-system-proxy-settings-command-line-ubuntu-desktop.html">How to change system proxy settings from the command line on Ubuntu desktop</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chmod <span style="color:#ae81ff">700</span> run-clash.sh
</code></pre></div><h4 id="脚本二">脚本二<a hidden class="anchor" aria-hidden="true" href="#脚本二">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.clash/up.sh
<span style="color:#75715e">#!/bin/bash</span>
SubscriptionLink<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
/usr/bin/wget --no-proxy -O /home/kurome/.clash/config.yaml $SubscriptionLink
$ vi ~/.clash/rc.sh
<span style="color:#75715e">#!/bin/bash</span>
/home/kurome/.clash/clash -d /home/kurome/.clash/
$ chmod u+x ~/.clash/up.sh vi ~/.clash/rc.sh
</code></pre></div><p><a href="https://github.com/Dreamacro/clash/wiki/clash-as-a-daemon">clash as a daemon</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /usr/lib/systemd/system/clash.service
<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Clash daemon, A rule-based proxy in Go.
After<span style="color:#f92672">=</span>network.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>simple
Restart<span style="color:#f92672">=</span>always
RestartSec<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
ExecStart<span style="color:#f92672">=</span>/bin/bash /home/kurome/.clash/rc.sh

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target
</code></pre></div><p>运行</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl enable clash.service
$ systemctl start clash.service
$ systemctl status clash.service
</code></pre></div><p>如果不想代理了，可以直接在  <a href="http://clash.razord.top">clash dashboard</a> 的 Proxy （如果有的话）或者 Settting 里选择 DIRECT，而不是关闭 clash.service。根据设置的规则，有的流量会走代理，有的流量直接走。</p>
<h4 id="脚本三httpsakillcoolgithubiopostclash-with-auto-update-config"><a href="https://akillcool.github.io/post/clash-with-auto-update-config/">脚本三</a><a hidden class="anchor" aria-hidden="true" href="#脚本三httpsakillcoolgithubiopostclash-with-auto-update-config">#</a></h4>
<ul>
<li>
<p>clash.service</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /usr/lib/systemd/system/clash.service
<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>clash
After<span style="color:#f92672">=</span>network.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
WorkingDirectory<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;your home directory&#34;</span>/.clash
ExecStart<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;your home directory&#34;</span>/.clash/start-clash.sh
ExecStop<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;your home directory&#34;</span>/.clash/stop-clash.sh
Environment<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;HOME=your home directory&#34;</span>
Environment<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;CLASH_URL=your subscribe address&#34;</span>

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>start-clash.sh</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/start-clash.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#75715e"># save pid file</span>
echo $$ &gt; <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/clash.pid

diff <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/config.yaml &lt;<span style="color:#f92672">(</span>curl -s <span style="color:#e6db74">${</span>CLASH_URL<span style="color:#e6db74">}</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$?<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/clash
<span style="color:#66d9ef">else</span>
    TIME<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>date <span style="color:#e6db74">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span style="color:#e6db74">`</span>
    cp <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/config.yaml <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">/.clash/config.yaml.bak</span><span style="color:#e6db74">${</span>TIME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
    curl -L -o <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/config.yaml <span style="color:#e6db74">${</span>CLASH_URL<span style="color:#e6db74">}</span>
    <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/clash
<span style="color:#66d9ef">fi</span>
</code></pre></div></li>
<li>
<p>stop-clash.sh</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.clash/stop-clash.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#75715e"># read pid file</span>
PID<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>cat <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.config/clash/clash.pid<span style="color:#e6db74">`</span>
kill -9 <span style="color:#e6db74">${</span>PID<span style="color:#e6db74">}</span>
rm <span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span>/.config/clash/clash.pid
</code></pre></div></li>
</ul>
<p><a href="https://stackoverflow.com/a/13437445"><strong>diff &lt;(echo &ldquo;$foo&rdquo;) &lt;(echo &ldquo;$bar&rdquo;)</strong></a></p>
<p>By searching the <a href="http://linux.die.net/man/1/bash">bash manpage</a> for the characters <code>&lt;(</code>, you can find that this is called “process substitution.”</p>
<p>You don&rsquo;t need to worry about the efficiency of creating a temporary file, because the temporary file is really just a pipe, not a file on disk. Try this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ echo &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span>
/dev/fd/63
</code></pre></div><p>This shows that the temporary file is really just the pipe “file descriptor 63.” Although it appears on the virtual <code>/dev</code> filesystem, the disk is never touched.</p>
<p>The actual efficiency issue that you might need to worry about here is the ‘process’ part of “process substitution.” Bash forks another process to perform the <code>echo foo</code>. On some platforms, like Cygwin, this can be very slow if performed frequently. However, on most modern platforms, <code>fork</code>ing is pretty fast. I just tried doing 1000 process substitutions at once by running the script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">echo &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span> &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span> ... <span style="color:#ae81ff">997</span> repetitions ... &lt;<span style="color:#f92672">(</span>echo foo<span style="color:#f92672">)</span>
</code></pre></div><p>It took 0.225s on my older Mac laptop, and 2.3 seconds in a Ubuntu virtual machine running on the same laptop. Dividing by the 1000 invocations, this shows that process substitutions takes less than 3 milliseconds—something totally dwarfed by the runtime of <code>diff</code>, and probably not anything you need to worry about!</p>
<h4 id="tun-模式httpslancellcgitbookioclashstart-clashclash-tun-mode"><a href="https://lancellc.gitbook.io/clash/start-clash/clash-tun-mode">TUN 模式</a><a hidden class="anchor" aria-hidden="true" href="#tun-模式httpslancellcgitbookioclashstart-clashclash-tun-mode">#</a></h4>
<p>“系统代理”一般只是桌面环境下的约定，需要 app 遵循约定才行。也就是说 HTTP_PROXY 这种环境变量只是约定俗成的，大家都从这里面读取代理地址，但是程序里必须要有读取这个变量的相关代码才行。</p>
<p>因此某些软件&amp;命令行软件不支持系统代理。</p>
<h5 id="clash-for-windowshttpsgithubcomfndroidclash_for_windows_pkgreleases"><a href="https://github.com/Fndroid/clash_for_windows_pkg/releases">Clash for Windows</a><a hidden class="anchor" aria-hidden="true" href="#clash-for-windowshttpsgithubcomfndroidclash_for_windows_pkgreleases">#</a></h5>
<p>tun 模式对全部 app 生效——对于不遵循系统代理的软件，TUN 模式可以接管其流量并交由 CFW 处理。<a href="https://docs.cfw.lbyczf.com/contents/tun.html#linux">启动 TUN 模式</a>需要进行如下操作：</p>
<ol>
<li>
<p>安装 nftables 和 iproute2 并重启</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install nftables iproute2
$ sudo reboot
</code></pre></div></li>
<li>
<p>点击<code>General</code>中<code>Service Mode</code>右边<code>Manage</code>，在打开窗口中安装服务模式，安装完成应用会自动重启（某些系统需要手动重启 APP），Service Mode 右边地球图标变为<code>绿色</code>即安装成功</p>
</li>
<li>
<p>点击<code>General</code>中<code>TUN Mode</code>右边开关启动 TUN 模式</p>
</li>
<li>
<p>无法安装<a href="https://docs.cfw.lbyczf.com/contents/questions.html#linux">参考</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl https://gist.githubusercontent.com/Fndroid/2119fcb5ccb5a543a8f6a609418ae43f/raw/592eba4f480c7ccb4f29c9b8e80d24bfd5dda8cf/linux.sh &gt; cfw-tun.sh <span style="color:#f92672">&amp;&amp;</span> chmod +x cfw-tun.sh <span style="color:#f92672">&amp;&amp;</span> sudo ./cfw-tun.sh install &lt;cfw安装目录&gt;
</code></pre></div><p>如要卸载则将 install 改为 uninstall，最后一部分位 CFW 安装目录</p>
</li>
</ol>
<h5 id="setup-system-stack-in-fake-ip-mode">Setup System stack in Fake-IP mode<a hidden class="anchor" aria-hidden="true" href="#setup-system-stack-in-fake-ip-mode">#</a></h5>
<p><strong>Edit config</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">dns</span>:
  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">listen</span>: <span style="color:#ae81ff">0.0.0.0</span>:<span style="color:#ae81ff">1053</span>
  <span style="color:#f92672">fake-ip-range</span>: <span style="color:#ae81ff">198.18.0.1</span><span style="color:#ae81ff">/16</span>
  <span style="color:#f92672">enhanced-mode</span>: <span style="color:#ae81ff">fake-ip</span>
  <span style="color:#f92672">nameserver</span>:
    - <span style="color:#ae81ff">114.114.114.114</span>

<span style="color:#f92672">tun</span>:
  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">stack</span>: <span style="color:#ae81ff">system</span>
  <span style="color:#f92672">dns-hijack</span>:
    - <span style="color:#ae81ff">tcp://8.8.8.8:53</span>

<span style="color:#f92672">interface-name</span>: <span style="color:#ae81ff">en0</span>
</code></pre></div><p><strong>Run Clash</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo ./clash
</code></pre></div><p><strong>Set Route</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Based on https://github.com/Kr328/kr328-clash-setup-scripts/blob/master/setup-clash-tun.sh</span>
ipset create localnetwork hash:net
ipset add localnetwork 127.0.0.0/8
ipset add localnetwork 10.0.0.0/8
ipset add localnetwork 169.254.0.0/16
ipset add localnetwork 192.168.0.0/16
ipset add localnetwork 224.0.0.0/4
ipset add localnetwork 240.0.0.0/4
ipset add localnetwork 172.16.0.0/12

ip tuntap add user root mode tun utun0
ip link set utun0 up

ip route replace default dev utun0 table 0x162

ip rule add fwmark 0x162 lookup 0x162

iptables -t mangle -N CLASH
iptables -t mangle -F CLASH
iptables -t mangle -A CLASH -p tcp --dport <span style="color:#ae81ff">53</span> -j MARK --set-mark 0x162
iptables -t mangle -A CLASH -p udp --dport <span style="color:#ae81ff">53</span> -j MARK --set-mark 0x162
iptables -t mangle -A CLASH -m addrtype --dst-type BROADCAST -j RETURN
iptables -t mangle -A CLASH -m set --match-set localnetwork dst -j RETURN
iptables -t mangle -A CLASH -d 198.18.0.0/16 -j MARK --set-mark 0x162
iptables -t mangle -A CLASH -j MARK --set-mark 0x162

iptables -t mangle -I OUTPUT -j CLASH
iptables -t mangle -I PREROUTING -m set ! --match-set localnetwork dst -j MARK --set-mark 0x162


sysctl -w net/ipv4/ip_forward<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
sysctl -w net.ipv4.conf.utun0.rp_filter<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</code></pre></div><p><strong>Set Gateway and DNS server in other devices</strong></p>
<p>Set the gateway and DNS server, then enjoy the clash</p>
<h4 id="tproxy-modehttpslancellcgitbookioclashstart-clashclash-udp-tproxy-support"><a href="https://lancellc.gitbook.io/clash/start-clash/clash-udp-tproxy-support">TProxy Mode</a><a hidden class="anchor" aria-hidden="true" href="#tproxy-modehttpslancellcgitbookioclashstart-clashclash-udp-tproxy-support">#</a></h4>
<p>Transparent proxies act as intermediaries between a user and a web service. When a user connects to a service, the transparent proxy intercepts the request before passing it on to the provider. Transparent proxies are considered transparent because the user isn’t aware of them. On the other hand, the servers hosting the service recognize that the proxied traffic is coming from a proxy and not directly from the user.</p>
<p>And Tproxy is first choice of realize transparent proxy with NAT on Linux. In the past, Clash TProxy mode only support TCP traffic. After version 0.19, Clash TProxy mode also support UDP traffic, it will solve a NAT problem.</p>
<p><strong>What&rsquo;s different between TProxy mode and TUN mode?</strong></p>
<p>There&rsquo;s no big difference in user-side.</p>
<p>In developer side, Tproxy is a proxy, although it is not perceived by the application. And TUN is a gatway, application knows there is a gateway, and traffic must pass through it.</p>
<p><strong>Check your config</strong></p>
<p>Make sure you config have no <code>tun</code> field.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: redir-host <span style="color:#75715e"># or fake-ip</span>
  nameserver:
    - 114.114.114.114
</code></pre></div><p><strong>Add Rules in iptable</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">iptables -t nat -N clash
iptables -t nat -A clash -d 0.0.0.0/8 -j RETURN
iptables -t nat -A clash -d 10.0.0.0/8 -j RETURN
iptables -t nat -A clash -d 127.0.0.0/8 -j RETURN
iptables -t nat -A clash -d 169.254.0.0/16 -j RETURN
iptables -t nat -A clash -d 172.16.0.0/12 -j RETURN
iptables -t nat -A clash -d 192.168.0.0/16 -j RETURN
iptables -t nat -A clash -d 224.0.0.0/4 -j RETURN
iptables -t nat -A clash -d 240.0.0.0/4 -j RETURN
iptables -t nat -A clash -d <span style="color:#e6db74">&#34;</span>$local_ipv4<span style="color:#e6db74">&#34;</span> -j RETURN
iptables -t nat -A clash -p tcp -j REDIRECT --to-port <span style="color:#e6db74">&#34;</span>$proxy_port<span style="color:#e6db74">&#34;</span>
iptables -t nat -I PREROUTING -p tcp -d 8.8.8.8 -j REDIRECT --to-port <span style="color:#e6db74">&#34;</span>$proxy_port<span style="color:#e6db74">&#34;</span>
iptables -t nat -I PREROUTING -p tcp -d 8.8.4.4 -j REDIRECT --to-port <span style="color:#e6db74">&#34;</span>$proxy_port<span style="color:#e6db74">&#34;</span>
iptables -t nat -A PREROUTING -p tcp -j clash
iptables -t nat -A OUTPUT -p tcp -d 198.18.0.0/16 -j REDIRECT --to-port <span style="color:#e6db74">&#34;</span>$proxy_port<span style="color:#e6db74">&#34;</span> <span style="color:#75715e"># use it just for fake-ip</span>
iptables -t nat -N CLASH_DNS
iptables -t nat -F CLASH_DNS 
iptables -t nat -A CLASH_DNS -p udp -j REDIRECT --to-port <span style="color:#ae81ff">1053</span>
iptables -t nat -I OUTPUT -p udp --dport <span style="color:#ae81ff">53</span> -j CLASH_DNS
iptables -t nat -I PREROUTING -p udp --dport <span style="color:#ae81ff">53</span> -j REDIRECT --to <span style="color:#ae81ff">1053</span>
</code></pre></div><h4 id="配置文件httpswwwcfmemcom202108clashhtml"><a href="https://www.cfmem.com/2021/08/clash.html">配置文件</a><a hidden class="anchor" aria-hidden="true" href="#配置文件httpswwwcfmemcom202108clashhtml">#</a></h4>
<p><strong>Clash</strong> 是基于 Go 语言写的科学上网工具，目前支持 windows, mac, android, openwrt, linux 平台，支持 ss, trojan, vmess, snell 协议，支持分流规则。</p>
<p>clash 配置文件格式为 yaml 格式，格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">port</span>: <span style="color:#ae81ff">7890</span>
<span style="color:#f92672">socks-port</span>: <span style="color:#ae81ff">7891</span>
<span style="color:#f92672">allow-lan</span>: <span style="color:#66d9ef">true</span>
<span style="color:#f92672">mode</span>: <span style="color:#ae81ff">Rule</span>
<span style="color:#f92672">log-level</span>: <span style="color:#ae81ff">info</span>
<span style="color:#f92672">external-controller</span>: :<span style="color:#ae81ff">9090</span>
<span style="color:#f92672">proxies</span>:
  - {<span style="color:#f92672">name</span>: <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1}</span>
<span style="color:#f92672">proxy-groups</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">🔰 节点选择</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">select</span>
    <span style="color:#f92672">proxies</span>:
      - <span style="color:#ae81ff">♻️ 自动选择</span>
      - <span style="color:#ae81ff">🎯 全球直连</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1</span>
<span style="color:#f92672">rules</span>:
  - <span style="color:#ae81ff">DOMAIN-SUFFIX,local,🎯 全球直连</span>
</code></pre></div><h5 id="proxies">proxies<a hidden class="anchor" aria-hidden="true" href="#proxies">#</a></h5>
<p>proxies 代表节点数据，所有的分流规则都是按照这些节点数据来的，这里可以有很多个节点数据，可以是 trojan, ss, vmess 类型都可以，我们来看个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">{<span style="color:#f92672">name: cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1, server: xxxx, port: 59113, type: vmess, uuid: 1111111, alterId: 0, cipher: auto, tls</span>: <span style="color:#66d9ef">false</span>}
</code></pre></div><p>clash 用统一的格式来定义不同的节点类型，用 type 来进行区分，特有的属性只需要在这个结构体加上自己属性就可以， clash 客户端会根据 type 不同而来读数据</p>
<h5 id="proxy-groups">proxy-groups<a hidden class="anchor" aria-hidden="true" href="#proxy-groups">#</a></h5>
<p>可以把 <strong>proxy-groups</strong> 理解为一道又道的过滤网，当你发出一个请求时，这个请求将会被在哪一层的过滤网给拦截下来，取决于你的 <strong>rules</strong> 与 请求匹配。我们来解析一下 proxy-groups 里面的参数。</p>
<p><strong>name</strong></p>
<p>代表组的名称，组的名称可以随意命名，但建议取有意义的名称，组的名称可以被其它的组引用，也可以放在规则里面</p>
<p><strong>type</strong></p>
<p>type 代表这个组的类型，有下面四种情况</p>
<ul>
<li>
<p>select 手动选择，该组在节点列表上，手动选择列表或者 proxy-group</p>
</li>
<li>
<p>url-test 延迟最低节点，测试该组所有节点的延迟</p>
</li>
<li>
<p>fallback 回落，连接该组第一个节点，不可用时切换到下一个节点</p>
</li>
<li>
<p>load-balance 负载均衡，由该组2个以上的节点提供链接</p>
</li>
</ul>
<p><strong>proxies</strong></p>
<p>这里可以是组名称或者节点名称，依次从上到下进行选择，比如看下面这个</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">🔰 节点选择</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">select</span>
    <span style="color:#f92672">proxies</span>:
      - <span style="color:#ae81ff">♻️ 自动选择</span>
      - <span style="color:#ae81ff">🎯 全球直连</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 26-2</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 28-3</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港-4</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 2-5</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 3-6</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 4-7</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 10-8</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 11-9</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">♻️ 自动选择</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">url-test</span>
    <span style="color:#f92672">url</span>: <span style="color:#ae81ff">http://www.gstatic.com/generate_204</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">300</span>
    <span style="color:#f92672">proxies</span>:
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 26-2</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 28-3</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港-4</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 2-5</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 3-6</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 4-7</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 10-8</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 11-9</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 香港 12-10</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">🌍 国外媒体</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">select</span>
    <span style="color:#f92672">proxies</span>:
      - <span style="color:#ae81ff">🔰 节点选择</span>
      - <span style="color:#ae81ff">♻️ 自动选择</span>
      - <span style="color:#ae81ff">🎯 全球直连</span>
      - <span style="color:#ae81ff">cfmem.com - 🇭🇰 gq - 香港Amazon数据中心 20-1</span>
</code></pre></div><p>名称为自动选择的组会每间隔 300 毫秒去 ping 节点数据，测试的地址是：http://www.gstatic.com/generate_204</p>
<p>而 国外媒体这一项是手动选择默认选择第一个 节点选择，节点选择的第一个是自动选择，所以默认是根据 ping 值来选择节点的</p>
<h5 id="rules">rules<a hidden class="anchor" aria-hidden="true" href="#rules">#</a></h5>
<p>rules 也就是具体的分发规则了，规则一般由 <code>[规则前缀],[域名或地址],[组名]</code> 组成。我们来看下，其中 no-resolve 表示不要解析这条规则，只处理直接 ip 访问请求</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">rules</span>:
  - <span style="color:#ae81ff">DOMAIN-SUFFIX,local,🎯 全球直连</span>
  - <span style="color:#ae81ff">IP-CIDR,192.168.0.0/16,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR,10.0.0.0/8,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR,172.16.0.0/12,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR,127.0.0.0/8,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR,100.64.0.0/10,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR6,::1/128,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR6,fc00::/7,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR6,fe80::/10,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">IP-CIDR6,fd00::/8,🎯 全球直连,no-resolve</span>
  - <span style="color:#ae81ff">DOMAIN-KEYWORD,1drv,Ⓜ️ 微软服务</span>
</code></pre></div><p>规则前缀有这些内容</p>
<ul>
<li>
<p>DOMAIN-SUFFIX 表示包含什么后缀的域名</p>
</li>
<li>
<p>IP-CIDR IPV4匹配</p>
</li>
<li>
<p>IP-CIDR6 IPV6匹配</p>
</li>
<li>
<p>DOMAIN-KEYWORD,xxx 表示包含 xxx域名关键字的链接</p>
</li>
<li>
<p>DOMAIN abc.hello.com 表示包含完整的域名</p>
</li>
<li>
<p>PROCESS-NAME 表示进程名称</p>
</li>
<li>
<p>GEOIP 数据库（国家代码）匹配</p>
</li>
<li>
<p>MATCH 全匹配（一般放在最后）</p>
</li>
</ul>
<h4 id="dns污染httpsblogrssinsnetarchives1379"><a href="https://blog.rssins.net/archives/1379">DNS污染</a><a hidden class="anchor" aria-hidden="true" href="#dns污染httpsblogrssinsnetarchives1379">#</a></h4>
<p>DNS服务器即是将用户请求的域名(网站URL)转换为IP地址的服务器。当年中国长城防火墙开始部署时就是通过DNS污染来屏蔽网站的。这项名为DNS污染的技术，就是对用户请求的域名回应一个错误的IP地址，使用户无法访问某个网站。至此，国内几乎所有的公共DNS服务器都被污染，用户无法请求到被屏蔽网站的正确IP地址。但是目前，防火墙的屏蔽功能早已不止DNS污染那么简单了，可以针对IP/域名直接阻断连接，甚至屏蔽了国外未受污染的DNS服务器，因此仅靠国内的DNS是不够翻墙的。</p>
<h5 id="对抗dns劫持">对抗DNS劫持<a hidden class="anchor" aria-hidden="true" href="#对抗dns劫持">#</a></h5>
<p>早期的DNS服务器（我们日常使用的基本也是）都是明文传输数据的，这就意味着防火墙可以探测出你访问的网站，并且直接篡改DNS服务器回应的IP地址。这不仅仅存在于长城防火墙，还存在于某些无良网络运营商，把用户的请求的网站劫持到某个假的网站上。</p>
<p>于是目前出现了DoH与DoT，可使用https/tls 加密传输DNS请求，这使得DNS不再容易被劫持了。国内的许多公共DNS也都提供了这项服务。以下是我所推荐的国内DNS。</p>
<ul>
<li><code>https://223.5.5.5/dns-query</code></li>
<li><code>https://223.6.6.6/dns-query</code></li>
<li><code>https://doh.pub/dns-query</code></li>
</ul>
<p>或许可以参考 <a href="https://blog.skk.moe/post/which-public-dns-to-use/">如何选择适合的公共 DNS？</a></p>
<h5 id="何时使用">何时使用<a hidden class="anchor" aria-hidden="true" href="#何时使用">#</a></h5>
<p>Clash只会在域名匹配为直连时使用配置文件的DNS，其余时刻均交给节点进行远程解析。当然，节点域名也会使用配置文件的DNS。</p>
<p>举个例子，访问 <code>google.com</code> 时，匹配到代理规则，那么这个流量将直接被发送至节点服务器，交给节点处理（通常是节点服务器的DNS解析，这个不用管了）。访问 <code>microsoft.com</code> 时，匹配到直连规则，Clash将使用配置文件的DNS设定进行解析。</p>
<h5 id="dns配置httpswwwxkww3ncyou20220208use-clash-dns-anti-dns-hijacking"><a href="https://www.xkww3n.cyou/2022/02/08/use-clash-dns-anti-dns-hijacking/">DNS配置</a><a hidden class="anchor" aria-hidden="true" href="#dns配置httpswwwxkww3ncyou20220208use-clash-dns-anti-dns-hijacking">#</a></h5>
<p>首先，打开你的 Clash 配置文件（如果你使用 Clash for Windows 或 Clash for Android, 可以使用软件自带的“覆写/Mixin”功能），添加以下段落：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">dns</span>:
  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">listen</span>: <span style="color:#ae81ff">0.0.0.0</span>:<span style="color:#ae81ff">53Copy</span>
</code></pre></div><p>这一段的意思是启用 Clash 的 DNS 服务并让其在 53 端口（这是绝大多数操作系统将 DNS 解析报文发送到的端口）监听来自任意网络界面的 DNS 请求。如果你的设备并不需要向其他设备提供解析服务，或你的设备常常需要接入不安全的网络（如手机，笔记本电脑），应当将第三行的 <code>0.0.0.0:53</code> 改为 <code>127.0.0.1:53</code> 让 Clash 仅监听本机的 DNS 解析报文。</p>
<p>（Clash 默认会同时监听 IPv4 和 IPv6 界面，如果你不需要后者，可以添加一行 <code>ipv6: false</code>）</p>
<p>由于连接到加密 DNS 服务时，需要解析服务器本身的域名，因此需要指定一些相对干净的国内 <strong>明文</strong> DNS 服务器地址。继续添加以下部分（注意缩进）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e">#--omitted--</span>
<span style="color:#f92672">default-nameserver</span>:
   - <span style="color:#ae81ff">119.29.29.29</span>
   - <span style="color:#ae81ff">223.5.5</span><span style="color:#ae81ff">.5Copy</span>
</code></pre></div><p>当收到 DNS 解析请求时，Clash 会使用以上 DNS 服务器解析加密 DNS 服务器地址并建立连接。</p>
<p>接下来，指定解析国内域名时使用的加密 DNS 服务器地址：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e">#--omitted--</span>
<span style="color:#f92672">nameserver</span>:
   - <span style="color:#ae81ff">https://doh.pub/dns-query</span>
   - <span style="color:#ae81ff">https://dns.alidns.com/dns-queryCopy</span>
</code></pre></div><p>Clash 支持 DoH（<code>https://domain.tld/dns-query</code> 形式） 和 DoT（<code>tls://domain.tld</code> 形式）两种加密 DNS 协议，不支持 DoQ.（当然也支持在此指定备用的明文 DNS）</p>
<p>然后，指定解析国外域名时使用的加密 DNS 服务器地址，并设置分流规则：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e">#--omitted--</span>
<span style="color:#f92672">fallback</span>:
   - <span style="color:#ae81ff">https://1.1.1.1/dns-query</span>
   - <span style="color:#ae81ff">https://dns.google/dns-query</span>
<span style="color:#f92672">fallback-filter</span>:
   <span style="color:#f92672">geoip</span>: <span style="color:#66d9ef">true</span>
   <span style="color:#f92672">geoip-code</span>: <span style="color:#ae81ff">CN</span>
   <span style="color:#f92672">ipcidr</span>:
     - <span style="color:#ae81ff">240.0.0.0</span><span style="color:#ae81ff">/4Copy</span>
</code></pre></div><p>“fallback” 字段指定的 DNS 服务器将被用于解析非国外域名，而 “fallback-filter” 字段则实现我们想要的分流规则——当请求解析的域名在 GeoIP 数据库内的国家代码不是 <code>CN</code> 时，或是域名在前文设置的 DNS 服务器内的解析结果位于 <code>240.0.0.0/4</code> 这一 IP 段内时（被屏蔽的域名解析常常会被污染到这一段），使用 “fallback” 字段指定的 DNS 服务器解析域名。</p>
<p>最后，修改系统 DNS 服务器为 <code>127.0.0.1</code> 即可。</p>
<h4 id="代理环境中的-dns-解析行为httpsblogskkmoepostwhat-happend-to-dns-in-proxy"><a href="https://blog.skk.moe/post/what-happend-to-dns-in-proxy">代理环境中的 DNS 解析行为</a><a hidden class="anchor" aria-hidden="true" href="#代理环境中的-dns-解析行为httpsblogskkmoepostwhat-happend-to-dns-in-proxy">#</a></h4>
<p>虽然 Fake IP 这个概念早在 2001 年就被提出来了，但是到 Clash 提供 fake-ip 增强模式以后，依然有很多人对 Fake IP 这个概念以及其作用知之甚少。本文就简单谈谈在代理环境中，TCP 连接建立之前发生的事。由于移动设备操作系统中网络栈相对复杂，本文的例子也并不一定适用于移动端环境。文章中也许会存在很多错误，也希望各路大佬的勘误和斧正。</p>
<h5 id="不使用代理">不使用代理<a hidden class="anchor" aria-hidden="true" href="#不使用代理">#</a></h5>
<p>如果在不使用任何代理的情况下，打开一个没有命中 DNS 缓存的网站（比如 <code>blog.skk.moe</code>）的时候，浏览器和操作系统大概会执行这么一些操作：</p>
<ol>
<li>浏览器自己都有 DNS 缓存机制，因此浏览器会先开始寻找自己的缓存，不过没有找到 <code>blog.skk.moe</code> 的解析结果</li>
<li>浏览器通过调用操作系统的 <code>getaddrinfo</code> 方法，向操作系统寻求解析结果</li>
<li>操作系统自己也有一层 DNS 缓存，但是现在操作系统从自己的缓存中依然找不到这一结果</li>
<li>在系统的网络设置之中有设置上游 DNS 地址，假设操作系统中设置的是 <code>119.29.29.29</code>，那么操作系统会向 <code>119.29.29.29</code> 发起解析请求（UDP 流量）拿到 <code>blog.skk.moe</code> 的 IP</li>
<li>当然如果 <code>119.29.29.29</code> 自己没有 <code>blog.skk.moe</code> 的解析结果会找它的上游去要。不过我们不关心这一点，反正最后 <code>119.29.29.29</code> 会把 <code>blog.skk.moe</code> 的解析结果返回给设备的操作系统</li>
<li>现在，浏览器已经可以开始向 <code>blog.skk.moe</code> 的 IP 发起 HTTPS 连接了</li>
</ol>
<p>以上是打开一个网页常见的 DNS 解析流程，对于其它非 HTTP 的 TCP 连接（比如 SMTP）也都差不多是这个流程——由于 TCP/IP 的协议特性，在应用发起 TCP 连接时，会先发出一个 DNS question（发一个 IP Packet），获取要连接的服务器的 IP 地址，然后直接向这个 IP 地址发起连接。</p>
<h5 id="设置代理并使用直连">设置代理并使用直连<a hidden class="anchor" aria-hidden="true" href="#设置代理并使用直连">#</a></h5>
<p>现在，我们在应用程序（比如我们的浏览器、或者其它应用）中设置了代理，但是这个代理不涉及到任何远端服务器（直连模式）。接下来以设置了 SOCKS5 代理的浏览器为例。</p>
<ol>
<li>浏览器不再需要从自己的 DNS 缓存中寻找 <code>blog.skk.moe</code>，因为已经有了 SOCKS5 代理，浏览器可以直接将域名封装在 SOCKS5 流量之中发往代理客户端</li>
<li>代理客户端从 SOCKS5 流量中抽出 <code>blog.skk.moe</code> 这个域名并设法获得解析结果</li>
<li>代理客户端将你的 SOCKS5 流量还原成标准的 TCP 请求</li>
<li>代理客户端将这个 TCP 连接建立起来，在这个例子之中 TCP 连接承载的是 HTTPS</li>
</ol>
<p>之前由于获取解析结果是浏览器在操作，而大部分浏览器都会选择调用系统的 <code>getaddrinfo</code> 方法，因此如果你想要在 DNS 上做一些黑魔法就只能在操作系统层面实现，比如在本机或者别处架设一个带黑魔法的 DNS 服务器，然后你系统中设置使用这个 DNS 服务器。现在 DNS 解析是由代理客户端执行，因此在代理客户端上就可以实现一些黑魔法。比如 Surge 自己实现了一个 DNS Server 可以并发向多个上游同时发起查询、比如 V2Ray 可以实现不同域名的查询分流，等等。当然代理客户端也可以使用操作系统的 <code>getaddrinfo</code> 方法。</p>
<h5 id="设置代理并将流量转发到远端服务器">设置代理并将流量转发到远端服务器<a hidden class="anchor" aria-hidden="true" href="#设置代理并将流量转发到远端服务器">#</a></h5>
<p>现在在上一步的基础之上，我们为代理服务器设置了一个远端服务器，这个代理会使用 某种协议 和远端服务器通信，并且这种协议和 SOCKS5 一样支持将域名封装在传输中。浏览器和代理客户端之间依然使用 SOCKS5 通信。</p>
<ol>
<li>因为已经有了 SOCKS5 代理，浏览器可以直接将域名 <code>blog.skk.moe</code> 和整个请求封装在 SOCKS5 流量之中发往代理客户端</li>
<li>代理客户端从 SOCKS5 流量中抽出 <code>blog.skk.moe</code> 这个域名以及其它数据</li>
<li>代理客户端使用 某种协议 将浏览器发出的 SOCKS5 的流量重组并发给远端服务器</li>
<li>远端服务器使用相同的 某种协议 从流量中获得其中的域名 <code>blog.skk.moe</code></li>
<li>远端服务器的代理服务端发起了一次 DNS 解析请求试图解析 <code>blog.skk.moe</code>。绝大部分情况下，代理的服务端都会直接使用操作系统的 <code>getaddrinfo</code> 方法、也就是由远端服务器的操作系统负责 DNS</li>
</ol>
<p>这一次，不论是代理客户端还是你的浏览器都没有进行 DNS 解析，DNS 解析是在远端服务器上进行的。因为 某种协议 支持封装域名，然后这一次和 <code>blog.skk.moe</code> 连接的是远端服务器，考虑到针对 CDN 优化，DNS 解析自然需要在远端服务器上执行。</p>
<p>现在我已经介绍了通过代理直连和通过代理发送给远端服务器了。但是毫无疑问，我相信本文所有的读者自己使用的上网方式都不会是全面直连或者全面代理。这就是接下来要讲的：</p>
<h5 id="设置代理并使用-ip-规则和域名规则进行分流">设置代理并使用 IP 规则和域名规则进行分流<a hidden class="anchor" aria-hidden="true" href="#设置代理并使用-ip-规则和域名规则进行分流">#</a></h5>
<p>分流是一个麻烦事。一般情况下，你可能会需要使用域名进行分流（不论是白名单还是黑名单）。不过更多情况下你会使用到基于 IP 的规则来进行分流。</p>
<p>先来看第一个例子：使用域名规则进行分流。</p>
<ol>
<li>浏览器将带有域名 <code>blog.skk.moe</code> 的 HTTPS 请求封装在 SOCKS5 流量之中发往代理客户端</li>
<li>代理客户端从 SOCKS5 流量中抽取出域名 <code>blog.skk.moe</code></li>
<li>代理客户端开始将<code>blog.skk.moe</code> 和域名规则列表开始比较。这个列表可以是白名单或黑名单，域名可能也没有匹配上。反正最终比较得出的结果就是 <code>blog.skk.moe</code> 是否需要走代理。</li>
<li>如果不需要走代理，代理客户端剩下会做的事情和本文第二部分「设置代理并使用直连」就完全一样了；同理，需要走代理的话就需要进行本文第三部分的那个流程</li>
</ol>
<p>使用域名规则分流很简单，除非 <code>blog.skk.moe</code> 最终是直连，否则代理客户端不需要进行 DNS 解析。</p>
<p>现在来看第二个例子：使用 IP 规则分流。</p>
<ol>
<li>浏览器将带有域名 <code>blog.skk.moe</code> 的 HTTPS 请求封装在 SOCKS5 流量之中发往代理客户端</li>
<li>代理客户端从 SOCKS5 流量中抽取出域名 <code>blog.skk.moe</code></li>
<li>代理客户端得到 <code>blog.skk.moe</code> 的解析结果</li>
<li>代理客户端开始将<code>blog.skk.moe</code> 的解析结果和 IP 规则列表开始比较。这个列表可以是 cnlist 或者 MaxMind IP 数据库。反正最终得出的结果就是 <code>blog.skk.moe</code> 解析结果的 IP 是否需要走代理。</li>
<li>如果不需要走代理，代理客户端剩下会做的事情和本文第二部分「设置代理并使用直连」就完全一样了；同理，需要走代理的话就需要进行本文第三部分的那个流程。</li>
</ol>
<p>使用 IP 规则分流，前提首先你得有一个 IP 拿来比较。所以代理客户端必须先进行一次 DNS 解析。使用什么方法进行 DNS 解析并不重要，之前已经说过代理客户端甚至可以使用自己的黑魔法，而我们只需要关心最终代理客户端拿到了一个 IP 并且可以用于规则判定。</p>
<p>此时需要注意的是，虽然代理客户端获得了一个 IP，但是你只有在直连的时候，代理客户端可能（并且基本上都会）复用这个 IP；如果是将流量交给远程服务器，由于 某种协议 支持封装域名，因此远程服务器拿到的还是域名不是 IP、还需要进行一次解析。也就是说，远端服务器连接的 IP 与 代理客户端解析得到的 IP 毫无关系。</p>
<h5 id="使用-redir--tun2socks-实现全局流量经过代理">使用 redir / tun2socks 实现全局流量经过代理<a hidden class="anchor" aria-hidden="true" href="#使用-redir--tun2socks-实现全局流量经过代理">#</a></h5>
<p>在开始之前，我们先复习一下 TCP/IP 协议怎么说的——「在应用发起 TCP 连接时，会先发出一个 DNS question（发一个 IP Packet），获取要连接的服务器的 IP 地址，然后直接向这个 IP 地址发起连接」</p>
<p>全局流量代理可能会出现在路由器上或者 TUN/TAP 型的支持全局代理客户端上。用户不再主动为每个应用程序设置代理。此时应用程序是不会感知到代理客户端的存在，它们会正常的发起 TCP 连接，并且由于 TCP/IP 协议，在拿到 DNS 解析结果之前，连接是不能建立的。</p>
<ol>
<li>浏览器自己都有 DNS 缓存机制，因此浏览器会先开始寻找自己的缓存，不过没有找到 <code>blog.skk.moe</code> 的解析结果</li>
<li>浏览器通过调用操作系统的 <code>getaddrinfo</code> 方法，向操作系统寻求解析结果</li>
<li>操作系统自己也有一层 DNS 缓存，但是现在操作系统从自己的缓存中依然找不到这一结果</li>
<li>在系统的网络设置之中有设置上游 DNS 地址。代理客户端可能会修改系统设置中的 DNS 到 127.0.0.1 或者别的 IP、也可能保留用户之前的设置，这无所谓，因为&hellip;</li>
<li>操作系统发出的 DNS 解析请求会经过代理客户端并最终被截获</li>
<li>代理客户端可以将这个解析请求原样发出去、或者用自己的黑魔法，总之代理客户端都会拿到一个解析结果</li>
<li>代理客户端将这个解析结果返回回去，操作系统拿到了这个解析结果并返回给浏览器</li>
<li>浏览器对这个解析结果的 IP 建立一个 TCP 连接并发送出去</li>
<li>这个 TCP 连接被代理客户端截获。由于之前代理客户端进行的 DNS 解析请求这一动作，代理客户端可以找到这个只包含目标 IP 的 TCP 连接原来的目标域名</li>
<li>如果是支持 redir 的代理客户端，那么代理客户端就会直接将域名和 TCP 连接中的其它数据封装成 某种协议 发给远端服务器；或者封装成 SOCKS5 后交给支持 SOCKS5 的代理客户端</li>
</ol>
<p>如果代理客户端需要按照域名进行分流，一般会在第 6 步代理客户端解析出一个 IP 或者第 9 步代理客户端拿到域名以后。FancySS、KoolSS、SSTap 的流程大抵都是如此。</p>
<p>和应用程序直接将流量封装成 SOCKS5 大有不同，在类似于透明代理的环境下浏览器和其它应用程序是正常地发起 TCP 连接。因此除非得到一个 DNS 解析结果，否则 TCP 连接不会建立；代理客户端也会需要通过这个 DNS 查询动作，才能找到之后的 TCP 连接的域名。
你大概能够发现，浏览器、应用程序直接设置 SOCKS5 代理的话，可以不在代理客户端发起 DNS 解析请求就能将流量发送给远端服务器；而在透明代理模式下，不论是否需要 IP 规则分流都需要先进行一次 DNS 解析才能建立连接。</p>
<p>有没有办法能像直接设置 SOCKS5 代理一样省掉一次 DNS 解析呢？有，就是代理客户端自己不先执行查询动作，丢一个 Fake IP 回去让浏览器、应用程序立刻建立 TCP 连接：</p>
<h5 id="在-redir--tun2socks-中使用-fake-ip">在 redir / tun2socks 中使用 Fake IP<a hidden class="anchor" aria-hidden="true" href="#在-redir--tun2socks-中使用-fake-ip">#</a></h5>
<p>Fake IP 的定义出自 <a href="https://tools.ietf.org/rfc/rfc3089">RFC3089</a>。这个 RFC 定义了一种新的将 TCP 连接封装成 SOCKS 协议的方法。</p>
<ol>
<li>浏览器自己都有 DNS 缓存机制，因此浏览器会先开始寻找自己的缓存，不过并没有找到 <code>blog.skk.moe</code> 的解析结果</li>
<li>浏览器通过调用操作系统的 <code>getaddrinfo</code> 方法，向操作系统寻求解析结果</li>
<li>操作系统自己也有一层 DNS 缓存，但是现在操作系统从自己的缓存中依然找不到这一结果</li>
<li>在系统的网络设置之中设置了一个专门的上游 DNS 地址，可能是用户手动设置的也可能是代理客户端设置的。不论如何，这个设置最终会使操作系统向代理客户端发起 DNS 请求</li>
<li>操作系统发出的 DNS 解析请求会经过代理客户端并最终被截获</li>
<li>代理客户端从解析请求中获得域名，从 Fake IP 池中选取一个 IP 建立映射</li>
<li>代理客户端将这个 Fake IP 返回回去，操作系统拿到了这个 Fake IP 并返回给浏览器</li>
<li>浏览器对 Fake IP 建立一个 TCP 连接并发送出去</li>
<li>这个 TCP 连接被代理客户端截获。代理客户端抽取出 Fake IP 并反查出这个 TCP 连接中对应的域名</li>
<li>有了 TCP 连接和域名，代理客户端可以轻易地将其使用 SOSCKS5 或者 某种协议 进行封装</li>
</ol>
<p>有了 Fake IP，代理客户端无需进行 DNS 解析。最后不论是浏览器、代理客户端还是远端服务器都不会去和 Fake IP 进行连接，因为在代理客户端这里就已经完成了截获、重新封装。</p>
<p>即使按照域名规则分流，代理客户端都没有进行 DNS 解析的需要。只有在遇到了按照 IP 进行分流的规则时，代理客户端才需要进行一次解析拿到一个 IP 用于判断。即便如此，这个 IP 只用于分流规则的匹配，不会被用于实际的连接。</p>
<h5 id="fancyss-和-surge--clash-的区别">FancySS 和 Surge / Clash 的区别<a hidden class="anchor" aria-hidden="true" href="#fancyss-和-surge--clash-的区别">#</a></h5>
<p>FancySS 是使用的 redir，Surge 的增强模式使用的是 Fake IP，Clash 的增强模式既有 redir-host 也有 Fake IP。首先把 FancySS 等路由器上常见的代理客户端和 Clash 的 redir-host 分为一类，Surge 的增强模式和 Clash 的 fake-ip 模式分为另一类。</p>
<p>路由器上常见的代理客户端一般内置了 dns2socks、dnscryp-proxy、PCap_DNSProxy 等等 DNS 方案、也支持按照一定的规则进行分流，但是都是用于答复应用程序的 DNS question 使其建立 TCP 连接的，除非直连，否则通过这些 DNS 方案拿到的解析结果的 IP 并不会被用上。
大部分路由器上的代理客户端，DNS 解析请求都是通过路由器本机发出（或转发到单一远端服务器进行解析），因此解析结果只能说「至少能用」（不一定是有 CDN 优化的，甚至有可能会有 DNS 污染），如果流量不经过代理客户端直接发往这些 IP 地址，一般也不会影响浏览器、应用程序的正常使用。因此路由器上的代理客户端可以实现通过 iptables 控制让某些端口、某些设备的流量不经过代理客户端。
而在 Fake IP 模式下，浏览器、应用程序都是对 Fake IP 发起连接，如果没有代理客户端对连接进行重新封转，那么这部分流量就不能被发往真实的目的 IP，因此所有流量都必须经过代理客户端，而根据端口、设备的分流就需要由代理客户端自己实现。</p>
<h5 id="如果操作系统或者浏览器缓存了-dns-解析结果">如果操作系统或者浏览器缓存了 DNS 解析结果<a hidden class="anchor" aria-hidden="true" href="#如果操作系统或者浏览器缓存了-dns-解析结果">#</a></h5>
<p>之前的透明代理的两个例子中，我们都假定浏览器和操作系统都没有缓存 DNS 解析结果。但是，如果操作系统或者应用程序缓存了 DNS 解析结果会发生什么？</p>
<p>如果是不使用 Fake IP 的 redir / tun2socks 情况下，由于操作系统、浏览器或者应用程序中的任何一个缓存了 DNS 解析结果，因此 TCP 连接可以直接根据缓存的解析结果的 IP 建立，代理客户端并没有预先收到对应的 DNS question。在这种情况下，代理客户端有可能直接将这个连接视为和 IP 连接而不是和域名连接，根据域名规则的分流可能就会因此失效，不过根据 IP 分流的规则没有失效。
如果为了避免域名分流规则失效，你可以设法阻止操作系统或者浏览器缓存 DNS 解析结果，这样每次建立 TCP 连接之前都会发送 DNS question 使代理客户端探测到域名。但是这意味着每次 TCP 连接建立都需要代理客户端进行一次 DNS 解析请求（当然代理客户端可以对 DNS 解析进行缓存避免出现延时激增）。</p>
<p>而对于 Fake IP 模式来说，由于代理客户端内存储有 Fake IP 和真实域名之间的映射表，因此即使操作系统或应用程序缓存了 Fake IP，在之后的 TCP 连接中，代理客户端收到流量后依然可以抽取出 Fake IP 反查出域名，因此不受 DNS 缓存的影响。</p>
<p>我在这里留几个问题给大家思考一下：</p>
<ul>
<li>如果使用了 Fake IP，代理客户端不论域名是否真实存在都会返回一个 Fake IP 给浏览器，那么浏览器在试图访问一个不存在的域名时，错误信息应该是什么样的？会不会出现 DNS 解析失败的错误信息？</li>
<li>如果操作系统或者浏览器缓存了 Fake IP，但是代理客户端中 Fake IP 和域名的映射表丢失以后，会出现什么状况？可能会出现什么错误信息？</li>
</ul>
<p>第二个问题很有趣。因为如果你找到了第二个问题的答案，你就会意识到 Clash 在 Fake IP 模式下偶发的无法上网的原因了。</p>
<h5 id="参考资料">参考资料<a hidden class="anchor" aria-hidden="true" href="#参考资料">#</a></h5>
<ul>
<li><a href="https://imququ.com/post/web-proxy.html">HTTP 代理原理及实现（一）</a> - 我的文章中举得都是 SOCKS5 的例子，如果想了解一下在 HTTP 代理中流量是如何被封装的，可以看看屈屈的这篇博客</li>
<li><a href="https://medium.com/@Blankwonder/surge-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0-8aa3304fb3bb">Surge 原理与实现</a> - Surge 开发者写的 Surge 早期版本的工作原理，可以了解一下 Surge 是怎么处理各种协议的流量的</li>
<li><a href="https://medium.com/@TachyonDevel/%E6%BC%AB%E8%B0%88%E5%90%84%E7%A7%8D%E9%BB%91%E7%A7%91%E6%8A%80%E5%BC%8F-dns-%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-62c50e58cbd0">漫谈各种黑科技式 DNS 技术在代理环境中的应用</a> - Kitsunebi 开发者写的文章，详细地介绍了在不同的 V2Ray 配置下的 DNS 行为，同时还有对移动端网络栈的一些介绍</li>
</ul>
<h3 id="wireguardhttpsfuckcloudnativeiopostswireguard-docs-practice"><a href="https://fuckcloudnative.io/posts/wireguard-docs-practice/">WireGuard</a><a hidden class="anchor" aria-hidden="true" href="#wireguardhttpsfuckcloudnativeiopostswireguard-docs-practice">#</a></h3>
<p>官方文档：https://github.com/pirate/wireguard-docs</p>
<p><code>WireGuard</code> 是由 <code>Jason Donenfeld</code> 等人用 <code>C</code> 语言编写的一个开源 VPN 协议，被视为下一代 VPN 协议，旨在解决许多困扰 <code>IPSec/IKEv2</code>、<code>OpenVPN</code> 或 <code>L2TP</code> 等其他 VPN 协议的问题。它与 <code>Tinc</code> 和 <code>MeshBird</code> 等现代 VPN 产品有一些相似之处，即加密技术先进、配置简单。从 2020 年 1 月开始，它已经并入了 Linux 内核的 <code>5.6</code> 版本，这意味着大多数 Linux 发行版的用户将拥有一个开箱即用的 WireGuard。</p>
<h4 id="术语">术语<a hidden class="anchor" aria-hidden="true" href="#术语">#</a></h4>
<p><strong>Peer/Node/Device</strong></p>
<p>连接到 VPN 并为自己注册一个 VPN 子网地址（如 192.0.2.3）的主机。还可以通过使用逗号分隔的 CIDR 指定子网范围，为其自身地址以外的 IP 地址选择路由。</p>
<p><strong>中继服务器（Bounce Server）</strong></p>
<p>一个公网可达的对等节点，可以将流量中继到 <code>NAT</code> 后面的其他对等节点。<code>Bounce Server</code> 并不是特殊的节点，它和其他对等节点一样，唯一的区别是它有公网 IP，并且开启了内核级别的 IP 转发，可以将 VPN 的流量转发到其他客户端。</p>
<p><strong>子网（Subnet）</strong></p>
<p>一组私有 IP，例如 <code>192.0.2.1-255</code> 或 <code>192.168.1.1/24</code>，一般在 NAT 后面，例如办公室局域网或家庭网络。</p>
<p><a href="https://www.cnblogs.com/hark0623/p/6547432.html"><strong>CIDR 表示法</strong></a></p>
<p>CIDR中文全称是无分类域间路由选择，英文全称是Classless Inter-Domain Routing，在平常，大家多称之为无分类编址，它也是构成超网的一种技术实现。CIDR在一定程度上解决了路由表项目过多过大的问题。CIDR之所以称为无分类编址，就是因为CIDR完全放弃了之前的分类IP地址表示法，它真正消除了传统的A类、B类、C类地址以及划分子网的概念，它使用如下的IP地址表示法：</p>
<pre tabindex="0"><code>IP地址 ::= {&lt;网络前缀&gt;， &lt;主机号&gt;} / 网络前缀所占位数
</code></pre><p>CIDR仅将IP地址划分为网络前缀和主机号两个部分，可以说又回到了二级IP地址的表示，不过大家要注意，最后面用“/”斜线分隔，在其后写上了网络前缀所占的位数，这样就不需要告知路由器地址掩码，仅需要通过网络前缀所占的位数就可以得到地址掩码，为了统一，CIDR中的地址掩码依然称为子网掩码。</p>
<p><strong>NAT</strong></p>
<p>子网的私有 IP 地址由路由器提供，通过公网无法直接访问私有子网设备，需要通过 NAT 做网络地址转换。路由器会跟踪发出的连接，并将响应转发到正确的内部 IP。</p>
<p><strong>公开端点（Public Endpoint）</strong></p>
<p>节点的公网 IP 地址:端口，例如 <code>123.124.125.126:1234</code>，或者直接使用域名 <code>some.domain.tld:1234</code>。如果对等节点不在同一子网中，那么节点的公开端点必须使用公网 IP 地址。</p>
<p><strong>私钥（Private key）</strong></p>
<p>单个节点的 WireGuard 私钥，生成方法是：<code>wg genkey &gt; example.key</code>。</p>
<p><strong>公钥（Public key）</strong></p>
<p>单个节点的 WireGuard 公钥，生成方式为：<code>wg pubkey &lt; example.key &gt; example.key.pub</code>。</p>
<p><strong>DNS</strong></p>
<p>域名服务器，用于将域名解析为 VPN 客户端的 IP，不让 DNS请求泄漏到 VPN 之外。</p>
<h4 id="工作原理">工作原理<a hidden class="anchor" aria-hidden="true" href="#工作原理">#</a></h4>
<p><strong>中继服务器工作原理</strong></p>
<p>中继服务器（Bounce Server）和普通的对等节点一样，它能够在 <code>NAT</code> 后面的 VPN 客户端之间充当中继服务器，可以将收到的任何 VPN 子网流量转发到正确的对等节点。事实上 WireGuard 并不关心流量是如何转发的，这个由系统内核和 <code>iptables</code> 规则处理。</p>
<p>如果所有的对等节点都是公网可达的，则不需要考虑中继服务器，只有当有对等节点位于 NAT 后面时才需要考虑。</p>
<p>*在 WireGuard 里，客户端和服务端基本是平等的，差别只是谁主动连接谁而已。*双方都会监听一个 UDP 端口，谁主动连接，谁就是客户端。主动连接的客户端需要指定对端的公网地址和端口，被动连接的服务端不需要指定其他对等节点的地址和端口。如果客户端和服务端都位于 NAT 后面，需要加一个中继服务器，客户端和服务端都指定中继服务器作为对等节点，它们的通信流量会先进入中继服务器，然后再转发到对端。</p>
<p>WireGuard 是支持漫游的，也就是说，双方不管谁的地址变动了，WireGuard 在看到对方从新地址说话的时候，就会记住它的新地址（跟 mosh 一样，不过是双向的）。所以双方要是一直保持在线，并且通信足够频繁的话（比如配置 <code>persistent-keepalive</code>），两边的 IP 都不固定也不影响的。</p>
<p><strong>流量路由</strong></p>
<p>利用 WireGuard 可以组建非常复杂的网络拓扑，这里主要介绍几个典型的拓扑：</p>
<ol>
<li>端到端直接连接</li>
</ol>
<p>这是最简单的拓扑，所有的节点要么在同一个局域网，要么直接通过公网访问，这样 <code>WireGuard</code> 可以直接连接到对端，不需要中继跳转。</p>
<ol start="2">
<li>一端位于 NAT 后面，另一端直接通过公网暴露</li>
</ol>
<p>这种情况下，最简单的方案是：通过公网暴露的一端作为服务端，另一端指定服务端的公网地址和端口，然后通过 <code>persistent-keepalive</code> 选项维持长连接，让 NAT 记得对应的映射关系。</p>
<ol start="3">
<li>两端都位于 NAT 后面，通过中继服务器连接</li>
</ol>
<p>大多数情况下，当通信双方都在 NAT 后面的时候，NAT 会做源端口随机化处理，直接连接可能比较困难。可以加一个中继服务器，通信双方都将中继服务器作为对端，然后维持长连接，流量就会通过中继服务器进行转发。</p>
<ol start="3">
<li>两端都位于 NAT 后面，通过 UDP NAT 打洞</li>
</ol>
<p>上面也提到了，当通信双方都在 NAT 后面的时候，直接连接不太现实，因为大多数 NAT 路由器对源端口的随机化相当严格，不可能提前为双方协调一个固定开放的端口。必须使用一个信令服务器（<code>STUN</code>），它会在中间沟通分配给对方哪些随机源端口。通信双方都会和公共信令服务器进行初始连接，然后它记录下随机的源端口，并将其返回给客户端。这其实就是现代 P2P 网络中 <code>WebRTC</code> 的工作原理。有时候，即使有了信令服务器和两端已知的源端口，也无法直接连接，因为 NAT 路由器严格规定只接受来自原始目的地址（信令服务器）的流量，会要求新开一个随机源端口来接受来自其他 IP 的流量（比如其他客户端试图使用原来的通信源端口）。运营商级别的 NAT 就是这么干的，比如蜂窝网络和一些企业网络，它们专门用这种方法来防止打洞连接。更多细节请参考下一部分的 NAT 到 NAT 连接实践的章节。</p>
<p>如果某一端同时连接了多个对端，当它想访问某个 IP 时，如果有具体的路由可用，则优先使用具体的路由，否则就会将流量转发到中继服务器，然后中继服务器再根据系统路由表进行转发。你可以通过测量 ping 的时间来计算每一跳的长度，并通过检查对端的输出（<code>wg show wg0</code>）来找到 WireGuard 对一个给定地址的路由方式。</p>
<p><strong>报文格式</strong></p>
<p>WireGuard 使用加密的 UDP 报文来封装所有的数据，UDP 不保证数据包一定能送达，也不保证按顺序到达，但隧道内的 TCP 连接可以保证数据有效交付。WireGuard 的报文格式如下图所示：</p>
<p><img loading="lazy" src="/Distributions/WireGuardMessage.png" alt="img"  />
</p>
<p><strong>性能</strong></p>
<p>WireGuard 声称其性能比大多数 VPN 协议更好，但这个事情有很多争议，比如某些加密方式支持硬件层面的加速。</p>
<p>WireGuard 直接在内核层面处理路由，直接使用系统内核的加密模块来加密数据，和 Linux 原本内置的密码子系统共存，原有的子系统能通过 <code>API</code> 使用 WireGuard 的 <code>Zinc</code> 密码库。WireGuard 使用 UDP 协议传输数据，在不使用的情况下默认不会传输任何 UDP 数据包，所以比常规 VPN 省电很多，可以像 55 一样一直挂着使用，速度相比其他 VPN 也是压倒性优势。</p>
<p><img loading="lazy" src="/Distributions/WireGuardPerformance.png" alt="img"  />
</p>
<p><strong>安全模型</strong></p>
<p>WireGuard 使用以下加密技术来保障数据的安全：</p>
<ul>
<li>使用 <code>ChaCha20</code> 进行对称加密，使用 <code>Poly1305</code> 进行数据验证。</li>
<li>利用 <code>Curve25519</code> 进行密钥交换。</li>
<li>使用 <code>BLAKE2</code> 作为哈希函数。</li>
<li>使用 <code>HKDF</code> 进行解密。</li>
</ul>
<p>WireGuard 的加密技术本质上是 <code>Trevor Perrin</code> 的 <code>Noise</code> 框架的实例化，它简单高效，其他的 VPN 都是通过一系列协商、握手和复杂的状态机来保障安全性。WireGuard 就相当于 VPN 协议中的 <code>qmail</code>，代码量比其他 VPN 协议少了好几个数量级。</p>
<p><strong>密钥管理</strong></p>
<p>WireGuard 通过为每个对等节点提供简单的公钥和私钥来实现双向认证，每个对等节点在设置阶段生成密钥，且只在对等节点之间共享密钥。每个节点除了公钥和私钥，不再需要其他证书或预共享密钥。</p>
<p>在更大规模的部署中，可以使用 <code>Ansible</code> 或 <code>Kubernetes Secrets</code> 等单独的服务来处理密钥的生成、分发和销毁。</p>
<p>如果你不想在 <code>wg0.conf</code> 配置文件中直接硬编码，可以从文件或命令中读取密钥，这使得通过第三方服务管理密钥变得更加容易：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>Interface<span style="color:#f92672">]</span>
...
PostUp <span style="color:#f92672">=</span> wg set %i private-key /etc/wireguard/wg0.key &lt;<span style="color:#f92672">(</span>cat /some/path/%i/privkey<span style="color:#f92672">)</span>
</code></pre></div><p>从技术上讲，多个服务端之间可以共享相同的私钥，只要客户端不使用相同的密钥同时连接到两个服务器。但有时客户端会需要同时连接多台服务器，例如，你可以使用 <code>DNS</code> 轮询来均衡两台服务器之间的连接，这两台服务器配置相同。大多数情况下，每个对等节点都应该使用独立的的公钥和私钥，这样每个对等节点都不能读取到对方的流量，保障了安全性。</p>
<h4 id="搭建使用与配置详解">搭建使用与配置详解<a hidden class="anchor" aria-hidden="true" href="#搭建使用与配置详解">#</a></h4>
<h5 id="快速开始">快速开始<a hidden class="anchor" aria-hidden="true" href="#快速开始">#</a></h5>
<p><strong>安装</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Ubuntu ≥ 18.04</span>
$ apt install wireguard
</code></pre></div><p>在中继服务器上开启 IP 地址转发：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;net.ipv4.ip_forward = 1&#34;</span> &gt;&gt; /etc/sysctl.conf
$ echo <span style="color:#e6db74">&#34;net.ipv4.conf.all.proxy_arp = 1&#34;</span> &gt;&gt; /etc/sysctl.conf
$ sysctl -p /etc/sysctl.conf
</code></pre></div><p>添加 iptables 规则，允许本机的 NAT 转换：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ iptables -A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
$ iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
$ iptables -A FORWARD -i wg0 -o wg0 -m conntrack --ctstate NEW -j ACCEPT
$ iptables -t nat -A POSTROUTING -s 192.0.2.0/24 -o eth0 -j MASQUERADE
</code></pre></div><p>需要把 <code>eth0</code> 改成你实际使用的网卡接口名称。</p>
<p><strong>配置文件</strong></p>
<p>配置文件可以放在任何路径下，但必须通过绝对路径引用。默认路径是 <code>/etc/wireguard/wg0.conf</code>。</p>
<p><strong>生成密钥</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#生成私钥</span>
$ wg genkey &gt; example.key

<span style="color:#75715e"># 生成公钥</span>
$ wg pubkey &lt; example.key &gt; example.key.pub
</code></pre></div><p><strong>启动与停止</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wg-quick up /full/path/to/wg0.conf
$ wg-quick down /full/path/to/wg0.conf

<span style="color:#75715e"># 启动/停止 VPN 网络接口</span>
$ ip link set wg0 up
$ ip link set wg0 down

<span style="color:#75715e"># 注册/注销 VPN 网络接口</span>
$ ip link add dev wg0 type wireguard
$ ip link delete dev wg0

<span style="color:#75715e"># 注册/注销 本地 VPN 地址</span>
$ ip address add dev wg0 192.0.2.3/32
$ ip address delete dev wg0 192.0.2.3/32

<span style="color:#75715e"># 添加/删除 VPN 路由</span>
$ ip route add 192.0.2.3/32 dev wg0
$ ip route delete 192.0.2.3/32 dev wg0
</code></pre></div><p><strong>查看信息</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 查看系统 VPN 接口信息</span>
$ ip link show wg0

<span style="color:#75715e"># 查看 VPN 接口详细信息</span>
$ wg show all
$ wg show wg0

<span style="color:#75715e"># 查看 VPN 接口地址</span>
$ ip address show wg0
</code></pre></div><p><strong>路由</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 查看系统路由表</span>
$ ip route show table main
$ ip route show table local

<span style="color:#75715e"># 获取到特定 IP 的路由</span>
$ ip route get 192.0.2.3
</code></pre></div><p><strong>一键安装</strong></p>
<p>一键安装请参考这个项目：<a href="https://github.com/angristan/wireguard-install">WireGuard installer</a></p>
<h5 id="配置详解">配置详解<a hidden class="anchor" aria-hidden="true" href="#配置详解">#</a></h5>
<p>WireGuard 使用 <a href="https://zh.wikipedia.org/wiki/INI%E6%96%87%E4%BB%B6">INI</a> 语法作为其配置文件格式。配置文件可以放在任何路径下，但必须通过绝对路径引用。默认路径是 <code>/etc/wireguard/wg0.conf</code>。</p>
<p>配置文件的命名形式必须为 <code>${WireGuard 接口的名称}.conf</code>。通常情况下 WireGuard 接口名称以 <code>wg</code> 为前缀，并从 <code>0</code> 开始编号，但你也可以使用其他名称，只要符合正则表达式 <code>^[a-zA-Z0-9_=+.-]{1,15}$</code> 就行。</p>
<p>你可以选择使用 <code>wg</code> 命令来手动配置 VPN，但一般建议使用 <code>wg-quick</code>，它提供了更强大和用户友好的配置体验，可以通过配置文件来管理配置。</p>
<p>下面是一个配置文件示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Interface]</span>
<span style="color:#75715e"># Name = node1.example.tld</span>
<span style="color:#a6e22e">Address</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.3/32</span>
<span style="color:#a6e22e">ListenPort</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">51820</span>
<span style="color:#a6e22e">PrivateKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">localPrivateKeyAbcAbcAbc=</span>
<span style="color:#a6e22e">DNS</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">1.1.1.1,8.8.8.8</span>
<span style="color:#a6e22e">Table</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">12345</span>
<span style="color:#a6e22e">MTU</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">1500</span>
<span style="color:#a6e22e">PreUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/bin/example arg1 arg2 %i</span>
<span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/bin/example arg1 arg2 %i</span>
<span style="color:#a6e22e">PreDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/bin/example arg1 arg2 %i</span>
<span style="color:#a6e22e">PostDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/bin/example arg1 arg2 %i</span>

<span style="color:#66d9ef">[Peer]</span>
<span style="color:#75715e"># Name = node2-node.example.tld</span>
<span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.1/24</span>
<span style="color:#a6e22e">Endpoint</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">node1.example.tld:51820</span>
<span style="color:#a6e22e">PublicKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">remotePublicKeyAbcAbcAbc=</span>
<span style="color:#a6e22e">PersistentKeepalive</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">25</span>
</code></pre></div><p><strong>[Interface]</strong></p>
<p>这一节定义本地 VPN 配置。例如：</p>
<p>本地节点是客户端，只路由自身的流量，只暴露一个 IP。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Interface]</span>
<span style="color:#75715e"># Name = phone.example-vpn.dev</span>
<span style="color:#a6e22e">Address</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.5/32</span>
<span style="color:#a6e22e">PrivateKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;private key for phone.example-vpn.dev&gt;</span>
</code></pre></div><p>本地节点是中继服务器，它可以将流量转发到其他对等节点（peer），并公开整个 VPN 子网的路由。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Interface]</span>
<span style="color:#75715e"># Name = public-server1.example-vpn.tld</span>
<span style="color:#a6e22e">Address</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.1/24</span>
<span style="color:#a6e22e">ListenPort</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">51820</span>
<span style="color:#a6e22e">PrivateKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;private key for public-server1.example-vpn.tld&gt;</span>
<span style="color:#a6e22e">DNS</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">1.1.1.1</span>
</code></pre></div><ol>
<li>Name</li>
</ol>
<p>这是 <code>INI</code> 语法中的标准注释，用于展示该配置部分属于哪个节点。这部分配置会被 WireGuard 完全忽略，对 VPN 的行为没有任何影响。</p>
<ol start="2">
<li>Address</li>
</ol>
<p>定义本地节点应该对哪个地址范围进行路由。如果是常规的客户端，则将其设置为节点本身的单个 IP（使用 CIDR 指定，例如 192.0.2.3/32）；如果是中继服务器，则将其设置为可路由的子网范围。</p>
<p>例如：</p>
<ul>
<li>
<p>常规客户端，只路由自身的流量：<code>Address = 192.0.2.3/32</code></p>
</li>
<li>
<p>中继服务器，可以将流量转发到其他对等节点（peer）：<code>Address = 192.0.2.1/24</code></p>
</li>
<li>
<p>也可以指定多个子网或 IPv6 子网：<code>Address = 192.0.2.1/24,2001:DB8::/64</code></p>
</li>
</ul>
<ol start="3">
<li>ListenPort</li>
</ol>
<p>当本地节点是中继服务器时，需要通过该参数指定端口来监听传入 VPN 连接，默认端口号是 <code>51820</code>。常规客户端不需要此选项。</p>
<ol start="4">
<li>PrivateKey</li>
</ol>
<p>本地节点的私钥，所有节点（包括中继服务器）都必须设置。不可与其他服务器共用。</p>
<p>私钥可通过命令 <code>wg genkey &gt; example.key</code> 来生成。</p>
<ol start="5">
<li>DNS</li>
</ol>
<p>通过 DHCP 向客户端宣告 DNS 服务器。客户端将会使用这里指定的 DNS 服务器来处理 VPN 子网中的 DNS 请求，但也可以在系统中覆盖此选项。例如：</p>
<ul>
<li>
<p>如果不配置则使用系统默认 DNS</p>
</li>
<li>
<p>可以指定单个 DNS：<code>DNS = 1.1.1.1</code></p>
</li>
<li>
<p>也可以指定多个 DNS：<code>DNS = 1.1.1.1,8.8.8.8</code></p>
</li>
</ul>
<ol start="6">
<li>Table</li>
</ol>
<p>定义 VPN 子网使用的路由表，默认不需要设置。该参数有两个特殊的值需要注意：</p>
<ul>
<li><code>Table = off</code> : 禁止创建路由</li>
<li><code>Table = auto</code>（默认值） : 将路由添加到系统默认的 table 中，并启用对默认路由的特殊处理。</li>
</ul>
<p>例如：<code>Table = 1234</code></p>
<ol start="7">
<li>MTU</li>
</ol>
<p>定义连接到对等节点（peer）的 <code>MTU</code>（Maximum Transmission Unit，最大传输单元），默认不需要设置，一般由系统自动确定。</p>
<ol start="8">
<li>PreUp</li>
</ol>
<p>启动 VPN 接口之前运行的命令。这个选项可以指定多次，按顺序执行。</p>
<p>例如添加路由：<code>PreUp = ip rule add ipproto tcp dport 22 table 1234</code></p>
<ol start="9">
<li>PostUp</li>
</ol>
<p>启动 VPN 接口之后运行的命令。这个选项可以指定多次，按顺序执行。</p>
<p>例如：</p>
<ul>
<li>
<p>从文件或某个命令的输出中读取配置值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">wg set %i private-key /etc/wireguard/wg0.key &lt;(some command here)</span>
</code></pre></div></li>
<li>
<p>添加一行日志到文件中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">echo &#34;$(date +%s) WireGuard Started&#34; &gt;&gt; /var/log/wireguard.log</span>
</code></pre></div></li>
<li>
<p>调用 WebHook：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">curl https://events.example.dev/wireguard/started/?key=abcdefg</span>
</code></pre></div></li>
<li>
<p>添加路由：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">ip rule add ipproto tcp dport 22 table 1234</span>
</code></pre></div></li>
<li>
<p>添加 iptables 规则，启用数据包转发：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span>
</code></pre></div></li>
<li>
<p>强制 WireGuard 重新解析对端域名的 IP 地址：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostUp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">resolvectl domain %i &#34;~.&#34;; resolvectl dns %i 192.0.2.1; resolvectl dnssec %i yes</span>
</code></pre></div></li>
</ul>
<ol start="10">
<li>PreDown</li>
</ol>
<p>停止 VPN 接口之前运行的命令。这个选项可以指定多次，按顺序执行。</p>
<p>例如：</p>
<ul>
<li>
<p>添加一行日志到文件中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PreDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">echo &#34;$(date +%s) WireGuard Going Down&#34; &gt;&gt; /var/log/wireguard.log</span>
</code></pre></div></li>
<li>
<p>调用 WebHook：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PreDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">curl https://events.example.dev/wireguard/stopping/?key=abcdefg</span>
</code></pre></div></li>
</ul>
<ol start="11">
<li>PostDown</li>
</ol>
<p>停止 VPN 接口之后运行的命令。这个选项可以指定多次，按顺序执行。</p>
<p>例如：</p>
<ul>
<li>
<p>添加一行日志到文件中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">echo &#34;$(date +%s) WireGuard Going Down&#34; &gt;&gt; /var/log/wireguard.log</span>
</code></pre></div></li>
<li>
<p>调用 WebHook：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">curl https://events.example.dev/wireguard/stopping/?key=abcdefg</span>
</code></pre></div></li>
<li>
<p>删除 iptables 规则，关闭数据包转发：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">PostDown</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE</span>
</code></pre></div></li>
</ul>
<p><strong>[Peer]</strong></p>
<p>定义能够为一个或多个地址路由流量的对等节点（peer）的 VPN 设置。对等节点（peer）可以是将流量转发到其他对等节点（peer）的中继服务器，也可以是通过公网或内网直连的客户端。</p>
<p>中继服务器必须将所有的客户端定义为对等节点（peer），除了中继服务器之外，其他客户端都不能将位于 NAT 后面的节点定义为对等节点（peer），因为路由不可达。对于那些只为自己路由流量的客户端，只需将中继服务器作为对等节点（peer），以及其他需要直接访问的节点。</p>
<p>举个例子，在下面的配置中，<code>public-server1</code> 作为中继服务器，其他的客户端有的是直连，有的位于 NAT 后面：</p>
<ul>
<li>
<p><code>public-server1</code>（中继服务器）</p>
<p>[peer] : <code>public-server2</code>, <code>home-server</code>, <code>laptop</code>, <code>phone</code></p>
</li>
<li>
<p><code>public-server2</code>（直连客户端）</p>
<p>[peer] : <code>public-server1</code></p>
</li>
<li>
<p><code>home-server</code>（客户端位于 NAT 后面）</p>
<p>[peer] : <code>public-server1</code>, <code>public-server2</code></p>
</li>
<li>
<p><code>laptop</code>（客户端位于 NAT 后面）</p>
<p>[peer] : <code>public-server1</code>, <code>public-server2</code></p>
</li>
<li>
<p><code>phone</code>（客户端位于 NAT 后面）</p>
<p>[peer] : <code>public-server1</code>, <code>public-server2</code></p>
</li>
</ul>
<p>配置示例：</p>
<ul>
<li>
<p>对等节点（peer）是路由可达的客户端，只为自己路由流量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Peer]</span>
<span style="color:#75715e"># Name = public-server2.example-vpn.dev</span>
<span style="color:#a6e22e">Endpoint</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">public-server2.example-vpn.dev:51820</span>
<span style="color:#a6e22e">PublicKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;public key for public-server2.example-vpn.dev&gt;</span>
<span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.2/32</span>
</code></pre></div></li>
<li>
<p>对等节点（peer）是位于 NAT 后面的客户端，只为自己路由流量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Peer]</span>
<span style="color:#75715e"># Name = home-server.example-vpn.dev</span>
<span style="color:#a6e22e">Endpoint</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">home-server.example-vpn.dev:51820</span>
<span style="color:#a6e22e">PublicKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;public key for home-server.example-vpn.dev&gt;</span>
<span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.3/32</span>
</code></pre></div></li>
<li>
<p>对等节点（peer）是中继服务器，用来将流量转发到其他对等节点（peer）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Peer]</span>
<span style="color:#75715e"># Name = public-server1.example-vpn.tld</span>
<span style="color:#a6e22e">Endpoint</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">public-server1.example-vpn.tld:51820</span>
<span style="color:#a6e22e">PublicKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;public key for public-server1.example-vpn.tld&gt;</span>
<span style="color:#75715e"># 路由整个 VPN 子网的流量</span>
<span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.1/24</span>
<span style="color:#a6e22e">PersistentKeepalive</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">25</span>
</code></pre></div></li>
</ul>
<ol>
<li>Endpoint</li>
</ol>
<p>指定远端对等节点（peer）的公网地址。如果对等节点（peer）位于 NAT 后面或者没有稳定的公网访问地址，就忽略这个字段。通常只需要指定<strong>中继服务器</strong>的 <code>Endpoint</code>，当然有稳定公网 IP 的节点也可以指定。例如：</p>
<ul>
<li>
<p>通过 IP 指定：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">Endpoint</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">123.124.125.126:51820</span>
</code></pre></div></li>
<li>
<p>通过域名指定：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">Endpoint</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">public-server1.example-vpn.tld:51820</span>
</code></pre></div></li>
</ul>
<ol start="2">
<li>AllowedIPs</li>
</ol>
<p>允许该对等节点（peer）发送过来的 VPN 流量中的源地址范围。同时这个字段也会作为本机路由表中 wg0 绑定的 IP 地址范围。如果对等节点（peer）是常规的客户端，则将其设置为节点本身的单个 IP；如果对等节点（peer）是中继服务器，则将其设置为可路由的子网范围。可以使用 <code>,</code> 来指定多个 IP 或子网范围。该字段也可以指定多次。</p>
<p>当决定如何对一个数据包进行路由时，系统首先会选择最具体的路由，如果不匹配再选择更宽泛的路由。例如，对于一个发往 <code>192.0.2.3</code> 的数据包，系统首先会寻找地址为 <code>192.0.2.3/32</code> 的对等节点（peer），如果没有再寻找地址为 <code>192.0.2.1/24</code> 的对等节点（peer），以此类推。</p>
<p>例如：</p>
<ul>
<li>
<p>对等节点（peer）是常规客户端，只路由自身的流量：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.3/32</span>
</code></pre></div></li>
<li>
<p>对等节点（peer）是中继服务器，可以将流量转发到其他对等节点（peer）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.1/24</span>
</code></pre></div></li>
<li>
<p>对等节点（peer）是中继服务器，可以转发所有的流量，包括外网流量和 VPN 流量，可以用来干嘛你懂得：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">0.0.0.0/0,::/0</span>
</code></pre></div></li>
<li>
<p>对等节点（peer）是中继服务器，可以路由其自身和其他对等节点（peer）的流量：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.3/32,192.0.2.4/32</span>
</code></pre></div></li>
<li>
<p>对等节点（peer）是中继服务器，可以路由其自身的流量和它所在的内网的流量：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">AllowedIPs</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">192.0.2.3/32,192.168.1.1/24</span>
</code></pre></div></li>
</ul>
<ol start="3">
<li>PublicKey</li>
</ol>
<p>对等节点（peer）的公钥，所有节点（包括中继服务器）都必须设置。可与其他对等节点（peer）共用同一个公钥。</p>
<p>公钥可通过命令 <code>wg pubkey &lt; example.key &gt; example.key.pub</code> 来生成，其中 <code>example.key</code> 是上面生成的私钥。</p>
<p>例如：<code>PublicKey = somePublicKeyAbcdAbcdAbcdAbcd=</code></p>
<ol start="4">
<li>PersistentKeepalive</li>
</ol>
<p>如果连接是从一个位于 NAT 后面的对等节点（peer）到一个公网可达的对等节点（peer），那么 NAT 后面的对等节点（peer）必须定期发送一个出站 ping 包来检查连通性，如果 IP 有变化，就会自动更新<code>Endpoint</code>。</p>
<p>例如：</p>
<ul>
<li>本地节点与对等节点（peer）可直连：该字段不需要指定，因为不需要连接检查。</li>
<li>对等节点（peer）位于 NAT 后面：该字段不需要指定，因为维持连接是客户端（连接的发起方）的责任。</li>
<li>本地节点位于 NAT 后面，对等节点（peer）公网可达：需要指定该字段 <code>PersistentKeepalive = 25</code>，表示每隔 <code>25</code> 秒发送一次 ping 来检查连接。</li>
</ul>
<h2 id="gui-utilities">GUI Utilities<a hidden class="anchor" aria-hidden="true" href="#gui-utilities">#</a></h2>
<h3 id="gnome">Gnome<a hidden class="anchor" aria-hidden="true" href="#gnome">#</a></h3>
<p>GNOME 系统设置面板（gnome-control-center）和 GNOME 应用使用 <a href="https://en.wikipedia.org/wiki/Dconf">dconf</a> 配置系统存储设置。您可以使用 <code>gsettings</code> 或 <code>dconf</code> 命令行工具直接访问 dconf 数据库。这也可以让你修改用户界面不公开的设置。</p>
<p>GNOME 桌面拥有强大的搜索功能，按 <code>Super</code> 键并搜索一些东西，可以进入“Settings-Search”中来设置可以搜索的内容和顺序。</p>
<p>Do Not Disturb 使通知只在消息栏中，不会在桌面上弹出。</p>
<p>Gnome 3 自动切换的壁纸会有一个有时钟小图标。</p>
<h4 id="浏览">浏览<a hidden class="anchor" aria-hidden="true" href="#浏览">#</a></h4>
<p><a href="https://wiki.gnome.org/Projects/GnomeShell/CheatSheet">GNOME Shell cheat sheet</a> 中解释了如何高效地使用 GNOME shell，它展示了 GNOME shell 的特色和快捷键，包括切换任务，使用键盘，窗口控制，面板，概览模式等等。以下是部分常用的快捷键：</p>
<ul>
<li><code>Super</code> + <code>m</code>：显示消息托盘</li>
<li><code>Super</code> + <code>a</code>：显示应用程序菜单</li>
<li><code>Alt-</code> + <code>Tab</code>：切换当前使用的应用</li>
<li><code>Alt-</code> +  ` (美式键盘 <code>Tab</code> 上面的按键)：切换前台应用程序的窗口</li>
<li><code>Alt</code> + <code>F2</code>，然后输入 <code>r</code> 或 <code>restart</code>：在图形界面出问题时重启界面（仅用于 X/传统 模式，不适用于 Wayland 模式）。也可通过此运行后台应用，如 cfw。</li>
</ul>
<h4 id="遗留名称">遗留名称<a hidden class="anchor" aria-hidden="true" href="#遗留名称">#</a></h4>
<p><strong>注意：</strong> 一些 GNOME 程序在文档和对话框中的名称已经更改，但执行文件名称却没有。下面表格列出了一些这样的应用程序。</p>
<p><strong>提示：</strong> 在搜索栏中搜索应用的遗留名称将成功找到对应的应用，例如搜索 <em>nautilus</em> 将返还 <em>文件</em>。</p>
<table>
<thead>
<tr>
<th style="text-align:center">当前</th>
<th style="text-align:center">遗留</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">文件</td>
<td style="text-align:center">Nautilus</td>
</tr>
<tr>
<td style="text-align:center">Web</td>
<td style="text-align:center">Epiphany</td>
</tr>
<tr>
<td style="text-align:center">视频</td>
<td style="text-align:center">Totem</td>
</tr>
<tr>
<td style="text-align:center">主菜单</td>
<td style="text-align:center">Alacarte</td>
</tr>
<tr>
<td style="text-align:center">文档查看器</td>
<td style="text-align:center">Evince</td>
</tr>
<tr>
<td style="text-align:center">磁盘使用情况分析器</td>
<td style="text-align:center">Baobab</td>
</tr>
<tr>
<td style="text-align:center">图像查看器</td>
<td style="text-align:center">EoG (Eye of GNOME)</td>
</tr>
<tr>
<td style="text-align:center">密码和密钥</td>
<td style="text-align:center">Seahorse</td>
</tr>
</tbody>
</table>
<h4 id="修改文件默认关联的应用程序">修改文件默认关联的应用程序<a hidden class="anchor" aria-hidden="true" href="#修改文件默认关联的应用程序">#</a></h4>
<ul>
<li>
<p>mime类型文件存在于以下的两个路径：</p>
<ul>
<li><code>/usr/share/mime</code></li>
<li><code>~/.local/share/mime</code></li>
</ul>
<p>例如：<code>/usr/share/mime/text/makrdown.xml</code></p>
</li>
<li>
<p>应用程序的desktop文件，存在于以下的两个路径：</p>
<ul>
<li><code>/usr/share/applications</code></li>
<li><code>~/.local/share/applications</code></li>
</ul>
<p>例如 typora.desktop 文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
<span style="color:#75715e"># 应用名称，即开始菜单中的名称</span>
Type<span style="color:#f92672">=</span>ApplicationName<span style="color:#f92672">=</span>name 
<span style="color:#75715e"># 应用执行文件位置</span>
Exec<span style="color:#f92672">=</span>appPath
<span style="color:#75715e"># 应用图标位置</span>
Icon<span style="color:#f92672">=</span>typora
<span style="color:#75715e"># 是否显示终端</span>
Terminal<span style="color:#f92672">=</span>false
<span style="color:#75715e"># 所属分类</span>
StartupNotify<span style="color:#f92672">=</span>trueCategories<span style="color:#f92672">=</span>Office
<span style="color:#75715e"># MIME 类型</span>
MimeType<span style="color:#f92672">=</span>text/x-markdown
</code></pre></div><ul>
<li>应用图标默认位置为 <code>~/.local/share/icons</code>，一个直接放入，如 <code>~/.local/share/icons/typora.png</code>，一个根据分辨率放入，如 <code>~/.local/share/icons/hicolor/256x256/typora.png</code></li>
</ul>
</li>
<li>
<p>应用程序默认关联文件，存在于以下的两个路径：</p>
<ul>
<li><code>/usr/share/applications/mimeapps.list</code></li>
<li><code>~/.local/share/applications/mimeapps.list</code></li>
</ul>
</li>
</ul>
<h4 id="gedi">Gedi<a hidden class="anchor" aria-hidden="true" href="#gedi">#</a></h4>
<h5 id="编码">编码<a hidden class="anchor" aria-hidden="true" href="#编码">#</a></h5>
<p>直接打开gedit（非通过文件打开），点击左上角 <strong>Open</strong>，点击左下角 <strong>Automatically Detected</strong>，下拉选择 <strong>Add or Remove&hellip;</strong>，将简体中文编码都选上。</p>
<p>或者：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gsettings list-keys org.gnome.gedit.preferences.encodings
candidate-encodings
$ gsettings set org.gnome.gedit.preferences.encodings candidate-encodings <span style="color:#e6db74">&#34;[&#39;UTF-8&#39;, &#39;ISO-8859-15&#39;, &#39;UTF-16&#39;, &#39;GBK&#39;, &#39;GB18030&#39;, &#39;GB2312&#39;]&#34;</span>
</code></pre></div><h5 id="配置-2">配置<a hidden class="anchor" aria-hidden="true" href="#配置-2">#</a></h5>
<p>在 Perferences =&gt; Editor =&gt; Tap Stops，把 Tab width 设置为 2，勾选 Insert spaces instead of tabs。</p>
<h4 id="nvidia-optimushttpswikiarchlinuxorgtitlenvidia_optimus_e7ae80e4bd93e4b8ade69687"><a href="https://wiki.archlinux.org/title/NVIDIA_Optimus_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">NVIDIA Optimus</a><a hidden class="anchor" aria-hidden="true" href="#nvidia-optimushttpswikiarchlinuxorgtitlenvidia_optimus_e7ae80e4bd93e4b8ade69687">#</a></h4>
<p><a href="https://en.wikipedia.org/wiki/NVIDIA_Optimus">NVIDIA Optimus</a> 是一项允许英特尔（Intel）集成图形处理器（GPU）和英伟达（NVIDIA）独立图形处理器置入并通过一台笔记本电脑访问的技术。</p>
<h4 id="桌面卡死httpsblogcsdnnetsonggu1996articledetails87712546"><a href="https://blog.csdn.net/SongGu1996/article/details/87712546">桌面卡死</a><a hidden class="anchor" aria-hidden="true" href="#桌面卡死httpsblogcsdnnetsonggu1996articledetails87712546">#</a></h4>
<p>总的来说，就是杀死相关进程，或者避免使用造成卡死相关软件。</p>
<ul>
<li>
<p>选择其他 tty：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pkill Xorg 
</code></pre></div><p>pkill 用于杀死一个进程，与 kill 不同的是它会杀死指定名字的所有进程。kill 命令杀死指定进程 PID，需要配合 ps 使用。</p>
</li>
<li>
<p>安全重启：同时按住 Ctrl 和 Alt 键，按住不要放，按一下 <code>SysRq</code> 键（有的键盘是PrtSc），按一下 <code>R</code> 键，按一下 <code>E</code> 键，依次按下 <code>I</code> , <code>S</code> , <code>U</code> , <code>B</code> 键。</p>
</li>
<li>
<p><a href="https://www.cnblogs.com/schips/p/10167168.html">解决 Ubuntu 经常卡死</a>：ubuntu 的卡死可能与显卡驱动不兼容有关。用 nvidia 代替 nouveau显卡驱动。其中 <a href="https://askubuntu.com/questions/1262401/what-is-the-nvidia-server-driver">nvidia-driver-470-server</a> 是 server 版，最好用 nvidia-driver-470</p>
</li>
</ul>
<h4 id="prime-synchronizationhttpswikidebianorgnvidia20optimusprime_synchronization"><a href="https://wiki.debian.org/NVIDIA%20Optimus#PRIME_synchronization">PRIME synchronization</a><a hidden class="anchor" aria-hidden="true" href="#prime-synchronizationhttpswikidebianorgnvidia20optimusprime_synchronization">#</a></h4>
<p>You can enable <a href="https://forums.developer.nvidia.com/t/prime-and-prime-synchronization/44423">PRIME synchronization</a> to prevent <a href="https://en.wikipedia.org/wiki/Screen_tearing">screen tearing</a>. It requires:</p>
<ul>
<li>Linux kernel 4.5 or higher;</li>
<li>X server 1.19 or higher;</li>
<li>NVIDIA driver 370.23 or higher.</li>
</ul>
<p>PRIME synchronization will be enabled automatically after you enable <a href="https://en.wikipedia.org/wiki/Mode_setting">KMS</a> for <code>nvidia-drm</code> module.</p>
<ol>
<li>
<p>Add this line to the end of <code>/etc/modprobe.d/nvidia.conf</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">options nvidia-drm modeset<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</code></pre></div></li>
<li>
<p>Regenerate your <a href="https://wiki.debian.org/initramfs">initramfs</a> image by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># update-initramfs -u</span>
</code></pre></div></li>
<li>
<p>Reboot.</p>
</li>
</ol>
<p>要检查重新启动后以前的更改是否有效，请运行命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo cat /sys/module/nvidia_drm/parameters/modeset
Y
</code></pre></div><p>see more about nvidia  on uat <a href="https://help.ubuntu.com/community/BinaryDriverHowto/Nvidia">BinaryDriverHowto/Nvidia</a></p>
<h4 id="permanently-set-nvidia-powermizer-settingshttpsrastatinggithubiohow-to-permanently-set-nvidia-powermizer-settings-in-ubuntu"><a href="https://rastating.github.io/how-to-permanently-set-nvidia-powermizer-settings-in-ubuntu/">Permanently Set NVIDIA PowerMizer Settings</a><a hidden class="anchor" aria-hidden="true" href="#permanently-set-nvidia-powermizer-settingshttpsrastatinggithubiohow-to-permanently-set-nvidia-powermizer-settings-in-ubuntu">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ nvidia-settings -q GpuPowerMizerMode
  Attribute <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> <span style="color:#f92672">(</span>rastating-PC:1<span style="color:#f92672">[</span>gpu:0<span style="color:#f92672">])</span>: 0.
    Valid values <span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> are: 0, <span style="color:#ae81ff">1</span> and 2.
    <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> can use the following target types: GPU.

$ nvidia-settings -a <span style="color:#e6db74">&#34;[gpu:0]/GpuPowerMizerMode=1&#34;</span>
  Attribute <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> <span style="color:#f92672">(</span>rastating-PC:1<span style="color:#f92672">[</span>gpu:0<span style="color:#f92672">])</span> assigned value 1.

$ nvidia-settings -q GpuPowerMizerMode
  Attribute <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> <span style="color:#f92672">(</span>rastating-PC:1<span style="color:#f92672">[</span>gpu:0<span style="color:#f92672">])</span>: 1.
    Valid values <span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> are: 0, <span style="color:#ae81ff">1</span> and 2.
    <span style="color:#e6db74">&#39;GPUPowerMizerMode&#39;</span> can use the following target types: GPU.
</code></pre></div><p>添加到开机启动</p>
<ul>
<li>Name：<code>NVIDIA X Server Performance Settings</code></li>
<li>Command：<code>/usr/bin/nvidia-settings  -a &quot;[gpu:0]/GpuPowerMizerMode=1&quot;</code></li>
</ul>
<h4 id="密钥环httpslinuxcnarticle-12093-1html"><a href="https://linux.cn/article-12093-1.html">密钥环</a><a hidden class="anchor" aria-hidden="true" href="#密钥环httpslinuxcnarticle-12093-1html">#</a></h4>
<p>如果你用过 Ubuntu 或者其他的 Linux 发行版里的<a href="https://itsfoss.com/ubuntu-automatic-logon/">自动登录功能</a>, 你可能遇到过这种弹出消息：</p>
<blockquote>
<p>请输入密码以解锁你的登录密钥环</p>
<p>登录密钥环在你登录系统时未解锁。</p>
</blockquote>
<p><img loading="lazy" src="/Distributions/230422m0xvgv0oj4fjdk7d.jpg" alt="Enter Password To Unlock Your Login Keyring Ubuntu"  />
</p>
<p>如果你一直点击取消，它会不断弹出几次才会消失。你可能想知道，为什么你会一直看到这个密钥环信息呢？</p>
<p>让我来告诉你吧。它其实不是错误，而是一个安全特性。</p>
<p>奇怪吗？下面就让我来解释下 Linux 里的密钥环概念。</p>
<h5 id="密钥环是什么为什么需要它">密钥环是什么，为什么需要它？<a hidden class="anchor" aria-hidden="true" href="#密钥环是什么为什么需要它">#</a></h5>
<p>在现实生活中你为什么要用钥匙环（也叫<a href="https://en.wikipedia.org/wiki/Keychain">钥匙链</a>）？你用它把一把或多把钥匙串到一起, 以便于携带和查找。</p>
<p>Linux 里也是类似的。密钥环特性使你的系统可以将各种密码放在一起，并将其保存在一个地方。</p>
<p>大多数 Linux 桌面环境，如 GNOME、KDE、Xfce 等采用 <a href="https://wiki.archlinux.org/index.php/GNOME/Keyring">GNOME 密钥环</a>来提供这个功能。</p>
<p>该密钥环保存了 ssh 密钥、GPG 密钥以及使用此功能的应用程序（例如 Chromium 浏览器）的密钥。默认情况下，<strong>“密钥环”通过主密码来保护</strong>，该密码通常是帐户的登录密码。</p>
<p>系统上的每个用户都有自己的密钥环，（通常）密码与用户帐户本身的密码相同。当你使用密码登录系统时，你的密匙环将使用你帐户的密码自动解锁。</p>
<p>当你启用 Ubuntu 中的自动登录功能时时，就有问题了。这意味着你无需输入密码即可登录系统。在这种情况下，你的密钥环不会自动解锁。</p>
<p><strong>密钥环是一个安全特性</strong></p>
<p>记得我说过密钥环是一个安全特性吗？现在想象一下你在 Linux 电脑上开启了自动登录功能。有权访问你电脑的任何人无需密码就能进入你的系统。但是你可能不会在意，因为你只是用它来访问互联网。</p>
<p>但是，如果你在 Ubuntu 中使用 Chromium 或 Google Chrome 之类的浏览器，并使用它来保存各种网站的登录密码，那么你将遇到麻烦。任何人都可以使用浏览器并利用你在浏览器中保存的密码登录网站。这不很危险吗？</p>
<p>这就是为什么当你使用 Chrome 时，它将反复地提示你先解锁密钥环。这确保了只有知道密钥环密码（即账户密码）的人才能使用在浏览器中保存的密码来登录它们相关的网站。</p>
<p>如果你反复取消解锁密钥环的提示，它最终将消失，并允许你使用浏览器。但是，保存的密码将不会被解锁，你在 Chromium/Chome 浏览器上将会看到“同步暂停”的提示。</p>
<p><strong>如果密钥环一直存在，为什么你从来没有见过它呢?</strong></p>
<p>如果你在你的 Linux 系统上从没见过它的话，这个问题就很有道理。</p>
<p>如果你从没有用过自动登录功能（或者修改你的账户密码），你可能都没有意识到这个特性的存在。</p>
<p>这是因为当你通过你的密码登录系统时，你的密钥环被你的账户密码自动解锁了。</p>
<p>Ubuntu（和其他发行版）在执行普通的管理任务如修改用户、安装新软件等需要输入密码，无论你是否是自动登录的。但是对于日常任务像使用浏览器，它不需要输入密码因为密钥环已经被解锁了。</p>
<p>当你切换到自动登录时，你不再需要输入登录密码。这意味着密钥环没有被自动解锁，因此当你使用利用了密钥环特性的浏览器时，它将提示你来解锁密钥环。</p>
<p><strong>你可以轻松地管理密钥环和密码</strong></p>
<p>这个密钥环放在哪里？它的核心是一个守护任务（一个后台自动运行的程序）。</p>
<p>别担心。你不必通过终端来操作守护任务。大多数桌面环境都自带一个可以和这个守护进程进行交互的图形化应用程序。KDE 上有 KDE 钱包，GNOME 和其他桌面上叫做“密码和密钥”（Password And Keys）。</p>
<p>你可以用这个 GUI 程序来查看哪些应用程序在用密钥环来管理/保护密码。</p>
<p>你可以看到，我的系统有自动创建的登录密钥环。也有一个存储 GPG 和 SSH 密钥的密钥环。那个<a href="https://help.ubuntu.com/lts/serverguide/certificates-and-security.html">证书</a>用来保存证书机构颁发的证书（如 HTTPS 证书）。</p>
<p><img loading="lazy" src="/Distributions/230426pr9jj9ifjsgiez9i.png" alt="Password and Keys application in Ubuntu"  />
</p>
<p>你也可以使用这个应用程序来手动保存网站的密码。</p>
<p>这里有一个潜在的问题，如果你格式化你的系统，手动保存的密码必然会丢失。通常，你会备份你的个人文件，但并不是所有的用户特定数据，如密钥环文件。</p>
<p>有一种办法能解决它。密钥环数据通常保存在 <code>~/.local/share/keyrings</code> 目录。在这里你可以看到所有的密钥环，但是你不能直接看到它们的内容。如果你移除密钥环的密码（我会在这篇文章的后面描述操作步骤），你可以像一个普通的文本文件一样读取密钥环的内容。你可以将这个解锁后的密钥环文件完整地复制下来，并在其他的 Linux 机器上运行“密码和密钥”应用程序导入到其中。</p>
<p>总结一下目前为止所学的内容：</p>
<ul>
<li>大多数 Linux 系统缺省已经安装并激活了密钥环特性</li>
<li>系统上的每个用户都拥有他自己的密钥环</li>
<li>密钥环通常是用账户密码锁定的（保护）</li>
<li>当你通过密码登录时密钥环会被自动解锁</li>
<li>对于自动登录，密钥环不会自动解锁，因此当你试图使用依赖密钥环的应用程序时会被提示先解锁它</li>
<li>并不是所有的浏览器或应用程序利用了密钥环特性</li>
<li>（Linux 上）安装一个 GUI 程序可以和密钥环交互</li>
<li>你可以用密钥环来手动存储加密格式的密码</li>
<li>你可以自己修改密钥环密码</li>
<li>你可以通过导出（需要先解锁密钥环）并导入到其他计算机上的方式来获取手工保存的密码。</li>
</ul>
<h5 id="修改密钥环密码">修改密钥环密码<a hidden class="anchor" aria-hidden="true" href="#修改密钥环密码">#</a></h5>
<p>假设你修改了你的账户密码。当你登录时，你的系统试图通过新的登录密码来自动解锁密钥环。但是密钥环还在使用老的登录密码。</p>
<p>这种情况下，你可以修改密钥环密码为新的登录密码，这样密码环才能在你登录系统时自动解锁。</p>
<ul>
<li>从菜单中打开“密码和密钥”应用程序</li>
<li>在“Login”密钥环上右击并点击“修改密码”：</li>
</ul>
<p><strong>如果你不记得老的登录密码怎么办？</strong></p>
<p>你可能知道在 <a href="https://itsfoss.com/how-to-hack-ubuntu-password/">Ubuntu 上重置忘记的密码很容易</a>。但是密钥环在这种场景下还是有问题。你修改了账户密码，但是你不记得仍然被密钥环使用的老的账户密码。</p>
<p>你不能修改它因为你不知道老的密码。怎么办？</p>
<p>这种情况下，你将不得不移除整个密钥环。你可以通过“密码和密钥”应用程序来操作。</p>
<p>另外，你也可以手动删除 <code>~/.local/share/keyrings</code> 目录下的密钥环文件。</p>
<p>老的密钥环文件被移除后，你再打开 Chrome/Chromium 时，它会提示你创建一个新的密钥环。</p>
<p>你可以用新的登录密码，密钥环就会被自动解锁了。</p>
<h5 id="禁用密钥环密码">禁用密钥环密码<a hidden class="anchor" aria-hidden="true" href="#禁用密钥环密码">#</a></h5>
<p>在你想用自动登录但又不想手动解锁密钥环时，你可以把禁用密钥环密码作为一个规避方法。记住你正在禁用一个安全特性，因此请三思。</p>
<p>操作步骤和修改密钥环相似。打开“密码和密钥”应用程序，然后修改密钥环密码。</p>
<p>技巧在于当它提示修改密码时，不要输入新密码，而是点击“继续”按钮。这将移除密钥环的密码。</p>
<p>这种方法，密钥环没有密码保护，并将一直处于解锁状态。</p>
<h3 id="gnome-tweaks">Gnome Tweaks<a hidden class="anchor" aria-hidden="true" href="#gnome-tweaks">#</a></h3>
<p>GNOME 桌面有称为“扩展”的小插件或附加组件，学会使用 GNOME 扩展来扩展系统的可用性。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install gnome-tweaks gnome-shell-extensions chrome-gnome-shell -y
</code></pre></div><ul>
<li>gnome-shell-extensions：可以禁用桌面图标、Ubuntu Dock。</li>
<li>chrome-gnome-shell：<a href="https://wiki.gnome.org/Projects/GnomeShellIntegrationForChrome/Installation#Ubuntu_Linux">GNOME Shell integration for Chrome</a>，可从浏览器安装 <a href="https://extensions.gnome.org/">GNOME Shell extensions</a>。</li>
</ul>
<p>如 OpenWeather，需设置 Location，Units 为公制单位，Layout为Right</p>
<p>theme design: <a href="https://designmodo.com/flat-vs-material/">Skeuomorphism vs Flat Design vs Material Design</a></p>
<ul>
<li>主题目录： <code>/usr/share/themes</code> 或 <code>~/.themes</code></li>
<li>图标鼠标目录： <code>/usr/share/icons</code> 或 <code>~/.icons</code></li>
<li>壁纸： <code>/usr/share/background</code> , <code>/usr/share/wallpapers</code></li>
</ul>
<h4 id="ubuntu-dockhttpsblogcsdnneta6864657articledetails103606669"><a href="https://blog.csdn.net/a6864657/article/details/103606669/">Ubuntu Dock</a><a hidden class="anchor" aria-hidden="true" href="#ubuntu-dockhttpsblogcsdnneta6864657articledetails103606669">#</a></h4>
<p>Ubuntu Dock 就是 Dash to Dock。安装：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install  gnome-shell-extension-dashtodock
</code></pre></div><p>重启，在 Extension 中设置 Dash to Dock，Dash to Dock 与 Ubuntu Dock 只能开启一个，否则有两个 Dock，但是就算关闭 Dash to Dock，Dash to Dock 设置依旧起作用到 Ubuntu Dock。</p>
<p>重新登录。</p>
<h4 id="gsconnecthttpsgithubcomgsconnectgnome-shell-extension-gsconnectwikiinstallation"><a href="https://github.com/GSConnect/gnome-shell-extension-gsconnect/wiki/Installation">GSConnect</a><a hidden class="anchor" aria-hidden="true" href="#gsconnecthttpsgithubcomgsconnectgnome-shell-extension-gsconnectwikiinstallation">#</a></h4>
<p>Files and links. Shared between devices.</p>
<p><a href="https://userbase.kde.org/KDEConnect#I_have_two_devices_running_KDE_Connect_on_the_same_network.2C_but_they_can.27t_see_each_other"><strong>Firewall Blocking Port</strong></a></p>
<p>使用 ufw：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo ufw allow proto tcp from 192.168.0.0/24 to any port 1714:1764
$ sudo ufw allow proto udp from 192.168.0.0/24 to any port 1714:1764
$ sudo ufw reload
</code></pre></div><p>有时候正确设置了防火墙，还是会发送文件失败，可以考虑重启应用。</p>
<p><a href="https://github.com/GSConnect/gnome-shell-extension-gsconnect/issues/1203#issuecomment-974631548"><strong>mounting does not work</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sftp -P <span style="color:#ae81ff">1740</span> kdeconnect@192.168.0.105
Unable to negotiate with 192.168.88.245 port 1740: no matching host key type found. Their offer: ssh-rsa
Connection closed.  
Connection closed
$ vim ~/.ssh/config
Host 192.168.0.*
   HostkeyAlgorithms +ssh-rsa
   PubkeyAcceptedAlgorithms +ssh-rsa
$ ssh kdeconnect@192.168.0.105 -p <span style="color:#ae81ff">1740</span>
</code></pre></div><p>After that the mounting works again.</p>
<p><a href="https://github.com/GSConnect/gnome-shell-extension-gsconnect/issues/1025"><strong>GSConnect cannot send multiple files at once</strong></a></p>
<p>GSConnect cannot send multiple files at once. If I try sending multiple files to my phone, only one file is received by my phone.</p>
<p>GSConnect shows &ldquo;Transfer Successful&rdquo; notification only for the first file, and &ldquo;Transferring File&rdquo; notifications for the other files remain.</p>
<p><a href="https://github.com/GSConnect/gnome-shell-extension-gsconnect/wiki/Installation#files-integration-nautilus--nemo"><strong>Files Integration</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install python3-nautilus gir1.2-nautilus-3.0
$ nautilus -q <span style="color:#f92672">&amp;&amp;</span> nautilus
</code></pre></div><p><a href="https://userbase.kde.org/KDEConnect"><strong>KDE Connect</strong></a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install kdeconnect nautilus-kdeconnect
</code></pre></div><h4 id="netspeedhttpsextensionsgnomeorgextension104netspeed"><a href="https://extensions.gnome.org/extension/104/netspeed/">NetSpeed</a><a hidden class="anchor" aria-hidden="true" href="#netspeedhttpsextensionsgnomeorgextension104netspeed">#</a></h4>
<p>Displays Internet Speed</p>
<h4 id="clipboard-indicatorhttpsextensionsgnomeorgextension779clipboard-indicator"><a href="https://extensions.gnome.org/extension/779/clipboard-indicator/">Clipboard Indicator</a><a hidden class="anchor" aria-hidden="true" href="#clipboard-indicatorhttpsextensionsgnomeorgextension779clipboard-indicator">#</a></h4>
<p>Clipboard Manager extension for Gnome-Shell - Adds a clipboard indicator to the top panel, and caches clipboard history.</p>
<h4 id="coverflow-alt-tabhttpsextensionsgnomeorgextension97coverflow-alt-tab"><a href="https://extensions.gnome.org/extension/97/coverflow-alt-tab/">Coverflow Alt-Tab</a><a hidden class="anchor" aria-hidden="true" href="#coverflow-alt-tabhttpsextensionsgnomeorgextension97coverflow-alt-tab">#</a></h4>
<p>Replacement of Alt-Tab, iterates through windows in a cover-flow manner.</p>
<h4 id="bluetooth-quick-connecthttpsextensionsgnomeorgextension1401bluetooth-quick-connect"><a href="https://extensions.gnome.org/extension/1401/bluetooth-quick-connect/">Bluetooth Quick Connect</a><a hidden class="anchor" aria-hidden="true" href="#bluetooth-quick-connecthttpsextensionsgnomeorgextension1401bluetooth-quick-connect">#</a></h4>
<p>Allow to connect to paired devices from gnome control panel.</p>
<h4 id="desktop-icons-ng-dinghttpsextensionsgnomeorgextension2087desktop-icons-ng-ding"><a href="https://extensions.gnome.org/extension/2087/desktop-icons-ng-ding/">Desktop Icons NG (DING)</a><a hidden class="anchor" aria-hidden="true" href="#desktop-icons-ng-dinghttpsextensionsgnomeorgextension2087desktop-icons-ng-ding">#</a></h4>
<p>with these advantages:</p>
<ul>
<li>Drag&rsquo;n&rsquo;Drop, both inside the desktop, between desktop and applications, and nautilus windows</li>
<li>Allows to use &ldquo;Open with&hellip;&rdquo; option with several files</li>
<li>When hovering or clicking on an icon with a name too large to fit, it shows the full name</li>
<li>Doesn&rsquo;t hang the compositor when there is too much activity in the desktop folder</li>
</ul>
<h4 id="frippery-move-clockhttpsextensionsgnomeorgextension2move-clock"><a href="https://extensions.gnome.org/extension/2/move-clock/">Frippery Move Clock</a><a hidden class="anchor" aria-hidden="true" href="#frippery-move-clockhttpsextensionsgnomeorgextension2move-clock">#</a></h4>
<p>Move clock to left of status menu button</p>
<h4 id="input-method-panelhttpsextensionsgnomeorgextension261kimpanel"><a href="https://extensions.gnome.org/extension/261/kimpanel/">Input Method Panel</a><a hidden class="anchor" aria-hidden="true" href="#input-method-panelhttpsextensionsgnomeorgextension261kimpanel">#</a></h4>
<p>Input Method Panel using KDE&rsquo;s kimpanel protocol for Gnome-Shell</p>
<h4 id="lock-keyshttpsextensionsgnomeorgextension36lock-keys"><a href="https://extensions.gnome.org/extension/36/lock-keys/">Lock Keys</a><a hidden class="anchor" aria-hidden="true" href="#lock-keyshttpsextensionsgnomeorgextension36lock-keys">#</a></h4>
<p>Numlock &amp; Capslock status on the panel</p>
<h4 id="openweatherhttpsextensionsgnomeorgextension750openweather"><a href="https://extensions.gnome.org/extension/750/openweather/">OpenWeather</a><a hidden class="anchor" aria-hidden="true" href="#openweatherhttpsextensionsgnomeorgextension750openweather">#</a></h4>
<p>Weather extension to display weather information from <a href="https://openweathermap.org/">https://openweathermap.org/</a> or <a href="https://darksky.net">https://darksky.net</a> for almost all locations in the world.</p>
<h4 id="panel-date-formathttpsextensionsgnomeorgextension1462panel-date-format"><a href="https://extensions.gnome.org/extension/1462/panel-date-format/">Panel Date Format</a><a hidden class="anchor" aria-hidden="true" href="#panel-date-formathttpsextensionsgnomeorgextension1462panel-date-format">#</a></h4>
<p>Allows to customize the date format on the panel.</p>
<h4 id="refresh-wifi-connectionshttpsextensionsgnomeorgextension905refresh-wifi-connections"><a href="https://extensions.gnome.org/extension/905/refresh-wifi-connections/">Refresh Wifi Connections</a><a hidden class="anchor" aria-hidden="true" href="#refresh-wifi-connectionshttpsextensionsgnomeorgextension905refresh-wifi-connections">#</a></h4>
<p>This extension adds a refresh button to the Wi-Fi connection selection dialog to manually request for a network scan.</p>
<h4 id="screenshot-toolhttpsextensionsgnomeorgextension1112screenshot-tool"><a href="https://extensions.gnome.org/extension/1112/screenshot-tool/">Screenshot Tool</a><a hidden class="anchor" aria-hidden="true" href="#screenshot-toolhttpsextensionsgnomeorgextension1112screenshot-tool">#</a></h4>
<p>Conveniently create, copy, store and upload screenshots. Please log out and log in again after updating.</p>
<h4 id="sound-input--output-device-chooserlivepatchhttpsextensionsgnomeorgextension906sound-output-device-chooser"><a href="https://extensions.gnome.org/extension/906/sound-output-device-chooser/">Sound Input &amp; Output Device ChooserLivepatch</a><a hidden class="anchor" aria-hidden="true" href="#sound-input--output-device-chooserlivepatchhttpsextensionsgnomeorgextension906sound-output-device-chooser">#</a></h4>
<p>Shows a list of sound output and input devices (similar to gnome sound settings) in the status menu below the volume slider.</p>
<h4 id="status-area-horizontal-spacinghttpsextensionsgnomeorgextension355status-area-horizontal-spacing"><a href="https://extensions.gnome.org/extension/355/status-area-horizontal-spacing/">Status Area Horizontal Spacing</a><a hidden class="anchor" aria-hidden="true" href="#status-area-horizontal-spacinghttpsextensionsgnomeorgextension355status-area-horizontal-spacing">#</a></h4>
<p>Reduce the horizontal spacing between icons in the top-right status area</p>
<h4 id="unitehttpsextensionsgnomeorgextension1287unite"><a href="https://extensions.gnome.org/extension/1287/unite/">Unite</a><a hidden class="anchor" aria-hidden="true" href="#unitehttpsextensionsgnomeorgextension1287unite">#</a></h4>
<p>Unite is a GNOME Shell extension which makes a few layout tweaks to the top panel and removes window decorations to make it look like Ubuntu Unity Shell.</p>
<h4 id="user-themeshttpsextensionsgnomeorgextension19user-themes"><a href="https://extensions.gnome.org/extension/19/user-themes/">User Themes</a><a hidden class="anchor" aria-hidden="true" href="#user-themeshttpsextensionsgnomeorgextension19user-themes">#</a></h4>
<p>Load shell themes from user directory.</p>
<h4 id="vitalshttpsextensionsgnomeorgextension1460vitals"><a href="https://extensions.gnome.org/extension/1460/vitals/">Vitals</a><a hidden class="anchor" aria-hidden="true" href="#vitalshttpsextensionsgnomeorgextension1460vitals">#</a></h4>
<p>A glimpse into your computer&rsquo;s temperature, voltage, fan speed, memory usage, processor load, system resources, network speed and storage stats. This is a one stop shop to monitor all of your vital sensors. Uses asynchronous polling to provide a smooth user experience.</p>
<h4 id="removable-drive-menuhttpsextensionsgnomeorgextension7removable-drive-menu"><a href="https://extensions.gnome.org/extension/7/removable-drive-menu/">Removable Drive Menu</a><a hidden class="anchor" aria-hidden="true" href="#removable-drive-menuhttpsextensionsgnomeorgextension7removable-drive-menu">#</a></h4>
<p>A status menu for accessing and unmounting removable devices.</p>
<h4 id="places-status-indicatorhttpsextensionsgnomeorgextension8places-status-indicator"><a href="https://extensions.gnome.org/extension/8/places-status-indicator/">Places Status Indicator</a><a hidden class="anchor" aria-hidden="true" href="#places-status-indicatorhttpsextensionsgnomeorgextension8places-status-indicator">#</a></h4>
<p>Add a menu for quickly navigating places in the system. This extension is part of Classic Mode and is officially supported by GNOME. Please do not report bugs using the form below, use GNOME&rsquo;s GitLab instance instead.</p>
<h4 id="recent-itemshttpsextensionsgnomeorgextension72recent-items"><a href="https://extensions.gnome.org/extension/72/recent-items/">Recent Items</a><a hidden class="anchor" aria-hidden="true" href="#recent-itemshttpsextensionsgnomeorgextension72recent-items">#</a></h4>
<h4 id="gtilehttpsextensionsgnomeorgextension28gtile"><a href="https://extensions.gnome.org/extension/28/gtile/">gTile</a><a hidden class="anchor" aria-hidden="true" href="#gtilehttpsextensionsgnomeorgextension28gtile">#</a></h4>
<p>Tile windows on a grid.</p>
<h4 id="top-panel-workspace-scrollhttpsextensionsgnomeorgextension701top-panel-workspace-scroll"><a href="https://extensions.gnome.org/extension/701/top-panel-workspace-scroll/">Top Panel Workspace Scroll</a><a hidden class="anchor" aria-hidden="true" href="#top-panel-workspace-scrollhttpsextensionsgnomeorgextension701top-panel-workspace-scroll">#</a></h4>
<p>Change workspaces by scrolling over the top panel</p>
<h4 id="workspace-indicatorhttpsextensionsgnomeorgextension21workspace-indicator"><a href="https://extensions.gnome.org/extension/21/workspace-indicator/">Workspace Indicator</a><a hidden class="anchor" aria-hidden="true" href="#workspace-indicatorhttpsextensionsgnomeorgextension21workspace-indicator">#</a></h4>
<p>Put an indicator on the panel signaling in which workspace you are, and give you the possibility of switching to another one.</p>
<h4 id="auto-move-windowshttpsextensionsgnomeorgextension16auto-move-windows"><a href="https://extensions.gnome.org/extension/16/auto-move-windows/">Auto Move Windows</a><a hidden class="anchor" aria-hidden="true" href="#auto-move-windowshttpsextensionsgnomeorgextension16auto-move-windows">#</a></h4>
<p>Move applications to specific workspaces when they create windows.</p>
<h4 id="applications-menuhttpsextensionsgnomeorgextension6applications-menu"><a href="https://extensions.gnome.org/extension/6/applications-menu/">Applications Menu</a><a hidden class="anchor" aria-hidden="true" href="#applications-menuhttpsextensionsgnomeorgextension6applications-menu">#</a></h4>
<p>Add a category-based menu for applications. This extension is part of Classic Mode and is officially supported by GNOME. Please do not report bugs using the form below, use GNOME&rsquo;s GitLab instance instead.</p>
<h4 id="fly-piehttpsextensionsgnomeorgextension3433fly-pie"><a href="https://extensions.gnome.org/extension/3433/fly-pie/">Fly-Pie</a><a hidden class="anchor" aria-hidden="true" href="#fly-piehttpsextensionsgnomeorgextension3433fly-pie">#</a></h4>
<p>A marking menu which can be used to launch applications, simulate hotkeys, open URLs and much more.</p>
<h4 id="appindicator-and-kstatusnotifieritem-supporthttpsextensionsgnomeorgextension615appindicator-support"><a href="https://extensions.gnome.org/extension/615/appindicator-support/">AppIndicator and KStatusNotifierItem Support</a><a hidden class="anchor" aria-hidden="true" href="#appindicator-and-kstatusnotifieritem-supporthttpsextensionsgnomeorgextension615appindicator-support">#</a></h4>
<p>Adds AppIndicator, KStatusNotifierItem and legacy Tray icons support to the Shell</p>
<h4 id="papirus-icon-themehttpsgithubcompapirusdevelopmentteampapirus-icon-theme"><a href="https://github.com/PapirusDevelopmentTeam/papirus-icon-theme">Papirus Icon Theme</a><a hidden class="anchor" aria-hidden="true" href="#papirus-icon-themehttpsgithubcompapirusdevelopmentteampapirus-icon-theme">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:papirus/papirus
$ sudo apt-get update
$ sudo apt-get install papirus-icon-theme
</code></pre></div><h4 id="materia-themehttpsgithubcomnana-4materia-theme"><a href="https://github.com/nana-4/materia-theme">Materia Theme</a><a hidden class="anchor" aria-hidden="true" href="#materia-themehttpsgithubcomnana-4materia-theme">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install materia-gtk-theme
</code></pre></div><h4 id="time-httpsextensionsgnomeorgextension1238time"><a href="https://extensions.gnome.org/extension/1238/time/">Time ++</a><a hidden class="anchor" aria-hidden="true" href="#time-httpsextensionsgnomeorgextension1238time">#</a></h4>
<p>A todo.txt manager, time tracker, timer, stopwatch, pomodoro, and alarm clock</p>
<p>番茄钟</p>
<h4 id="nautilushttpswwwcnblogscomkeatonlaop12717071htmltop"><a href="https://www.cnblogs.com/keatonlao/p/12717071.html#top">Nautilus</a><a hidden class="anchor" aria-hidden="true" href="#nautilushttpswwwcnblogscomkeatonlaop12717071htmltop">#</a></h4>
<p><a href="https://wiki.gnome.org/Apps/Files">Files</a> 是 GNOME 桌面环境的默认文件管理器。文件试图提供一种简化的方法来管理文件和应用程序。Files 在 3.6 版之前被称为 Nautilus。该应用程序被赋予了新的描述性名称，每种受支持的语言都有一个名称。 Nautilus 这个名称仍然在许多地方使用，例如可执行文件名称，某些程序包名称，某些桌面条目和某些 GSettings 模式。</p>
<h5 id="快捷键">快捷键<a hidden class="anchor" aria-hidden="true" href="#快捷键">#</a></h5>
<p>有时候鼠标操作效率低，比如新建标签页（汉堡菜单 &gt; 新建标签页），我们要移动两次光标点两下，如果使用快捷键 <code>Ctrl+T</code>，一次就能迅速完成操作。所以，使用快捷键能提高效率。另一个让你多使用键盘快捷键的理由可能是，预防鼠标手。如果您经常使用某个软件，那么有必要学习它的快捷键，如果偶尔使用就没必要浪费时间。</p>
<p><code>Ctrl+F1</code>，查看 Files 快捷键。建议您参考列表多加练习。一些常用快捷键：</p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ctrl</code> <code>T</code></td>
<td>New tab</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>N</code></td>
<td>New window</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>W</code></td>
<td>Close window or tab</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl</code> <code>F</code></td>
<td>Search</td>
</tr>
<tr>
<td><code>~</code></td>
<td>Location bar with home location</td>
</tr>
<tr>
<td><code>/</code></td>
<td>Location bar with root location</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>L</code></td>
<td>Enter location</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Backspace</code></td>
<td>Go Back to a Previous Folder</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>+</code></td>
<td>Zoom in</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>-</code></td>
<td>Zoom out</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>0</code></td>
<td>Reset zoom</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>H</code></td>
<td>Show/hide hidden files</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>F2</code></td>
<td>Rename</td>
</tr>
<tr>
<td><code>Delete</code></td>
<td>Move to trash</td>
</tr>
<tr>
<td><code>Shift</code> <code>Delete</code></td>
<td>Delete permanently</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>C</code></td>
<td>Copy</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>V</code></td>
<td>Paste</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>X</code></td>
<td>Cut</td>
</tr>
<tr>
<td><code>Ctrl</code> <code>Z</code></td>
<td>Undo</td>
</tr>
<tr>
<td><code>Shift</code> <code>Ctrl</code> <code>Z</code></td>
<td>Redo</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl</code> <code>A</code></td>
<td>Select all</td>
</tr>
<tr>
<td><code>Shift</code> <code>Ctrl</code> <code>I</code></td>
<td>Invert selection</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl</code> <code>Q</code></td>
<td>Quit</td>
</tr>
</tbody>
</table>
<h5 id="从右键菜单创建新文档">从右键菜单创建新文档<a hidden class="anchor" aria-hidden="true" href="#从右键菜单创建新文档">#</a></h5>
<p>只需要将模板文件放到用户根目录下的 <code>Templates</code> / <code>模板</code> 文件夹里面。比如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">touch ~/Templates/sh.sh
touch ~/Templates/python.py
touch ~/Templates/Markdown.md
</code></pre></div><p>当你右键时，就可以直接以该模板新建文件。</p>
<p>Templates 目录可以在 <code>~/.config/user-dirs.dirs</code> 中配置。默认为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">XDG_TEMPLATES_DIR</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;$HOME/Templates&#34;</span>
</code></pre></div><p>你可以设置为其他目录。比如我的为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">XDG_TEMPLATES_DIR</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/DATA/Templates&#34;</span>
</code></pre></div><p><code>/DATA</code> 不在系统分区，是一个单独的分区，我专门用来存放个人数据。</p>
<h5 id="直接搜索匹配">直接搜索匹配<a hidden class="anchor" aria-hidden="true" href="#直接搜索匹配">#</a></h5>
<p>常用的目录可以添加为书签，但访问其他目录时，我们经常是按路径逐个点击文件夹。对于文件夹路径较深或者周围有其他文件夹干扰的情况，操作起来其实非常低效。不知你是否意识到、思考过。</p>
<p>人们习惯鼠标操作后，往往不会再去思考如何提升效率，一直呆在舒适区域：这个我已经会用了。但是，有一些你不知道的技巧能够提高办事效率。</p>
<p>实际上，只要你身处 Files 中，直接输入英文字符即可搜索匹配。Files 像浏览器一样合并了搜索栏和地址栏，你可以直接输入 <code>关键词</code> 或者 <code>路径</code> 。但是，中文关键词需要在搜索栏（<code>Ctrl+F</code>）中输入。</p>
<p>一个实例：打开 GNOME 桌面系统图标所在文件夹 <code>/usr/share/icons</code>。</p>
<p>方法一：鼠标点击 <code>/</code> <code>usr</code> <code>share</code> 直接输入 <code>icons</code> 然后 <code>Enter</code> 打开。</p>
<blockquote>
<p>这是目标文件夹周围有其他文件夹干扰的情况。</p>
</blockquote>
<p>方法二：Files 中直接输入 <code>/usr/share/icons</code>（操作时可利用 Tab 自动补全）。</p>
<blockquote>
<p>这是路径较深的情况。</p>
</blockquote>
<h4 id="backslidehttpsextensionsgnomeorgextension543backslide"><a href="https://extensions.gnome.org/extension/543/backslide/">BackSlide</a><a hidden class="anchor" aria-hidden="true" href="#backslidehttpsextensionsgnomeorgextension543backslide">#</a></h4>
<p>Automatic background-image (wallpaper) slideshow for Gnome Shell</p>
<h4 id="remove-alttab-delay-v2httpsextensionsgnomeorgextension2741remove-alttab-delay-v2"><a href="https://extensions.gnome.org/extension/2741/remove-alttab-delay-v2/">Remove Alt+Tab Delay v2</a><a hidden class="anchor" aria-hidden="true" href="#remove-alttab-delay-v2httpsextensionsgnomeorgextension2741remove-alttab-delay-v2">#</a></h4>
<p>Another extension that removes the 0.15 second popup delay in switcher pop-ups. This extension is actively maintained.</p>
<h4 id="easyscreencasthttpsextensionsgnomeorgextension690easyscreencast"><a href="https://extensions.gnome.org/extension/690/easyscreencast/">EasyScreenCast</a><a hidden class="anchor" aria-hidden="true" href="#easyscreencasthttpsextensionsgnomeorgextension690easyscreencast">#</a></h4>
<p>This extension simplifies the use of the video recording function integrated in gnome shell, allows quickly to change the various settings of the desktop recording.</p>
<h4 id="hide-top-barhttpsextensionsgnomeorgextension545hide-top-bar"><a href="https://extensions.gnome.org/extension/545/hide-top-bar/">Hide Top Bar</a><a hidden class="anchor" aria-hidden="true" href="#hide-top-barhttpsextensionsgnomeorgextension545hide-top-bar">#</a></h4>
<p>Hides the top bar, except in overview. However, there is an option to show the panel whenever the mouse pointer approaches the edge of the screen. And if &ldquo;intellihide&rdquo; is enabled, the panel only hides when a window takes the space.</p>
<h4 id="battery-timehttpsextensionsgnomeorgextension1475battery-time"><a href="https://extensions.gnome.org/extension/1475/battery-time/">Battery Time</a><a hidden class="anchor" aria-hidden="true" href="#battery-timehttpsextensionsgnomeorgextension1475battery-time">#</a></h4>
<p>Show the remaining time until fully charged/discharged instead of the battery charge in percent in the panel.</p>
<h4 id="caffeinehttpsextensionsgnomeorgextension517caffeine"><a href="https://extensions.gnome.org/extension/517/caffeine/">Caffeine</a><a hidden class="anchor" aria-hidden="true" href="#caffeinehttpsextensionsgnomeorgextension517caffeine">#</a></h4>
<p>Disable the screensaver and auto suspend</p>
<h4 id="todotxthttpsextensionsgnomeorgextension570todotxt"><a href="https://extensions.gnome.org/extension/570/todotxt/">Todo.txt</a><a hidden class="anchor" aria-hidden="true" href="#todotxthttpsextensionsgnomeorgextension570todotxt">#</a></h4>
<p>A Gnome shell interface for todo.txt.</p>
<h4 id="internet-radiohttpsextensionsgnomeorgextension836internet-radio"><a href="https://extensions.gnome.org/extension/836/internet-radio/">Internet Radio</a><a hidden class="anchor" aria-hidden="true" href="#internet-radiohttpsextensionsgnomeorgextension836internet-radio">#</a></h4>
<p>Listen to an Internet Radio Stream</p>
<h4 id="ibus-font-settinghttpsextensionsgnomeorgextension1121ibus-font-setting"><a href="https://extensions.gnome.org/extension/1121/ibus-font-setting/">ibus font setting</a><a hidden class="anchor" aria-hidden="true" href="#ibus-font-settinghttpsextensionsgnomeorgextension1121ibus-font-setting">#</a></h4>
<p>use ibus font setting of ibus setup dialog to enhance the user experience</p>
<h4 id="lunar-calendar-农历httpsextensionsgnomeorgextension675lunar-calendar"><a href="https://extensions.gnome.org/extension/675/lunar-calendar/">Lunar Calendar 农历</a><a hidden class="anchor" aria-hidden="true" href="#lunar-calendar-农历httpsextensionsgnomeorgextension675lunar-calendar">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install gir1.2-lunar-date-2.0
$ sudo cp /usr/share/locale/zh_CN/LC_MESSAGES/lunar-date.mo /usr/share/locale/en/LC_MESSAGES/
</code></pre></div><h3 id="chromehttpswwwgooglecomlinuxrepositories"><a href="https://www.google.com/linuxrepositories/">Chrome</a><a hidden class="anchor" aria-hidden="true" href="#chromehttpswwwgooglecomlinuxrepositories">#</a></h3>
<p><strong><a href="https://www.makeuseof.com/import-passwords-into-chrome/">Import Passwords</a></strong></p>
<ol>
<li>Launch Chrome on your computer.</li>
<li>Type the following in the address bar and pressEnter: <code>chrome://flags</code></li>
<li>On the flags screen, put your cursor in the search box and type <strong>Password import</strong>.</li>
<li>You should see the <strong>Password import</strong> flag in the search results.</li>
<li>To enable this flag, click the dropdown menu next to the flag and select Enabled.</li>
<li>Click <strong>Relaunch</strong> at the bottom to relaunch Chrome. This will restore all of your open tabs.</li>
<li>When Chrome opens, click the three dots in the top-right corner, and select <strong>Settings</strong> &gt; <strong>Passwords</strong> on the following screen.</li>
<li>Click the three dots next to Saved Passwords and select Import.</li>
<li>Navigate to your CSV passwords file and select it to import it into Chrome.</li>
</ol>
<h4 id="用户脚本管理器httpsgreasyforkorgzh-cn"><a href="https://greasyfork.org/zh-CN">用户脚本管理器</a><a hidden class="anchor" aria-hidden="true" href="#用户脚本管理器httpsgreasyforkorgzh-cn">#</a></h4>
<p><strong>桌面端</strong></p>
<ul>
<li>Chrome：<a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo">Tampermonkey</a> 或 <a href="https://chrome.google.com/webstore/detail/violent-monkey/jinjaccalgkegednnccohejagnlnfdag">Violentmonkey</a></li>
<li>Firefox：<a href="https://addons.mozilla.org/firefox/addon/greasemonkey/">Greasemonkey</a>、<a href="https://addons.mozilla.org/firefox/addon/tampermonkey/">Tampermonkey</a> 或 <a href="https://addons.mozilla.org/firefox/addon/violentmonkey/">Violentmonkey</a></li>
<li>Safari：<a href="http://tampermonkey.net/?browser=safari">Tampermonkey</a> 或 <a href="https://apps.apple.com/app/userscripts/id1463298887">Userscripts</a></li>
<li>Microsoft Edge：<a href="https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd">Tampermonkey</a></li>
<li>Opera：<a href="https://addons.opera.com/extensions/details/tampermonkey-beta/">Tampermonkey</a> 或 <a href="https://violentmonkey.github.io/get-it/">Violentmonkey</a></li>
<li>Maxthon：<a href="http://extension.maxthon.com/detail/index.php?view_id=1680">Violentmonkey</a></li>
<li>AdGuard：（不需要其他软件）</li>
</ul>
<p><strong>脚本</strong></p>
<ul>
<li><a href="https://greasyfork.org/zh-CN/scripts/397419-fastgithub-%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AE-%E5%85%8B%E9%9A%86%E5%92%8C%E4%B8%8B%E8%BD%BD">FastGithub 镜像加速访问、克隆和下载</a></li>
<li><a href="https://greasyfork.org/zh-CN/scripts/424574-%E7%A7%92%E4%BC%A0%E9%93%BE%E6%8E%A5%E6%8F%90%E5%8F%96">秒传链接提取</a>：用于提取和生成百度网盘秒传链接</li>
<li><a href="https://greasyfork.org/zh-CN/scripts/419081-%E7%9F%A5%E4%B9%8E%E5%A2%9E%E5%BC%BA">知乎增强</a>：移除登录弹窗</li>
<li><a href="https://greasyfork.org/zh-CN/scripts/396310-%E7%BD%91%E9%A1%B5%E5%A4%8D%E5%88%B6%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4">网页复制限制解除</a></li>
<li><a href="https://greasyfork.org/zh-CN/scripts/418804-%E8%A7%A3%E9%94%81b%E7%AB%99%E5%A4%A7%E4%BC%9A%E5%91%98%E7%95%AA%E5%89%A7-b%E7%AB%99%E8%A7%86%E9%A2%91%E8%A7%A3%E6%9E%90%E4%B8%8B%E8%BD%BD-%E5%85%A8%E7%BD%91vip%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A-%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-%E6%B2%B9%E7%AE%A1-facebook%E7%AD%89%E5%9B%BD%E5%A4%96%E8%A7%86%E9%A2%91%E8%A7%A3%E6%9E%90%E4%B8%8B%E8%BD%BD-%E7%BD%91%E7%9B%98%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E7%A0%B4%E8%A7%A3%E6%97%A0%E9%99%90%E4%B8%8B%E8%BD%BD%E7%AD%89">解锁视频</a></li>
</ul>
<h4 id="download-all-imageshttpsdownload-all-imagesmobilefirstme"><a href="https://download-all-images.mobilefirst.me/">Download All Images</a><a hidden class="anchor" aria-hidden="true" href="#download-all-imageshttpsdownload-all-imagesmobilefirstme">#</a></h4>
<p>下载网页所有图片</p>
<h4 id="ublock-originhttpsgithubcomgorhillublock"><a href="https://github.com/gorhill/uBlock">uBlock Origin</a><a hidden class="anchor" aria-hidden="true" href="#ublock-originhttpsgithubcomgorhillublock">#</a></h4>
<p>禁广告</p>
<h4 id="沙拉查词httpssaladictcrimxcom"><a href="https://saladict.crimx.com/">沙拉查词</a><a hidden class="anchor" aria-hidden="true" href="#沙拉查词httpssaladictcrimxcom">#</a></h4>
<p>聚合词典专业划词翻译</p>
<h4 id="infinity-new-tabhttpschromegooglecomwebstoredetailinfinity-new-tabdbfmnekepjoapopniengjbcpnbljalfghlen-us"><a href="https://chrome.google.com/webstore/detail/infinity-new-tab/dbfmnekepjoapopniengjbcpnbljalfg?hl=en-US">Infinity New Tab</a><a hidden class="anchor" aria-hidden="true" href="#infinity-new-tabhttpschromegooglecomwebstoredetailinfinity-new-tabdbfmnekepjoapopniengjbcpnbljalfghlen-us">#</a></h4>
<p>Chrome Extension，解决 Chrome new tab 加载后会清空搜索栏问题</p>
<h4 id="questions">Questions<a hidden class="anchor" aria-hidden="true" href="#questions">#</a></h4>
<p><a href="https://askubuntu.com/questions/1078813/the-repository-http-dl-google-com-linux-chrome-deb-stable-release-does-not-h"><strong>The repository &lsquo;http://dl.google.com/linux/chrome/deb stable Release&rsquo; does not have a Release file</strong></a></p>
<p>The &ldquo;key&rdquo; is &ldquo;<strong>repository can&rsquo;t be authenticated</strong>&rdquo;</p>
<p>IMHO&hellip; you don&rsquo;t have the key of the repo</p>
<p>To solve that just use this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
</code></pre></div><h4 id="chromium">Chromium<a hidden class="anchor" aria-hidden="true" href="#chromium">#</a></h4>
<p><a href="https://en.wikipedia.org/wiki/Chromium_(web_browser)">Chromium</a> 是一款来自 &ldquo;The Chromium Project&rdquo; 的开源图形网络浏览器，基于 <a href="https://en.wikipedia.org/wiki/Blink_(web_engine)">Blink</a> 渲染引擎。它也是商业软件 Google Chrome 浏览器得以组成的基础。</p>
<p>在<a href="https://chromium.googlesource.com/chromium/src/+/master/docs/chromium_browser_vs_google_chrome.md">这里</a>你可以看到 Google Chrome 与 Chromium 浏览器的区别。此外，还有一点重要的不同：2021年3月2日发布的 Chromium 89 及其以后版本不再支持 Google 账户同步功能。</p>
<p><strong>注意：</strong> 目前，可以通过 <a href="https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5">使用 Chrome 的OAuth2 凭证</a>或者 <a href="https://www.chromium.org/developers/how-tos/api-keys">申请一个属于自己的凭证</a>来恢复同步功能, 但是请注意，这不一定是一个长期的解决方案。长期来讲，最好考虑使用 <a href="https://www.xbrowsersync.org/">xbrowsersync</a> 来同步书签数据。</p>
<h4 id="firefox">Firefox<a hidden class="anchor" aria-hidden="true" href="#firefox">#</a></h4>
<p><strong>设置</strong></p>
<ul>
<li>Sign In =&gt; Sync</li>
<li>Settings =&gt; Proxy =&gt; no proxy</li>
<li>Settings =&gt; Search =&gt; Bing</li>
<li>Settings =&gt; Home =&gt; Firefox Home</li>
<li>Add-ons =&gt; Dark Reader</li>
</ul>
<p><strong>媒体解码器</strong></p>
<p>主要用于 Firefox，安装媒体解码器来播放 MP3、MPEG4 和其他格式媒体文件。由于各个国家的版权问题， Ubuntu 在默认情况下不会安装它。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install ubuntu-restricted-extras
</code></pre></div><p>这种方式会安装 .exe 程序，不如<a href="https://askubuntu.com/questions/384650/how-to-install-h-264-decoder">直接安装</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install h264enc
</code></pre></div><h4 id="deepl-translatehttpschromegooglecomwebstoredetaildeepl-translate-beta-verscofdbpoegempjloogbagkncekinflcnjutm_sourcechrome-ntp-icon"><a href="https://chrome.google.com/webstore/detail/deepl-translate-beta-vers/cofdbpoegempjloogbagkncekinflcnj?utm_source=chrome-ntp-icon">DeepL Translate</a><a hidden class="anchor" aria-hidden="true" href="#deepl-translatehttpschromegooglecomwebstoredetaildeepl-translate-beta-verscofdbpoegempjloogbagkncekinflcnjutm_sourcechrome-ntp-icon">#</a></h4>
<p><strong>DeepL翻译</strong>（英语：DeepL Translator）是2017年8月由总部位于<a href="https://zh.m.wikipedia.org/wiki/%E5%BE%B7%E5%9C%8B">德国</a><a href="https://zh.m.wikipedia.org/wiki/%E7%A7%91%E9%9A%86">科隆</a>的DeepL GmbH（一家由<a href="https://zh.m.wikipedia.org/wiki/Linguee">Linguee</a>支持的创业公司）推出的免费<a href="https://zh.m.wikipedia.org/wiki/%E7%A5%9E%E7%BB%8F%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91">神经机器翻译</a>服务[<a href="https://zh.m.wikipedia.org/wiki/DeepL%E7%BF%BB%E8%AD%AF#cite_note-publisher-2">2]</a>[<a href="https://zh.m.wikipedia.org/wiki/DeepL%E7%BF%BB%E8%AD%AF#cite_note-pressinfo-3">3]</a>[<a href="https://zh.m.wikipedia.org/wiki/DeepL%E7%BF%BB%E8%AD%AF#cite_note-:0-4">4]</a>。评论家对于它的评价普遍正面，认为它的翻译比起<a href="https://zh.m.wikipedia.org/wiki/Google%E7%BF%BB%E8%AF%91">Google翻译</a>更为准确自然[<a href="https://zh.m.wikipedia.org/wiki/DeepL%E7%BF%BB%E8%AD%AF#cite_note-TechCrunch-5">5]</a>[<a href="https://zh.m.wikipedia.org/wiki/DeepL%E7%BF%BB%E8%AD%AF#cite_note-Deutsche_Welle-6">6]</a>。</p>
<h4 id="user-data-directoryhttpschromiumgooglesourcecomchromiumsrcmasterdocsuser_data_dirmdlinux"><a href="https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md#Linux">User Data Directory</a><a hidden class="anchor" aria-hidden="true" href="#user-data-directoryhttpschromiumgooglesourcecomchromiumsrcmasterdocsuser_data_dirmdlinux">#</a></h4>
<ul>
<li>[user data dir] <code>~/.config/google-chrome</code></li>
<li>[profile dir] <code>~/.config/google-chrome/Default</code></li>
<li>[user cache dir] <code>~/.cache/google-chrome/Default</code></li>
</ul>
<h4 id="dark-mode">Dark Mode<a hidden class="anchor" aria-hidden="true" href="#dark-mode">#</a></h4>
<p>注意：以下设置部分<strong>在 Android 端依然有效</strong>。</p>
<p>设置：</p>
<ol>
<li>Appearance =&gt;  Use GTK：在系统启用 Dark 模式下，会使窗口，标签页等浏览器上部分变黑暗</li>
<li>启用 <code>chrome://flags/#enable-force-dark</code>：会使设置页，网页黑暗；在Google 搜索页面，设置 =&gt; 外观 =&gt; 深色主题，可以使搜索结果词条访问过的与没有访问过的相区别（如果没有设置就会呈现一个颜色而无法区分）。有些网页也无效，并且完全看不清文字了，解决办法是启用 <code>Enable with increased text contrast</code>，例如依云的博客。</li>
</ol>
<p>其他：</p>
<ul>
<li><a href="https://github.com/darkreader/darkreader">Dark reader</a> 插件：会使网页黑暗。有些页面不起作用，比如 chrome web store、chrome 的设置页、插件、一些网站（即使该网站有黑暗模式，并且跟随系统，依旧显示为 light 模式）。除了无效的，不会使网页变得更难看。</li>
<li>开发工具的暗黑设置：按F12 =&gt; 按F1 ，设置主题为 Dark。</li>
</ul>
<h4 id="断点续传">断点续传<a hidden class="anchor" aria-hidden="true" href="#断点续传">#</a></h4>
<p><a href="https://superuser.com/a/420321">含义</a>：</p>
<p>Pause it with the option built-in to Chrome, and hibernate the computer. If the SERVER that is providing the download supports resuming downloads, then after you resume from hibernation, you should have no issues resuming the download.</p>
<p>After you pause the download, there is no need to touch Chrome. Just pause, and hibernate. By that I mean, don&rsquo;t close Chrome. Don&rsquo;t kill it or edit anything. Just pause the download, leave Chrome up and running, and hibernate.</p>
<p>明确需求：我要的不是“断点续传”（即 Pause &amp; Resume），而是类似aria2 的“始终断点续传”，前面一种在下载失败后会重新开始下载，而后面一种从失败的地方继续下载。</p>
<p>方案如下：</p>
<ol>
<li>旧版<code>chrome://flags/#enable-download-resumption</code>，新版内置</li>
<li><a href="https://www.chronodownloader.net/">Chrono Download Manager</a> 扩展</li>
<li>支持断点续传的下载器，如 <code>wge -c link</code></li>
</ol>
<h4 id="live-captionhttpssupportgooglecomchromeanswer10538231hlen"><a href="https://support.google.com/chrome/answer/10538231?hl=en">Live Caption</a><a hidden class="anchor" aria-hidden="true" href="#live-captionhttpssupportgooglecomchromeanswer10538231hlen">#</a></h4>
<p>Chrome 浏览器内置了实时字幕功能，同步将语音转成文字，显示在网页上，对于看英文视频、听英文播客很有用。</p>
<h3 id="goldendicthttpswwwcnblogscomkeatonlaop12702571html"><a href="https://www.cnblogs.com/keatonlao/p/12702571.html">GoldenDict</a><a hidden class="anchor" aria-hidden="true" href="#goldendicthttpswwwcnblogscomkeatonlaop12702571html">#</a></h3>
<p><strong>人一生离不开词典</strong>。无论是生活、学习还是工作，当我们遇到不懂的词语时，大部分人的解决方法是使用搜索引擎或者查词软件。作为学习者，我认为查词软件更好用，而且一本或几本好词典能让我们学习事半功倍。而免费查词软件我推荐 <a href="https://sourceforge.net/projects/goldendict/">GoldenDict</a>。</p>
<p>GoldenDict 的优点：</p>
<ul>
<li>免费</li>
<li>纯净无广告 == 专注</li>
<li>跨平台：Windows / Mac / Linux</li>
<li>支持多种词典格式</li>
<li>支持查维基百科 / 支持在线查词 / 支持在线翻译（需配置）</li>
<li>支持屏幕取词 == 划词释义</li>
<li>支持听取 <a href="http://forvo.com/">forvo.com</a> 上的发音</li>
<li>详见 <a href="http://www.goldendict.org/">GoldenDict 官网</a> 的权威说明。</li>
</ul>
<p>GoldenDict 的缺点：</p>
<ul>
<li>无 OCR 屏幕取词 / 无截屏翻译</li>
<li>无单词本。</li>
</ul>
<p>知道 GoldenDict 的优缺点后，充分利用其优点的同时，我们想办法补齐短板。</p>
<p><strong>GoldenDict 擅长查词，不擅长文本翻译，可是查词和文本翻译是分不开的，都是我们学习第二语言时经常需要的功能。为此，我引入两个文本翻译程序：<a href="https://github.com/CopyTranslator/CopyTranslator">CopyTranslator</a> / <a href="https://github.com/crimx/ext-saladict">Saladict</a>。</strong></p>
<p>无论你用什么电脑操作系统，都能利用它们进行高效率的查词和文本翻译。我认为这对用户很重要。只要我在系统里，我就能随时查词和文本翻译。</p>
<blockquote>
<p>GoldenDict 擅长查词：</p>
<p>意味着你可以管理多个词典，并利用好的词典对单词进行深度学习。你把 GoldenDict 想成一个书架，上面放了多本纸质词典供你查阅。</p>
<p>CopyTranslator / Saladict 擅长文本翻译：</p>
<p>意味着能极大提高你在文本翻译时的效率。比如拥有多个翻译引擎（Google，Baidu，Youdao 等），方便复制翻译结果等。当然，职业译者肯定使用专业的 CAT 软件。</p>
</blockquote>
<p>好，下面开始学习使用 GoldenDict。</p>
<h4 id="安装-3">安装<a hidden class="anchor" aria-hidden="true" href="#安装-3">#</a></h4>
<ul>
<li>**Windows：**下载安装最新版，当前为 [GoldenDict-1.5.0-RC2-372-*.exe（2019-04-27）](<a href="https://sourceforge.net/projects/goldendict/files/early">https://sourceforge.net/projects/goldendict/files/early</a> access builds/)。</li>
<li>**macOS：**下载安装最新版，当前为 [GoldenDict-1.5.0-RC2-372-*.dmg（2019-04-27）](<a href="https://sourceforge.net/projects/goldendict/files/early">https://sourceforge.net/projects/goldendict/files/early</a> access builds/MacOS/)。</li>
<li><strong>Linux</strong> ：终端上执行安装命令</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Ubuntu / Debian</span>
sudo apt install goldendict -y
</code></pre></div><p>下面我在 Linux 上做演示操作。（Windows / macOS 大同小异）</p>
<h5 id="打开-goldendict">打开 GoldenDict<a hidden class="anchor" aria-hidden="true" href="#打开-goldendict">#</a></h5>
<p>如果你一直用鼠标点击软件图标打开软件，我强烈建议你用更高效的方式——搜索打开应用。按 <strong>Super</strong>（Win） 键搜索 <strong>gold</strong> 再按 <strong>Enter</strong> 键打开程序：</p>
<p>第一次使用，建议阅读两遍 <strong>欢迎说明</strong>。</p>
<blockquote>
<p>为什么搜索打开应用更高效？这就考验你有没有「搜商」了。搜索只依赖键盘，不依赖鼠标，所以能盲开应用。</p>
</blockquote>
<h5 id="修改语言">修改语言<a hidden class="anchor" aria-hidden="true" href="#修改语言">#</a></h5>
<p>菜单栏选择**【编辑】&gt;【首选项】**：根据需要修改界面语言和显示风格。</p>
<h4 id="管理词典">管理词典<a hidden class="anchor" aria-hidden="true" href="#管理词典">#</a></h4>
<h5 id="下载词典">下载词典<a hidden class="anchor" aria-hidden="true" href="#下载词典">#</a></h5>
<p>我选了 4 部体积小的词典进行快速演练：</p>
<p><strong>词典来源</strong>：<a href="http://download.huzheng.org/">星际译王词库 词典下载</a></p>
<ul>
<li><a href="http://download.huzheng.org/dict.org/stardict-oald-2.4.2.tar.bz2">Oxford Advanced Learner&rsquo;s Dictionary</a></li>
<li><a href="http://download.huzheng.org/zh_CN/stardict-oxford-gb-2.4.2.tar.bz2">oxford-gb dictionary (en - zh_CN) 牛津现代英汉双解词典</a></li>
<li><a href="http://download.huzheng.org/zh_CN/stardict-langdao-ce-gb-2.4.2.tar.bz2">朗道汉英字典</a></li>
<li><a href="http://download.huzheng.org/zh_CN/stardict-xhzd-2.4.2.tar.bz2">新华字典</a></li>
</ul>
<h5 id="存放词典">存放词典<a hidden class="anchor" aria-hidden="true" href="#存放词典">#</a></h5>
<p>根据个人情况选择存放位置。我这里放在 <strong>/DATA/Software/GoldenDict/dic/</strong> 下。</p>
<h5 id="导入词典">导入词典<a hidden class="anchor" aria-hidden="true" href="#导入词典">#</a></h5>
<p>菜单栏选择**【编辑】&gt;【词典】&gt;【词典来源】&gt;【文件】&gt; 添加** 选择上一步的词典位置打开，点击 <strong>重新扫描</strong> 完成后 Apply 应用，切换到**【群组】**选项卡接着完成下一步词典分组。</p>
<h5 id="词典分组">词典分组<a hidden class="anchor" aria-hidden="true" href="#词典分组">#</a></h5>
<p>刚才下载了「四类」词典：<strong>英汉、英英、汉英、汉语</strong>，需要将它们按类分组。（这里的英汉包括英汉词典和英汉双解词典，同样，汉英包括汉英词典和汉英双解词典。）</p>
<p>选择**【群组】&gt; 添加群组**，然后在左边 <strong>可用词典</strong> 中选中，点击中间 <strong>&gt;</strong> 添加到分组，最后 <strong>OK</strong> 确认：</p>
<blockquote>
<p><strong>英汉（En - 中）（自定义快捷键：Ctrl-1）</strong>：牛津现代英汉双解词典
<strong>英英（En - En）（自定义快捷键：Ctrl-2）</strong>：Oxford Advanced Learner&rsquo;s Dictionary
<strong>汉英（中 - En）（自定义快捷键：Ctrl-3）</strong>：朗道汉英字典
<strong>汉语（Chinese）（自定义快捷键：Ctrl-4）</strong>：新华字典</p>
</blockquote>
<blockquote>
<p>为什么需要分组？当词典很多时，提高检索速度和分类检索。所以，你也可以按使用频率进行分组，比如分一个 <strong>最常用</strong> 群组。你喜欢就好。</p>
</blockquote>
<h4 id="使用">使用<a hidden class="anchor" aria-hidden="true" href="#使用">#</a></h4>
<h5 id="复制查词">复制查词<a hidden class="anchor" aria-hidden="true" href="#复制查词">#</a></h5>
<p>最笨最原始的方式，就是复制词语再跑到 GoldenDict 窗口粘贴查询。怎么样才叫不笨呢？</p>
<p>菜单栏选择**【编辑】&gt;【首选项】&gt;【热键】**可以看到。</p>
<p>热键 <strong>Ctrl+C+C</strong> 的意思是，选中需要翻译的词句，按住 Ctrl 再按两下 C 键 ，就能呼唤 GoldenDict 帮你翻译。</p>
<p><strong>所以正确的查词姿势是：选中词句，Ctrl+C+C。</strong></p>
<p>下面我列了两个场景现场操练一下（需要完成前面的步骤）：</p>
<blockquote>
<p><strong>英文场景</strong>： 此时你正趴在屏幕前哭逼地学习英文。</p>
<p>Q：What do I need to plant a flower?
A：I need fresh soil and a trowel to dig a hole.</p>
</blockquote>
<p>我们可以猜出 <strong>Trowel</strong> 的意思，现在假设你不知道，赶紧选中 <strong>Trowel，Ctrl+C+C</strong>，在 牛津现代英汉双解词典 里查到是<strong>小铲子</strong>的意思。</p>
<blockquote>
<p><strong>中文场景</strong>： 此时你正趴在屏幕前读苏轼的《赤壁赋》。</p>
<p>客有吹洞箫者，倚歌而和之。
其声呜呜然，如怨如慕，如泣如诉；余音袅袅，不绝如缕。
舞幽壑之潜蛟，泣孤舟之嫠妇。</p>
</blockquote>
<p>假设你不知道 <strong>嫠</strong> 字怎么读，这时候赶紧选中 <strong>嫠，Ctrl+C+C</strong>，马上就查出来了读嫠（lí）专指寡妇。</p>
<p><strong>取词窗口</strong> 上有一些按钮，鼠标悬停在上面会弹出解释，常用的是导航栏中的 <strong>查询框</strong> 、**将词条发送到主窗口（alt-W）**以及 <strong>添加收藏（ctrl-E）</strong>。 默认在 <strong>全部</strong> 群组中查询，可以切换到特定群组进行查询。不要怕，不要懒，多点点看看，就能用好这款神器了。</p>
<h5 id="手动查词模糊匹配">手动查词：模糊匹配<a hidden class="anchor" aria-hidden="true" href="#手动查词模糊匹配">#</a></h5>
<p>在查询框中，利用通配符进行词目（headwords）的模糊匹配，可以查询一个记忆模糊的单词。</p>
<p>通配符：<code>？</code> （匹配任意一个字符），<code>*</code>（匹配任意字符数字）。</p>
<p>比如，我要查一下 <strong>philosophy</strong> 的用法，但是忘记了拼写，我可以搜 <code>ph*phy</code>。使用方法非常简单，不做过多介绍。</p>
<p>如果实在想不起来英文单词，就查查汉英词典。</p>
<p>前面四部词典是为了快速演练。下面我将使用我喜欢的词典进行展示，这些词典内容丰富（体积很大），会有更好的展示效果。这些词典在下文 <strong>英语词典推荐</strong> 部分有介绍。</p>
<h5 id="调整界面">调整界面<a hidden class="anchor" aria-hidden="true" href="#调整界面">#</a></h5>
<p>我们要记住快捷键 <strong>Ctrl+M</strong>，显示 / 隐藏菜单栏（Menu）。程序窗口中 7 个面板都可以被隐藏，从上到下，从左到右依次为：</p>
<ul>
<li>菜单栏</li>
<li>查询面板</li>
<li>导航栏</li>
<li>词典栏</li>
<li>查询结果导航面板</li>
<li>收藏面板</li>
<li>历史面板</li>
</ul>
<p>在面板标题上右键，可以选择是否显示该面板。还可以左键拖拽面板调整其位置。我喜欢隐藏菜单栏显示查询面板：</p>
<p>按住 <strong>Ctrl</strong> 后滑动鼠标滚轮，可以缩放显示界面。也可以使用导航栏上的放大镜按钮调节。</p>
<p>我的这部词典有发音，所以可以点击喇叭图标听发音。如果点击喇叭图标没有声音，菜单栏选择**【编辑】&gt;【首选项】&gt;【音频】&gt; 播放 &gt; 设置播放器**，我这里使用了内部播放器： Qt Multimedia 。当然也可以使用外部播放器：mplayer 。(前提是安装了 mplayer ：<code>sudo apt -y install mplayer</code>)</p>
<h5 id="排序词典">排序词典<a hidden class="anchor" aria-hidden="true" href="#排序词典">#</a></h5>
<p>查找单词时，会按照词典栏的词典顺序进行检索，现在我想把 <em><strong>The little dict</strong></em> 放到第一的位置：菜单栏选择**【编辑】&gt;【词典】&gt;【词典】**，把 <em><strong>The little dict</strong></em> 拖到第一位。</p>
<p>这里调整的是默认群组 <strong>全部</strong> 中的词典顺序，要调整自定义群组的词典顺序，切换到【群组】选项卡，拖拽群组中的条目进行排序。</p>
<h5 id="屏幕取词--划词释义">屏幕取词 / 划词释义<a hidden class="anchor" aria-hidden="true" href="#屏幕取词--划词释义">#</a></h5>
<p><strong>Ctrl+C+C</strong> 是大多数时候的正常查词姿势，不过在特定场景下，比如阅读生词较多的英文文章、英文书籍时， 打开屏幕取词会使效率提升。点击导航栏中魔法棒图标开启屏幕取词，或者右键托盘图标勾选「屏幕取词」。Windows 上是真的屏幕取词，即鼠标悬停取词；而 Linux 上为划词释义，需要手动选择。</p>
<p>按 F4 打开【首选项】，在屏幕取词选项卡可以对「屏幕取词」进行设置。除非 Ctrl-C-C 快捷键冲突，否则，保持默认就行。</p>
<blockquote>
<p>LCinux 上，如果你觉得经常按 <strong>Ctrl+C+C</strong> 麻烦，更喜欢用C鼠标控制取词，你可以勾选「单词被选中时显示扫描旗标」，通过点击旗标进行查词。（Windows 版本没有此选项）</p>
</blockquote>
<p>一起看看 GoldenDict 与浏览器翻译扩展程序之间的差别：</p>
<ul>
<li>统一入口，使用同一个程序 / 使用自己喜欢的词典来学习；</li>
<li>利用英汉词典快速查看释义，同时可利用其他词典深入学习，边学边用学习效率高（前提是时间允许）；</li>
<li>有些人说扩展更快速，我没感觉出来；</li>
<li>可以跨浏览器、跨软件使用；</li>
<li>离线使用，你可以愉快地看电脑上的英文（DOC、PPT、TXT、PDF、EPUB、HTML 等任何电子文档格式）；</li>
</ul>
<h5 id="查词在线词典">查词：在线词典<a hidden class="anchor" aria-hidden="true" href="#查词在线词典">#</a></h5>
<p>本地词典可以灵活选择适合自己的词典，非常惬意！但是本地词库收词有限，如果你遇到一个没有收录的单词，怎么办？</p>
<p>只能查在线词典了！</p>
<p>为 GoldenDict 添加在线词典非常简单。</p>
<p>菜单栏选择**【编辑】&gt;【词典】&gt;【词典来源】&gt;【网站】&gt; 添加 &gt; 启用** ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 欧路</span>
https://dict.eudic.net/dicts/en/%GDWORD%

<span style="color:#75715e"># 有道词典 / 翻译</span>
http://dict.youdao.com/search?q<span style="color:#f92672">=</span>%GDWORD%&amp;ue<span style="color:#f92672">=</span>utf8

<span style="color:#75715e"># Collins Online Dictionary</span>
https://www.collinsdictionary.com/dictionary/english/%GDWORD%
</code></pre></div><p>切换到【群组】选项卡，添加到名为 <strong>Online Dictionary</strong> 的群组（自定义快捷键：Ctrl-5）。</p>
<p>其他在线词典，可通过浏览器访问使用：</p>
<ul>
<li><a href="https://www.oxfordlearnersdictionaries.com/">牛津在线词典</a></li>
<li><a href="https://www.ldoceonline.com/">朗文在线词典</a></li>
<li><a href="https://dictionary.cambridge.org/">剑桥在线词典</a></li>
<li><a href="https://www.merriam-webster.com/">韦氏在线词典</a></li>
<li><a href="https://www.vocabulary.com/">Vocabulary.com</a></li>
<li><a href="https://www.dictionary.com/">Dictionary.com</a></li>
<li><a href="http://dict.hjenglish.com/">沪江小D在线词典</a></li>
<li><a href="https://www.zdic.net/">漢典</a></li>
</ul>
<h5 id="查词维基百科">查词：维基百科<a hidden class="anchor" aria-hidden="true" href="#查词维基百科">#</a></h5>
<p>维基百科绝对是个好东西！</p>
<p>由于国内无法访问到 <strong>English Wikipedia</strong>，所以这里取消显示。（除非你在【首选项】&gt;【网络】中通过代理访问）</p>
<p>菜单栏选择**【编辑】&gt;【词典】&gt;【词典来源】&gt;【维基百科】**，取消勾选。</p>
<h5 id="查词搜索引擎">查词：搜索引擎<a hidden class="anchor" aria-hidden="true" href="#查词搜索引擎">#</a></h5>
<p>是的，聪明的你一定会想，我可以直接添加搜索引擎吗？可以的。下面是谷歌 / 搜狗 / 百度 / 必应的搜索串：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Bing 中国：</span>
http://cn.bing.com/search?q<span style="color:#f92672">=</span>%GDWORD%

<span style="color:#75715e"># Bing 美国：</span>
http://www.bing.com/search?q<span style="color:#f92672">=</span>%GDWORD%

<span style="color:#75715e"># 搜狗</span>
http://www.sogou.com/web?query<span style="color:#f92672">=</span>%GDWORD%

<span style="color:#75715e"># 百度搜索</span>
http://www.baidu.com/s?wd<span style="color:#f92672">=</span>%GDWORD%

<span style="color:#75715e"># Google</span>
https://google.com/search?q<span style="color:#f92672">=</span>%GDWORD%
</code></pre></div><p>菜单栏选择**【编辑】&gt;【词典】&gt;【词典来源】&gt;【网站】&gt; 添加 &gt; 启用**。切换到【群组】选项卡，将其添加到 <strong>Online Dictionary</strong> 群组。</p>
<p>这里我添加必应搜索并查询 <strong>蜗牛</strong>，然后双击结果 <strong>snails</strong> 进行英文搜索，可查看搜索引擎里的图片，帮助我们理解记忆单词。因为词典里面配图一般比较少，搜索引擎将使你获得更多相关信息，辅助学习（警惕浪费时间）。</p>
<h5 id="文本翻译谷歌翻译">文本翻译：谷歌翻译<a hidden class="anchor" aria-hidden="true" href="#文本翻译谷歌翻译">#</a></h5>
<p>（Linux 上做演示）</p>
<p><a href="https://github.com/soimort/translate-shell">translate-shell</a> 支持谷歌翻译或者必应翻译，我们可以在 GoldenDict 上利用其进行文本翻译。</p>
<p><strong>第一步</strong>：安装 translate-shell</p>
<p>Linux</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Ubuntu</span>
$ sudo apt install translate-shell -y
</code></pre></div><p>macOS</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Homebrew</span>
$ brew install translate-shell

<span style="color:#75715e"># MacPorts</span>
$ sudo port install translate-shell
</code></pre></div><p>Windows</p>
<ul>
<li>配置比较繁琐，推荐使用 <a href="https://github.com/xinebf">xinebf</a>/<strong><a href="https://github.com/xinebf/google-translate-for-goldendict">google-translate-for-goldendict</a></strong>（使用方法见后面）。或者使用 <a href="https://github.com/CopyTranslator/CopyTranslator">CopyTranslator</a>。</li>
</ul>
<p><strong>第二步</strong>：菜单栏选择**【编辑】&gt;【词典】&gt;【词典来源】&gt;【程序】&gt; 添加**，进行如下配置（类型为纯文本）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Google Translate -&gt; [Chinese]</span>
trans -e google -s auto -t zh-CN -show-original n -show-original-phonetics n -show-translation n -show-translation-phonetics n -show-prompt-message n -show-languages n -show-original-dictionary n -show-dictionary n -show-alternatives y -no-ansi <span style="color:#e6db74">&#34;%GDWORD%&#34;</span>

<span style="color:#75715e"># Google Translate -&gt; [English]</span>
trans -e google -s auto -t en-US -show-original n -show-original-phonetics n -show-translation n -show-translation-phonetics n -show-prompt-message n -show-languages n -show-original-dictionary n -show-dictionary n -show-alternatives y -no-ansi <span style="color:#e6db74">&#34;%GDWORD%&#34;</span>
</code></pre></div><ul>
<li><code>-show-original</code> Show original text or not.  (default: yes)</li>
<li><code>-show-original-phonetics</code> Show phonetic notation of original text or not.  (default: yes)</li>
<li><code>-show-translation</code> Show translation or not.  (default: yes)</li>
<li><code>-show-translation-phonetics</code> Show phonetic notation of translation or not.  (default: yes)</li>
<li><code>-show-prompt-message</code> Show prompt message or not.  (default: yes)</li>
<li><code>-show-languages</code> Show source and target languages or not.  (default: yes)</li>
<li><code>-show-original-dictionary</code> Show dictionary entry of original text or not.  (default: no) This option is enabled in dictionary mode.</li>
<li><code>-show-dictionary</code> Show dictionary entry of translation or not.  (default: yes)</li>
<li><code>-show-alternatives</code> Show alternative translations or not.  (default: yes)</li>
<li><code>-no-ansi</code> Do not use ANSI escape codes.</li>
</ul>
<p><strong>第三步</strong>：切换到**【群组】&gt; 添加群组 &gt; Translate**，并添加 <a href="https://img.icons8.com/color/48/000000/google-translate.png">图标</a>，设置群组快捷键为 <strong>Shift+T</strong>（可选）</p>
<p><strong>第四步</strong>：实践一下，在终端中 <strong>Ctrl+C+C</strong>，查询框处选择 Translate 群组，就看到翻译结果啦</p>
<p>添加在线翻译后，GoldenDict 就能跨软件快速翻译。无论你是在浏览网页，还是在阅读英文书籍，或者看软件英文手册， <strong>Ctrl+C+C</strong> 快速查看翻译。你还可以收藏你翻译过的短语。</p>
<p><strong>Windows 上使用 <a href="https://github.com/xinebf/google-translate-for-goldendict">google-translate-for-goldendict</a>：</strong></p>
<p>到 <a href="https://www.python.org/downloads/windows/">Python 官网下载最新版安装包</a>，当前为 <a href="https://www.python.org/ftp/python/3.8.2/python-3.8.2-amd64.exe">python-3.8.2-amd64.exe</a>，安装时勾选 <code>Add Python 3.8 to PATH</code> 就行。</p>
<p>打开 CMD 运行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">&gt; python -m pip install --upgrade pip
&gt; pip3 install google-translate-for-goldendict
</code></pre></div><blockquote>
<p>先升级 pip 至最新版，然后再安装。</p>
</blockquote>
<p>按 <strong>F3</strong> 打开 GoldenDict 词典配置界面， 进入【程序】选项卡：</p>
<table>
<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Enabled</td>
<td>✓</td>
</tr>
<tr>
<td>Type</td>
<td>Html</td>
</tr>
<tr>
<td>Name</td>
<td>Google Translate</td>
</tr>
<tr>
<td>Command Line</td>
<td>python -m googletranslate.googletranslate zh-CN %GDWORD% -s &ldquo;translate.google.cn&rdquo;</td>
</tr>
<tr>
<td>Icon</td>
<td>H:\PathTo\google_translate.png</td>
</tr>
</tbody>
</table>
<p>切换到**【群组】&gt; 添加群组 &gt; Translate**，并添加 <a href="https://img.icons8.com/color/48/000000/google-translate.png">图标</a>，设置群组快捷键为 <strong>Shift+T</strong>。</p>
<h5 id="文本翻译有道翻译">文本翻译：有道翻译<a hidden class="anchor" aria-hidden="true" href="#文本翻译有道翻译">#</a></h5>
<p>在 Linux 上，利用 easeflyer 开发的 <a href="https://github.com/easeflyer/gd_plugin">gd_plugin</a> 添加有道翻译。</p>
<p>将项目克隆下来：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd ~
$ git clone git@github.com:easeflyer/gd_plugin.git
</code></pre></div><p>按 <strong>F3</strong> 打开 GoldenDict 词典配置界面， 进入【程序】选项卡（路径替换为自己的绝对路径）：</p>
<table>
<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Enabled</td>
<td>✓</td>
</tr>
<tr>
<td>Type</td>
<td>Html</td>
</tr>
<tr>
<td>Name</td>
<td>Youdao Translate</td>
</tr>
<tr>
<td>Command Line</td>
<td>/home/YOUR_USER_NAME/gd_plugin/youdao/youdao_get.py %GDWORD%</td>
</tr>
<tr>
<td>Icon</td>
<td>/home/YOUR_USER_NAME/gd_plugin/youdao/youdao.svg</td>
</tr>
</tbody>
</table>
<p>下载图标 <a href="https://www.easyicon.net/language.en/1193429-youdao_icon.html">Youdao icons</a>。</p>
<p>切换到【群组】选项卡，将其添加到 Translate 群组。</p>
<h5 id="文本翻译copytranslator">文本翻译：CopyTranslator<a hidden class="anchor" aria-hidden="true" href="#文本翻译copytranslator">#</a></h5>
<p><a href="https://github.com/CopyTranslator/CopyTranslator">CopyTranslator</a> 是复制即翻译的外文辅助阅读翻译解决方案，支持 Windows、Mac、Linux 三大平台，翻译引擎包括 Google，Baidu，Youdao，Sogou，Caiyun，Tencent。</p>
<p><a href="https://copytranslator.github.io/download/">下载 CopyTranslator 安装包</a> 进行安装后，使用方法请阅读 <a href="https://copytranslator.github.io/guide/">CopyTranslator 官方文档</a>。</p>
<p>CopyTranslator 擅长文本翻译，可是与 GoldenDict 交互使用时不够高效。所以，使用 GoldenDict 能满足需求时，就没必要打开 CopyTranslator。</p>
<blockquote>
<p>有一款叫做 <a href="https://duoyi.io/">多译</a> 的软件与 CopyTranslator 有相同功能，但是有字数限制，有兴趣可以了解一下。</p>
</blockquote>
<h5 id="文本翻译saladict">文本翻译：Saladict<a hidden class="anchor" aria-hidden="true" href="#文本翻译saladict">#</a></h5>
<p><a href="https://github.com/crimx/ext-saladict">Saladict</a> 沙拉查词（<a href="https://chrome.zzzmh.cn/info?token=cdonnmffkdaoajfknoeeecmchibpmkmg">Chrome</a> / <a href="https://addons.mozilla.org/en-US/firefox/addon/ext-saladict/">Firefox</a>）插件天生适合浏览器，Saladict 插件可以在线翻译、在线查词、在线语音朗读、添加单词本、页面翻译等。</p>
<p>使用方法参阅官方文档 <a href="https://saladict.crimx.com/manual.html">沙拉查词使用方式</a>。以及：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/82773763">别找了，这才是你要的英文文献翻译神器！</a></li>
<li><a href="https://pencilq.com/54/#%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F%E6%BC%94%E7%A4%BA-1">文献翻译利器：沙拉查词 + Quicker，这或许是 Windows 上最强的聚合翻译方案</a></li>
</ul>
<h5 id="ocr-屏幕取词--截屏翻译">OCR 屏幕取词 / 截屏翻译<a hidden class="anchor" aria-hidden="true" href="#ocr-屏幕取词--截屏翻译">#</a></h5>
<p>GoldenDict 默认无 OCR 屏幕取词，无截屏翻译。先介绍一种三个平台都通用的方法，使用 <a href="https://u.tools/">Utools</a> + 扩展：讯飞 OCR + 扩展：沙拉查词。步骤为，将要翻译的文本截图粘贴到 Utools 中，然后选择「讯飞 OCR」识别内容，最后点击翻译按钮调用「沙拉查词」进行翻译。操作起来还是比较快的。</p>
<p>或者使用其他软件：</p>
<p>Windows</p>
<ul>
<li>使用 <a href="https://getquicker.net/">Quicker</a> 效率神器。（与 Utools 相似）</li>
<li>使用 nonwill 发布的 <a href="https://nonwill.github.io/post/goldendict/">GoldenDict OCR 划词版</a>。</li>
</ul>
<p>macOS</p>
<ul>
<li>使用有道词典 Mac 版。打开取词（CTRL + 鼠标取词）。</li>
<li>欧路词典。</li>
</ul>
<p>Linux</p>
<ul>
<li>利用 <a href="https://github.com/ziqiangxu/words-picker">words-picker</a> 进行截屏翻译。在 GNOME 桌面环境中，打开 words-picker 程序，然后使用系统截图快捷键 shift-ctrl-Print 将区域复制到剪贴板，完成截屏翻译。</li>
<li>使用有道词典 Linux 版。打开取词（CTRL + 鼠标取词）。</li>
<li>使用 <a href="https://github.com/jiangzc/CuteTranslation">CuteTranslation</a> 进行截屏翻译。</li>
</ul>
<p>对于那些无法复制的单词，如果查词频率高，就使用具有 OCR 屏幕取词的软件；如果偶尔查询，手动输入也不是什么坏事。</p>
<h5 id="文本语音朗读">文本语音朗读<a hidden class="anchor" aria-hidden="true" href="#文本语音朗读">#</a></h5>
<p>你可能会说：我不需要语音朗读。那是因为你没意识到它的用处或者说你忽略了它。你一定很喜欢词典中的例句发音，对听力和练习口语都有帮助。例句发音 = 句子 + 语音朗读，发散一下你的思维，当你翻译一个句子时，出于学习目的，你是不是同样希望能够听到它的语音朗读。而且学习英语不能太依赖眼睛，要多用耳朵听。</p>
<p>Windows 上按 <strong>F3</strong> 打开词典配置， 在【语音合成】选项卡进行配置；Linux 版本暂时没有 text-to-speech (TTS) 功能。Saladict 够用，我就不折腾了。</p>
<p>这里再推荐两款优秀的浏览器插件：</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/natural-reader-text-to-sp/kohfgcgbkjodfcfkcackpagifgbcmimk">Natural Reader Text to Speech</a></li>
<li><a href="https://chrome.google.com/webstore/detail/read-aloud-a-text-to-spee/hdhinadidafjejdhmfkjgnolgimiaplp">Read Aloud: 文本语音朗读助理</a></li>
</ul>
<p>还有一个 <a href="https://speech.aicloud.com/index/index/index.html">灵云语音云服务</a>：</p>
<ul>
<li>它可以 文字转音频 / 录音转文字。</li>
<li>它更加侧重于应用场景，不过现在已经收费了。</li>
</ul>
<p>总之，根据自己的需求，去寻找好资源。</p>
<h5 id="背单词">背单词<a hidden class="anchor" aria-hidden="true" href="#背单词">#</a></h5>
<p>GoldenDict 无单词本，意味着你不能像欧路词典那样，将单词添加到单词本中进行背诵。所以，只能「曲线救国」，将单词添加到收藏，隔一段时间（星期 / 月）就将收藏 <strong>导出至列表</strong>，然后放到 <a href="http://ankichina.net/">Anki</a> 或 欧路词典中进行背诵复习。如有必要，付钱换取方便远离折腾。</p>
<p>将收藏 <a href="https://my.eudic.net/studylist/import/">导入欧路词典单词本</a>：</p>
<blockquote>
<p>菜单栏选择**【帮助】&gt;【配置文件夹】**，可以看到收藏文件：favorites。</p>
<p><a href="http://ankichina.net/">Anki</a> 神器的使用，有兴趣可以深入了解。 <a href="https://zhuanlan.zhihu.com/p/31100580">干货</a> / <a href="https://baike.baidu.com/link?url=ukZd8E1QbJdhqApaI_PikxnbIdPwzO3ObpwAtnsID1-73mmdZCwaTgm5FegOQifzxIpPSSFOvCrWgGKlr6l7Q55AEa3Sel4zOtoIKoh8txn-qvJblICiVXLjxJLBdaHz7BXThMpGUwFrO-JW6Gh7nsbC8ffSWYr2Pqrkx_Nf4oG">百科</a></p>
</blockquote>
<h5 id="备份配置文件">备份配置文件<a hidden class="anchor" aria-hidden="true" href="#备份配置文件">#</a></h5>
<p>换机或者重装系统时，需要备份你的 GoldenDict 配置文件。否则，一切将从头再来，你会很痛苦。</p>
<p>菜单栏选择**【帮助】&gt;【配置文件夹】**，直接将整个文件夹进行备份。</p>
<p>新机或者新系统上，将整个文件夹拷贝到原来的位置，完成配置恢复。</p>
<h4 id="恭喜你会使用-goldendict-了">恭喜！你会使用 GoldenDict 了！<a hidden class="anchor" aria-hidden="true" href="#恭喜你会使用-goldendict-了">#</a></h4>
<p>前面主要介绍了 GoldenDict 的使用方法。为提高文本翻译效率，引入了 CopyTranslator / Saladict 两款程序。为补足 GoldenDict OCR 屏幕取词和截屏翻译的缺失，也引入了相应的软件。我们期望有那么一款软件能聚合这些功能，但这样的软件我还没发现，或者说还没有。</p>
<p>现在的 GoldenDict 具备了离线查词、在线查词和在线翻译的能力，完全能满足我们的需求。而且 GoldenDict 的离线词库拥有最强的学习效果，所以你应该主要使用 GoldenDict 进行查词和文本翻译，而 CopyTranslator / Saladict 作为备用软件，主要用于增强文本翻译。同时也是为了统一入口，避免分散你的学习精力。具体怎么配合，多多使用，慢慢摸索。</p>
<p>细心的你不难发现，查词和文本翻译里面最核心的是词典和翻译引擎。</p>
<p>这里我们讨论一下词典。选用什么词典？我们需要做功课来回答。</p>
<p>我不打算直接甩几本词典放这里，对于新手，看了一定是云里雾里。</p>
<p>因为词典是每个人必须会用的东西，所以值得深入学习。</p>
<p><strong>English Dictionary = 英语词典</strong></p>
<p>字典和词典是两个不同的概念，不要乱叫。中国正式使用“字典”一词始于《康熙字典》。根据《说文解字》，典是五帝的书本，神圣尊贵的大册。</p>
<p>字典和词典的区别：</p>
<ul>
<li>字典是为单字提供音韵、意思解释、例句、用法等等的工具书。使用字母文字作为文字的人群没有字典这个概念。字典收字为主，亦会收词。</li>
<li>词典（Dictionary），或称辞典，是为词语提供音韵、释义、例句用法等等的工具书。在东方社会中，词典收词为主，也会收字。为了配合社会发展需求，词典收词数量激增并发展出不同对象、不同行业及不同用途的词典。随着吸收百科全书的元素，更有百科辞典的出现。</li>
</ul>
<p>如果你把 <strong>English Dictionary</strong> 翻译成「英语字典」，我只能安慰你：没文化不是你的错！</p>
<p><strong>掌握词典行情，便于做出选择</strong></p>
<p>通过了解词典的行情，了解词典应该为学习者提供哪些东西，我们就能选择适合自己的词典。如果同学 / 同事 / 朋友 / 小孩需要词典，也能轻松推荐。做「以其昏昏，使人昭昭」的事，心理没底不说还会被内行笑话。</p>
<p>下面主要讨论一下英语词典，对于汉语词典或者其他外语词典（日语、法语、德语、俄语或西班牙语等），自行了解。</p>
<p>提醒：后面的内容可能需要阅读多遍。</p>
<h4 id="浅谈英语词典版本">浅谈英语词典版本<a hidden class="anchor" aria-hidden="true" href="#浅谈英语词典版本">#</a></h4>
<p>我们主要以 <strong>出身、体例、功用</strong> 以及 <strong>规模</strong> 四个方面对英语词典进行分类。</p>
<h5 id="一出身">一、出身<a hidden class="anchor" aria-hidden="true" href="#一出身">#</a></h5>
<p>从出身上讲，英语词典大致可分为本土词典和引进词典两类。</p>
<ol>
<li>本土词典主要是中国人编给中国人用的英汉词典，典型如译文社《英汉大词典》（陆谷孙主编）、《新英汉词典》（第4版）、商务《新时代英汉大词典》（张柏然主编）等。</li>
<li>引进词典又分为英系和美系两大类。目前英系词典占据中国市场的主导地位，著名的品牌如牛津、朗文、剑桥、麦克米伦、柯林斯，简称“牛朗剑麦柯”（谐音“牛郎见迈克”）合称“英国五虎”，除此还有一部词典叫做“钱伯斯”，对英国人意义非凡。美系词典主要有《美国传统词典》（<em>The American Heritage Dictionary</em>）和“韦氏词典”两大品牌。</li>
</ol>
<h5 id="二体例">二、体例<a hidden class="anchor" aria-hidden="true" href="#二体例">#</a></h5>
<p>以体例划分，英语词典可分为英汉、英英、英汉双解、汉英、汉英双解以及其他类别等五种。</p>
<ul>
<li><strong>英汉词典</strong> 一般为（wéi）中国人所编写，如译文社《新英汉词典》；</li>
<li><strong>英英词典</strong> 都是原版引进词典，如《牛津高阶英语词典》（OALD）、《朗文当代高级英语辞典》（<em>Longman Dictionary of Contemporary English</em>，简称 LDOCE）；</li>
<li><strong>英汉双解词典</strong> 是目前英语学习词典的主流，最重要的即是牛朗两部词典，英汉双解词典都译自英语原版词典，但并非真正全文翻译，大多数词目的英语释义以对应的汉语词语。</li>
<li><strong>汉英词典</strong> 大多是本土词典，如外研社《新世纪汉英词典》、商务《新时代汉英词典》；</li>
<li><strong>汉英双解词典</strong> 比较特殊，它是以国内原版的汉语词典编译而成，据我所知，目前只有外研社《现代汉语词典（双语版）》以及商务印书馆国际有限公司《新华字典（双语版）》两种；</li>
<li>除此以外，其他类别指的是国内引进少量英语与其他语种词典，如译文社引进的兰登系列词典《德英—英德小词典》（<em>Random House Webster&rsquo;s Pocket German Dictionary</em>）以及外教社引进的《柯林斯英德—德英词典》等。</li>
</ul>
<p>注：所谓双解词典,是一个英文单词,用英文解释一遍意思,再用中文解释一遍意思;用英文来解释是最准确的,中文可以辅助你去理解。 如果想通过中文查英文,需要一本汉英词典。</p>
<h5 id="三功用">三、功用<a hidden class="anchor" aria-hidden="true" href="#三功用">#</a></h5>
<p>首先从功用方面，将英语词典分为描述型、学习型和中和型三大类。</p>
<ol>
<li>描述型</li>
</ol>
<p>描述型英语词典又称为学术型英语词典，实际上描述型英语词典是最常见的英语词典，换作汉语工具书，诸如《新华字典》《现代汉语词典》都属于描述型词典，相反汉语工具书真正缺乏的学习型词典，除了一些给低幼学童使用的学习词典外，也就只有吕叔湘先生主编的《现代汉语八百词》等寥寥几部辞书。</p>
<p>我们进一步将描述型英语词典分为一般性、百科性和专业性三种。一般性描述词典典型如《牛津简明英语词典》《英汉大词典》，这类词典收词详备并且释义简明；百科性描述词典则有《牛津当代百科大词典》《牛津英美文化词典》等，主要收录文化百科类词条；专业性描述词典则是局限于某一学科或行业的词典，如《牛津哲学词典》和《牛津商务英语词典》。</p>
<ol start="2">
<li>学习型</li>
</ol>
<p>学习型英语词典是专为英语学习者（多为非英语母语人士）设计的，注重英语实际应用时的用法说明，第一部学习型词典始于 1948 年由牛津大学出版社出版、霍恩比（A S Hornby）主编的《现代英语学习词典》（<em>A Learner&rsquo;s Dictionary of Current English</em>），此即如今闻名于世的《牛津高阶英语词典》（OALD）的前身。</p>
<p>我们进一步将学习型英语词典分为一般性、多功能和专门性三种。</p>
<p>一般性英语学习型词典是我们最熟悉的品种，著名的“英国五虎”——“牛朗剑麦柯”都有自己品牌的学习型词典。（划重点）</p>
<hr>
<p><strong>最新版次，出版年份，出版社</strong></p>
<ul>
<li>《牛津高阶英汉双解词典》第 9 版，2018，商务</li>
<li><em><strong>Oxford Advanced Learner&rsquo;s Dictionary</strong></em> (<em><strong>OALD</strong></em>) 9th Edition , 2015 , Oxford</li>
<li>《朗文当代高级英语辞典》第 6 版，2019，外研社</li>
<li><em><strong>Longman Dictionary of Contemporary English</strong></em> (<em><strong>LDOCE</strong></em>) 6th Edition , 2015 , Pearson</li>
<li>《剑桥高阶英汉双解词典》第 2? 版 ， 2008，外研社</li>
<li><em><strong>Cambridge Advanced Learner&rsquo;s Dictionary</strong></em> (<em><strong>CALD</strong></em>) 4th Edition , 2013 , Cambridge</li>
<li>《麦克米伦高阶英汉双解词典》第 1 版，2018，外研社</li>
<li><em><strong>MacMillan English Dictionary for Advanced Learners</strong></em> (<em><strong>MED</strong></em>) 2nd Edition , 2012 , MacMillan</li>
<li>《柯林斯高阶英汉双解学习词典》第 8 版，2017，外研社</li>
<li><em><strong>Collins COBUILD Advanced Learner&rsquo;s Dictionary</strong></em> (<em><strong>CCALD</strong></em>) 9th Edition , 2018 , Collins</li>
</ul>
<hr>
<p><em>注：
关于书籍版次：第一次出版印刷的书写有“某年某月第一版，第一次印刷”，这叫初版，如内容不变动，第二次印就注明第一版第二次印刷，这种书叫重印书。如第三次印刷发行时内容经过重大修改，版次就要重新算，要称为：“第二版第三次印刷”。不过这个问题一般人不用想那么多，只需看自己是否喜欢这本词典，喜欢的话买国内最新版即可，毕竟每家词典各有特色。英语水平好的话，直接购买英文原版就行了。</em></p>
<ol start="3">
<li>中和型</li>
</ol>
<p>中和型词典兼具学习型词典和描述型词典的部分特点，是当前英语词典编纂的新趋势，典型代表为《朗文当代英语大辞典》，在 2000 词限定释词的基础上收录了 15,000 百科词条，是融合释义、用法说明、文化注释以及百科知识于一体的文化学习词典。与此相类的另有《美国传统词典》。</p>
<h5 id="四规模">四、规模<a hidden class="anchor" aria-hidden="true" href="#四规模">#</a></h5>
<p>这是对英语词典最直观的分类，一般而言我们可以根据收词量和总字数将英语词典简单分为巨、大、中、小、微型五大类。</p>
<ol>
<li>巨型词典</li>
</ol>
<p>英语世界中的巨型词典主要有两部，一部即是由英国语言学家默里（James A.H.Murray）主编的久负盛名的《牛津英语词典》（<em>The Oxford English Dictionary</em>，简称 OED），另一部则是最初由美国词典编纂家韦伯斯特（Noah.Webster）主编的《韦氏新世界词典》（<em>Webster Third New International Dictionary</em>，简称 WTNID）。这两部词典是其他各类英语词典的母本，但却因其规模过大并不适合学习者案头使用。</p>
<ol start="2">
<li>大型词典</li>
</ol>
<p>因此 20 世纪下半叶英语国家出版了大量单卷本供高阶学习者案头使用的大型词典，典型的有《牛津简明英语词典》（<em>Concise Oxford Dictionary</em>，简称 COD）、《柯林斯COBUILD英语词典》（<em>Collins COBUILD English Dictionary</em>，简称 CCED）以及《朗文当代英语大辞典》（<em>Longman Dictionary of English Language &amp; Culture</em>，简称 LDELC）；</p>
<ol start="3">
<li>中型词典</li>
</ol>
<p>后来又有供中阶学习者使用的中型词典，主要有《牛津袖珍英语词典》（<em>Pocket Oxford Dictionary</em>，简称 POD）、《朗文活用英语词典》（<em>Longman Active Study Dictionary</em>，简称 LASD）；</p>
<ol start="4">
<li>小型词典</li>
</ol>
<p>其实除了案头常备的大中型词典，人们更为喜爱和常用的或许是那些便携的小型词典，如《牛津英语小词典》（<em>Little Oxford Dictionary</em>，简称 LOD）；</p>
<ol start="5">
<li>微型词典</li>
</ol>
<p>除此以外，还有一种更其小巧的微型词典，释义极尽简洁，如《牛津英语微型词典》（<em>The Oxford Minidictionary</em>，简称 OMD），但这类词典一般用于速查，不适合英语学习者日常使用。</p>
<h4 id="词典应该为学习者提供哪些东西">词典应该为学习者提供哪些东西<a hidden class="anchor" aria-hidden="true" href="#词典应该为学习者提供哪些东西">#</a></h4>
<p>用一本好词典你可以做到以下几点：</p>
<ul>
<li>查找你看到或听到的英语单词的意思</li>
<li>找出如何说一个词</li>
<li>用你的语言找到一个单词的英文翻译</li>
<li>检查单词的拼写</li>
<li>检查动词的名词或过去时态的复数形式</li>
<li>找出一个单词的其他语法信息</li>
<li>找出一个词的同义词或反义词</li>
<li>查找单词的搭配</li>
<li>检查单词的词性</li>
<li>找出单词的语域</li>
<li>查找自然语言中单词的用法示例</li>
<li>听到例句的真人发音</li>
<li>查看配图学习单词</li>
<li>查看单词错误用法</li>
<li>观看单词在线教学视频（想象一下，当你查一个单词，一位美女 / 帅哥马上跳出来教你。恐怕你要天天抱着词典睡觉喽。）</li>
</ul>
<p>所以，<strong>按照类型我们需要四种电子词典：英汉、英汉双解、英英、汉英。</strong></p>
<p><strong>英汉词典：</strong></p>
<p>英汉词典主要是快速查看英语单词的中文释义。</p>
<p><strong>英汉双解词典：</strong></p>
<p>英汉双解词典对中级学习者当然非常友好，可以借助汉语翻译快速理解。如果查询一个单词需要耗费大量时间阅读英文解释，有时候是不明智的做法，并且，如果查一个单词里面又出现一大堆不认识的单词，太打击学习积极性了！另外，英汉双解词典是双向的，一般人是借助汉语理解英文，也有情况是借助英文查看对应的汉语翻译。所以，每个人必须有一本英汉双解词典。</p>
<p><strong>英英词典：</strong></p>
<p>当你英语到了一定水平（中高级水平）后，就应该主要使用英英词典。</p>
<p>英英词典分两种：<strong>ESL</strong> 词典（ESL: English as a second language）以及 <strong>Non-ESL</strong> 词典（又称母语词典）。<strong>Non-ESL</strong> 词典是指英美国家人士使用的词典，特点是收词量大，释义用词精确，范围广，无上限，很多词典例句很少或没有，有点类似于我们用的《新华字典》和《汉语大词典》 。<strong>ESL</strong> 词典就是上小节提到的学习型英语词典，专为英语学习者（多为非英语母语人士）设计，其优点是简单易懂，但其缺点也比较明显，由于释义用词所限，部分单词的解释比较啰嗦或者不精确，理解起来也不顺畅。</p>
<p>至于使用 <strong>ESL</strong> 词典还是 <strong>Non-ESL</strong> 词典，或者两者混合使用，就看你的需求了。</p>
<p><strong>汉英词典：</strong></p>
<p>使用汉语查找英文翻译或英文表达。</p>
<blockquote>
<p>翻译软件的词库就来自于这些「英汉词典」和「汉英词典」。</p>
</blockquote>
<p>有了上面的介绍，我可以推荐几本词典了。</p>
<h4 id="英语词典推荐">英语词典推荐<a hidden class="anchor" aria-hidden="true" href="#英语词典推荐">#</a></h4>
<h5 id="1-英汉词典the-little-dict">1 英汉词典：<em>The Little Dict</em><a hidden class="anchor" aria-hidden="true" href="#1-英汉词典the-little-dict">#</a></h5>
<p>用来提供快速翻译，还能聆听多个发音以及查看词频。「硬核之作，真香推荐，居家旅行沉迷学习必备，建议日常置顶食用。」<a href="https://www.pdawiki.com/forum/forum.php?mod=viewthread&amp;tid=30146&amp;extra=page%3D1">下载</a></p>
<h5 id="2-英英英汉双解词典esl">2 英英·英汉双解词典（ESL）<a hidden class="anchor" aria-hidden="true" href="#2-英英英汉双解词典esl">#</a></h5>
<ul>
<li>朗文当代高级英语辞典（释义用词 2000 个）</li>
<li>柯林斯高阶英语学习词典（释义用词 2500 个）</li>
<li>牛津高阶英语词典（释义用词 3000 个）</li>
</ul>
<p><strong>2.1 朗文当代高级英语辞典</strong></p>
<p><strong>英英原版</strong></p>
<ul>
<li><em><strong>Longman Dictionary of Contemporary English 6th Edition (En-En)</strong></em>，<em><strong>En-En_LDOCE6</strong></em>。</li>
<li>《朗文当代高级英语辞典（英英）（第六版）》，包含英式发音、美式发音、大部分例句朗读，带图片详解。这本词典收录单词量最大，例句最多，搭配和用法也最全。例句是真人原声，非常自然。</li>
<li>英语老师都会倡导学生尽量使用英英词典，营造英语环境，用英文解释英文，用英文理解英文，用英文对世界编码，有利于养成英语思维，对听说读写都有帮助。全英文解释，不会因为英汉差别而导致理解上的偏差。当然，英汉双解词典我们也是需要的。</li>
</ul>
<p><strong>英汉双解版</strong></p>
<ul>
<li><em><strong>En-Cn_LDOCE5++ V1.35 / V2.15</strong></em>。<a href="https://freemdict.com/2018/06/04/%E8%8B%B1%E6%B1%89-%E6%9C%97%E6%96%875-%C2%B7%E5%8F%8C%E8%A7%A3%C2%B7%E4%BE%8B%E5%8F%A5%E5%8F%91%E9%9F%B3/">下载</a></li>
<li>《朗文当代高级英语辞典（英英·英汉双解）（第五版）》</li>
<li>这本词典默认是英英版，可以通过点击轻松查看汉语翻译。对于直接使用英英有些吃力的同学，可以设置默认展开汉语，立马就是一本英汉双解词典。释义用词仅 2000 个，让你轻松看懂。大量例句都有真人发音，让你爱上听例句。</li>
</ul>
<p><strong>PDF 版</strong></p>
<ul>
<li>《朗文当代高级英语辞典（英汉双解）（第五版）》。<a href="https://www.pdawiki.com/forum/forum.php?mod=viewthread&amp;tid=36235">下载</a></li>
</ul>
<p><strong>朗文在线词典</strong></p>
<ul>
<li><a href="https://www.ldoceonline.com/">www.ldoceonline.com</a></li>
</ul>
<p><strong>2.2 柯林斯高阶英语学习词典</strong></p>
<p><strong>英英原版</strong></p>
<ul>
<li><em><strong>Collins COBUILD Advanced Learner&rsquo;s Dictionary 9th Edition (En-En)</strong></em>，<em><strong>En-En_CCALD9</strong></em>。</li>
</ul>
<p><strong>英汉双解版</strong></p>
<ul>
<li><em><strong>Collins COBUILD advanced learner’s English-Chinese dictionary 8th Edition</strong></em>。</li>
<li>《柯林斯COBUILD高阶英汉双解学习词典》（第8版）中的全部释义、例证及专栏均基于收词规模达 45 亿词的柯林斯英语语料库；所有单词及短语均采用整句释义，凸显词汇在典型语境中的典型用法。</li>
<li>强烈推荐！可以直接背诵单词及短语的整句释义，这就好比一个外国人在跟你交谈，对英语思维以及口语表达都有莫大的帮助。</li>
</ul>
<p><strong>柯林斯在线词典</strong></p>
<ul>
<li><a href="https://www.collinsdictionary.com/">www.collinsdictionary.com</a></li>
</ul>
<p><strong>2.3 牛津高阶英语词典</strong></p>
<p><strong>英英原版</strong></p>
<ul>
<li><em><strong>Oxford Advanced Learner’s Dictionary 9th edition (En-En)</strong></em>，<em><strong>En-En_OALD9</strong></em>。<a href="https://www.pdawiki.com/forum/thread-34097-1-1.html?x=180507">下载</a></li>
<li>包含英式发音、美式发音，例句发音，带图片详解等。</li>
</ul>
<p><strong>英汉双解版</strong></p>
<ul>
<li><em><strong>Oxford Advanced Learner’s English-Chinese Dictionary 9th Edition</strong></em>，<em><strong>En-zh_CN_OALD9</strong></em>。<a href="https://www.pdawiki.com/forum/thread-35542-1-1.html?x=48936">下载</a></li>
<li>《牛津高阶英语词典》为世所公认的权威英语学习词典，惠及世界各地一代又一代学子。到第九版编者将会话与写作功能融入学习型词典。 释义简明，义项划分清晰；提供系统的语法信息，如搭配模式、用法说明框等；提供插图及主题图片，直观释义。新加牛津口语指南，详解日常及应试等场景会话用语。</li>
<li>纸质版配套光盘中提供 iWriter + iSpeaker 互动式写作和口语指导学习程序。</li>
</ul>
<p><strong>牛津在线词典</strong></p>
<ul>
<li><a href="https://www.lexico.com/en">www.lexico.com</a></li>
<li><a href="https://www.oxfordlearnersdictionaries.com/">www.oxfordlearnersdictionaries.com</a></li>
</ul>
<h5 id="3-汉英词典任选一部">3 汉英词典（任选一部）<a hidden class="anchor" aria-hidden="true" href="#3-汉英词典任选一部">#</a></h5>
<ul>
<li>汉英大词典（第3版）</li>
<li>新汉英大辞典</li>
</ul>
<p>一般人上面几部词典基本够用。如果链接失效，可以试试 <strong>网盘搜索</strong>（<a href="http://www.chaonengsou.com/">超能搜</a> 等）或者 <a href="https://www.pdawiki.com/forum/">逛论坛</a>。</p>
<h4 id="英语构词法规则">英语构词法规则<a hidden class="anchor" aria-hidden="true" href="#英语构词法规则">#</a></h4>
<p>GoldenDict 安装的时候没有附带 <strong>构词法规则</strong>，查找一些单词的复数等变位变格形式的单词有时会查不到（比如有些词典查不到 Books，不会自动跳转到 Book），为了让 GoldenDict 更好地工作，我们添加 <strong>英语构词法规则库</strong>。</p>
<p>进入 <a href="https://sourceforge.net/projects/goldendict/">SourceForge 上 GoldenDict 的项目地址</a>，依次选择 <a href="https://sourceforge.net/projects/goldendict/files/">Files</a> &gt; [better morphologies](<a href="https://sourceforge.net/projects/goldendict/files/better">https://sourceforge.net/projects/goldendict/files/better</a> morphologies/) &gt; [1.0](<a href="https://sourceforge.net/projects/goldendict/files/better">https://sourceforge.net/projects/goldendict/files/better</a> morphologies/1.0/) &gt; [en_US_1.0.zip](<a href="https://sourceforge.net/projects/goldendict/files/better">https://sourceforge.net/projects/goldendict/files/better</a> morphologies/1.0/en_US_1.0.zip/download) 下载英语构词法规则库。</p>
<p>菜单栏选择**【编辑】&gt;【词典】&gt;【词典来源】&gt;【构词法规则库】**，添加 <strong>英语构词法规则库</strong>。</p>
<h4 id="朗文5-自动展开音节syllable及汉语chinese">朗文5 ++：自动展开音节（Syllable）及汉语（Chinese）<a hidden class="anchor" aria-hidden="true" href="#朗文5-自动展开音节syllable及汉语chinese">#</a></h4>
<p>我是 <em><strong>En-Cn_LDOCE5++</strong></em> 和 <em><strong>En-En_LDOCE6</strong></em> 一起使用，所以把 <strong>LDOCE5++</strong> 设置为自动展开音节及汉语。</p>
<p>下面介绍一下设置方法，适用于 <em><strong>En-Cn_LDOCE5++（V1.35 / V2.00 / V2.15）</strong></em>。</p>
<p><strong>自动展开音节（Syllable）</strong></p>
<p>打开文件 <strong>LM5style.css</strong> 搜索 <code>show/hide syllable</code> 注释掉以下代码块：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#75715e">/* -------------- show/hide syllable ------------- 
</span><span style="color:#75715e">.HWD .HYP {
</span><span style="color:#75715e">    display: none;
</span><span style="color:#75715e">}*/</span>
</code></pre></div><p><strong>调整手机中悬浮球高度</strong></p>
<p>手机欧路词典中 <strong>LDOCE5++</strong> 的悬浮球会与控制按钮重叠，需要调整其高度。搜索 <code>.mobile .lm5pp_popup</code> 设置距离底部为 <code>90px</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">mobile</span> .<span style="color:#a6e22e">lm5pp_popup</span> {
    <span style="color:#66d9ef">bottom</span>: <span style="color:#ae81ff">90</span><span style="color:#66d9ef">px</span>;
    <span style="color:#66d9ef">right</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
}
</code></pre></div><p><strong>自动展开汉语（Chinese）</strong></p>
<p>打开 <strong>LM5style_switch.css</strong> 注释掉以下代码块：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#75715e">/*.EXAMPLE .cn_txt, .Error .cn_txt,.cn_txt {
</span><span style="color:#75715e">	display: none;
</span><span style="color:#75715e">}*/</span>
</code></pre></div><p>可以偷懒直接删除 <strong>LM5style_switch.css</strong>（或者重命名为 <strong>LM5style_switch.css.bak</strong>）。但是，你将不能在悬浮球上控制隐藏/显示汉语。</p>
<blockquote>
<p>如果你直接修改手机中的 CSS 文件，需要清除软件缓存再重启 App 才能生效。
如果你在电脑上修改，<strong>Ctrl+F5</strong> 可以快速刷新词典查看效果。
更多调整参见 <a href="https://www.pdawiki.com/forum/forum.php?mod=viewthread&amp;tid=30452">FF朗文5++重排 DIY</a> / <a href="https://www.pdawiki.com/forum/forum.php?mod=viewthread&amp;tid=25163&amp;fromuid=225114">改版 fearfare 大的朗文</a>。</p>
</blockquote>
<h4 id="goldendict-进阶技巧">GoldenDict 进阶技巧<a hidden class="anchor" aria-hidden="true" href="#goldendict-进阶技巧">#</a></h4>
<h5 id="效率提升快捷键">效率提升：快捷键<a hidden class="anchor" aria-hidden="true" href="#效率提升快捷键">#</a></h5>
<p>除了全局热键外，GoldenDict 还支持许多程序快捷键。按 <strong>F1</strong> 快捷键打开 <strong>GoldenDict 帮助</strong>， 查看 <strong>13 Shortcuts</strong>。</p>
<p>第一次使用，按照快捷键列表操作一遍。主要是感受一下快捷键的功能，不要求强行记忆它们，当你经常进行某项操作时，再翻阅一下 <strong>13 Shortcuts</strong>，用几次就记住了。</p>
<p>常用快捷键：</p>
<table>
<thead>
<tr>
<th>Shortcut</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alt+Left</td>
<td>(In main and popup windows) history navigation: show previous founded results</td>
</tr>
<tr>
<td>Alt+Right</td>
<td>(In main and popup windows) history navigation: show next founded results</td>
</tr>
<tr>
<td>Alt+Down</td>
<td>Jump to article from next dictionary</td>
</tr>
<tr>
<td>Alt+Up</td>
<td>Jump to article from previous dictionary</td>
</tr>
<tr>
<td>Alt+S</td>
<td>(In main and popup windows) playback pronunciation for current word</td>
</tr>
<tr>
<td>Alt+W</td>
<td>(In popup window) transfer word from search line to main window</td>
</tr>
<tr>
<td>Alt+PgDown</td>
<td>(In main and popup windows) switch to next dictionaries group</td>
</tr>
<tr>
<td>Alt+PgUp</td>
<td>(In main and popup windows) switch to previous dictionaries group</td>
</tr>
<tr>
<td>Ctrl++</td>
<td>Increase articles font size</td>
</tr>
<tr>
<td>Ctrl+–</td>
<td>Decrease articles font size</td>
</tr>
<tr>
<td>Ctrl+0</td>
<td>Set default articles font size</td>
</tr>
<tr>
<td>Ctrl+E</td>
<td>Add current tab to Favorites</td>
</tr>
<tr>
<td>Ctrl+F</td>
<td>(In main and popup windows) search in page / (In dictionaries dialog) go to filter line</td>
</tr>
<tr>
<td>Ctrl+M</td>
<td>Show/hide main menu</td>
</tr>
<tr>
<td>Ctrl+Q</td>
<td>(In main window) close GoldenDict</td>
</tr>
<tr>
<td>Ctrl+S</td>
<td>Show/hide search pane</td>
</tr>
<tr>
<td>Ctrl+Shift+F</td>
<td>Open/switch to full-text search dialog</td>
</tr>
<tr>
<td>Esc</td>
<td>(In main window) go to search line (the action for Esc key can be changed in <a href="https://www.cnblogs.com/keatonlao/p/options.html#6-1-interface">preferences</a>) / (in popup window) close popup window</td>
</tr>
<tr>
<td>F1</td>
<td>GoldenDict reference</td>
</tr>
<tr>
<td>F3</td>
<td>Dictionaries dialog</td>
</tr>
<tr>
<td>F4</td>
<td>GoldenDict preferences</td>
</tr>
</tbody>
</table>
<h5 id="查句全文搜索">查句：全文搜索<a hidden class="anchor" aria-hidden="true" href="#查句全文搜索">#</a></h5>
<p>按 <strong>F1</strong> 打开 <strong>GoldenDict 帮助</strong>， 查看 <strong>09 Full-text search</strong>。</p>
<p>可以通过菜单“搜索”或按“Ctrl+Shift+F”键来调用全文搜索对话框。通过全文搜索，可以在当前词典组的词典文本中而不是在词典 headwords（词目）中搜索单词和表达式。</p>
<blockquote>
<p>**提醒：**如果 <a href="https://pdawiki.com/forum/search.php?mod=forum&amp;searchid=233&amp;orderby=lastpost&amp;ascdesc=desc&amp;searchsubmit=yes&amp;kw=CPU">GoldenDict 占用 CPU (%) 超高</a>，请关闭全文搜索索引。看一下文章 <a href="https://mp.weixin.qq.com/s/gHMJrVG_bmGw142fEEtNeQ">GoldenDict 全文搜索几例</a>。</p>
</blockquote>
<p>利用「全文搜索」查找英文表达，显然比直接将一句中文放到翻译软件中翻译更靠谱，比如下面这句摘自 <strong>牛津高阶英汉双解词典（第 9 版）</strong> 的例句：</p>
<blockquote>
<p>I&rsquo;ll ask my boss if I can have the day off.
我要问一下老板我能不能请一天假。</p>
<p>现在我复制中文到谷歌翻译中翻译，结果如下：
I have to ask the boss if I can take a day off.</p>
<blockquote>
<p>很显然翻译出来的英文枯燥无味。</p>
</blockquote>
</blockquote>
<p>下面举例简单介绍一下，使用「全文搜索」查找地道的英文表达。</p>
<hr>
<p><strong>例子：我想知道请假的的英文表达，包括日假周假年假。我该如何搜索？</strong></p>
<hr>
<p>快捷键 <strong>Ctrl+Shift+F</strong> 打开全文搜索，模式选择 <strong>正则表达式</strong>。</p>
<p>如果直接检索 <code>请假</code> 这个关键词，会因范围太大，需要更多检索时间，最后还会出来很多无用结果，所以我们需要缩小检索范围。</p>
<p>先检索日假。直接输入 <code>请一天假</code>，这个地球人都会，但「请两天假」的表达式就搜不到。现在，我们要一次检索出「请天假」的表达式，输入正则表达式：<code>请.{1,3}天假</code>（中间匹配 1-3 个字符）。</p>
<p>理论上，我们可以匹配出：<code>请一天假</code> <code>请两天假</code> <code>请几天假</code> <code>请过一天假</code> <code>请了十五天假</code> <code>...</code></p>
<blockquote>
<p><code>.</code>：一个点，匹配任意单字符（不包括换行符）
<code>{n,m}</code>：m 和 n 均为非负整数，其中 n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，&ldquo;o{1,3}&rdquo; 将匹配 &ldquo;fooooood&rdquo; 中的前三个 o。&lsquo;o{0,1}&rsquo; 等价于 &lsquo;o?'。请注意在逗号和两个数之间不能有空格。</p>
</blockquote>
<p>现在，我们要把请日假 / 周假 / 年假的表达式一次搜出来。
给搜索框写入正则表达式：<code>请.{1,3}(天|周|年)假</code>，就查出来了。</p>
<blockquote>
<p><code>()</code>：标记一个子表达式的开始和结束位置。<code>()?</code> 匹配前面的子表达式零次或一次，<code>()+</code> 匹配前面的子表达式一次或多次。
<code>|</code>：代表 或</p>
</blockquote>
<p>正则表达式学习资源：</p>
<ul>
<li><a href="https://www.runoob.com/regexp/regexp-syntax.html">正则表达式 – 语法 _ 菜鸟教程</a></li>
<li><a href="https://www.bilibili.com/video/av18432719/?p=1">油管最受欢迎的+正则表达式教程【11集】</a></li>
<li><a href="https://regexr.com/">练习正则表达式的网站：RegExr</a></li>
</ul>
<p><strong>多读几遍 GoldenDict 帮助，掌握更多使用技巧。</strong></p>
<h5 id="其他">其他<a hidden class="anchor" aria-hidden="true" href="#其他">#</a></h5>
<ul>
<li><a href="https://www.pdawiki.com/forum/forum.php?mod=viewthread&amp;tid=14082&amp;extra=page%3D1">GoldenDict 界面显示风格、字体、背景等的修改</a></li>
<li><a href="https://www.pdawiki.com/forum/forum.php?mod=viewthread&amp;tid=11705&amp;extra=page%3D1">GoldenDict 专贴！</a></li>
</ul>
<h4 id="参考文章">参考文章<a hidden class="anchor" aria-hidden="true" href="#参考文章">#</a></h4>
<ul>
<li><a href="https://github.com/Dictionaryphile/GoldenDict_zh_manual">GoldenDict 中文用户手册</a></li>
<li><a href="https://www.chongbuluo.com/thread-5724-1-1.html">新手上路：GoldenDict——英语爱好者必备词典</a></li>
<li>[<a href="https://blog.csdn.net/clksjx/article/details/85052248">使用教程] Linux 上最好用的词典 GoldenDict</a></li>
<li><a href="https://blog.csdn.net/njshaka/article/details/86615217">在 GoldenDict 中添加谷歌翻译</a></li>
<li><a href="https://blog.csdn.net/a775992553/article/details/8788423">Ubuntu 安装 GoldenDict</a></li>
<li><a href="https://book.douban.com/review/2292414/">英语词典版本浅谈（讲稿版）</a></li>
<li><a href="https://einverne.github.io/post/2018/08/goldendict.html">Linux 下非常好用的字典 GoldenDict！</a></li>
<li><a href="https://jingyan.baidu.com/article/d8072ac4808225ec95cefde6.html">GoldenDict 添加构词法规则库</a></li>
<li><a href="http://www.mamicode.com/info-detail-2334877.html">GoldenDict 词典的超级实用高级玩法——全文搜索功能</a></li>
</ul>
<blockquote>
<p>能力有限，本文可能有错误的地方，望留言斧正。</p>
</blockquote>
<h4 id="goldendict-dark-themehttpsgithubcomgoldendictgoldendictwikigoldendict-dark-theme"><a href="https://github.com/goldendict/goldendict/wiki/GoldenDict-Dark-Theme">GoldenDict Dark Theme</a><a hidden class="anchor" aria-hidden="true" href="#goldendict-dark-themehttpsgithubcomgoldendictgoldendictwikigoldendict-dark-theme">#</a></h4>
<p><strong>Kvantum</strong></p>
<p>GoldenDict 是 Qt 应用程序，因此，在 Gnome 上的 Appearence 设置就对其无效。参考 <a href="https://wiki.archlinux.org/title/Uniform_look_for_Qt_and_GTK_applications#Breeze">Uniform look for Qt and GTK applications</a>，如果直接通过 <code>QT_STYLE_OVERRIDE=YurnDark goldendict</code> ，会发现其只支持 <code>Windows, Fusion</code> 两个有限的主题，而且没有黑暗主题。因此参考 <a href="https://fostips.com/qt5-apps-look-feel-ubuntu-fedora-linux/">How to Change Look and Feel of Qt5 Apps in Ubuntu, Debian, Fedora Linux</a> 使用 Kvantum 来设置 QT 程序的黑暗模式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install qt5-style-kvantum qt5-style-kvantum-themes
$ echo <span style="color:#e6db74">&#34;export QT_STYLE_OVERRIDE=kvantum&#34;</span> &gt;&gt; ~/.profile
</code></pre></div><p><strong>GoldenDict-Full-Dark-Theme</strong></p>
<p>这个主题有个全黑暗模式，即xian shi词典结果部分也会黑暗，但是效果不好，看不清。</p>
<ol start="0">
<li>Download <em><a href="https://github.com/yozhic/GoldenDict-Full-Dark-Theme">GoldenDict-Full-Dark-Theme</a></em></li>
<li>Move <code>styles</code> and <code>fonts</code> folders to the <code>GD Configuration Folder</code>. If <code>GoldenDict</code> is installed by default, the <code>GD Configuration Folder</code> is located at the <code>~/.goldendict</code></li>
<li>Move the <code>icons</code> folder to the <code>GoldenDict</code> program folder <code>/usr/share/goldendict</code></li>
<li>Open <em>GoldenDict</em> menu &ldquo;Preferences&hellip; → Interface&rdquo;: set &ldquo;Add-on style&rdquo; to <code>dark-theme</code>; set &ldquo;Display style&rdquo; to <code>Lingoes</code>.</li>
<li>set &ldquo;Display style&rdquo; to <code>Default</code>.</li>
</ol>
<h4 id="startup--silent-start">startup &amp; silent start<a hidden class="anchor" aria-hidden="true" href="#startup--silent-start">#</a></h4>
<ul>
<li>
<p>startup：将 goldendict 添加到 gnome-session-properties，默认生成的是</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat ~/.config/autostart/goldendict-owned-by-preferences.desktop
<span style="color:#f92672">[</span>Desktop Entry<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>Application
Terminal<span style="color:#f92672">=</span>false
Categories<span style="color:#f92672">=</span>Office;Dictionary;
Name<span style="color:#f92672">=</span>GoldenDict
GenericName<span style="color:#f92672">=</span>Multiformat Dictionary
Comment<span style="color:#f92672">=</span>A feature-rich dictionary lookup program
Icon<span style="color:#f92672">=</span>goldendict
Exec<span style="color:#f92672">=</span>goldendict
</code></pre></div></li>
<li>
<p>silent start：Edit =&gt; Preferences =&gt; start to system tray 就是静默启动</p>
</li>
</ul>
<h4 id="crow-translatehttpsgithubcomcrow-translatecrow-translate"><a href="https://github.com/crow-translate/crow-translate">crow-translate</a><a hidden class="anchor" aria-hidden="true" href="#crow-translatehttpsgithubcomcrow-translatecrow-translate">#</a></h4>
<h3 id="flameshothttpsflameshotorg"><a href="https://flameshot.org/">Flameshot</a><a hidden class="anchor" aria-hidden="true" href="#flameshothttpsflameshotorg">#</a></h3>
<p>Powerful, yet simple to use open-source screenshot software.</p>
<table>
<thead>
<tr>
<th>Keys</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>←, ↓, ↑, →</td>
<td>Move selection 1px</td>
</tr>
<tr>
<td>Shift + ←, ↓, ↑, →</td>
<td>Resize selection 1px</td>
</tr>
<tr>
<td>Esc</td>
<td>Quit capture</td>
</tr>
<tr>
<td>Ctrl + C</td>
<td>Copy to clipboard</td>
</tr>
<tr>
<td>Ctrl + S</td>
<td>Save selection as a file</td>
</tr>
<tr>
<td>Ctrl + Z</td>
<td>Undo the last modification</td>
</tr>
<tr>
<td>Right Click</td>
<td>Show color picker</td>
</tr>
<tr>
<td>Mouse Wheel</td>
<td>Change the tool&rsquo;s thickness</td>
</tr>
</tbody>
</table>
<p><a href="https://flameshot.org/docs/guide/key-bindings/">Add a new Shortcuts</a></p>
<ul>
<li>On &lsquo;Name&rsquo;, name it &lsquo;<code>Flameshot</code>&rsquo;</li>
<li>Define the command as &lsquo;<code>flameshot gui</code>&rsquo;.</li>
<li>Select &lsquo;Define shortcut&hellip;&lsquo;and click your keyboard <code>win</code> + <code>shift</code> + <code>Prt Sc</code> key.</li>
</ul>
<h3 id="ppsspphttpsapkcabalcomngbest-ppsspp-settings"><a href="https://apkcabal.com.ng/best-ppsspp-settings/">PPSSPP</a><a hidden class="anchor" aria-hidden="true" href="#ppsspphttpsapkcabalcomngbest-ppsspp-settings">#</a></h3>
<p>A PSP emulator.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:ppsspp/stable
$ sudo apt-get update
$ sudo apt install ppsspp
</code></pre></div><p>Graphics:</p>
<ul>
<li>Rendering Mode
<ul>
<li>set the <strong>Backend</strong> from OpenGL to Vulkan.</li>
</ul>
</li>
<li>Framework Control
<ul>
<li><strong>Frameskipping</strong> is Off</li>
<li><strong>Auto-Frameskip</strong> is Off</li>
<li>set the <strong>Alternative Speed</strong> to Unlimited</li>
</ul>
</li>
<li>Postprocessing effects
<ul>
<li><strong>Postprocessing shader</strong> should be off.</li>
</ul>
</li>
<li>Performance
<ul>
<li>If your Device is Powerful, high rendering resolution will work. Its recommended to first try with <strong>2x Rendering resolution</strong> as It brings impressive graphics and supports stable gameplay too</li>
<li><strong>Hardware transform</strong>, <strong>Software skinning</strong>, <strong>Vertex cache</strong> and <strong>Lazy texture caching</strong> should be checked.</li>
<li><strong>Retain changed textures</strong> should be unchecked while keeping Disable <strong>slower effects</strong> and <strong>Hardware Installation</strong> checked.</li>
</ul>
</li>
<li>Overlay Information
<ul>
<li>Select FPS in <strong>Show FPS counter</strong>.</li>
</ul>
</li>
</ul>
<p>System:</p>
<ul>
<li>Make sure <strong>Fast memory</strong> is checked</li>
<li>Set <strong>I/O timing method</strong>, to Simulate UMD delays or Fast</li>
</ul>
<h3 id="yuzuhttpswwwbilibilicomreadcv4973631"><a href="https://www.bilibili.com/read/cv4973631">yuzu</a><a hidden class="anchor" aria-hidden="true" href="#yuzuhttpswwwbilibilicomreadcv4973631">#</a></h3>
<p><a href="https://yuzu-emu.org/">yuzu</a> 是 <code>Citra</code>的制作者写的一个开源<code>NS</code>模拟器，用<code>C++</code>编写，特点包括<code>Vulkan API</code>的支持、灵活的模拟器配置以及游戏配置等等。</p>
<p>玩了 super mario odyssey，过场动画很卡顿，可以软配置的很少，主要看硬件配置，我的配置玩 BOTW 是不可能了。</p>
<h4 id="安装-4">安装<a hidden class="anchor" aria-hidden="true" href="#安装-4">#</a></h4>
<ul>
<li>
<p>选择 File -&gt; Open yuzu Folder</p>
</li>
<li>
<p>在打开的目录下，新建keys文件夹（如果没有），然后进入keys文件夹，放入key文件prod.keys，内容如下</p>
<pre tabindex="0"><code>aes_kek_generation_source = 4d870986c45d20722fba1053da92e8a9
aes_key_generation_source = 89615ee05c31b6805fe58f3da24f7aa8
bis_kek_source = 34c1a0c48258f8b4fa9e5e6adafc7e4f
bis_key_00 = 374e0e2ab275141f811badcb0fefd881b71d6af540de58895901aa0c01663bc8
bis_key_01 = 0b08f19a42ac5ae590b3373ad9698344a571f35165663536dae0842b5221b31c
bis_key_02 = 38f0936f33bacedc0c0a159ffbbeee0f40bb08386915bdd0c6730349b99081ec
bis_key_03 = 38f0936f33bacedc0c0a159ffbbeee0f40bb08386915bdd0c6730349b99081ec
bis_key_source_00 = f83f386e2cd2ca32a89ab9aa29bfc7487d92b03aa8bfdee1a74c3b6e35cb7106
bis_key_source_01 = 41003049ddccc065647a7eb41eed9c5f44424edab49dfcd98777249adc9f7ca4
bis_key_source_02 = 52c2e9eb09e3ee2932a10c1fb6a0926c4d12e14b2a474c1c09cb0359f015f4e4
device_key = bd16c45b2647d842c5ee3c869e3a9607
device_key_4x = 2078900c6bb36fff1fdad57a7dd1b66e
eticket_rsa_kek = 19c8b441d318802bad63a5beda283a84
eticket_rsa_kek_source = dba451124ca0a9836814f5ed95e3125b
eticket_rsa_kekek_source = 466e57b74a447f02f321cde58f2f5535
header_kek_source = 1f12913a4acbf00d4cde3af6d523882a
header_key = aeaab1ca08adf9bef12991f369e3c567d6881e4e4a6a47a51f6e4877062d542d
header_key_source = 5a3ed84fdec0d82631f7e25d197bf5d01c9b7bfaf628183d71f64d73f150b9d2
key_area_key_application_00 = ef979e289a132c23d39c4ec5a0bba969
key_area_key_application_01 = cdedbab97b69729073dfb2440bff2c13
key_area_key_application_02 = 75716ed3b524a01dfe21456ce26c7270
key_area_key_application_03 = f428306544cf5707c25eaa8bc0583fd1
key_area_key_application_04 = 798844ec099eb6a04b26c7c728a35a4d
key_area_key_application_05 = a57c6eecc5410ada22712eb3ccbf45f1
key_area_key_application_06 = 2a60f6c4275df1770651d5891b8e73ec
key_area_key_application_07 = 32221bd6ed19b938bec06b9d36ed9e51
key_area_key_application_08 = fb20aa9e3dbf67350e86479eb431a0b3
key_area_key_application_09 = ce8d5fa79e220d5f48470e9f21be018b
key_area_key_application_0a = 38b865725adcf568a81d2db3ceaa5bcc
key_area_key_application_0b = bbddfd40a59d0ff555c0954239972213
key_area_key_application_0c = 3fee7204e21c6b0ff1373226c0c3e055
key_area_key_application_source = 7f59971e629f36a13098066f2144c30d
key_area_key_ocean_00 = b33813e4c9c4399c75fabc673ab4947b
key_area_key_ocean_01 = c54166efa8c9c0f6511fa8b580191677
key_area_key_ocean_02 = 3061ce73461e0b0409d6a33da85843c8
key_area_key_ocean_03 = 06f170025a64921c849df168e74d37f2
key_area_key_ocean_04 = dc857fd6dc1c6213076ec7b902ec5bb6
key_area_key_ocean_05 = 131d76b70bd8a60036d8218c15cb610f
key_area_key_ocean_06 = 17d565492ba819b0c19bed1b4297b659
key_area_key_ocean_07 = 37255186f7678324bf2b2d773ea2c412
key_area_key_ocean_08 = 4115c119b7bd8522ad63c831b6c816a6
key_area_key_ocean_09 = 792bfc652870cca7491d1685384be147
key_area_key_ocean_0a = dfcc9e87e61c9fba54a9b1c262d41e4d
key_area_key_ocean_0b = 66fe3107f5a6a8d8eda2459d920b07a1
key_area_key_ocean_0c = b79b6bf3d6cdc5ec10277fc07a4fec93
key_area_key_ocean_source = 327d36085ad1758dab4e6fbaa555d882
key_area_key_system_00 = 6dd02aa15b440d6231236b6677de86bc
key_area_key_system_01 = 4ab155e7f29a292037fd147592770b12
key_area_key_system_02 = b7a74adeaf89c2a198c327bdff322d7d
key_area_key_system_03 = d5aab1acd23a8aec284a316df859d377
key_area_key_system_04 = 9b44b45b37de9d14754b1d22c2ca742c
key_area_key_system_05 = 0012e957530d3dc7af34fbbe6fd44559
key_area_key_system_06 = 01744e3b0818445cd54ee9f89da43192
key_area_key_system_07 = d0d30e46f5695b875f11522c375c5a80
key_area_key_system_08 = bd06cb1b86bd5c433667470a09eb63de
key_area_key_system_09 = e19f788f658eda8bbf34a1dd2a9503a9
key_area_key_system_0a = 7070e7ff5cfe448630143a9874903c38
key_area_key_system_0b = 3fa471d4483e58b8f7756fcb64f63890
key_area_key_system_0c = 7bfd381df3369407ab1c6bdd9fabf522
key_area_key_system_source = 8745f1bba6be79647d048ba67b5fda4a
keyblob_00 = f759024f8199101dddc1ef91e6eecf37e24b95ac9272f7ae441d5d8060c843a48322d21cdd06d4fc958c68d3800eb4db939ffbec930177f77d136144ff615aa8835e811bb958deda218f8486b5a10f531b30cb9d269645ac9fc25c53fc80525e56bd3602988a9fcf06bbf99ca910ad6530791d512c9d57e17abf49220de6419bf4eca1685c1e4df77f19db7b44a985ca
keyblob_01 = bd27264ae07e979756411d0c66e679e3c50851f3e902d9c2cd1a438b948159a517ec1566c10570326ea2697ee62da46f14bb5d581bfc06fd0c9387ea33d2d4dc63e7809ba90f03dd2c7112ffbfa548951b9b8c688b5e4f2951d24a73da29c668154a5d4838dba71ee068ace83fe720e8c2a495c596f73525dc3c05994b40ad27f8c60322f75cd548b821af9162e16f76
keyblob_02 = a3d4a8e153b8e6ae6e6aef3e8f219cb4b7790f47856accc76268f9afa99a1ff8b1a72f63d1f99f480a3c1532078bb59abdd25203cfb12a38b33e9ba6a09afb6f24283b3ba76a0161230a73669ddf5493c2b7919d094fd795b484794854f71e4f4c672245d7770e29397722444d111b4229cdbf35707b70634ea8f140766e884cc580cb1e2d9aa9866ffef920010fc409
keyblob_03 = 1558f525ae8c5be9243fb6d8a8b0a8ee0e886a59035668740a936619b7a5c83e821198b171d18e51445054df68688e45703b936818a827d8e540dd6bef2e11ec9ddc6cfe5fc736dd769b9f6e0a23a62e2e5f49e86143646a04ec3a23f828373a336a5c224a91f8a0c6c6a7b5844dd6415804209f83c943aeca9cfd856db6bd4ec32009c8cb268ed053052c9237dfd8bc
keyblob_04 = 9fbeb1957fc1629e08b753a9086d6e01ffb4f11466b7417e3fa7f5f1efb754406704fd75afaf91a408a0b524c1fc80d36c2046fa4757412efe4c11e382f72e8a10d90ed580017d9deb87af2549b6b02661af48ff94f6072c0fef7fc2833b8bdae503898e2e927ac0663e8b6391dd4f1d685313935e2c48ece7d177c88bc9c883ede36c3677495784b838d7265c6ba7a1
keyblob_05 = 94a92da1d73c2b3e165c891ced5607fc6628ca2a0654f3fbc05711c063377c6e9c96a9d0192e530dd510e4fd41aa62ef4213c5f6e059e7e21db098a9b22d1e6c29bee148aaef15c52549d9165de96e85b0d029ecdc5843e2f32cb18be707eec61909cf3385d45bc2a4c8d76e9bfad5a40c4b92dcb982aa50d474897ac9ebb5351a7015dcc277a08f1214ad41384d7941
keyblob_key_00 = 839944c8a38df6791020b38147e906b0
keyblob_key_01 = b9e6fbde828b5f42c897ade8fd14c625
keyblob_key_02 = b6988a0795d294ef522908692d5db7ca
keyblob_key_03 = 0e57d7777171d125d3fe3af5b397d009
keyblob_key_04 = b55a282d698fabeb4e03c67ff2026bc5
keyblob_key_05 = fdb542c1f1bdf134ec20b1fda02bc9e1
keyblob_key_source_00 = df206f594454efdc7074483b0ded9fd3
keyblob_key_source_01 = 0c25615d684ceb421c2379ea822512ac
keyblob_key_source_02 = 337685ee884aae0ac28afd7d63c0433b
keyblob_key_source_03 = 2d1f4880edeced3e3cf248b5657df7be
keyblob_key_source_04 = bb5a01f988aff5fc6cff079e133c3980
keyblob_key_source_05 = d8cce1266a353fcc20f32d3b517de9c0
keyblob_mac_key_00 = 604422526723e541a849fa4c18660e0b
keyblob_mac_key_01 = 279481456b1dc259d35599e6392e01e5
keyblob_mac_key_02 = dbbfb8096b676c2a54b5d9c61b423a94
keyblob_mac_key_03 = 48b7aef6d9b1edb132b8901a245a7750
keyblob_mac_key_04 = 544c082e9f8602c736dc0732d4319f88
keyblob_mac_key_05 = a540ec8ba84bd31eaaa9ce9f95226875
keyblob_mac_key_source = 59c7fb6fbe9bbe87656b15c0537336a5
mariko_master_kek_source_05 = 77605ad2ee6ef83c3f72e2599dac5e56
mariko_master_kek_source_06 = 1e80b8173ec060aa11be1a4aa66fe4ae
mariko_master_kek_source_07 = 940867bd0a00388411d31adbdd8df18a
mariko_master_kek_source_08 = 5c24e3b8b4f700c23cfd0ace13c3dc23
mariko_master_kek_source_09 = 8669f00987c805aeb57b4874de62a613
mariko_master_kek_source_0a = 0e440cedb436c03faa1daebf62b10982
mariko_master_kek_source_0b = e541acecd1a7d1abed0377f127caf8f1
mariko_master_kek_source_0c = 52719bdfa78b61d8d58511e48e4f74c6
master_kek_00 = f759024f8199101dddc1ef91e6eecf37
master_kek_01 = bd27264ae07e979756411d0c66e679e3
master_kek_02 = a3d4a8e153b8e6ae6e6aef3e8f219cb4
master_kek_03 = 1558f525ae8c5be9243fb6d8a8b0a8ee
master_kek_04 = 9fbeb1957fc1629e08b753a9086d6e01
master_kek_05 = 94a92da1d73c2b3e165c891ced5607fc
master_kek_08 = e42f1ec8002043d746575ae6dd9f283f
master_kek_09 = cec2885fbeef5f6a989db84a4cc4b393
master_kek_0a = dd1a730232522b5cb4590cd43869ab6a
master_kek_0b = fc6f0c891d42710180724ed9e112e72a
master_kek_0c = 43f7fc20fcec22a5b2a744790371b094
master_kek_source_06 = 374b772959b4043081f6e58c6d36179a
master_kek_source_07 = 9a3ea9abfd56461c9bf6487f5cfa095c
master_kek_source_08 = dedce339308816f8ae97adec642d4141
master_kek_source_09 = 1aec11822b32387a2bedba01477e3b67
master_kek_source_0a = 303f027ed838ecd7932534b530ebca7a
master_kek_source_0b = 8467b67f1311aee6589b19af136c807a
master_kek_source_0c = 683bca54b86f9248c305768788707923
master_key_00 = c2caaff089b9aed55694876055271c7d
master_key_01 = 54e1b8e999c2fd16cd07b66109acaaa6
master_key_02 = 4f6b10d33072af2f250562bff06b6da3
master_key_03 = 84e04ec20b9373818c540829cf147f3d
master_key_04 = cfa2176790a53ff74974bff2af180921
master_key_05 = c1dbedcebf0dd6956079e506cfa1af6e
master_key_06 = 0aa90e6330cdc12d819b3254d11a4e1e
master_key_07 = 929f86fbfe4ef7732892bf3462511b0e
master_key_08 = 23cfb792c3cb50cd715da0f84880c877
master_key_09 = 75c93b716255319b8e03e14c19dea64e
master_key_0a = 73767484c73088f629b0eeb605f64aa6
master_key_0b = 8500b14bf4766b855a26ffc614097a8f
master_key_0c = b3c503709135d4b35de31be4b0b9c0f7
master_key_source = d8a2410ac6c59001c61d6a267c513f3c
package1_key_00 = f4eca1685c1e4df77f19db7b44a985ca
package1_key_01 = f8c60322f75cd548b821af9162e16f76
package1_key_02 = c580cb1e2d9aa9866ffef920010fc409
package1_key_03 = c32009c8cb268ed053052c9237dfd8bc
package1_key_04 = ede36c3677495784b838d7265c6ba7a1
package1_key_05 = 1a7015dcc277a08f1214ad41384d7941
package2_key_00 = a35a19cb14404b2f4460d343d178638d
package2_key_01 = a0dd1eacd438610c85a191f02c1db8a8
package2_key_02 = 7e5ba2aafd57d47a85fd4a57f2076679
package2_key_03 = bf03e9889fa18f0d7a55e8e9f684323d
package2_key_04 = 09df6e361e28eb9c96c9fa0bfc897179
package2_key_05 = 444b1a4f9035178b9b1fe262462acb8e
package2_key_06 = 442cd9c21cfb8914587dc12e8e7ed608
package2_key_07 = 70c821e7d6716feb124acbac09f7b863
package2_key_08 = 8accebcc3d15a328a48365503f8369b6
package2_key_09 = f562a7c6c42e3d4d3d13ffd504d77346
package2_key_0a = 0803167ec7fc0bc753d8330e5592a289
package2_key_0b = 341db6796aa7bdb8092f7aae6554900a
package2_key_0c = 4e97dc4225d00c6ae33d49bddd17637d
package2_key_source = fb8b6a9c7900c849efd24d854d30a0c7
per_console_key_source = 4f025f0eb66d110edc327d4186c2f478
retail_specific_aes_key_source = e2d6b87a119cb880e822888a46fba195
rsa_oaep_kek_generation_source = a8ca938434127fda82cc1aa5e807b112
rsa_private_kek_generation_source = ef2cb61a56729b9157c38b9316784ddd
save_mac_kek_source = d89c236ec9124e43c82b038743f9cf1b
save_mac_key = 71a917f1bac8f4f04d732e734c90e2ec
save_mac_key_source = e4cd3d4ad50f742845a487e5a063ea1f
save_mac_sd_card_kek_source = 0489ef5d326e1a59c4b7ab8c367aab17
save_mac_sd_card_key_source = 6f645947c56146f9ffa045d595332918
sd_card_custom_storage_key_source = 370c345e12e4cefe21b58e64db52af354f2ca5a3fc999a47c03ee004485b2fd0
sd_card_kek_source = 88358d9c629ba1a00147dbe0621b5432
sd_card_nca_key_source = 5841a284935b56278b8e1fc518e99f2b67c793f0f24fded075495dca006d99c2
sd_card_save_key_source = 2449b722726703a81965e6e3ea582fdd9a951517b16e8f7f1f68263152ea296a
sd_seed = fdb479221c43741a118fb5475374d2f7
secure_boot_key = 208de9b9de94ff698d00657a6a82a973
ssl_rsa_kek = b011100660d1dccbad1b1b733afa9f95
ssl_rsa_kek_source_x = 7f5bb0847b25aa67fac84be23d7b6903
ssl_rsa_kek_source_y = 9a383bf431d0bd8132534ba964397de3
titlekek_00 = 62a24d6e6d0d0e0abf3554d259be3dc9
titlekek_01 = 8821f642176969b1a18021d2665c0111
titlekek_02 = 5d15b9b95a5739a0ac9b20f600283962
titlekek_03 = 1b3f63bcb67d4b06da5badc7d89acce1
titlekek_04 = e45c1789a69c7afbbf1a1e61f2499459
titlekek_05 = ddc67f7189f4527a37b519cb051eee21
titlekek_06 = b1532b9d38ab036068f074c0d78706ac
titlekek_07 = 81dc1b1783df268789a6a0edbf058343
titlekek_08 = 47dfe4bf0eeda88b17136b8005ab08ea
titlekek_09 = adaa785d90e1a9c182ac07bc276bf600
titlekek_0a = 42daa957c128f75bb1fda56a8387e17b
titlekek_0b = d08903363f2c8655d3de3ccf85d79406
titlekek_0c = be2682599db34caa9bc7ebb2cc7c654c
titlekek_source = 1edc7b3b60e6b4d878b81715985e629b
tsec_key = 53ec4ac7c6c32ff2abff3eeff4f84f36
tsec_root_key_02 = 4b4fbcf58e23cf4902d478b76c8048ec
</code></pre><p><code>yuzu</code>以及<code>Ryujinx</code>都需要<code>prod.keys</code>，里面包含了<code>NS</code>设备需要的<code>key</code>，需要通过<code> Hekate</code>等一些列工具生成。yuzu不需要单独安装固件，只要把key文件放好就可以启动游戏了。</p>
</li>
<li>
<p>关闭模拟器，重新打开 yuzu ，若没有弹窗，则配置成功</p>
</li>
</ul>
<h4 id="设置httpswwwjianshucompd55e015fbcb6"><a href="https://www.jianshu.com/p/d55e015fbcb6">设置</a><a hidden class="anchor" aria-hidden="true" href="#设置httpswwwjianshucompd55e015fbcb6">#</a></h4>
<p><strong>General</strong></p>
<p>确保勾选 Multicore CPU Emulation 和 Confirm exit while emulation is runing。</p>
<p>Limit Speed percent：游戏运行速度，默认即可，可加快或限速</p>
<p>Pause emulation when inbackground：退到后台模拟器暂停运行</p>
<p>Hide mouse inactivity：运行时鼠标隐藏</p>
<p>Prompt for user for game boot：游戏启动时选择哪个账户游玩</p>
<p><strong>Web</strong></p>
<p>yuzu web service：填了用户名和令牌以后可以向官网报告游戏兼容性</p>
<p>Telemetry：开了以后能让yuzu开发者查看你的使用情况，以便改善模拟器</p>
<p>Discord Presence：在discord中显示你的游戏状态</p>
<p><strong>系统</strong></p>
<p>System 页面，Language 选择 Simplified Chinese，Region 选择 China。这个设置的是系统语言，很多游戏会根据系统语言自动切换游戏内显示的语言。当然前提是游戏本身包含中文，如果游戏本身无中文只能通过打补丁的方式显示中文。</p>
<p>Custom RTC：修改系统时间，可以触发某些游戏的特定彩蛋之类的功能。</p>
<p>RNG seed：随机数种子，一般情况别改改。</p>
<p>Profile Manager：这里可以改switch用户名称、头像。可以设置多个用户</p>
<p><strong>CPU</strong></p>
<p><strong>图形</strong></p>
<ul>
<li><code>API</code>设置：支持<code>OpenGL</code>和<code>Vulkan</code>。</li>
<li><code>Use disk shader cache</code>：磁盘着色器缓存，建议开启，这样就不用每次都重新编译，而是直接从磁盘加载到内存</li>
<li><code>Use asynchronous GPU emulation</code>：<code>GPU</code>异步模拟，<code>yuzu</code>重写了<code>GPU</code>显存管理器，加速了缓存机制，使得帧数得到明显提示，同时性能提升40%-400%（来自<code>BSoD Gaming</code>的测试数据）</li>
<li><code>Use NVDEC emulation</code>：<a href="https://yuzu-emu.org/entry/yuzu-nvdec-emulation/"><code>NVDEC</code></a>是一项硬件转码技术，能减少转码期间计算密集型任务中CPU的负担，这是<code>Nvidia</code>的一个技术，有了它，过场动画的播放会畅顺很多</li>
</ul>
<p><strong>Advanced</strong></p>
<ul>
<li><code>Accuracy Level</code>：即模拟器左下角状态栏的 GPU NORMAL。是处理图形绘制精确度，开启High可能会修复一些图形错误，但是速度可能会变慢，一般选默认Normal即可</li>
<li><code>Use Vysnc (OpenGL Only)</code>：开启垂直同步</li>
<li><code>Use Fast GPU time</code>： 使用GPU加速渲染</li>
<li><code>Anisotropic Filtering</code>：是各项异性过滤，是用来处理图形纹理错误的，可以选2x-16x</li>
</ul>
<p><strong>声音</strong></p>
<p>默认。</p>
<p><strong>控制</strong></p>
<p>连接手柄，选择该设备。</p>
<h4 id="管理">管理<a hidden class="anchor" aria-hidden="true" href="#管理">#</a></h4>
<p>游戏格式分为两种，.xci 格式和 .nsp 格式。简单一点说，.xci 格式是卡带版，.nsp 格式是数字版。因此基本上所有的 DLC 基本都是 .nsp 格式，但也有 .xci 里集成了 DLC 的情况。</p>
<p><strong>添加游戏</strong></p>
<p>双击模拟器中间，添加游戏目录，游戏目录也不要有中文。添加完就可以看到游戏了。</p>
<p><strong>安装Update和DLC</strong></p>
<p>选择File -&gt;Install Files to NAND&hellip;，选中 Update和DLC文件，Update 安装最新就行，DLC 需要全部安装（可以不按顺序）。</p>
<p><strong>安装 Mod</strong></p>
<p>Mod 用于修改游戏，如解决一些bug以及优化性能等。右键单击要为其添加模组的游戏。然后将整个mod文件夹粘贴到那里。你可以从 <a href="https://github.com/yuzu-emu/yuzu/wiki/Switch-Mods">Switch Mods</a> 获得一些基本的 yuzu 模组。</p>
<p>注意：您可以通过右键单击游戏并单击属性来检查您拥有的游戏模组。</p>
<p><strong>放入着色器缓存</strong></p>
<p>放入着色器缓存（shader cache）可以明显提升游戏的流畅性，建议找找<a href="https://emulation.gametechwiki.com/index.php/Shader_caches">别人的着色器缓存</a>。</p>
<p>具体放入步骤：右键某个游戏，选择打开可转移着色器缓存，即可弹出缓存所在文件夹，然后放入你下载的别人的缓存就行了，比如 vulkan.bin 和 opengl.bin</p>
<h3 id="rubickhttpsgithubcomrubickcenterrubick"><a href="https://github.com/rubickCenter/rubick">rubick</a><a hidden class="anchor" aria-hidden="true" href="#rubickhttpsgithubcomrubickcenterrubick">#</a></h3>
<p>基于 electron 的开源工具箱，自由集成丰富插件。</p>
<h4 id="utoolshttpsutools"><a href="https://u.tools/">uTools</a><a hidden class="anchor" aria-hidden="true" href="#utoolshttpsutools">#</a></h4>
<p>uTools 是一个极简、插件化的现代桌面软件，通过自由选配丰富的插件，打造得心应手的工具集合。</p>
<h4 id="alberthttpswwwcnblogscomkeatonlaop13252483html"><a href="https://www.cnblogs.com/keatonlao/p/13252483.html">Albert</a><a hidden class="anchor" aria-hidden="true" href="#alberthttpswwwcnblogscomkeatonlaop13252483html">#</a></h4>
<p>Linux 下的快捷启动工具。</p>
<table>
<thead>
<tr>
<th>应用 / 功能</th>
<th>查找应用</th>
<th>查找文件</th>
<th>查找网页</th>
<th>扩展程序</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/albertlauncher/albert">Albert</a></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://launchpad.net/synapse-project">Synapse</a></td>
<td>✓</td>
<td>✓</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://u.tools/">Utools</a></td>
<td>✓</td>
<td>✗</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td><a href="https://ulauncher.io/">Ulauncher</a></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td><a href="https://github.com/cboxdoerfer/fsearch">FSearch</a></td>
<td>✗</td>
<td>✓</td>
<td>✗</td>
<td>✗</td>
</tr>
</tbody>
</table>
<p>简单说，Albert 最好用，Ulauncher 综合能力强，而 FSearch 严重偏科。</p>
<h3 id="calibrehttpscalibre-ebookcom"><a href="https://calibre-ebook.com/">Calibre</a><a hidden class="anchor" aria-hidden="true" href="#calibrehttpscalibre-ebookcom">#</a></h3>
<p><strong>calibre is a powerful and easy to use e-book manager</strong>. Users say it’s <em>outstanding</em> and a <em>must-have</em>. It’ll allow you to do nearly everything and it takes things a step beyond normal e-book software. It’s also <strong>completely free</strong> and <em>open source</em> and great for both <strong>casual users</strong> and computer experts.</p>
<p><a href="https://fedingo.com/how-to-convert-epub-to-pdf-in-linux/"><strong>Convert Epub to PDF</strong></a></p>
<p>Open terminal and run the following command to install Calibre.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt update
$ sudo apt install calibre
</code></pre></div><p>Calibre software is referred to as ebook-convert command. Here is the command to convert epub file to pdf file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ebook-convert &lt;file&gt;.epub &lt;file&gt;.pdf
</code></pre></div><p>If your PDF doesn’t appear to be properly readable, try converting the epub file again using –enable-heuristics option.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ebook-convert /home/ubuntu/test.epub /home/ubuntu/test.pdf --enable-heuristics
</code></pre></div><h4 id="gnome-bookshttpswikignomeorgappsbooks"><a href="https://wiki.gnome.org/Apps/Books">gnome-books</a><a hidden class="anchor" aria-hidden="true" href="#gnome-bookshttpswikignomeorgappsbooks">#</a></h4>
<p>GNOME Books is a simple application to access and organize your ebooks. It is meant to be a simple and elegant replacement for using a file manager to deal with ebooks. The app supports comic books and ePub books.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install gnome-books
</code></pre></div><p>e-book 需放在特定的目录，gnome-boos 自动扫描，在其他目录不扫描，而且也无法用 <code>gnome-books file</code> 方式打开，例如 ~/Public 目录。</p>
<h3 id="ventoyhttpswwwventoynetcnindexhtml"><a href="https://www.ventoy.net/cn/index.html">Ventoy</a><a hidden class="anchor" aria-hidden="true" href="#ventoyhttpswwwventoynetcnindexhtml">#</a></h3>
<p>简单来说，Ventoy是一个制作可启动U盘的开源工具。</p>
<p>有了Ventoy你就无需反复地格式化U盘，你只需要把 ISO/WIM/IMG/VHD(x)/EFI 等类型的文件直接拷贝到U盘里面就可以启动了，无需其他操作。</p>
<h4 id="balenaetcherhttpsgithubcombalena-ioetcher"><a href="https://github.com/balena-io/etcher">balenaEtcher</a><a hidden class="anchor" aria-hidden="true" href="#balenaetcherhttpsgithubcombalena-ioetcher">#</a></h4>
<p>Supported Operating Systems</p>
<ul>
<li>Linux (most distros)</li>
<li>macOS 10.10 (Yosemite) and later</li>
<li>Microsoft Windows 7 and later</li>
</ul>
<h4 id="unetbootinhttpsgithubcomunetbootinunetbootin"><a href="https://github.com/unetbootin/unetbootin">UNetbootin</a><a hidden class="anchor" aria-hidden="true" href="#unetbootinhttpsgithubcomunetbootinunetbootin">#</a></h4>
<p>UNetbootin installs Linux/BSD distributions to a partition or USB drive</p>
<h4 id="woeusb-nghttpsgithubcomwoeusbwoeusb-ng"><a href="https://github.com/WoeUSB/WoeUSB-ng">WoeUSB-ng</a><a hidden class="anchor" aria-hidden="true" href="#woeusb-nghttpsgithubcomwoeusbwoeusb-ng">#</a></h4>
<p>WoeUSB-ng is a simple tool that enable you to create your own usb stick windows installer from an iso image or a real DVD. This is a rewrite of original WoeUSB.</p>
<h3 id="timeshifthttpsgithubcomteejee2008timeshift"><a href="https://github.com/teejee2008/timeshift">Timeshift</a><a hidden class="anchor" aria-hidden="true" href="#timeshifthttpsgithubcomteejee2008timeshift">#</a></h3>
<p>System restore tool for Linux.</p>
<h3 id="todoisthttpssnapcraftioinstalltodoistubuntuinstall"><a href="https://snapcraft.io/install/todoist/ubuntu#install">Todoist</a><a hidden class="anchor" aria-hidden="true" href="#todoisthttpssnapcraftioinstalltodoistubuntuinstall">#</a></h3>
<h3 id="plankhttpslaunchpadnetplank"><a href="https://launchpad.net/plank">Plank</a><a hidden class="anchor" aria-hidden="true" href="#plankhttpslaunchpadnetplank">#</a></h3>
<p>Plank is meant to be the simplest dock on the planet.</p>
<h4 id="latte-dock">latte-dock<a hidden class="anchor" aria-hidden="true" href="#latte-dock">#</a></h4>
<h3 id="steamhttpsstoresteampoweredcom"><a href="https://store.steampowered.com/">Steam</a><a hidden class="anchor" aria-hidden="true" href="#steamhttpsstoresteampoweredcom">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install steam
</code></pre></div><h3 id="yacreaderhttpsyacreadercom"><a href="https://yacreader.com/">YACReader</a><a hidden class="anchor" aria-hidden="true" href="#yacreaderhttpsyacreadercom">#</a></h3>
<h4 id="tachideskhttpsgithubcomsuwayomitachidesk-server"><a href="https://github.com/Suwayomi/Tachidesk-Server">Tachidesk</a><a hidden class="anchor" aria-hidden="true" href="#tachideskhttpsgithubcomsuwayomitachidesk-server">#</a></h4>
<p><a href="https://hanjingxue-boling.github.io/Whiteboard/essay/memo/Tachidesk-quick-setup/">快速配置指南</a>：</p>
<p>Tachidesk 是一个免费的开源漫画阅读器，可运行为 Tachiyomi 构建的扩展。Tachidesk 是独立的，但与 Tachiyomi 兼容的开源软件，它不是 Tachiyomi 的下游分支。你可以在任何支持 Java 的设备上运行这个软件。</p>
<p>如果你熟悉 Tachiyomi，那你也会对 Tachidesk 的用户界面倍感熟悉。</p>
<p>Tachidesk 主要分为两部分：Tachidesk-server （后端）和 Tachidesk 图形化前端。Tachidesk 有多个图形化前端。直接从下文的 GitHub 链接下载的文件会自动集成一个 Tachidesk-WebUI。</p>
<h3 id="hakunekohttpsgithubcommanga-downloadhakuneko"><a href="https://github.com/manga-download/hakuneko">hakuneko</a><a hidden class="anchor" aria-hidden="true" href="#hakunekohttpsgithubcommanga-downloadhakuneko">#</a></h3>
<h4 id="work_crawlerhttpsgithubcomkanasimiwork_crawler"><a href="https://github.com/kanasimi/work_crawler">work_crawler</a><a hidden class="anchor" aria-hidden="true" href="#work_crawlerhttpsgithubcomkanasimiwork_crawler">#</a></h4>
<p>Download comics novels</p>
<h3 id="dingtalkhttpsgithubcomnashaofudingtalk"><a href="https://github.com/nashaofu/dingtalk">dingtalk</a><a hidden class="anchor" aria-hidden="true" href="#dingtalkhttpsgithubcomnashaofudingtalk">#</a></h3>
<p>钉钉桌面版，基于electron和钉钉网页版开发</p>
<h3 id="howdyhttpsgithubcomboltgolthowdy"><a href="https://github.com/boltgolt/howdy">howdy</a><a hidden class="anchor" aria-hidden="true" href="#howdyhttpsgithubcomboltgolthowdy">#</a></h3>
<p>Windows Hello™ style facial authentication for Linux</p>
<h3 id="向日葵httpssunloginoraycom"><a href="https://sunlogin.oray.com/">向日葵</a><a hidden class="anchor" aria-hidden="true" href="#向日葵httpssunloginoraycom">#</a></h3>
<p>向日葵远程控制软件是一款免费的集远程控制电脑手机、远程桌面连接、远程开机、远程管理、支持内网穿透的一体化远程控制管理工具软件。</p>
<h3 id="keepassxchttpskeepassxcorg"><a href="https://keepassxc.org/">KeePassXC</a><a hidden class="anchor" aria-hidden="true" href="#keepassxchttpskeepassxcorg">#</a></h3>
<h3 id="words-pickerhttpsgithubcomziqiangxuwords-picker"><a href="https://github.com/ziqiangxu/words-picker">words-picker</a><a hidden class="anchor" aria-hidden="true" href="#words-pickerhttpsgithubcomziqiangxuwords-picker">#</a></h3>
<p>有OCR功能的开源取词软件</p>
<h3 id="copyqhttpsgithubcomhlukcopyq"><a href="https://github.com/hluk/CopyQ">CopyQ</a><a hidden class="anchor" aria-hidden="true" href="#copyqhttpsgithubcomhlukcopyq">#</a></h3>
<p>Clipboard manager with advanced features</p>
<h3 id="xnviewmphttpswwwxnviewcomenxnviewmp"><a href="https://www.xnview.com/en/xnviewmp/">XnViewMP</a><a hidden class="anchor" aria-hidden="true" href="#xnviewmphttpswwwxnviewcomenxnviewmp">#</a></h3>
<p>图片浏览器。速度快，并且可以进行一些简单的图片操作，比如图片压缩、图片格式转换、图片剪裁等等。</p>
<h3 id="zealhttpszealdocsorg"><a href="https://zealdocs.org/">Zeal</a><a hidden class="anchor" aria-hidden="true" href="#zealhttpszealdocsorg">#</a></h3>
<p>离线 API 文档查找阅读工具。</p>
<h3 id="xmindhttpswwwxmindnet"><a href="https://www.xmind.net/">XMind</a><a hidden class="anchor" aria-hidden="true" href="#xmindhttpswwwxmindnet">#</a></h3>
<p>XMind 是一款全功能的思维导图和头脑风暴软件。像大脑的瑞士军刀一般，助你理清思路，捕捉创意。已成为上亿用户喜爱的全平台效率工具。</p>
<p><a href="https://www.jianshu.com/p/898c8972b03c"><strong>完全免费的脑图软件推荐</strong></a></p>
<p>如果平时没有导出需求的话, 可以选用xmind和mindmaster, 如果突然需要导出pdf了, 可以将xmind和mindmaster的文件导出为mindmanager文件, 然后导入到freeplane中, 稍作调整与美化, 然后导出成pdf就可以了.</p>
<h2 id="cli-utilities">CLI Utilities<a hidden class="anchor" aria-hidden="true" href="#cli-utilities">#</a></h2>
<h3 id="postgresql">PostgreSQL<a hidden class="anchor" aria-hidden="true" href="#postgresql">#</a></h3>
<p>是 macOS Server 的默认数据库。</p>
<h4 id="安装-5">安装<a hidden class="anchor" aria-hidden="true" href="#安装-5">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install postgresql postgresql-contrib
</code></pre></div><p>postgresql-contrib 或者说 contrib 包，包含一些不属于 PostgreSQL 核心包的实用工具和功能。</p>
<p>通过 service 命令，你可以启动、关闭或重启 postgresql。输入 service postgresql 并按回车将列出所有选项</p>
<p>默认情况下，PostgreSQL 会创建一个拥有所权限的特殊用户 postgres。要实际使用 PostgreSQL，你必须先登录该账户，使用 psql 来启动 PostgreSQL Shell：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo -i -u postgres <span style="color:#75715e"># sudo -login -user postgres</span>
$ psql
</code></pre></div><p>使用 <code>\l</code> 用于查看已经存在的数据库</p>
<pre tabindex="0"><code>postgres=# \l
</code></pre><p>使用 <code>\c + 数据库名</code> 来进入数据库</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">postgres<span style="color:#f92672">=</span><span style="color:#75715e"># \c shop</span>
</code></pre></div><p><code>\d</code> 查看表格信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">postgres<span style="color:#f92672">=</span><span style="color:#75715e"># \d [TableName]</span>
</code></pre></div><h4 id="查找配置文件">查找配置文件<a hidden class="anchor" aria-hidden="true" href="#查找配置文件">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> name, setting <span style="color:#66d9ef">from</span> pg_settings <span style="color:#66d9ef">where</span> category<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;File Locations&#39;</span> ;
</code></pre></div><h4 id="questions-1">Questions<a hidden class="anchor" aria-hidden="true" href="#questions-1">#</a></h4>
<p><a href="https://stackoverflow.com/questions/18664074/getting-error-peer-authentication-failed-for-user-postgres-when-trying-to-ge"><strong>psql: error: FATAL:  Peer authentication failed for user &ldquo;postgres&rdquo;</strong></a></p>
<p>psql的连接建立于Unix Socket上默认使用peer authentication（对等体认证；对等实体认证），所以必须要用和数据库用户相同的系统用户进行登录。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># su - postgres </span>
<span style="color:#75715e"># psql</span>
</code></pre></div><p>或者将peer authentiction 改为 md5，需先做上面步骤，更改密码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">postgres<span style="color:#f92672">=</span><span style="color:#75715e"># ALTER USER db_user with password &#39;db_password&#39;;</span>
$ find / -name <span style="color:#e6db74">&#39;pg_hba.conf&#39;</span> 2&gt;/dev/null
$ sudo vi /etc/postgresql/12/main/postgresql.conf
local   all          postgres          md5
$ systemctl restart postgresql.service
$ psql -U postgres -d shop
</code></pre></div><h3 id="ansiblehttpsansible-tranreadthedocsioenlatestindexhtml"><a href="https://ansible-tran.readthedocs.io/en/latest/index.html">Ansible</a><a hidden class="anchor" aria-hidden="true" href="#ansiblehttpsansible-tranreadthedocsioenlatestindexhtml">#</a></h3>
<p>安装Ansible之后,不需要启动或运行一个后台进程,或是添加一个数据库.只要在一台电脑(可以是一台笔记本)上安装好,就可以通过这台电脑管理一组远程的机器.在远程被管理的机器上,不需要安装运行任何软件,因此升级Ansible版本不会有太多问题.</p>
<h3 id="fdupeshttpsaskubuntucomquestions3865how-to-find-and-delete-duplicate-files"><a href="https://askubuntu.com/questions/3865/how-to-find-and-delete-duplicate-files">fdupes</a><a hidden class="anchor" aria-hidden="true" href="#fdupeshttpsaskubuntucomquestions3865how-to-find-and-delete-duplicate-files">#</a></h3>
<p>You can call it like <code>fdupes -r /dir/ect/ory</code> and it will print out a list of dupes. fdupes has also a <a href="http://netdial.caribe.net/~adrian2/fdupes.html">simple Homepage</a> and a <a href="http://en.wikipedia.org/wiki/Fdupes">Wikipedia article</a>, which lists some more programs.</p>
<h4 id="digikamhttpswwwdigikamorg"><a href="https://www.digikam.org/">digiKam</a><a hidden class="anchor" aria-hidden="true" href="#digikamhttpswwwdigikamorg">#</a></h4>
<p>可用于查找重复相片，然后根据需要删除重复内容。</p>
<h3 id="bypyhttpscdnjsdelivrnetghhoutianzebypymaster"><a href="https://cdn.jsdelivr.net/gh/houtianze/bypy@master/">bypy</a><a hidden class="anchor" aria-hidden="true" href="#bypyhttpscdnjsdelivrnetghhoutianzebypymaster">#</a></h3>
<p><code>bypy info</code> 认证特别慢，而授权码又只有10分钟，导致后面授权码过期 Heroku server 认证失败失败。</p>
<p>如此，可以通过手动认证。</p>
<ul>
<li>
<p>通过 <code>bypy -dv</code> 查看详细输出，得到 Full URL，如 <code>https://bypyoauth.herokuapp.com/auth?code=...&amp;bypy_version=1.7.2&amp;redirect_uri=oob</code>，在浏览器中打开，获得token。</p>
</li>
<li>
<p>将其放在 <code>~/.bypy/bypy.json</code> 中。</p>
</li>
</ul>
<p>源码仓库也有<a href="https://cdn.jsdelivr.net/gh/houtianze/bypy@master/bypy/test/configdir/">示例</a>。</p>
<p>我下载一个大文件，总共12G左右，已用了两个晚上，中途没关（由于不是立马就要的东西，就用时间换金钱了），一次看进度时，Terminal 就卡退了，重新运行后，bypy会继续上次下载，而不是重新开始（这样话太可怕了）。</p>
<h3 id="frphttpsgofrporg"><a href="https://gofrp.org/">FRP</a><a hidden class="anchor" aria-hidden="true" href="#frphttpsgofrporg">#</a></h3>
<p>frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p>
<p><strong><a href="http://www.senra.me/tag/%e5%86%85%e7%bd%91%e7%a9%bf%e9%80%8f/">其他内网穿透工具</a></strong></p>
<ul>
<li><a href="https://github.com/inconshreveable/ngrok">ngrok</a></li>
<li><a href="https://github.com/zerotier/ZeroTierOne">ZeroTier</a></li>
<li><a href="https://github.com/ntop/n2n">N2N</a></li>
<li><a href="https://github.com/vzex/dog-tunnel">Dog Tunnel</a></li>
<li><a href="https://github.com/gsliepen/tinc">Tinc</a></li>
</ul>
<h3 id="git">Git<a hidden class="anchor" aria-hidden="true" href="#git">#</a></h3>
<h4 id="sync-repos">sync-repos<a hidden class="anchor" aria-hidden="true" href="#sync-repos">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/bash
</span><span style="color:#75715e"></span>TIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>date <span style="color:#e6db74">&#39;+%Y%m%d%H%M%S&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
SAMATOMO_SOURCE<span style="color:#f92672">=</span>$HOME/Documents/SakamotoKuromeSource
SAKAMOTO_PUBLIC<span style="color:#f92672">=</span>$SAMATOMO_SOURCE/public
VNOTEBOOK<span style="color:#f92672">=</span>$HOME/Documents/vNotebook


<span style="color:#66d9ef">function</span> Git_Sync<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  cd $1
  git pull
  echo <span style="color:#e6db74">&#39;#Ignore files larger than 100MB&#39;</span>
  cat .gitignore_default &gt; .gitignore
  find . -size +100M | sed <span style="color:#e6db74">&#39;s|^./||g&#39;</span> | cat &gt;&gt; .gitignore
  git add .
  git commit -m <span style="color:#e6db74">&#34;Update-</span><span style="color:#e6db74">${</span>TIME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
  git push -v
  echo <span style="color:#e6db74">&#39;&#39;</span>
  echo <span style="color:#e6db74">&#39;&#39;</span>
<span style="color:#f92672">}</span>


<span style="color:#66d9ef">function</span> Sync_All<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  echo <span style="color:#e6db74">&#39;### PUSH SAMATOMO_SOURCE ###&#39;</span>
  Git_Sync $SAMATOMO_SOURCE

  echo <span style="color:#e6db74">&#39;### PUSH SAKAMOTO_PUBLIC ###&#39;</span>
  rm -rf $SAKAMOTO_PUBLIC/*
  hugo
  Git_Sync $SAKAMOTO_PUBLIC

  echo <span style="color:#e6db74">&#39;### PUSH vNotebook ###&#39;</span>
  Git_Sync $VNOTEBOOK
<span style="color:#f92672">}</span>

Sync_All

exit <span style="color:#ae81ff">0</span>
</code></pre></div><ul>
<li>A collection of useful <a href="https://github.com/github/gitignore">.gitignore</a> templates</li>
<li><a href="https://github.com/sr320/course-fish546-2015/issues/43">Ignore files &gt;100MB in your Git repos</a></li>
<li><a href="https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-large-files-on-github">About large files on GitHub</a></li>
</ul>
<h4 id="github-desktophttpsdesktopgithubcom"><a href="https://desktop.github.com/">GitHub Desktop</a><a hidden class="anchor" aria-hidden="true" href="#github-desktophttpsdesktopgithubcom">#</a></h4>
<p>Focus on what matters instead of fighting with Git. Whether you&rsquo;re new to Git or a seasoned user, GitHub Desktop simplifies your development workflow.</p>
<h4 id="github520httpsgithubcom521xueweihangithub520"><a href="https://github.com/521xueweihan/GitHub520">GitHub520</a><a hidden class="anchor" aria-hidden="true" href="#github520httpsgithubcom521xueweihangithub520">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># GitHub520 Host Start</span>
140.82.113.26                 alive.github.com
140.82.113.26                 live.github.com
185.199.108.154               github.githubassets.com
140.82.112.22                 central.github.com
185.199.108.133               desktop.githubusercontent.com
185.199.108.153               assets-cdn.github.com
185.199.108.133               camo.githubusercontent.com
185.199.108.133               github.map.fastly.net
199.232.69.194                github.global.ssl.fastly.net
140.82.114.4                  gist.github.com
185.199.108.153               github.io
140.82.113.4                  github.com
192.0.66.2                    github.blog
140.82.114.5                  api.github.com
185.199.108.133               raw.githubusercontent.com
185.199.108.133               user-images.githubusercontent.com
185.199.108.133               favicons.githubusercontent.com
185.199.108.133               avatars5.githubusercontent.com
185.199.108.133               avatars4.githubusercontent.com
185.199.108.133               avatars3.githubusercontent.com
185.199.108.133               avatars2.githubusercontent.com
185.199.108.133               avatars1.githubusercontent.com
185.199.108.133               avatars0.githubusercontent.com
185.199.108.133               avatars.githubusercontent.com
140.82.114.10                 codeload.github.com
52.217.201.185                github-cloud.s3.amazonaws.com
54.231.132.81                 github-com.s3.amazonaws.com
52.217.225.9                  github-production-release-asset-2e65be.s3.amazonaws.com
52.217.161.97                 github-production-user-asset-6210df.s3.amazonaws.com
52.216.134.35                 github-production-repository-file-5c1aeb.s3.amazonaws.com
185.199.108.153               githubstatus.com
64.71.144.202                 github.community
23.100.27.125                 github.dev
140.82.112.22                 collector.github.com
13.107.42.16                  pipelines.actions.githubusercontent.com
185.199.108.133               media.githubusercontent.com
185.199.108.133               cloud.githubusercontent.com
185.199.108.133               objects.githubusercontent.com


<span style="color:#75715e"># Update time: 2022-03-19T14:06:28+08:00</span>
<span style="color:#75715e"># Update url: https://raw.hellogithub.com/hosts</span>
<span style="color:#75715e"># Star me: https://github.com/521xueweihan/GitHub520</span>
<span style="color:#75715e"># GitHub520 Host End</span>
</code></pre></div><h3 id="libguestfs">libguestfs<a hidden class="anchor" aria-hidden="true" href="#libguestfs">#</a></h3>
<p>libguestfs 支持几乎所有类型的磁盘镜像。</p>
<p>在基于 Debian 的系统上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ apt-get install libguestfs-tools
</code></pre></div><p>我们可以像下面这样挂载一个 qcow2 格式的磁盘镜像：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ guestmount -a /path/to/qcow2/image -m &lt;device&gt; /path/to/mount/point
</code></pre></div><p>要卸载它，则执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ guestunmount qcow2_mount_poin
</code></pre></div><h3 id="oracle-jdk">Oracle JDK<a hidden class="anchor" aria-hidden="true" href="#oracle-jdk">#</a></h3>
<ul>
<li>
<p>解压缩到目录</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tar -zxv -f jdk-7u60-linux-x64.gz -C dir
</code></pre></div></li>
<li>
<p>修改环境变量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi ~/.bashrc
export JAVA_HOME<span style="color:#f92672">=</span>/usr/lib/jvm/jdk1.7.0_60 <span style="color:#75715e"># 这里换成自己解压的jdk 目录</span>
export JRE_HOME<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>JAVA_HOME<span style="color:#e6db74">}</span>/jre
export CLASSPATH<span style="color:#f92672">=</span>.:<span style="color:#e6db74">${</span>JAVA_HOME<span style="color:#e6db74">}</span>/lib:<span style="color:#e6db74">${</span>JRE_HOME<span style="color:#e6db74">}</span>/lib
export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>JAVA_HOME<span style="color:#e6db74">}</span>/bin:$PATH
</code></pre></div></li>
<li>
<p>使环境变量生效</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ source ~/.bashrc
</code></pre></div></li>
</ul>
<h3 id="snapper">Snapper<a hidden class="anchor" aria-hidden="true" href="#snapper">#</a></h3>
<p>Snapper 是一个由 openSUSE 的 Arvin Schnell 开发的工具，用于管理 Btrfs 子卷和 LVM 精简配置(thin-provisioned)卷。它可以创建和比较快照，在快照间回滚，并支持自动按时间序列创建快照。</p>
<p>列出子卷列表</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo btrfs subvolume list -p /
ID <span style="color:#ae81ff">256</span> gen <span style="color:#ae81ff">7746</span> parent <span style="color:#ae81ff">5</span> top level <span style="color:#ae81ff">5</span> path @
ID <span style="color:#ae81ff">258</span> gen <span style="color:#ae81ff">7746</span> parmount -n -o remount,rw /ent <span style="color:#ae81ff">5</span> top level <span style="color:#ae81ff">5</span> path @home
</code></pre></div><p>安装 snapper</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install snapper snapper-gui
</code></pre></div><p>创建配置文件，启用自动快照</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo snapper -c root create-config /
$ sudo snapper -c home create-config /home
</code></pre></div><p>Snapshots on boot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo systemctl status snapper-boot.timer
</code></pre></div><p>管理 snapshot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo snapper-gui
</code></pre></div><h4 id="grub-btrfshttpsgithubcomantyneagrub-btrfs"><a href="https://github.com/Antynea/grub-btrfs">grub-btrfs</a><a hidden class="anchor" aria-hidden="true" href="#grub-btrfshttpsgithubcomantyneagrub-btrfs">#</a></h4>
<p><a href="https://wiki.archlinux.org/title/btrfs#Booting_into_snapshots">Booting into snapshots</a>.</p>
<p>Include btrfs snapshots at boot options. (Grub menu)</p>
<h3 id="fail2banhttpszhuanlanzhihucomp33546122"><a href="https://zhuanlan.zhihu.com/p/33546122">Fail2Ban</a><a hidden class="anchor" aria-hidden="true" href="#fail2banhttpszhuanlanzhihucomp33546122">#</a></h3>
<p><a href="https://github.com/fail2ban/fail2ban">Fail2Ban</a> 是一款入侵防御软件，可以保护服务器免受暴力攻击。 它是用 Python 编程语言编写的。 Fail2Ban 基于auth 日志文件工作，默认情况下它会扫描所有 auth 日志文件，如 <code>/var/log/auth.log</code>、<code>/var/log/apache/access.log</code> 等，并禁止带有恶意标志的IP，比如密码失败太多，寻找漏洞等等标志。</p>
<p>通常，Fail2Ban 用于更新防火墙规则，用于在指定的时间内拒绝 IP 地址。 它也会发送邮件通知。 Fail2Ban 为各种服务提供了许多过滤器，如 ssh、apache、nginx、squid、named、mysql、nagios 等。</p>
<p>Fail2Ban 能够降低错误认证尝试的速度，但是它不能消除弱认证带来的风险。 这只是服务器防止暴力攻击的安全手段之一。</p>
<h3 id="syncthinghttpszhuanlanzhihucomp69267020"><a href="https://zhuanlan.zhihu.com/p/69267020">Syncthing</a><a hidden class="anchor" aria-hidden="true" href="#syncthinghttpszhuanlanzhihucomp69267020">#</a></h3>
<p><a href="https://syncthing.net/">Syncthing</a>是一款开源免费跨平台的文件同步工具，是基于<strong>P2P技术</strong>实现设备间的文件同步，所以它的同步是<strong>去中心化</strong>的，即你并不需要一个服务器，故不需要担心这个中心的服务器给你带来的种种限制，而且类似于torrent协议，参与同步的设备越多，同步的速度越快。针对<strong>隐私</strong>问题，Syncthing软件只会将数据存储于个人信任的设备上，不会存储到服务器上。设备之间的通信均通过TLS进行，Syncthing还使用了完全正向保密技术来进一步保障你的数据安全。对于处于<strong>不同局域网之中</strong>的设备之间的文件同步，Syncthing也提供了支持。</p>
<h3 id="masscanhttpscloudtencentcomdeveloperarticle1707983"><a href="https://cloud.tencent.com/developer/article/1707983">masscan</a><a hidden class="anchor" aria-hidden="true" href="#masscanhttpscloudtencentcomdeveloperarticle1707983">#</a></h3>
<p><a href="https://github.com/robertdavidgraham/masscan">Masscan</a>号称是最快的互联网端口扫描器，最快可以在六分钟内扫遍互联网。</p>
<h3 id="imagemagickhttpswwwimagemagickorgscriptindexphp"><a href="https://www.imagemagick.org/script/index.php">ImageMagick</a><a hidden class="anchor" aria-hidden="true" href="#imagemagickhttpswwwimagemagickorgscriptindexphp">#</a></h3>
<p>Use ImageMagick to create, edit, compose, or convert digital images. It can read and write images in a variety of formats (over 200) including PNG, JPEG, GIF, WebP, HEIC, SVG, PDF, DPX, EXR and TIFF. ImageMagick can resize, flip, mirror, rotate, distort, shear and transform images, adjust image colors, apply various special effects, or draw text, lines, polygons, ellipses and Bézier curves.</p>
<p><a href="http://www.fmwconcepts.com/imagemagick/index.php"><strong>Fred&rsquo;s ImageMagick Scripts</strong></a></p>
<h3 id="p7ziphttpswww7-ziporg"><a href="https://www.7-zip.org/">p7zip</a><a hidden class="anchor" aria-hidden="true" href="#p7ziphttpswww7-ziporg">#</a></h3>
<p><strong>7-Zip</strong> is a file archiver with a high compression ratio.</p>
<p>p7zip 是 <a href="https://en.wikipedia.org/wiki/7zip">7-Zip</a> 的 <a href="https://en.wikipedia.org/wiki/POSIX">POSIX</a> 系统移植，支持 Linux。</p>
<p><strong>警告：</strong> 不要将7z格式用于备份目的，因为它不会保存文件的所有者/组。有关更多详细信息，请参见<a href="https://man.archlinux.org/man/7z.1">7z(1)</a>。</p>
<p>添加文件或目录至已有的存档（或创建一个新的存档）：</p>
<pre tabindex="0"><code>$ 7z a &lt;archive name&gt; &lt;file name&gt;
</code></pre><p>也可以通过参数-p设置密码，并通过标志-mhe = on隐藏存档的结构：</p>
<pre tabindex="0"><code>$ 7z a &lt;archive name&gt; &lt;file name&gt; -p -mhe=on
</code></pre><p>更新存档内已有的文件或添加新文件：</p>
<pre tabindex="0"><code>$ 7z u &lt;archive name&gt; &lt;file name&gt;
</code></pre><p>列出存档内容：</p>
<pre tabindex="0"><code>$ 7z l &lt;archive name&gt;
</code></pre><p>从存档中解压文件至当前文件夹，不使用存档内的目录结构：</p>
<pre tabindex="0"><code>$ 7z e &lt;archive name&gt;
</code></pre><p>如果需要恢复存档内的目录结构，使用：</p>
<pre tabindex="0"><code>$ 7z x &lt;archive name&gt;
</code></pre><p>解压至新的目录：</p>
<pre tabindex="0"><code>$ 7z x -o&lt;folder name&gt; &lt;archive name&gt;
</code></pre><p>校验存档完整性：</p>
<pre tabindex="0"><code>$ 7z t &lt;archive name&gt;
</code></pre><h4 id="differences-between-7z-7za-and-7zr-binarieshttpswikiarchlinuxorgtitlep7zip"><a href="https://wiki.archlinux.org/title/p7zip">Differences between 7z, 7za and 7zr binaries</a><a hidden class="anchor" aria-hidden="true" href="#differences-between-7z-7za-and-7zr-binarieshttpswikiarchlinuxorgtitlep7zip">#</a></h4>
<p>The package includes three binaries, <code>/usr/bin/7z</code>, <code>/usr/bin/7za</code>, and <code>/usr/bin/7zr</code>. Their manual pages explain the differences:</p>
<ul>
<li>7z(1) uses plugins to handle archives.</li>
<li>7za(1) is a stand-alone executable that handles fewer archive formats than 7z.</li>
<li>7zr(1) is a stand-alone executable. It is a &ldquo;light-version&rdquo; of 7za that only handles 7z archives. In contrast to 7za, it cannot handle encrypted archives.</li>
</ul>
<h4 id="分卷压缩与解压缩httpsdeveloperaliyuncomarticle506654"><a href="https://developer.aliyun.com/article/506654">分卷压缩与解压缩</a><a hidden class="anchor" aria-hidden="true" href="#分卷压缩与解压缩httpsdeveloperaliyuncomarticle506654">#</a></h4>
<h5 id="rar">rar<a hidden class="anchor" aria-hidden="true" href="#rar">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># rar a -vSIZE  压缩后的文件名 被压缩的文件或者文件夹</span>
<span style="color:#75715e"># 最大限制为 12M</span>
$ rar a -m5 -v12m myarchive myfiles
<span style="color:#75715e">#解压</span>
$ rar e myarchive.part1.rar
</code></pre></div><h5 id="ziphttpsunixstackexchangecoma40565"><a href="https://unix.stackexchange.com/a/40565">zip</a><a hidden class="anchor" aria-hidden="true" href="#ziphttpsunixstackexchangecoma40565">#</a></h5>
<p><strong>How to unzip a multipart (spanned) ZIP on Linux?</strong></p>
<p>The Linux <code>unzip</code> utility doesn&rsquo;t really support multipart zips. From the <a href="http://manpages.ubuntu.com/manpages/precise/man1/unzip.1.html#contenttoc11">manual</a>:</p>
<blockquote>
<p>Multi-part archives are not yet supported, except in conjunction with zip. (All parts must be concatenated together in order, and then <code>zip -F</code> (for zip 2.x) or <code>zip -FF</code> (for zip 3.x) must be performed on the concatenated archive in order to “fix” it. Also, zip 3.0 and later can combine multi-part (split) archives into a combined single-file archive using <code>zip -s- inarchive -O outarchive</code>. See the <a href="http://manpages.ubuntu.com/manpages/precise/man1/zip.1.html">zip 3 manual page</a> for more information.)</p>
</blockquote>
<p>So you need to first concatenate the pieces, then repair the result. <code>cat test.zip.*</code> concatenates all the files called <code>test.zip.*</code> where the wildcard <code>*</code> stands for any sequence of characters; the files are enumerated in lexicographic order, which is the same as numerical order thanks to the leadings zeroes. <code>&gt;test.zip</code> directs the output into the file <code>test.zip</code>.</p>
<pre tabindex="0"><code>cat test.zip.* &gt; test.zip
zip -FF test.zip --out test-full.zip
unzip test-full.zip
</code></pre><p>If you created the pieces by directly splitting the zip file, as opposed to creating a multi-part zip with the official Pkzip utility, all you need to do is join the parts.</p>
<pre tabindex="0"><code>cat test.zip.* &gt; test.zip
unzip test.zip
</code></pre><p>总结：使用 <code>zip -s- inarchive -O outarchive</code>，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls
archive.zip archive.z01 archive.z02 archive.z03
$ zip -s- archive.zip -O archive-full.zip
$ unzip archive-full.zip
</code></pre></div><h5 id="tar">tar<a hidden class="anchor" aria-hidden="true" href="#tar">#</a></h5>
<p>要将目录logs打包压缩并分割成多个1M的文件，可以用下面的命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tar cjf - logs/ | split -b 1m - logs.tar.bz2.
</code></pre></div><p>完成后会产生下列文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">logs.tar.bz2.aa, logs.tar.bz2.ab, logs.tar.bz2.ac
</code></pre></div><p>要解压的时候只要执行下面的命令就可以了：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat logs.tar.bz2.a* |  tar xj
</code></pre></div><h5 id="7z">7z<a hidden class="anchor" aria-hidden="true" href="#7z">#</a></h5>
<p>压缩：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ 7z a name.7z filename -v10m
</code></pre></div><p>这里a是添加文件到压缩卷，name.7z是压缩后文件,然后filename可以是文件夹或文件，-v10m是限制每个包大小不超过10m.</p>
<p>解压到当前目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ 7z x film.7z.001
</code></pre></div><h3 id="wudao-dicthttpsgithubcomchestnuthengwudao-dict"><a href="https://github.com/ChestnutHeng/Wudao-dict">Wudao-dict</a><a hidden class="anchor" aria-hidden="true" href="#wudao-dicthttpsgithubcomchestnuthengwudao-dict">#</a></h3>
<p>有道词典的命令行版本，支持英汉互查和在线查询。</p>
<h3 id="-ascii-image-converterhttpsgithubcomthezoraizascii-image-converter"><a href="https://github.com/TheZoraiz/ascii-image-converter"> ascii-image-converter</a><a hidden class="anchor" aria-hidden="true" href="#-ascii-image-converterhttpsgithubcomthezoraizascii-image-converter">#</a></h3>
<h3 id="ttydhttpsgithubcomtsl0922ttyd"><a href="https://github.com/tsl0922/ttyd">ttyd</a><a hidden class="anchor" aria-hidden="true" href="#ttydhttpsgithubcomtsl0922ttyd">#</a></h3>
<p>Share your terminal over the web</p>
<h3 id="progresshttpsgithubcomxfennecprogress"><a href="https://github.com/Xfennec/progress">progress</a><a hidden class="anchor" aria-hidden="true" href="#progresshttpsgithubcomxfennecprogress">#</a></h3>
<p>Linux tool to show progress for cp, mv, dd, &hellip; (formerly known as cv)</p>
<h3 id="vosk-apihttpsgithubcomalphacepvosk-api"><a href="https://github.com/alphacep/vosk-api">vosk-api</a><a hidden class="anchor" aria-hidden="true" href="#vosk-apihttpsgithubcomalphacepvosk-api">#</a></h3>
<p>Offline speech recognition API for Android, iOS, Raspberry Pi and servers with Python, Java, C# and Node</p>
<h4 id="convert-mp3-to-texthttpsaskubuntucomquestions161515speech-recognition-app-to-convert-mp3-to-text"><a href="https://askubuntu.com/questions/161515/speech-recognition-app-to-convert-mp3-to-text">convert MP3 to text</a><a hidden class="anchor" aria-hidden="true" href="#convert-mp3-to-texthttpsaskubuntucomquestions161515speech-recognition-app-to-convert-mp3-to-text">#</a></h4>
<p>The software you can use is <a href="https://github.com/alphacep/vosk-api/">Vosk-api</a>, a modern speech recognition toolkit based on neural networks. It supports 7+ languages and works on variety of platforms including RPi and mobile.</p>
<p>First you convert the file to the required format and then you recognize it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ffmpeg -i file.mp3 -ar <span style="color:#ae81ff">16000</span> -ac <span style="color:#ae81ff">1</span> file.wav
</code></pre></div><p>Then install vosk-api with pip:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple vosk
</code></pre></div><p>Then use these steps:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/alphacep/vosk-api
$ cd vosk-api/python/example
$ curl -O http://alphacephei.com/vosk/models/vosk-model-small-en-us-0.15.zip
$ unzip vosk-model-small-en-us-0.15.zip
$ mv vosk-model-small-en-us-0.15 model
$ python3 ./test_simple.py test.wav &gt; result.json
</code></pre></div><p>The result will be stored in json format.</p>
<p>The same directory also contains an srt subtitle output example, which is easier to evaluate and can be directly useful to some users:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python3 -m pip install srt
$ python3 ./test_srt.py test.wav
</code></pre></div><p>The example given in the repository says in perfect American English accent and perfect sound quality three sentences which I transcribe as:</p>
<pre tabindex="0"><code>one zero zero zero one
nine oh two one oh
zero one eight zero three
</code></pre><p>The &ldquo;nine oh two one oh&rdquo; is said very fast, but still clear. The &ldquo;z&rdquo; of the before last &ldquo;zero&rdquo; sounds a bit like an &ldquo;s&rdquo;.</p>
<p>The SRT generated above reads:</p>
<pre tabindex="0"><code>1
00:00:00,870 --&gt; 00:00:02,610
what zero zero zero one

2
00:00:03,930 --&gt; 00:00:04,950
no no to uno

3
00:00:06,240 --&gt; 00:00:08,010
cyril one eight zero three
</code></pre><p>so we can see that several mistakes were made, presumably in part because we have the understanding that all words are numbers to help us.</p>
<p>Next I also tried with the <code>vosk-model-en-us-0.22.zip</code> which was a 1.8G download compared to 40M of <code>vosk-model-small-en-us-0.15</code> and is listed at <a href="https://alphacephei.com/vosk/models">https://alphacephei.com/vosk/models</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mv model vosk-model-small-en-us-0.15
$ curl -O http://alphacephei.com/vosk/models/vosk-model-en-us-0.22.zip
$ unzip vosk-model-en-us-0.22.zip
$ mv vosk-model-en-us-0.22 model
</code></pre></div><p>and the result was:</p>
<pre tabindex="0"><code>1
00:00:00,840 --&gt; 00:00:02,610
one zero zero zero one

2
00:00:04,026 --&gt; 00:00:04,980
i know what you window

3
00:00:06,270 --&gt; 00:00:07,980
serial one eight zero three
</code></pre><p>which got one more word correct.</p>
<h3 id="inxihttpslinuxcnarticle-14089-1html"><a href="https://linux.cn/article-14089-1.html">inxi</a><a hidden class="anchor" aria-hidden="true" href="#inxihttpslinuxcnarticle-14089-1html">#</a></h3>
<p><code>inix</code> 是一个用于获取 Linux 系统信息的终端命令。能够获取软件和硬件的详细信息，比如计算机型号、内核版本、发行版号以及桌面环境等信息，甚至可以读取主存模块占用主板的哪块 RAM 卡槽等详细信息。</p>
<p><code>inxi</code> 还可以用于监控系统中正在消耗 CPU 或者内存资源的进程。</p>
<p>在 Ubuntu/Debian 发行版系统中，安装命令：</p>
<pre tabindex="0"><code>sudo apt install inxi
</code></pre><p>用 <code>-F</code> 参数可以获取详细的系统信息。几乎囊括了所有层次的系统信息。</p>
<pre tabindex="0"><code>inxi -F
</code></pre><h3 id="busyboxhttpslinuxcnarticle-13840-1html"><a href="https://linux.cn/article-13840-1.html">BusyBox</a><a hidden class="anchor" aria-hidden="true" href="#busyboxhttpslinuxcnarticle-13840-1html">#</a></h3>
<p><a href="https://www.busybox.net/">BusyBox</a> 是一个开源（GPL）项目，提供了近 400 个常用命令的简单实现，包括 <code>ls</code>、<code>mv</code>、<code>ln</code>、<code>mkdir</code>、<code>more</code>、<code>ps</code>、<code>gzip</code>、<code>bzip2</code>、<code>tar</code> 和 <code>grep</code>。它还包含了编程语言 <code>awk</code>、流编辑器 <code>sed</code>、文件系统检查工具 <code>fsck</code>、软件包管理器<code>rpm</code> 和 <code>dpkg</code> ，当然还有一个可以方便的访问所有这些命令的 shell（<code>sh</code>）。简而言之，它包含了所有 POSIX 系统需要的基本命令，以执行常见的系统维护任务以及许多用户和管理任务。</p>
<p>事实上，它甚至包含一个 <code>init</code> 命令，可以作为 PID 1 启动，以作为所有其它系统服务的父进程。换句话说，BusyBox 可以作为 systemd、OpenRC、sinit、init 和其他初始化系统的替代品。</p>
<p>BusyBox 非常小。作为一个可执行文件，它不到 1MB，所以它在嵌入式、边缘计算 和物联网领域很受欢迎，因为这些场景的存储空间是很宝贵的。在容器和云计算的世界里，它作为精简的 Linux 容器镜像的基础镜像也很受欢迎。</p>
<h4 id="极简主义">极简主义<a hidden class="anchor" aria-hidden="true" href="#极简主义">#</a></h4>
<p>BusyBox 的部分魅力在于它的极简主义。它的所有命令都被编译到一个二进制文件里（<code>busybox</code>），它的手册只有 81 页（根据我对 <code>man</code> 送到 <code>pr</code> 管道的计算），但它涵盖了近 400 条命令。</p>
<p>作为一个例子的比较，这是 “原版” 的 <code>useradd —help</code> 的输出：</p>
<pre tabindex="0"><code>-b, --base-dir BASE_DIR       base directory for home
 -c, --comment COMMENT         GECOS field of the new account
 -d, --home-dir HOME_DIR       home directory of the new account
 -D, --defaults                print or change the default config
 -e, --expiredate EXPIRE_DATE  expiration date of the new account
 -f, --inactive INACTIVE       password inactivity
 -g, --gid GROUP               name or ID of the primary group
 -G, --groups GROUPS           list of supplementary groups
 -h, --help                    display this help message and exit
 -k, --skel SKEL_DIR           alternative skeleton dir
 -K, --key KEY=VALUE           override /etc/login.defs
 -l, --no-log-init             do not add the user to the lastlog
 -m, --create-home             create the user's home directory
 -M, --no-create-home          do not create the user's home directory
 -N, --no-user-group           do not create a group with the user's name
 -o, --non-unique              allow users with non-unique UIDs
 -p, --password PASSWORD       encrypted password of the new account
 -r, --system                  create a system account
 -R, --root CHROOT_DIR         directory to chroot into
 -s, --shell SHELL             login shell of the new account
 -u, --uid UID                 user ID of the new account
 -U, --user-group              create a group with the same name as a user
</code></pre><p>而这是是同一命令的 BusyBox 版本：</p>
<pre tabindex="0"><code>-h DIR    Home directory
 -g GECOS  GECOS field
 -s SHELL  Login shell
 -G GRP    Group
 -S            Create a system user
 -D            Don't assign a password
 -H            Don't create home directory
 -u UID    User id
 -k SKEL   Skeleton directory (/etc/skel)
</code></pre><p>这种差异是一种特性还是一种限制，取决于你是喜欢你的命令拥有 20 个选项还是 10 个选项。对于一些用户和某些用例来说，BusyBox 的极简主义刚刚满足所需。对于其他人来说，它是一个很好的最小化环境，可以作为一个后备工具，或者作为安装更强大的工具的基础，比如 Bash、Zsh、GNU Awk 等等。</p>
<h3 id="lynishttpslinuxcnarticle-12696-1html"><a href="https://linux.cn/article-12696-1.html">Lynis</a><a hidden class="anchor" aria-hidden="true" href="#lynishttpslinuxcnarticle-12696-1html">#</a></h3>
<blockquote>
<p>使用这个全面的开源安全审计工具检查你的 Linux 机器的安全性。</p>
</blockquote>
<p>你有没有想过你的 Linux 机器到底安全不安全？Linux 发行版众多，每个发行版都有自己的默认设置，你在上面运行着几十个版本各异的软件包，还有众多的服务在后台运行，而我们几乎不知道或不关心这些。</p>
<p>要想确定安全态势（指你的 Linux 机器上运行的软件、网络和服务的整体安全状态），你可以运行几个命令，得到一些零碎的相关信息，但你需要解析的数据量是巨大的。</p>
<p>如果能运行一个工具，生成一份关于机器安全状况的报告，那就好得多了。而幸运的是，有一个这样的软件：<a href="https://github.com/CISOfy/lynis">Lynis</a>。它是一个非常流行的开源安全审计工具，可以帮助强化基于 Linux 和 Unix 的系统。根据该项目的介绍：</p>
<blockquote>
<p>“它运行在系统本身，可以进行深入的安全扫描。主要目标是测试安全防御措施，并提供进一步强化系统的提示。它还将扫描一般系统信息、易受攻击的软件包和可能的配置问题。Lynis 常被系统管理员和审计人员用来评估其系统的安全防御。”</p>
</blockquote>
<h4 id="安装-lynis">安装 Lynis<a hidden class="anchor" aria-hidden="true" href="#安装-lynis">#</a></h4>
<p>你的 Linux 软件仓库中可能有 Lynis。如果有的话，你可以用以下方法安装它：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install lynis
</code></pre></div><p>然而，如果你的仓库中的版本不是最新的，你最好从 GitHub 上安装它。事实上，Lynis 主要是用 shell 脚本来实现的。</p>
<h4 id="运行-lynis">运行 Lynis<a hidden class="anchor" aria-hidden="true" href="#运行-lynis">#</a></h4>
<p>通过给 Lynis 一个 <code>-h</code> 选项来查看帮助部分，以便有个大概了解：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo lynis -h
</code></pre></div><p>你会看到一个简短的信息屏幕，然后是 Lynis 支持的所有子命令。</p>
<p>接下来，尝试一些测试命令以大致熟悉一下。要查看你正在使用的 Lynis 版本，请运行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo lynis show version
3.0.0
</code></pre></div><p>要查看 Lynis 中所有可用的命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo lynis show commands
Commands:
lynis audit
lynis configure
lynis generate
lynis show
lynis update
lynis upload-only
</code></pre></div><h4 id="审计-linux-系统">审计 Linux 系统<a hidden class="anchor" aria-hidden="true" href="#审计-linux-系统">#</a></h4>
<p>要审计你的系统的安全态势，运行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo lynis audit system
</code></pre></div><p>这个命令运行得很快，并会返回一份详细的报告，输出结果可能一开始看起来很吓人，但我将在下面引导你来阅读它。这个命令的输出也会被保存到一个日志文件中，所以你可以随时回过头来检查任何可能感兴趣的东西。</p>
<p>Lynis 将日志保存在这里：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  Files:
  - Test and debug information      : /var/log/lynis.log
  - Report data                     : /var/log/lynis-report.dat
</code></pre></div><p>你可以验证是否创建了日志文件。它确实创建了：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -l /var/log/lynis.log
-rw-r-----. <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">341489</span> Apr <span style="color:#ae81ff">30</span> 05:52 /var/log/lynis.log

$ ls -l /var/log/lynis-report.dat
-rw-r-----. <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">638</span> Apr <span style="color:#ae81ff">30</span> 05:55 /var/log/lynis-report.dat
</code></pre></div><h4 id="探索报告">探索报告<a hidden class="anchor" aria-hidden="true" href="#探索报告">#</a></h4>
<p>Lynis 提供了相当全面的报告，所以我将介绍一些重要的部分。作为初始化的一部分，Lynis 做的第一件事就是找出机器上运行的操作系统的完整信息。之后是检查是否安装了什么系统工具和插件：</p>
<pre tabindex="0"><code>[+] Initializing program
------------------------------------
  - Detecting OS...                                           [ DONE ]
  - Checking profiles...                                      [ DONE ]
  ---------------------------------------------------
  Program version:           3.0.0
  Operating system:          Linux
  Operating system name:     Red Hat Enterprise Linux Server 7.8 (Maipo)
  Operating system version:  7.8
  Kernel version:            3.10.0
  Hardware platform:         x86_64
  Hostname:                  example
  ---------------------------------------------------
&lt;&lt;截断&gt;&gt;
[+] System Tools
------------------------------------
  - Scanning available tools...
  - Checking system binaries...
[+] Plugins (phase 1)
------------------------------------
 Note: plugins have more extensive tests and may take several minutes to complete

  - Plugin: pam
    [..]
  - Plugin: systemd
    [................]
</code></pre><p>接下来，该报告被分为不同的部分，每个部分都以 <code>[+]</code> 符号开头。下面可以看到部分章节。（哇，要审核的地方有这么多，Lynis 是最合适的工具！）</p>
<pre tabindex="0"><code>[+] Boot and services
[+] Kernel
[+] Memory and Processes
[+] Users, Groups and Authentication
[+] Shells
[+] File systems
[+] USB Devices
[+] Storage
[+] NFS
[+] Name services
[+] Ports and packages
[+] Networking
[+] Printers and Spools
[+] Software: e-mail and messaging
[+] Software: firewalls
[+] Software: webserver
[+] SSH Support
[+] SNMP Support
[+] Databases
[+] LDAP Services
[+] PHP
[+] Squid Support
[+] Logging and files
[+] Insecure services
[+] Banners and identification
[+] Scheduled tasks
[+] Accounting
[+] Time and Synchronization
[+] Cryptography
[+] Virtualization
[+] Containers
[+] Security frameworks
[+] Software: file integrity
[+] Software: System tooling
[+] Software: Malware
[+] File Permissions
[+] Home directories
[+] Kernel Hardening
[+] Hardening
[+] Custom tests
</code></pre><p>Lynis 使用颜色编码使报告更容易解读。</p>
<ul>
<li>绿色。一切正常</li>
<li>黄色。跳过、未找到，可能有个建议</li>
<li>红色。你可能需要仔细看看这个</li>
</ul>
<p>在我的案例中，大部分的红色标记都是在 “Kernel Hardening” 部分找到的。内核有各种可调整的设置，它们定义了内核的功能，其中一些可调整的设置可能有其安全场景。发行版可能因为各种原因没有默认设置这些，但是你应该检查每一项，看看你是否需要根据你的安全态势来改变它的值：</p>
<pre tabindex="0"><code>[+] Kernel Hardening
------------------------------------
  - Comparing sysctl key pairs with scan profile
    - fs.protected_hardlinks (exp: 1)                         [ OK ]
    - fs.protected_symlinks (exp: 1)                          [ OK ]
    - fs.suid_dumpable (exp: 0)                               [ OK ]
    - kernel.core_uses_pid (exp: 1)                           [ OK ]
    - kernel.ctrl-alt-del (exp: 0)                            [ OK ]
    - kernel.dmesg_restrict (exp: 1)                          [ DIFFERENT ]
    - kernel.kptr_restrict (exp: 2)                           [ DIFFERENT ]
    - kernel.randomize_va_space (exp: 2)                      [ OK ]
    - kernel.sysrq (exp: 0)                                   [ DIFFERENT ]
    - kernel.yama.ptrace_scope (exp: 1 2 3)                   [ DIFFERENT ]
    - net.ipv4.conf.all.accept_redirects (exp: 0)             [ DIFFERENT ]
    - net.ipv4.conf.all.accept_source_route (exp: 0)          [ OK ]
    - net.ipv4.conf.all.bootp_relay (exp: 0)                  [ OK ]
    - net.ipv4.conf.all.forwarding (exp: 0)                   [ OK ]
    - net.ipv4.conf.all.log_martians (exp: 1)                 [ DIFFERENT ]
    - net.ipv4.conf.all.mc_forwarding (exp: 0)                [ OK ]
    - net.ipv4.conf.all.proxy_arp (exp: 0)                    [ OK ]
    - net.ipv4.conf.all.rp_filter (exp: 1)                    [ OK ]
    - net.ipv4.conf.all.send_redirects (exp: 0)               [ DIFFERENT ]
    - net.ipv4.conf.default.accept_redirects (exp: 0)         [ DIFFERENT ]
    - net.ipv4.conf.default.accept_source_route (exp: 0)      [ OK ]
    - net.ipv4.conf.default.log_martians (exp: 1)             [ DIFFERENT ]
    - net.ipv4.icmp_echo_ignore_broadcasts (exp: 1)           [ OK ]
    - net.ipv4.icmp_ignore_bogus_error_responses (exp: 1)     [ OK ]
    - net.ipv4.tcp_syncookies (exp: 1)                        [ OK ]
    - net.ipv4.tcp_timestamps (exp: 0 1)                      [ OK ]
    - net.ipv6.conf.all.accept_redirects (exp: 0)             [ DIFFERENT ]
    - net.ipv6.conf.all.accept_source_route (exp: 0)          [ OK ]
    - net.ipv6.conf.default.accept_redirects (exp: 0)         [ DIFFERENT ]
    - net.ipv6.conf.default.accept_source_route (exp: 0)      [ OK ]
</code></pre><p>看看 SSH 这个例子，因为它是一个需要保证安全的关键领域。这里没有什么红色的东西，但是 Lynis 对我的环境给出了很多强化 SSH 服务的建议：</p>
<pre tabindex="0"><code>[+] SSH Support
------------------------------------
  - Checking running SSH daemon                               [ FOUND ]
    - Searching SSH configuration                             [ FOUND ]
    - OpenSSH option: AllowTcpForwarding                      [ SUGGESTION ]
    - OpenSSH option: ClientAliveCountMax                     [ SUGGESTION ]
    - OpenSSH option: ClientAliveInterval                     [ OK ]
    - OpenSSH option: Compression                             [ SUGGESTION ]
    - OpenSSH option: FingerprintHash                         [ OK ]
    - OpenSSH option: GatewayPorts                            [ OK ]
    - OpenSSH option: IgnoreRhosts                            [ OK ]
    - OpenSSH option: LoginGraceTime                          [ OK ]
    - OpenSSH option: LogLevel                                [ SUGGESTION ]
    - OpenSSH option: MaxAuthTries                            [ SUGGESTION ]
    - OpenSSH option: MaxSessions                             [ SUGGESTION ]
    - OpenSSH option: PermitRootLogin                         [ SUGGESTION ]
    - OpenSSH option: PermitUserEnvironment                   [ OK ]
    - OpenSSH option: PermitTunnel                            [ OK ]
    - OpenSSH option: Port                                    [ SUGGESTION ]
    - OpenSSH option: PrintLastLog                            [ OK ]
    - OpenSSH option: StrictModes                             [ OK ]
    - OpenSSH option: TCPKeepAlive                            [ SUGGESTION ]
    - OpenSSH option: UseDNS                                  [ SUGGESTION ]
    - OpenSSH option: X11Forwarding                           [ SUGGESTION ]
    - OpenSSH option: AllowAgentForwarding                    [ SUGGESTION ]
    - OpenSSH option: UsePrivilegeSeparation                  [ OK ]
    - OpenSSH option: AllowUsers                              [ NOT FOUND ]
    - OpenSSH option: AllowGroups                             [ NOT FOUND ]
</code></pre><p>我的系统上没有运行虚拟机或容器，所以这些显示的结果是空的：</p>
<pre tabindex="0"><code>[+] Virtualization
------------------------------------
[+] Containers
------------------------------------
</code></pre><p>Lynis 会检查一些从安全角度看很重要的文件的文件权限：</p>
<pre tabindex="0"><code>[+] File Permissions
------------------------------------
  - Starting file permissions check
    File: /boot/grub2/grub.cfg                                [ SUGGESTION ]
    File: /etc/cron.deny                                      [ OK ]
    File: /etc/crontab                                        [ SUGGESTION ]
    File: /etc/group                                          [ OK ]
    File: /etc/group-                                         [ OK ]
    File: /etc/hosts.allow                                    [ OK ]
    File: /etc/hosts.deny                                     [ OK ]
    File: /etc/issue                                          [ OK ]
    File: /etc/issue.net                                      [ OK ]
    File: /etc/motd                                           [ OK ]
    File: /etc/passwd                                         [ OK ]
    File: /etc/passwd-                                        [ OK ]
    File: /etc/ssh/sshd_config                                [ OK ]
    Directory: /root/.ssh                                     [ SUGGESTION ]
    Directory: /etc/cron.d                                    [ SUGGESTION ]
    Directory: /etc/cron.daily                                [ SUGGESTION ]
    Directory: /etc/cron.hourly                               [ SUGGESTION ]
    Directory: /etc/cron.weekly                               [ SUGGESTION ]
    Directory: /etc/cron.monthly                              [ SUGGESTION ]
</code></pre><p>在报告的底部，Lynis 根据报告的发现提出了建议。每项建议后面都有一个 “TEST-ID”（为了下一部分方便，请将其保存起来）。</p>
<pre tabindex="0"><code>Suggestions (47):
  ----------------------------
  * If not required, consider explicit disabling of core dump in /etc/security/limits.conf file [KRNL-5820]
      https://cisofy.com/lynis/controls/KRNL-5820/
  * Check PAM configuration, add rounds if applicable and expire passwords to encrypt with new values [AUTH-9229]
      https://cisofy.com/lynis/controls/AUTH-9229/
</code></pre><p>Lynis 提供了一个选项来查找关于每个建议的更多信息，你可以使用 <code>show details</code> 命令和 TEST-ID 号来访问：</p>
<pre tabindex="0"><code>$ sudo lynis show details TEST-ID
</code></pre><p>这将显示该测试的其他信息。例如，我检查了 SSH-7408 的详细信息：</p>
<pre tabindex="0"><code>$ sudo lynis show details SSH-7408
2020-04-30 05:52:23 Performing test ID SSH-7408 (Check SSH specific defined options)
2020-04-30 05:52:23 Test: Checking specific defined options in /tmp/lynis.k8JwazmKc6
2020-04-30 05:52:23 Result: added additional options for OpenSSH &lt; 7.5
2020-04-30 05:52:23 Test: Checking AllowTcpForwarding in /tmp/lynis.k8JwazmKc6
2020-04-30 05:52:23 Result: Option AllowTcpForwarding found
2020-04-30 05:52:23 Result: Option AllowTcpForwarding value is YES
2020-04-30 05:52:23 Result: OpenSSH option AllowTcpForwarding is in a weak configuration state and should be fixed
2020-04-30 05:52:23 Suggestion: Consider hardening SSH configuration [test:SSH-7408] [details:AllowTcpForwarding (set YES to NO)] [solution:-]
</code></pre><h4 id="试试吧">试试吧<a hidden class="anchor" aria-hidden="true" href="#试试吧">#</a></h4>
<p>如果你想更多地了解你的 Linux 机器的安全性，请试试 Lynis。如果你想了解 Lynis 是如何工作的，可以研究一下它的 shell 脚本，看看它是如何收集这些信息的。</p>
<h4 id="how-can-i-protect-against-single-user-modehttpsaskubuntucomquestions1011368how-can-i-protect-against-single-user-mode"><a href="https://askubuntu.com/questions/1011368/how-can-i-protect-against-single-user-mode">How can I protect against single user mode</a><a hidden class="anchor" aria-hidden="true" href="#how-can-i-protect-against-single-user-modehttpsaskubuntucomquestions1011368how-can-i-protect-against-single-user-mode">#</a></h4>
<p><strong>Potential Attacks</strong></p>
<p><strong>Single User Mode</strong></p>
<p>This is the easiest way to gain unauthorised access to a Linux system is to boot the server into Single User Mode because it does not, by default, require a root password to gain root level access. Single User Mood can be accessed by power cycling the machine and interrupting the boot process. To boot into single user mode where the GRUB bootloader is used perform the following; interrupt the boot process, press e to edit the boot configuration file, append to the line starting <code>Linux</code> one of either <code>s, S, 1 or systemd. unit=[rescue.target, emergency.target, rescue]</code> to change the argument being passed to the kernel during boot to boot into Single User Mode, then press ctrl+x.</p>
<p><strong>Protecting Against Single User Mode</strong></p>
<p><strong>For a traditional init based system</strong></p>
<p>As root edit the file <code>/etc/sysconfig/init</code> then on the line <code>SINGLE=/sbin/sushell</code> change sushell TO <code>sulogin</code>.</p>
<p><strong>For a systemd based system</strong></p>
<p>The target configuration need to be altered for the root password to be prompted for. The targets are located in <code>/lib/systemd/system</code> the files which need alteration are <code>emergency.service</code> and <code>rescue.service</code>. Alter the line starting <code>ExecStart=-/bin/sh –c “/usr/sbin/sushell; ……”</code> and change the <code>/usr/sbin/sushell</code> to<code>/usr/sbin/sulogin</code> in both <code>emergency.service</code> and <code>rescue.service</code>.</p>
<p><strong>To check this has taken affect</strong></p>
<p>Then save changes and reboot to confirm the alteration has taken affect, if the alteration was success when booting into single user mode it shall ask for the root password.</p>
<p><strong>Root Password</strong></p>
<p>By default, some Linux distributions do not have root password sets, this can be checked by running the command <code>head -1 /etc/shadow</code> and if the second column, using a colon as a delimiter, is an exclamation mark then no password has been set. If no root password is set, then regardless of if the system is set to prompt for a password for Single User Mode or not it will just load root access.</p>
<p><strong>Securing Bootloader</strong></p>
<p>Insecure bootloaders can result in the bootloader being bypassed completely and a shell being used to gain direct root level access to the system. This is done by interrupting the GRUB boot process and appending <code>init=/bin/bas</code> to the line beginning <code>linux16</code>. This will tell the kernel to use bash instead of init.</p>
<p><strong>Protecting against bootloader side loading</strong></p>
<p>The GRUB bootloader can be password protected by placing the configuration in /etc/grub.d/40_custom file because this file will remain un touched by updates and upgrades to the boot loader. In <code>/etc/grub.d/40_custom</code> add <code>set superusers=”admin”</code> then password admin after that save and exit the file and run the following command <code>grub2-mkpasswd-…</code> (allow tab completion to finish this command so that the system compatible script is run) the output of this command from grub2. Onwards need to be added to the end of the line <code>password admin</code> in <code>/etc/grub.d/40_custom</code>. After that the grub file need to be recompiled by running the command <code>grub2-mkconfig –o /boot/grub2/grub.cfg</code> for centos or <code>update-grub¬</code> on debian.</p>
<p><strong>To check this has taken affect</strong></p>
<p>Then save changes and reboot to confirm the alteration has taken affect, if the alteration was success when booting and wanting to change the grub setting you will need to supply the username admin and the encrypted password.</p>
<p><strong>Protecting Against Recovery Attack</strong></p>
<p>These measures can aid in protection however, if a disk is used the recover Linux feature on the disk can be used to mount the file system and alter the GRUB setting from the disk. To protect against make any removable media have a lower boot priority than the boot drive and password protect the BIOS and boot option menu to stop someone who hasn’t got access altering the boot order and booting into a disk to make changes to the system.</p>
<h3 id="checkinstallhttpslinuxcnarticle-4090-1html"><a href="https://linux.cn/article-4090-1.html">CheckInstall</a><a hidden class="anchor" aria-hidden="true" href="#checkinstallhttpslinuxcnarticle-4090-1html">#</a></h3>
<p>如果你已经从它的源码运行“make  install”安装了linux程序。想完整移除它将变得真的很麻烦，除非程序的开发者在Makefile里提供了uninstall的目标设置。否则你必须在安装前后比较你系统里文件的完整列表，然后手工移除所有在安装过程中加入的文件。</p>
<p>这时候Checkinstall就可以派上使用。Checkinstall会跟踪install命令行所创建或修改的所有文件的路径(例如：“make install”、“make  install_modules”等)并建立一个标准的二进制包，让你能用你发行版的标准包管理系统安装或卸载它，请参考其<a href="http://checkinstall.izto.org/">官方文档</a>。</p>
<p>安装Checkinstall：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># apt install checkinstall </span>
</code></pre></div><p>一旦checkinstall安装好，你就可以用下列格式创建一个特定的软件包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># checkinstall &lt;install-command&gt; </span>
</code></pre></div><p>如果没有参数，默认安装命令“make install”将被使用。</p>
<p>在这个例子里，我们将创建一个htop包，这是一个linux交互式文本模式进程查看器（类似 top）。</p>
<p>首先，让我们从项目的官方网站下载源代码，作为一个好的习惯，我们存储源码包到/usr/local/src下，并解压它。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># cd /usr/local/src</span>
<span style="color:#75715e"># wget http://hisham.hm/htop/releases/1.0.3/htop-1.0.3.tar.gz</span>
<span style="color:#75715e"># tar xzf htop-1.0.3.tar.gz</span>
<span style="color:#75715e"># cd htop-1.0.3 </span>
</code></pre></div><p>让我们看看htop的安装命令是什么，以便我们能用Checkinstall命令调用它，如下面所示，htop用“make install”命令安装。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ./configure</span>
<span style="color:#75715e"># make install </span>
</code></pre></div><p>因此，要创建一个htop安装包，我们可以不带任何参数的调用checkinstall，这将使用“make install”命令创建一个包。在这个过程中， checkinstall命令会问你几个问题。</p>
<p>简而言之，如下命令会创建一个htop包：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ./configure</span>
<span style="color:#75715e"># checkinstall </span>
</code></pre></div><p>然后checkinstall将根据你的linux系统是什么，自动地创建一个.rpm或者.deb包。</p>
<h3 id="gksudokdesudohttpsaskubuntucomquestions11760what-is-the-difference-between-gksudo-nautilus-and-sudo-nautilus"><a href="https://askubuntu.com/questions/11760/what-is-the-difference-between-gksudo-nautilus-and-sudo-nautilus">gksudo/kdesudo</a><a hidden class="anchor" aria-hidden="true" href="#gksudokdesudohttpsaskubuntucomquestions11760what-is-the-difference-between-gksudo-nautilus-and-sudo-nautilus">#</a></h3>
<p>Taken from <a href="https://help.ubuntu.com/community/RootSudo#Graphical_sudo">here</a>:</p>
<blockquote>
<p>You should <strong>never</strong> use normal <code>sudo</code> to start graphical applications as root. You should use <code>gksudo</code> (<code>kdesudo</code> on Kubuntu) to run such programs. <code>gksudo</code> sets <code>HOME=/root</code>, and copies <code>.Xauthority</code> to a <code>tmp</code> directory. This prevents files in your home directory becoming owned by root.</p>
</blockquote>
<p>Please note that this is primarily about <em>configuration files</em>. If you run Nautilus as <code>root</code>, even with <code>gksu</code>/<code>gksudo</code>, and you create a file or folder anywhere with it (including in your home directory), that file or folder will be owned by <code>root</code>. But if you run Nautilus (or most other graphical applications) as <code>root</code> with <code>sudo</code>, they may save their <em>configuration files</em> in your home directory (rather than <code>root</code>&rsquo;s home directory). Those configuration files may be owned by <code>root</code> and inaccessible when you&rsquo;re not running as root, which can severely mess up your settings, and may even keep some applications from working altogether.</p>
<p>The solution, once you have made this mistake, is to find the configuration files and delete them or <a href="http://manpages.ubuntu.com/manpages/precise/en/man1/chown.1.html"><code>chown</code></a> them back to belonging your non-<code>root</code> user. Many such files start with a <code>.</code> or are contained in a directory that starts with a <code>.</code>. Some are located inside the <code>.config</code> folder in your home directory. To see files and folders that start with a <code>.</code> in Nautilus, press Ctrl+H (this <em>shows hidden files</em>.) To see them with <a href="http://manpages.ubuntu.com/manpages/precise/en/man1/ls.1.html"><code>ls</code></a>, use the <code>-a</code> (or <code>-A</code>) flag.</p>
<p>To find if there are files not owned by you in your home directory, you can use the following command in a terminal:</p>
<pre tabindex="0"><code>find $HOME -not -user $USER -exec ls -lad {} \;
</code></pre><p>which will list all files under the home directory not owned by the user.</p>
<h3 id="manhttpslinuxcnarticle-13478-1html"><a href="https://linux.cn/article-13478-1.html">man</a><a hidden class="anchor" aria-hidden="true" href="#manhttpslinuxcnarticle-13478-1html">#</a></h3>
<p>手册页（man pages），即参考手册页（reference manual pages）的简称，是你进入 Linux 的钥匙。你想知道的一切都在那里，包罗万象。这套文档永远不会赢得普利策奖，但这套文档是相当准确和完整的。手册页是主要信源，其权威性是众所周知的。</p>
<p>虽然它们是源头，但阅读起来并不是最令人愉快的。有一次，在很久以前的哲学课上，有人告诉我，阅读 <a href="https://www.britannica.com/biography/Aristotle">亚里士多德</a> 是最无聊的阅读。我不同意：说到枯燥的阅读，亚里士多德远远地排在第二位，仅次于手册页。</p>
<p>乍一看，这些页面可能看起来并不完整，但是，不管你信不信，手册页并不是为了隐藏信息 —— 只是因为信息量太大，这些页面必须要有结构，而且信息是以尽可能简短的形式给出的。这些解释相当简略，需要一些时间来适应，但一旦你掌握了使用它们的技巧，你就会发现它们实际上是多么有用。</p>
<h4 id="入门">入门<a hidden class="anchor" aria-hidden="true" href="#入门">#</a></h4>
<p>这些页面是通过一个叫做 <code>man</code> 的工具查看的，使用它的命令相当简单。在最简单的情况下，要使用 <code>man</code>，你要在命令行上输入 <code>man</code>，后面加一个空格和你想查询的命令，比如 <code>ls</code> 或 <code>cp</code>，像这样：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">man ls
</code></pre></div><p><code>man</code> 会打开 <code>ls</code> 命令的手册页。</p>
<p>你可以用方向键上下移动，按 <code>q</code> 退出查看手册页。通常情况下，手册页是用 <code>less</code> 打开的，所以 <code>less</code> 命令的键盘快捷键在 <code>man</code> 中也可以使用。</p>
<p>例如，你可以用 <code>/search_term</code> 来搜索一个特定的文本，等等。</p>
<p>有一个关于手册页的介绍，这是一篇值得阅读介绍。它非常详细地说明了手册页是如何布局和组织的。</p>
<p>要看这个页面，请打开一个终端，然后输入：</p>
<pre tabindex="0"><code>man man
</code></pre><h4 id="节">节<a hidden class="anchor" aria-hidden="true" href="#节">#</a></h4>
<p>在你开始更深入地研究手册页之前，知道手册页有一个固定的页面布局和一个归档方案会有帮助。这可能会让新手感到困惑，因为我可以说：“看手册页中关于 <code>ls</code> 的 NAME 节（section）”，我也可以说：“看第 5 节（section）中的 <code>passwd</code> 的手册页。”</p>
<p>这个词，“节（section）” 被用于两种不同的方式，但并不总是向新人解释其中的区别。</p>
<p>我不确定为什么会出现这种混淆，但我在培训新用户和初级系统管理员时看到过几次这种混淆。我认为这可能是隧道视野，专注于一件事会使一个人忘记另一件事。一叶障目，不见泰山。</p>
<p>对于那些已经知道其中的区别的人，你可以跳过这一小节。这一部分是针对那些刚接触到手册页的人。</p>
<p>这就是区别：</p>
<p><strong>对于手册页</strong></p>
<p>单独的手册页是用来显示信息块的。例如，每个手册页都有一个“NAME”节，显示命令的名称和简短的描述。还会有另一个信息块，称为“SYNOPSIS”，显示该命令是如何使用的，以此类推。</p>
<p>每个手册页都会有这些，以及其他的标题。这些在各个手册页上的节，或者说标题，有助于保持事情的一致性和信息的分工。</p>
<p><strong>对于手册</strong></p>
<p>使用“节”，如 “查看第 5 节中的 <code>passwd</code> 的手册页”，是指整个手册的内容。当我们只看一页时，很容易忽略这一点，但是 <code>passwd</code> 手册页是同一本手册的一部分，该手册还有 <code>ls</code>、<code>rm</code>、<code>date</code>、<code>cal</code> 等的手册页。</p>
<p>整个 Linux 手册是巨大的；它有成千上万的手册页。其中一些手册页有专门的信息。有些手册页有程序员需要的信息，有些手册页有网络方面的独特信息，还有一些是系统管理员会感兴趣的。</p>
<p>这些手册页根据其独特的目的被分组。想想看，把整个手册分成几个章节 —— 每章有一个特定的主题。有 9 个左右的章节（非常大的章节）。碰巧的是，这些章节被称为“节”。</p>
<p>总结一下：</p>
<ul>
<li>手册中单页（我们称之为“手册页”）的节是由标题定义的信息块。</li>
<li>这个大的手册（所有页面的集合）中的章节，刚好被称为“节”。</li>
</ul>
<p>现在你知道区别了，希望本文的其余部分会更容易理解。</p>
<h4 id="手册页的节">手册页的节<a hidden class="anchor" aria-hidden="true" href="#手册页的节">#</a></h4>
<p>你将会看到不同的手册页，所以让我们先研究一下各个页面的布局。</p>
<p>手册页被分成几个标题，它们可能因提供者不同而不同，但会有相似之处。一般的分类如下：</p>
<ul>
<li><code>NAME</code>（名称）</li>
<li><code>SYNOPSIS</code>（概要）</li>
<li><code>DESCRIPTION</code>（描述）</li>
<li><code>EXAMPLES</code>（例子）</li>
<li><code>DIAGNOSTICS</code>（诊断）</li>
<li><code>FILES</code>（文件）</li>
<li><code>LIMITS</code>（限制）</li>
<li><code>PORTABILITY</code>（可移植性）</li>
<li><code>SEE ALSO</code>（另见）</li>
<li><code>HISTORY</code>（历史）</li>
<li><code>WARNING</code>（警告）或<code>BUGS</code>（错误）</li>
<li><code>NOTES</code>（注意事项）</li>
</ul>
<p><code>NAME</code> - 在这个标题下是命令的名称和命令的简要描述。</p>
<p><code>SYNOPSIS</code> - 显示该命令的使用方法。例如，这里是 <code>cal</code> 命令的概要：</p>
<pre tabindex="0"><code>cal [Month] [Year]
</code></pre><p>概要以命令的名称开始，后面是选项列表。概要采用命令行的一般形式；它显示了你可以输入的内容和参数的顺序。方括号中的参数（<code>[]</code>）是可选的；你可以不输入这些参数，命令仍然可以正常工作。不在括号内的项目必须使用。</p>
<p>请注意，方括号只是为了便于阅读。当你输入命令时，不应该输入它们。</p>
<p><code>DESCRIPTION</code> - 描述该命令或工具的作用以及如何使用它。这一节通常以对概要的解释开始，并说明如果你省略任何一个可选参数会发生什么。对于长的或复杂的命令，这一节可能会被细分。</p>
<p><code>EXAMPLES</code> - 一些手册页提供了如何使用命令或工具的例子。如果有这一节，手册页会尝试给出一些简单的使用例子，以及更复杂的例子来说明如何完成复杂的任务。</p>
<p><code>DIAGNOSTICS</code> - 本节列出了由命令或工具返回的状态或错误信息。通常不显示不言自明的错误和状态信息。通常会列出可能难以理解的信息。</p>
<p><code>FILES</code> - 本节包含了 UNIX 用来运行这个特定命令的补充文件的列表。这里，“补充文件”是指没有在命令行中指定的文件。例如，如果你在看 <code>passwd</code> 命令的手册，你可能会发现 <code>/etc/passwd</code> 列在这一节中，因为 UNIX 是在这里存储密码信息。</p>
<p><code>LIMITS</code> - 本节描述了一个工具的限制。操作系统和硬件的限制通常不会被列出，因为它们不在工具的控制范围内。</p>
<p><code>PORTABILITY</code> - 列出其他可以使用该工具的系统，以及该工具的其他版本可能有什么不同。</p>
<p><code>SEE ALSO</code> - 列出包含相关信息的相关手册页。</p>
<p><code>HISTORY</code> - 提供命令的简要历史，如它第一次出现的时间。</p>
<p><code>WARNING</code> - 如果有这个部分，它包含了对用户的重要建议。</p>
<p><code>NOTES</code> - 不像警告那样严重，但也是重要的信息。</p>
<p>同样，并不是所有的手册都使用上面列出的确切标题，但它们足够接近，可以遵循。</p>
<h4 id="手册的节">手册的节<a hidden class="anchor" aria-hidden="true" href="#手册的节">#</a></h4>
<p>整个 Linux 手册集合的手册页传统上被划分为有编号的节：</p>
<p><strong>第 1 节</strong>：Shell 命令和应用程序</p>
<p><strong>第 2 节</strong>：基本内核服务 - 系统调用和错误代码</p>
<p><strong>第 3 节</strong>：为程序员提供的库信息</p>
<p><strong>第 4 节</strong>：网络服务 - 如果安装了 TCP/IP 或 NFS 设备驱动和网络协议</p>
<p><strong>第 5 节</strong>：文件格式 - 例如：显示 <code>tar</code> 存档的样子</p>
<p><strong>第 6 节</strong>：游戏</p>
<p><strong>第 7 节</strong>：杂项文件和文档</p>
<p><strong>第 8 节</strong>：系统管理和维护命令</p>
<p><strong>第 9 节</strong>：不知名的内核规格和接口</p>
<p>将手册页分成这些组，可以使搜索更有效率。在我工作的地方，我有时会做一些编程工作，所以我花了一点时间看第 3 节的手册页。我也做一些网络方面的工作，所以我也知道要涉足网络部分。作为几个实验性机器的系统管理员，我在第 8 节花了很多时间。</p>
<p>将手册网归入特定的节（章节），使搜索信息更加容易 —— 无论是对需要搜索的人，还是对进行搜索的机器。</p>
<p>你可以通过名称旁边的数字来判断哪个手册页属于哪个部分。例如，如果你正在看 <code>ls</code> 的手册页，而页面的最上面写着。 <code>LS(1)</code>，那么你正在浏览第 1 节中的 <code>ls</code> 页面，该节包含关于 shell 命令和应用程序的页面。</p>
<p>下面是另一个例子。如果你在看 <code>passwd</code> 的手册页，页面的顶部显示: <code>PASSWD(1)</code>，说明你正在阅读第 1 节中描述 <code>passwd</code> 命令如何更改用户账户密码的手册页。如果你看到 <code>PASSWD(5)</code>，那么你正在阅读关于密码文件和它是如何组成的的手册页。</p>
<p><code>passwd</code> 恰好是两个不同的东西：一个是命令的名称，一个是文件的名称。同样，第 1 节描述了命令，而第 5 节涉及文件格式。</p>
<p>括号中的数字是重要的线索 —— 这个数字告诉你正在阅读的页面来自哪一节。</p>
<h4 id="搜索一个特定的节">搜索一个特定的节<a hidden class="anchor" aria-hidden="true" href="#搜索一个特定的节">#</a></h4>
<p>基本命令：</p>
<pre tabindex="0"><code>man -a name
</code></pre><p>将在每一节中搜索由 <code>name</code> 标识的手册页，按数字顺序逐一显示。要把搜索限制在一个特定的部分，请在 <code>man</code> 命令中使用一个参数，像这样：</p>
<pre tabindex="0"><code>man 1 name
</code></pre><p>这个命令将只在手册页的第 1 节中搜索 <code>name</code>。使用我们前面的 <code>passwd</code> 例子，这意味着我们可以保持搜索的针对性。如果我想阅读 <code>passwd</code> 命令的手册页，我可以在终端输入以下内容：</p>
<pre tabindex="0"><code>man 1 passwd
</code></pre><p><code>man</code> 工具将只在第 1 节中搜索 <code>passwd</code> 并显示它。它不会在任何其他节中寻找 <code>passwd</code>。</p>
<p>这个命令的另一种方法是输入: <code>man passwd.1</code>。</p>
<h4 id="搜索包含某个关键词的所有手册页">搜索包含某个关键词的所有手册页<a hidden class="anchor" aria-hidden="true" href="#搜索包含某个关键词的所有手册页">#</a></h4>
<p>如果你想获得包含某个关键词的手册页的列表，<code>man</code> 命令中的 <code>-k</code> 选项（通常称为标志或开关）可以派上用场。例如，如果你想看一个关于 <code>ftp</code> 的手册列表，你可以通过输入以下内容得到这个列表：</p>
<pre tabindex="0"><code>man -k ftp
</code></pre><p>在接下来的列表中，你可以选择一个特定的手册页来阅读。</p>
<p>在某些系统上，在 <code>man -k</code> 工作之前，系统管理员需要运行一个叫做 <code>catman</code> 的工具。</p>
<h4 id="了解手册的各个节">了解手册的各个节<a hidden class="anchor" aria-hidden="true" href="#了解手册的各个节">#</a></h4>
<p>有两个有趣的工具可以帮助你搜索信息：<code>whatis</code>和 <code>whereis</code>。</p>
<p><strong>whatis</strong></p>
<p>有的时候，我们完全可以得到我们需要的信息。我们需要的信息有很大的机会是可以找到的 —— 找到它可能是一个小问题。</p>
<p>例如，如果我想看关于 <code>passwd</code> 文件的手册页，我在终端上输入：</p>
<pre tabindex="0"><code>man passwd
</code></pre><p>我就会看到关于 <code>passwd</code> 命令所有信息的手册页，但没有关于 <code>passwd</code> 文件的内容。我知道 <code>passwd</code> 是一个命令，也有一个 <code>passwd</code> 文件，但有时，我可能会忘记这一点。这时我才意识到，文件结构在手册页中的不同节，所以我输入了：</p>
<pre tabindex="0"><code>man 4 passwd
</code></pre><p>我得到这样的答复：</p>
<pre tabindex="0"><code>No manual entry for passwd in section 4
See 'man 7 undocumented' for help when manual pages are not available.
</code></pre><p>又是一次健忘的失误。文件结构在 System V UNIX 页面的第 4 节中。几年前，当我建立文件时，我经常使用 <code>man 4 ...</code>；这仍然是我的一个习惯。那么它在 Linux 手册中的什么地方呢？</p>
<p>现在是时候调用 <code>whatis</code> 来纠正我了。为了做到这一点，我在我的终端中输入以下内容：</p>
<pre tabindex="0"><code>whatis passwd
</code></pre><p>然后我看到以下内容：</p>
<pre tabindex="0"><code>passwd (1)           - change user password
passwd (1ssl)        - compute password hashes
passwd (5)           - the password file
</code></pre><p>啊！<code>passwd</code> 文件的页面在第 5 节。现在没问题了，可以访问我想要的信息了：</p>
<pre tabindex="0"><code>man 5 passwd
</code></pre><p>然后我被带到了有我需要的信息的手册页。</p>
<p><code>whatis</code> 是一个方便的工具，可以用简短的一句话告诉你一个命令的作用。想象一下，你想知道 <code>cal</code> 是做什么的，而不想查看手册页。只要在命令提示符下键入以下内容。</p>
<pre tabindex="0"><code>whatis cal
</code></pre><p>你会看到这样的回应：</p>
<pre tabindex="0"><code>cal (1)              - displays a calendar and the date of Easter
</code></pre><p>现在你知道了 <code>whatis</code> 命令，我可以告诉你一个秘密 —— 有一个 <code>man</code> 命令的等价物。为了得到这个，我们使用 <code>-f</code> 开关：<code>man -f ...</code>。</p>
<p>试试吧。在终端提示下输入 <code>whatis cal</code>。执行后就输入：<code>man -f cal</code>。两个命令的输出将是相同的。</p>
<p><strong>whereis</strong></p>
<p><code>whereis</code> 命令的名字就说明了这一点 —— 它告诉你一个程序在文件系统中的位置。它也会告诉你手册页的存放位置。再以 <code>cal</code> 为例，我在提示符下输入以下内容：</p>
<pre tabindex="0"><code>whereis cal
</code></pre><p>我将看到这个：</p>
<pre tabindex="0"><code>cal: /usr/bin/cal /usr/share/man/man1/cal.1.gz
</code></pre><p>仔细看一下这个回答。答案只在一行里，但它告诉我两件事：</p>
<ul>
<li><code>/usr/bin/cal</code> 是 <code>cal</code> 程序所在的地方，以及</li>
<li><code>/usr/share/man/man1/cal.1.gz</code> 是手册页所在的地方（我也知道手册页是被压缩的，但不用担心 —— <code>man</code> 命令知道如何即时解压）。</li>
</ul>
<p><code>whereis</code> 依赖于 <code>PATH</code> 环境变量；它只能告诉你文件在哪里，如果它们在你的 <code>PATH</code> 环境变量中。</p>
<p>你可能想知道是否有一个与 <code>whereis</code> 相当的 <code>man</code> 命令。没有一个命令可以告诉你可执行文件的位置，但有一个开关可以告诉你手册页的位置。在这个例子中使用 <code>date</code> 命令，如果我们输入：</p>
<pre tabindex="0"><code>whereis date
</code></pre><p>在终端提示符下，我们会看到：</p>
<pre tabindex="0"><code>date: /usr/bin/date /usr/share/man/man1/date.1.gz
</code></pre><p>我们看到 <code>date</code> 程序在 <code>/usr/bin/</code> 目录下，其手册页的名称和位置是：<code>/usr/share/man/man1/date.1.gz</code>。</p>
<p>我们可以让 <code>man</code> 像 <code>whereis</code> 一样行事，最接近的方法是使用 <code>-w</code> 开关。我们不会得到程序的位置，但我们至少可以得到手册页的位置，像这样：</p>
<pre tabindex="0"><code>man -w date
</code></pre><p>我们将看到这样的返回：</p>
<pre tabindex="0"><code>/usr/share/man/man1/date.1.gz
</code></pre><p>你知道了 <code>whatis</code> 和 <code>whereis</code>，以及让 <code>man</code> 命令做同样（或接近）事情的方法。我展示了这两种方法，有几个不同的原因。</p>
<p>多年来，我使用 <code>whatis</code> 和 <code>whereis</code>，因为它们在我的培训手册中。直到最近我才了解到 <code>man -f ...</code> 和 <code>man -w ...</code>。我确信我看了几百次 <code>man</code> 的手册页，但我从未注意到 <code>-f</code> 和 <code>-w</code> 开关。我总是在看手册页的其他东西（例如：<code>man -k ...</code>）。我只专注于我需要找到的东西，而忽略了其他的东西。一旦我找到了我需要的信息，我就会离开这个页面，去完成工作，而不去注意这个命令所提供的其他一些宝贝。</p>
<p>这没关系，因为这部分就是手册页的作用：帮助你完成工作。</p>
<p>直到最近我向别人展示如何使用手册页时，我才花时间去阅读 —— “看看还有什么可能” —— 我们才真正注意到关于 <code>man</code> 命令的 <code>-f</code> 和 <code>-w</code> 标记可以做什么的信息。</p>
<p>不管你使用 Linux 多久了，或者多么有经验，总有一些新东西需要学习。</p>
<p>手册页会告诉你在完成某项任务时可能需要知道的东西 —— 但它们也有很多内容 —— 足以让你看起来像个魔术师，但前提是你要花时间去读。</p>
<h4 id="结论">结论<a hidden class="anchor" aria-hidden="true" href="#结论">#</a></h4>
<p>如果你花一些时间和精力在手册页上，你将会取得胜利。你对手册页的熟练程度，将在你掌握 Linux 的过程中发挥巨大作用。</p>
<h4 id="tldrhttpsgithubcomtldr-pagestldr"><a href="https://github.com/tldr-pages/tldr">tldr</a><a hidden class="anchor" aria-hidden="true" href="#tldrhttpsgithubcomtldr-pagestldr">#</a></h4>
<p>Collaborative cheatsheets for console commands</p>
<p>“TLDR” 是流行的互联网行话，意思是“太长不读（to long didn&rsquo;t read）”。这就是他们创建 tldr 的想法。如果你觉得手册页太长而不想阅读，tldr 通过提供命令的实际例子而将其简化了。</p>
<h3 id="lshttpslinuxcnarticle-11159-1html"><a href="https://linux.cn/article-11159-1.html">ls</a><a hidden class="anchor" aria-hidden="true" href="#lshttpslinuxcnarticle-11159-1html">#</a></h3>
<p><code>ls</code> 命令可以列出一个 <a href="https://opensource.com/article/19/7/what-posix-richard-stallman-explains">POSIX</a> 系统上的文件。这是一个简单的命令，但它经常被低估，不是它能做什么（因为它确实只做了一件事），而是你该如何优化对它的使用。</p>
<h4 id="gnu-还是-bsd">GNU 还是 BSD？<a hidden class="anchor" aria-hidden="true" href="#gnu-还是-bsd">#</a></h4>
<p>在了解 <code>ls</code> 的隐藏能力之前，你必须确定你正在运行哪个 <code>ls</code> 命令。有两个最流行的版本：包含在 GNU coreutils 包中的 GNU 版本，以及 BSD 版本。如果你正在运行 Linux，那么你很可能已经安装了 GNU 版本的 <code>ls</code>。如果你正在运行 BSD 或 MacOS，那么你有的是 BSD 版本。本文会介绍它们的不同之处。</p>
<p>你可以使用 <code>--version</code> 选项找出你计算机上的版本：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls --version
</code></pre></div><p>如果它返回有关 GNU coreutils 的信息，那么你拥有的是 GNU 版本。如果它返回一个错误，你可能正在运行的是 BSD 版本（运行 <code>man ls | head</code> 以确定）。</p>
<p>你还应该调查你的发行版可能具有哪些预设选项。终端命令的自定义通常放在 <code>$HOME/.bashrc</code> 或 <code>$HOME/.bash_aliases</code> 或 <code>$HOME/.profile</code> 中，它们是通过将 <code>ls</code> 别名化为更复杂的 <code>ls</code> 命令来完成的。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">alias ls<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls --color&#39;</span>
</code></pre></div><p>发行版提供的预设非常有用，但它们确实很难分辨出哪些是 <code>ls</code> 本身的特性，哪些是它的附加选项提供的。你要是想要运行 <code>ls</code> 命令本身而不是它的别名，你可以用反斜杠“转义”命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#ae81ff">\l</span>s
</code></pre></div><h4 id="分类">分类<a hidden class="anchor" aria-hidden="true" href="#分类">#</a></h4>
<p>单独运行 <code>ls</code> 会以适合你终端的列数列出文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls ~/example
bunko        jdk-10.0.2
chapterize   otf2ttf.ff
despacer     overtar.sh
estimate.sh  pandoc-2.7.1
fop-2.3      safe_yaml
games        tt
</code></pre></div><p>这是有用的信息，但所有这些文件看起来基本相同，没有方便的图标来快速表示出哪个是目录、文本文件或图像等等。</p>
<p>使用 <code>-F</code>（或 GNU 上的长选项 <code>--classify</code>）以在每个条目之后显示标识文件类型的指示符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls ~/example
bunko         jdk-10.0.2/
chapterize*   otf2ttf.ff*
despacer*     overtar.sh*
estimate.sh   pandoc@
fop-2.3/      pandoc-2.7.1/
games/        tt*
</code></pre></div><p>使用此选项，终端中列出的项目使用简写符号来按文件类型分类：</p>
<ul>
<li>斜杠（<code>/</code>）表示目录（或“文件夹”）。</li>
<li>星号（<code>*</code>）表示可执行文件。这包括二进制文件（编译代码）以及脚本（具有<a href="https://opensource.com/article/19/6/understanding-linux-permissions">可执行权限</a>的文本文件）。</li>
<li>符号（<code>@</code>）表示符号链接（或“别名”）。</li>
<li>等号（<code>=</code>）表示套接字。</li>
<li>在 BSD 上，百分号（<code>%</code>）表示涂改whiteout（某些文件系统上的文件删除方法）。</li>
<li>在 GNU 上，尖括号（<code>&gt;</code>）表示门door（<a href="https://www.illumos.org/">Illumos</a> 和 Solaris上的进程间通信）。</li>
<li>竖线（<code>|</code>）表示 <a href="https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)">FIFO</a> 管道。   这个选项的一个更简单的版本是 <code>-p</code>，它只区分文件和目录。</li>
</ul>
<p>（LCTT 译注：在支持彩色的终端上，使用 <code>--color</code> 选项可以以不同的颜色来区分文件类型，但要注意如果将输出导入到管道中，则颜色消失。）</p>
<h4 id="长列表">长列表<a hidden class="anchor" aria-hidden="true" href="#长列表">#</a></h4>
<p>从 <code>ls</code> 获取“长列表”的做法是如此常见，以至于许多发行版将 <code>ll</code> 别名为 <code>ls -l</code>。长列表提供了许多重要的文件属性，例如权限、拥有每个文件的用户、文件所属的组、文件大小（以字节为单位）以及文件上次更改的日期：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -l
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users         <span style="color:#ae81ff">455</span> Mar  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">2017</span> estimate.sh
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth users         <span style="color:#ae81ff">662</span> Apr <span style="color:#ae81ff">29</span> 22:27 factorial
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users    <span style="color:#ae81ff">20697793</span> Jun <span style="color:#ae81ff">29</span>  <span style="color:#ae81ff">2018</span> fop-2.3-bin.tar.gz
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth users        <span style="color:#ae81ff">6210</span> May <span style="color:#ae81ff">22</span> 10:22 geteltorito
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users         <span style="color:#ae81ff">177</span> Nov <span style="color:#ae81ff">12</span>  <span style="color:#ae81ff">2018</span> html4mutt.sh
<span style="color:#f92672">[</span>...<span style="color:#f92672">]</span>
</code></pre></div><p>如果你不想以字节为单位，请添加 <code>-h</code> 标志（或 GNU 中的 <code>--human</code>）以将文件大小转换为更加人性化的表示方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls --human
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users    <span style="color:#ae81ff">455</span> Mar  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">2017</span> estimate.sh
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth seth     <span style="color:#ae81ff">662</span> Apr <span style="color:#ae81ff">29</span> 22:27 factorial
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users    20M Jun <span style="color:#ae81ff">29</span>  <span style="color:#ae81ff">2018</span> fop-2.3-bin.tar.gz
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth seth    6.1K May <span style="color:#ae81ff">22</span> 10:22 geteltorito
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users    <span style="color:#ae81ff">177</span> Nov <span style="color:#ae81ff">12</span>  <span style="color:#ae81ff">2018</span> html4mutt.sh
</code></pre></div><p>要看到更少的信息，你可以带有 <code>-o</code> 选项只显示所有者的列，或带有 <code>-g</code> 选项只显示所属组的列：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -o
-rwxrwx---. <span style="color:#ae81ff">1</span> seth    <span style="color:#ae81ff">455</span> Mar  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">2017</span> estimate.sh
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth    <span style="color:#ae81ff">662</span> Apr <span style="color:#ae81ff">29</span> 22:27 factorial
-rwxrwx---. <span style="color:#ae81ff">1</span> seth    20M Jun <span style="color:#ae81ff">29</span>  <span style="color:#ae81ff">2018</span> fop-2.3-bin.tar.gz
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth   6.1K May <span style="color:#ae81ff">22</span> 10:22 geteltorito
-rwxrwx---. <span style="color:#ae81ff">1</span> seth    <span style="color:#ae81ff">177</span> Nov <span style="color:#ae81ff">12</span>  <span style="color:#ae81ff">2018</span> html4mutt.sh
</code></pre></div><p>也可以将两个选项组合使用以显示两者。</p>
<h4 id="时间和日期格式">时间和日期格式<a hidden class="anchor" aria-hidden="true" href="#时间和日期格式">#</a></h4>
<p><code>ls</code> 的长列表格式通常如下所示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-rwxrwx---. <span style="color:#ae81ff">1</span> seth users         <span style="color:#ae81ff">455</span> Mar  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">2017</span> estimate.sh
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth users         <span style="color:#ae81ff">662</span> Apr <span style="color:#ae81ff">29</span> 22:27 factorial
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users    <span style="color:#ae81ff">20697793</span> Jun <span style="color:#ae81ff">29</span>  <span style="color:#ae81ff">2018</span> fop-2.3-bin.tar.gz
-rwxrwxr-x. <span style="color:#ae81ff">1</span> seth users        <span style="color:#ae81ff">6210</span> May <span style="color:#ae81ff">22</span> 10:22 geteltorito
-rwxrwx---. <span style="color:#ae81ff">1</span> seth users         <span style="color:#ae81ff">177</span> Nov <span style="color:#ae81ff">12</span>  <span style="color:#ae81ff">2018</span> html4mutt.sh
</code></pre></div><p>月份的名字不便于排序，无论是通过计算还是识别（取决于你的大脑是否倾向于喜欢字符串或整数）。你可以使用 <code>--time-style</code> 选项和格式名称更改时间戳的格式。可用格式为：</p>
<ul>
<li><code>full-iso</code>：ISO 完整格式（1970-01-01 21:12:00）</li>
<li><code>long-iso</code>：ISO 长格式（1970-01-01 21:12）</li>
<li><code>iso</code>：iso 格式（01-01 21:12）</li>
<li><code>locale</code>：本地化格式（使用你的区域设置）</li>
<li><code>posix-STYLE</code>：POSIX 风格（用区域设置定义替换 <code>STYLE</code>）</li>
</ul>
<p>你还可以使用 <code>date</code> 命令的正式表示法创建自定义样式。</p>
<h4 id="按时间排序">按时间排序<a hidden class="anchor" aria-hidden="true" href="#按时间排序">#</a></h4>
<p>通常，<code>ls</code> 命令按字母顺序排序。你可以使用 <code>-t</code> 选项根据文件的最近更改的时间（最新的文件最先列出）进行排序。</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ touch foo bar baz
$ ls
bar  baz  foo
$ touch foo
$ ls -t
foo bar baz
</code></pre></div><h4 id="列出方式">列出方式<a hidden class="anchor" aria-hidden="true" href="#列出方式">#</a></h4>
<p><code>ls</code> 的标准输出平衡了可读性和空间效率，但有时你需要按照特定方式排列的文件列表。</p>
<p>要以逗号分隔文件列表，请使用 <code>-m</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ls -m ~/example
bar, baz, foo
</code></pre></div><p>要强制每行一个文件，请使用 <code>-1</code> 选项（这是数字 1，而不是小写的 L）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -1 ~/bin/
bar
baz
foo
</code></pre></div><p>要按文件扩展名而不是文件名对条目进行排序，请使用 <code>-X</code>（这是大写 X）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls
bar.xfc  baz.txt  foo.asc
$ ls -X
foo.asc  baz.txt  bar.xfc
</code></pre></div><h4 id="隐藏杂项">隐藏杂项<a hidden class="anchor" aria-hidden="true" href="#隐藏杂项">#</a></h4>
<p>在某些 <code>ls</code> 列表中有一些你可能不关心的条目。例如，元字符 <code>.</code> 和 <code>..</code> 分别代表“本目录”和“父目录”。如果你熟悉在终端中如何切换目录，你可能已经知道每个目录都将自己称为 <code>.</code>，并将其父目录称为 <code>..</code>，因此当你使用 <code>-a</code> 选项显示隐藏文件时并不需要它经常提醒你。</p>
<p>要显示几乎所有隐藏文件（<code>.</code> 和 <code>..</code> 除外），请使用 <code>-A</code> 选项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -a
.
..
.android
.atom
.bash_aliases
<span style="color:#f92672">[</span>...<span style="color:#f92672">]</span>
$ ls -A
.android
.atom
.bash_aliases
<span style="color:#f92672">[</span>...<span style="color:#f92672">]</span>
</code></pre></div><p>有许多优秀的 Unix 工具有保存备份文件的传统，它们会在保存文件的名称后附加一些特殊字符作为备份文件。例如，在 Vim 中，备份会以在文件名后附加 <code>~</code> 字符的文件名保存。</p>
<p>这些类型的备份文件已经多次使我免于愚蠢的错误，但是经过多年享受它们提供的安全感后，我觉得不需要用视觉证据来证明它们存在。我相信 Linux 应用程序可以生成备份文件（如果它们声称这样做的话），我很乐意相信它们存在 —— 而不用必须看到它们。</p>
<p>要隐藏备份文件，请使用 <code>-B</code> 或 <code>--ignore-backups</code> 隐藏常用备份格式（此选项在 BSD 的 <code>ls</code> 中不可用）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls
bar.xfc  baz.txt  foo.asc~  foo.asc
$ ls -B
bar.xfc  baz.txt  foo.asc
</code></pre></div><p>当然，备份文件仍然存在；它只是过滤掉了，你不必看到它。</p>
<p>除非另有配置，GNU Emacs 在文件名的开头和结尾添加哈希字符（<code>＃</code>）来保存备份文件（<code>#file＃</code>）。其他应用程序可能使用不同的样式。使用什么模式并不重要，因为你可以使用 <code>--hide</code> 选项创建自己的排除项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls
bar.xfc  baz.txt  <span style="color:#75715e">#foo.asc#  foo.asc</span>
$ ls --hide<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#*#&#34;</span>
bar.xfc  baz.txt  foo.asc
</code></pre></div><h4 id="递归地列出目录">递归地列出目录<a hidden class="anchor" aria-hidden="true" href="#递归地列出目录">#</a></h4>
<p>除非你在指定目录上运行 <code>ls</code>，否则子目录的内容不会与 <code>ls</code> 命令一起列出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -F
example/  quux*  xyz.txt
$ ls -R
quux  xyz.txt
./example:
bar.xfc  baz.txt  <span style="color:#75715e">#foo.asc#  foo.asc</span>
</code></pre></div><h4 id="使用别名使其永久化">使用别名使其永久化<a hidden class="anchor" aria-hidden="true" href="#使用别名使其永久化">#</a></h4>
<p><code>ls</code> 命令可能是 shell 会话期间最常使用的命令。这是你的眼睛和耳朵，为你提供上下文信息和确认命令的结果。虽然有很多选项很有用，但 <code>ls</code> 之美的一部分就是简洁：两个字符和回车键，你就知道你到底在哪里以及附近有什么。如果你不得不停下思考（更不用说输入）几个不同的选项，它会变得不那么方便，所以通常情况下，即使最有用的选项也不会用了。</p>
<p>解决方案是为你的 <code>ls</code> 命令添加别名，以便在使用它时，你可以获得最关心的信息。</p>
<p>要在 Bash shell 中为命令创建别名，请在主目录中创建名为 <code>.bash_aliases</code> 的文件（必须在开头包含 <code>.</code>）。 在此文件中，列出要创建的别名，然后是要为其创建别名的命令。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">alias ls<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -A -F -B --human --color&#39;</span>
</code></pre></div><p>这一行导致你的 Bash shell 将 <code>ls</code> 命令解释为 <code>ls -A -F -B --human --color</code>。</p>
<p>你不必仅限于重新定义现有命令，还可以创建自己的别名：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">alias ll<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -l&#39;</span>
alias la<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -A&#39;</span>
alias lh<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -h&#39;</span>
</code></pre></div><p>要使别名起作用，shell 必须知道 <code>.bash_aliases</code> 配置文件存在。在编辑器中打开 <code>.bashrc</code> 文件（如果它不存在则创建它），并包含以下代码块：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -e $HOME/.bash_aliases <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    source $HOME/.bash_aliases
<span style="color:#66d9ef">fi</span>
</code></pre></div><p>每次加载 <code>.bashrc</code>（这是一个新的 Bash shell 启动的时候），Bash 会将 <code>.bash_aliases</code> 加载到你的环境中。你可以关闭并重新启动 Bash 会话，或者直接强制它执行此操作：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ source ~/.bashrc
</code></pre></div><p>如果你忘了你是否有别名命令，<code>which</code> 命令可以告诉你：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ which ls
alias ls<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -A -F -B --human --color&#39;</span>
        /usr/bin/ls
</code></pre></div><p>如果你将 <code>ls</code> 命令别名为带有选项的 <code>ls</code> 命令，则可以通过将反斜杠前缀到 <code>ls</code> 前来覆盖你的别名。例如，在示例别名中，使用 <code>-B</code> 选项隐藏备份文件，这意味着无法使用 <code>ls</code> 命令显示备份文件。 可以覆盖该别名以查看备份文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls
bar  baz  foo
$ <span style="color:#ae81ff">\l</span>s
bar  baz  baz~  foo
</code></pre></div><h4 id="做一件事把它做好">做一件事，把它做好<a hidden class="anchor" aria-hidden="true" href="#做一件事把它做好">#</a></h4>
<p><code>ls</code> 命令有很多选项，其中许多是特定用途的或高度依赖于你所使用的终端。在 GNU 系统上查看 <code>info ls</code>，或在 GNU 或 BSD 系统上查看 <code>man ls</code> 以了解更多选项。</p>
<p>你可能会觉得奇怪的是，一个以每个工具“做一件事，把它做好”的前提而闻名的系统会让其最常见的命令背负 50 个选项。但是 <code>ls</code> 只做一件事：它列出文件，而这 50 个选项允许你控制接收列表的方式，<code>ls</code> 的这项工作做得非常、<em>非常</em>好。</p>
<h4 id="exahttpsgithubcomoghamexa"><a href="https://github.com/ogham/exa">exa</a><a hidden class="anchor" aria-hidden="true" href="#exahttpsgithubcomoghamexa">#</a></h4>
<p>A modern replacement for ‘ls’.</p>
<h3 id="du-disk-usagehttpslinuxcnarticle-11503-1html"><a href="https://linux.cn/article-11503-1.html">du (Disk Usage)</a><a hidden class="anchor" aria-hidden="true" href="#du-disk-usagehttpslinuxcnarticle-11503-1html">#</a></h3>
<p>在 Linux 中使用 ls 命令 列出的目录内容中，目录的大小仅显示 4KB。这是一个默认的大小，是用来存储磁盘上存储目录的元数据的大小。</p>
<p>du 命令 表示 磁盘使用率。这是一个标准的 Unix 程序，用于估计当前工作目录中的文件空间使用情况。</p>
<p>它使用递归方式总结磁盘使用情况，以获取目录及其子目录的大小。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ du -hs --max-depth<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> /path/dir
</code></pre></div><ul>
<li><code>du</code> – 这是一个命令</li>
<li><code>-h</code> – 以易读的格式显示大小 (例如 1K 234M 2G)</li>
<li><code>-s</code> – 仅显示每个参数的总数</li>
<li><code>--max-depth=N</code> – 目录的打印深度</li>
</ul>
<h4 id="ncurses-disk-usagehttpsdevyorhelnlncdu"><a href="https://dev.yorhel.nl/ncdu">NCurses Disk Usage</a><a hidden class="anchor" aria-hidden="true" href="#ncurses-disk-usagehttpsdevyorhelnlncdu">#</a></h4>
<p>Ncdu is a disk usage analyzer with an ncurses interface.</p>
<p><code>ncdu</code> 命令旨在提供一份关于你在硬盘上使用的空间的交互式报告。</p>
<h4 id="gduhttpsgithubcomdundeegdu"><a href="https://github.com/dundee/gdu">gdu</a><a hidden class="anchor" aria-hidden="true" href="#gduhttpsgithubcomdundeegdu">#</a></h4>
<p>Fast disk usage analyzer with console interface written in Go</p>
<h3 id="diffhttpswwwruanyifengcomblog201208how_to_read_diffhtml"><a href="https://www.ruanyifeng.com/blog/2012/08/how_to_read_diff.html">Diff</a><a hidden class="anchor" aria-hidden="true" href="#diffhttpswwwruanyifengcomblog201208how_to_read_diffhtml">#</a></h3>
<p>diff是Unix系统的一个很重要的工具程序。</p>
<p>它用来比较两个文本文件的差异，是代码版本管理的基石之一。你在命令行下，输入：</p>
<pre tabindex="0"><code>$ diff &lt;变动前的文件&gt; &lt;变动后的文件&gt;
</code></pre><p>diff就会告诉你，这两个文件有何差异。它的显示结果不太好懂，下面我就来说明，如何读懂diff。</p>
<h4 id="三种格式">三种格式<a hidden class="anchor" aria-hidden="true" href="#三种格式">#</a></h4>
<p>由于历史原因，diff有三种格式：</p>
<ul>
<li>正常格式（normal diff）</li>
<li>上下文格式（context diff）</li>
<li>合并格式（unified diff）</li>
</ul>
<p>我们依次来看。</p>
<h4 id="示例文件">示例文件<a hidden class="anchor" aria-hidden="true" href="#示例文件">#</a></h4>
<p>为了便于讲解，先新建两个示例文件。</p>
<p>第一个文件叫做f1，内容是每行一个a，一共7行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">a
a
a
a
a
a
a
</code></pre></div><p>第二个文件叫做f2，修改f1而成，第4行变成b，其他不变。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">a
a
a
b
a
a
a
</code></pre></div><h4 id="正常格式">正常格式<a hidden class="anchor" aria-hidden="true" href="#正常格式">#</a></h4>
<p>现在对f1和f2进行比较：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff f1 f2
</code></pre></div><p>这时，diff就会显示正常格式的结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">4c4
&lt; a
---
&gt; b
</code></pre></div><p>第一行是一个提示，用来说明变动位置。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">4c4
</code></pre></div><p>它分成三个部分：前面的&quot;4&quot;，表示f1的第4行有变化；中间的&quot;c&quot;表示变动的模式是内容改变（change），其他模式还有&quot;增加&quot;（a，代表addition）和&quot;删除&quot;（d，代表deletion）；后面的&quot;4&quot;，表示变动后变成f2的第4行。</p>
<p>第二行分成两个部分。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt; a
</code></pre></div><p>前面的小于号，表示要从f1当中去除该行（也就是第4行），后面的&quot;a&quot;表示该行的内容。</p>
<p>第三行用来分割f1和f2。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">---
</code></pre></div><p>第四行，类似于第二行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; b
</code></pre></div><p>前面的大于号表示f2增加了该行，后面的&quot;b&quot;表示该行的内容。</p>
<p>最早的<a href="https://www.ruanyifeng.com/blog/2010/03/unix_copyright_history.html">Unix</a>（即AT&amp;T版本的Unix），使用的就是这种格式的diff。</p>
<h4 id="上下文格式">上下文格式<a hidden class="anchor" aria-hidden="true" href="#上下文格式">#</a></h4>
<p>上个世纪80年代初，加州大学伯克利分校推出BSD版本的Unix时，觉得diff的显示结果太简单，最好加入上下文，便于了解发生的变动。因此，推出了上下文格式的diff。</p>
<p>它的使用方法是加入c参数（代表context）。</p>
<pre tabindex="0"><code>$ diff -c f1 f2
</code></pre><p>显示结果如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">*** f1 2012-08-29 16:45:41.000000000 +0800
--- f2 2012-08-29 16:45:51.000000000 +0800
***************
*** 1,7 ****
a
a
a
!a
a
a
a
--- 1,7 ----
a
a
a
!b
a
a
a
</code></pre></div><p>这个结果分成四个部分。</p>
<p>第一部分的两行，显示两个文件的基本情况：文件名和时间信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">*** f1 2012-08-29 16:45:41.000000000 +0800
--- f2 2012-08-29 16:45:51.000000000 +0800
</code></pre></div><p><code>***</code>表示变动前的文件，<code>---</code>表示变动后的文件。</p>
<p>第二部分是15个星号，将文件的基本情况与变动内容分割开。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">***************
</code></pre></div><p>第三部分显示变动前的文件，即f1。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">*** 1,7 ****
a
a
a
!a
a
a
a
</code></pre></div><p>这时不仅显示发生变化的第4行，还显示第4行的前面三行和后面三行，因此一共显示7行。所以，前面的<code>*** 1,7 ****</code>就表示，从第1行开始连续7行。</p>
<p>另外，文件内容的每一行最前面，还有一个标记位。如果为空，表示该行无变化；如果是感叹号（!），表示该行有改动；如果是减号（-），表示该行被删除；如果是加号（+），表示该行为新增。</p>
<p>第四部分显示变动后的文件，即f2。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--- 1,7 ----
a
a
a
!b
a
a
a
</code></pre></div><p>除了变动行（第4行）以外，也是上下文各显示三行，总共显示7行。</p>
<h4 id="合并格式">合并格式<a hidden class="anchor" aria-hidden="true" href="#合并格式">#</a></h4>
<p>如果两个文件相似度很高，那么上下文格式的diff，将显示大量重复的内容，很浪费空间。1990年，GNU diff率先推出了&quot;合并格式&quot;的diff，将f1和f2的上下文合并在一起显示。</p>
<p>它的使用方法是加入u参数（代表unified）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ diff -u f1 f2
</code></pre></div><p>显示结果如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--- f1 2012-08-29 16:45:41.000000000 +0800
+++ f2 2012-08-29 16:45:51.000000000 +0800
@@ -1,7 +1,7 @@
a
a
a
-a
+b
a
a
a
</code></pre></div><p>它的第一部分，也是文件的基本信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--- f1 2012-08-29 16:45:41.000000000 +0800
+++ f2 2012-08-29 16:45:51.000000000 +0800
</code></pre></div><p><code>---</code>表示变动前的文件，<code>+++</code>表示变动后的文件。</p>
<p>第二部分，变动的位置用两个@作为起首和结束。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">@@ -1,7 +1,7 @@
</code></pre></div><p>前面的&quot;-1,7&quot;分成三个部分：减号表示第一个文件（即f1），&ldquo;1&quot;表示第1行，&ldquo;7&quot;表示连续7行。合在一起，就表示下面是第一个文件从第1行开始的连续7行。同样的，&quot;+1,7&quot;表示变动后，成为第二个文件从第1行开始的连续7行。</p>
<p>第三部分是变动的具体内容。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">a
a
a
-a
+b
a
a
a
</code></pre></div><p>除了有变动的那些行以外，也是上下文各显示3行。它将两个文件的上下文，合并显示在一起，所以叫做&quot;合并格式&rdquo;。每一行最前面的标志位，空表示无变动，减号表示第一个文件删除的行，加号表示第二个文件新增的行。</p>
<h4 id="git格式">git格式<a hidden class="anchor" aria-hidden="true" href="#git格式">#</a></h4>
<p>版本管理系统git，使用的是合并格式diff的变体。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git diff
</code></pre></div><p>显示结果如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">diff --git a/f1 b/f1
index 6f8a38c..449b072 <span style="color:#ae81ff">100644</span>
--- a/f1
+++ b/f1
@@ -1,7 +1,7 @@
a
a
a
-a
+b
a
a
a
</code></pre></div><p>第一行表示结果为git格式的diff。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">diff --git a/f1 b/f1
</code></pre></div><p>进行比较的是，a版本的f1（即变动前）和b版本的f1（即变动后）。</p>
<p>第二行表示两个版本的git哈希值（index区域的6f8a38c对象，与工作目录区域的449b072对象进行比较），最后的六位数字是对象的模式（普通文件，644权限）。　</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">index 6f8a38c..449b072 <span style="color:#ae81ff">100644</span>
</code></pre></div><p>第三行表示进行比较的两个文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--- a/f1
+++ b/f1
</code></pre></div><p><code>---</code>表示变动前的版本，<code>+++</code>表示变动后的版本。</p>
<p>后面的行都与官方的合并格式diff相同。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">@@ -1,7 +1,7 @@
a
a
a
-a
+b
a
a
a
</code></pre></div><h3 id="crontabhttpcbianchengnetview1092html"><a href="http://c.biancheng.net/view/1092.html">Crontab</a><a hidden class="anchor" aria-hidden="true" href="#crontabhttpcbianchengnetview1092html">#</a></h3>
<p>使用 crontab 命令来执行定时任务。所谓定时任务，就是未来的某个或多个时点，预定要执行的任务，比如每五分钟收一次邮件、每天半夜两点分析一下日志等等。</p>
<h4 id="installing">Installing<a hidden class="anchor" aria-hidden="true" href="#installing">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install cronie
</code></pre></div><h4 id="running">Running<a hidden class="anchor" aria-hidden="true" href="#running">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl enable crond.service
$ systemctl start crond.service
</code></pre></div><h4 id="命令详解">命令详解<a hidden class="anchor" aria-hidden="true" href="#命令详解">#</a></h4>
<p>crontab 命令通过 /etc/cron.allow 和 /etc/cron.deny 文件来限制某些用户是否可以使用 crontab 命令：</p>
<ul>
<li>当系统中有 /etc/cron.allow 文件时，只有写入此文件的用户可以使用 crontab 命令，没有写入的用户不能使用 crontab 命令。</li>
<li>当系统中只有 /etc/cron.deny 文件时，写入此文件的用户不能使用 crontab 命令，没有写入文件的用户可以使用 crontab 命令。</li>
<li>/etc/cron.allow 文件比 /etc/cron.deny 文件的优先级高，Linux 系统中默认只有 /etc/cron.deny 文件。</li>
</ul>
<p>crontab 命令的基本格式如下：</p>
<pre tabindex="0"><code>crontab [选项] [file]
</code></pre><p>注意，这里的 file 指的是命令文件的名字，表示将 file 作为 crontab 的任务列表文件并载入 crontab，若在命令行中未指定文件名，则此命令将接受标准输入（键盘）上键入的命令，并将它们键入 crontab。</p>
<h5 id="常用选项">常用选项<a hidden class="anchor" aria-hidden="true" href="#常用选项">#</a></h5>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>-u user</td>
<td>用来设定某个用户的 crontab 服务，例如 &ldquo;-u demo&rdquo; 表示设备 demo 用户的 crontab 服务，此选项一般有 root 用户来运行。</td>
</tr>
<tr>
<td>-e</td>
<td>编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。</td>
</tr>
<tr>
<td>-l</td>
<td>显示某用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。</td>
</tr>
<tr>
<td>-r</td>
<td>从 /var/spool/cron 删除某用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。</td>
</tr>
<tr>
<td>-i</td>
<td>在删除用户的 crontab 文件时，给确认提示。</td>
</tr>
</tbody>
</table>
<h5 id="crontab-文件格式">crontab 文件格式<a hidden class="anchor" aria-hidden="true" href="#crontab-文件格式">#</a></h5>
<pre tabindex="0"><code>* * * * * 执行的任务
</code></pre><p>执行的任务字段既可以定时执行系统命令，也可以定时执行某个 Shell 脚本。</p>
<p><strong>执行时间</strong></p>
<table>
<thead>
<tr>
<th>项目</th>
<th>含义</th>
<th>范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>第一个&rdquo;*&quot;</td>
<td>一小时当中的第几分钟（minute）</td>
<td>0~59</td>
</tr>
<tr>
<td>第二个&quot;*&quot;</td>
<td>一天当中的第几小时（hour）</td>
<td>0~23</td>
</tr>
<tr>
<td>第三个&quot;*&quot;</td>
<td>一个月当中的第几天（day）</td>
<td>1~31</td>
</tr>
<tr>
<td>第四个&quot;*&quot;</td>
<td>一年当中的第几个月（month）</td>
<td>1~12</td>
</tr>
<tr>
<td>第五个&quot;*&quot;</td>
<td>一周当中的星期几（week）</td>
<td>0~7（0和7都代表星期日）</td>
</tr>
</tbody>
</table>
<p><strong>时间特殊符号</strong></p>
<table>
<thead>
<tr>
<th>特殊符号</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*（星号）</td>
<td>代表任何时间。比如第一个&quot;*&ldquo;就代表一小时种每分钟都执行一次的意思。</td>
</tr>
<tr>
<td>,（逗号）</td>
<td>代表不连续的时间。比如&quot;0 8，12，16***命令&quot;就代表在每天的 8 点 0 分、12 点 0 分、16 点 0 分都执行一次命令。</td>
</tr>
<tr>
<td>-（中杠）</td>
<td>代表连续的时间范围。比如&quot;0 5 ** 1-6命令&rdquo;，代表在周一到周六的凌晨 5 点 0 分执行命令。</td>
</tr>
<tr>
<td>/（正斜线）</td>
<td>代表每隔多久执行一次。比如&quot;<code>*/10****命令</code>&quot;，代表每隔 10 分钟就执行一次命令。</td>
</tr>
</tbody>
</table>
<p>当“crontab -e”编辑完成之后，一旦保存退出，那么这个定时任务实际就会写入 /var/spool/cron/ 目录中，每个用户的定时任务用自己的用户名进行区分。而且 crontab 命令只要保存就会生效，只要 crond 服务是启动的。</p>
<p><strong>crontab举例</strong></p>
<table>
<thead>
<tr>
<th>时间</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>45 22 ***命令</td>
<td>在每天 22 点 45 分执行命令</td>
</tr>
<tr>
<td>0 17 ** 1命令</td>
<td>在每周一的 17 点 0 分执行命令</td>
</tr>
<tr>
<td>0 5 1，15**命令</td>
<td>在每月 1 日和 15 日的凌晨 5 点 0 分执行命令</td>
</tr>
<tr>
<td>40 4 ** 1-5命令</td>
<td>在每周一到周五的凌晨 4 点 40 分执行命令</td>
</tr>
<tr>
<td>*/10 4 ***命令</td>
<td>在每天的凌晨 4 点，每隔 10 分钟执行一次命令</td>
</tr>
<tr>
<td>0 0 1，15 * 1命令</td>
<td>在每月 1 日和 15 日，每周一 0 点 0 分都会执行命令</td>
</tr>
</tbody>
</table>
<p><strong>注意事项</strong></p>
<ul>
<li>6 个选项都不能为空，必须填写。如果不确定，则使用“*”代表任意时间。</li>
<li>crontab 定时任务的最小有效时间是分钟，最大有效时间是月。像 2018 年某时执行、3 点 30 分 30 秒这样的时间都不能被识别。</li>
<li>在定义时间时，日期和星期最好不要在一条定时任务中出现，因为它们都以天为单位，非常容易让管理员混淆。</li>
<li>在定时任务中，不管是直接写命令，还是在脚本中写命令，最好都使用绝对路径。有时使用相对路径的命令会报错。</li>
</ul>
<h4 id="run-a-script-on-startuphttpsunixstackexchangecomquestions416137how-can-i-run-a-script-on-startup-on-ubuntu-server-17-10"><a href="https://unix.stackexchange.com/questions/416137/how-can-i-run-a-script-on-startup-on-ubuntu-server-17-10">run a script on startup</a><a hidden class="anchor" aria-hidden="true" href="#run-a-script-on-startuphttpsunixstackexchangecomquestions416137how-can-i-run-a-script-on-startup-on-ubuntu-server-17-10">#</a></h4>
<p>Put the script in the appropriate user&rsquo;s <code>cron</code> table (i. e. the <em>crontab</em>) with a schedule of <code>@reboot</code>.</p>
<p>A user can edit its <code>cron</code> table with <code>crontab -e</code>.</p>
<p>An example which will run <code>/path/to/script.sh</code> at startup:</p>
<pre tabindex="0"><code class="language-bsh" data-lang="bsh">@reboot /path/to/script.sh
</code></pre><p>If you need to run it as root, don&rsquo;t use <code>@reboot sudo /path/to/script.sh</code>;
use <code>sudo crontab -eu root</code> to edit root&rsquo;s crontab.</p>
<h3 id="pshttpslinuxtools-rstreadthedocsiozh_cnlatesttoolpshtml"><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/ps.html">ps</a><a hidden class="anchor" aria-hidden="true" href="#pshttpslinuxtools-rstreadthedocsiozh_cnlatesttoolpshtml">#</a></h3>
<h4 id="简介-4">简介<a hidden class="anchor" aria-hidden="true" href="#简介-4">#</a></h4>
<p>要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而 ps 命令（Process Status）就是最基本同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。总之大部分信息都是可以通过执行该命令得到的。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些进程，如果想要动态的显示进程信息，就可以使用top命令。</p>
<p><a href="https://blog.csdn.net/qq_38410730/article/details/81173170">linux上进程有5种状态</a>：</p>
<ul>
<li>
<p>就绪状态和运行状态</p>
<p>就绪状态的状态标志state的值为TASK_RUNNING。此时，程序已被挂入运行队列，处于准备运行状态。一旦获得处理器使用权，即可进入运行状态。</p>
<p>当进程获得处理器而运行时 ，state的值仍然为TASK_RUNNING，并不发生改变；但Linux会把一个专门用来指向当前运行任务的指针current指向它，以表示它是一个正在运行的进程。</p>
</li>
<li>
<p>可中断等待状态</p>
<p>状态标志state的值为TASK_INTERRUPTIBL。此时，由于进程未获得它所申请的资源而处在等待状态。一旦资源有效或者有唤醒信号，进程会立即结束等待而进入就绪状态。</p>
</li>
<li>
<p>不可中断等待状态</p>
<p>状态标志state的值为TASK_UNINTERRUPTIBL。此时，进程也处于等待资源状态。一旦资源有效，进程会立即进入就绪状态。这个等待状态与可中断等待状态的区别在于：处于TASK_UNINTERRUPTIBL状态的进程不能被信号量或者中断所唤醒，只有当它申请的资源有效时才能被唤醒。</p>
<p>这个状态被应用在内核中某些场景中，比如当进程需要对磁盘进行读写，而此刻正在DMA中进行着数据到内存的拷贝，如果这时进程休眠被打断（比如强制退出信号）那么很可能会出现问题，所以这时进程就会处于不可被打断的状态下。</p>
</li>
<li>
<p>停止状态</p>
<p>状态标志state的值为TASK_STOPPED。当进程收到一个SIGSTOP信号后，就由运行状态进入停止状态，当受到一个SIGCONT信号时，又会恢复运行状态。这种状态主要用于程序的调试，又被叫做“暂停状态”、“挂起状态”。</p>
</li>
<li>
<p>中止状态</p>
<p>状态标志state的值为TASK_DEAD。进程因某种原因而中止运行，进程占有的所有资源将被回收，除了task_struct结构（以及少数资源）以外，并且系统对它不再予以理睬，所以这种状态也叫做“僵死状态”，进程成为僵尸进程。</p>
</li>
</ul>
<p><img loading="lazy" src="/Distributions/20180723211512765.png" alt=""  />
</p>
<p>ps 标识进程状态对应的 5 种状态码：</p>
<ul>
<li><code>R</code>：就绪状态和运行状态 runnable (on run queue)</li>
<li><code>S</code>：可中断等待状态 sleeping</li>
<li><code>D</code>：不可中断等待状态 uninterruptible sleep (usually IO)</li>
<li><code>T</code>：停止状态 traced or stopped</li>
<li><code>Z</code>：中止状态 a defunct (”zombie”) process</li>
</ul>
<p>ps 标识进程的其他状态码：</p>
<ul>
<li><code>X</code>：死掉的进程 Dead （应该不会出现）</li>
<li><code>W</code>：内存交互状态Paging （从 2.6 内核开始无效）</li>
<li><code>N</code>：高优先级</li>
<li><code>&lt;</code>：低优先级</li>
<li><code>s</code>：包含子进程</li>
<li><code>L</code>：被锁入内存</li>
<li><code>l</code>：多线程状态</li>
<li><code>+</code>：前台进程</li>
</ul>
<h4 id="命令参数httpswwwjianshucomp943b90150c10"><a href="https://www.jianshu.com/p/943b90150c10">命令参数</a><a hidden class="anchor" aria-hidden="true" href="#命令参数httpswwwjianshucomp943b90150c10">#</a></h4>
<p>在不同的 Linux 发行版上，ps 命令的语法各不相同，为此，Linux 采取了一个折中的方法，即融合各种不同的风格，兼顾那些已经习惯了其它系统上使用 ps  命令的用户。ps命令支持三种使用的语法格式：</p>
<ul>
<li>UNIX 风格，选项可以组合在一起，并且选项前必须有“-”连字符；</li>
<li>BSD 风格，选项可以组合在一起，但是选项前不能有“-”连字符；</li>
<li>GNU 风格的选项，选项前有两个“-”连字符；</li>
</ul>
<p>ps 命令常用的参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ps -a  显示所有终端下执行的进程，包含其他用户的进程
ps -A  显示所有进程
ps -e  和-A功能一样
ps -H  显示树状结构，表示程序间的相互关系
ps -f  全格式显示进程

ps a   显示当前终端下执行的进程
ps c   显示进程的真实名称
ps e   列出程序所使用的环境变量
ps f   用ASCII字符显示树状结构，表达程序间的相互关系
ps x   显示所有进程，无论是否运行在终端上
ps u   显示用户相关的进程或者与用户相关的属性
ps r   只显示正在运行的进程
</code></pre></div><h4 id="使用实例httpcbianchengnetview1062html"><a href="http://c.biancheng.net/view/1062.html">使用实例</a><a hidden class="anchor" aria-hidden="true" href="#使用实例httpcbianchengnetview1062html">#</a></h4>
<p>大家如果执行 <code>man ps</code> 命令，则会发现 ps 命令的帮助为了适应不同的类 UNIX 系统，可用格式非常多，不方便记忆。所以，我建议大家记忆几个固定选项即可。</p>
<p><strong><code>ps aux</code> 查看系统中所有的进程</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ps aux</span>
USER PID %CPU %MEM  VSZ  RSS   TTY STAT START TIME COMMAND
root   <span style="color:#ae81ff">1</span>  0.0  0.2 <span style="color:#ae81ff">2872</span> <span style="color:#ae81ff">1416</span>   ?   Ss   Jun04 0:02 /sbin/init
root   <span style="color:#ae81ff">2</span>  0.0  0.0    <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>   ?    S   Jun04 0:00 <span style="color:#f92672">[</span>kthreadd<span style="color:#f92672">]</span>
root   <span style="color:#ae81ff">3</span>  0.0  0.0    <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>   ?    S   Jun04 0:00 <span style="color:#f92672">[</span>migration/0<span style="color:#f92672">]</span>
root   <span style="color:#ae81ff">4</span>  0.0  0.0    <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>   ?    S   Jun04 0:00 <span style="color:#f92672">[</span>ksoftirqd/0<span style="color:#f92672">]</span>
…省略部分输出…
</code></pre></div><p>输出信息中各列的具体含义：</p>
<table>
<thead>
<tr>
<th>表头</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>USER</td>
<td>该进程是由哪个用户产生的。</td>
</tr>
<tr>
<td>PID</td>
<td>进程的 ID。</td>
</tr>
<tr>
<td>%CPU</td>
<td>该进程占用 CPU 资源的百分比，占用的百分比越高，进程越耗费资源。</td>
</tr>
<tr>
<td>%MEM</td>
<td>该进程占用物理内存的百分比，占用的百分比越高，进程越耗费资源。</td>
</tr>
<tr>
<td>VSZ</td>
<td>该进程占用虚拟内存的大小，单位为 KB。</td>
</tr>
<tr>
<td>RSS</td>
<td>该进程占用实际物理内存的大小，单位为 KB。</td>
</tr>
<tr>
<td>TTY</td>
<td>该进程是在哪个终端运行的。其中，tty1 ~ tty7 代表本地控制台终端（可以通过 Alt+F1 ~ F7 快捷键切换不同的终端），tty1~tty6 是本地的字符界面终端，tty7 是图形终端。pts/0 ~ 255 代表虚拟终端，一般是远程连接的终端，第一个远程连接占用 pts/0，第二个远程连接占用 pts/1，依次増长。</td>
</tr>
<tr>
<td>STAT</td>
<td>进程状态。</td>
</tr>
<tr>
<td>START</td>
<td>该进程的启动时间。</td>
</tr>
<tr>
<td>TIME</td>
<td>该进程占用 CPU 的运算时间，注意不是系统时间。</td>
</tr>
<tr>
<td>COMMAND</td>
<td>产生此进程的命令名。</td>
</tr>
</tbody>
</table>
<p><strong><code>ps -le</code> 查看系统中所有的进程</strong></p>
<p><code>ps aux</code> 命令可以看到系统中所有的进程，<code>ps -le</code> 命令也能看到系统中所有的进程。由于 <code>-l</code> 选项的作用，所以 <code>ps -le</code> 命令能够看到更加详细的信息，比如父进程的 PID、优先级等。但是这两个命令的基本作用是一致的，掌握其中一个就足够了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ps -le</span>
F S UID PID PPID C  PRI Nl ADDR  SZ WCHAN TTY      TIME  CMD
<span style="color:#ae81ff">4</span> S   <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">80</span>   <span style="color:#ae81ff">0</span> -    <span style="color:#ae81ff">718</span> -     ?    00:00:02  init
<span style="color:#ae81ff">1</span> S   <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">80</span>   <span style="color:#ae81ff">0</span> -      <span style="color:#ae81ff">0</span> -     ?    00:00:00  kthreadd
<span style="color:#ae81ff">1</span> S   <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">3</span>    <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">0</span> -40   - -      <span style="color:#ae81ff">0</span> -     ?    00:00:00  migration/0
<span style="color:#ae81ff">1</span> S   <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">4</span>    <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">80</span>   <span style="color:#ae81ff">0</span> -      <span style="color:#ae81ff">0</span> -     ?    00:00:00  ksoflirqd/0
<span style="color:#ae81ff">1</span> S   <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">5</span>    <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">0</span> -40   - -      <span style="color:#ae81ff">0</span> -     ?    00:00:00  migration/0
…省略部分输出…
</code></pre></div><p>输出信息中各列的含义：</p>
<table>
<thead>
<tr>
<th>表头</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>F</td>
<td>进程标志，说明进程的权限，常见的标志有两个: 1：进程可以被复制，但是不能被执行；4：进程使用超级用户权限；</td>
</tr>
<tr>
<td>S</td>
<td>进程状态。具体的状态和&quot;psaux&quot;命令中的 STAT 状态一致；</td>
</tr>
<tr>
<td>UID</td>
<td>运行此进程的用户的 ID；</td>
</tr>
<tr>
<td>PID</td>
<td>进程的 ID；</td>
</tr>
<tr>
<td>PPID</td>
<td>父进程的 ID；</td>
</tr>
<tr>
<td>C</td>
<td>该进程的 CPU 使用率，单位是百分比；</td>
</tr>
<tr>
<td>PRI</td>
<td>进程的优先级，数值越小，该进程的优先级越高，越早被 CPU 执行；</td>
</tr>
<tr>
<td>NI</td>
<td>进程的优先级，数值越小，该进程越早被执行；</td>
</tr>
<tr>
<td>ADDR</td>
<td>该进程在内存的哪个位置；</td>
</tr>
<tr>
<td>SZ</td>
<td>该进程占用多大内存；</td>
</tr>
<tr>
<td>WCHAN</td>
<td>该进程是否运行。&quot;-&ldquo;代表正在运行；</td>
</tr>
<tr>
<td>TTY</td>
<td>该进程由哪个终端产生；</td>
</tr>
<tr>
<td>TIME</td>
<td>该进程占用 CPU 的运算时间，注意不是系统时间；</td>
</tr>
<tr>
<td>CMD</td>
<td>产生此进程的命令名；</td>
</tr>
</tbody>
</table>
<p><strong><code>ps -l</code> 查看当前 Shell 产生的进程</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ps -l</span>
F S UID   PID  PPID C PRI NI ADDR SZ WCHAN TTY       TIME CMD
<span style="color:#ae81ff">4</span> S <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">18618</span> <span style="color:#ae81ff">18614</span> <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">80</span>  <span style="color:#ae81ff">0</span> - <span style="color:#ae81ff">1681</span>  -     pts/1 00:00:00 bash
<span style="color:#ae81ff">4</span> R <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">18683</span> <span style="color:#ae81ff">18618</span> <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">80</span>  <span style="color:#ae81ff">0</span> - <span style="color:#ae81ff">1619</span>  -     pts/1 00:00:00 ps
</code></pre></div><h3 id="tophttpcbianchengnetview1065html"><a href="http://c.biancheng.net/view/1065.html">top</a><a hidden class="anchor" aria-hidden="true" href="#tophttpcbianchengnetview1065html">#</a></h3>
<h4 id="简介httpslinuxtools-rstreadthedocsiozh_cnlatesttooltophtml"><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/top.html">简介</a><a hidden class="anchor" aria-hidden="true" href="#简介httpslinuxtools-rstreadthedocsiozh_cnlatesttooltophtml">#</a></h4>
<p>top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。</p>
<p>top显示系统当前的进程和其他状况，是一个动态显示过程，即可以通过用户按键来不断刷新当前状态。如果在前台执行该命令，它将独占前台，直到用户终止该程序为止。</p>
<p>比较准确的说，top命令提供了实时的对系统处理器的状态监视。它将显示系统中CPU最“敏感”的任务列表。该命令可以按CPU使用、内存使用和执行时间对任务进行排序；而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定。</p>
<h4 id="命令参数">命令参数<a hidden class="anchor" aria-hidden="true" href="#命令参数">#</a></h4>
<p>top 命令的基本格式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#top [选项]</span>
</code></pre></div><p>选项：</p>
<ul>
<li>-d 秒数：指定 top 命令每隔几秒更新。默认是 3 秒；</li>
<li>-b：使用批处理模式输出。一般和&rdquo;-n&quot;选项合用，用于把 top 命令重定向到文件中；</li>
<li>-n 次数：指定 top 命令执行的次数。一般和&quot;-b&quot;选项合用；</li>
<li>-p 进程PID：仅查看指定 ID 的进程；</li>
<li>-s：使 top 命令在安全模式中运行，避免在交互模式中出现错误；</li>
<li>-u 用户名：只监听某个用户的进程；</li>
</ul>
<h4 id="交互操作指令">交互操作指令<a hidden class="anchor" aria-hidden="true" href="#交互操作指令">#</a></h4>
<p>在 top 命令的显示窗口中，还可以使用如下按键，进行一下交互操作：</p>
<ul>
<li>? 或 h：显示交互模式的帮助</li>
<li>P：按照 CPU 的使用率排序，默认就是此选项</li>
<li>M：按照内存的使用率排序</li>
<li>N：按照 PID 排序</li>
<li>T：按照 CPU 的累积运算时间排序，也就是按照 TIME+ 项排序</li>
<li>k：按照 PID 给予某个进程一个信号。一般用于中止某个进程，信号 9 是强制中止的信号</li>
<li>r：按照 PID 给某个进程重设优先级（Nice）值</li>
<li><code>&lt;Space&gt;</code>：立即刷新</li>
<li>s：设置刷新时间间隔</li>
<li>c：显示命令完全模式</li>
<li>t:：显示或隐藏进程和CPU状态信息</li>
<li>m：显示或隐藏内存状态信息</li>
<li>l：显示或隐藏uptime信息</li>
<li>f：增加或减少进程显示标志</li>
<li>S：累计模式，会把已完成或退出的子进程占用的CPU时间累计到父进程的TIME+</li>
<li>u：指定显示用户进程</li>
<li>i：只显示正在运行的进程</li>
<li>W：保存对top的设置到文件 <code>~/.toprc</code>，下次启动将自动调用toprc文件的设置。</li>
<li>q：退出</li>
</ul>
<h4 id="使用实例">使用实例<a hidden class="anchor" aria-hidden="true" href="#使用实例">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># top</span>
top - 12:26:46 up <span style="color:#ae81ff">1</span> day, 13:32, <span style="color:#ae81ff">2</span> users, load average: 0.00, 0.00, 0.00
Tasks: <span style="color:#ae81ff">95</span> total, <span style="color:#ae81ff">1</span> running, <span style="color:#ae81ff">94</span> sleeping, <span style="color:#ae81ff">0</span> stopped, <span style="color:#ae81ff">0</span> zombie
Cpu<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>: 0.1%us, 0.1%sy, 0.0%ni, 99.7%id, 0.1%wa, 0.0%hi, 0.1%si, 0.0%st
Mem: 625344k total, 571504k used, 53840k free, 65800k buffers
Swap: 524280k total, 0k used, 524280k free, 409280k cached
PID   USER PR NI VIRT  RES  SHR S %CPU %MEM   TIME+ COMMAND
<span style="color:#ae81ff">19002</span> root <span style="color:#ae81ff">20</span>  <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2656</span> <span style="color:#ae81ff">1068</span>  <span style="color:#ae81ff">856</span> R  0.3  0.2 0:01.87 top
<span style="color:#ae81ff">1</span>     root <span style="color:#ae81ff">20</span>  <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2872</span> <span style="color:#ae81ff">1416</span> <span style="color:#ae81ff">1200</span> S  0.0  0.2 0:02.55 init
<span style="color:#ae81ff">2</span>     root <span style="color:#ae81ff">20</span>  <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span> S  0.0  0.0 0:00.03 kthreadd
</code></pre></div><p><strong>第一行为任务队列信息</strong></p>
<table>
<thead>
<tr>
<th>内 容</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr>
<td>12:26:46</td>
<td>系统当前时间</td>
</tr>
<tr>
<td>up 1 day, 13:32</td>
<td>系统的运行时间.本机己经运行 1 天 13 小时 32 分钟</td>
</tr>
<tr>
<td>2 users</td>
<td>当前登录了两个用户</td>
</tr>
<tr>
<td>load average: 0.00,0.00，0.00</td>
<td>系统在之前 1 分钟、5 分钟、15 分钟的平均负载。如果 CPU 是单核的，则这个数值超过 1 就是高负载：如果 CPU 是四核的，则这个数值超过 4 就是高负载 （这个平均负载完全是依据个人经验来进行判断的，一般认为不应该超过服务器 CPU 的核数）</td>
</tr>
</tbody>
</table>
<p><strong>第二行为进程信息</strong></p>
<table>
<thead>
<tr>
<th>内 容</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tasks: 95 total</td>
<td>系统中的进程总数</td>
</tr>
<tr>
<td>1 running</td>
<td>正在运行的进程数</td>
</tr>
<tr>
<td>94 sleeping</td>
<td>睡眠的进程数</td>
</tr>
<tr>
<td>0 stopped</td>
<td>正在停止的进程数</td>
</tr>
<tr>
<td>0 zombie</td>
<td>僵尸进程数。如果不是 0，则需要手工检查僵尸进程</td>
</tr>
</tbody>
</table>
<p><strong>第三行为 CPU 信息</strong></p>
<table>
<thead>
<tr>
<th>内 容</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cpu(s): 0.1 %us</td>
<td>用户模式占用的 CPU 百分比</td>
</tr>
<tr>
<td>0.1%sy</td>
<td>系统模式占用的 CPU 百分比</td>
</tr>
<tr>
<td>0.0%ni</td>
<td>改变过优先级的用户进程占用的 CPU 百分比</td>
</tr>
<tr>
<td>99.7%id</td>
<td>空闲 CPU 占用的 CPU 百分比</td>
</tr>
<tr>
<td>0.1%wa</td>
<td>等待输入/输出的进程占用的 CPU 百分比</td>
</tr>
<tr>
<td>0.0%hi</td>
<td>硬中断请求服务占用的 CPU 百分比</td>
</tr>
<tr>
<td>0.1%si</td>
<td>软中断请求服务占用的 CPU 百分比</td>
</tr>
<tr>
<td>0.0%st</td>
<td>st（steal time）意为虚拟时间百分比，就是当有虚拟机时，虚拟 CPU 等待实际 CPU 的时间百分比</td>
</tr>
</tbody>
</table>
<p><strong>第四行为物理内存信息</strong></p>
<table>
<thead>
<tr>
<th>内 容</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mem: 625344k total</td>
<td>物理内存的总量，单位为KB</td>
</tr>
<tr>
<td>571504k used</td>
<td>己经使用的物理内存数量</td>
</tr>
<tr>
<td>53840k free</td>
<td>空闲的物理内存数量。我们使用的是虚拟机，共分配了 628MB内存，所以只有53MB的空闲内存</td>
</tr>
<tr>
<td>65800k buffers/cache</td>
<td>作为缓冲的内存数量</td>
</tr>
</tbody>
</table>
<p>缓冲（buffer）和缓存（cache）的区别：</p>
<ul>
<li>缓存（cache）是在读取硬盘中的数据时，把最常用的数据保存在内存的缓存区中，再次读取该数据时，就不去硬盘中读取了，而在缓存中读取。</li>
<li>缓冲（buffer）是在向硬盘写入数据时，先把数据放入缓冲区,然后再一起向硬盘写入，把分散的写操作集中进行，减少磁盘碎片和硬盘的反复寻道，从而提高系统性能。</li>
</ul>
<p>简单来说，缓存（cache）是用来加速数据从硬盘中&quot;读取&quot;的，而缓冲（buffer）是用来加速数据&quot;写入&quot;硬盘的。</p>
<p><strong>第五行为交换分区（swap）信息</strong></p>
<table>
<thead>
<tr>
<th>内 容</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Swap: 524280k total</td>
<td>交换分区（虚拟内存）的总大小</td>
</tr>
<tr>
<td>Ok used</td>
<td>已经使用的交换分区的大小</td>
</tr>
<tr>
<td>524280k free</td>
<td>空闲交换分区的大小</td>
</tr>
<tr>
<td>409280k cached</td>
<td>作为缓存的交换分区的大小</td>
</tr>
</tbody>
</table>
<p><strong>第六行为系统进程信息</strong></p>
<p>再来看 top 命令的第二部分输出，主要是系统进程信息，各个字段的含义如下：</p>
<ul>
<li>PID：进程的 ID。</li>
<li>USER：该进程所属的用户。</li>
<li>PR：优先级，数值越小优先级越高。</li>
<li>NI：优先级，数值越小、优先级越高。</li>
<li>VIRT：该进程使用的虚拟内存的大小，单位为 KB。</li>
<li>RES：该进程使用的物理内存的大小，单位为 KB。</li>
<li>SHR：共享内存大小，单位为 KB。</li>
<li>S：进程状态。</li>
<li>%CPU：该进程占用 CPU 的百分比。</li>
<li>%MEM：该进程占用内存的百分比。</li>
<li>TIME+：该进程共占用的 CPU 时间。</li>
<li>COMMAND：进程的命令名。</li>
</ul>
<h4 id="htophttpsgithubcomhtop-devhtop"><a href="https://github.com/htop-dev/htop/">htop</a><a hidden class="anchor" aria-hidden="true" href="#htophttpsgithubcomhtop-devhtop">#</a></h4>
<p>htop 是一个 Linux 下的交互式的进程浏览器，可以用来替换Linux下的top命令。</p>
<p>与Linux传统的top相比，htop更加人性化。它可让用户交互式操作，支持颜色主题，可横向或纵向滚动浏览进程列表，并支持鼠标操作。</p>
<h4 id="bpytophttpsgithubcomaristocratosbpytop"><a href="https://github.com/aristocratos/bpytop">bpytop</a><a hidden class="anchor" aria-hidden="true" href="#bpytophttpsgithubcomaristocratosbpytop">#</a></h4>
<p>Linux/OSX/FreeBSD resource monitor</p>
<h3 id="lsofhttpslinuxtools-rstreadthedocsiozh_cnlatesttoollsofhtml"><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/lsof.html">lsof</a><a hidden class="anchor" aria-hidden="true" href="#lsofhttpslinuxtools-rstreadthedocsiozh_cnlatesttoollsofhtml">#</a></h3>
<h4 id="简介httpcbianchengnetview1088html"><a href="http://c.biancheng.net/view/1088.html">简介</a><a hidden class="anchor" aria-hidden="true" href="#简介httpcbianchengnetview1088html">#</a></h4>
<p>lsof 命令，“list opened files”的缩写，直译过来，就是列举系统中已经被打开的文件。通过 lsof 命令，我们就可以根据文件找到对应的进程信息，也可以根据进程信息找到进程打开的文件。</p>
<p>在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。如传输控制协议 (TCP) 和用户数据报协议 (UDP) 套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该文件描述符为应用程序与基础操作系统之间的交互提供了通用接口。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过lsof工具能够查看这个列表对系统监测以及排错将是很有帮助的。</p>
<p>在终端下输入lsof即可显示系统打开的文件，因为 lsof 需要访问核心内存和各种文件，所以必须以 root 用户的身份运行它才能够充分地发挥其功能。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo lsof | less
COMMAND     PID   TID TASKCMD                  USER   FD      TYPE             DEVICE   SIZE/OFF       NODE NAME
systemd       <span style="color:#ae81ff">1</span>                                root  cwd       DIR                8,2       <span style="color:#ae81ff">4096</span>          <span style="color:#ae81ff">2</span> /
systemd       <span style="color:#ae81ff">1</span>                                root  rtd       DIR                8,2       <span style="color:#ae81ff">4096</span>          <span style="color:#ae81ff">2</span> /
systemd       <span style="color:#ae81ff">1</span>                                root  txt       REG                8,2    <span style="color:#ae81ff">1620224</span>    <span style="color:#ae81ff">2491035</span> /usr/lib/systemd/systemd
systemd       <span style="color:#ae81ff">1</span>                                root  mem       REG                8,2    <span style="color:#ae81ff">1369352</span>    <span style="color:#ae81ff">2498532</span> /usr/lib/x86_64-linux-gnu/libm-2.31.so
systemd       <span style="color:#ae81ff">1</span>                                root  mem       REG                8,2     <span style="color:#ae81ff">178528</span>    <span style="color:#ae81ff">2490726</span> /usr/lib/x86_64-linux-gnu/libudev.so.1.6.17
</code></pre></div><p>输出各列信息的意义如下：</p>
<ul>
<li>
<p>COMMAND：进程的名称</p>
</li>
<li>
<p>PID：进程标识符</p>
</li>
<li>
<p>PPID：父进程标识符（需要指定-R参数）</p>
</li>
<li>
<p>USER：进程所有者</p>
</li>
<li>
<p>PGID：进程所属组</p>
</li>
<li>
<p>FD：文件描述符（filedescriptor，简称 fd），应用程序通过文件描述符识别该文件类型。</p>
<p>例如 cwd 表示current work dirctory，即应用程序的当前工作目录，这是该应用程序启动的目录，除非它本身对这个目录进行更改。txt 表示该类型的文件是程序代码，如应用程序二进制文件本身或共享库，如上列表中显示的 <code>/usr/lib/systemd/systemd</code> 程序。</p>
</li>
<li>
<p>TYPE：文件类型，如DIR、REG等，常见的文件类型:</p>
<ul>
<li>DIR：目录</li>
<li>REG：普通文件</li>
<li>CHR：字符</li>
<li>BLK：块设备类型</li>
<li>UNIX： UNIX 域套接字</li>
<li>FIFO：先进先出 (FIFO) 队列</li>
<li>IPv4：网际协议 (IP) 套接字</li>
</ul>
</li>
<li>
<p>DEVICE：指定磁盘的名称</p>
</li>
<li>
<p>SIZE：文件的大小</p>
</li>
<li>
<p>NODE：索引节点（文件在磁盘上的标识）</p>
</li>
<li>
<p>NAME：打开文件的确切名称</p>
</li>
</ul>
<h4 id="命令参数-1">命令参数<a hidden class="anchor" aria-hidden="true" href="#命令参数-1">#</a></h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>列出打开文件存在的进程</td>
</tr>
<tr>
<td>-c &lt;进程名&gt;</td>
<td>列出指定进程名所打开的文件</td>
</tr>
<tr>
<td>-g</td>
<td>列出GID号进程详情</td>
</tr>
<tr>
<td>-d &lt;文件号&gt;</td>
<td>列出占用该文件号的进程</td>
</tr>
<tr>
<td>+d &lt;目录&gt;</td>
<td>列出目录下被打开的文件</td>
</tr>
<tr>
<td>+D &lt;目录&gt;</td>
<td>递归列出目录下被打开的文件</td>
</tr>
<tr>
<td>-n &lt;目录&gt;</td>
<td>列出使用NFS的文件</td>
</tr>
<tr>
<td>-i &lt;条件&gt;</td>
<td>列出符合条件的进程</td>
</tr>
<tr>
<td>-p &lt;进程号&gt;</td>
<td>列出指定进程号所打开的文件</td>
</tr>
<tr>
<td>-u</td>
<td>列出UID号进程详情</td>
</tr>
<tr>
<td>-h</td>
<td>显示帮助信息</td>
</tr>
<tr>
<td>-v</td>
<td>显示版本信息</td>
</tr>
</tbody>
</table>
<h4 id="使用实例-1">使用实例<a hidden class="anchor" aria-hidden="true" href="#使用实例-1">#</a></h4>
<p><strong>查询某个文件被哪个进程调用</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof /bin/bash
</code></pre></div><p><strong>查询某个目录下所有的文件是被哪些进程调用的</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof +d /usr/lib
</code></pre></div><p><strong>查看以httpd开头的进程调用了哪些文件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -c httpd
</code></pre></div><p><strong>查询PID是1的进程调用的文件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -p <span style="color:#ae81ff">1</span>
</code></pre></div><p><strong>按照用户名查询某个用户的进程调用的文件</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -u username
</code></pre></div><p><strong>列出某个用户以及某个进程所打开的文件信息</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof  -u test -c mysql
</code></pre></div><p><strong>列出所有的网络连接</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -i
</code></pre></div><p><strong>列出所有tcp 网络连接信息</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -i tcp
</code></pre></div><p><strong>列出谁在使用某个端口</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -i :3306
</code></pre></div><p><strong>列出某个用户的所有活跃的网络端口</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -a -u test -i
</code></pre></div><p><strong>根据文件描述列出对应的文件信息</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -d txt
</code></pre></div><p><strong>列出被进程号为1234的进程所打开的所有 IPV4 network files</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -i <span style="color:#ae81ff">4</span> -a -p <span style="color:#ae81ff">1234</span>
</code></pre></div><p><strong>列出目前连接主机nf5260i5-td上端口为：20，21，80相关的所有文件信息，且每隔3秒重复执行</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsof -i @nf5260i5-td:20,21,80 -r <span style="color:#ae81ff">3</span>
</code></pre></div><h3 id="write">write<a hidden class="anchor" aria-hidden="true" href="#write">#</a></h3>
<p>在服务器上，有时会有多个用户同时登录，一些必要的沟通就显得尤为重要。比如,我必须关闭某个服务，或者需要重启服务器，当然需要通知同时登录服务器的用户，这时就可以使用 write 命令。</p>
<p>write 命令的信息如下：</p>
<ul>
<li>命令名称：write。</li>
<li>英文原意：send a message to another user。</li>
<li>所在路径：/usr/bin/write。</li>
<li>执行权限：所有用户。</li>
<li>功能描述：向其他用户发送信息。</li>
</ul>
<p>write 命令的基本格式如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ write 用户名 <span style="color:#f92672">[</span>终端号<span style="color:#f92672">]</span>
</code></pre></div><p>write 命令没有多余的选项，我们要向在某个终端登录的用户发送信息，就可以这样来执行命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 向在pts/1 (远程终端1)登录的user1用户发送信息，使用&#34;Ctrl+D&#34;快捷键保存发送的数据</span>
$ write user1 pts/1
hello
I will be in <span style="color:#ae81ff">5</span> minutes to restart, please save your data
</code></pre></div><p>这时，user1 用户就可以收到你要在 5 分钟之后重启系统的信息了。</p>
<h3 id="xargs">xargs<a hidden class="anchor" aria-hidden="true" href="#xargs">#</a></h3>
<h4 id="标准输入与管道命令">标准输入与管道命令<a hidden class="anchor" aria-hidden="true" href="#标准输入与管道命令">#</a></h4>
<p>Unix 命令都带有参数，有些命令可以接受&quot;标准输入&quot;（stdin）作为参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /etc/passwd | grep root
</code></pre></div><p>上面的代码使用了管道命令（<code>|</code>）。管道命令的作用，是将左侧命令（<code>cat /etc/passwd</code>）的标准输出转换为标准输入，提供给右侧命令（<code>grep root</code>）作为参数。</p>
<p>因为<code>grep</code>命令可以接受标准输入作为参数，所以上面的代码等同于下面的代码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ grep root /etc/passwd
</code></pre></div><p>但是，大多数命令都不接受标准输入作为参数，只能直接在命令行输入参数，这导致无法用管道命令传递参数。举例来说，<code>echo</code>命令就不接受管道传参。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;hello world&#34;</span> | echo
</code></pre></div><p>上面的代码不会有输出。因为管道右侧的<code>echo</code>不接受管道传来的标准输入作为参数。</p>
<h4 id="xargs-命令的作用">xargs 命令的作用<a hidden class="anchor" aria-hidden="true" href="#xargs-命令的作用">#</a></h4>
<p><code>xargs</code>命令的作用，是将标准输入转为命令行参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;hello world&#34;</span> | xargs echo
hello world
</code></pre></div><p>上面的代码将管道左侧的标准输入，转为命令行参数<code>hello world</code>，传给第二个<code>echo</code>命令。</p>
<p><code>xargs</code>命令的格式如下。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs <span style="color:#f92672">[</span>-options<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>command<span style="color:#f92672">]</span>
</code></pre></div><p>真正执行的命令，紧跟在<code>xargs</code>后面，接受<code>xargs</code>传来的参数。</p>
<p><code>xargs</code>的作用在于，大多数命令（比如<code>rm</code>、<code>mkdir</code>、<code>ls</code>）与管道一起使用时，都需要<code>xargs</code>将标准输入转为命令行参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;one two three&#34;</span> | xargs mkdir
</code></pre></div><p>上面的代码等同于<code>mkdir one two three</code>。如果不加<code>xargs</code>就会报错，提示<code>mkdir</code>缺少操作参数。</p>
<h4 id="xargs-的单独使用">xargs 的单独使用<a hidden class="anchor" aria-hidden="true" href="#xargs-的单独使用">#</a></h4>
<p><code>xargs</code>后面的命令默认是<code>echo</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs
<span style="color:#75715e"># 等同于</span>
$ xargs echo
</code></pre></div><p>大多数时候，<code>xargs</code>命令都是跟管道一起使用的。但是，它也可以单独使用。</p>
<p>输入<code>xargs</code>按下回车以后，命令行就会等待用户输入，作为标准输入。你可以输入任意内容，然后按下<code>Ctrl d</code>，表示输入结束，这时<code>echo</code>命令就会把前面的输入打印出来。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs
hello 
<span style="color:#f92672">(</span>Ctrl + d<span style="color:#f92672">)</span>
hello
</code></pre></div><p>再看一个例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs find -name
<span style="color:#e6db74">&#34;*.txt&#34;</span>
./foo.txt
./hello.txt
</code></pre></div><p>上面的例子输入<code>xargs find -name</code>以后，命令行会等待用户输入所要搜索的文件。用户输入<code>&quot;*.txt&quot;</code>，表示搜索当前目录下的所有 TXT 文件，然后按下<code>Ctrl d</code>，表示输入结束。这时就相当执行<code>find -name *.txt</code>。</p>
<h4 id="-d-参数与分隔符">-d 参数与分隔符<a hidden class="anchor" aria-hidden="true" href="#-d-参数与分隔符">#</a></h4>
<p>默认情况下，<code>xargs</code>将换行符和空格作为分隔符，把标准输入分解成一个个命令行参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;one two three&#34;</span> | xargs mkdir
</code></pre></div><p>上面代码中，<code>mkdir</code>会新建三个子目录，因为<code>xargs</code>将<code>one two three</code>分解成三个命令行参数，执行<code>mkdir one two three</code>。</p>
<p><code>-d</code>参数可以更改分隔符。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo -e <span style="color:#e6db74">&#34;a\tb\tc&#34;</span> | xargs -d <span style="color:#e6db74">&#34;\t&#34;</span> echo
a b c
</code></pre></div><p>上面的命令指定制表符<code>\t</code>作为分隔符，所以<code>a\tb\tc</code>就转换成了三个命令行参数。<code>echo</code>命令的<code>-e</code>参数表示解释转义字符。</p>
<h4 id="-p-参数-t-参数">-p 参数，-t 参数<a hidden class="anchor" aria-hidden="true" href="#-p-参数-t-参数">#</a></h4>
<p>使用<code>xargs</code>命令以后，由于存在转换参数过程，有时需要确认一下到底执行的是什么命令。</p>
<p><code>-p</code>参数打印出要执行的命令，询问用户是否要执行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;one two three&#39;</span> | xargs -p touch
touch one two three ?...
</code></pre></div><p>上面的命令执行以后，会打印出最终要执行的命令，让用户确认。用户输入<code>y</code>以后（大小写皆可），才会真正执行。</p>
<p><code>-t</code>参数则是打印出最终要执行的命令，然后直接执行，不需要用户确认。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;one two three&#39;</span> | xargs -t rm
rm one two three
</code></pre></div><h4 id="-0-参数与-find-命令">-0 参数与 find 命令<a hidden class="anchor" aria-hidden="true" href="#-0-参数与-find-命令">#</a></h4>
<p>由于<code>xargs</code>默认将空格作为分隔符，所以不太适合处理文件名，因为文件名可能包含空格。</p>
<p><code>find</code>命令有一个特别的参数<code>-print0</code>，指定输出的文件列表以<code>null</code>分隔。然后，<code>xargs</code>命令的<code>-0</code>参数表示用<code>null</code>当作分隔符。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find /path -type f -print0 | xargs -0 rm
</code></pre></div><p>上面命令删除<code>/path</code>路径下的所有文件。由于分隔符是<code>null</code>，所以处理包含空格的文件名，也不会报错。</p>
<p>还有一个原因，使得<code>xargs</code>特别适合<code>find</code>命令。有些命令（比如<code>rm</code>）一旦参数过多会报错&quot;参数列表过长&quot;，而无法执行，改用<code>xargs</code>就没有这个问题，因为它对每个参数执行一次命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find . -name <span style="color:#e6db74">&#34;*.txt&#34;</span> | xargs grep <span style="color:#e6db74">&#34;abc&#34;</span>
</code></pre></div><p>上面命令找出所有 TXT 文件以后，对每个文件搜索一次是否包含字符串<code>abc</code>。</p>
<h4 id="-l-参数">-L 参数<a hidden class="anchor" aria-hidden="true" href="#-l-参数">#</a></h4>
<p>如果标准输入包含多行，<code>-L</code>参数指定多少行作为一个命令行参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs find -name
<span style="color:#e6db74">&#34;*.txt&#34;</span>
<span style="color:#e6db74">&#34;*.md&#34;</span>
find: paths must precede expression: <span style="color:#e6db74">`</span>*.md<span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p>上面命令同时将<code>&quot;*.txt&quot;</code>和<code>*.md</code>两行作为命令行参数，传给<code>find</code>命令导致报错。</p>
<p>使用<code>-L</code>参数，指定每行作为一个命令行参数，就不会报错。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs -L <span style="color:#ae81ff">1</span> find -name
<span style="color:#e6db74">&#34;*.txt&#34;</span>
./foo.txt
./hello.txt
<span style="color:#e6db74">&#34;*.md&#34;</span>
./README.md
</code></pre></div><p>上面命令指定了每一行（<code>-L 1</code>）作为命令行参数，分别运行一次命令（<code>find -name</code>）。</p>
<p>下面是另一个例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo -e <span style="color:#e6db74">&#34;a\nb\nc&#34;</span> | xargs -L <span style="color:#ae81ff">1</span> echo
a
b
c
</code></pre></div><p>上面代码指定每行运行一次<code>echo</code>命令，所以<code>echo</code>命令执行了三次，输出了三行。</p>
<h4 id="-n-参数">-n 参数<a hidden class="anchor" aria-hidden="true" href="#-n-参数">#</a></h4>
<p><code>-L</code>参数虽然解决了多行的问题，但是有时用户会在同一行输入多项。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs find -name
<span style="color:#e6db74">&#34;*.txt&#34;</span> <span style="color:#e6db74">&#34;*.md&#34;</span>
find: paths must precede expression: <span style="color:#e6db74">`</span>*.md<span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p>上面的命令将同一行的两项作为命令行参数，导致报错。</p>
<p><code>-n</code>参数指定每次将多少项，作为命令行参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ xargs -n <span style="color:#ae81ff">1</span> find -name
</code></pre></div><p>上面命令指定将每一项（<code>-n 1</code>）标准输入作为命令行参数，分别执行一次命令（<code>find -name</code>）。</p>
<p>下面是另一个例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#f92672">{</span>0..9<span style="color:#f92672">}</span> | xargs -n <span style="color:#ae81ff">2</span> echo
<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">12</span> <span style="color:#ae81ff">34</span> <span style="color:#ae81ff">56</span> <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">9</span>
</code></pre></div><p>上面命令指定，每两个参数运行一次<code>echo</code>命令。所以，10个阿拉伯数字运行了五次<code>echo</code>命令，输出了五行。</p>
<h4 id="-i-参数">-I 参数<a hidden class="anchor" aria-hidden="true" href="#-i-参数">#</a></h4>
<p>如果<code>xargs</code>要将命令行参数传给多个命令，可以使用<code>-I</code>参数。</p>
<p><code>-I</code>指定每一项命令行参数的替代字符串。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat foo.txt
one
two
three
$ cat foo.txt | xargs -I file sh -c <span style="color:#e6db74">&#39;echo file; mkdir file&#39;</span>
one 
two
three
$ ls
one two three
</code></pre></div><p>上面代码中，<code>foo.txt</code>是一个三行的文本文件。我们希望对每一项命令行参数，执行两个命令（<code>echo</code>和<code>mkdir</code>），使用<code>-I file</code>表示<code>file</code>是命令行参数的替代字符串。执行命令时，具体的参数会替代掉<code>echo file; mkdir file</code>里面的两个<code>file</code>。</p>
<h4 id="--max-procs-参数">&ndash;max-procs 参数<a hidden class="anchor" aria-hidden="true" href="#--max-procs-参数">#</a></h4>
<p><code>xargs</code>默认只用一个进程执行命令。如果命令要执行多次，必须等上一次执行完，才能执行下一次。</p>
<p><code>--max-procs</code>参数指定同时用多少个进程并行执行命令。<code>--max-procs 2</code>表示同时最多使用两个进程，<code>--max-procs 0</code>表示不限制进程数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker ps -q | xargs -n <span style="color:#ae81ff">1</span> --max-procs <span style="color:#ae81ff">0</span> docker kill
</code></pre></div><p>上面命令表示，同时关闭尽可能多的 Docker 容器，这样运行速度会快很多。</p>
<h3 id="awkhttpswwwruanyifengcomblog201811awkhtml"><a href="https://www.ruanyifeng.com/blog/2018/11/awk.html">awk</a><a hidden class="anchor" aria-hidden="true" href="#awkhttpswwwruanyifengcomblog201811awkhtml">#</a></h3>
<p><a href="https://en.wikipedia.org/wiki/AWK"><code>awk</code></a>是处理文本文件的一个应用程序，几乎所有 Linux 系统都自带这个程序。</p>
<p>它依次处理文件的每一行，并读取里面的每一个字段。对于日志、CSV 那样的每行格式相同的文本文件，<code>awk</code>可能是最方便的工具。</p>
<p><code>awk</code>其实不仅仅是工具软件，还是一种编程语言。不过，本文只介绍它的命令行用法，对于大多数场合，应该足够用了。</p>
<h4 id="基本用法-1">基本用法<a hidden class="anchor" aria-hidden="true" href="#基本用法-1">#</a></h4>
<p><code>awk</code>的基本用法就是下面的形式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 格式</span>
$ awk 动作 文件名

<span style="color:#75715e"># 示例</span>
$ awk <span style="color:#e6db74">&#39;{print $0}&#39;</span> demo.txt
</code></pre></div><p>上面示例中，<code>demo.txt</code>是<code>awk</code>所要处理的文本文件。前面单引号内部有一个大括号，里面就是每一行的处理动作<code>print $0</code>。其中，<code>print</code>是打印命令，<code>$0</code>代表当前行，因此上面命令的执行结果，就是把每一行原样打印出来。</p>
<p>下面，我们先用标准输入（stdin）演示上面这个例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;this is a test&#39;</span> | awk <span style="color:#e6db74">&#39;{print $0}&#39;</span>
this is a test
</code></pre></div><p>上面代码中，<code>print $0</code>就是把标准输入<code>this is a test</code>，重新打印了一遍。</p>
<p><code>awk</code>会根据空格和制表符，将每一行分成若干字段，依次用<code>$1</code>、<code>$2</code>、<code>$3</code>代表第一个字段、第二个字段、第三个字段等等。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;this is a test&#39;</span> | awk <span style="color:#e6db74">&#39;{print $3}&#39;</span>
a
</code></pre></div><p>上面代码中，<code>$3</code>代表<code>this is a test</code>的第三个字段<code>a</code>。</p>
<p>下面，为了便于举例，我们把<code>/etc/passwd</code>文件保存成<code>demo.txt</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root❌0:0:root:/root:/usr/bin/zsh
daemon❌1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin❌2:2:bin:/bin:/usr/sbin/nologin
sys❌3:3:sys:/dev:/usr/sbin/nologin
sync❌4:65534:sync:/bin:/bin/sync
</code></pre></div><p>这个文件的字段分隔符是冒号（<code>:</code>），所以要用<code>-F</code>参数指定分隔符为冒号。然后，才能提取到它的第一个字段。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;{ print $1 }&#39;</span> demo.txt
root
daemon
bin
sys
sync
</code></pre></div><h4 id="变量">变量<a hidden class="anchor" aria-hidden="true" href="#变量">#</a></h4>
<p>除了<code>$ + 数字</code>表示某个字段，<code>awk</code>还提供其他一些变量。</p>
<p>变量<code>NF</code>表示当前行有多少个字段，因此<code>$NF</code>就代表最后一个字段。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;this is a test&#39;</span> | awk <span style="color:#e6db74">&#39;{print $NF}&#39;</span>
test
</code></pre></div><p><code>$(NF-1)</code>代表倒数第二个字段。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;{print $1, $(NF-1)}&#39;</span> demo.txt
root /root
daemon /usr/sbin
bin /bin
sys /dev
sync /bin
</code></pre></div><p>上面代码中，<code>print</code>命令里面的逗号，表示输出的时候，两个部分之间使用空格分隔。</p>
<p>变量<code>NR</code>表示当前处理的是第几行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;{print NR &#34;) &#34; $1}&#39;</span> demo.txt
1<span style="color:#f92672">)</span> root
2<span style="color:#f92672">)</span> daemon
3<span style="color:#f92672">)</span> bin
4<span style="color:#f92672">)</span> sys
5<span style="color:#f92672">)</span> sync
</code></pre></div><p>上面代码中，<code>print</code>命令里面，如果原样输出字符，要放在双引号里面。</p>
<p><code>awk</code>的其他内置变量如下。</p>
<ul>
<li><code>FILENAME</code>：当前文件名</li>
<li><code>FS</code>：字段分隔符，默认是空格和制表符。</li>
<li><code>RS</code>：行分隔符，用于分割每一行，默认是换行符。</li>
<li><code>OFS</code>：输出字段的分隔符，用于打印时分隔字段，默认为空格。</li>
<li><code>ORS</code>：输出记录的分隔符，用于打印时分隔记录，默认为换行符。</li>
<li><code>OFMT</code>：数字输出的格式，默认为<code>％.6g</code>。</li>
</ul>
<h4 id="函数-1">函数<a hidden class="anchor" aria-hidden="true" href="#函数-1">#</a></h4>
<p><code>awk</code>还提供了一些内置函数，方便对原始数据的处理。</p>
<p>函数<code>toupper()</code>用于将字符转为大写。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;{ print toupper($1) }&#39;</span> demo.txt
ROOT
DAEMON
BIN
SYS
SYNC
</code></pre></div><p>上面代码中，第一个字段输出时都变成了大写。</p>
<p>其他常用函数如下。</p>
<ul>
<li><code>tolower()</code>：字符转为小写。</li>
<li><code>length()</code>：返回字符串长度。</li>
<li><code>substr()</code>：返回子字符串。</li>
<li><code>sin()</code>：正弦。</li>
<li><code>cos()</code>：余弦。</li>
<li><code>sqrt()</code>：平方根。</li>
<li><code>rand()</code>：随机数。</li>
</ul>
<p><code>awk</code>内置函数的完整列表，可以查看<a href="https://www.gnu.org/software/gawk/manual/html_node/Built_002din.html#Built_002din">手册</a>。</p>
<h4 id="条件">条件<a hidden class="anchor" aria-hidden="true" href="#条件">#</a></h4>
<p><code>awk</code>允许指定输出条件，只输出符合条件的行。</p>
<p>输出条件要写在动作的前面。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk <span style="color:#e6db74">&#39;条件 动作&#39;</span> 文件名
</code></pre></div><p>请看下面的例子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;/usr/ {print $1}&#39;</span> demo.txt
root
daemon
bin
sys
</code></pre></div><p>上面代码中，<code>print</code>命令前面是一个正则表达式，只输出包含<code>usr</code>的行。</p>
<p>下面的例子只输出奇数行，以及输出第三行以后的行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 输出奇数行</span>
$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;NR % 2 == 1 {print $1}&#39;</span> demo.txt
root
bin
sync

<span style="color:#75715e"># 输出第三行以后的行</span>
$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;NR &gt;3 {print $1}&#39;</span> demo.txt
sys
sync
</code></pre></div><p>下面的例子输出第一个字段等于指定值的行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;$1 == &#34;root&#34; {print $1}&#39;</span> demo.txt
root

$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;$1 == &#34;root&#34; || $1 == &#34;bin&#34; {print $1}&#39;</span> demo.txt
root
bin
</code></pre></div><h4 id="if-语句">if 语句<a hidden class="anchor" aria-hidden="true" href="#if-语句">#</a></h4>
<p><code>awk</code>提供了<code>if</code>结构，用于编写复杂的条件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;{if ($1 &gt; &#34;m&#34;) print $1}&#39;</span> demo.txt
root
sys
sync
</code></pre></div><p>上面代码输出第一个字段的第一个字符大于<code>m</code>的行。</p>
<p><code>if</code>结构还可以指定<code>else</code>部分。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ awk -F <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&#39;{if ($1 &gt; &#34;m&#34;) print $1; else print &#34;---&#34;}&#39;</span> demo.txt
root
---
---
sys
sync
</code></pre></div><h3 id="findhttpslinuxcnarticle-14071-1html"><a href="https://linux.cn/article-14071-1.html">find</a><a hidden class="anchor" aria-hidden="true" href="#findhttpslinuxcnarticle-14071-1html">#</a></h3>
<p><code>find</code> 命令由 <a href="https://pubs.opengroup.org/onlinepubs/9699919799.2018edition/">POSIX 规范</a> 定义，它创建了一个用于衡量 POSIX 系统的开放标准，这包括 Linux、BSD 和 macOS。简而言之，只要你运行的是 Linux、BSD 或 macOS，那么 <code>find</code> 已经安装了。</p>
<p>但是，并非所有的 <code>find</code> 命令都完全相同。例如，GNU 的 <code>find</code> 命令有一些 BSD、Busybox 或 Solaris 上 <code>find</code> 命令可能没有或有但实现方式不同的功能。本文使用 <a href="https://www.gnu.org/software/findutils/">findutils</a> 包中的 GNU <code>find</code>，因为它很容易获得且非常流行。本文演示的大多数命令都适用于 <code>find</code> 的其他实现，但是如果你在 Linux 以外的平台上尝试命令并得到非预期结果，尝试下载并安装 GNU 版本。</p>
<p>man文档中给出的find命令的一般形式为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">find <span style="color:#f92672">[</span>-H<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-L<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-P<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-D debugopts<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-Olevel<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>path...<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>expression<span style="color:#f92672">]</span>
</code></pre></div><p>其实[-H] [-L] [-P] [-D debugopts] [-Olevel]这几个选项并不常用（至少在我的日常工作中，没有用到过），上面的find命令的常用形式可以简化为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">find <span style="color:#f92672">[</span>path...<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>expression<span style="color:#f92672">]</span>
</code></pre></div><ul>
<li>
<p>path：find命令所查找的目录路径。例如用<code>.</code>来表示当前目录，用<code>/</code>来表示系统根目录</p>
</li>
<li>
<p>expression：expression可以分为——“-options [-print -exec -ok &hellip;]”</p>
</li>
<li>
<ul>
<li><code>-options</code>，指定find命令的常用选项</li>
<li><code>-print</code>，find命令将匹配的文件输出到标准输出</li>
<li><code>-exec</code>，find命令对匹配的文件执行该参数所给出的shell命令。相应命令的形式为<code>'command' { } \;</code>，注意{  }和\；之间的空格
<code>find ./ -size 0 -exec rm {} \;</code> 删除文件大小为零的文件 （还可以以这样做：<code>rm -i find ./ -size 0</code>  或 <code>find ./ -size 0 | xargs rm -f &amp;） </code></li>
<li>为了用ls -l命令列出所匹配到的文件，可以把ls -l命令放在find命令的-exec选项中：<code>find . -type f -exec ls -l { } \;</code>
在/logs目录中查找更改时间在5日以前的文件并删除它们：<code>find /logs -type f -mtime +5 -exec rm { } \;</code></li>
<li><code>-ok</code>，和<code>-exec</code>的作用相同，只不过以一种更为安全的模式来执行该参数所给出的shell命令，在执行每一个命令之前，都会给出提示，让用户来确定是否执行。
<code>find . -name &quot;*.conf&quot; -mtime +5 -ok rm { } \;</code> 在当前目录中查找所有文件名以.LOG结尾、更改时间在5日以上的文件，并删除它们，只不过在删除之前先给出提示</li>
</ul>
</li>
</ul>
<p>也有人这样总结find命令的结构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">find start_directory
      options
      criteria_to_match
      action_to_perform_on_results
</code></pre></div><h4 id="常用选项httpslinuxcnarticle-1672-1html"><a href="https://linux.cn/article-1672-1.html">常用选项</a><a hidden class="anchor" aria-hidden="true" href="#常用选项httpslinuxcnarticle-1672-1html">#</a></h4>
<ul>
<li><code>-name </code>
按照文件名查找文件。
<code>find /dir -name filename </code> 在/dir目录及其子目录下面查找名字为filename的文件
<code>find . -name &quot;*.c&quot;</code> 在当前目录及其子目录（用“.”表示）中查找任何扩展名为“c”的文件</li>
<li><code>-perm</code>
按照文件权限来查找文件。
<code>find . -perm 755 –print</code> 在当前目录下查找文件权限位为755的文件，即文件属主可以读、写、执行，其它用户可以读、执行的文件</li>
<li><code>-prune </code>
使用这一选项可以使find命令不在当前指定的目录中查找，如果同时使用-depth选项，那么-prune将被find命令忽略。
<code>find /apps -path &quot;/apps/bin&quot; -prune -o –print </code>在/apps目录下查找文件，但不希望在/apps/bin目录下查找
<code>find /usr/sam -path &quot;/usr/sam/dir1&quot; -prune -o –print</code> 在/usr/sam目录下查找不在dir1子目录之内的所有文件</li>
<li><code>-user </code>
按照文件属主来查找文件。
<code>find ~ -user sam –print</code> 在$HOME目录中查找文件属主为sam的文件</li>
<li><code>-group </code>
按照文件所属的组来查找文件。
<code>find /apps -group gem –print</code> 在/apps目录下查找属于gem用户组的文件</li>
<li><code>-mtime -n +n </code>
按照文件的更改时间来查找文件， - n表示文件更改时间距现在n天以内，+ n表示文件更改时间距现在n天以前。
<code>find / -mtime -5 –print </code>在系统根目录下查找更改时间在5日以内的文件
<code>find /var/adm -mtime +3 –print</code> 在/var/adm目录下查找更改时间在3日以前的文件</li>
<li><code>-nogroup </code>
查找无有效所属组的文件，即该文件所属的组在/etc/groups中不存在。
<code>find / –nogroup -print</code></li>
<li><code>-nouser </code>
查找无有效属主的文件，即该文件的属主在/etc/passwd中不存在。
<code>find /home -nouser –print</code></li>
<li><code>-newer file1 ! file2 </code>
查找更改时间比文件file1新但比文件file2旧的文件。</li>
<li><code>-type </code>
查找某一类型的文件，诸如：
b - 块设备文件。
d - 目录。
c - 字符设备文件。
p - 管道文件。
l - 符号链接文件。
f - 普通文件。
<code>find /etc -type d –print</code> 在/etc目录下查找所有的目录
<code>find . ! -type d –print</code> 在当前目录下查找除目录以外的所有类型的文件
<code>find /etc -type l –print</code> 在/etc目录下查找所有的符号链接文件</li>
<li><code>-size n</code>：[c] 查找文件长度为n块的文件，带有c时表示文件长度以字节计。
<code>find . -size +1000000c –print</code> 在当前目录下查找文件长度大于1 M字节的文件
<code>find /home/apache -size 100c –print</code> 在/home/apache目录下查找文件长度恰好为100字节的文件
<code>find . -size +10 –print</code> 在当前目录下查找长度超过10块的文件（一块等于512字节）</li>
<li><code>-depth</code>：在查找文件时，首先查找当前目录中的文件，然后再在其子目录中查找。
<code>find / -name &quot;CON.FILE&quot; -depth –print</code> 它将首先匹配所有的文件然后再进入子目录中查找</li>
<li><code>-mount</code>：在查找文件时不跨越文件系统mount点。
<code>find . -name &quot;*.XC&quot; -mount –print</code> 从当前目录开始查找位于本文件系统中文件名以XC结尾的文件（不进入其它文件系统）</li>
<li><code>-follow</code>：如果find命令遇到符号链接文件，就跟踪至链接所指向的文件。</li>
</ul>
<h4 id="按名称查找文件">按名称查找文件<a hidden class="anchor" aria-hidden="true" href="#按名称查找文件">#</a></h4>
<p>你可以借助正则表达式使用完整或部分的文件名来定位文件。<code>find</code> 命令需要你给出想搜索的目录；指定搜索属性选项，例如，<code>-name</code> 用于指定区分大小写的文件名；然后是搜索字符串。默认情况下，搜索字符串按字面意思处理：除非你使用正则表达式语法，否则 <code>find</code> 命令搜索的文件名正是你在引号之间输入的字符串。</p>
<p>假设你的 <code>Documents</code> 目录包含四个文件：<code>Foo</code>、<code>foo</code>、<code>foobar.txt</code> 和 <code>foo.xml</code>。以下是对 <code>foo</code> 的字面搜索：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -name <span style="color:#e6db74">&#34;foo&#34;</span>
/home/tux/Documents/examples/foo
</code></pre></div><p>你可以使用 <code>-iname</code> 选项使其不区分大小写来扩大搜索范围：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -iname <span style="color:#e6db74">&#34;foo&#34;</span>
/home/tux/Documents/examples/foo
/home/tux/Documents/examples/Foo
</code></pre></div><h4 id="通配符">通配符<a hidden class="anchor" aria-hidden="true" href="#通配符">#</a></h4>
<p>你可以使用基本的 shell 通配符来扩展搜索。例如，<code>*</code> 表示任意数量的字符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -iname <span style="color:#e6db74">&#34;foo*&#34;</span>
/home/tux/Documents/examples/foo
/home/tux/Documents/examples/Foo
/home/tux/Documents/examples/foo.xml
/home/tux/Documents/examples/foobar.txt
</code></pre></div><p><code>?</code> 表示单个字符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -iname <span style="color:#e6db74">&#34;foo*.???&#34;</span>
/home/tux/Documents/examples/foo.xml
/home/tux/Documents/examples/foobar.txt
</code></pre></div><p>这不是正则表达式语法，因此 <code>.</code> 在示例中只表示字母“点”。</p>
<h4 id="正则表达式">正则表达式<a hidden class="anchor" aria-hidden="true" href="#正则表达式">#</a></h4>
<p>你还可以使用正则表达式。与 <code>-iname</code> 和 <code>-name</code> 一样，也有区分大小写和不区分大小写的选项。但不一样的是，<code>-regex</code> 和 <code>-iregex</code> 搜索应用于整个路径，而不仅仅是文件名。这意味着，如果你搜索 <code>foo</code>，你不会得到任何结果，因为 <code>foo</code> 与 <code>/home/tux/Documents/foo</code> 不匹配。相反，你必须要么搜索整个路径，要么在字符串的开头使用通配符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -iregex <span style="color:#e6db74">&#34;.*foo&#34;</span>
/home/tux/Documents/examples/foo
/home/tux/Documents/examples/Foo
</code></pre></div><h4 id="查找近一周修改过的文件">查找近一周修改过的文件<a hidden class="anchor" aria-hidden="true" href="#查找近一周修改过的文件">#</a></h4>
<p>要查找近一周修改的文件，使用 <code>-mtime</code> 选项以及过去的天数（负数）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -mtime -7
/home/tux/Documents/examples/foo
/home/tux/Documents/examples/Foo
/home/tux/Documents/examples/foo.xml
/home/tux/Documents/examples/foobar.txt
</code></pre></div><h4 id="查找近几天修改的文件">查找近几天修改的文件<a hidden class="anchor" aria-hidden="true" href="#查找近几天修改的文件">#</a></h4>
<p>你可以结合使用 <code>-mtime</code> 选项来查找近几天范围内修改的文件。对于第一个 <code>-mtime</code> 参数，表示上一次修改文件的最近天数。第二个参数表示最大天数。例如，搜索修改时间超过 1 天但不超过 7 天的文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -mtime +1 -mtime -7
</code></pre></div><h4 id="按文件类型限制搜索">按文件类型限制搜索<a hidden class="anchor" aria-hidden="true" href="#按文件类型限制搜索">#</a></h4>
<p>指定查找文件的类型来优化 <code>find</code> 的结果是很常见的。如果你不确定要查找的内容，则不应该使用此选项。但如果你知道要查找的是文件而不是目录，或者是目录而不是文件，那么这可能是一个很好的过滤器。选项是 <code>-type</code>，它的参数是代表不同类型数据的字母代码。最常见的是：</p>
<ul>
<li><code>d</code> - 目录</li>
<li><code>f</code> - 文件</li>
<li><code>l</code> - 链接文件</li>
<li><code>s</code> - 套接字</li>
<li><code>p</code> - 命名管道（用于 FIFO）</li>
<li><code>b</code> - 块设备（通常是硬盘）</li>
</ul>
<p>下面是一些例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find ~ -type d -name <span style="color:#e6db74">&#34;Doc*&#34;</span>
/home/tux/Documents
$ find ~ -type f -name <span style="color:#e6db74">&#34;Doc*&#34;</span>
/home/tux/Downloads/10th-Doctor.gif
$ find /dev -type b -name <span style="color:#e6db74">&#34;sda*&#34;</span>
/dev/sda/dev/sda1
</code></pre></div><h4 id="调整范围">调整范围<a hidden class="anchor" aria-hidden="true" href="#调整范围">#</a></h4>
<p><code>find</code> 命令默认是递归的，这意味着它会在指定的目录中层层搜索结果。这在大型文件系统中可能会变得不堪重负，但你可以使用 <code>-maxdepth</code> 选项来控制搜索深度：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find /usr -iname <span style="color:#e6db74">&#34;*xml&#34;</span> | wc -l
<span style="color:#ae81ff">15588</span>
$ find /usr -maxdepth <span style="color:#ae81ff">2</span> -iname <span style="color:#e6db74">&#34;*xml&#34;</span> | wc -l
<span style="color:#ae81ff">15</span>
</code></pre></div><p>也可以使用 <code>-mindepth</code> 设置最小递归深度：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find /usr -mindepth <span style="color:#ae81ff">8</span> -iname <span style="color:#e6db74">&#34;*xml&#34;</span> | wc -l
<span style="color:#ae81ff">9255</span>
</code></pre></div><h4 id="与-xargs">与 xargs<a hidden class="anchor" aria-hidden="true" href="#与-xargs">#</a></h4>
<p>在使用find命令的-exec选项处理匹配到的文件时， find命令将所有匹配到的文件一起传递给exec执行。但有些系统对能够传递给exec的命令长度有限制，这样在find命令运行几分钟之后，就会出现溢出错误。错误信息通常是“参数列太长”或“参数列溢出”。这就是xargs命令的用处所在，特别是与find命令一起使用。</p>
<p>find命令把匹配到的文件传递给xargs命令，而xargs命令每次只获取一部分文件而不是全部，不像-exec选项那样。这样它可以先处理最先获取的一部分文件，然后是下一批，并如此继续下去。</p>
<p>在有些系统中，使用-exec选项会为处理每一个匹配到的文件而发起一个相应的进程，并非将匹配到的文件全部作为参数一次执行；这样在有些情况下就会出现进程过多，系统性能下降的问题，因而效率不高；</p>
<p>而使用xargs命令则只有一个进程。另外，在使用xargs命令时，究竟是一次获取所有的参数，还是分批取得参数，以及每一次获取参数的数目都会根据该命令的选项及系统内核中相应的可调参数来确定。</p>
<p>来看看xargs命令是如何同find命令一起使用的，并给出一些例子。</p>
<p><code>find . -type f -print | xargs file </code>查找系统中的每一个普通文件，然后使用xargs命令来测试它们分别属于哪类文件</p>
<p><code>find / -name &quot;core&quot; -print | xargs echo &quot;&quot; &gt;/tmp/core.log</code> 在整个系统中查找内存信息转储文件(core dump) ，然后把结果保存到/tmp/core.log 文件中：</p>
<p><code>find . -type f -print | xargs grep &quot;hostname&quot;</code> 用grep命令在所有的普通文件中搜索hostname这个词</p>
<p><code>find ./ -mtime +3 -print|xargs rm -f –r </code>删除3天以前的所有东西 （<code>find . -ctime +3 -exec rm -rf {} \;</code>）</p>
<p><code>find ./ -size 0 | xargs rm -f &amp;</code> 删除文件大小为零的文件</p>
<p>find命令配合使用exec和xargs可以使用户对所匹配到的文件执行几乎所有的命令。</p>
<h4 id="fdhttpsgithubcomsharkdpfd"><a href="https://github.com/sharkdp/fd">fd</a><a hidden class="anchor" aria-hidden="true" href="#fdhttpsgithubcomsharkdpfd">#</a></h4>
<p>fd 命令是一个流行的、用户友好的 find 命令的替代品。</p>
<h3 id="grephttpslinuxcnarticle-6927-1html"><a href="https://linux.cn/article-6927-1.html">grep</a><a hidden class="anchor" aria-hidden="true" href="#grephttpslinuxcnarticle-6927-1html">#</a></h3>
<p>grep (global search regular expression(RE) and print out the line，全面搜索正则表达式并把行打印出来)是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。</p>
<p>grep 这个名字，来源于一个 Unix/Linux 中的古老的行编辑器 <a href="https://en.wikipedia.org/wiki/Ed_(text_editor)">ed</a> 中执行相似操作的命令：</p>
<pre tabindex="0"><code>g/re/p
</code></pre><p>语法如下所示:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">grep <span style="color:#f92672">[</span>OPTIONS<span style="color:#f92672">]</span> PATTERN <span style="color:#f92672">[</span>FILE...<span style="color:#f92672">]</span> 
grep <span style="color:#f92672">[</span>OPTIONS<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-e PATTERN | -f FILE<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>FILE...<span style="color:#f92672">]</span>
</code></pre></div><p>grep命令用于搜索由Pattern参数指定的模式，并将每个匹配的行写入标准输出中。这些模式是具有限定的正则表达式，它们使用ed或egrep命令样式。</p>
<p>如果在File参数中指定了多个名称，grep命令将显示包含匹配行的文件的名称。</p>
<p>对 shell 有特殊含义的字符 ($, *, [, |, ^, (, ), \ ) 出现在 Pattern参数中时必须带双引号。如果 Pattern参数不是简单字符串，通常必须用单引号将整个模式括起来。在诸如 [a-z], 之类的表达式中，-（减号）cml 可根据当前正在整理的序列来指定一个范围。整理序列可以定义等价的类以供在字符范围中使用。</p>
<p>如果未指定任何文件，grep会假定为标准输入。</p>
<h4 id="基本集httpslinuxcnarticle-1672-1html"><a href="https://linux.cn/article-1672-1.html">基本集</a><a hidden class="anchor" aria-hidden="true" href="#基本集httpslinuxcnarticle-1672-1html">#</a></h4>
<p>grep正则表达式元字符集：</p>
<ul>
<li><code>^</code> 锚定行的开始 如：<code>'^grep'</code>匹配所有以grep开头的行。</li>
<li><code>$</code> 锚定行的结束 如：<code>'grep$'</code>匹配所有以grep结尾的行。</li>
<li><code>.</code>  匹配一个非换行符的字符 如：<code>'gr.p'</code>匹配gr后接一个任意字符，然后是p。</li>
<li><code>*</code> 匹配零个或多个先前字符 如：<code>' *grep'</code>匹配所有一个或多个空格后紧跟grep的行。 <code>.*</code>一起用代表任意字符。</li>
<li><code>[]</code> 匹配一个指定范围内的字符，如<code>'[Gg]rep'</code>匹配Grep和grep。</li>
<li><code>[^] </code> 匹配一个不在指定范围内的字符，如：<code>'[^A-FH-Z]rep'</code>匹配不包含A-F和H-Z的一个字母开头，紧跟rep的行。</li>
<li><code>\(..\)</code> 标记匹配字符，如：<code>'\(love\)'</code>，love被标记为1。</li>
<li><code>\&lt;</code> 锚定单词的开始，如：<code>'\</code></li>
<li><code>\&gt;</code> 锚定单词的结束，如<code>grep\&gt;'</code>匹配包含以grep结尾的单词的行。</li>
<li><code>x\{m\}</code> 连续重复字符x，m次，如：<code>'o\{5\}'</code>匹配包含连续5个o的行。</li>
<li><code>x\{m,\}</code> 连续重复字符x,至少m次，如：<code>'o\{5,\}'</code>匹配至少连续有5个o的行。</li>
<li><code>x\{m,n\}</code> 连续重复字符x，至少m次，不多于n次，如：<code>'o\{5,10\}'</code>匹配连续5&ndash;10个o的行。</li>
<li><code>\w</code> 匹配一个文字和数字字符，也就是[A-Za-z0-9]，如：<code>'G\w*p'</code>匹配以G后跟零个或多个文字或数字字符，然后是p。</li>
<li><code>\W </code> w的反置形式，匹配一个非单词字符，如点号句号等。<code>\W*</code>则可匹配多个。</li>
<li><code>\b</code> 单词锁定符，如: <code>'\bgrep\b'</code>只匹配grep，即只能是grep这个单词，两边均为空格。</li>
</ul>
<h4 id="常用选项-1">常用选项<a hidden class="anchor" aria-hidden="true" href="#常用选项-1">#</a></h4>
<pre tabindex="0"><code>-?
</code></pre><p>同时显示匹配行上下的？行，如：grep -2 pattern filename同时显示匹配行的上下2行。</p>
<pre tabindex="0"><code>-b，--byte-offset
</code></pre><p>打印匹配行前面打印该行所在的块号码。</p>
<pre tabindex="0"><code>-c,--count
</code></pre><p>只打印匹配的行数，不显示匹配的内容。</p>
<pre tabindex="0"><code>-f File，--file=File
</code></pre><p>从文件中提取模板。空文件中包含0个模板，所以什么都不匹配。</p>
<pre tabindex="0"><code>-h，--no-filename
</code></pre><p>当搜索多个文件时，不显示匹配文件名前缀。</p>
<pre tabindex="0"><code>-i，--ignore-case
</code></pre><p>忽略大小写差别。</p>
<pre tabindex="0"><code>-q，--quiet
</code></pre><p>取消显示，只返回退出状态。0则表示找到了匹配的行。</p>
<pre tabindex="0"><code>-l，--files-with-matches
</code></pre><p>打印匹配模板的文件清单。</p>
<pre tabindex="0"><code>-L，--files-without-match
</code></pre><p>打印不匹配模板的文件清单。</p>
<pre tabindex="0"><code>-n，--line-number
</code></pre><p>在匹配的行前面打印行号。</p>
<pre tabindex="0"><code>-s，--silent
</code></pre><p>不显示关于不存在或者无法读取文件的错误信息。</p>
<pre tabindex="0"><code>-v，--revert-match
</code></pre><p>反检索，只显示不匹配的行。</p>
<pre tabindex="0"><code>-w，--word-regexp
</code></pre><p>如果被\引用，就把表达式做为一个单词搜索。</p>
<pre tabindex="0"><code>-V，--version
</code></pre><p>显示软件版本信息。</p>
<h4 id="怎么样使用-grep-来搜索一个文件">怎么样使用 grep 来搜索一个文件<a hidden class="anchor" aria-hidden="true" href="#怎么样使用-grep-来搜索一个文件">#</a></h4>
<p>搜索 /etc/passwd 文件下的 boo 用户,输入:</p>
<pre tabindex="0"><code>$ grep boo /etc/passwd
</code></pre><p>输出内容:</p>
<pre tabindex="0"><code>foo❌1000:1000:foo,,,:/home/foo:/bin/ksh
</code></pre><p>可以使用 grep 去强制忽略大小写。例如，使用 -i 选项可以匹配 boo, Boo, BOO 和其他组合：</p>
<pre tabindex="0"><code>$ grep -i &quot;boo&quot; /etc/passwd
</code></pre><h4 id="递归使用-grep">递归使用 grep<a hidden class="anchor" aria-hidden="true" href="#递归使用-grep">#</a></h4>
<p>你可以递归地使用 grep 进行搜索。例如，在文件目录下面搜索所有包含字符串“192.168.1.5”的文件</p>
<pre tabindex="0"><code>$ grep -r &quot;192.168.1.5&quot; /etc/
</code></pre><p>或者是：</p>
<pre tabindex="0"><code>$ grep -R &quot;192.168.1.5&quot; /etc/
</code></pre><p>示例输出:</p>
<pre tabindex="0"><code>/etc/ppp/options:# ms-wins 192.168.1.50/etc/ppp/options:# ms-wins 192.168.1.51/etc/NetworkManager/system-connections/Wired connection 1:addresses1=192.168.1.5;24;192.168.1.2;
</code></pre><p>你会看到搜索到 192.168.1.5 的结果每一行都前缀以找到匹配的文件名（例如：/etc/ppp/options）。输出之中包含的文件名可以加 -h 选项来禁止输出：</p>
<pre tabindex="0"><code>$ grep -h -R &quot;192.168.1.5&quot; /etc/
</code></pre><p>或者</p>
<pre tabindex="0"><code>$ grep -hR &quot;192.168.1.5&quot; /etc/
</code></pre><p>示例输出:</p>
<pre tabindex="0"><code># ms-wins 192.168.1.50# ms-wins 192.168.1.51addresses1=192.168.1.5;24;192.168.1.2;
</code></pre><h4 id="使用-grep-去搜索文本">使用 grep 去搜索文本<a hidden class="anchor" aria-hidden="true" href="#使用-grep-去搜索文本">#</a></h4>
<p>当你搜索 boo 时，grep 命令将会匹配 fooboo，boo123, barfoo35 和其他所有包含 boo 的字符串，你可以使用 -w 选项去强制只输出那些仅仅包含那个整个单词的行（LCTT译注：即该字符串两侧是英文单词分隔符，如空格，标点符号，和末端等，因此对中文这种没有断字符号的语言并不适用。）。</p>
<pre tabindex="0"><code>$ grep -w &quot;boo&quot; file
</code></pre><h4 id="使用-grep-命令去搜索两个不同的单词">使用 grep 命令去搜索两个不同的单词<a hidden class="anchor" aria-hidden="true" href="#使用-grep-命令去搜索两个不同的单词">#</a></h4>
<p>使用 egrep 命令如下:</p>
<pre tabindex="0"><code>$ egrep -w 'word1|word2' /path/to/file
</code></pre><p>（LCTT 译注：这里使用到了正则表达式，因此使用的是 egrep 命令，即扩展的 grep 命令。）</p>
<h4 id="统计文本匹配到的行数">统计文本匹配到的行数<a hidden class="anchor" aria-hidden="true" href="#统计文本匹配到的行数">#</a></h4>
<p>grep 命令可以通过加 -c 参数显示每个文件中匹配到的次数：</p>
<pre tabindex="0"><code>$ grep -c 'word' /path/to/file
</code></pre><p>传递 -n 选项可以输出的行前加入匹配到的行的行号：</p>
<pre tabindex="0"><code>$ grep -n 'root' /etc/passwd
</code></pre><p>示例输出:</p>
<pre tabindex="0"><code>1:root:x:0:0:root:/root:/bin/bash1042:rootdoor:x:0:0:rootdoor:/home/rootdoor:/bin/csh3319:initrootapp:x:0:0:initrootapp:/home/initroot:/bin/ksh
</code></pre><h4 id="反转匹配不匹配">反转匹配（不匹配）<a hidden class="anchor" aria-hidden="true" href="#反转匹配不匹配">#</a></h4>
<p>可以使用 -v 选项来输出不包含匹配项的内容，输出内容仅仅包含那些不含给定单词的行，例如输出所有不包含 bar 单词的行：</p>
<pre tabindex="0"><code>$ grep -v bar /path/to/file
</code></pre><h4 id="unixlinux-管道与-grep-命令">UNIX/Linux 管道与 grep 命令<a hidden class="anchor" aria-hidden="true" href="#unixlinux-管道与-grep-命令">#</a></h4>
<p>grep 常常与管道一起使用，在这个例子中，显示硬盘设备的名字：</p>
<pre tabindex="0"><code># dmesg | egrep '(s|h)d[a-z]'
</code></pre><p>显示 CPU 型号：</p>
<pre tabindex="0"><code># cat /proc/cpuinfo | grep -i 'Model'
</code></pre><p>然而，以上命令也可以按照以下方法使用，不使用管道:</p>
<pre tabindex="0"><code># grep -i 'Model' /proc/cpuinfo
</code></pre><p>示例输出:</p>
<pre tabindex="0"><code>model       : 30model name  : Intel(R) Core(TM) i7 CPU       Q 820  @ 1.73GHzmodel       : 30model name  : Intel(R) Core(TM) i7 CPU       Q 820  @ 1.73GHz
</code></pre><h4 id="如何仅仅显示匹配到内容的文件名字">如何仅仅显示匹配到内容的文件名字?<a hidden class="anchor" aria-hidden="true" href="#如何仅仅显示匹配到内容的文件名字">#</a></h4>
<p>使用 -l 选项去显示那些文件内容中包含 main() 的文件名：</p>
<pre tabindex="0"><code>$ grep -l 'main' *.c
</code></pre><p>最后，你可以强制 grep 以彩色输出：</p>
<pre tabindex="0"><code>$ grep --color vivek /etc/passwd
</code></pre><h4 id="查找文件内容httpswwwrunoobcomnote48437"><a href="https://www.runoob.com/note/48437">查找文件内容</a><a hidden class="anchor" aria-hidden="true" href="#查找文件内容httpswwwrunoobcomnote48437">#</a></h4>
<p>从根目录开始查找所有扩展名为 .log 的文本文件，并找出包含 &ldquo;ERROR&rdquo; 的行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find / -type f -name <span style="color:#e6db74">&#34;*.log&#34;</span> | xargs grep <span style="color:#e6db74">&#34;ERROR&#34;</span>
</code></pre></div><p>例子：从当前目录开始查找所有扩展名为 .in 的文本文件，并找出包含 &ldquo;thermcontact&rdquo; 的行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ find . -name <span style="color:#e6db74">&#34;*.in&#34;</span> | xargs grep <span style="color:#e6db74">&#34;thermcontact&#34;</span>
</code></pre></div><h3 id="cat">cat<a hidden class="anchor" aria-hidden="true" href="#cat">#</a></h3>
<h4 id="bathttpsgithubcomsharkdpbat"><a href="https://github.com/sharkdp/bat">bat</a><a hidden class="anchor" aria-hidden="true" href="#bathttpsgithubcomsharkdpbat">#</a></h4>
<p>A cat(1) clone with wings.</p>
<p>添加了语法高亮和 Git 集成等功能，并且还提供了分页选项。</p>
<h3 id="iphttpslinuxcnarticle-3144-1html"><a href="https://linux.cn/article-3144-1.html">ip</a><a hidden class="anchor" aria-hidden="true" href="#iphttpslinuxcnarticle-3144-1html">#</a></h3>
<p>linux的<strong>ip</strong>命令和<strong>ifconfig</strong>类似，但前者功能更强大，并旨在取代后者。使用ip命令，只需一个命令，你就能很轻松地执行一些网络管理任务。ifconfig是net-tools中已被废弃使用的一个命令，许多年前就已经没有维护了。iproute2套件里提供了许多增强功能的命令，ip命令即是其中之一。</p>
<p><img loading="lazy" src="/Distributions/003404uy9l1t5zayzllylm.png" alt="003404uy9l1t5zayzllylm"  />
</p>
<h4 id="设置和删除ip地址">设置和删除Ip地址<a hidden class="anchor" aria-hidden="true" href="#设置和删除ip地址">#</a></h4>
<p>要给你的机器设置一个IP地址，可以使用下列ip命令：</p>
<pre tabindex="0"><code>$ sudo ip addr add 192.168.0.193/24 dev wlan0
</code></pre><p>请注意IP地址要有一个后缀，比如/24。这种用法用于在无类域内路由选择（CIDR）中来显示所用的子网掩码。在这个例子中，子网掩码是255.255.255.0。</p>
<p>在你按照上述方式设置好IP地址后，需要查看是否已经生效。</p>
<pre tabindex="0"><code>$ ip addr show wlan0
</code></pre><p>你也可以使用相同的方式来删除IP地址，只需用del代替add。</p>
<pre tabindex="0"><code>$ sudo ip addr del 192.168.0.193/24 dev wlan0
</code></pre><h4 id="列出路由表条目">列出路由表条目<a hidden class="anchor" aria-hidden="true" href="#列出路由表条目">#</a></h4>
<p>ip命令的路由对象的参数还可以帮助你查看网络中的路由数据，并设置你的路由表。第一个条目是默认的路由条目，你可以随意改动它。</p>
<p>在这个例子中，有几个路由条目。这个结果显示有几个设备通过不同的网络接口连接起来。它们包括WIFI、以太网和一个点对点连接。</p>
<pre tabindex="0"><code>$ ip route show
</code></pre><p>假设现在你有一个IP地址，你需要知道路由包从哪里来。可以使用下面的路由选项（译注：列出了路由所使用的接口等）：</p>
<pre tabindex="0"><code>$ ip route get 10.42.0.47
</code></pre><h4 id="更改默认路由">更改默认路由<a hidden class="anchor" aria-hidden="true" href="#更改默认路由">#</a></h4>
<p>要更改默认路由，使用下面ip命令：</p>
<pre tabindex="0"><code>$ sudo ip route add default via 192.168.0.196
</code></pre><h4 id="显示网络统计数据">显示网络统计数据<a hidden class="anchor" aria-hidden="true" href="#显示网络统计数据">#</a></h4>
<p>使用ip命令还可以显示不同网络接口的统计数据。</p>
<p>当你需要获取一个特定网络接口的信息时，在网络接口名字后面添加选项<strong>ls</strong>即可。使用多个选项**-s**会给你这个特定接口更详细的信息。特别是在排除网络连接故障时，这会非常有用。</p>
<pre tabindex="0"><code>$ ip -s -s link ls p2p1
</code></pre><h4 id="arp条目">ARP条目<a hidden class="anchor" aria-hidden="true" href="#arp条目">#</a></h4>
<p>地址解析协议（ARP）用于将一个IP地址转换成它对应的物理地址，也就是通常所说的MAC地址。使用ip命令的neigh或者neighbour选项，你可以查看接入你所在的局域网的设备的MAC地址。</p>
<pre tabindex="0"><code>$ ip neighbour
</code></pre><h4 id="监控netlink消息">监控netlink消息<a hidden class="anchor" aria-hidden="true" href="#监控netlink消息">#</a></h4>
<p>也可以使用ip命令查看netlink消息。monitor选项允许你查看网络设备的状态。比如，所在局域网的一台电脑根据它的状态可以被分类成REACHABLE或者STALE。使用下面的命令：</p>
<pre tabindex="0"><code>$ ip monitor all
</code></pre><h4 id="激活和停止网络接口">激活和停止网络接口<a hidden class="anchor" aria-hidden="true" href="#激活和停止网络接口">#</a></h4>
<p>你可以使用ip命令的up和down选项来激某个特定的接口，就像ifconfig的用法一样。</p>
<p>在这个例子中，当ppp0接口被激活和在它被停止和再次激活之后，你可以看到相应的路由表条目。这个接口可能是wlan0或者eth0。将ppp0更改为你可用的任意接口即可。</p>
<pre tabindex="0"><code>$ sudo ip link set ppp0 down 
$ sudo ip link set ppp0 up
</code></pre><h4 id="获取帮助">获取帮助<a hidden class="anchor" aria-hidden="true" href="#获取帮助">#</a></h4>
<p>当你陷入困境，不知道某一个特定的选项怎么用的时候，你可以使用help选项。man页面并不会提供许多关于如何使用ip选项的信息，因此这里就是获取帮助的地方。</p>
<p>比如，想知道关于route选项更多的信息：</p>
<pre tabindex="0"><code>$ ip route help
</code></pre><h4 id="小结">小结<a hidden class="anchor" aria-hidden="true" href="#小结">#</a></h4>
<p>对于网络管理员们和所有的Linux使用者们，ip命令是必备工具。是时候抛弃ifconfig命令了，特别是当你写脚本时。</p>
<h3 id="dighttpslinuxcnarticle-14051-1html"><a href="https://linux.cn/article-14051-1.html">dig</a><a hidden class="anchor" aria-hidden="true" href="#dighttpslinuxcnarticle-14051-1html">#</a></h3>
<p>使用 <code>dig</code> 来进行 DNS 查询。</p>
<h4 id="参数类型查询和格式化">参数类型：查询和格式化<a hidden class="anchor" aria-hidden="true" href="#参数类型查询和格式化">#</a></h4>
<p>有两种主要的参数可以传递给 <code>dig</code>：</p>
<ol>
<li>告诉 <code>dig</code> <strong>要进行什么 DNS 查询的参数</strong>。</li>
<li>告诉 <code>dig</code> 如何 <strong>格式化响应的参数</strong>。</li>
</ol>
<p>首先，让我们看一下查询选项。</p>
<h4 id="主要的查询选项">主要的查询选项<a hidden class="anchor" aria-hidden="true" href="#主要的查询选项">#</a></h4>
<p>你通常想控制 DNS 查询的 3 件事是：</p>
<ol>
<li><strong>名称</strong>（如 <code>jvns.ca</code>）。默认情况下，查询的是空名称（<code>.</code>）。</li>
<li><strong>DNS 查询类型</strong>（如 <code>A</code> 或 <code>CNAME</code>）。默认是 <code>A</code>。</li>
<li>发送查询的 <strong>服务器</strong>（如 <code>8.8.8.8</code>）。默认是 <code>/etc/resolv.conf</code> 中的内容。</li>
</ol>
<p>其格式是：</p>
<pre tabindex="0"><code>dig @server name type
</code></pre><p>这里有几个例子：</p>
<ul>
<li><code>dig @8.8.8.8 jvns.ca</code> 向谷歌的公共 DNS 服务器（<code>8.8.8.8</code>）查询 <code>jvns.ca</code>。</li>
<li><code>dig ns jvns.ca</code> 对 <code>jvns.ca</code> 进行类型为 <code>NS</code> 的查询。</li>
</ul>
<p><strong><code>-x</code>：进行反向 DNS 查询</strong></p>
<p>我偶尔使用的另一个查询选项是 <code>-x</code>，用于进行反向 DNS 查询。下面是输出结果的样子。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dig -x 172.217.13.174
174.13.217.172.in-addr.arpa. <span style="color:#ae81ff">72888</span> IN PTR yul03s04-in-f14.1e100.net。
</code></pre></div><p><code>-x</code> 不是魔术。<code>dig -x 172.217.13.174</code> 只是对 <code>174.13.217.172.in-addr.arpa.</code> 做了一个 <code>PTR</code> 查询。下面是如何在不使用 `-x’ 的情况下进行完全相同的反向 DNS 查询。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dig ptr 174.13.217.172.in-addr.arpa.
174.13.217.172.in-addr.arpa. <span style="color:#ae81ff">72888</span> IN PTR yul03s04-in-f14.1e100.net。
</code></pre></div><p>我总是使用 <code>-x</code>，因为它可以减少输入。</p>
<p><a href="https://www.cnblogs.com/mysticbinary/p/13344930.html">DNS反向查询</a>大概的一个定义就是：</p>
<p>从 IP 地址获取 PTR 记录。也就是说，通过使用一些网络工具可以将 IP 地址转换为主机名。 实际上，PRT 代表 POINTER，在 DNS 系统有唯一性，将 IP 地址与规范化的主机名联系起来。PTR 记录其实是 NDS 系统的一部分，但是由专门的区域文件组成的，使用的是传统的 in-addr.arpa 格式。</p>
<h4 id="格式化响应的选项">格式化响应的选项<a hidden class="anchor" aria-hidden="true" href="#格式化响应的选项">#</a></h4>
<p>现在，让我们讨论一下你可以用来格式化响应的参数。</p>
<p>我发现 <code>dig</code> 默认格式化 DNS 响应的方式对初学者来说是很难接受的。下面是输出结果的样子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">; &lt;&lt;&gt;&gt; DiG 9.16.20 &lt;&lt;&gt;&gt; -r jvns.ca
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER<span style="color:#e6db74">&lt;&lt;- opco</span>de: QUERY, status: NOERROR, id: <span style="color:#ae81ff">28629</span>
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: <span style="color:#ae81ff">1</span>
;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: <span style="color:#ae81ff">4096</span>
; COOKIE: d87fc3022c0604d60100000061ab74857110b908b274494d <span style="color:#f92672">(</span>good<span style="color:#f92672">)</span>
;; QUESTION SECTION:
;jvns.ca.           IN  A
;; ANSWER SECTION:
jvns.ca.        <span style="color:#ae81ff">276</span> IN  A   172.64.80.1
;; Query time: <span style="color:#ae81ff">9</span> msec
;; SERVER: 192.168.1.1#53<span style="color:#f92672">(</span>192.168.1.1<span style="color:#f92672">)</span>
;; WHEN: Sat Dec <span style="color:#ae81ff">04</span> 09:00:37 EST <span style="color:#ae81ff">2021</span>
;; MSG SIZE  rcvd: <span style="color:#ae81ff">80</span>
</code></pre></div><p>如果你不习惯看这个，你可能需要花点时间来筛选，找到你要找的 IP 地址。而且大多数时候，你只对这个响应中的一行感兴趣（<code>jvns.ca. 180 IN A 172.64.80.1</code>）。</p>
<p>下面是我最喜欢的两种方法，可以使 <code>dig</code> 的输出更容易管理：</p>
<p><strong>方式 1 : +noall +answer</strong></p>
<p>这告诉 <code>dig</code> 只打印 DNS 响应中的“答案”部分的内容。下面是一个查询 <code>google.com</code> 的 <code>NS</code> 记录的例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dig +noall +answer ns google.com
google.com.     <span style="color:#ae81ff">158564</span>  IN  NS  ns4.google.com.
google.com.     <span style="color:#ae81ff">158564</span>  IN  NS  ns1.google.com.
google.com.     <span style="color:#ae81ff">158564</span>  IN  NS  ns2.google.com.
google.com.     <span style="color:#ae81ff">158564</span>  IN  NS  ns3.google.com.
</code></pre></div><p>这里的格式是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">NAME         TTL            TYPE   CONTENT
google.com   <span style="color:#ae81ff">158564</span>   IN    NS     ns3.google.com.
</code></pre></div><p>顺便说一下：如果你曾经想知道 <code>IN</code> 是什么意思，它是指“查询类”，代表“互联网internet”。它基本上只是上世纪 80、90 年代的遗物，当时还有其他网络与互联网竞争，如“混沌网络chaosnet”。</p>
<p><strong>方式 2：+short</strong></p>
<p>这就像 <code>dig +noall +answer</code>，但更短：它只显示每条记录的内容。比如说：</p>
<pre tabindex="0"><code>$ dig +short ns google.com
ns2.google.com.
ns1.google.com.
ns4.google.com.
ns3.google.com.
</code></pre><h4 id="digrc"><code>digrc</code><a hidden class="anchor" aria-hidden="true" href="#digrc">#</a></h4>
<p>如果你不喜欢 <code>dig</code> 的默认格式（我就不喜欢！），你可以在你的主目录下创建一个 <code>.digrc</code> 文件，告诉它默认使用不同的格式。</p>
<p>我非常喜欢 <code>+noall +answer</code> 格式，所以我把 <code>+noall +answer</code> 放在我的 <code>~/.digrc</code> 中。下面是我使用该配置文件运行 <code>dig jvns.ca</code> 时的情况。</p>
<pre tabindex="0"><code>$ dig jvns.ca
jvns.ca.        255在172.64.80.1中
</code></pre><p>这样读起来就容易多了！</p>
<p>如果我想回到所有输出的长格式（我有时会这样做，通常是因为我想看响应的权威部分的记录），我可以通过运行再次得到一个长答案。</p>
<pre tabindex="0"><code>$ dig +all jvns.ca
</code></pre><h4 id="dig-trace">dig +trace<a hidden class="anchor" aria-hidden="true" href="#dig-trace">#</a></h4>
<p>我使用的最后一个 <code>dig</code> 选项是 <code>+trace</code>。<code>dig +trace</code> 模仿 DNS 解析器在查找域名时的做法 —— 它从根域名服务器开始，然后查询下一级域名服务器（如 <code>.com</code>），以此类推，直到到达该域名的权威域名服务器。因此，它将进行大约 30 次 DNS 查询。（我用 <code>tcpdump</code> 检查了一下，对于每个根域名服务器的 <code>A</code> / <code>AAAA</code> 记录它似乎要进行 2 次查询，所以这已经是 26 次查询了。我不太清楚它为什么这样做，因为它应该已经有了这些 IP 的硬编码，但它确实如此。）</p>
<p>我发现这对了解 DNS 的工作原理很有用，但我不认为我用它解决过问题。</p>
<h4 id="为什么要用-dig">为什么要用 dig<a hidden class="anchor" aria-hidden="true" href="#为什么要用-dig">#</a></h4>
<p>尽管有一些更简单的工具来进行 DNS 查询（如 <code>dog</code> 和 <code>host</code>），我发现自己还是坚持使用 <code>dig</code>。</p>
<p>我喜欢 <code>dig</code> 的地方实际上也是我 <strong>不喜欢</strong> <code>dig</code> 的地方 —— 它显示了大量的细节！</p>
<p>我知道，如果我运行 <code>dig +all</code>，它将显示 DNS 响应的所有部分。例如，让我们查询 <code>jvns.ca</code> 的一个根名称服务器。响应有 3 个部分，我可能会关心：回答部分、权威部分和附加部分。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dig @h.root-servers.net. jvns.ca +all
;; Got answer:
;; -&gt;&gt;HEADER<span style="color:#e6db74">&lt;&lt;- opco</span>de: QUERY, status: NOERROR, id: <span style="color:#ae81ff">18229</span>
;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 4, ADDITIONAL: <span style="color:#ae81ff">9</span>
;; WARNING: recursion requested but not available
;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: <span style="color:#ae81ff">1232</span>
;; QUESTION SECTION:
;jvns.ca.           IN  A
;; AUTHORITY SECTION:
ca.         <span style="color:#ae81ff">172800</span>  IN  NS  c.ca-servers.ca.
ca.         <span style="color:#ae81ff">172800</span>  IN  NS  j.ca-servers.ca.
ca.         <span style="color:#ae81ff">172800</span>  IN  NS  x.ca-servers.ca.
ca.         <span style="color:#ae81ff">172800</span>  IN  NS  any.ca-servers.ca.
;; ADDITIONAL SECTION:
c.ca-servers.ca.    <span style="color:#ae81ff">172800</span>  IN  A   185.159.196.2
j.ca-servers.ca.    <span style="color:#ae81ff">172800</span>  IN  A   198.182.167.1
x.ca-servers.ca.    <span style="color:#ae81ff">172800</span>  IN  A   199.253.250.68
any.ca-servers.ca.  <span style="color:#ae81ff">172800</span>  IN  A   199.4.144.2
c.ca-servers.ca.    <span style="color:#ae81ff">172800</span>  IN  AAAA    2620:10a:8053::2
j.ca-servers.ca.    <span style="color:#ae81ff">172800</span>  IN  AAAA    2001:500:83::1
x.ca-servers.ca.    <span style="color:#ae81ff">172800</span>  IN  AAAA    2620:10a:80ba::68
any.ca-servers.ca.  <span style="color:#ae81ff">172800</span>  IN  AAAA    2001:500:a7::2
;; Query time: <span style="color:#ae81ff">103</span> msec
;; SERVER: 198.97.190.53#53<span style="color:#f92672">(</span>198.97.190.53<span style="color:#f92672">)</span>
;; WHEN: Sat Dec <span style="color:#ae81ff">04</span> 11:23:32 EST <span style="color:#ae81ff">2021</span>
;; MSG SIZE  rcvd: <span style="color:#ae81ff">289</span>
</code></pre></div><p><code>dog</code> 也显示了 “附加” 部分的记录，但它没有明确指出哪个是哪个（我猜 <code>+</code> 意味着它在附加部分？） ，但它似乎没有显示“权威”部分的记录。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dog @h.root-servers.net. jvns.ca 
  NS ca.                2d0h00m00s A <span style="color:#e6db74">&#34;c.ca-servers.ca.&#34;</span>
  NS ca.                2d0h00m00s A <span style="color:#e6db74">&#34;j.ca-servers.ca.&#34;</span>
  NS ca.                2d0h00m00s A <span style="color:#e6db74">&#34;x.ca-servers.ca.&#34;</span>
  NS ca.                2d0h00m00s A <span style="color:#e6db74">&#34;any.ca-servers.ca.&#34;</span>
   A c.ca-servers.ca.   2d0h00m00s + 185.159.196.2
   A j.ca-servers.ca.   2d0h00m00s + 198.182.167.1
   A x.ca-servers.ca.   2d0h00m00s + 199.253.250.68
   A any.ca-servers.ca. 2d0h00m00s + 199.4.144.2
AAAA c.ca-servers.ca.   2d0h00m00s + 2620:10a:8053::2
AAAA j.ca-servers.ca.   2d0h00m00s + 2001:500:83::1
AAAA x.ca-servers.ca.   2d0h00m00s + 2620:10a:80ba::68
AAAA any.ca-servers.ca. 2d0h00m00s + 2001:500:a7::2
</code></pre></div><p>而 <code>host</code> 似乎只显示“答案”部分的记录（在这种情况下没有得到记录）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ host jvns.ca h.root-servers.net
Using domain server:
Name: h.root-servers.net
Address: 198.97.190.53#53
Aliases:
</code></pre></div><p>总之，我认为这些更简单的 DNS 工具很好（我甚至自己做了一个 <a href="https://dns-lookup.jvns.ca/">简单的网络 DNS 工具</a>），如果你觉得它们更容易，你绝对应该使用它们，但这就是为什么我坚持使用 <code>dig</code> 的原因。<code>drill</code> 的输出格式似乎与 <code>dig</code> 的非常相似，也许 <code>drill</code> 更好！但我还没有真正试过它。</p>
<h3 id="sambahttpswwwcnblogscomgzdaijiep5194033html"><a href="https://www.cnblogs.com/gzdaijie/p/5194033.html">Samba</a><a hidden class="anchor" aria-hidden="true" href="#sambahttpswwwcnblogscomgzdaijiep5194033html">#</a></h3>
<p><strong>Samba</strong> 是 <a href="https://en.wikipedia.org/wiki/Server_Message_Block">SMB/CIFS</a> 网络协议的重新实现, 可以在 Linux 和 Windows 系统间进行文件、打印机共享，和 <a href="https://wiki.archlinux.org/title/NFS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">NFS</a> 的功能类似。</p>
<h4 id="安装-6">安装<a hidden class="anchor" aria-hidden="true" href="#安装-6">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install samba
$ sudo systemctl enable --now smbd.service
</code></pre></div><p>Samba 服务的配置文件是 <code>/etc/samba/smb.conf</code>，<a href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a>提供了详细的文档。</p>
<p>如果使用了 防火墙，请记得打开需要的端口(通常是 137-139 + 445)。完整列表请查看 <a href="https://www.samba.org/~tpot/articles/firewall.html">Samba 端口使用</a>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo ufw allow Samba
$ sudo ufw reload
</code></pre></div><h4 id="创建共享">创建共享<a hidden class="anchor" aria-hidden="true" href="#创建共享">#</a></h4>
<p>创建的目录即之后能够在Windows主机上直接访问的目录。例如：在用户samba_user的主目录下新建share文件夹为共享目录，由于Windows下的文件夹需可读可写可执行，需更改权限为777</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir /home/samba_user/smbshare
$ sudo chmod <span style="color:#ae81ff">777</span> /home/samba_user/smbshare
</code></pre></div><p>修改 /<code>etc/samba/smb.conf</code>，在smb.conf文件最后加上以下内容</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vim /etc/samba/smb.conf
<span style="color:#f92672">[</span>share<span style="color:#f92672">]</span>
path <span style="color:#f92672">=</span> /home/samba_user/smbshare
public <span style="color:#f92672">=</span> yes
writable <span style="color:#f92672">=</span> yes
valid users <span style="color:#f92672">=</span> samba_user
create mask <span style="color:#f92672">=</span> <span style="color:#ae81ff">0644</span>
force create mode <span style="color:#f92672">=</span> <span style="color:#ae81ff">0644</span>
directory mask <span style="color:#f92672">=</span> <span style="color:#ae81ff">0755</span>
force directory mode <span style="color:#f92672">=</span> <span style="color:#ae81ff">0755</span>
available <span style="color:#f92672">=</span> yes
</code></pre></div><ul>
<li>[share]表示共享文件夹的别名，之后将直接使用这个别名</li>
<li><code>force create mode</code> 与 <code>force directory mode</code>的设置是因为Windows下与Linux下文件和文件夹的默认权限不同造成的，Windows下新建的文件是可执行的，必须强制设定其文件权限。</li>
<li>valid users 设置为你当前的Linux用户名，例如我的是samba_user，因为第一次打开共享文件夹时，需要验证权限。</li>
</ul>
<h4 id="用户管理">用户管理<a hidden class="anchor" aria-hidden="true" href="#用户管理">#</a></h4>
<p>Samba 需要 Linux 账户才能使用 - 可以使用已有账户或创建新用户。</p>
<p>虽然用户名可以和 Linux 系统共享，Samba 使用单独的密码管理，将下面的 <code>samba_user</code> 替换为上面设置的 valid users:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo smbpasswd -a samba_user
</code></pre></div><p>根据服务器角色的差异，可能需要修改已有的文件权限和属性。</p>
<h4 id="which-is-faster-samba-or-scphttpsarstechnicacomcivisviewtopicphpf16t365900"><a href="https://arstechnica.com/civis/viewtopic.php?f=16&amp;t=365900">Which is faster-Samba or scp?</a><a hidden class="anchor" aria-hidden="true" href="#which-is-faster-samba-or-scphttpsarstechnicacomcivisviewtopicphpf16t365900">#</a></h4>
<p>Depends on the machines. Machines with really fast CPU may do SCP or SFTP faster.</p>
<p>Otherwise, Samba will probably be faster because it doesn&rsquo;t have to encrypt.</p>
<h4 id="connect-to-servers-with-nautilushttpswwwaddictivetipscomubuntu-linux-tipsconnect-to-servers-with-gnome-file-manager"><a href="https://www.addictivetips.com/ubuntu-linux-tips/connect-to-servers-with-gnome-file-manager/">Connect to servers with nautilus</a><a hidden class="anchor" aria-hidden="true" href="#connect-to-servers-with-nautilushttpswwwaddictivetipscomubuntu-linux-tipsconnect-to-servers-with-gnome-file-manager">#</a></h4>
<p><strong>Step 1:</strong> find the “Other Locations” button on the left-hand side of the Gnome file manager and click on the mouse.</p>
<p><strong>Step 2:</strong> make your way to the “Connect to Server” text box and tap on it with the mouse.</p>
<p><strong>Step 3:</strong> write out <strong>smb://</strong> followed by the IP address of the Samba file server. Alternatively, write out the hostname of the file server, as that works as well. Confused? Copy the examples below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ip address</span>
smb://ip.address.of.samba.file.server
<span style="color:#75715e"># hostname</span>
smb://MyExampleSambaShare

ftp://ip.address.of.ftp.server
nfs://ip.address.of.nfs.server
</code></pre></div><p><strong>Step 4:</strong> click on the “Connect” button to send out a new Samba connection. Assuming your file server has no user-name setup and is public, you’ll instantly see the files and be able to interact with the server.</p>
<p>However, if your server requires a username/password, you must fill out the username/password before using Samba.</p>
<h4 id="mount-samba-share-in-linux">Mount Samba Share in Linux<a hidden class="anchor" aria-hidden="true" href="#mount-samba-share-in-linux">#</a></h4>
<p><strong>List available shares on server:</strong></p>
<p>Install the samba client library:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install smbclient
</code></pre></div><p>Then list the shares:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ smbclient -L //&lt;your-ip-address&gt;
</code></pre></div><p>You will then be prompted to enter a password (assuming your share requires one) and then will output something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Sharename       Type      Comment
---------       ----      -------      
folder-mount-1  Disk      Description <span style="color:#ae81ff">1</span>
folder-mount-2  Disk      Description <span style="color:#ae81ff">2</span>
folder-mount-3  Disk      Description <span style="color:#ae81ff">3</span>
IPC$            IPC       IPC Service <span style="color:#f92672">(</span>Server Name<span style="color:#f92672">)</span>
</code></pre></div><p>Note the share name that you want to mount for later.</p>
<hr>
<p><strong>Temp mount the share to a folder:</strong></p>
<p>Install the <code>cifs-utils</code> package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install cifs-utils
</code></pre></div><p>Create the mount-point (folder) and then mount the share:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkdir /mnt/myFolder

$ sudo mount -t cifs -o username<span style="color:#f92672">=</span>serverUserName //myServerIpAdress/sharename /mnt/myFolder/
</code></pre></div><p>(Note: this will unmount upon reboot.)</p>
<hr>
<p><strong>Permanently mount the share to a folder:</strong></p>
<p>Install the <code>cifs-utils</code> package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install cifs-utils
</code></pre></div><p>Create the mount-point (folder):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mkdir /mnt/myFolder
</code></pre></div><p>Modify your <code>fstab</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/fstab
</code></pre></div><p>Place the following line at or near the bottom of the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ //&lt;your-ip-address&gt;/&lt;mount-name&gt; /mnt/myFolder/ cifs username<span style="color:#f92672">=</span>YOURUSERNAME,password<span style="color:#f92672">=</span>YOURPASSWORD,iocharset<span style="color:#f92672">=</span>utf8,file_mode<span style="color:#f92672">=</span>0777,dir_mode<span style="color:#f92672">=</span><span style="color:#ae81ff">0777</span>
</code></pre></div><p>(be sure to swap in your info into the line above)</p>
<p>Reboot your server and you should be off to the races.  To confirm that it is still mounted, type <code>df -h</code> and look found your mount in the list.</p>
<h3 id="sudohttpswwwcnblogscomsparkdevp6189196html"><a href="https://www.cnblogs.com/sparkdev/p/6189196.html">sudo</a><a hidden class="anchor" aria-hidden="true" href="#sudohttpswwwcnblogscomsparkdevp6189196html">#</a></h3>
<p>简单的说，sudo 是一种权限管理机制，管理员可以授权于一些普通用户去执行一些 root 执行的操作，而不需要知道 root 的密码。</p>
<p>严谨些说，sudo 允许一个已授权用户以超级用户或者其它用户的角色运行一个命令。当然，能做什么不能做什么都是通过安全策略来指定的。sudo 支持插件架构的安全策略，并能把输入输出写入日志。第三方可以开发并发布自己的安全策略和输入输出日志插件，并让它们无缝的和 sudo 一起工作。默认的安全策略记录在 <code>/etc/sudoers</code> 文件中。而安全策略可能需要用户通过密码来验证他们自己。也就是在用户执行 sudo 命令时要求用户输入自己账号的密码。如果验证失败，sudo 命令将会退出。</p>
<h4 id="命令语法">命令语法<a hidden class="anchor" aria-hidden="true" href="#命令语法">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo <span style="color:#f92672">[</span>-bhHpV<span style="color:#f92672">][</span>-s <span style="color:#f92672">][</span>-u &lt;用户&gt;<span style="color:#f92672">][</span>指令<span style="color:#f92672">]</span>
$ sudo <span style="color:#f92672">[</span>-klv<span style="color:#f92672">]</span>
</code></pre></div><p>参数：</p>
<ul>
<li><code>-b</code> 在后台执行指令。</li>
<li><code>-h</code> 显示帮助。</li>
<li><code>-H</code> 将HOME环境变量设为新身份的HOME环境变量。</li>
<li><code>-k</code> 结束密码的有效期限，也就是下次再执行sudo时便需要输入密码。</li>
<li><code>-l</code> 列出目前用户可执行与无法执行的指令。</li>
<li><code>-p</code> 改变询问密码的提示符号。</li>
<li><code>-s</code> 执行指定的shell。</li>
<li><code>-u</code> &lt;用户&gt; 以指定的用户作为新的身份。若不加上此参数，则预设以root作为新的身份。</li>
<li><code>-v</code> 延长密码有效期限5分钟。</li>
<li><code>-V</code> 显示版本信息。</li>
<li><code>-S</code> 从标准输入流替代终端来获取密码</li>
</ul>
<h4 id="基本配置">基本配置<a hidden class="anchor" aria-hidden="true" href="#基本配置">#</a></h4>
<p>系统默认创建了一个名为 sudo 的组。只要把用户加入这个组，用户就具有了 sudo 的权限。</p>
<p>至于如何把用户加入 sudo 组，您可以直接编辑 <code>/etc/group</code> 文件，当然您得使用一个有 sudo 权限的用户来干这件，在 sudo 组中加入新的用户，要使用逗号分隔多个用户。</p>
<p>或者您可以使用 usermod 命令把用户添加到一个组中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo usermod -a -G sudo jack
</code></pre></div><p>上面的设置中我们把用户 jack 添加到了 sudo 组中，所以当用户 jack 登录后就可以通过 sudo 命令以 root 权限执行命令了！</p>
<h4 id="详细配置">详细配置<a hidden class="anchor" aria-hidden="true" href="#详细配置">#</a></h4>
<p>在前面的配置中我们只是把用户 jack 加入了 sudo 组，他就具有了通过 root 权限执行命令的能力。</p>
<p>现在我们想问一下，这是怎么发生的？是时候介绍如何配置 sudo 命令了！</p>
<p>sudo 命令的配置文件为 <code>/etc/sudoers</code>。</p>
<p>编辑这个文件是有单独的命令的 visudo，这个文件我们最好不要使用 vim 命令来打开，是因为一旦你的语法写错会造成严重的后果，这个工具会替你检查你写的语法，这个文件的语法遵循以下格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">who where whom command
</code></pre></div><p>说白了就是哪个用户在哪个主机以谁的身份执行那些命令，那么这个 where, 是指允许在那台主机 ssh 连接进来才能执行后面的命令，文件里面默认给 root 用户定义了一条规则：</p>
<pre tabindex="0"><code>root    ALL=(ALL:ALL)       ALL
</code></pre><ul>
<li><code>root</code> 表示 root 用户。</li>
<li><code>ALL</code> 表示从任何的主机上都可以执行，也可以这样 192.168.100.0/24。</li>
<li><code>(ALL:ALL)</code>  是以谁的身份来执行，ALL:ALL 就代表 root 可以任何人的身份来执行命令。</li>
<li><code>ALL</code>  表示任何命令。</li>
</ul>
<p>那么整条规则就是 root 用户可以在任何主机以任何人的身份来执行所有的命令。</p>
<p>现在我们可以回答 jack 为什么具有通过 root 权限执行命令的能力了。打开 <code>/etc/sudoers</code> 文件：</p>
<pre tabindex="0"><code>%sudo ALL=(ALL:ALL) ALL
</code></pre><p>sudo 组中的所有用户都具有通过 root 权限执行命令的能力！</p>
<p>再看个例子：</p>
<pre tabindex="0"><code>nick   192.168.10.0/24=(root) /usr/sbin/useradd
</code></pre><p>上面的配置只允许 nick 在 192.168.10.0/24 网段上连接主机并且以 root 权限执行 useradd 命令。</p>
<p><strong>设置 sudo 时不需要输入密码</strong></p>
<p>只需要在配置行中添加 NOPASSWD: 就可以了：</p>
<pre tabindex="0"><code>%sudo ALL=(ALL:ALL) NOPASSWD:ALL
</code></pre><h4 id="日志">日志<a hidden class="anchor" aria-hidden="true" href="#日志">#</a></h4>
<p>在 ubuntu 中，sudo 的日志默认被记录在 <code>/var/log/auth.log</code> 文件中。当我们执行 sudo 命令时，相关日志都是会被记录下来的。</p>
<h4 id="与输出重定向httpswwwcnblogscomsparkdevp10287164html"><a href="https://www.cnblogs.com/sparkdev/p/10287164.html">与输出重定向</a><a hidden class="anchor" aria-hidden="true" href="#与输出重定向httpswwwcnblogscomsparkdevp10287164html">#</a></h4>
<p>如果当前用户没有某个文件的写权限，又要通过输出重定向往该文件中写入内容。结果只能是 &ldquo;Permission denied&rdquo;。</p>
<p>比如当前用户为 nick，下面的命令试图查询 /root 目录下的文件并把结果写入到 /root/test.txt 文件中，注意用户 nick 没有对 /root/test.txt 文件的写权限：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo ls -al /root/test.txt
-rw-r--r-- <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">0</span> Jan <span style="color:#ae81ff">10</span> 05:19 /root/test.txt
$ sudo ls -al /root &gt; /root/test.txt
-bash: /root/test.txt: Premission denied
</code></pre></div><p>不工作的原因是：<em>虽然 ls 命令是以 sudo 方式执行的，但是输出重定向操作是由当前 shell 执行的，它(当前 shell)没有 /root/test.txt 文件的权限，所以最终失败。</em></p>
<p>搞清楚了原因，就可以通过不同的方式来解决这个问题了，下面介绍四种方式。</p>
<p><strong>以 sudo 方式运行 shell</strong></p>
<p>既然是 shell 进程没有权限，那就用 sudo 的方式执行 shell：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo bash -c <span style="color:#e6db74">&#39;ls -al /root &gt; /root/test.txt&#39;</span>
</code></pre></div><p><strong>把命令写入脚本，以 sudo 方式执行脚本</strong></p>
<p>把下面的代码保存到脚本文件 test.sh 中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>ls -al /root &gt; /root/test.txt
</code></pre></div><p>然后通过下面的方式执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ chmod +x test.sh
$ sudo ./test.sh
</code></pre></div><p>如果觉着创建脚本麻烦的话还可以使用变通的方式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo bash <span style="color:#e6db74">&lt;&lt;EOF
</span><span style="color:#e6db74">&gt; ls -al /root &gt; /root/test.txt
</span><span style="color:#e6db74">&gt; EOF</span>
</code></pre></div><p>或者是下面的写法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#39;ls -al /root &gt; /root/test.txt&#39;</span> | sudo bash
</code></pre></div><p><strong>先通过 sudo -s 启动 shell，然后执行命令</strong></p>
<p>先通过 sudo -s 命令切换到 root 用户再执行命令，最后 ctrl + d 退出。</p>
<p><strong>通过 sudo tee 命令实现</strong></p>
<p>Tee 命令用于将数据重定向到文件，另一方面还可以提供一份重定向数据的副本作为后续命令的 stdin。简单的说就是把数据重定向到给定文件和屏幕上：</p>
<p><img loading="lazy" src="/Distributions/952033-20190118131012035-1560486278.png" alt=""  />
</p>
<p>面的命令中通过 sudo tee 把 ls 命令的输出写入文件：</p>
<pre tabindex="0"><code>$ sudo ls -al /root | sudo tee /root/test.txt &gt; /dev/null
</code></pre><p>其中的 &gt; /dev/null 阻止 tee 把内容输出到终端。</p>
<h3 id="fdiskhttpswwwcnblogscomsparkdevp10095916html"><a href="https://www.cnblogs.com/sparkdev/p/10095916.html">fdisk</a><a hidden class="anchor" aria-hidden="true" href="#fdiskhttpswwwcnblogscomsparkdevp10095916html">#</a></h3>
<p>Linux 系统中所有的硬件设备都是通过文件的方式来表现和使用的，我们将这些文件称为设备文件，硬盘对应的设备文件一般被称为块设备文件。</p>
<h4 id="磁盘分类">磁盘分类<a hidden class="anchor" aria-hidden="true" href="#磁盘分类">#</a></h4>
<p>比较常见的磁盘类型有消费类市场中的 SATA 硬盘和服务器中使用的 SCSI 硬盘、SAS 硬盘，当然还有当下大热的各种固态硬盘。</p>
<p><strong>SATA 硬盘</strong></p>
<p>SATA(Serial ATA)口的硬盘又叫串口硬盘，Serial ATA 采用串行连接方式，串行 ATA 总线使用嵌入式时钟信号，具备了更强的纠错能力，与以往相比其最大的区别在于能对传输指令(不仅仅是数据)进行检查，如果发现错误会自动矫正，这在很大程度上提高了数据传输的可靠性。串行接口还具有结构简单、支持热插拔的优点。SATA 硬盘主要用于消费类市场和一些低端服务器：</p>
<p><img loading="lazy" src="/Distributions/952033-20181210130351845-1555163788.jpg" alt="img"  />
</p>
<p><strong>SCSI 硬盘</strong></p>
<p>SCSI 硬盘即采用 SCSI 接口的硬盘。它由于性能好、稳定性高，因此在服务器上得到广泛应用。同时其价格也不菲，正因它的价格昂贵，所以在普通PC上很少见到它的踪迹。SCSI 硬盘使用 50 针接口，外观和普通硬盘接口有些相似(下图来自互联网)：</p>
<p><img loading="lazy" src="/Distributions/952033-20181210130325224-626582547.jpg" alt="img"  />
</p>
<p><strong>SAS 硬盘</strong></p>
<p>SAS 是 Serial Attached SCSI 的缩写，即串行连接的 SCSI，其目标是定义一个新的串行点对点的企业级存储设备接口。串行接口减少了线缆的尺寸，允许更快的传输速度。SAS 硬盘与相同转速的 SCSI 硬盘相比有相同或者更好的性能。SAS 硬盘一般用于比较高端的服务器。</p>
<p><strong>固态硬盘</strong></p>
<p>固态硬盘(Solid State Disk)，一般称之为 SSD 硬盘，固态硬盘是用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单元(FLASH芯片、DRAM芯片)组成。其主要特点是没有传统硬盘的机械结构，读写速度非常快(下图来自互联网)：</p>
<p><img loading="lazy" src="/Distributions/952033-20181210130414715-469384412.png" alt="img"  />
</p>
<h4 id="表示方法">表示方法<a hidden class="anchor" aria-hidden="true" href="#表示方法">#</a></h4>
<p>在 Linux 系统中磁盘设备文件的命名规则为：</p>
<pre tabindex="0"><code>主设备号 + 次设备号 + 磁盘分区号
</code></pre><p>对于目前常见的磁盘，一般表示为：</p>
<pre tabindex="0"><code>sd[a-z]x
</code></pre><ul>
<li>主设备号代表设备的类型，相同的主设备号表示同类型的设备。当前常见磁盘的主设备号为 sd。</li>
<li>次设备号代表同类设备中的序号，用 &ldquo;a-z&rdquo; 表示。比如 /dev/sda 表示第一块磁盘，/dev/sdb 表示第二块磁盘。</li>
<li>x 表示磁盘分区编号。在每块磁盘上可能会划分多个分区，针对每个分区，Linux 用 /dev/sdbx 表示，这里的 x 表示第二块磁盘的第 x 个分区。</li>
</ul>
<h4 id="磁盘分区">磁盘分区<a hidden class="anchor" aria-hidden="true" href="#磁盘分区">#</a></h4>
<p>创建磁盘分区大概有下面几个目的：</p>
<ul>
<li>提升数据的安全性(一个分区的数据损坏不会影响其他分区的数据)</li>
<li>支持安装多个操作系统</li>
<li>多个小分区对比一个大分区会有性能提升</li>
<li>更好的组织数据</li>
</ul>
<p>本文以常见的 MBR 分区为例介绍磁盘分区中的一些常见概念。MBR 磁盘的分区由主分区、扩展分区和逻辑分区组成。在一块磁盘上，主分区的最大个数是 4，其中扩展分区也是一个主分区，并且最多只能有一个扩展分区，但可以在扩展分区上创建多个逻辑分区。因此主分区(包括扩展分区)的范围是 1-4，逻辑分区从 5 开始。对于逻辑分区，Linux 规定它们必须建立在扩展分区上，而不是建立在主分区上。</p>
<p>主分区的作用是用来启动操作系统的，主要存放操作系统的启动或引导程序。</p>
<p>扩展分区只不过是逻辑分区的 &ldquo;容器&rdquo;。实际上只有主分区和逻辑分区是用来进行数据存储的，因而可以将数据集中存放在磁盘的逻辑分区中。</p>
<p>我们可以通过 fdisk 命令来查看磁盘分区的信息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo fdisk -l /dev/sda
</code></pre></div><p>分区信息：</p>
<ul>
<li><strong>Device</strong> 显示了磁盘分区对应的设备文件名。</li>
<li><strong>Boot</strong> 显示是否为引导分区，是引导分区就有一个 &lsquo;*&rsquo; 号。</li>
<li><strong>Start</strong> 表示磁盘分区的起始位置。</li>
<li><strong>End</strong> 表示磁盘分区的结束位置。</li>
<li><strong>Sectors</strong> 表示分区占用的扇区数目。</li>
<li><strong>Size</strong> 显示分区的大小。</li>
<li><strong>Id/Type</strong> 显示的内容相同，分别是数值 ID 及其文字描述。 Id 列显示了磁盘分区对应的 ID，根据分区的不同，分区对应的 ID 号也不相同。Linux 下用 83 表示主分区和逻辑分区，5 表示扩展分区，8e 表示 LVM 分区，82 表示交换分区，7 表示 NTFS 分区。</li>
</ul>
<h4 id="划分磁盘分区">划分磁盘分区<a hidden class="anchor" aria-hidden="true" href="#划分磁盘分区">#</a></h4>
<p>fdisk 是 Linux 系统中一款功能强大的磁盘分区管理工具，可以观察硬盘的使用情况，也可以用来管理磁盘分区。</p>
<p>假设我们的 Linux 系统中增加了一块新的磁盘，系统对应的设备名为 /dev/sdd，下面我们通过 fdisk 命令对这个磁盘进行分区：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#f92672">(</span>echo n; echo p; echo 1; echo ; echo ; echo w<span style="color:#f92672">)</span> | sudo fdisk /dev/sdd
</code></pre></div><ul>
<li>命令 n 来创建新分区</li>
<li>p 来创建主分区</li>
<li>主分区的编号为 1- 4，这里我们输入了 1。</li>
<li>分区的大小是通过设置分区开始处的扇区和结束处的扇区设置的。这里如果回车两次会把整个磁盘划分为一个分区，也就是整个磁盘的容器都分给了一个分区。</li>
<li>注意此时的分区信息还没有写入到磁盘中，在这里还可以反悔，如果确认执行上面的分区，执行 w 命令就行了。</li>
</ul>
<p>这时分区操作已经完成了，我们可以通过下面的命令查看分区的结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo fdisk -l /dev/sdd
</code></pre></div><p>分区是使用磁盘的基础，在分区完成后还需要对分区进行格式化，并把格式化后的文件系统挂载到 Linux 系统之后才能存储文件。</p>
<p><strong>更改分区的类型</strong></p>
<p>创建的分区类型默认为 83(Linux)，如果想要一个 8e(Linux LVM)类型的分区，在 fdisk 输入 t 命令来修改分区的类型。</p>
<h3 id="fuserhttpswwwcnblogscomsungeekp11857549html"><a href="https://www.cnblogs.com/Sungeek/p/11857549.html">fuser</a><a hidden class="anchor" aria-hidden="true" href="#fuserhttpswwwcnblogscomsungeekp11857549html">#</a></h3>
<p>当使用umount命令卸载挂载点时，会遇到“device is busy”提示，这时fuser就能查出谁在使用这个资源。</p>
<h4 id="描述">描述<a hidden class="anchor" aria-hidden="true" href="#描述">#</a></h4>
<p>fuser可以显示出当前哪个程序在使用磁盘上的某个文件、挂载点、甚至网络端口，并给出程序进程的详细信息。</p>
<p>每个进程 ID 后面跟有一个字母代码。字母代码的解释如下所述。</p>
<ul>
<li><code>c</code>：表示此进程正在使用该文件作为其当前目录。</li>
<li><code>e</code>：将此文件作为程序的可执行对象使用</li>
<li><code>f</code>：打开的文件。默认不显示。</li>
<li><code>F</code>：打开的文件，用于写操作。默认不显示。</li>
<li><code>r</code>：表示此进程正在将该文件用作其根目录。</li>
<li><code>m</code>：指示进程使用该文件进行内存映射，抑或该文件为共享库文件，被进程映射进内存。</li>
<li><code>s</code>：将此文件作为共享库（或其他可装载对象）使用</li>
</ul>
<p>对于具有已挂载文件系统的块特殊设备，将列出使用该设备上的任何文件的所有进程。对于所有类型的文件（文本文件、可执行文件、目录、设备，等等），只会报告使用该文件的进程。</p>
<p>对于所有类型的设备，<code>fuser</code> 还会显示打开设备的任何已知内核使用者。内核使用者显示为下列格式之一：</p>
<pre tabindex="0"><code>[module_name]
[module_name,dev_path=path]
[module_name,dev=(major,minor)]
[module_name,dev=(major,minor),dev_path=path]
</code></pre><p>如果指定了多组文件，可能需要为其他每个文件组重新指定选项。单个短划线可取消当前施行的选项。</p>
<p>各个进程 ID 输出到标准输出中的单个行上，并以空格分隔。所有其他输出（包括单个终止换行符）均被写入到标准错误。</p>
<p>任何用户都可以运行 fuser，但只有超级用户可以终止其他用户的进程。</p>
<h4 id="选项">选项<a hidden class="anchor" aria-hidden="true" href="#选项">#</a></h4>
<p>支持以下选项：</p>
<ul>
<li><code>-a</code>：显示所有命令行中指定的文件，默认情况下被访问的文件才会被显示。</li>
<li><code>-c</code>：和-m一样，用于POSIX兼容。</li>
<li><code>-k</code>：杀掉访问文件的进程。如果没有指定-signal就会发送SIGKILL信号。</li>
<li><code>-i</code>：杀掉进程之前询问用户，如果没有-k这个选项会被忽略。</li>
<li><code>-l</code>：列出所有已知的信号名称。</li>
<li><code>-m</code>：name 指定一个挂载文件系统上的文件或者被挂载的块设备（名称name）。这样所有访问这个文件或者文件系统的进程都会被列出来。如果指定的是一个目录会自动转换成&quot;name/&quot;,并使用所有挂载在那个目录下面的文件系统。</li>
<li><code>-n</code>：space 指定一个不同的命名空间(space).这里支持不同的空间文件(文件名，此处默认)、tcp(本地tcp端口)、udp(本地udp端口)。对于端口， 可以指定端口号或者名称，如果不会引起歧义那么可以使用简单表示的形式，例如：name/space (即形如:80/tcp之类的表示)。</li>
<li><code>-s</code>：静默模式，这时候-u,-v会被忽略。-a不能和-s一起使用。</li>
<li><code>-signal</code>：使用指定的信号，而不是用SIGKILL来杀掉进程。可以通过名称或者号码来表示信号(例如-HUP,-1),这个选项要和-k一起使用，否则会被忽略。</li>
<li><code>-u</code>：在每个PID后面添加进程拥有者的用户名称。</li>
<li><code>-v</code>：详细模式。输出似ps命令的输出，包含PID,USER,COMMAND等许多域,如果是内核访问的那么PID为kernel.  -V 输出版本号。</li>
<li><code>-4</code>：使用IPV4套接字,不能和-6一起应用，只在-n的tcp和udp的命名存在时不被忽略。</li>
<li><code>-6</code>：使用IPV6套接字,不能和-4一起应用，只在-n的tcp和udp的命名存在时不被忽略。</li>
<li><code>-</code>：重置所有的选项，把信号设置为SIGKILL.</li>
</ul>
<h4 id="示例">示例<a hidden class="anchor" aria-hidden="true" href="#示例">#</a></h4>
<p><strong>示例 1</strong> 显示使用某个文件的进程信息</p>
<p>这个命令在umount的时候很有用，可以找到还有哪些用到这个设备了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ fuser -um /dev/sda2  
/dev/sda2:            6378c<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  6534c<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  6628<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  
6653c<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  7429c<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  7549c<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  7608c<span style="color:#f92672">(</span>quietheart<span style="color:#f92672">)</span>  
</code></pre></div><p><strong>示例 2</strong> 杀掉打开readme文件的程序</p>
<p>这里，会在kill之前询问是否确定。最好加上-v以便知道将要杀那个进程。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ fuser -m -k -i readme
</code></pre></div><p><strong>示例 3</strong> 查看那些程序使用tcp的80端口</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ fuser -v -n tcp <span style="color:#ae81ff">80</span>
<span style="color:#75715e"># or</span>
$ fuser -v 80/tcp  
</code></pre></div><h3 id="tcpdumphttpssegmentfaultcoma1190000018944427"><a href="https://segmentfault.com/a/1190000018944427">tcpdump</a><a hidden class="anchor" aria-hidden="true" href="#tcpdumphttpssegmentfaultcoma1190000018944427">#</a></h3>
<p><strong>tcpdump</strong> 是一款 Linux 平台的抓包工具。它可以抓取涵盖整个 TCP/IP 协议族的数据包，支持针对网络层、协议、主机、端口的过滤，并提供 and、or、not 等逻辑语句来过滤无用的信息。</p>
<p>tcpdump 是一个非常复杂的工具，掌握它的方方面面实属不易，也不推荐，能够用它来解决日常工作问题才是关系。</p>
<h4 id="命令选项">命令选项<a hidden class="anchor" aria-hidden="true" href="#命令选项">#</a></h4>
<p>tcpdump 有很多命令选项，想了解所有选项可以 Linux 命令行输入 <code>tcpdump -h</code>，<code>man tcpdump</code> 查看每个选项的意思。</p>
<p>下面列举一些常用选项：</p>
<ul>
<li>-A 只使用 ASCII 打印报文的全部数据，不要和 <code>-X</code> 一起使用，获取 http 可以用 <code>tcpdump -nSA port 80</code></li>
<li>-b 在数据链路层上选择协议，包括 ip, arp, rarp, ipx 等</li>
<li>-c 指定要抓取包的数量</li>
<li>-D 列出操作系统所有可以用于抓包的接口</li>
<li>-e 输出链路层报头</li>
<li>-i 指定监听的网卡，<code>-i any</code> 显示所有网卡</li>
<li>-n 表示不解析主机名，直接用 IP 显示，默认是用 hostname 显示</li>
<li>-nn 表示不解析主机名和端口，直接用端口号显示，默认显示是端口号对应的服务名</li>
<li>-p 关闭接口的混杂模式</li>
<li>-P 指定抓取的包是流入的包还是流出的，可以指定参数 in, out, inout 等，默认是 inout</li>
<li>-q 快速打印输出，即只输出少量的协议相关信息</li>
<li>-s len 设置要抓取数据包长度为 len，默认只会截取前 96bytes 的内容，<code>-s 0</code> 的话，会截取全部内容。</li>
<li>-S 将 TCP 的序列号以绝对值形式输出，而不是相对值</li>
<li>-t 不要打印时间戳</li>
<li>-vv 输出详细信息（比如 tos、ttl、checksum等）</li>
<li>-X 同时用 hex 和 ascii 显示报文内容</li>
<li>-XX 同 -X，但同时显示以太网头部</li>
</ul>
<h4 id="过滤器">过滤器<a hidden class="anchor" aria-hidden="true" href="#过滤器">#</a></h4>
<p>网络报文是很多的，很多时候我们在主机上抓包，会抓到很多我们并不关心的无用包，然后要从这些包里面去找我们需要的信息，无疑是一件费时费力的事情，tcpdump 提供了灵活的语法可以精确获取我们关心的数据，这些语法说得专业点就是过滤器。</p>
<p>过滤器简单可分为三类：协议（proto）、传输方向（dir）和类型（type）。</p>
<p>一般的 <strong>表达式格式</strong> 为：</p>
<p><img loading="lazy" src="/Distributions/3347645908-5cc81421999ad_fix732.webp" alt=""  />
</p>
<ul>
<li>关于 proto：可选有 ip, arp, rarp, tcp, udp, icmp, ether 等，默认是所有协议的包</li>
<li>关于 dir：可选有 src, dst, src or dst, src and dst，默认为 src or dst</li>
<li>关于 type：可选有 host, net, port, portrange（端口范围，比如 21-42），默认为 host</li>
</ul>
<h4 id="常用操作">常用操作<a hidden class="anchor" aria-hidden="true" href="#常用操作">#</a></h4>
<p>测试环境 IP：172.18.82.173</p>
<h5 id="抓取某主机的数据包">抓取某主机的数据包<a hidden class="anchor" aria-hidden="true" href="#抓取某主机的数据包">#</a></h5>
<p>抓取主机 172.18.82.173 上所有收到（DST_IP）和发出（SRC_IP）的所有数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump host 172.18.82.173
</code></pre></div><p>抓取经过指定网口 interface ，并且 DST_IP 或 SRC_IP 是 172.18.82.173 的数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 host 172.18.82.173
</code></pre></div><p>筛选 SRC_IP，抓取经过 interface 且从 172.18.82.173 发出的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 src host 172.18.82.173
</code></pre></div><p>筛选 DST_IP，抓取经过 interface 且发送到 172.18.82.173 的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 dst host 172.18.82.173
</code></pre></div><p>抓取主机 200.200.200.1 和主机 200.200.200.2 或 200.200.200.3 通信的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump host 200.200.200.1 and <span style="color:#ae81ff">\(</span>200.200.200.2 or 200.200.200.3<span style="color:#ae81ff">\)</span>
</code></pre></div><p>抓取主机 200.200.200.1 和除了主机 200.200.200.2 之外所有主机通信的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump ip host 200.200.200.1 and ! 200.200.200.2
</code></pre></div><h5 id="抓取某端口的数据包">抓取某端口的数据包<a hidden class="anchor" aria-hidden="true" href="#抓取某端口的数据包">#</a></h5>
<p>抓取所有端口，显示 IP 地址</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -nS
</code></pre></div><p>抓取某端口上的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump port <span style="color:#ae81ff">22</span>
</code></pre></div><p>抓取经过指定 interface，并且 DST_PORT 或 SRC_PORT 是 22 的数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 port <span style="color:#ae81ff">22</span>
</code></pre></div><p>筛选 SRC_PORT</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 src port <span style="color:#ae81ff">22</span>
</code></pre></div><p>筛选 DST_PORT</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 dst port <span style="color:#ae81ff">22</span>
</code></pre></div><p>比如希望查看发送到 host 172.18.82.173 的网口 eth0 的 22 号端口的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 -nnt dst host 172.18.82.173 and port <span style="color:#ae81ff">22</span> -c <span style="color:#ae81ff">1</span> -vv
</code></pre></div><h5 id="抓取某网络网段的数据包">抓取某网络（网段）的数据包<a hidden class="anchor" aria-hidden="true" href="#抓取某网络网段的数据包">#</a></h5>
<p>抓取经过指定 interface，并且 DST_NET 或 SRC_NET 是 172.18.82 的包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 net 172.18.82
</code></pre></div><p>筛选 SRC_NET</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 src net 172.18.82
</code></pre></div><p>筛选 DST_NET</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 dst net 172.18.82
</code></pre></div><h5 id="抓取某协议的数据包">抓取某协议的数据包<a hidden class="anchor" aria-hidden="true" href="#抓取某协议的数据包">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 icmp
$ tcpdump -i eth0 ip
$ tcpdump -i eth0 tcp
$ tcpdump -i eth0 udp
$ tcpdump -i eth0 arp
</code></pre></div><h5 id="复杂的过滤条件">复杂的过滤条件<a hidden class="anchor" aria-hidden="true" href="#复杂的过滤条件">#</a></h5>
<p>抓取经过 interface eth0 发送到 host 200.200.200.1 或 200.200.200.2 的 TCP 协议 22 号端口的数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 -nntvv -c <span style="color:#ae81ff">10</span> <span style="color:#e6db74">&#39;((tcp) and (port 22) and ((dst host 200.200.200.1) or (dst host 200.200.200.2)))&#39;</span>
</code></pre></div><p>对于复杂的过滤器表达式，为了逻辑清晰，可以使用 <code>()</code>，不过默认情况下，tcpdump 会将 <code>()</code> 当做特殊字符，所以必须使用 <code>''</code> 来消除歧义。</p>
<p>抓取经过 interface eth0， DST_MAC 或 SRC_MAC 地址是 00:16:3e:12:16:e7 的 ICMP 数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 <span style="color:#e6db74">&#39;((icmp) and ((ether host 00:16:3e:12:16:e7)))&#39;</span> -nnvv
</code></pre></div><p>抓取经过 interface eth0，目标网络是 172.18 但目标主机又不是 172.18.82.173 的 TCP 且非 22 号端口号的数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 -nntvv <span style="color:#e6db74">&#39;((dst net 172.18) and (not dst host 172.18.82.173) and (tcp) and (not port 22))&#39;</span>
</code></pre></div><p>抓取流入 interface eth0，host 为 172.18.82.173 且协议为 ICMP 的数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 -nntvv -P in host 172.18.82.173 and icmp
</code></pre></div><p>抓取流出 interface eth0，host 为 172.18.82.173 且协议为 ICMP 的数据包</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -i eth0 -nntvv -P out host 172.18.82.173 and icmp
</code></pre></div><h4 id="与其他工具的配合">与其他工具的配合<a hidden class="anchor" aria-hidden="true" href="#与其他工具的配合">#</a></h4>
<p>tcpdump 抓包的时候，默认是打印到屏幕输出，如果是抓取包少还好，如果包很多，很多行数据，刷刷刷从眼前一闪而过，根本来不及看清内容。不过，tcpdump 提供了将抓取的数据保存到文件的功能，查看文件就方便分析多了，而且还能与其他图形工具一起配合分析，比如 wireshark、Snort 等。</p>
<ul>
<li>-w 选项表示把数据报文输出到文件</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -w capture_file.pcap port <span style="color:#ae81ff">80</span>
</code></pre></div><ul>
<li>-r 选项表示读取文件里的数据报文，显示到屏幕上</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tcpdump -nXr capture_file.pcap host host1
</code></pre></div><p><code>.pcap</code> 格式的文件需要用 wireshark、Snort 等工具查看，使用 <code>vim</code> 或 <code>cat</code> 会出现乱码。</p>
<h4 id="tcpdump-的输出格式">tcpdump 的输出格式<a hidden class="anchor" aria-hidden="true" href="#tcpdump-的输出格式">#</a></h4>
<p>tcpdump 的输出格式总体上为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">系统时间 源主机.端口 &gt; 目标主机.端口 数据包参数
</code></pre></div><p>比如下面的例子，显示了 TCP 的三次握手过程：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">21:27:06.995846 IP <span style="color:#f92672">(</span>tos 0x0, ttl 64, id 45646, offset 0, flags <span style="color:#f92672">[</span>DF<span style="color:#f92672">]</span>, proto TCP <span style="color:#f92672">(</span>6<span style="color:#f92672">)</span>, length 64<span style="color:#f92672">)</span>
    192.168.1.106.56166 &gt; 124.192.132.54.80: Flags <span style="color:#f92672">[</span>S<span style="color:#f92672">]</span>, cksum 0xa730 <span style="color:#f92672">(</span>correct<span style="color:#f92672">)</span>, seq 992042666, win 65535, options <span style="color:#f92672">[</span>mss 1460,nop,wscale 4,nop,nop,TS val <span style="color:#ae81ff">663433143</span> ecr 0,sackOK,eol<span style="color:#f92672">]</span>, length <span style="color:#ae81ff">0</span>

21:27:07.030487 IP <span style="color:#f92672">(</span>tos 0x0, ttl 51, id 0, offset 0, flags <span style="color:#f92672">[</span>DF<span style="color:#f92672">]</span>, proto TCP <span style="color:#f92672">(</span>6<span style="color:#f92672">)</span>, length 44<span style="color:#f92672">)</span>
    124.192.132.54.80 &gt; 192.168.1.106.56166: Flags <span style="color:#f92672">[</span>S.<span style="color:#f92672">]</span>, cksum 0xedc0 <span style="color:#f92672">(</span>correct<span style="color:#f92672">)</span>, seq 2147006684, ack 992042667, win 14600, options <span style="color:#f92672">[</span>mss 1440<span style="color:#f92672">]</span>, length <span style="color:#ae81ff">0</span>

21:27:07.030527 IP <span style="color:#f92672">(</span>tos 0x0, ttl 64, id 59119, offset 0, flags <span style="color:#f92672">[</span>DF<span style="color:#f92672">]</span>, proto TCP <span style="color:#f92672">(</span>6<span style="color:#f92672">)</span>, length 40<span style="color:#f92672">)</span>
    192.168.1.106.56166 &gt; 124.192.132.54.80: Flags <span style="color:#f92672">[</span>.<span style="color:#f92672">]</span>, cksum 0x3e72 <span style="color:#f92672">(</span>correct<span style="color:#f92672">)</span>, ack 2147006685, win 65535, length <span style="color:#ae81ff">0</span>
</code></pre></div><p>第一条是 <code>SYN</code> 报文，通过 <code>Flags[S]</code> 看出。第二条是 <code>[S.]</code>，表示 <code>SYN-ACK</code> 报文。常见的 TCP 报文的 Flags 如下：</p>
<ul>
<li><code>[S]</code>： SYN（开始连接）</li>
<li><code>[.]</code>: 没有 Flag</li>
<li><code>[P]</code>: PSH（推送数据）</li>
<li><code>[F]</code>: FIN （结束连接）</li>
<li><code>[R]</code>: RST（重置连接）</li>
</ul>
<h3 id="gpghttpsruanyifengcomblog201307gpghtml"><a href="https://ruanyifeng.com/blog/2013/07/gpg.html">GPG</a><a hidden class="anchor" aria-hidden="true" href="#gpghttpsruanyifengcomblog201307gpghtml">#</a></h3>
<p>前两篇文章，我介绍了<a href="https://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html">RSA算法</a>。</p>
<p>今天，就接着来看，现实中怎么使用这个算法，对信息加密和解密。这要用到<a href="https://www.gnupg.org/">GnuPG</a>软件（简称GPG），它是目前最流行、最好用的加密工具之一。</p>
<h4 id="什么是gpg">什么是GPG<a hidden class="anchor" aria-hidden="true" href="#什么是gpg">#</a></h4>
<p>要了解什么是GPG，就要先了解<a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy">PGP</a>。</p>
<p>1991年，程序员<a href="https://en.wikipedia.org/wiki/Phil_Zimmermann">Phil Zimmermann</a>为了避开政府监视，开发了加密软件PGP。这个软件非常好用，迅速流传开来，成了许多程序员的必备工具。但是，它是商业软件，不能自由使用。所以，自由软件基金会决定，开发一个PGP的替代品，取名为GnuPG。这就是GPG的由来。</p>
<p>GnuPG 是完整实现了 <a href="https://tools.ietf.org/html/rfc4880">RFC4880</a> （即PGP） 所定义的 <a href="https://openpgp.org/about/">OpenPGP</a> 标准的自由软件。</p>
<p>GnuPG 可以加密和签名你的数据和通讯信息，包含一个通用的密钥管理系统以及用于各种公钥目录的访问模块。</p>
<p>GnuPG 是一个易于与其它程序整合的命令行工具，拥有很多前端程序和函数库。</p>
<p>GnuPG 还支持 S/MIME 和 Secure Shell (ssh)。</p>
<p>GPG有许多用途，本文主要介绍文件加密。至于邮件的加密，不同的邮件客户端有不同的设置，请参考Ubuntu网站的<a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto#Reading_OpenPGP_E-mail">介绍</a>。</p>
<p>本文的使用环境为Linux命令行。如果掌握了命令行，<a href="https://gpg4win.org/">Windows</a> 或 <a href="https://gpgtools.org/">Mac OS</a> 客户端，就非常容易掌握。GPG并不难学，学会了它，从此就能轻松传递加密信息。建议读者一步步跟着教程做，对每条命令都自行测试。</p>
<h4 id="安装-7">安装<a hidden class="anchor" aria-hidden="true" href="#安装-7">#</a></h4>
<p>GPG有两种安装方式。可以<a href="https://www.gnupg.org/download/index.en.html">下载源码</a>，自己编译安装。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./configure
$ make
$ make install
</code></pre></div><p>也可以安装编译好的二进制包。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get install gnupg
</code></pre></div><p>安装完成后，键入下面的命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --help
</code></pre></div><p>如果屏幕显示GPG的帮助，就表示安装成功。</p>
<h4 id="配置-3">配置<a hidden class="anchor" aria-hidden="true" href="#配置-3">#</a></h4>
<h5 id="目录位置">目录位置<a hidden class="anchor" aria-hidden="true" href="#目录位置">#</a></h5>
<p>GnuPG 用环境变量 <code>$GNUPGHOME</code> 定位配置文件的位置，默认情况下此变量并未被设置，会直接使用 <code>$HOME</code>，所以默认的配置目录是 <code>~/.gnupg</code>。</p>
<p>要改变默认位置，执行 <code>$ gpg --homedir path/to/file</code> 或在 <a href="https://wiki.archlinux.org/title/Startup_file">startup files</a> 中设置 <code>GNUPGHOME</code>。</p>
<h5 id="配置文件">配置文件<a hidden class="anchor" aria-hidden="true" href="#配置文件">#</a></h5>
<p>默认的配置文件是 <code>~/.gnupg/gpg.conf</code> 和 <code>~/.gnupg/dirmngr.conf</code>.</p>
<p>gnupg 目录的默认 <a href="https://wiki.archlinux.org/title/Permissions">权限</a> 是 <code>700</code>，其中文件的权限是 <code>600</code>. 仅目录的所有者有权读写，访问这些文件。这是基于安全考虑，请不要变更。如果不使用这样的安全权限设置，会收到不安全文件的警告。</p>
<p>在文件中附加需要的文件：<code>/usr/share/gnupg</code> 包含基本架构文件. gpg，第一次运行时，如果配置文件不存在，会自动复制文件到 <code>~/.gnupg</code>。</p>
<h5 id="新用户的默认选项">新用户的默认选项<a hidden class="anchor" aria-hidden="true" href="#新用户的默认选项">#</a></h5>
<p>要给新建用户设定一些默认选项，把配置文件放到 <code>/etc/skel/.gnupg/</code>。系统创建新用户时，就会把文件复制到 GnuPG 目录。还有一个 <em>addgnupghome</em> 命令可以为已有用户创建新 GnuPG 主目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># addgnupghome user1 user2</span>
</code></pre></div><p>此命令会将对检查 <code>/home/user1/.gnupg</code> 和 <code>/home/user2/.gnupg</code>，如果用户的 GnuPG 主目录不存在，就会从 skeleton 目录复制文件过去。</p>
<h4 id="生成密钥">生成密钥<a hidden class="anchor" aria-hidden="true" href="#生成密钥">#</a></h4>
<p>安装成功后，使用 <code>--full-generate-key</code> 参数生成自己的密钥。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --full-generate-key
</code></pre></div><p>或用 <code>gpg --gen-key</code> 快速生成。以下使用 <code>gpg2 --full-generate-key</code> 演示。</p>
<p>回车以后，会跳出一大段文字：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gpg <span style="color:#f92672">(</span>GnuPG<span style="color:#f92672">)</span> 2.2.19; Copyright <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span> <span style="color:#ae81ff">2019</span> Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please <span style="color:#66d9ef">select</span> what kind of key you want:
   <span style="color:#f92672">(</span>1<span style="color:#f92672">)</span> RSA and RSA <span style="color:#f92672">(</span>default<span style="color:#f92672">)</span>
   <span style="color:#f92672">(</span>2<span style="color:#f92672">)</span> DSA and Elgamal
   <span style="color:#f92672">(</span>3<span style="color:#f92672">)</span> DSA <span style="color:#f92672">(</span>sign only<span style="color:#f92672">)</span>
   <span style="color:#f92672">(</span>4<span style="color:#f92672">)</span> RSA <span style="color:#f92672">(</span>sign only<span style="color:#f92672">)</span>
  <span style="color:#f92672">(</span>14<span style="color:#f92672">)</span> Existing key from card
Your selection? 
</code></pre></div><p>第一段是版权声明，然后让用户自己选择加密算法。默认选择第一个选项，表示加密和签名都使用RSA算法。</p>
<p>然后，系统就会问你密钥的长度。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">RSA keys may be between <span style="color:#ae81ff">1024</span> and <span style="color:#ae81ff">4096</span> bits long.
What keysize <span style="color:#66d9ef">do</span> you want? <span style="color:#f92672">(</span>3072<span style="color:#f92672">)</span> 
</code></pre></div><p>密钥越长越安全。</p>
<p>接着，设定密钥的有效期。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Please specify how long the key should be valid.
         0 <span style="color:#f92672">=</span> key does not expire
      &lt;n&gt;  <span style="color:#f92672">=</span> key expires in n days
      &lt;n&gt;w <span style="color:#f92672">=</span> key expires in n weeks
      &lt;n&gt;m <span style="color:#f92672">=</span> key expires in n months
      &lt;n&gt;y <span style="color:#f92672">=</span> key expires in n years
Key is valid <span style="color:#66d9ef">for</span>? <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> 
</code></pre></div><p>如果密钥只是个人使用，并且你很确定可以有效保管私钥，建议选择第一个选项，即永不过期。回答完上面三个问题以后，系统让你确认。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Is this correct? <span style="color:#f92672">(</span>y/N<span style="color:#f92672">)</span>
</code></pre></div><p>输入y，系统就要求你提供个人信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">GnuPG needs to construct a user ID to identify your key.

Real name: 
Email address
Comment: 
</code></pre></div><p>&ldquo;真实姓名&quot;填入你姓名的英文写法，&ldquo;电子邮件地址&quot;填入你的邮件地址，&ldquo;注释&quot;这一栏可以空着。</p>
<p>然后，你的&quot;用户ID&quot;生成了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">You selected this USER-ID:
    <span style="color:#e6db74">&#34;Vane Hsiung &lt;1664548605@qq.com&gt;&#34;</span>
</code></pre></div><p>系统会让你最后确认一次。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Change <span style="color:#f92672">(</span>N<span style="color:#f92672">)</span>ame, <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span>omment, <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span>mail or <span style="color:#f92672">(</span>O<span style="color:#f92672">)</span>kay/<span style="color:#f92672">(</span>Q<span style="color:#f92672">)</span>uit? 
</code></pre></div><p>输入O表示&quot;确定&rdquo;。</p>
<p>接着，系统会要求你做一些随机的举动，以生成一个随机数。同时系统会让你设定一个私钥的密码。这是为了防止误操作，或者系统被侵入时有人擅自动用私钥。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">We need to generate a lot of random bytes. It is a good idea to performsome other action <span style="color:#f92672">(</span>type on the keyboard, move the mouse, utilize thedisks<span style="color:#f92672">)</span> during the prime generation; this gives the random numbergenerator a better chance to gain enough entropy.
</code></pre></div><p>然后，系统就开始生成密钥了，</p>
<p>几分钟以后，系统提示密钥已经生成了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gpg: key B893B73ABC92D2CA marked as ultimately trusted
gpg: revocation certificate stored as <span style="color:#e6db74">&#39;&#39;</span>public and secret key created and signed.
</code></pre></div><p>请注意上面的字符串&quot;B893B73ABC92D2CA&rdquo;，这是&quot;用户ID&quot;的Hash字符串，可以用来替代&quot;用户ID&rdquo;。</p>
<p>这时，最好再生成一张&quot;撤销证书&quot;，以备以后密钥作废时，可以请求外部的公钥服务器撤销你的公钥。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --gen-revoke <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span>
</code></pre></div><p>上面的&quot;用户ID&quot;部分，可以填入你的邮件地址或者Hash字符串（以下同）。</p>
<h4 id="密钥管理">密钥管理<a hidden class="anchor" aria-hidden="true" href="#密钥管理">#</a></h4>
<p><strong>列出密钥</strong></p>
<p>list-keys参数列出系统中已有的密钥．</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --list-keys
</code></pre></div><p>显示结果如下：</p>
<pre tabindex="0"><code>gpg: checking the trustdb
gpg: marginals needed: 3  completes needed: 1  trust model: pgp
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
/home/vane/.gnupg/pubring.kbx
-----------------------------
pub   rsa3072 2021-10-17 [SC]
      BC158F7500033355B5324CF14C701F8BF2E03463
uid           [ultimate] Vane Hsiung &lt;1664548605@qq.com&gt;
sub   rsa3072 2021-10-17 [E]
</code></pre><p>第一行显示公钥文件名（pubring.gpg），第二行显示公钥特征（4096位，Hash字符串和生成时间），第三行显示&quot;用户ID&quot;，第四行显示私钥特征。</p>
<p>如果你要从密钥列表中删除某个密钥，可以使用如下参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --delete-secret-keys <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span>
$ gpg --delete-key <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span>
</code></pre></div><p><strong>输出密钥</strong></p>
<p>公钥文件（.gnupg/pubring.gpg）以二进制形式储存，armor参数可以将其转换为ASCII码显示。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --armor --output public-key.txt --export <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span>
</code></pre></div><p>&ldquo;用户ID&quot;指定哪个用户的公钥，output参数指定输出文件名（public-key.txt）。</p>
<p>类似地，export-secret-keys参数可以转换私钥。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --armor --output private-key.txt --export-secret-keys
</code></pre></div><p><strong>上传公钥</strong></p>
<p>公钥服务器是网络上专门储存用户公钥的服务器。send-keys参数可以将公钥上传到服务器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --send-keys <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span> --keyserver hkp://subkeys.pgp.net
</code></pre></div><p>使用上面的命令，你的公钥就被传到了服务器subkeys.pgp.net，然后通过交换机制，所有的公钥服务器最终都会包含你的公钥。</p>
<p>由于公钥服务器没有检查机制，任何人都可以用你的名义上传公钥，所以没有办法保证服务器上的公钥的可靠性。通常，你可以在网站上公布一个公钥指纹，让其他人核对下载到的公钥是否为真。fingerprint参数生成公钥指纹。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --fingerprint <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span>
</code></pre></div><p><strong>输入密钥</strong></p>
<p>除了生成自己的密钥，还需要将他人的公钥或者你的其他密钥输入系统。这时可以使用import参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --import <span style="color:#f92672">[</span>密钥文件<span style="color:#f92672">]</span>
</code></pre></div><p>为了获得他人的公钥，可以让对方直接发给你，或者到公钥服务器上寻找。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --keyserver hkp://subkeys.pgp.net --search-keys <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span>
</code></pre></div><p>正如前面提到的，我们无法保证服务器上的公钥是否可靠，下载后还需要用其他机制验证．</p>
<h4 id="加密和解密">加密和解密<a hidden class="anchor" aria-hidden="true" href="#加密和解密">#</a></h4>
<p><strong>加密</strong></p>
<p>假定有一个文本文件demo.txt，怎样对它加密呢？</p>
<p>encrypt参数用于加密。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --recipient <span style="color:#f92672">[</span>用户ID<span style="color:#f92672">]</span> --output demo.en.txt --encrypt demo.txt
</code></pre></div><p>recipient参数指定接收者的公钥，output参数指定加密后的文件名，encrypt参数指定源文件。运行上面的命令后，demo.en.txt就是已加密的文件，可以把它发给对方。</p>
<p><strong>解密</strong></p>
<p>对方收到加密文件以后，就用自己的私钥解密。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --output demo.de.txt --decrypt demo.en.txt
</code></pre></div><p>output 指定解密后生成的文件，decrypt参数指定需要解密的文件。运行上面的命令，demo.de.txt就是解密后的文件。</p>
<p>GPG允许省略decrypt参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg demo.en.txt
</code></pre></div><h4 id="签名">签名<a hidden class="anchor" aria-hidden="true" href="#签名">#</a></h4>
<p><strong>对文件签名</strong></p>
<p>有时，我们不需要加密文件，只需要对文件签名，表示这个文件确实是我本人发出的。sign参数用来签名。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --sign demo.txt
</code></pre></div><p>运行上面的命令后，当前目录下生成demo.txt.gpg文件，这就是签名后的文件。这个文件默认采用二进制储存，如果想生成ASCII码的签名文件，可以使用clearsign参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --clearsign demo.txt
</code></pre></div><p>运行上面的命令后 ，当前目录下生成demo.txt.asc文件，后缀名asc表示该文件是ASCII码形式的。</p>
<p>如果想生成单独的签名文件，与文件内容分开存放，可以使用detach-sign参数。　　</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --detach-sign demo.txt
</code></pre></div><p>运行上面的命令后，当前目录下生成一个单独的签名文件demo.txt.sig。该文件是二进制形式的，如果想采用ASCII码形式，要加上armor参数。　　</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --armor --detach-sign demo.txt
</code></pre></div><p><strong>签名+加密</strong></p>
<p>上一节的参数，都是只签名不加密。如果想同时签名和加密，可以使用下面的命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --local-user <span style="color:#f92672">[</span>发信者ID<span style="color:#f92672">]</span> --recipient <span style="color:#f92672">[</span>接收者ID<span style="color:#f92672">]</span> --armor --sign --encrypt demo.txt
</code></pre></div><p>local-user参数指定用发信者的私钥签名，recipient参数指定用接收者的公钥加密，armor参数表示采用ASCII码形式显示，sign参数表示需要签名，encrypt参数表示指定源文件。</p>
<p><strong>验证签名</strong></p>
<p>我们收到别人签名后的文件，需要用对方的公钥验证签名是否为真。verify参数用来验证。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gpg --verify demo.txt.asc demo.txt
</code></pre></div><p>举例来说，<a href="https://openvpn.net/index.php/open-source/downloads.html">openvpn</a>网站就提供每一个下载包的gpg签名文件。你可以根据它的<a href="https://openvpn.net/index.php/open-source/documentation/sig.html">说明</a>，验证这些下载包是否为真。</p>
<h2 id="others-2">Others<a hidden class="anchor" aria-hidden="true" href="#others-2">#</a></h2>
<h3 id="ubuntu-packages-searchhttpspackagesubuntucom"><a href="https://packages.ubuntu.com/">Ubuntu Packages Search</a><a hidden class="anchor" aria-hidden="true" href="#ubuntu-packages-searchhttpspackagesubuntucom">#</a></h3>
<h3 id="list-of-applicationshttpswikiarchlinuxorgtitlelist_of_applicationsarch"><a href="https://wiki.archlinux.org/title/List_of_applications">List of applications</a>:Arch<a hidden class="anchor" aria-hidden="true" href="#list-of-applicationshttpswikiarchlinuxorgtitlelist_of_applicationsarch">#</a></h3>
<h3 id="recommended-applicationshttpswikigentooorgwikirecommended_applications-gentoo"><a href="https://wiki.gentoo.org/wiki/Recommended_applications">Recommended applications</a>: Gentoo<a hidden class="anchor" aria-hidden="true" href="#recommended-applicationshttpswikigentooorgwikirecommended_applications-gentoo">#</a></h3>
<h3 id="常用软件httpszhopensuseorge5b8b8e794a8e8bdafe4bbb6opensuse"><a href="https://zh.opensuse.org/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6">常用软件</a>:openSUSE<a hidden class="anchor" aria-hidden="true" href="#常用软件httpszhopensuseorge5b8b8e794a8e8bdafe4bbb6opensuse">#</a></h3>
<h3 id="awesome-linux-softwarehttpsgithubcomlewisvoawesome-linux-software"><a href="https://github.com/LewisVo/Awesome-Linux-Software">Awesome-Linux-Software</a><a hidden class="anchor" aria-hidden="true" href="#awesome-linux-softwarehttpsgithubcomlewisvoawesome-linux-software">#</a></h3>
<h3 id="应用下载-优麒麟httpswwwubuntukylincomapplications"><a href="https://www.ubuntukylin.com/applications/">应用下载-优麒麟</a><a hidden class="anchor" aria-hidden="true" href="#应用下载-优麒麟httpswwwubuntukylincomapplications">#</a></h3>
<p>国内应用 wine 版 deb 包。</p>
<h3 id="aurhttpsaurarchlinuxorg"><a href="https://aur.archlinux.org/">AUR</a><a hidden class="anchor" aria-hidden="true" href="#aurhttpsaurarchlinuxorg">#</a></h3>
<p>抄安装脚本。</p>
<h3 id="gentoo-portage-overlayshttpgpozugainaorg"><a href="http://gpo.zugaina.org/">Gentoo Portage Overlays</a><a hidden class="anchor" aria-hidden="true" href="#gentoo-portage-overlayshttpgpozugainaorg">#</a></h3>
<p>抄安装脚本。</p>
<h3 id="铜豌豆软件生态httpswwwatzlinuxcomallpackageshtm"><a href="https://www.atzlinux.com/allpackages.htm">铜豌豆软件生态</a><a hidden class="anchor" aria-hidden="true" href="#铜豌豆软件生态httpswwwatzlinuxcomallpackageshtm">#</a></h3>
<ul>
<li>铜豌豆 Linux 收集整理制作了大量中国人常用的应用软件，丰富 Linux 桌面系统软件生态。</li>
<li>大家可以在添加铜豌豆软件源后，来安装使用这些软件包。</li>
<li>铜豌豆软件源不但支持 铜豌豆 Linux 系统，还支持 <strong>Debian 系</strong>的所有 Linux 发行版。Debian、Armbian、Ubuntu、深度、优麒麟、红旗等。</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sakamotokurome.github.io/tags/unix/">Unix</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://sakamotokurome.github.io/tags/ubuntu/">Ubuntu</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://sakamotokurome.github.io/posts/ubuntusystem/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Ubuntu System</span>
  </a>
  <a class="next" href="https://sakamotokurome.github.io/posts/links/">
    <span class="title">Next Page »</span>
    <br>
    <span>Links</span>
  </a>
</nav>

  </footer>
</article>

<div class="disqus-container">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    this.page.identifier = '43f1d7';
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "sakamotokurome" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://sakamotokurome.github.io/">Sakamoto Kurome</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
